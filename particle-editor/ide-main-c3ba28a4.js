/*! For license information please see ide-main-c3ba28a4.js.LICENSE.txt */
(()=>{var __webpack_modules__={20:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(7108),s=i(6737),o=i(6698),a=i(5359),h=i(4847),l=i(2951);function u(t){s.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hashType=e.hash,this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function c(t){s.Writable.call(this);var e=l[t];if(!e)throw new Error("Unknown message digest");this._hash=n(e.hash),this._tag=e.id,this._signType=e.sign}function d(t){return new u(t)}function f(t){return new c(t)}Object.keys(l).forEach(function(t){l[t].id=r.from(l[t].id,"hex"),l[t.toLowerCase()]=l[t]}),o(u,s.Writable),u.prototype._write=function(t,e,i){this._hash.update(t),i()},u.prototype.update=function(t,e){return this._hash.update("string"==typeof t?r.from(t,e):t),this},u.prototype.sign=function(t,e){this.end();var i=this._hash.digest(),r=a(i,t,this._hashType,this._signType,this._tag);return e?r.toString(e):r},o(c,s.Writable),c.prototype._write=function(t,e,i){this._hash.update(t),i()},c.prototype.update=function(t,e){return this._hash.update("string"==typeof t?r.from(t,e):t),this},c.prototype.verify=function(t,e,i){var n="string"==typeof e?r.from(e,i):e;this.end();var s=this._hash.digest();return h(n,s,t,this._signType,this._tag)},t.exports={Sign:d,Verify:f,createSign:d,createVerify:f}},41:(t,e,i)=>{"use strict";var r=i(655),n=i(8068),s=i(9675),o=i(5795);t.exports=function(t,e,i){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new s("`obj` must be an object or a function`");if("string"!=typeof e&&"symbol"!=typeof e)throw new s("`property` must be a string or a symbol`");if(arguments.length>3&&"boolean"!=typeof arguments[3]&&null!==arguments[3])throw new s("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&"boolean"!=typeof arguments[4]&&null!==arguments[4])throw new s("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&"boolean"!=typeof arguments[5]&&null!==arguments[5])throw new s("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&"boolean"!=typeof arguments[6])throw new s("`loose`, if provided, must be a boolean");var a=arguments.length>3?arguments[3]:null,h=arguments.length>4?arguments[4]:null,l=arguments.length>5?arguments[5]:null,u=arguments.length>6&&arguments[6],c=!!o&&o(t,e);if(r)r(t,e,{configurable:null===l&&c?c.configurable:!l,enumerable:null===a&&c?c.enumerable:!a,value:i,writable:null===h&&c?c.writable:!h});else{if(!u&&(a||h||l))throw new n("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.");t[e]=i}}},76:t=>{"use strict";t.exports=Function.prototype.call},82:(t,e,i)=>{var r=i(6698),n=i(8287).Buffer,s=i(7568),o=s.base,a=s.constants.der;function h(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){o.Node.call(this,"der",t)}function u(t){return t<10?"0"+t:t}t.exports=h,h.prototype.encode=function(t,e){return this.tree._encode(t,e).join()},r(l,o.Node),l.prototype._encodeComposite=function(t,e,i,r){var s,o=function(t,e,i,r){var n;if("seqof"===t?t="seq":"setof"===t&&(t="set"),a.tagByName.hasOwnProperty(t))n=a.tagByName[t];else{if("number"!=typeof t||(0|t)!==t)return r.error("Unknown tag: "+t);n=t}return n>=31?r.error("Multi-octet tag encoding unsupported"):(e||(n|=32),n|=a.tagClassByName[i||"universal"]<<6)}(t,e,i,this.reporter);if(r.length<128)return(s=new n(2))[0]=o,s[1]=r.length,this._createEncoderBuffer([s,r]);for(var h=1,l=r.length;l>=256;l>>=8)h++;(s=new n(2+h))[0]=o,s[1]=128|h,l=1+h;for(var u=r.length;u>0;l--,u>>=8)s[l]=255&u;return this._createEncoderBuffer([s,r])},l.prototype._encodeStr=function(t,e){if("bitstr"===e)return this._createEncoderBuffer([0|t.unused,t.data]);if("bmpstr"===e){for(var i=new n(2*t.length),r=0;r<t.length;r++)i.writeUInt16BE(t.charCodeAt(r),2*r);return this._createEncoderBuffer(i)}return"numstr"===e?this._isNumstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: numstr supports only digits and space"):"printstr"===e?this._isPrintstr(t)?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: printstr supports only latin upper and lower case letters, digits, space, apostrophe, left and rigth parenthesis, plus sign, comma, hyphen, dot, slash, colon, equal sign, question mark"):/str$/.test(e)||"objDesc"===e?this._createEncoderBuffer(t):this.reporter.error("Encoding of string type: "+e+" unsupported")},l.prototype._encodeObjid=function(t,e,i){if("string"==typeof t){if(!e)return this.reporter.error("string objid given, but no values map found");if(!e.hasOwnProperty(t))return this.reporter.error("objid not found in values map");t=e[t].split(/[\s\.]+/g);for(var r=0;r<t.length;r++)t[r]|=0}else if(Array.isArray(t))for(t=t.slice(),r=0;r<t.length;r++)t[r]|=0;if(!Array.isArray(t))return this.reporter.error("objid() should be either array or string, got: "+JSON.stringify(t));if(!i){if(t[1]>=40)return this.reporter.error("Second objid identifier OOB");t.splice(0,2,40*t[0]+t[1])}var s=0;for(r=0;r<t.length;r++){var o=t[r];for(s++;o>=128;o>>=7)s++}var a=new n(s),h=a.length-1;for(r=t.length-1;r>=0;r--)for(o=t[r],a[h--]=127&o;(o>>=7)>0;)a[h--]=128|127&o;return this._createEncoderBuffer(a)},l.prototype._encodeTime=function(t,e){var i,r=new Date(t);return"gentime"===e?i=[u(r.getFullYear()),u(r.getUTCMonth()+1),u(r.getUTCDate()),u(r.getUTCHours()),u(r.getUTCMinutes()),u(r.getUTCSeconds()),"Z"].join(""):"utctime"===e?i=[u(r.getFullYear()%100),u(r.getUTCMonth()+1),u(r.getUTCDate()),u(r.getUTCHours()),u(r.getUTCMinutes()),u(r.getUTCSeconds()),"Z"].join(""):this.reporter.error("Encoding "+e+" time is not supported yet"),this._encodeStr(i,"octstr")},l.prototype._encodeNull=function(){return this._createEncoderBuffer("")},l.prototype._encodeInt=function(t,e){if("string"==typeof t){if(!e)return this.reporter.error("String int or enum given, but no values map");if(!e.hasOwnProperty(t))return this.reporter.error("Values map doesn't contain: "+JSON.stringify(t));t=e[t]}if("number"!=typeof t&&!n.isBuffer(t)){var i=t.toArray();!t.sign&&128&i[0]&&i.unshift(0),t=new n(i)}if(n.isBuffer(t)){var r=t.length;0===t.length&&r++;var s=new n(r);return t.copy(s),0===t.length&&(s[0]=0),this._createEncoderBuffer(s)}if(t<128)return this._createEncoderBuffer(t);if(t<256)return this._createEncoderBuffer([0,t]);r=1;for(var o=t;o>=256;o>>=8)r++;for(o=(s=new Array(r)).length-1;o>=0;o--)s[o]=255&t,t>>=8;return 128&s[0]&&s.unshift(0),this._createEncoderBuffer(new n(s))},l.prototype._encodeBool=function(t){return this._createEncoderBuffer(t?255:0)},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getEncoder("der").tree},l.prototype._skipDefault=function(t,e,i){var r,n=this._baseState;if(null===n.default)return!1;var s=t.join();if(void 0===n.defaultBuffer&&(n.defaultBuffer=this._encodeValue(n.default,e,i).join()),s.length!==n.defaultBuffer.length)return!1;for(r=0;r<s.length;r++)if(s[r]!==n.defaultBuffer[r])return!1;return!0}},125:(t,e,i)=>{var r=i(4050),n=i(1241),s=i(530),o=i(2438),a=i(8078);function h(t,e,i){if(t=t.toLowerCase(),s[t])return n.createCipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t});throw new TypeError("invalid suite type")}function l(t,e,i){if(t=t.toLowerCase(),s[t])return n.createDecipheriv(t,e,i);if(o[t])return new r({key:e,iv:i,mode:t,decrypt:!0});throw new TypeError("invalid suite type")}e.createCipher=e.Cipher=function(t,e){var i,r;if(t=t.toLowerCase(),s[t])i=s[t].key,r=s[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}var n=a(e,!1,i,r);return h(t,n.key,n.iv)},e.createCipheriv=e.Cipheriv=h,e.createDecipher=e.Decipher=function(t,e){var i,r;if(t=t.toLowerCase(),s[t])i=s[t].key,r=s[t].iv;else{if(!o[t])throw new TypeError("invalid suite type");i=8*o[t].key,r=o[t].iv}var n=a(e,!1,i,r);return l(t,n.key,n.iv)},e.createDecipheriv=e.Decipheriv=l,e.listCiphers=e.getCiphers=function(){return Object.keys(o).concat(n.getCiphers())}},133:(t,e,i)=>{"use strict";i.d(e,{L:()=>n});const r={default:-1};function n(t="default"){return void 0===r[t]&&(r[t]=-1),++r[t]}},154:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(1917),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===n?r.A.Buffer:void 0,a=o?o.allocUnsafe:void 0;const h=function(t,e){if(e)return t.slice();var i=t.length,r=a?a(i):new t.constructor(i);return t.copy(r),r}},161:(t,e,i)=>{"use strict";function r(t){t.dispose()}i.d(e,{TP:()=>m});var n=i(2543);function s(t){Array.isArray(t)?t.forEach(t=>t.dispose()):t.dispose()}const o={disposeTextures:!0};function a(t,e){e=n.merge(o,e),t.alphaMap&&(e.disposeTextures&&s(t.alphaMap),t.alphaMap=void 0),t.aoMap&&(e.disposeTextures&&s(t.aoMap),t.aoMap=void 0),t.envMap&&(e.disposeTextures&&s(t.envMap),t.envMap=void 0),t.lightMap&&(e.disposeTextures&&s(t.lightMap),t.lightMap=void 0),t.map&&(e.disposeTextures&&s(t.map),t.map=void 0),t.specularMap&&(e.disposeTextures&&s(t.specularMap),t.specularMap=void 0),t.displacementMap&&(e.disposeTextures&&s(t.displacementMap),t.displacementMap=void 0),t.emissiveMap&&(e.disposeTextures&&s(t.emissiveMap),t.emissiveMap=void 0),t.bumpMap&&(e.disposeTextures&&s(t.bumpMap),t.bumpMap=void 0),t.matcap&&(e.disposeTextures&&s(t.matcap),t.matcap=void 0),t.normalMap&&(e.disposeTextures&&s(t.normalMap),t.normalMap=void 0),t.clearcoatMap&&(e.disposeTextures&&s(t.clearcoatMap),t.clearcoatMap=void 0),t.clearcoatNormalMap&&(e.disposeTextures&&s(t.clearcoatNormalMap),t.clearcoatNormalMap=void 0),t.clearcoatRoughnessMap&&(e.disposeTextures&&s(t.clearcoatRoughnessMap),t.clearcoatRoughnessMap=void 0),t.metalnessMap&&(e.disposeTextures&&s(t.metalnessMap),t.metalnessMap=void 0),t.roughnessMap&&(e.disposeTextures&&s(t.roughnessMap),t.roughnessMap=void 0),t.gradientMap&&(e.disposeTextures&&s(t.gradientMap),t.gradientMap=void 0),t.clippingPlanes?.splice(0)}const h={disposeTextures:!0};function l(t,e){e=n.merge(h,e),Array.isArray(t)?t.forEach(t=>{t.dispose(),a(t,e)}):(t.dispose(),a(t,e))}const u={disposeTextures:!0};function c(t,e){e=n.merge(u,e),l(t.material,e),r(t.geometry)}const d={disposeTextures:!0};function f(t,e){e=n.merge(d,e),t.skeleton.dispose(),l(t.material,e),r(t.geometry)}const p={traverse:!0,disposeTextures:!0},m={disposeGeometry:r,disposeMaterial:l,disposeMaterialTextures:a,disposeMeshLike:c,disposeObject3D:function t(e,i){const r=e;(i=n.merge(p,i)).traverse&&e.children.forEach(e=>t(e,i)),r.isSkinnedMesh&&f(e,i),(r.isMesh??r.isLine??r.isPoints??r.isSprite)&&c(e,i),r.clear()},disposeSkinnedMeshLike:f,disposeTexture:s}},206:(t,e,i)=>{"use strict";var r=i(5606),n=i(3225);t.exports=b;var s,o=i(2240);b.ReadableState=y,i(7007).EventEmitter;var a=function(t,e){return t.listeners(e).length},h=i(5567),l=i(4116).Buffer,u=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=Object.create(i(5622));c.inherits=i(6698);var d=i(2668),f=void 0;f=d&&d.debuglog?d.debuglog("stream"):function(){};var p,m=i(672),g=i(6278);c.inherits(b,h);var v=["error","close","destroy","pause","resume"];function y(t,e){t=t||{};var r=e instanceof(s=s||i(6248));this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.readableObjectMode);var n=t.highWaterMark,o=t.readableHighWaterMark,a=this.objectMode?16:16384;this.highWaterMark=n||0===n?n:r&&(o||0===o)?o:a,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new m,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(p||(p=i(6427).I),this.decoder=new p(t.encoding),this.encoding=t.encoding)}function b(t){if(s=s||i(6248),!(this instanceof b))return new b(t);this._readableState=new y(t,this),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),h.call(this)}function _(t,e,i,r,n){var s,o=t._readableState;return null===e?(o.reading=!1,function(t,e){if(!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,S(t)}}(t,o)):(n||(s=function(t,e){var i,r;return r=e,l.isBuffer(r)||r instanceof u||"string"==typeof e||void 0===e||t.objectMode||(i=new TypeError("Invalid non-string/buffer chunk")),i}(o,e)),s?t.emit("error",s):o.objectMode||e&&e.length>0?("string"==typeof e||o.objectMode||Object.getPrototypeOf(e)===l.prototype||(e=function(t){return l.from(t)}(e)),r?o.endEmitted?t.emit("error",new Error("stream.unshift() after end event")):x(t,o,e,!0):o.ended?t.emit("error",new Error("stream.push() after EOF")):(o.reading=!1,o.decoder&&!i?(e=o.decoder.write(e),o.objectMode||0!==e.length?x(t,o,e,!1):E(t,o)):x(t,o,e,!1))):r||(o.reading=!1)),function(t){return!t.ended&&(t.needReadable||t.length<t.highWaterMark||0===t.length)}(o)}function x(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(t.emit("data",i),t.read(0)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&S(t)),E(t,e)}Object.defineProperty(b.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),b.prototype.destroy=g.destroy,b.prototype._undestroy=g.undestroy,b.prototype._destroy=function(t,e){this.push(null),e(t)},b.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=l.from(t,e),e=""),i=!0),_(this,t,e,!1,i)},b.prototype.unshift=function(t){return _(this,t,null,!0,!1)},b.prototype.isPaused=function(){return!1===this._readableState.flowing},b.prototype.setEncoding=function(t){return p||(p=i(6427).I),this._readableState.decoder=new p(t),this._readableState.encoding=t,this};var w=8388608;function M(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=w?t=w:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function S(t){var e=t._readableState;e.needReadable=!1,e.emittedReadable||(f("emitReadable",e.flowing),e.emittedReadable=!0,e.sync?n.nextTick(A,t):A(t))}function A(t){f("emit readable"),t.emit("readable"),C(t)}function E(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(T,t,e))}function T(t,e){for(var i=e.length;!e.reading&&!e.flowing&&!e.ended&&e.length<e.highWaterMark&&(f("maybeReadMore read 0"),t.read(0),i!==e.length);)i=e.length;e.readingMore=!1}function R(t){f("readable nexttick read 0"),t.read(0)}function P(t,e){e.reading||(f("resume read 0"),t.read(0)),e.resumeScheduled=!1,e.awaitDrain=0,t.emit("resume"),C(t),e.flowing&&!e.reading&&t.read(0)}function C(t){var e=t._readableState;for(f("flow",e.flowing);e.flowing&&null!==t.read(););}function I(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.head.data:e.buffer.concat(e.length),e.buffer.clear()):i=function(t,e,i){var r;return t<e.head.data.length?(r=e.head.data.slice(0,t),e.head.data=e.head.data.slice(t)):r=t===e.head.data.length?e.shift():i?function(t,e){var i=e.head,r=1,n=i.data;for(t-=n.length;i=i.next;){var s=i.data,o=t>s.length?s.length:t;if(o===s.length?n+=s:n+=s.slice(0,t),0===(t-=o)){o===s.length?(++r,i.next?e.head=i.next:e.head=e.tail=null):(e.head=i,i.data=s.slice(o));break}++r}return e.length-=r,n}(t,e):function(t,e){var i=l.allocUnsafe(t),r=e.head,n=1;for(r.data.copy(i),t-=r.data.length;r=r.next;){var s=r.data,o=t>s.length?s.length:t;if(s.copy(i,i.length-t,0,o),0===(t-=o)){o===s.length?(++n,r.next?e.head=r.next:e.head=e.tail=null):(e.head=r,r.data=s.slice(o));break}++n}return e.length-=n,i}(t,e),r}(t,e.buffer,e.decoder),i);var i}function k(t){var e=t._readableState;if(e.length>0)throw new Error('"endReadable()" called on non-empty stream');e.endEmitted||(e.ended=!0,n.nextTick(B,e,t))}function B(t,e){t.endEmitted||0!==t.length||(t.endEmitted=!0,e.readable=!1,e.emit("end"))}function O(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}b.prototype.read=function(t){f("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&(e.length>=e.highWaterMark||e.ended))return f("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?k(this):S(this),null;if(0===(t=M(t,e))&&e.ended)return 0===e.length&&k(this),null;var r,n=e.needReadable;return f("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&f("length less than watermark",n=!0),e.ended||e.reading?f("reading or ended",n=!1):n&&(f("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=M(i,e))),null===(r=t>0?I(t,e):null)?(e.needReadable=!0,t=0):e.length-=t,0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&k(this)),null!==r&&this.emit("data",r),r},b.prototype._read=function(t){this.emit("error",new Error("_read() is not implemented"))},b.prototype.pipe=function(t,e){var i=this,s=this._readableState;switch(s.pipesCount){case 0:s.pipes=t;break;case 1:s.pipes=[s.pipes,t];break;default:s.pipes.push(t)}s.pipesCount+=1,f("pipe count=%d opts=%j",s.pipesCount,e);var h=e&&!1===e.end||t===r.stdout||t===r.stderr?y:l;function l(){f("onend"),t.end()}s.endEmitted?n.nextTick(h):i.once("end",h),t.on("unpipe",function e(r,n){f("onunpipe"),r===i&&n&&!1===n.hasUnpiped&&(n.hasUnpiped=!0,f("cleanup"),t.removeListener("close",g),t.removeListener("finish",v),t.removeListener("drain",u),t.removeListener("error",m),t.removeListener("unpipe",e),i.removeListener("end",l),i.removeListener("end",y),i.removeListener("data",p),c=!0,!s.awaitDrain||t._writableState&&!t._writableState.needDrain||u())});var u=function(t){return function(){var e=t._readableState;f("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&a(t,"data")&&(e.flowing=!0,C(t))}}(i);t.on("drain",u);var c=!1,d=!1;function p(e){f("ondata"),d=!1,!1!==t.write(e)||d||((1===s.pipesCount&&s.pipes===t||s.pipesCount>1&&-1!==O(s.pipes,t))&&!c&&(f("false write response, pause",s.awaitDrain),s.awaitDrain++,d=!0),i.pause())}function m(e){f("onerror",e),y(),t.removeListener("error",m),0===a(t,"error")&&t.emit("error",e)}function g(){t.removeListener("finish",v),y()}function v(){f("onfinish"),t.removeListener("close",g),y()}function y(){f("unpipe"),i.unpipe(t)}return i.on("data",p),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?o(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",m),t.once("close",g),t.once("finish",v),t.emit("pipe",i),s.flowing||(f("pipe resume"),i.resume()),t},b.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=O(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},b.prototype.on=function(t,e){var i=h.prototype.on.call(this,t,e);if("data"===t)!1!==this._readableState.flowing&&this.resume();else if("readable"===t){var r=this._readableState;r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.emittedReadable=!1,r.reading?r.length&&S(this):n.nextTick(R,this))}return i},b.prototype.addListener=b.prototype.on,b.prototype.resume=function(){var t=this._readableState;return t.flowing||(f("resume"),t.flowing=!0,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(P,t,e))}(this,t)),this},b.prototype.pause=function(){return f("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(f("pause"),this._readableState.flowing=!1,this.emit("pause")),this},b.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",function(){if(f("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){f("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var s=0;s<v.length;s++)t.on(v[s],this.emit.bind(this,v[s]));return this._read=function(e){f("wrapped _read",e),r&&(r=!1,t.resume())},this},Object.defineProperty(b.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),b._fromList=I},218:(t,e,i)=>{"use strict";i.d(e,{n:()=>h});var r=i(4486),n=i(133),s=i(4670);const o=Object.create(null),a=class t extends r.A{constructor(e={}){super(),this._resourceType="textureSampler",this._touched=0,this._maxAnisotropy=1,this.destroyed=!1,e={...t.defaultOptions,...e},this.addressMode=e.addressMode,this.addressModeU=e.addressModeU??this.addressModeU,this.addressModeV=e.addressModeV??this.addressModeV,this.addressModeW=e.addressModeW??this.addressModeW,this.scaleMode=e.scaleMode,this.magFilter=e.magFilter??this.magFilter,this.minFilter=e.minFilter??this.minFilter,this.mipmapFilter=e.mipmapFilter??this.mipmapFilter,this.lodMinClamp=e.lodMinClamp,this.lodMaxClamp=e.lodMaxClamp,this.compare=e.compare,this.maxAnisotropy=e.maxAnisotropy??1}set addressMode(t){this.addressModeU=t,this.addressModeV=t,this.addressModeW=t}get addressMode(){return this.addressModeU}set wrapMode(t){(0,s.t6)(s.lj,"TextureStyle.wrapMode is now TextureStyle.addressMode"),this.addressMode=t}get wrapMode(){return this.addressMode}set scaleMode(t){this.magFilter=t,this.minFilter=t,this.mipmapFilter=t}get scaleMode(){return this.magFilter}set maxAnisotropy(t){this._maxAnisotropy=Math.min(t,16),this._maxAnisotropy>1&&(this.scaleMode="linear")}get maxAnisotropy(){return this._maxAnisotropy}get _resourceId(){return this._sharedResourceId||this._generateResourceId()}update(){this.emit("change",this),this._sharedResourceId=null}_generateResourceId(){const t=`${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;return this._sharedResourceId=function(t){const e=o[t];return void 0===e&&(o[t]=(0,n.L)("resource")),e}(t),this._resourceId}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this.removeAllListeners()}};a.defaultOptions={addressMode:"clamp-to-edge",scaleMode:"linear"};let h=a},220:(t,e,i)=>{"use strict";var r=i(9404),n=i(7011),s=n.assert,o=n.cachedProperty,a=n.parseBytes;function h(t,e){this.eddsa=t,"object"!=typeof e&&(e=a(e)),Array.isArray(e)&&(s(e.length===2*t.encodingLength,"Signature has invalid size"),e={R:e.slice(0,t.encodingLength),S:e.slice(t.encodingLength)}),s(e.R&&e.S,"Signature without R or S"),t.isPoint(e.R)&&(this._R=e.R),e.S instanceof r&&(this._S=e.S),this._Rencoded=Array.isArray(e.R)?e.R:e.Rencoded,this._Sencoded=Array.isArray(e.S)?e.S:e.Sencoded}o(h,"S",function(){return this.eddsa.decodeInt(this.Sencoded())}),o(h,"R",function(){return this.eddsa.decodePoint(this.Rencoded())}),o(h,"Rencoded",function(){return this.eddsa.encodePoint(this.R())}),o(h,"Sencoded",function(){return this.eddsa.encodeInt(this.S())}),h.prototype.toBytes=function(){return this.Rencoded().concat(this.Sencoded())},h.prototype.toHex=function(){return n.encode(this.toBytes(),"hex").toUpperCase()},t.exports=h},228:t=>{"use strict";var e=Object.prototype.hasOwnProperty,i="~";function r(){}function n(t,e,i){this.fn=t,this.context=e,this.once=i||!1}function s(t,e,r,s,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new n(r,s||t,o),h=i?i+e:e;return t._events[h]?t._events[h].fn?t._events[h]=[t._events[h],a]:t._events[h].push(a):(t._events[h]=a,t._eventsCount++),t}function o(t,e){0===--t._eventsCount?t._events=new r:delete t._events[e]}function a(){this._events=new r,this._eventsCount=0}Object.create&&(r.prototype=Object.create(null),(new r).__proto__||(i=!1)),a.prototype.eventNames=function(){var t,r,n=[];if(0===this._eventsCount)return n;for(r in t=this._events)e.call(t,r)&&n.push(i?r.slice(1):r);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},a.prototype.listeners=function(t){var e=i?i+t:t,r=this._events[e];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,s=r.length,o=new Array(s);n<s;n++)o[n]=r[n].fn;return o},a.prototype.listenerCount=function(t){var e=i?i+t:t,r=this._events[e];return r?r.fn?1:r.length:0},a.prototype.emit=function(t,e,r,n,s,o){var a=i?i+t:t;if(!this._events[a])return!1;var h,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,r),!0;case 4:return u.fn.call(u.context,e,r,n),!0;case 5:return u.fn.call(u.context,e,r,n,s),!0;case 6:return u.fn.call(u.context,e,r,n,s,o),!0}for(l=1,h=new Array(c-1);l<c;l++)h[l-1]=arguments[l];u.fn.apply(u.context,h)}else{var d,f=u.length;for(l=0;l<f;l++)switch(u[l].once&&this.removeListener(t,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,e);break;case 3:u[l].fn.call(u[l].context,e,r);break;case 4:u[l].fn.call(u[l].context,e,r,n);break;default:if(!h)for(d=1,h=new Array(c-1);d<c;d++)h[d-1]=arguments[d];u[l].fn.apply(u[l].context,h)}}return!0},a.prototype.on=function(t,e,i){return s(this,t,e,i,!1)},a.prototype.once=function(t,e,i){return s(this,t,e,i,!0)},a.prototype.removeListener=function(t,e,r,n){var s=i?i+t:t;if(!this._events[s])return this;if(!e)return o(this,s),this;var a=this._events[s];if(a.fn)a.fn!==e||n&&!a.once||r&&a.context!==r||o(this,s);else{for(var h=0,l=[],u=a.length;h<u;h++)(a[h].fn!==e||n&&!a[h].once||r&&a[h].context!==r)&&l.push(a[h]);l.length?this._events[s]=1===l.length?l[0]:l:o(this,s)}return this},a.prototype.removeAllListeners=function(t){var e;return t?(e=i?i+t:t,this._events[e]&&o(this,e)):(this._events=new r,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,t.exports=a},241:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=i(1917).A.Symbol},251:(t,e)=>{e.read=function(t,e,i,r,n){var s,o,a=8*n-r-1,h=(1<<a)-1,l=h>>1,u=-7,c=i?n-1:0,d=i?-1:1,f=t[e+c];for(c+=d,s=f&(1<<-u)-1,f>>=-u,u+=a;u>0;s=256*s+t[e+c],c+=d,u-=8);for(o=s&(1<<-u)-1,s>>=-u,u+=r;u>0;o=256*o+t[e+c],c+=d,u-=8);if(0===s)s=1-l;else{if(s===h)return o?NaN:1/0*(f?-1:1);o+=Math.pow(2,r),s-=l}return(f?-1:1)*o*Math.pow(2,s-r)},e.write=function(t,e,i,r,n,s){var o,a,h,l=8*s-n-1,u=(1<<l)-1,c=u>>1,d=23===n?Math.pow(2,-24)-Math.pow(2,-77):0,f=r?0:s-1,p=r?1:-1,m=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,o=u):(o=Math.floor(Math.log(e)/Math.LN2),e*(h=Math.pow(2,-o))<1&&(o--,h*=2),(e+=o+c>=1?d/h:d*Math.pow(2,1-c))*h>=2&&(o++,h/=2),o+c>=u?(a=0,o=u):o+c>=1?(a=(e*h-1)*Math.pow(2,n),o+=c):(a=e*Math.pow(2,c-1)*Math.pow(2,n),o=0));n>=8;t[i+f]=255&a,f+=p,a/=256,n-=8);for(o=o<<n|a,l+=n;l>0;t[i+f]=255&o,f+=p,o/=256,l-=8);t[i+f-p]|=128*m}},268:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var r=i(6763);let n=0;const s=500;function o(...t){n!==s&&(n++,n===s?r.warn("PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS."):r.warn("PixiJS Warning: ",...t))}},295:(t,e,i)=>{var r=i(8287).Buffer;t.exports=function(t,e){for(var i=Math.min(t.length,e.length),n=new r(i),s=0;s<i;++s)n[s]=t[s]^e[s];return n}},320:(t,e,i)=>{var r=i(8276);t.exports=function(t){return(new r).update(t).digest()}},345:(t,e,i)=>{t.exports=i(7007).EventEmitter},367:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t,e){return function(i){return t(e(i))}}},370:(t,e,i)=>{"use strict";var r=i(9404),n=i(6698),s=i(6677),o=i(7011);function a(t){s.call(this,"mont",t),this.a=new r(t.a,16).toRed(this.red),this.b=new r(t.b,16).toRed(this.red),this.i4=new r(4).toRed(this.red).redInvm(),this.two=new r(2).toRed(this.red),this.a24=this.i4.redMul(this.a.redAdd(this.two))}function h(t,e,i){s.BasePoint.call(this,t,"projective"),null===e&&null===i?(this.x=this.curve.one,this.z=this.curve.zero):(this.x=new r(e,16),this.z=new r(i,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)))}n(a,s),t.exports=a,a.prototype.validate=function(t){var e=t.normalize().x,i=e.redSqr(),r=i.redMul(e).redAdd(i.redMul(this.a)).redAdd(e);return 0===r.redSqrt().redSqr().cmp(r)},n(h,s.BasePoint),a.prototype.decodePoint=function(t,e){return this.point(o.toArray(t,e),1)},a.prototype.point=function(t,e){return new h(this,t,e)},a.prototype.pointFromJSON=function(t){return h.fromJSON(this,t)},h.prototype.precompute=function(){},h.prototype._encode=function(){return this.getX().toArray("be",this.curve.p.byteLength())},h.fromJSON=function(t,e){return new h(t,e[0],e[1]||t.one)},h.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},h.prototype.isInfinity=function(){return 0===this.z.cmpn(0)},h.prototype.dbl=function(){var t=this.x.redAdd(this.z).redSqr(),e=this.x.redSub(this.z).redSqr(),i=t.redSub(e),r=t.redMul(e),n=i.redMul(e.redAdd(this.curve.a24.redMul(i)));return this.curve.point(r,n)},h.prototype.add=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.diffAdd=function(t,e){var i=this.x.redAdd(this.z),r=this.x.redSub(this.z),n=t.x.redAdd(t.z),s=t.x.redSub(t.z).redMul(i),o=n.redMul(r),a=e.z.redMul(s.redAdd(o).redSqr()),h=e.x.redMul(s.redISub(o).redSqr());return this.curve.point(a,h)},h.prototype.mul=function(t){for(var e=t.clone(),i=this,r=this.curve.point(null,null),n=[];0!==e.cmpn(0);e.iushrn(1))n.push(e.andln(1));for(var s=n.length-1;s>=0;s--)0===n[s]?(i=i.diffAdd(r,this),r=r.dbl()):(r=i.diffAdd(r,this),i=i.dbl());return r},h.prototype.mulAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.jumlAdd=function(){throw new Error("Not supported on Montgomery curve")},h.prototype.eq=function(t){return 0===this.getX().cmp(t.getX())},h.prototype.normalize=function(){return this.x=this.x.redMul(this.z.redInvm()),this.z=this.curve.one,this},h.prototype.getX=function(){return this.normalize(),this.x.fromRed()}},392:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(5377);function s(t,e){this._block=r.alloc(t),this._finalSize=e,this._blockSize=t,this._len=0}s.prototype.update=function(t,e){t=n(t,e||"utf8");for(var i=this._block,r=this._blockSize,s=t.length,o=this._len,a=0;a<s;){for(var h=o%r,l=Math.min(s-a,r-h),u=0;u<l;u++)i[h+u]=t[a+u];a+=l,(o+=l)%r===0&&this._update(i)}return this._len+=s,this},s.prototype.digest=function(t){var e=this._len%this._blockSize;this._block[e]=128,this._block.fill(0,e+1),e>=this._finalSize&&(this._update(this._block),this._block.fill(0));var i=8*this._len;if(i<=4294967295)this._block.writeUInt32BE(i,this._blockSize-4);else{var r=(4294967295&i)>>>0,n=(i-r)/4294967296;this._block.writeUInt32BE(n,this._blockSize-8),this._block.writeUInt32BE(r,this._blockSize-4)}this._update(this._block);var s=this._hash();return t?s.toString(t):s},s.prototype._update=function(){throw new Error("_update must be implemented by subclass")},t.exports=s},407:(t,e,i)=>{"use strict";i.d(e,{A:()=>h});var r=i(3149),n=Object.create;const s=function(){function t(){}return function(e){if(!(0,r.A)(e))return{};if(n)return n(e);t.prototype=e;var i=new t;return t.prototype=void 0,i}}();var o=i(5647),a=i(7271);const h=function(t){return"function"!=typeof t.constructor||(0,a.A)(t)?{}:s((0,o.A)(t))}},414:t=>{"use strict";t.exports=Math.round},423:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var r=i(9520),n=i(5175),s=i(2049),o=i(1200),a=i(5353),h=i(4749),l=Object.prototype.hasOwnProperty;const u=function(t,e){var i=(0,s.A)(t),u=!i&&(0,n.A)(t),c=!i&&!u&&(0,o.A)(t),d=!i&&!u&&!c&&(0,h.A)(t),f=i||u||c||d,p=f?(0,r.A)(t.length,String):[],m=p.length;for(var g in t)!e&&!l.call(t,g)||f&&("length"==g||c&&("offset"==g||"parent"==g)||d&&("buffer"==g||"byteLength"==g||"byteOffset"==g)||(0,a.A)(g,m))||p.push(g);return p}},453:(t,e,i)=>{"use strict";var r,n=i(9612),s=i(9383),o=i(1237),a=i(9290),h=i(9538),l=i(8068),u=i(9675),c=i(5345),d=i(1514),f=i(8968),p=i(6188),m=i(8002),g=i(5880),v=i(414),y=i(3093),b=Function,_=function(t){try{return b('"use strict"; return ('+t+").constructor;")()}catch(t){}},x=i(5795),w=i(655),M=function(){throw new u},S=x?function(){try{return M}catch(t){try{return x(arguments,"callee").get}catch(t){return M}}}():M,A=i(4039)(),E=i(3628),T=i(1064),R=i(8648),P=i(1002),C=i(76),I={},k="undefined"!=typeof Uint8Array&&E?E(Uint8Array):r,B={__proto__:null,"%AggregateError%":"undefined"==typeof AggregateError?r:AggregateError,"%Array%":Array,"%ArrayBuffer%":"undefined"==typeof ArrayBuffer?r:ArrayBuffer,"%ArrayIteratorPrototype%":A&&E?E([][Symbol.iterator]()):r,"%AsyncFromSyncIteratorPrototype%":r,"%AsyncFunction%":I,"%AsyncGenerator%":I,"%AsyncGeneratorFunction%":I,"%AsyncIteratorPrototype%":I,"%Atomics%":"undefined"==typeof Atomics?r:Atomics,"%BigInt%":"undefined"==typeof BigInt?r:BigInt,"%BigInt64Array%":"undefined"==typeof BigInt64Array?r:BigInt64Array,"%BigUint64Array%":"undefined"==typeof BigUint64Array?r:BigUint64Array,"%Boolean%":Boolean,"%DataView%":"undefined"==typeof DataView?r:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":s,"%eval%":eval,"%EvalError%":o,"%Float16Array%":"undefined"==typeof Float16Array?r:Float16Array,"%Float32Array%":"undefined"==typeof Float32Array?r:Float32Array,"%Float64Array%":"undefined"==typeof Float64Array?r:Float64Array,"%FinalizationRegistry%":"undefined"==typeof FinalizationRegistry?r:FinalizationRegistry,"%Function%":b,"%GeneratorFunction%":I,"%Int8Array%":"undefined"==typeof Int8Array?r:Int8Array,"%Int16Array%":"undefined"==typeof Int16Array?r:Int16Array,"%Int32Array%":"undefined"==typeof Int32Array?r:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":A&&E?E(E([][Symbol.iterator]())):r,"%JSON%":"object"==typeof JSON?JSON:r,"%Map%":"undefined"==typeof Map?r:Map,"%MapIteratorPrototype%":"undefined"!=typeof Map&&A&&E?E((new Map)[Symbol.iterator]()):r,"%Math%":Math,"%Number%":Number,"%Object%":n,"%Object.getOwnPropertyDescriptor%":x,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":"undefined"==typeof Promise?r:Promise,"%Proxy%":"undefined"==typeof Proxy?r:Proxy,"%RangeError%":a,"%ReferenceError%":h,"%Reflect%":"undefined"==typeof Reflect?r:Reflect,"%RegExp%":RegExp,"%Set%":"undefined"==typeof Set?r:Set,"%SetIteratorPrototype%":"undefined"!=typeof Set&&A&&E?E((new Set)[Symbol.iterator]()):r,"%SharedArrayBuffer%":"undefined"==typeof SharedArrayBuffer?r:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":A&&E?E(""[Symbol.iterator]()):r,"%Symbol%":A?Symbol:r,"%SyntaxError%":l,"%ThrowTypeError%":S,"%TypedArray%":k,"%TypeError%":u,"%Uint8Array%":"undefined"==typeof Uint8Array?r:Uint8Array,"%Uint8ClampedArray%":"undefined"==typeof Uint8ClampedArray?r:Uint8ClampedArray,"%Uint16Array%":"undefined"==typeof Uint16Array?r:Uint16Array,"%Uint32Array%":"undefined"==typeof Uint32Array?r:Uint32Array,"%URIError%":c,"%WeakMap%":"undefined"==typeof WeakMap?r:WeakMap,"%WeakRef%":"undefined"==typeof WeakRef?r:WeakRef,"%WeakSet%":"undefined"==typeof WeakSet?r:WeakSet,"%Function.prototype.call%":C,"%Function.prototype.apply%":P,"%Object.defineProperty%":w,"%Object.getPrototypeOf%":T,"%Math.abs%":d,"%Math.floor%":f,"%Math.max%":p,"%Math.min%":m,"%Math.pow%":g,"%Math.round%":v,"%Math.sign%":y,"%Reflect.getPrototypeOf%":R};if(E)try{null.error}catch(t){var O=E(E(t));B["%Error.prototype%"]=O}var L=function t(e){var i;if("%AsyncFunction%"===e)i=_("async function () {}");else if("%GeneratorFunction%"===e)i=_("function* () {}");else if("%AsyncGeneratorFunction%"===e)i=_("async function* () {}");else if("%AsyncGenerator%"===e){var r=t("%AsyncGeneratorFunction%");r&&(i=r.prototype)}else if("%AsyncIteratorPrototype%"===e){var n=t("%AsyncGenerator%");n&&E&&(i=E(n.prototype))}return B[e]=i,i},U={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},D=i(6743),N=i(9957),F=D.call(C,Array.prototype.concat),z=D.call(P,Array.prototype.splice),G=D.call(C,String.prototype.replace),j=D.call(C,String.prototype.slice),V=D.call(C,RegExp.prototype.exec),H=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,W=/\\(\\)?/g,X=function(t,e){var i,r=t;if(N(U,r)&&(r="%"+(i=U[r])[0]+"%"),N(B,r)){var n=B[r];if(n===I&&(n=L(r)),void 0===n&&!e)throw new u("intrinsic "+t+" exists, but is not available. Please file an issue!");return{alias:i,name:r,value:n}}throw new l("intrinsic "+t+" does not exist!")};t.exports=function(t,e){if("string"!=typeof t||0===t.length)throw new u("intrinsic name must be a non-empty string");if(arguments.length>1&&"boolean"!=typeof e)throw new u('"allowMissing" argument must be a boolean');if(null===V(/^%?[^%]*%?$/,t))throw new l("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var i=function(t){var e=j(t,0,1),i=j(t,-1);if("%"===e&&"%"!==i)throw new l("invalid intrinsic syntax, expected closing `%`");if("%"===i&&"%"!==e)throw new l("invalid intrinsic syntax, expected opening `%`");var r=[];return G(t,H,function(t,e,i,n){r[r.length]=i?G(n,W,"$1"):e||t}),r}(t),r=i.length>0?i[0]:"",n=X("%"+r+"%",e),s=n.name,o=n.value,a=!1,h=n.alias;h&&(r=h[0],z(i,F([0,1],h)));for(var c=1,d=!0;c<i.length;c+=1){var f=i[c],p=j(f,0,1),m=j(f,-1);if(('"'===p||"'"===p||"`"===p||'"'===m||"'"===m||"`"===m)&&p!==m)throw new l("property names with quotes must have matching quotes");if("constructor"!==f&&d||(a=!0),N(B,s="%"+(r+="."+f)+"%"))o=B[s];else if(null!=o){if(!(f in o)){if(!e)throw new u("base intrinsic for "+t+" exists, but the property is not available.");return}if(x&&c+1>=i.length){var g=x(o,f);o=(d=!!g)&&"get"in g&&!("originalValue"in g.get)?g.get:o[f]}else d=N(o,f),o=o[f];d&&!a&&(B[s]=o)}}return o}},462:(t,e,i)=>{var r=i(2861).Buffer;function n(t){r.isBuffer(t)||(t=r.from(t));for(var e=t.length/4|0,i=new Array(e),n=0;n<e;n++)i[n]=t.readUInt32BE(4*n);return i}function s(t){for(;0<t.length;t++)t[0]=0}function o(t,e,i,r,n){for(var s,o,a,h,l=i[0],u=i[1],c=i[2],d=i[3],f=t[0]^e[0],p=t[1]^e[1],m=t[2]^e[2],g=t[3]^e[3],v=4,y=1;y<n;y++)s=l[f>>>24]^u[p>>>16&255]^c[m>>>8&255]^d[255&g]^e[v++],o=l[p>>>24]^u[m>>>16&255]^c[g>>>8&255]^d[255&f]^e[v++],a=l[m>>>24]^u[g>>>16&255]^c[f>>>8&255]^d[255&p]^e[v++],h=l[g>>>24]^u[f>>>16&255]^c[p>>>8&255]^d[255&m]^e[v++],f=s,p=o,m=a,g=h;return s=(r[f>>>24]<<24|r[p>>>16&255]<<16|r[m>>>8&255]<<8|r[255&g])^e[v++],o=(r[p>>>24]<<24|r[m>>>16&255]<<16|r[g>>>8&255]<<8|r[255&f])^e[v++],a=(r[m>>>24]<<24|r[g>>>16&255]<<16|r[f>>>8&255]<<8|r[255&p])^e[v++],h=(r[g>>>24]<<24|r[f>>>16&255]<<16|r[p>>>8&255]<<8|r[255&m])^e[v++],[s>>>=0,o>>>=0,a>>>=0,h>>>=0]}var a=[0,1,2,4,8,16,32,64,128,27,54],h=function(){for(var t=new Array(256),e=0;e<256;e++)t[e]=e<128?e<<1:e<<1^283;for(var i=[],r=[],n=[[],[],[],[]],s=[[],[],[],[]],o=0,a=0,h=0;h<256;++h){var l=a^a<<1^a<<2^a<<3^a<<4;l=l>>>8^255&l^99,i[o]=l,r[l]=o;var u=t[o],c=t[u],d=t[c],f=257*t[l]^16843008*l;n[0][o]=f<<24|f>>>8,n[1][o]=f<<16|f>>>16,n[2][o]=f<<8|f>>>24,n[3][o]=f,f=16843009*d^65537*c^257*u^16843008*o,s[0][l]=f<<24|f>>>8,s[1][l]=f<<16|f>>>16,s[2][l]=f<<8|f>>>24,s[3][l]=f,0===o?o=a=1:(o=u^t[t[t[d^u]]],a^=t[t[a]])}return{SBOX:i,INV_SBOX:r,SUB_MIX:n,INV_SUB_MIX:s}}();function l(t){this._key=n(t),this._reset()}l.blockSize=16,l.keySize=32,l.prototype.blockSize=l.blockSize,l.prototype.keySize=l.keySize,l.prototype._reset=function(){for(var t=this._key,e=t.length,i=e+6,r=4*(i+1),n=[],s=0;s<e;s++)n[s]=t[s];for(s=e;s<r;s++){var o=n[s-1];s%e===0?(o=o<<8|o>>>24,o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o],o^=a[s/e|0]<<24):e>6&&s%e===4&&(o=h.SBOX[o>>>24]<<24|h.SBOX[o>>>16&255]<<16|h.SBOX[o>>>8&255]<<8|h.SBOX[255&o]),n[s]=n[s-e]^o}for(var l=[],u=0;u<r;u++){var c=r-u,d=n[c-(u%4?0:4)];l[u]=u<4||c<=4?d:h.INV_SUB_MIX[0][h.SBOX[d>>>24]]^h.INV_SUB_MIX[1][h.SBOX[d>>>16&255]]^h.INV_SUB_MIX[2][h.SBOX[d>>>8&255]]^h.INV_SUB_MIX[3][h.SBOX[255&d]]}this._nRounds=i,this._keySchedule=n,this._invKeySchedule=l},l.prototype.encryptBlockRaw=function(t){return o(t=n(t),this._keySchedule,h.SUB_MIX,h.SBOX,this._nRounds)},l.prototype.encryptBlock=function(t){var e=this.encryptBlockRaw(t),i=r.allocUnsafe(16);return i.writeUInt32BE(e[0],0),i.writeUInt32BE(e[1],4),i.writeUInt32BE(e[2],8),i.writeUInt32BE(e[3],12),i},l.prototype.decryptBlock=function(t){var e=(t=n(t))[1];t[1]=t[3],t[3]=e;var i=o(t,this._invKeySchedule,h.INV_SUB_MIX,h.INV_SBOX,this._nRounds),s=r.allocUnsafe(16);return s.writeUInt32BE(i[0],0),s.writeUInt32BE(i[3],4),s.writeUInt32BE(i[2],8),s.writeUInt32BE(i[1],12),s},l.prototype.scrub=function(){s(this._keySchedule),s(this._invKeySchedule),s(this._key)},t.exports.AES=l},470:(t,e,i)=>{var r,n=i(5606),s=i(6763);e=t.exports=et,r="object"==typeof n&&n.env&&n.env.NODE_DEBUG&&/\bsemver\b/i.test(n.env.NODE_DEBUG)?function(){var t=Array.prototype.slice.call(arguments,0);t.unshift("SEMVER"),s.log.apply(s,t)}:function(){},e.SEMVER_SPEC_VERSION="2.0.0";var o=256,a=Number.MAX_SAFE_INTEGER||9007199254740991,h=o-6,l=e.re=[],u=e.safeRe=[],c=e.src=[],d=0,f="[a-zA-Z0-9-]",p=[["\\s",1],["\\d",o],[f,h]];function m(t){for(var e=0;e<p.length;e++){var i=p[e][0],r=p[e][1];t=t.split(i+"*").join(i+"{0,"+r+"}").split(i+"+").join(i+"{1,"+r+"}")}return t}var g=d++;c[g]="0|[1-9]\\d*";var v=d++;c[v]="\\d+";var y=d++;c[y]="\\d*[a-zA-Z-]"+f+"*";var b=d++;c[b]="("+c[g]+")\\.("+c[g]+")\\.("+c[g]+")";var _=d++;c[_]="("+c[v]+")\\.("+c[v]+")\\.("+c[v]+")";var x=d++;c[x]="(?:"+c[g]+"|"+c[y]+")";var w=d++;c[w]="(?:"+c[v]+"|"+c[y]+")";var M=d++;c[M]="(?:-("+c[x]+"(?:\\."+c[x]+")*))";var S=d++;c[S]="(?:-?("+c[w]+"(?:\\."+c[w]+")*))";var A=d++;c[A]=f+"+";var E=d++;c[E]="(?:\\+("+c[A]+"(?:\\."+c[A]+")*))";var T=d++,R="v?"+c[b]+c[M]+"?"+c[E]+"?";c[T]="^"+R+"$";var P="[v=\\s]*"+c[_]+c[S]+"?"+c[E]+"?",C=d++;c[C]="^"+P+"$";var I=d++;c[I]="((?:<|>)?=?)";var k=d++;c[k]=c[v]+"|x|X|\\*";var B=d++;c[B]=c[g]+"|x|X|\\*";var O=d++;c[O]="[v=\\s]*("+c[B]+")(?:\\.("+c[B]+")(?:\\.("+c[B]+")(?:"+c[M]+")?"+c[E]+"?)?)?";var L=d++;c[L]="[v=\\s]*("+c[k]+")(?:\\.("+c[k]+")(?:\\.("+c[k]+")(?:"+c[S]+")?"+c[E]+"?)?)?";var U=d++;c[U]="^"+c[I]+"\\s*"+c[O]+"$";var D=d++;c[D]="^"+c[I]+"\\s*"+c[L]+"$";var N=d++;c[N]="(?:^|[^\\d])(\\d{1,16})(?:\\.(\\d{1,16}))?(?:\\.(\\d{1,16}))?(?:$|[^\\d])";var F=d++;c[F]="(?:~>?)";var z=d++;c[z]="(\\s*)"+c[F]+"\\s+",l[z]=new RegExp(c[z],"g"),u[z]=new RegExp(m(c[z]),"g");var G=d++;c[G]="^"+c[F]+c[O]+"$";var j=d++;c[j]="^"+c[F]+c[L]+"$";var V=d++;c[V]="(?:\\^)";var H=d++;c[H]="(\\s*)"+c[V]+"\\s+",l[H]=new RegExp(c[H],"g"),u[H]=new RegExp(m(c[H]),"g");var W=d++;c[W]="^"+c[V]+c[O]+"$";var X=d++;c[X]="^"+c[V]+c[L]+"$";var q=d++;c[q]="^"+c[I]+"\\s*("+P+")$|^$";var Y=d++;c[Y]="^"+c[I]+"\\s*("+R+")$|^$";var Z=d++;c[Z]="(\\s*)"+c[I]+"\\s*("+P+"|"+c[O]+")",l[Z]=new RegExp(c[Z],"g"),u[Z]=new RegExp(m(c[Z]),"g");var K=d++;c[K]="^\\s*("+c[O]+")\\s+-\\s+("+c[O]+")\\s*$";var $=d++;c[$]="^\\s*("+c[L]+")\\s+-\\s+("+c[L]+")\\s*$";var Q=d++;c[Q]="(<|>)?=?\\s*\\*";for(var J=0;J<35;J++)r(J,c[J]),l[J]||(l[J]=new RegExp(c[J]),u[J]=new RegExp(m(c[J])));function tt(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof et)return t;if("string"!=typeof t)return null;if(t.length>o)return null;if(!(e.loose?u[C]:u[T]).test(t))return null;try{return new et(t,e)}catch(t){return null}}function et(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof et){if(t.loose===e.loose)return t;t=t.version}else if("string"!=typeof t)throw new TypeError("Invalid Version: "+t);if(t.length>o)throw new TypeError("version is longer than "+o+" characters");if(!(this instanceof et))return new et(t,e);r("SemVer",t,e),this.options=e,this.loose=!!e.loose;var i=t.trim().match(e.loose?u[C]:u[T]);if(!i)throw new TypeError("Invalid Version: "+t);if(this.raw=t,this.major=+i[1],this.minor=+i[2],this.patch=+i[3],this.major>a||this.major<0)throw new TypeError("Invalid major version");if(this.minor>a||this.minor<0)throw new TypeError("Invalid minor version");if(this.patch>a||this.patch<0)throw new TypeError("Invalid patch version");i[4]?this.prerelease=i[4].split(".").map(function(t){if(/^[0-9]+$/.test(t)){var e=+t;if(e>=0&&e<a)return e}return t}):this.prerelease=[],this.build=i[5]?i[5].split("."):[],this.format()}e.parse=tt,e.valid=function(t,e){var i=tt(t,e);return i?i.version:null},e.clean=function(t,e){var i=tt(t.trim().replace(/^[=v]+/,""),e);return i?i.version:null},e.SemVer=et,et.prototype.format=function(){return this.version=this.major+"."+this.minor+"."+this.patch,this.prerelease.length&&(this.version+="-"+this.prerelease.join(".")),this.version},et.prototype.toString=function(){return this.version},et.prototype.compare=function(t){return r("SemVer.compare",this.version,this.options,t),t instanceof et||(t=new et(t,this.options)),this.compareMain(t)||this.comparePre(t)},et.prototype.compareMain=function(t){return t instanceof et||(t=new et(t,this.options)),rt(this.major,t.major)||rt(this.minor,t.minor)||rt(this.patch,t.patch)},et.prototype.comparePre=function(t){if(t instanceof et||(t=new et(t,this.options)),this.prerelease.length&&!t.prerelease.length)return-1;if(!this.prerelease.length&&t.prerelease.length)return 1;if(!this.prerelease.length&&!t.prerelease.length)return 0;var e=0;do{var i=this.prerelease[e],n=t.prerelease[e];if(r("prerelease compare",e,i,n),void 0===i&&void 0===n)return 0;if(void 0===n)return 1;if(void 0===i)return-1;if(i!==n)return rt(i,n)}while(++e)},et.prototype.inc=function(t,e){switch(t){case"premajor":this.prerelease.length=0,this.patch=0,this.minor=0,this.major++,this.inc("pre",e);break;case"preminor":this.prerelease.length=0,this.patch=0,this.minor++,this.inc("pre",e);break;case"prepatch":this.prerelease.length=0,this.inc("patch",e),this.inc("pre",e);break;case"prerelease":0===this.prerelease.length&&this.inc("patch",e),this.inc("pre",e);break;case"major":0===this.minor&&0===this.patch&&0!==this.prerelease.length||this.major++,this.minor=0,this.patch=0,this.prerelease=[];break;case"minor":0===this.patch&&0!==this.prerelease.length||this.minor++,this.patch=0,this.prerelease=[];break;case"patch":0===this.prerelease.length&&this.patch++,this.prerelease=[];break;case"pre":if(0===this.prerelease.length)this.prerelease=[0];else{for(var i=this.prerelease.length;--i>=0;)"number"==typeof this.prerelease[i]&&(this.prerelease[i]++,i=-2);-1===i&&this.prerelease.push(0)}e&&(this.prerelease[0]===e?isNaN(this.prerelease[1])&&(this.prerelease=[e,0]):this.prerelease=[e,0]);break;default:throw new Error("invalid increment argument: "+t)}return this.format(),this.raw=this.version,this},e.inc=function(t,e,i,r){"string"==typeof i&&(r=i,i=void 0);try{return new et(t,i).inc(e,r).version}catch(t){return null}},e.diff=function(t,e){if(at(t,e))return null;var i=tt(t),r=tt(e),n="";if(i.prerelease.length||r.prerelease.length){n="pre";var s="prerelease"}for(var o in i)if(("major"===o||"minor"===o||"patch"===o)&&i[o]!==r[o])return n+o;return s},e.compareIdentifiers=rt;var it=/^[0-9]+$/;function rt(t,e){var i=it.test(t),r=it.test(e);return i&&r&&(t=+t,e=+e),t===e?0:i&&!r?-1:r&&!i?1:t<e?-1:1}function nt(t,e,i){return new et(t,i).compare(new et(e,i))}function st(t,e,i){return nt(t,e,i)>0}function ot(t,e,i){return nt(t,e,i)<0}function at(t,e,i){return 0===nt(t,e,i)}function ht(t,e,i){return 0!==nt(t,e,i)}function lt(t,e,i){return nt(t,e,i)>=0}function ut(t,e,i){return nt(t,e,i)<=0}function ct(t,e,i,r){switch(e){case"===":return"object"==typeof t&&(t=t.version),"object"==typeof i&&(i=i.version),t===i;case"!==":return"object"==typeof t&&(t=t.version),"object"==typeof i&&(i=i.version),t!==i;case"":case"=":case"==":return at(t,i,r);case"!=":return ht(t,i,r);case">":return st(t,i,r);case">=":return lt(t,i,r);case"<":return ot(t,i,r);case"<=":return ut(t,i,r);default:throw new TypeError("Invalid operator: "+e)}}function dt(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof dt){if(t.loose===!!e.loose)return t;t=t.value}if(!(this instanceof dt))return new dt(t,e);t=t.trim().split(/\s+/).join(" "),r("comparator",t,e),this.options=e,this.loose=!!e.loose,this.parse(t),this.semver===ft?this.value="":this.value=this.operator+this.semver.version,r("comp",this)}e.rcompareIdentifiers=function(t,e){return rt(e,t)},e.major=function(t,e){return new et(t,e).major},e.minor=function(t,e){return new et(t,e).minor},e.patch=function(t,e){return new et(t,e).patch},e.compare=nt,e.compareLoose=function(t,e){return nt(t,e,!0)},e.rcompare=function(t,e,i){return nt(e,t,i)},e.sort=function(t,i){return t.sort(function(t,r){return e.compare(t,r,i)})},e.rsort=function(t,i){return t.sort(function(t,r){return e.rcompare(t,r,i)})},e.gt=st,e.lt=ot,e.eq=at,e.neq=ht,e.gte=lt,e.lte=ut,e.cmp=ct,e.Comparator=dt;var ft={};function pt(t,e){if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),t instanceof pt)return t.loose===!!e.loose&&t.includePrerelease===!!e.includePrerelease?t:new pt(t.raw,e);if(t instanceof dt)return new pt(t.value,e);if(!(this instanceof pt))return new pt(t,e);if(this.options=e,this.loose=!!e.loose,this.includePrerelease=!!e.includePrerelease,this.raw=t.trim().split(/\s+/).join(" "),this.set=this.raw.split("||").map(function(t){return this.parseRange(t.trim())},this).filter(function(t){return t.length}),!this.set.length)throw new TypeError("Invalid SemVer Range: "+this.raw);this.format()}function mt(t){return!t||"x"===t.toLowerCase()||"*"===t}function gt(t,e,i,r,n,s,o,a,h,l,u,c,d){return((e=mt(i)?"":mt(r)?">="+i+".0.0":mt(n)?">="+i+"."+r+".0":">="+e)+" "+(a=mt(h)?"":mt(l)?"<"+(+h+1)+".0.0":mt(u)?"<"+h+"."+(+l+1)+".0":c?"<="+h+"."+l+"."+u+"-"+c:"<="+a)).trim()}function vt(t,e,i){for(var n=0;n<t.length;n++)if(!t[n].test(e))return!1;if(e.prerelease.length&&!i.includePrerelease){for(n=0;n<t.length;n++)if(r(t[n].semver),t[n].semver!==ft&&t[n].semver.prerelease.length>0){var s=t[n].semver;if(s.major===e.major&&s.minor===e.minor&&s.patch===e.patch)return!0}return!1}return!0}function yt(t,e,i){try{e=new pt(e,i)}catch(t){return!1}return e.test(t)}function bt(t,e,i,r){var n,s,o,a,h;switch(t=new et(t,r),e=new pt(e,r),i){case">":n=st,s=ut,o=ot,a=">",h=">=";break;case"<":n=ot,s=lt,o=st,a="<",h="<=";break;default:throw new TypeError('Must provide a hilo val of "<" or ">"')}if(yt(t,e,r))return!1;for(var l=0;l<e.set.length;++l){var u=e.set[l],c=null,d=null;if(u.forEach(function(t){t.semver===ft&&(t=new dt(">=0.0.0")),c=c||t,d=d||t,n(t.semver,c.semver,r)?c=t:o(t.semver,d.semver,r)&&(d=t)}),c.operator===a||c.operator===h)return!1;if((!d.operator||d.operator===a)&&s(t,d.semver))return!1;if(d.operator===h&&o(t,d.semver))return!1}return!0}dt.prototype.parse=function(t){var e=this.options.loose?u[q]:u[Y],i=t.match(e);if(!i)throw new TypeError("Invalid comparator: "+t);this.operator=i[1],"="===this.operator&&(this.operator=""),i[2]?this.semver=new et(i[2],this.options.loose):this.semver=ft},dt.prototype.toString=function(){return this.value},dt.prototype.test=function(t){return r("Comparator.test",t,this.options.loose),this.semver===ft||("string"==typeof t&&(t=new et(t,this.options)),ct(t,this.operator,this.semver,this.options))},dt.prototype.intersects=function(t,e){if(!(t instanceof dt))throw new TypeError("a Comparator is required");var i;if(e&&"object"==typeof e||(e={loose:!!e,includePrerelease:!1}),""===this.operator)return i=new pt(t.value,e),yt(this.value,i,e);if(""===t.operator)return i=new pt(this.value,e),yt(t.semver,i,e);var r=!(">="!==this.operator&&">"!==this.operator||">="!==t.operator&&">"!==t.operator),n=!("<="!==this.operator&&"<"!==this.operator||"<="!==t.operator&&"<"!==t.operator),s=this.semver.version===t.semver.version,o=!(">="!==this.operator&&"<="!==this.operator||">="!==t.operator&&"<="!==t.operator),a=ct(this.semver,"<",t.semver,e)&&(">="===this.operator||">"===this.operator)&&("<="===t.operator||"<"===t.operator),h=ct(this.semver,">",t.semver,e)&&("<="===this.operator||"<"===this.operator)&&(">="===t.operator||">"===t.operator);return r||n||s&&o||a||h},e.Range=pt,pt.prototype.format=function(){return this.range=this.set.map(function(t){return t.join(" ").trim()}).join("||").trim(),this.range},pt.prototype.toString=function(){return this.range},pt.prototype.parseRange=function(t){var e=this.options.loose,i=e?u[$]:u[K];t=t.replace(i,gt),r("hyphen replace",t),t=t.replace(u[Z],"$1$2$3"),r("comparator trim",t,u[Z]),t=(t=t.replace(u[z],"$1~")).replace(u[H],"$1^");var n=e?u[q]:u[Y],s=t.split(" ").map(function(t){return function(t,e){return r("comp",t,e),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){r("caret",t,e);var i=e.loose?u[X]:u[W];return t.replace(i,function(e,i,n,s,o){var a;return r("caret",t,e,i,n,s,o),mt(i)?a="":mt(n)?a=">="+i+".0.0 <"+(+i+1)+".0.0":mt(s)?a="0"===i?">="+i+"."+n+".0 <"+i+"."+(+n+1)+".0":">="+i+"."+n+".0 <"+(+i+1)+".0.0":o?(r("replaceCaret pr",o),a="0"===i?"0"===n?">="+i+"."+n+"."+s+"-"+o+" <"+i+"."+n+"."+(+s+1):">="+i+"."+n+"."+s+"-"+o+" <"+i+"."+(+n+1)+".0":">="+i+"."+n+"."+s+"-"+o+" <"+(+i+1)+".0.0"):(r("no pr"),a="0"===i?"0"===n?">="+i+"."+n+"."+s+" <"+i+"."+n+"."+(+s+1):">="+i+"."+n+"."+s+" <"+i+"."+(+n+1)+".0":">="+i+"."+n+"."+s+" <"+(+i+1)+".0.0"),r("caret return",a),a})}(t,e)}).join(" ")}(t,e),r("caret",t),t=function(t,e){return t.trim().split(/\s+/).map(function(t){return function(t,e){var i=e.loose?u[j]:u[G];return t.replace(i,function(e,i,n,s,o){var a;return r("tilde",t,e,i,n,s,o),mt(i)?a="":mt(n)?a=">="+i+".0.0 <"+(+i+1)+".0.0":mt(s)?a=">="+i+"."+n+".0 <"+i+"."+(+n+1)+".0":o?(r("replaceTilde pr",o),a=">="+i+"."+n+"."+s+"-"+o+" <"+i+"."+(+n+1)+".0"):a=">="+i+"."+n+"."+s+" <"+i+"."+(+n+1)+".0",r("tilde return",a),a})}(t,e)}).join(" ")}(t,e),r("tildes",t),t=function(t,e){return r("replaceXRanges",t,e),t.split(/\s+/).map(function(t){return function(t,e){t=t.trim();var i=e.loose?u[D]:u[U];return t.replace(i,function(e,i,n,s,o,a){r("xRange",t,e,i,n,s,o,a);var h=mt(n),l=h||mt(s),u=l||mt(o);return"="===i&&u&&(i=""),h?e=">"===i||"<"===i?"<0.0.0":"*":i&&u?(l&&(s=0),o=0,">"===i?(i=">=",l?(n=+n+1,s=0,o=0):(s=+s+1,o=0)):"<="===i&&(i="<",l?n=+n+1:s=+s+1),e=i+n+"."+s+"."+o):l?e=">="+n+".0.0 <"+(+n+1)+".0.0":u&&(e=">="+n+"."+s+".0 <"+n+"."+(+s+1)+".0"),r("xRange return",e),e})}(t,e)}).join(" ")}(t,e),r("xrange",t),t=function(t,e){return r("replaceStars",t,e),t.trim().replace(u[Q],"")}(t,e),r("stars",t),t}(t,this.options)},this).join(" ").split(/\s+/);return this.options.loose&&(s=s.filter(function(t){return!!t.match(n)})),s.map(function(t){return new dt(t,this.options)},this)},pt.prototype.intersects=function(t,e){if(!(t instanceof pt))throw new TypeError("a Range is required");return this.set.some(function(i){return i.every(function(i){return t.set.some(function(t){return t.every(function(t){return i.intersects(t,e)})})})})},e.toComparators=function(t,e){return new pt(t,e).set.map(function(t){return t.map(function(t){return t.value}).join(" ").trim().split(" ")})},pt.prototype.test=function(t){if(!t)return!1;"string"==typeof t&&(t=new et(t,this.options));for(var e=0;e<this.set.length;e++)if(vt(this.set[e],t,this.options))return!0;return!1},e.satisfies=yt,e.maxSatisfying=function(t,e,i){var r=null,n=null;try{var s=new pt(e,i)}catch(t){return null}return t.forEach(function(t){s.test(t)&&(r&&-1!==n.compare(t)||(n=new et(r=t,i)))}),r},e.minSatisfying=function(t,e,i){var r=null,n=null;try{var s=new pt(e,i)}catch(t){return null}return t.forEach(function(t){s.test(t)&&(r&&1!==n.compare(t)||(n=new et(r=t,i)))}),r},e.minVersion=function(t,e){t=new pt(t,e);var i=new et("0.0.0");if(t.test(i))return i;if(i=new et("0.0.0-0"),t.test(i))return i;i=null;for(var r=0;r<t.set.length;++r)t.set[r].forEach(function(t){var e=new et(t.semver.version);switch(t.operator){case">":0===e.prerelease.length?e.patch++:e.prerelease.push(0),e.raw=e.format();case"":case">=":i&&!st(i,e)||(i=e);break;case"<":case"<=":break;default:throw new Error("Unexpected operation: "+t.operator)}});return i&&t.test(i)?i:null},e.validRange=function(t,e){try{return new pt(t,e).range||"*"}catch(t){return null}},e.ltr=function(t,e,i){return bt(t,e,"<",i)},e.gtr=function(t,e,i){return bt(t,e,">",i)},e.outside=bt,e.prerelease=function(t,e){var i=tt(t,e);return i&&i.prerelease.length?i.prerelease:null},e.intersects=function(t,e,i){return t=new pt(t,i),e=new pt(e,i),t.intersects(e)},e.coerce=function(t){if(t instanceof et)return t;if("string"!=typeof t)return null;var e=t.match(u[N]);return null==e?null:tt(e[1]+"."+(e[2]||"0")+"."+(e[3]||"0"))}},480:(t,e,i)=>{"use strict";var r,n=e,s=i(7952),o=i(894),a=i(7011).assert;function h(t){"short"===t.type?this.curve=new o.short(t):"edwards"===t.type?this.curve=new o.edwards(t):this.curve=new o.mont(t),this.g=this.curve.g,this.n=this.curve.n,this.hash=t.hash,a(this.g.validate(),"Invalid curve"),a(this.g.mul(this.n).isInfinity(),"Invalid curve, G*N != O")}function l(t,e){Object.defineProperty(n,t,{configurable:!0,enumerable:!0,get:function(){var i=new h(e);return Object.defineProperty(n,t,{configurable:!0,enumerable:!0,value:i}),i}})}n.PresetCurve=h,l("p192",{type:"short",prime:"p192",p:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff",a:"ffffffff ffffffff ffffffff fffffffe ffffffff fffffffc",b:"64210519 e59c80e7 0fa7e9ab 72243049 feb8deec c146b9b1",n:"ffffffff ffffffff ffffffff 99def836 146bc9b1 b4d22831",hash:s.sha256,gRed:!1,g:["188da80e b03090f6 7cbf20eb 43a18800 f4ff0afd 82ff1012","07192b95 ffc8da78 631011ed 6b24cdd5 73f977a1 1e794811"]}),l("p224",{type:"short",prime:"p224",p:"ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001",a:"ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff fffffffe",b:"b4050a85 0c04b3ab f5413256 5044b0b7 d7bfd8ba 270b3943 2355ffb4",n:"ffffffff ffffffff ffffffff ffff16a2 e0b8f03e 13dd2945 5c5c2a3d",hash:s.sha256,gRed:!1,g:["b70e0cbd 6bb4bf7f 321390b9 4a03c1d3 56c21122 343280d6 115c1d21","bd376388 b5f723fb 4c22dfe6 cd4375a0 5a074764 44d58199 85007e34"]}),l("p256",{type:"short",prime:null,p:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff ffffffff",a:"ffffffff 00000001 00000000 00000000 00000000 ffffffff ffffffff fffffffc",b:"5ac635d8 aa3a93e7 b3ebbd55 769886bc 651d06b0 cc53b0f6 3bce3c3e 27d2604b",n:"ffffffff 00000000 ffffffff ffffffff bce6faad a7179e84 f3b9cac2 fc632551",hash:s.sha256,gRed:!1,g:["6b17d1f2 e12c4247 f8bce6e5 63a440f2 77037d81 2deb33a0 f4a13945 d898c296","4fe342e2 fe1a7f9b 8ee7eb4a 7c0f9e16 2bce3357 6b315ece cbb64068 37bf51f5"]}),l("p384",{type:"short",prime:null,p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 ffffffff",a:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe ffffffff 00000000 00000000 fffffffc",b:"b3312fa7 e23ee7e4 988e056b e3f82d19 181d9c6e fe814112 0314088f 5013875a c656398d 8a2ed19d 2a85c8ed d3ec2aef",n:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff c7634d81 f4372ddf 581a0db2 48b0a77a ecec196a ccc52973",hash:s.sha384,gRed:!1,g:["aa87ca22 be8b0537 8eb1c71e f320ad74 6e1d3b62 8ba79b98 59f741e0 82542a38 5502f25d bf55296c 3a545e38 72760ab7","3617de4a 96262c6f 5d9e98bf 9292dc29 f8f41dbd 289a147c e9da3113 b5f0b8c0 0a60b1ce 1d7e819d 7a431d7c 90ea0e5f"]}),l("p521",{type:"short",prime:null,p:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff",a:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffc",b:"00000051 953eb961 8e1c9a1f 929a21a0 b68540ee a2da725b 99b315f3 b8b48991 8ef109e1 56193951 ec7e937b 1652c0bd 3bb1bf07 3573df88 3d2c34f1 ef451fd4 6b503f00",n:"000001ff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffa 51868783 bf2f966b 7fcc0148 f709a5d0 3bb5c9b8 899c47ae bb6fb71e 91386409",hash:s.sha512,gRed:!1,g:["000000c6 858e06b7 0404e9cd 9e3ecb66 2395b442 9c648139 053fb521 f828af60 6b4d3dba a14b5e77 efe75928 fe1dc127 a2ffa8de 3348b3c1 856a429b f97e7e31 c2e5bd66","00000118 39296a78 9a3bc004 5c8a5fb4 2c7d1bd9 98f54449 579b4468 17afbd17 273e662c 97ee7299 5ef42640 c550b901 3fad0761 353c7086 a272c240 88be9476 9fd16650"]}),l("curve25519",{type:"mont",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"76d06",b:"1",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["9"]}),l("ed25519",{type:"edwards",prime:"p25519",p:"7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed",a:"-1",c:"1",d:"52036cee2b6ffe73 8cc740797779e898 00700a4d4141d8ab 75eb4dca135978a3",n:"1000000000000000 0000000000000000 14def9dea2f79cd6 5812631a5cf5d3ed",hash:s.sha256,gRed:!1,g:["216936d3cd6e53fec0a4e231fdd6dc5c692cc7609525a7b2c9562d608f25d51a","6666666666666666666666666666666666666666666666666666666666666658"]});try{r=i(4011)}catch(t){r=void 0}l("secp256k1",{type:"short",prime:"k256",p:"ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f",a:"0",b:"7",n:"ffffffff ffffffff ffffffff fffffffe baaedce6 af48a03b bfd25e8c d0364141",h:"1",hash:s.sha256,beta:"7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee",lambda:"5363ad4cc05c30e0a5261c028812645a122e22ea20816678df02967c1b23bd72",basis:[{a:"3086d221a7d46bcde86c90e49284eb15",b:"-e4437ed6010e88286f547fa90abfe4c3"},{a:"114ca50f7a8e2f3f657c1108d9d44cfd8",b:"3086d221a7d46bcde86c90e49284eb15"}],gRed:!1,g:["79be667ef9dcbbac55a06295ce870b07029bfcdb2dce28d959f2815b16f81798","483ada7726a3c4655da4fbfc0e1108a8fd17b448a68554199c47d08ffb10d4b8",r]})},487:(t,e,i)=>{"use strict";var r=i(6897),n=i(655),s=i(3126),o=i(2205);t.exports=function(t){var e=s(arguments),i=t.length-(arguments.length-1);return r(e,1+(i>0?i:0),!0)},n?n(t.exports,"apply",{value:o}):t.exports.apply=o},530:(t,e,i)=>{var r={ECB:i(2632),CBC:i(2884),CFB:i(6383),CFB8:i(6975),CFB1:i(5264),OFB:i(6843),CTR:i(3053),GCM:i(3053)},n=i(3219);for(var s in n)n[s].module=r[n[s].mode];t.exports=n},537:(t,e,i)=>{var r=i(5606),n=i(6763),s=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},r=0;r<e.length;r++)i[e[r]]=Object.getOwnPropertyDescriptor(t,e[r]);return i},o=/%[sdj%]/g;e.format=function(t){if(!_(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(u(arguments[i]));return e.join(" ")}i=1;for(var r=arguments,n=r.length,s=String(t).replace(o,function(t){if("%%"===t)return"%";if(i>=n)return t;switch(t){case"%s":return String(r[i++]);case"%d":return Number(r[i++]);case"%j":try{return JSON.stringify(r[i++])}catch(t){return"[Circular]"}default:return t}}),a=r[i];i<n;a=r[++i])y(a)||!M(a)?s+=" "+a:s+=" "+u(a);return s},e.deprecate=function(t,i){if(void 0!==r&&!0===r.noDeprecation)return t;if(void 0===r)return function(){return e.deprecate(t,i).apply(this,arguments)};var s=!1;return function(){if(!s){if(r.throwDeprecation)throw new Error(i);r.traceDeprecation?n.trace(i):n.error(i),s=!0}return t.apply(this,arguments)}};var a={},h=/^$/;if(r.env.NODE_DEBUG){var l=r.env.NODE_DEBUG;l=l.replace(/[|\\{}()[\]^$+?.]/g,"\\$&").replace(/\*/g,".*").replace(/,/g,"$|^").toUpperCase(),h=new RegExp("^"+l+"$","i")}function u(t,i){var r={seen:[],stylize:d};return arguments.length>=3&&(r.depth=arguments[2]),arguments.length>=4&&(r.colors=arguments[3]),v(i)?r.showHidden=i:i&&e._extend(r,i),x(r.showHidden)&&(r.showHidden=!1),x(r.depth)&&(r.depth=2),x(r.colors)&&(r.colors=!1),x(r.customInspect)&&(r.customInspect=!0),r.colors&&(r.stylize=c),f(r,t,r.depth)}function c(t,e){var i=u.styles[e];return i?"["+u.colors[i][0]+"m"+t+"["+u.colors[i][1]+"m":t}function d(t,e){return t}function f(t,i,r){if(t.customInspect&&i&&E(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var n=i.inspect(r,t);return _(n)||(n=f(t,n,r)),n}var s=function(t,e){if(x(e))return t.stylize("undefined","undefined");if(_(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return b(e)?t.stylize(""+e,"number"):v(e)?t.stylize(""+e,"boolean"):y(e)?t.stylize("null","null"):void 0}(t,i);if(s)return s;var o=Object.keys(i),a=function(t){var e={};return t.forEach(function(t,i){e[t]=!0}),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),A(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return p(i);if(0===o.length){if(E(i)){var h=i.name?": "+i.name:"";return t.stylize("[Function"+h+"]","special")}if(w(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(S(i))return t.stylize(Date.prototype.toString.call(i),"date");if(A(i))return p(i)}var l,u="",c=!1,d=["{","}"];return g(i)&&(c=!0,d=["[","]"]),E(i)&&(u=" [Function"+(i.name?": "+i.name:"")+"]"),w(i)&&(u=" "+RegExp.prototype.toString.call(i)),S(i)&&(u=" "+Date.prototype.toUTCString.call(i)),A(i)&&(u=" "+p(i)),0!==o.length||c&&0!=i.length?r<0?w(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),l=c?function(t,e,i,r,n){for(var s=[],o=0,a=e.length;o<a;++o)C(e,String(o))?s.push(m(t,e,i,r,String(o),!0)):s.push("");return n.forEach(function(n){n.match(/^\d+$/)||s.push(m(t,e,i,r,n,!0))}),s}(t,i,r,a,o):o.map(function(e){return m(t,i,r,a,e,c)}),t.seen.pop(),function(t,e,i){return t.reduce(function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1},0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(l,u,d)):d[0]+u+d[1]}function p(t){return"["+Error.prototype.toString.call(t)+"]"}function m(t,e,i,r,n,s){var o,a,h;if((h=Object.getOwnPropertyDescriptor(e,n)||{value:e[n]}).get?a=h.set?t.stylize("[Getter/Setter]","special"):t.stylize("[Getter]","special"):h.set&&(a=t.stylize("[Setter]","special")),C(r,n)||(o="["+n+"]"),a||(t.seen.indexOf(h.value)<0?(a=y(i)?f(t,h.value,null):f(t,h.value,i-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map(function(t){return"  "+t}).join("\n").slice(2):"\n"+a.split("\n").map(function(t){return"   "+t}).join("\n")):a=t.stylize("[Circular]","special")),x(o)){if(s&&n.match(/^\d+$/))return a;(o=JSON.stringify(""+n)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.slice(1,-1),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function g(t){return Array.isArray(t)}function v(t){return"boolean"==typeof t}function y(t){return null===t}function b(t){return"number"==typeof t}function _(t){return"string"==typeof t}function x(t){return void 0===t}function w(t){return M(t)&&"[object RegExp]"===T(t)}function M(t){return"object"==typeof t&&null!==t}function S(t){return M(t)&&"[object Date]"===T(t)}function A(t){return M(t)&&("[object Error]"===T(t)||t instanceof Error)}function E(t){return"function"==typeof t}function T(t){return Object.prototype.toString.call(t)}function R(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(t=t.toUpperCase(),!a[t])if(h.test(t)){var i=r.pid;a[t]=function(){var r=e.format.apply(e,arguments);n.error("%s %d: %s",t,i,r)}}else a[t]=function(){};return a[t]},e.inspect=u,u.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},u.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.types=i(9032),e.isArray=g,e.isBoolean=v,e.isNull=y,e.isNullOrUndefined=function(t){return null==t},e.isNumber=b,e.isString=_,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=x,e.isRegExp=w,e.types.isRegExp=w,e.isObject=M,e.isDate=S,e.types.isDate=S,e.isError=A,e.types.isNativeError=A,e.isFunction=E,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(1135);var P=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function C(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){var t,i;n.log("%s - %s",(i=[R((t=new Date).getHours()),R(t.getMinutes()),R(t.getSeconds())].join(":"),[t.getDate(),P[t.getMonth()],i].join(" ")),e.format.apply(e,arguments))},e.inherits=i(6698),e._extend=function(t,e){if(!e||!M(e))return t;for(var i=Object.keys(e),r=i.length;r--;)t[i[r]]=e[i[r]];return t};var I="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function k(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(I&&t[I]){var e;if("function"!=typeof(e=t[I]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,r=new Promise(function(t,r){e=t,i=r}),n=[],s=0;s<arguments.length;s++)n.push(arguments[s]);n.push(function(t,r){t?i(t):e(r)});try{t.apply(this,n)}catch(t){i(t)}return r}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),I&&Object.defineProperty(e,I,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,s(t))},e.promisify.custom=I,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var s=this,o=function(){return n.apply(s,arguments)};t.apply(this,e).then(function(t){r.nextTick(o.bind(null,null,t))},function(t){r.nextTick(k.bind(null,t,o))})}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,s(t)),e}},565:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=i(3988);const n=function(t){var e=new t.constructor(t.byteLength);return new r.A(e).set(new r.A(t)),e}},592:(t,e,i)=>{"use strict";var r=i(655),n=function(){return!!r};n.hasArrayLengthDefineBug=function(){if(!r)return null;try{return 1!==r([],"length",{value:1}).length}catch(t){return!0}},t.exports=n},602:(t,e,i)=>{"use strict";var r=i(8287).Buffer,n=i(8310).Transform;function s(t){n.call(this),this._block=new r(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(6698)(s,n),s.prototype._transform=function(t,e,i){var n=null;try{"buffer"!==e&&(t=new r(t,e)),this.update(t)}catch(t){n=t}i(n)},s.prototype._flush=function(t){var e=null;try{this.push(this._digest())}catch(t){e=t}t(e)},s.prototype.update=function(t,e){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer");if(this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=new r(t,e||"binary"));for(var i=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)i[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},s.prototype._update=function(t){throw new Error("_update is not implemented")},s.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();return void 0!==t&&(e=e.toString(t)),e},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},650:(t,e,i)=>{var r=i(462),n=i(2861).Buffer,s=i(6168);function o(t,e,i,o){s.call(this),this._cipher=new r.AES(e),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=o,this._mode=t}i(6698)(o,s),o.prototype._update=function(t){return this._mode.encrypt(this,t,this._decrypt)},o.prototype._final=function(){this._cipher.scrub()},t.exports=o},655:t=>{"use strict";var e=Object.defineProperty||!1;if(e)try{e({},"a",{value:1})}catch(t){e=!1}t.exports=e},672:(t,e,i)=>{"use strict";var r=i(4116).Buffer,n=i(1638);function s(t,e,i){t.copy(e,i)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}return t.prototype.push=function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length},t.prototype.unshift=function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length},t.prototype.shift=function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}},t.prototype.clear=function(){this.head=this.tail=null,this.length=0},t.prototype.join=function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i},t.prototype.concat=function(t){if(0===this.length)return r.alloc(0);for(var e=r.allocUnsafe(t>>>0),i=this.head,n=0;i;)s(i.data,e,n),n+=i.data.length,i=i.next;return e},t}(),n&&n.inspect&&n.inspect.custom&&(t.exports.prototype[n.inspect.custom]=function(){var t=n.inspect({length:this.length});return this.constructor.name+" "+t})},734:(t,e,i)=>{const r=i(5659),n=i(8507),s={};Object.keys(r).forEach(t=>{s[t]={},Object.defineProperty(s[t],"channels",{value:r[t].channels}),Object.defineProperty(s[t],"labels",{value:r[t].labels});const e=n(t);Object.keys(e).forEach(i=>{const r=e[i];s[t][i]=function(t){const e=function(...e){const i=e[0];if(null==i)return i;i.length>1&&(e=i);const r=t(e);if("object"==typeof r)for(let t=r.length,e=0;e<t;e++)r[e]=Math.round(r[e]);return r};return"conversion"in t&&(e.conversion=t.conversion),e}(r),s[t][i].raw=function(t){const e=function(...e){const i=e[0];return null==i?i:(i.length>1&&(e=i),t(e))};return"conversion"in t&&(e.conversion=t.conversion),e}(r)})}),t.exports=s},735:(t,e,i)=>{var r=i(6698),n=i(82);function s(t){n.call(this,t),this.enc="pem"}r(s,n),t.exports=s,s.prototype.encode=function(t,e){for(var i=n.prototype.encode.call(this,t).toString("base64"),r=["-----BEGIN "+e.label+"-----"],s=0;s<i.length;s+=64)r.push(i.slice(s,s+64));return r.push("-----END "+e.label+"-----"),r.join("\n")}},753:(t,e,i)=>{"use strict";i.d(e,{j:()=>s});var r=i(4676);const n=16777215;function s(t,e){return t===n?e:e===n?t:(0,r.u)(t,e)}},848:(t,e,i)=>{"use strict";i.d(e,{L:()=>s});var r=i(133),n=i(6763);class s{constructor(){this.uid=(0,r.L)("instructionSet"),this.instructions=[],this.instructionSize=0,this.renderables=[],this.gcTick=0}reset(){this.instructionSize=0}add(t){this.instructions[this.instructionSize++]=t}log(){this.instructions.length=this.instructionSize,n.table(this.instructions,["type","action"])}}},855:(t,e,i)=>{var r=i(6585);t.exports=function(t,e){var i=e||Math.floor(Date.now()/1e3);if("string"==typeof t){var n=r(t);if(void 0===n)return;return Math.floor(i+n/1e3)}return"number"==typeof t?i+t:void 0}},888:(t,e,i)=>{"use strict";i.d(e,{Ag:()=>r,XO:()=>o});var r=(t=>(t.Application="application",t.WebGLPipes="webgl-pipes",t.WebGLPipesAdaptor="webgl-pipes-adaptor",t.WebGLSystem="webgl-system",t.WebGPUPipes="webgpu-pipes",t.WebGPUPipesAdaptor="webgpu-pipes-adaptor",t.WebGPUSystem="webgpu-system",t.CanvasSystem="canvas-system",t.CanvasPipesAdaptor="canvas-pipes-adaptor",t.CanvasPipes="canvas-pipes",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t.MaskEffect="mask-effect",t.BlendMode="blend-mode",t.TextureSource="texture-source",t.Environment="environment",t.ShapeBuilder="shape-builder",t.Batcher="batcher",t))(r||{});const n=t=>{if("function"==typeof t||"object"==typeof t&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={..."object"!=typeof t.extension?{type:t.extension}:t.extension,ref:t}}if("object"!=typeof t)throw new Error("Invalid extension type");return"string"==typeof(t={...t}).type&&(t.type=[t.type]),t},s=(t,e)=>n(t).priority??e,o={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(n).forEach(t=>{t.type.forEach(e=>this._removeHandlers[e]?.(t))}),this},add(...t){return t.map(n).forEach(t=>{t.type.forEach(e=>{const i=this._addHandlers,r=this._queue;i[e]?i[e]?.(t):(r[e]=r[e]||[],r[e]?.push(t))})}),this},handle(t,e,i){const r=this._addHandlers,n=this._removeHandlers;if(r[t]||n[t])throw new Error(`Extension type ${t} already has a handler`);r[t]=e,n[t]=i;const s=this._queue;return s[t]&&(s[t]?.forEach(t=>e(t)),delete s[t]),this},handleByMap(t,e){return this.handle(t,t=>{t.name&&(e[t.name]=t.ref)},t=>{t.name&&delete e[t.name]})},handleByNamedList(t,e,i=-1){return this.handle(t,t=>{e.findIndex(e=>e.name===t.name)>=0||(e.push({name:t.name,value:t.ref}),e.sort((t,e)=>s(e.value,i)-s(t.value,i)))},t=>{const i=e.findIndex(e=>e.name===t.name);-1!==i&&e.splice(i,1)})},handleByList(t,e,i=-1){return this.handle(t,t=>{e.includes(t.ref)||(e.push(t.ref),e.sort((t,e)=>s(e,i)-s(t,i)))},t=>{const i=e.indexOf(t.ref);-1!==i&&e.splice(i,1)})}}},894:(t,e,i)=>{"use strict";var r=e;r.base=i(6677),r.short=i(9188),r.mont=i(370),r.edwards=i(1298)},949:(t,e,i)=>{"use strict";i.d(e,{h:()=>o});var r=i(4486),n=i(133),s=i(1132);class o extends r.A{constructor(t){let{data:e,size:i}=t;const{usage:r,label:s,shrinkToFit:o}=t;super(),this.uid=(0,n.L)("buffer"),this._resourceType="buffer",this._resourceId=(0,n.L)("resource"),this._touched=0,this._updateID=1,this._dataInt32=null,this.shrinkToFit=!0,this.destroyed=!1,e instanceof Array&&(e=new Float32Array(e)),this._data=e,i??(i=e?.byteLength);const a=!!e;this.descriptor={size:i,usage:r,mappedAtCreation:a,label:s},this.shrinkToFit=o??!0}get data(){return this._data}set data(t){this.setDataWithSize(t,t.length,!0)}get dataInt32(){return this._dataInt32||(this._dataInt32=new Int32Array(this.data.buffer)),this._dataInt32}get static(){return!!(this.descriptor.usage&s.S.STATIC)}set static(t){t?this.descriptor.usage|=s.S.STATIC:this.descriptor.usage&=~s.S.STATIC}setDataWithSize(t,e,i){if(this._updateID++,this._updateSize=e*t.BYTES_PER_ELEMENT,this._data===t)return void(i&&this.emit("update",this));const r=this._data;this._data=t,this._dataInt32=null,r&&r.length===t.length||!this.shrinkToFit&&r&&t.byteLength<r.byteLength?i&&this.emit("update",this):(this.descriptor.size=t.byteLength,this._resourceId=(0,n.L)("resource"),this.emit("change",this))}update(t){this._updateSize=t??this._updateSize,this._updateID++,this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._data=null,this.descriptor=null,this.removeAllListeners()}}},990:(t,e,i)=>{"use strict";i.d(e,{T:()=>f,w:()=>d});var r=i(2577),n=i(9313),s=i(4492),o=i(7276),a=i(2806);function h(t){return t instanceof a.m}function l(t){return t instanceof o._}function u(t,e,i){return t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function c(t,e,i){return e.buildLinearGradient(),t.fill=e,t.color=16777215,t.texture=e.texture,t.matrix=e.transform,{...i,...t}}function d(t,e){if(null==t)return null;const i={},o=t;return function(t){return r.Q.isColorLike(t)}(t)?function(t,e,i){const n=r.Q.shared.setValue(e??0);return t.color=n.toNumber(),t.alpha=1===n.alpha?i.alpha:n.alpha,t.texture=s.g.WHITE,{...i,...t}}(i,t,e):h(t)?u(i,t,e):l(t)?c(i,t,e):o.fill&&h(o.fill)?u(o,o.fill,e):o.fill&&l(o.fill)?c(o,o.fill,e):function(t,e){const i={...e,...t};if(i.texture){if(i.texture!==s.g.WHITE){const t=i.matrix?.clone().invert()||new n.u;t.translate(i.texture.frame.x,i.texture.frame.y),t.scale(1/i.texture.source.width,1/i.texture.source.height),i.matrix=t}const t=i.texture.source.style;"clamp-to-edge"===t.addressMode&&(t.addressMode="repeat",t.update())}const o=r.Q.shared.setValue(i.color);return i.alpha*=o.alpha,i.color=o.toNumber(),i.matrix=i.matrix?i.matrix.clone():null,i}(o,e)}function f(t,e){const{width:i,alignment:r,miterLimit:n,cap:s,join:o,pixelLine:a,...h}=e,l=d(t,h);return l?{width:i,alignment:r,miterLimit:n,cap:s,join:o,pixelLine:a,...l}:null}},993:(t,e,i)=>{var r=i(9673).Reporter,n=i(9673).EncoderBuffer,s=i(9673).DecoderBuffer,o=i(3349),a=["seq","seqof","set","setof","objid","bool","gentime","utctime","null_","enum","int","objDesc","bitstr","bmpstr","charstr","genstr","graphstr","ia5str","iso646str","numstr","octstr","printstr","t61str","unistr","utf8str","videostr"],h=["key","obj","use","optional","explicit","implicit","def","choice","any","contains"].concat(a);function l(t,e){var i={};this._baseState=i,i.enc=t,i.parent=e||null,i.children=null,i.tag=null,i.args=null,i.reverseArgs=null,i.choice=null,i.optional=!1,i.any=!1,i.obj=!1,i.use=null,i.useDecoder=null,i.key=null,i.default=null,i.explicit=null,i.implicit=null,i.contains=null,i.parent||(i.children=[],this._wrap())}t.exports=l;var u=["enc","parent","children","tag","args","reverseArgs","choice","optional","any","obj","use","alteredUse","key","default","explicit","implicit","contains"];l.prototype.clone=function(){var t=this._baseState,e={};u.forEach(function(i){e[i]=t[i]});var i=new this.constructor(e.parent);return i._baseState=e,i},l.prototype._wrap=function(){var t=this._baseState;h.forEach(function(e){this[e]=function(){var i=new this.constructor(this);return t.children.push(i),i[e].apply(i,arguments)}},this)},l.prototype._init=function(t){var e=this._baseState;o(null===e.parent),t.call(this),e.children=e.children.filter(function(t){return t._baseState.parent===this},this),o.equal(e.children.length,1,"Root node can have only one child")},l.prototype._useArgs=function(t){var e=this._baseState,i=t.filter(function(t){return t instanceof this.constructor},this);t=t.filter(function(t){return!(t instanceof this.constructor)},this),0!==i.length&&(o(null===e.children),e.children=i,i.forEach(function(t){t._baseState.parent=this},this)),0!==t.length&&(o(null===e.args),e.args=t,e.reverseArgs=t.map(function(t){if("object"!=typeof t||t.constructor!==Object)return t;var e={};return Object.keys(t).forEach(function(i){i==(0|i)&&(i|=0);var r=t[i];e[r]=i}),e}))},["_peekTag","_decodeTag","_use","_decodeStr","_decodeObjid","_decodeTime","_decodeNull","_decodeInt","_decodeBool","_decodeList","_encodeComposite","_encodeStr","_encodeObjid","_encodeTime","_encodeNull","_encodeInt","_encodeBool"].forEach(function(t){l.prototype[t]=function(){var e=this._baseState;throw new Error(t+" not implemented for encoding: "+e.enc)}}),a.forEach(function(t){l.prototype[t]=function(){var e=this._baseState,i=Array.prototype.slice.call(arguments);return o(null===e.tag),e.tag=t,this._useArgs(i),this}}),l.prototype.use=function(t){o(t);var e=this._baseState;return o(null===e.use),e.use=t,this},l.prototype.optional=function(){return this._baseState.optional=!0,this},l.prototype.def=function(t){var e=this._baseState;return o(null===e.default),e.default=t,e.optional=!0,this},l.prototype.explicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.explicit=t,this},l.prototype.implicit=function(t){var e=this._baseState;return o(null===e.explicit&&null===e.implicit),e.implicit=t,this},l.prototype.obj=function(){var t=this._baseState,e=Array.prototype.slice.call(arguments);return t.obj=!0,0!==e.length&&this._useArgs(e),this},l.prototype.key=function(t){var e=this._baseState;return o(null===e.key),e.key=t,this},l.prototype.any=function(){return this._baseState.any=!0,this},l.prototype.choice=function(t){var e=this._baseState;return o(null===e.choice),e.choice=t,this._useArgs(Object.keys(t).map(function(e){return t[e]})),this},l.prototype.contains=function(t){var e=this._baseState;return o(null===e.use),e.contains=t,this},l.prototype._decode=function(t,e){var i=this._baseState;if(null===i.parent)return t.wrapResult(i.children[0]._decode(t,e));var r,n=i.default,o=!0,a=null;if(null!==i.key&&(a=t.enterKey(i.key)),i.optional){var h=null;if(null!==i.explicit?h=i.explicit:null!==i.implicit?h=i.implicit:null!==i.tag&&(h=i.tag),null!==h||i.any){if(o=this._peekTag(t,h,i.any),t.isError(o))return o}else{var l=t.save();try{null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e),o=!0}catch(t){o=!1}t.restore(l)}}if(i.obj&&o&&(r=t.enterObject()),o){if(null!==i.explicit){var u=this._decodeTag(t,i.explicit);if(t.isError(u))return u;t=u}var c=t.offset;if(null===i.use&&null===i.choice){i.any&&(l=t.save());var d=this._decodeTag(t,null!==i.implicit?i.implicit:i.tag,i.any);if(t.isError(d))return d;i.any?n=t.raw(l):t=d}if(e&&e.track&&null!==i.tag&&e.track(t.path(),c,t.length,"tagged"),e&&e.track&&null!==i.tag&&e.track(t.path(),t.offset,t.length,"content"),i.any||(n=null===i.choice?this._decodeGeneric(i.tag,t,e):this._decodeChoice(t,e)),t.isError(n))return n;if(i.any||null!==i.choice||null===i.children||i.children.forEach(function(i){i._decode(t,e)}),i.contains&&("octstr"===i.tag||"bitstr"===i.tag)){var f=new s(n);n=this._getUse(i.contains,t._reporterState.obj)._decode(f,e)}}return i.obj&&o&&(n=t.leaveObject(r)),null===i.key||null===n&&!0!==o?null!==a&&t.exitKey(a):t.leaveKey(a,i.key,n),n},l.prototype._decodeGeneric=function(t,e,i){var r=this._baseState;return"seq"===t||"set"===t?null:"seqof"===t||"setof"===t?this._decodeList(e,t,r.args[0],i):/str$/.test(t)?this._decodeStr(e,t,i):"objid"===t&&r.args?this._decodeObjid(e,r.args[0],r.args[1],i):"objid"===t?this._decodeObjid(e,null,null,i):"gentime"===t||"utctime"===t?this._decodeTime(e,t,i):"null_"===t?this._decodeNull(e,i):"bool"===t?this._decodeBool(e,i):"objDesc"===t?this._decodeStr(e,t,i):"int"===t||"enum"===t?this._decodeInt(e,r.args&&r.args[0],i):null!==r.use?this._getUse(r.use,e._reporterState.obj)._decode(e,i):e.error("unknown tag: "+t)},l.prototype._getUse=function(t,e){var i=this._baseState;return i.useDecoder=this._use(t,e),o(null===i.useDecoder._baseState.parent),i.useDecoder=i.useDecoder._baseState.children[0],i.implicit!==i.useDecoder._baseState.implicit&&(i.useDecoder=i.useDecoder.clone(),i.useDecoder._baseState.implicit=i.implicit),i.useDecoder},l.prototype._decodeChoice=function(t,e){var i=this._baseState,r=null,n=!1;return Object.keys(i.choice).some(function(s){var o=t.save(),a=i.choice[s];try{var h=a._decode(t,e);if(t.isError(h))return!1;r={type:s,value:h},n=!0}catch(e){return t.restore(o),!1}return!0},this),n?r:t.error("Choice not matched")},l.prototype._createEncoderBuffer=function(t){return new n(t,this.reporter)},l.prototype._encode=function(t,e,i){var r=this._baseState;if(null===r.default||r.default!==t){var n=this._encodeValue(t,e,i);if(void 0!==n&&!this._skipDefault(n,e,i))return n}},l.prototype._encodeValue=function(t,e,i){var n=this._baseState;if(null===n.parent)return n.children[0]._encode(t,e||new r);var s=null;if(this.reporter=e,n.optional&&void 0===t){if(null===n.default)return;t=n.default}var o=null,a=!1;if(n.any)s=this._createEncoderBuffer(t);else if(n.choice)s=this._encodeChoice(t,e);else if(n.contains)o=this._getUse(n.contains,i)._encode(t,e),a=!0;else if(n.children)o=n.children.map(function(i){if("null_"===i._baseState.tag)return i._encode(null,e,t);if(null===i._baseState.key)return e.error("Child should have a key");var r=e.enterKey(i._baseState.key);if("object"!=typeof t)return e.error("Child expected, but input is not object");var n=i._encode(t[i._baseState.key],e,t);return e.leaveKey(r),n},this).filter(function(t){return t}),o=this._createEncoderBuffer(o);else if("seqof"===n.tag||"setof"===n.tag){if(!n.args||1!==n.args.length)return e.error("Too many args for : "+n.tag);if(!Array.isArray(t))return e.error("seqof/setof, but data is not Array");var h=this.clone();h._baseState.implicit=null,o=this._createEncoderBuffer(t.map(function(i){var r=this._baseState;return this._getUse(r.args[0],t)._encode(i,e)},h))}else null!==n.use?s=this._getUse(n.use,i)._encode(t,e):(o=this._encodePrimitive(n.tag,t),a=!0);if(!n.any&&null===n.choice){var l=null!==n.implicit?n.implicit:n.tag,u=null===n.implicit?"universal":"context";null===l?null===n.use&&e.error("Tag could be omitted only for .use()"):null===n.use&&(s=this._encodeComposite(l,a,u,o))}return null!==n.explicit&&(s=this._encodeComposite(n.explicit,!1,"context",s)),s},l.prototype._encodeChoice=function(t,e){var i=this._baseState,r=i.choice[t.type];return r||o(!1,t.type+" not found in "+JSON.stringify(Object.keys(i.choice))),r._encode(t.value,e)},l.prototype._encodePrimitive=function(t,e){var i=this._baseState;if(/str$/.test(t))return this._encodeStr(e,t);if("objid"===t&&i.args)return this._encodeObjid(e,i.reverseArgs[0],i.args[1]);if("objid"===t)return this._encodeObjid(e,null,null);if("gentime"===t||"utctime"===t)return this._encodeTime(e,t);if("null_"===t)return this._encodeNull();if("int"===t||"enum"===t)return this._encodeInt(e,i.args&&i.reverseArgs[0]);if("bool"===t)return this._encodeBool(e);if("objDesc"===t)return this._encodeStr(e,t);throw new Error("Unsupported tag: "+t)},l.prototype._isNumstr=function(t){return/^[0-9 ]*$/.test(t)},l.prototype._isPrintstr=function(t){return/^[A-Za-z0-9 '\(\)\+,\-\.\/:=\?]*$/.test(t)}},1002:t=>{"use strict";t.exports=Function.prototype.apply},1045:(t,e,i)=>{"use strict";var r=i(8287).Buffer,n=i(8287).SlowBuffer;function s(t,e){if(!r.isBuffer(t)||!r.isBuffer(e))return!1;if(t.length!==e.length)return!1;for(var i=0,n=0;n<t.length;n++)i|=t[n]^e[n];return 0===i}t.exports=s,s.install=function(){r.prototype.equal=n.prototype.equal=function(t){return s(this,t)}};var o=r.prototype.equal,a=n.prototype.equal;s.restore=function(){r.prototype.equal=o,n.prototype.equal=a}},1064:(t,e,i)=>{"use strict";var r=i(9612);t.exports=r.getPrototypeOf||null},1093:t=>{"use strict";var e=Object.prototype.toString;t.exports=function(t){var i=e.call(t),r="[object Arguments]"===i;return r||(r="[object Array]"!==i&&null!==t&&"object"==typeof t&&"number"==typeof t.length&&t.length>=0&&"[object Function]"===e.call(t.callee)),r}},1121:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=Function.prototype.toString;const n=function(t){if(null!=t){try{return r.call(t)}catch(t){}try{return t+""}catch(t){}}return""}},1132:(t,e,i)=>{"use strict";i.d(e,{S:()=>r});var r=(t=>(t[t.MAP_READ=1]="MAP_READ",t[t.MAP_WRITE=2]="MAP_WRITE",t[t.COPY_SRC=4]="COPY_SRC",t[t.COPY_DST=8]="COPY_DST",t[t.INDEX=16]="INDEX",t[t.VERTEX=32]="VERTEX",t[t.UNIFORM=64]="UNIFORM",t[t.STORAGE=128]="STORAGE",t[t.INDIRECT=256]="INDIRECT",t[t.QUERY_RESOLVE=512]="QUERY_RESOLVE",t[t.STATIC=1024]="STATIC",t))(r||{})},1135:t=>{t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},1137:(t,e,i)=>{"use strict";var r=i(7568);e.certificate=i(6413);var n=r.define("RSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("modulus").int(),this.key("publicExponent").int(),this.key("privateExponent").int(),this.key("prime1").int(),this.key("prime2").int(),this.key("exponent1").int(),this.key("exponent2").int(),this.key("coefficient").int())});e.RSAPrivateKey=n;var s=r.define("RSAPublicKey",function(){this.seq().obj(this.key("modulus").int(),this.key("publicExponent").int())});e.RSAPublicKey=s;var o=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("none").null_().optional(),this.key("curve").objid().optional(),this.key("params").seq().obj(this.key("p").int(),this.key("q").int(),this.key("g").int()).optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())});e.PublicKey=a;var h=r.define("PrivateKeyInfo",function(){this.seq().obj(this.key("version").int(),this.key("algorithm").use(o),this.key("subjectPrivateKey").octstr())});e.PrivateKey=h;var l=r.define("EncryptedPrivateKeyInfo",function(){this.seq().obj(this.key("algorithm").seq().obj(this.key("id").objid(),this.key("decrypt").seq().obj(this.key("kde").seq().obj(this.key("id").objid(),this.key("kdeparams").seq().obj(this.key("salt").octstr(),this.key("iters").int())),this.key("cipher").seq().obj(this.key("algo").objid(),this.key("iv").octstr()))),this.key("subjectPrivateKey").octstr())});e.EncryptedPrivateKey=l;var u=r.define("DSAPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("p").int(),this.key("q").int(),this.key("g").int(),this.key("pub_key").int(),this.key("priv_key").int())});e.DSAPrivateKey=u,e.DSAparam=r.define("DSAparam",function(){this.int()});var c=r.define("ECParameters",function(){this.choice({namedCurve:this.objid()})}),d=r.define("ECPrivateKey",function(){this.seq().obj(this.key("version").int(),this.key("privateKey").octstr(),this.key("parameters").optional().explicit(0).use(c),this.key("publicKey").optional().explicit(1).bitstr())});e.ECPrivateKey=d,e.signature=r.define("signature",function(){this.seq().obj(this.key("r").int(),this.key("s").int())})},1147:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(8399).Transform;function s(t){n.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(6698)(s,n),s.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},s.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},s.prototype.update=function(t,e){if(function(t){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var i=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)i[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},1173:(t,e,i)=>{"use strict";i.d(e,{x:()=>l});var r=i(268),n=i(2927),s=i(2406);function o(t,e,i,r,n){const s=e[i];for(let a=0;a<s.length;a++){const h=s[a];i<e.length-1?o(t.replace(r[i],h),e,i+1,r,n):n.push(t.replace(r[i],h))}}function a(t){const e=t.match(/\{(.*?)\}/g),i=[];if(e){const r=[];e.forEach(t=>{const e=t.substring(1,t.length-1).split(",");r.push(e)}),o(t,r,0,e,i)}else i.push(t);return i}var h=i(2217);class l{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,e)=>`${t}${this._bundleIdConnector}${e}`,extractAssetIdFromBundle:(t,e)=>e.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,"bar"!==this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar")))throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(t=>{this._preferredOrder.push(t),t.priority||(t.priority=Object.keys(t.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if("string"==typeof t)this._defaultSearchParams=t;else{const e=t;this._defaultSearchParams=Object.keys(e).map(t=>`${encodeURIComponent(t)}=${encodeURIComponent(e[t])}`).join("&")}}getAlias(t){const{alias:e,src:i}=t;return(0,s.z)(e||i,t=>"string"==typeof t?t:Array.isArray(t)?t.map(t=>t?.src??t):t?.src?t.src:t,!0)}addManifest(t){this._manifest&&(0,r.R)("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(t=>{this.addBundle(t.name,t.assets)})}addBundle(t,e){const i=[];let r=e;Array.isArray(e)||(r=Object.entries(e).map(([t,e])=>"string"==typeof e||Array.isArray(e)?{alias:t,src:e}:{alias:t,...e})),r.forEach(e=>{const r=e.src,n=e.alias;let s;if("string"==typeof n){const e=this._createBundleAssetId(t,n);i.push(e),s=[n,e]}else{const e=n.map(e=>this._createBundleAssetId(t,e));i.push(...e),s=[...n,...e]}this.add({...e,alias:s,src:r})}),this._bundles[t]=i}add(t){const e=[];let i;Array.isArray(t)?e.push(...t):e.push(t),i=t=>{this.hasKey(t)&&(0,r.R)(`[Resolver] already has key: ${t} overwriting`)},(0,s.z)(e).forEach(t=>{const{src:e}=t;let{data:r,format:n,loadParser:o}=t;const h=(0,s.z)(e).map(t=>"string"==typeof t?a(t):Array.isArray(t)?t:[t]),l=this.getAlias(t);Array.isArray(l)?l.forEach(i):i(l);const u=[];h.forEach(t=>{t.forEach(t=>{let e={};if("object"!=typeof t){e.src=t;for(let i=0;i<this._parsers.length;i++){const r=this._parsers[i];if(r.test(t)){e=r.parse(t);break}}}else r=t.data??r,n=t.format??n,o=t.loadParser??o,e={...e,...t};if(!l)throw new Error(`[Resolver] alias is undefined for this asset: ${e.src}`);e=this._buildResolvedAsset(e,{aliases:l,data:r,format:n,loadParser:o}),u.push(e)})}),l.forEach(t=>{this._assetMap[t]=u})})}resolveBundle(t){const e=(0,h.a)(t);t=(0,s.z)(t);const i={};return t.forEach(t=>{const e=this._bundles[t];if(e){const r=this.resolve(e),n={};for(const e in r){const i=r[e];n[this._extractAssetIdFromBundle(t,e)]=i}i[t]=n}}),e?i[t[0]]:i}resolveUrl(t){const e=this.resolve(t);if("string"!=typeof t){const t={};for(const i in e)t[i]=e[i].src;return t}return e.src}resolve(t){const e=(0,h.a)(t);t=(0,s.z)(t);const i={};return t.forEach(t=>{if(!this._resolverHash[t])if(this._assetMap[t]){let e=this._assetMap[t];const i=this._getPreferredOrder(e);i?.priority.forEach(t=>{i.params[t].forEach(i=>{const r=e.filter(e=>!!e[t]&&e[t]===i);r.length&&(e=r)})}),this._resolverHash[t]=e[0]}else this._resolverHash[t]=this._buildResolvedAsset({alias:[t],src:t},{});i[t]=this._resolverHash[t]}),e?i[t[0]]:i}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let e=0;e<t.length;e++){const i=t[e],r=this._preferredOrder.find(t=>t.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){return this._defaultSearchParams?`${t}${/\?/.test(t)?"&":"?"}${this._defaultSearchParams}`:t}_buildResolvedAsset(t,e){const{aliases:i,data:r,loadParser:s,format:o}=e;return(this._basePath||this._rootPath)&&(t.src=n.A.toAbsolute(t.src,this._basePath,this._rootPath)),t.alias=i??t.alias??[t.src],t.src=this._appendDefaultSearchParams(t.src),t.data={...r||{},...t.data},t.loadParser=s??t.loadParser,t.format=o??t.format??t.src.split(".").pop().split("?").shift().split("#").shift(),t}}l.RETINA_PREFIX=/@([0-9\.]+)x/},1189:(t,e,i)=>{"use strict";var r=Array.prototype.slice,n=i(1093),s=Object.keys,o=s?function(t){return s(t)}:i(8875),a=Object.keys;o.shim=function(){if(Object.keys){var t=function(){var t=Object.keys(arguments);return t&&t.length===arguments.length}(1,2);t||(Object.keys=function(t){return n(t)?a(r.call(t)):a(t)})}else Object.keys=o;return Object.keys||o},t.exports=o},1196:(t,e,i)=>{"use strict";i.d(e,{N:()=>s});var r=i(9313);const n=new r.u;class s{constructor(t,e){this.mapCoord=new r.u,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=void 0===e?t.width<10?0:.5:e,this.isSimple=!1,this.texture=t}get texture(){return this._texture}set texture(t){this.texture!==t&&(this._texture?.removeListener("update",this.update,this),this._texture=t,this._texture.addListener("update",this.update,this),this.update())}multiplyUvs(t,e){void 0===e&&(e=t);const i=this.mapCoord;for(let r=0;r<t.length;r+=2){const n=t[r],s=t[r+1];e[r]=n*i.a+s*i.c+i.tx,e[r+1]=n*i.b+s*i.d+i.ty}return e}update(){const t=this._texture;this._updateID++;const e=t.uvs;this.mapCoord.set(e.x1-e.x0,e.y1-e.y0,e.x3-e.x0,e.y3-e.y0,e.x0,e.y0);const i=t.orig,r=t.trim;r&&(n.set(i.width/r.width,0,0,i.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(n));const s=t.source,o=this.uClampFrame,a=this.clampMargin/s._resolution,h=this.clampOffset/s._resolution;return o[0]=(t.frame.x+a+h)/s.width,o[1]=(t.frame.y+a+h)/s.height,o[2]=(t.frame.x+t.frame.width-a+h)/s.width,o[3]=(t.frame.y+t.frame.height-a+h)/s.height,this.uClampOffset[0]=this.clampOffset/s.pixelWidth,this.uClampOffset[1]=this.clampOffset/s.pixelHeight,this.isSimple=t.frame.width===s.width&&t.frame.height===s.height&&0===t.rotate,!0}}},1200:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var r=i(1917);var n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===n?r.A.Buffer:void 0;const a=(o?o.isBuffer:void 0)||function(){return!1}},1237:t=>{"use strict";t.exports=EvalError},1241:(t,e,i)=>{var r=i(5799),n=i(6171),s=i(3219);e.createCipher=e.Cipher=r.createCipher,e.createCipheriv=e.Cipheriv=r.createCipheriv,e.createDecipher=e.Decipher=n.createDecipher,e.createDecipheriv=e.Decipheriv=n.createDecipheriv,e.listCiphers=e.getCiphers=function(){return Object.keys(s)}},1242:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});const r=["serif","sans-serif","monospace","cursive","fantasy","system-ui"];function n(t){const e="number"==typeof t.fontSize?`${t.fontSize}px`:t.fontSize;let i=t.fontFamily;Array.isArray(t.fontFamily)||(i=t.fontFamily.split(","));for(let t=i.length-1;t>=0;t--){let e=i[t].trim();/([\"\'])[^\'\"]+\1/.test(e)||r.includes(e)||(e=`"${e}"`),i[t]=e}return`${t.fontStyle} ${t.fontVariant} ${t.fontWeight} ${e} ${i.join(",")}`}},1285:(t,e,i)=>{"use strict";i.d(e,{v:()=>h});var r=i(4486),n=i(9939),s=i(133),o=i(218);const a=class t extends r.A{constructor(e={}){super(),this.options=e,this.uid=(0,s.L)("textureSource"),this._resourceType="textureSource",this._resourceId=(0,s.L)("resource"),this.uploadMethodId="unknown",this._resolution=1,this.pixelWidth=1,this.pixelHeight=1,this.width=1,this.height=1,this.sampleCount=1,this.mipLevelCount=1,this.autoGenerateMipmaps=!1,this.format="rgba8unorm",this.dimension="2d",this.antialias=!1,this._touched=0,this._batchTick=-1,this._textureBindLocation=-1,e={...t.defaultOptions,...e},this.label=e.label??"",this.resource=e.resource,this.autoGarbageCollect=e.autoGarbageCollect,this._resolution=e.resolution,e.width?this.pixelWidth=e.width*this._resolution:this.pixelWidth=this.resource?this.resourceWidth??1:1,e.height?this.pixelHeight=e.height*this._resolution:this.pixelHeight=this.resource?this.resourceHeight??1:1,this.width=this.pixelWidth/this._resolution,this.height=this.pixelHeight/this._resolution,this.format=e.format,this.dimension=e.dimensions,this.mipLevelCount=e.mipLevelCount,this.autoGenerateMipmaps=e.autoGenerateMipmaps,this.sampleCount=e.sampleCount,this.antialias=e.antialias,this.alphaMode=e.alphaMode,this.style=new o.n(function(t){const e={};for(const i in t)void 0!==t[i]&&(e[i]=t[i]);return e}(e)),this.destroyed=!1,this._refreshPOT()}get source(){return this}get style(){return this._style}set style(t){this.style!==t&&(this._style?.off("change",this._onStyleChange,this),this._style=t,this._style?.on("change",this._onStyleChange,this),this._onStyleChange())}get addressMode(){return this._style.addressMode}set addressMode(t){this._style.addressMode=t}get repeatMode(){return this._style.addressMode}set repeatMode(t){this._style.addressMode=t}get magFilter(){return this._style.magFilter}set magFilter(t){this._style.magFilter=t}get minFilter(){return this._style.minFilter}set minFilter(t){this._style.minFilter=t}get mipmapFilter(){return this._style.mipmapFilter}set mipmapFilter(t){this._style.mipmapFilter=t}get lodMinClamp(){return this._style.lodMinClamp}set lodMinClamp(t){this._style.lodMinClamp=t}get lodMaxClamp(){return this._style.lodMaxClamp}set lodMaxClamp(t){this._style.lodMaxClamp=t}_onStyleChange(){this.emit("styleChange",this)}update(){if(this.resource){const t=this._resolution;if(this.resize(this.resourceWidth/t,this.resourceHeight/t))return}this.emit("update",this)}destroy(){this.destroyed=!0,this.emit("destroy",this),this.emit("change",this),this._style&&(this._style.destroy(),this._style=null),this.uploadMethodId=null,this.resource=null,this.removeAllListeners()}unload(){this._resourceId=(0,s.L)("resource"),this.emit("change",this),this.emit("unload",this)}get resourceWidth(){const{resource:t}=this;return t.naturalWidth||t.videoWidth||t.displayWidth||t.width}get resourceHeight(){const{resource:t}=this;return t.naturalHeight||t.videoHeight||t.displayHeight||t.height}get resolution(){return this._resolution}set resolution(t){this._resolution!==t&&(this._resolution=t,this.width=this.pixelWidth/t,this.height=this.pixelHeight/t)}resize(t,e,i){i||(i=this._resolution),t||(t=this.width),e||(e=this.height);const r=Math.round(t*i),n=Math.round(e*i);return this.width=r/i,this.height=n/i,this._resolution=i,(this.pixelWidth!==r||this.pixelHeight!==n)&&(this._refreshPOT(),this.pixelWidth=r,this.pixelHeight=n,this.emit("resize",this),this._resourceId=(0,s.L)("resource"),this.emit("change",this),!0)}updateMipmaps(){this.autoGenerateMipmaps&&this.mipLevelCount>1&&this.emit("updateMipmaps",this)}set wrapMode(t){this._style.wrapMode=t}get wrapMode(){return this._style.wrapMode}set scaleMode(t){this._style.scaleMode=t}get scaleMode(){return this._style.scaleMode}_refreshPOT(){this.isPowerOfTwo=(0,n.f3)(this.pixelWidth)&&(0,n.f3)(this.pixelHeight)}static test(t){throw new Error("Unimplemented")}};a.defaultOptions={resolution:1,format:"bgra8unorm",alphaMode:"premultiply-alpha-on-upload",dimensions:"2d",mipLevelCount:1,autoGenerateMipmaps:!1,sampleCount:1,antialias:!1,autoGarbageCollect:!1};let h=a},1298:(t,e,i)=>{"use strict";var r=i(7011),n=i(9404),s=i(6698),o=i(6677),a=r.assert;function h(t){this.twisted=1!=(0|t.a),this.mOneA=this.twisted&&-1==(0|t.a),this.extended=this.mOneA,o.call(this,"edwards",t),this.a=new n(t.a,16).umod(this.red.m),this.a=this.a.toRed(this.red),this.c=new n(t.c,16).toRed(this.red),this.c2=this.c.redSqr(),this.d=new n(t.d,16).toRed(this.red),this.dd=this.d.redAdd(this.d),a(!this.twisted||0===this.c.fromRed().cmpn(1)),this.oneC=1==(0|t.c)}function l(t,e,i,r,s){o.BasePoint.call(this,t,"projective"),null===e&&null===i&&null===r?(this.x=this.curve.zero,this.y=this.curve.one,this.z=this.curve.one,this.t=this.curve.zero,this.zOne=!0):(this.x=new n(e,16),this.y=new n(i,16),this.z=r?new n(r,16):this.curve.one,this.t=s&&new n(s,16),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.t&&!this.t.red&&(this.t=this.t.toRed(this.curve.red)),this.zOne=this.z===this.curve.one,this.curve.extended&&!this.t&&(this.t=this.x.redMul(this.y),this.zOne||(this.t=this.t.redMul(this.z.redInvm()))))}s(h,o),t.exports=h,h.prototype._mulA=function(t){return this.mOneA?t.redNeg():this.a.redMul(t)},h.prototype._mulC=function(t){return this.oneC?t:this.c.redMul(t)},h.prototype.jpoint=function(t,e,i,r){return this.point(t,e,i,r)},h.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=this.c2.redSub(this.a.redMul(i)),s=this.one.redSub(this.c2.redMul(this.d).redMul(i)),o=r.redMul(s.redInvm()),a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");var h=a.fromRed().isOdd();return(e&&!h||!e&&h)&&(a=a.redNeg()),this.point(t,a)},h.prototype.pointFromY=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr(),r=i.redSub(this.c2),s=i.redMul(this.d).redMul(this.c2).redSub(this.a),o=r.redMul(s.redInvm());if(0===o.cmp(this.zero)){if(e)throw new Error("invalid point");return this.point(this.zero,t)}var a=o.redSqrt();if(0!==a.redSqr().redSub(o).cmp(this.zero))throw new Error("invalid point");return a.fromRed().isOdd()!==e&&(a=a.redNeg()),this.point(a,t)},h.prototype.validate=function(t){if(t.isInfinity())return!0;t.normalize();var e=t.x.redSqr(),i=t.y.redSqr(),r=e.redMul(this.a).redAdd(i),n=this.c2.redMul(this.one.redAdd(this.d.redMul(e).redMul(i)));return 0===r.cmp(n)},s(l,o.BasePoint),h.prototype.pointFromJSON=function(t){return l.fromJSON(this,t)},h.prototype.point=function(t,e,i,r){return new l(this,t,e,i,r)},l.fromJSON=function(t,e){return new l(t,e[0],e[1],e[2])},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+" z: "+this.z.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return 0===this.x.cmpn(0)&&(0===this.y.cmp(this.z)||this.zOne&&0===this.y.cmp(this.curve.c))},l.prototype._extDbl=function(){var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr();i=i.redIAdd(i);var r=this.curve._mulA(t),n=this.x.redAdd(this.y).redSqr().redISub(t).redISub(e),s=r.redAdd(e),o=s.redSub(i),a=r.redSub(e),h=n.redMul(o),l=s.redMul(a),u=n.redMul(a),c=o.redMul(s);return this.curve.point(h,l,c,u)},l.prototype._projDbl=function(){var t,e,i,r,n,s,o=this.x.redAdd(this.y).redSqr(),a=this.x.redSqr(),h=this.y.redSqr();if(this.curve.twisted){var l=(r=this.curve._mulA(a)).redAdd(h);this.zOne?(t=o.redSub(a).redSub(h).redMul(l.redSub(this.curve.two)),e=l.redMul(r.redSub(h)),i=l.redSqr().redSub(l).redSub(l)):(n=this.z.redSqr(),s=l.redSub(n).redISub(n),t=o.redSub(a).redISub(h).redMul(s),e=l.redMul(r.redSub(h)),i=l.redMul(s))}else r=a.redAdd(h),n=this.curve._mulC(this.z).redSqr(),s=r.redSub(n).redSub(n),t=this.curve._mulC(o.redISub(r)).redMul(s),e=this.curve._mulC(r).redMul(a.redISub(h)),i=r.redMul(s);return this.curve.point(t,e,i)},l.prototype.dbl=function(){return this.isInfinity()?this:this.curve.extended?this._extDbl():this._projDbl()},l.prototype._extAdd=function(t){var e=this.y.redSub(this.x).redMul(t.y.redSub(t.x)),i=this.y.redAdd(this.x).redMul(t.y.redAdd(t.x)),r=this.t.redMul(this.curve.dd).redMul(t.t),n=this.z.redMul(t.z.redAdd(t.z)),s=i.redSub(e),o=n.redSub(r),a=n.redAdd(r),h=i.redAdd(e),l=s.redMul(o),u=a.redMul(h),c=s.redMul(h),d=o.redMul(a);return this.curve.point(l,u,d,c)},l.prototype._projAdd=function(t){var e,i,r=this.z.redMul(t.z),n=r.redSqr(),s=this.x.redMul(t.x),o=this.y.redMul(t.y),a=this.curve.d.redMul(s).redMul(o),h=n.redSub(a),l=n.redAdd(a),u=this.x.redAdd(this.y).redMul(t.x.redAdd(t.y)).redISub(s).redISub(o),c=r.redMul(h).redMul(u);return this.curve.twisted?(e=r.redMul(l).redMul(o.redSub(this.curve._mulA(s))),i=h.redMul(l)):(e=r.redMul(l).redMul(o.redSub(s)),i=this.curve._mulC(h).redMul(l)),this.curve.point(c,e,i)},l.prototype.add=function(t){return this.isInfinity()?t:t.isInfinity()?this:this.curve.extended?this._extAdd(t):this._projAdd(t)},l.prototype.mul=function(t){return this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!1)},l.prototype.jmulAdd=function(t,e,i){return this.curve._wnafMulAdd(1,[this,e],[t,i],2,!0)},l.prototype.normalize=function(){if(this.zOne)return this;var t=this.z.redInvm();return this.x=this.x.redMul(t),this.y=this.y.redMul(t),this.t&&(this.t=this.t.redMul(t)),this.z=this.curve.one,this.zOne=!0,this},l.prototype.neg=function(){return this.curve.point(this.x.redNeg(),this.y,this.z,this.t&&this.t.redNeg())},l.prototype.getX=function(){return this.normalize(),this.x.fromRed()},l.prototype.getY=function(){return this.normalize(),this.y.fromRed()},l.prototype.eq=function(t){return this===t||0===this.getX().cmp(t.getX())&&0===this.getY().cmp(t.getY())},l.prototype.eqXToP=function(t){var e=t.toRed(this.curve.red).redMul(this.z);if(0===this.x.cmp(e))return!0;for(var i=t.clone(),r=this.curve.redN.redMul(this.z);;){if(i.iadd(this.curve.n),i.cmp(this.curve.p)>=0)return!1;if(e.redIAdd(r),0===this.x.cmp(e))return!0}},l.prototype.toP=l.prototype.normalize,l.prototype.mixedAdd=l.prototype.add},1312:(t,e,i)=>{"use strict";i.d(e,{c:()=>x});var r=i(1979),n=i(4670),s=i(268),o=i(8291),a=i(2577),h=i(9252),l=i(7608),u=i(8293),c=i(4492),d=i(4016),f=i(1242),p=i(3548),m=i(1849);function g(t){if(""===t)return[];"string"==typeof t&&(t=[t]);const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];if(Array.isArray(r)){if(2!==r.length)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);if(0===r[0].length||0===r[1].length)throw new Error("[BitmapFont]: Invalid character delimiter.");const t=r[0].charCodeAt(0),i=r[1].charCodeAt(0);if(i<t)throw new Error("[BitmapFont]: Invalid character range.");for(let r=t,n=i;r<=n;r++)e.push(String.fromCharCode(r))}else e.push(...Array.from(r))}if(0===e.length)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const v=class t extends m.v{constructor(e){super(),this.resolution=1,this.pages=[],this._padding=0,this._measureCache=Object.create(null),this._currentChars=[],this._currentX=0,this._currentY=0,this._currentPageIndex=-1,this._skipKerning=!1;const i={...t.defaultOptions,...e};this._textureSize=i.textureSize,this._mipmap=i.mipmap;const r=i.style.clone();i.overrideFill&&(r._fill.color=16777215,r._fill.alpha=1,r._fill.texture=c.g.WHITE,r._fill.fill=null),this.applyFillAsTint=i.overrideFill;const n=r.fontSize;r.fontSize=this.baseMeasurementFontSize;const s=(0,f.Z)(r);i.overrideSize?r._stroke&&(r._stroke.width*=this.baseRenderedFontSize/n):r.fontSize=this.baseRenderedFontSize=n,this._style=r,this._skipKerning=i.skipKerning??!1,this.resolution=i.resolution??1,this._padding=i.padding??4,this.fontMetrics=d.P.measureFont(s),this.lineHeight=r.lineHeight||this.fontMetrics.fontSize||r.fontSize}ensureCharacters(t){const e=g(t).filter(t=>!this._currentChars.includes(t)).filter((t,e,i)=>i.indexOf(t)===e);if(!e.length)return;let i;this._currentChars=[...this._currentChars,...e],i=-1===this._currentPageIndex?this._nextPage():this.pages[this._currentPageIndex];let{canvas:r,context:n}=i.canvasAndContext,s=i.texture.source;const o=this._style;let a=this._currentX,l=this._currentY;const u=this.baseRenderedFontSize/this.baseMeasurementFontSize,f=this._padding*u;let p=0,m=!1;const v=r.width/this.resolution,y=r.height/this.resolution;for(let t=0;t<e.length;t++){const i=e[t],g=d.P.measureText(i,o,r,!1);g.lineHeight=g.height;const b=g.width*u,_=Math.ceil(("italic"===o.fontStyle?2:1)*b)+2*f,x=g.height*u+2*f;if(m=!1,"\n"!==i&&"\r"!==i&&"\t"!==i&&" "!==i&&(m=!0,p=Math.ceil(Math.max(x,p))),a+_>v&&(l+=p,p=x,a=0,l+p>y)){s.update();const t=this._nextPage();r=t.canvasAndContext.canvas,n=t.canvasAndContext.context,s=t.texture.source,l=0}const w=b/u-(o.dropShadow?.distance??0)-(o._stroke?.width??0);if(this.chars[i]={id:i.codePointAt(0),xOffset:-this._padding,yOffset:-this._padding,xAdvance:w,kerning:{}},m){this._drawGlyph(n,g,a+f,l+f,u,o);const t=s.width*u,e=s.height*u,r=new h.M(a/t*s.width,l/e*s.height,_/t*s.width,x/e*s.height);this.chars[i].texture=new c.g({source:s,frame:r}),a+=Math.ceil(_)}}s.update(),this._currentX=a,this._currentY=l,this._skipKerning&&this._applyKerning(e,n)}get pageTextures(){return(0,n.t6)(n.lj,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}_applyKerning(t,e){const i=this._measureCache;for(let r=0;r<t.length;r++){const n=t[r];for(let t=0;t<this._currentChars.length;t++){const r=this._currentChars[t];let s=i[n];s||(s=i[n]=e.measureText(n).width);let o=i[r];o||(o=i[r]=e.measureText(r).width);let a=e.measureText(n+r).width,h=a-(s+o);h&&(this.chars[n].kerning[r]=h),a=e.measureText(n+r).width,h=a-(s+o),h&&(this.chars[r].kerning[n]=h)}}}_nextPage(){this._currentPageIndex++;const t=this.resolution,e=l.N.getOptimalCanvasAndContext(this._textureSize,this._textureSize,t);this._setupContext(e.context,this._style,t);const i=t*(this.baseRenderedFontSize/this.baseMeasurementFontSize),r={canvasAndContext:e,texture:new c.g({source:new u.b({resource:e.canvas,resolution:i,alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:this._mipmap})})};return this.pages[this._currentPageIndex]=r,r}_setupContext(t,e,i){e.fontSize=this.baseRenderedFontSize,t.scale(i,i),t.font=(0,f.Z)(e),e.fontSize=this.baseMeasurementFontSize,t.textBaseline=e.textBaseline;const r=e._stroke,n=r?.width??0;if(r&&(t.lineWidth=n,t.lineJoin=r.join,t.miterLimit=r.miterLimit,t.strokeStyle=(0,p.r)(r,t)),e._fill&&(t.fillStyle=(0,p.r)(e._fill,t)),e.dropShadow){const r=e.dropShadow,n=a.Q.shared.setValue(r.color).toArray(),s=r.blur*i,o=r.distance*i;t.shadowColor=`rgba(${255*n[0]},${255*n[1]},${255*n[2]},${r.alpha})`,t.shadowBlur=s,t.shadowOffsetX=Math.cos(r.angle)*o,t.shadowOffsetY=Math.sin(r.angle)*o}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0}_drawGlyph(t,e,i,r,n,s){const o=e.text,a=e.fontProperties,h=s._stroke,l=(h?.width??0)*n,u=i+l/2,c=r-l/2,d=a.descent*n,f=e.lineHeight*n;s.stroke&&l&&t.strokeText(o,u,c+f-d),s._fill&&t.fillText(o,u,c+f-d)}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{canvasAndContext:e,texture:i}=this.pages[t];l.N.returnCanvasAndContext(e),i.destroy(!0)}this.pages=null}};v.defaultOptions={textureSize:512,style:new o.x,mipmap:!0};let y=v;var b=i(2763);let _=0;const x=new class{constructor(){this.ALPHA=[["a","z"],["A","Z"]," "],this.NUMERIC=[["0","9"]],this.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],this.ASCII=[[" ","~"]],this.defaultOptions={chars:this.ALPHANUMERIC,resolution:1,padding:4,skipKerning:!1}}getFont(t,e){let i=`${e.fontFamily}-bitmap`,n=!0;if(e._fill.fill&&!e._stroke)i+=e._fill.fill.styleKey,n=!1;else if(e._stroke||e.dropShadow){let t=e.styleKey;t=t.substring(0,t.lastIndexOf("-")),i=`${t}-bitmap`,n=!1}if(!r.l.has(i)){const t=new y({style:e,overrideFill:n,overrideSize:!0,...this.defaultOptions});_++,_>50&&(0,s.R)("BitmapText",`You have dynamically created ${_} bitmap fonts, this can be inefficient. Try pre installing your font styles using \`BitmapFont.install({name:"style1", style})\``),t.once("destroy",()=>{_--,r.l.remove(i)}),r.l.set(i,t)}const o=r.l.get(i);return o.ensureCharacters?.(t),o}getLayout(t,e,i=!0){const r=this.getFont(t,e);return(0,b.Z)([...t],e,r,i)}measureText(t,e,i=!0){return this.getLayout(t,e,i)}install(...t){let e=t[0];"string"==typeof e&&(e={name:e,style:t[1],chars:t[2]?.chars,resolution:t[2]?.resolution,padding:t[2]?.padding,skipKerning:t[2]?.skipKerning},(0,n.t6)(n.lj,"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})"));const i=e?.name;if(!i)throw new Error("[BitmapFontManager] Property `name` is required.");e={...this.defaultOptions,...e};const s=e.style,a=s instanceof o.x?s:new o.x(s),h=null!==a._fill.fill&&void 0!==a._fill.fill,l=new y({style:a,overrideFill:h,skipKerning:e.skipKerning,padding:e.padding,resolution:e.resolution,overrideSize:!1}),u=g(e.chars);return l.ensureCharacters(u.join("")),r.l.set(`${i}-bitmap`,l),l.once("destroy",()=>r.l.remove(`${i}-bitmap`)),l}uninstall(t){const e=`${t}-bitmap`,i=r.l.get(e);i&&i.destroy()}}},1324:(t,e,i)=>{var r=i(8287).Buffer,n=i(6729),s=i(9404);t.exports=function(t){return new a(t)};var o={secp256k1:{name:"secp256k1",byteLength:32},secp224r1:{name:"p224",byteLength:28},prime256v1:{name:"p256",byteLength:32},prime192v1:{name:"p192",byteLength:24},ed25519:{name:"ed25519",byteLength:32},secp384r1:{name:"p384",byteLength:48},secp521r1:{name:"p521",byteLength:66}};function a(t){this.curveType=o[t],this.curveType||(this.curveType={name:t}),this.curve=new n.ec(this.curveType.name),this.keys=void 0}function h(t,e,i){Array.isArray(t)||(t=t.toArray());var n=new r(t);if(i&&n.length<i){var s=new r(i-n.length);s.fill(0),n=r.concat([s,n])}return e?n.toString(e):n}o.p224=o.secp224r1,o.p256=o.secp256r1=o.prime256v1,o.p192=o.secp192r1=o.prime192v1,o.p384=o.secp384r1,o.p521=o.secp521r1,a.prototype.generateKeys=function(t,e){return this.keys=this.curve.genKeyPair(),this.getPublicKey(t,e)},a.prototype.computeSecret=function(t,e,i){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),h(this.curve.keyFromPublic(t).getPublic().mul(this.keys.getPrivate()).getX(),i,this.curveType.byteLength)},a.prototype.getPublicKey=function(t,e){var i=this.keys.getPublic("compressed"===e,!0);return"hybrid"===e&&(i[i.length-1]%2?i[0]=7:i[0]=6),h(i,t)},a.prototype.getPrivateKey=function(t){return h(this.keys.getPrivate(),t)},a.prototype.setPublicKey=function(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this.keys._importPublic(t),this},a.prototype.setPrivateKey=function(t,e){e=e||"utf8",r.isBuffer(t)||(t=new r(t,e));var i=new s(t);return i=i.toString(16),this.keys=this.curve.genKeyPair(),this.keys._importPrivate(i),this}},1333:t=>{"use strict";t.exports=function(){if("function"!=typeof Symbol||"function"!=typeof Object.getOwnPropertySymbols)return!1;if("symbol"==typeof Symbol.iterator)return!0;var t={},e=Symbol("test"),i=Object(e);if("string"==typeof e)return!1;if("[object Symbol]"!==Object.prototype.toString.call(e))return!1;if("[object Symbol]"!==Object.prototype.toString.call(i))return!1;for(var r in t[e]=42,t)return!1;if("function"==typeof Object.keys&&0!==Object.keys(t).length)return!1;if("function"==typeof Object.getOwnPropertyNames&&0!==Object.getOwnPropertyNames(t).length)return!1;var n=Object.getOwnPropertySymbols(t);if(1!==n.length||n[0]!==e)return!1;if(!Object.prototype.propertyIsEnumerable.call(t,e))return!1;if("function"==typeof Object.getOwnPropertyDescriptor){var s=Object.getOwnPropertyDescriptor(t,e);if(42!==s.value||!0!==s.enumerable)return!1}return!0}},1335:(t,e,i)=>{"use strict";i.d(e,{GH:()=>N});var r=i(888),n=i(3513),s=i(4492),o=i(6563);const a={};function h(t,e){let i=2166136261;for(let r=0;r<e;r++)i^=t[r].uid,i=Math.imul(i,16777619),i>>>=0;return a[i]||function(t,e,i){const r={};let h=0;l||(l=(0,o.a)());for(let i=0;i<l;i++){const n=i<e?t[i]:s.g.EMPTY.source;r[h++]=n.source,r[h++]=n.style}const u=new n.T(r);return a[i]=u,u}(t,e,i)}let l=0;var u=i(5337),c=i(848),d=i(4670),f=i(8218),p=i(9252);function m(t,e,i,r,n){const s=e.a,o=e.b,a=e.c,h=e.d,l=e.tx,u=e.ty;i||(i=0),r||(r=2),n||(n=t.length/r-i);let c=i*r;for(let e=0;e<n;e++){const e=t[c],i=t[c+1];t[c]=s*e+a*i+l,t[c+1]=o*e+h*i+u,c+=r}}var g=i(6954);const v={extension:{type:r.Ag.ShapeBuilder,name:"circle"},build(t,e){let i,r,n,s,o,a;if("circle"===t.type){const e=t;i=e.x,r=e.y,o=a=e.radius,n=s=0}else if("ellipse"===t.type){const e=t;i=e.x,r=e.y,o=e.halfWidth,a=e.halfHeight,n=s=0}else{const e=t,h=e.width/2,l=e.height/2;i=e.x+h,r=e.y+l,o=a=Math.max(0,Math.min(e.radius,Math.min(h,l))),n=h-o,s=l-a}if(!(o>=0&&a>=0&&n>=0&&s>=0))return e;const h=Math.ceil(2.3*Math.sqrt(o+a)),l=8*h+(n?4:0)+(s?4:0);if(0===l)return e;if(0===h)return e[0]=e[6]=i+n,e[1]=e[3]=r+s,e[2]=e[4]=i-n,e[5]=e[7]=r-s,e;let u=0,c=4*h+(n?2:0)+2,d=c,f=l,p=n+o,m=s,g=i+p,v=i-p,y=r+m;if(e[u++]=g,e[u++]=y,e[--c]=y,e[--c]=v,s){const t=r-m;e[d++]=v,e[d++]=t,e[--f]=t,e[--f]=g}for(let t=1;t<h;t++){const l=Math.PI/2*(t/h),p=n+Math.cos(l)*o,m=s+Math.sin(l)*a,g=i+p,v=i-p,y=r+m,b=r-m;e[u++]=g,e[u++]=y,e[--c]=y,e[--c]=v,e[d++]=v,e[d++]=b,e[--f]=b,e[--f]=g}p=n,m=s+a,g=i+p,v=i-p,y=r+m;const b=r-m;return e[u++]=g,e[u++]=y,e[--f]=b,e[--f]=g,n&&(e[u++]=v,e[u++]=y,e[--f]=b,e[--f]=v),e},triangulate(t,e,i,r,n,s){if(0===t.length)return;let o=0,a=0;for(let e=0;e<t.length;e+=2)o+=t[e],a+=t[e+1];o/=t.length/2,a/=t.length/2;let h=r;e[h*i]=o,e[h*i+1]=a;const l=h++;for(let r=0;r<t.length;r+=2)e[h*i]=t[r],e[h*i+1]=t[r+1],r>0&&(n[s++]=h,n[s++]=l,n[s++]=h-1),h++;n[s++]=l+1,n[s++]=l,n[s++]=h-1}},y={...v,extension:{...v.extension,name:"ellipse"}},b={...v,extension:{...v.extension,name:"roundedRectangle"}};var _=i(5101);const x=1e-4;function w(t,e,i,r,n,s,o,a){let h,l;o?(h=r,l=-i):(h=-r,l=i);const u=t-i*n+h,c=e-r*n+l,d=t+i*s+h,f=e+r*s+l;return a.push(u,c),a.push(d,f),2}function M(t,e,i,r,n,s,o,a){const h=i-t,l=r-e;let u=Math.atan2(h,l),c=Math.atan2(n-t,s-e);a&&u<c?u+=2*Math.PI:!a&&u>c&&(c+=2*Math.PI);let d=u;const f=c-u,p=Math.abs(f),m=Math.sqrt(h*h+l*l),g=1+(15*p*Math.sqrt(m)/Math.PI|0),v=f/g;if(d+=v,a){o.push(t,e),o.push(i,r);for(let i=1,r=d;i<g;i++,r+=v)o.push(t,e),o.push(t+Math.sin(r)*m,e+Math.cos(r)*m);o.push(t,e),o.push(n,s)}else{o.push(i,r),o.push(t,e);for(let i=1,r=d;i<g;i++,r+=v)o.push(t+Math.sin(r)*m,e+Math.cos(r)*m),o.push(t,e);o.push(n,s),o.push(t,e)}return 2*g}var S=i(6570);function A(t,e,i,r,n,s,o){const a=S(t,e,2);if(!a)return;for(let t=0;t<a.length;t+=3)s[o++]=a[t]+n,s[o++]=a[t+1]+n,s[o++]=a[t+2]+n;let h=n*r;for(let e=0;e<t.length;e+=2)i[h]=t[e],i[h+1]=t[e+1],h+=r}const E=[],T={extension:{type:r.Ag.ShapeBuilder,name:"polygon"},build(t,e){for(let i=0;i<t.points.length;i++)e[i]=t.points[i];return e},triangulate(t,e,i,r,n,s){A(t,E,e,i,r,n,s)}},R={extension:{type:r.Ag.ShapeBuilder,name:"rectangle"},build(t,e){const i=t,r=i.x,n=i.y,s=i.width,o=i.height;return s>=0&&o>=0?(e[0]=r,e[1]=n,e[2]=r+s,e[3]=n,e[4]=r+s,e[5]=n+o,e[6]=r,e[7]=n+o,e):e},triangulate(t,e,i,r,n,s){let o=0;e[(r*=i)+o]=t[0],e[r+o+1]=t[1],o+=i,e[r+o]=t[2],e[r+o+1]=t[3],o+=i,e[r+o]=t[6],e[r+o+1]=t[7],o+=i,e[r+o]=t[4],e[r+o+1]=t[5],o+=i;const a=r/i;n[s++]=a,n[s++]=a+1,n[s++]=a+2,n[s++]=a+1,n[s++]=a+3,n[s++]=a+2}},P={extension:{type:r.Ag.ShapeBuilder,name:"triangle"},build:(t,e)=>(e[0]=t.x,e[1]=t.y,e[2]=t.x2,e[3]=t.y2,e[4]=t.x3,e[5]=t.y3,e),triangulate(t,e,i,r,n,s){let o=0;e[(r*=i)+o]=t[0],e[r+o+1]=t[1],o+=i,e[r+o]=t[2],e[r+o+1]=t[3],o+=i,e[r+o]=t[4],e[r+o+1]=t[5];const a=r/i;n[s++]=a,n[s++]=a+1,n[s++]=a+2}};var C=i(6763);const I={};r.XO.handleByMap(r.Ag.ShapeBuilder,I),r.XO.add(R,T,P,v,y,b);const k=new p.M;function B(t,e,i){const{vertices:r,uvs:n,indices:s}=i,o=s.length,a=r.length/2,h=[],l=I.rectangle,u=k,c=t.image;u.x=t.dx,u.y=t.dy,u.width=t.dw,u.height=t.dh;const d=t.transform;l.build(u,h),d&&m(h,d),l.triangulate(h,r,2,a,s,o);const p=c.uvs;n.push(p.x0,p.y0,p.x1,p.y1,p.x3,p.y3,p.x2,p.y2);const v=f.Z.get(g.G);v.indexOffset=o,v.indexSize=s.length-o,v.attributeOffset=a,v.attributeSize=r.length/2-a,v.baseColor=t.style,v.alpha=t.alpha,v.texture=c,v.geometryData=i,e.push(v)}function O(t,e,i,r,n,o){const{vertices:a,uvs:h,indices:l}=o,u=t.shapePrimitives.length-1;t.shapePrimitives.forEach(({shape:t,transform:c},d)=>{const p=l.length,v=a.length/2,y=[],b=I[t.type];let S="triangle-list";if(b.build(t,y),c&&m(y,c),r){const i=t.closePath??!0,r=e;r.pixelLine?(function(t,e,i,r){const n=x;if(0===t.length)return;const s=t[0],o=t[1],a=t[t.length-2],h=t[t.length-1],l=e||Math.abs(s-a)<n&&Math.abs(o-h)<n,u=i,c=t.length/2,d=u.length/2;for(let e=0;e<c;e++)u.push(t[2*e]),u.push(t[2*e+1]);for(let t=0;t<c-1;t++)r.push(d+t,d+t+1);l&&r.push(d+c-1,d)}(y,i,a,l),S="line-list"):function(t,e,i,r,n,s){const o=x;if(0===t.length)return;const a=e;let h=a.alignment;if(.5!==e.alignment){let e=function(t){const e=t.length;if(e<6)return 1;let i=0;for(let r=0,n=t[e-2],s=t[e-1];r<e;r+=2){const e=t[r],o=t[r+1];i+=(e-n)*(o+s),n=e,s=o}return i<0?-1:1}(t);h=(h-.5)*e+.5}const l=new _.b(t[0],t[1]),u=new _.b(t[t.length-2],t[t.length-1]),c=r,d=Math.abs(l.x-u.x)<o&&Math.abs(l.y-u.y)<o;if(c){t=t.slice(),d&&(t.pop(),t.pop(),u.set(t[t.length-2],t[t.length-1]));const e=.5*(l.x+u.x),i=.5*(u.y+l.y);t.unshift(e,i),t.push(e,i)}const f=n,p=t.length/2;let m=t.length;const g=f.length/2,v=a.width/2,y=v*v,b=a.miterLimit*a.miterLimit;let S=t[0],A=t[1],E=t[2],T=t[3],R=0,P=0,C=-(A-T),I=S-E,k=0,B=0,O=Math.sqrt(C*C+I*I);C/=O,I/=O,C*=v,I*=v;const L=2*(1-h),U=2*h;c||("round"===a.cap?m+=M(S-C*(L-U)*.5,A-I*(L-U)*.5,S-C*L,A-I*L,S+C*U,A+I*U,f,!0)+2:"square"===a.cap&&(m+=w(S,A,C,I,L,U,!0,f))),f.push(S-C*L,A-I*L),f.push(S+C*U,A+I*U);for(let e=1;e<p-1;++e){S=t[2*(e-1)],A=t[2*(e-1)+1],E=t[2*e],T=t[2*e+1],R=t[2*(e+1)],P=t[2*(e+1)+1],C=-(A-T),I=S-E,O=Math.sqrt(C*C+I*I),C/=O,I/=O,C*=v,I*=v,k=-(T-P),B=E-R,O=Math.sqrt(k*k+B*B),k/=O,B/=O,k*=v,B*=v;const i=E-S,r=A-T,n=E-R,s=P-T,o=i*n+r*s,h=r*n-s*i,l=h<0;if(Math.abs(h)<.001*Math.abs(o)){f.push(E-C*L,T-I*L),f.push(E+C*U,T+I*U),o>=0&&("round"===a.join?m+=M(E,T,E-C*L,T-I*L,E-k*L,T-B*L,f,!1)+4:m+=2,f.push(E-k*U,T-B*U),f.push(E+k*L,T+B*L));continue}const u=(-C+S)*(-I+T)-(-C+E)*(-I+A),c=(-k+R)*(-B+T)-(-k+E)*(-B+P),d=(i*c-n*u)/h,p=(s*u-r*c)/h,g=(d-E)*(d-E)+(p-T)*(p-T),_=E+(d-E)*L,x=T+(p-T)*L,w=E-(d-E)*U,D=T-(p-T)*U,N=l?L:U;g<=Math.min(i*i+r*r,n*n+s*s)+N*N*y?"bevel"===a.join||g/y>b?(l?(f.push(_,x),f.push(E+C*U,T+I*U),f.push(_,x),f.push(E+k*U,T+B*U)):(f.push(E-C*L,T-I*L),f.push(w,D),f.push(E-k*L,T-B*L),f.push(w,D)),m+=2):"round"===a.join?l?(f.push(_,x),f.push(E+C*U,T+I*U),m+=M(E,T,E+C*U,T+I*U,E+k*U,T+B*U,f,!0)+4,f.push(_,x),f.push(E+k*U,T+B*U)):(f.push(E-C*L,T-I*L),f.push(w,D),m+=M(E,T,E-C*L,T-I*L,E-k*L,T-B*L,f,!1)+4,f.push(E-k*L,T-B*L),f.push(w,D)):(f.push(_,x),f.push(w,D)):(f.push(E-C*L,T-I*L),f.push(E+C*U,T+I*U),"round"===a.join?m+=l?M(E,T,E+C*U,T+I*U,E+k*U,T+B*U,f,!0)+2:M(E,T,E-C*L,T-I*L,E-k*L,T-B*L,f,!1)+2:"miter"===a.join&&g/y<=b&&(l?(f.push(w,D),f.push(w,D)):(f.push(_,x),f.push(_,x)),m+=2),f.push(E-k*L,T-B*L),f.push(E+k*U,T+B*U),m+=2)}S=t[2*(p-2)],A=t[2*(p-2)+1],E=t[2*(p-1)],T=t[2*(p-1)+1],C=-(A-T),I=S-E,O=Math.sqrt(C*C+I*I),C/=O,I/=O,C*=v,I*=v,f.push(E-C*L,T-I*L),f.push(E+C*U,T+I*U),c||("round"===a.cap?m+=M(E-C*(L-U)*.5,T-I*(L-U)*.5,E-C*L,T-I*L,E+C*U,T+I*U,f,!1)+2:"square"===a.cap&&(m+=w(E,T,C,I,L,U,!1,f)));for(let t=g;t<m+g-2;++t)S=f[2*t],A=f[2*t+1],E=f[2*(t+1)],T=f[2*(t+1)+1],R=f[2*(t+2)],P=f[2*(t+2)+1],Math.abs(S*(T-P)+E*(P-A)+R*(A-T))<1e-8||s.push(t,t+1,t+2)}(y,r,0,i,a,l)}else if(i&&u===d){0!==u&&C.warn("[Pixi Graphics] only the last shape have be cut out");const t=[],e=y.slice(),r=function(t){if(!t)return[];const e=t.shapePrimitives,i=[];for(let t=0;t<e.length;t++){const r=e[t].shape,n=[];I[r.type].build(r,n),i.push(n)}return i}(i.shapePath);r.forEach(i=>{t.push(e.length/2),e.push(...i)}),A(e,t,a,2,v,l,p)}else b.triangulate(y,a,2,v,l,p);const E=h.length/2,T=e.texture;if(T!==s.g.WHITE){const t=e.matrix;t&&(c&&t.append(c.clone().invert()),function(t,e,i,r,n,s,o,a=null){let h=0;i*=e,n*=s;const l=a.a,u=a.b,c=a.c,d=a.d,f=a.tx,p=a.ty;for(;h<o;){const o=t[i],a=t[i+1];r[n]=l*o+c*a+f,r[n+1]=u*o+d*a+p,n+=s,i+=e,h++}}(a,2,v,h,E,2,a.length/2-v,t))}else!function(t,e,i,r){let n=0;for(e*=2;n<r;)t[e]=0,t[e+1]=0,e+=2,n++}(h,E,0,a.length/2-v);const R=f.Z.get(g.G);R.indexOffset=p,R.indexSize=l.length-p,R.attributeOffset=v,R.attributeSize=a.length/2-v,R.baseColor=e.color,R.alpha=e.alpha,R.texture=T,R.geometryData=o,R.topology=S,n.push(R)})}class L{constructor(){this.batches=[],this.geometryData={vertices:[],uvs:[],indices:[]}}}class U{constructor(){this.batcher=new u.J,this.instructions=new c.L}init(){this.instructions.reset()}get geometry(){return(0,d.t6)(d.Ek,"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead."),this.batcher.geometry}}const D=class t{constructor(t){this._gpuContextHash={},this._graphicsDataContextHash=Object.create(null),t.renderableGC.addManagedHash(this,"_gpuContextHash"),t.renderableGC.addManagedHash(this,"_graphicsDataContextHash")}init(e){t.defaultOptions.bezierSmoothness=e?.bezierSmoothness??t.defaultOptions.bezierSmoothness}getContextRenderData(t){return this._graphicsDataContextHash[t.uid]||this._initContextRenderData(t)}updateGpuContext(t){let e=this._gpuContextHash[t.uid]||this._initContext(t);if(t.dirty){e?this._cleanGraphicsContextData(t):e=this._initContext(t),function(t,e){const{geometryData:i,batches:r}=e;r.length=0,i.indices.length=0,i.vertices.length=0,i.uvs.length=0;for(let e=0;e<t.instructions.length;e++){const n=t.instructions[e];if("texture"===n.action)B(n.data,r,i);else if("fill"===n.action||"stroke"===n.action){const t="stroke"===n.action,e=n.data.path.shapePath,s=n.data.style,o=n.data.hole;t&&o&&O(o.shapePath,s,null,!0,r,i),O(e,s,o,t,r,i)}}}(t,e);const i=t.batchMode;t.customShader||"no-batch"===i?e.isBatchable=!1:"auto"===i&&(e.isBatchable=e.geometryData.vertices.length<400),t.dirty=!1}return e}getGpuContext(t){return this._gpuContextHash[t.uid]||this._initContext(t)}_initContextRenderData(t){const e=f.Z.get(U),{batches:i,geometryData:r}=this._gpuContextHash[t.uid],n=r.vertices.length,s=r.indices.length;for(let t=0;t<i.length;t++)i[t].applyTransform=!1;const o=e.batcher;o.ensureAttributeBuffer(n),o.ensureIndexBuffer(s),o.begin();for(let t=0;t<i.length;t++){const e=i[t];o.add(e)}o.finish(e.instructions);const a=o.geometry;a.indexBuffer.setDataWithSize(o.indexBuffer,o.indexSize,!0),a.buffers[0].setDataWithSize(o.attributeBuffer.float32View,o.attributeSize,!0);const l=o.batches;for(let t=0;t<l.length;t++){const e=l[t];e.bindGroup=h(e.textures.textures,e.textures.count)}return this._graphicsDataContextHash[t.uid]=e,e}_initContext(t){const e=new L;return e.context=t,this._gpuContextHash[t.uid]=e,t.on("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]}onGraphicsContextDestroy(t){this._cleanGraphicsContextData(t),t.off("destroy",this.onGraphicsContextDestroy,this),this._gpuContextHash[t.uid]=null}_cleanGraphicsContextData(t){const e=this._gpuContextHash[t.uid];e.isBatchable||this._graphicsDataContextHash[t.uid]&&(f.Z.return(this.getContextRenderData(t)),this._graphicsDataContextHash[t.uid]=null),e.batches&&e.batches.forEach(t=>{f.Z.return(t)})}destroy(){for(const t in this._gpuContextHash)this._gpuContextHash[t]&&this.onGraphicsContextDestroy(this._gpuContextHash[t].context)}};D.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"graphicsContext"},D.defaultOptions={bezierSmoothness:.5};let N=D},1345:(t,e,i)=>{var r=i(1741),n=function(t,e){r.call(this,t),this.name="NotBeforeError",this.date=e};(n.prototype=Object.create(r.prototype)).constructor=n,t.exports=n},1352:(t,e,i)=>{"use strict";var r=i(6211),n=i(4304),s=i(2802),o=i(2861).Buffer,a=i(4196),h=i(2455),l=i(3382),u=o.alloc(128),c={__proto__:null,md5:16,sha1:20,sha224:28,sha256:32,sha384:48,sha512:64,"sha512-256":32,ripemd160:20,rmd160:20},d={__proto__:null,"sha-1":"sha1","sha-224":"sha224","sha-256":"sha256","sha-384":"sha384","sha-512":"sha512","ripemd-160":"ripemd160"};function f(t){return(new n).update(t).digest()}function p(t,e,i){var n=function(t){return"rmd160"===t||"ripemd160"===t?f:"md5"===t?r:function(e){return s(t).update(e).digest()}}(t),a="sha512"===t||"sha384"===t?128:64;e.length>a?e=n(e):e.length<a&&(e=o.concat([e,u],a));for(var h=o.allocUnsafe(a+c[t]),l=o.allocUnsafe(a+c[t]),d=0;d<a;d++)h[d]=54^e[d],l[d]=92^e[d];var p=o.allocUnsafe(a+i+4);h.copy(p,0,0,a),this.ipad1=p,this.ipad2=h,this.opad=l,this.alg=t,this.blocksize=a,this.hash=n,this.size=c[t]}p.prototype.run=function(t,e){return t.copy(e,this.blocksize),this.hash(e).copy(this.opad,this.blocksize),this.hash(this.opad)},t.exports=function(t,e,i,r,n){a(i,r),t=l(t,h,"Password"),e=l(e,h,"Salt");var s=(n||"sha1").toLowerCase(),u=d[s]||s,f=c[u];if("number"!=typeof f||!f)throw new TypeError("Digest algorithm not supported: "+n);var m=new p(u,t,e.length),g=o.allocUnsafe(r),v=o.allocUnsafe(e.length+4);e.copy(v,0,0,e.length);for(var y=0,b=f,_=Math.ceil(r/b),x=1;x<=_;x++){v.writeUInt32BE(x,e.length);for(var w=m.run(v,m.ipad1),M=w,S=1;S<i;S++){M=m.run(M,m.ipad2);for(var A=0;A<b;A++)w[A]^=M[A]}w.copy(g,y),y+=b}return g}},1460:(t,e,i)=>{"use strict";i.d(e,{u:()=>r});class r{constructor(t){"number"==typeof t?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData),this.size=this.rawBinaryData.byteLength}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}get float64View(){return this._float64Array||(this._float64Array=new Float64Array(this.rawBinaryData)),this._float64Array}get bigUint64View(){return this._bigUint64Array||(this._bigUint64Array=new BigUint64Array(this.rawBinaryData)),this._bigUint64Array}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this.uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}},1514:t=>{"use strict";t.exports=Math.abs},1565:(t,e,i)=>{"use strict";e.randomBytes=e.rng=e.pseudoRandomBytes=e.prng=i(3209),e.createHash=e.Hash=i(7108),e.createHmac=e.Hmac=i(3507);var r=i(5715),n=Object.keys(r),s=["sha1","sha224","sha256","sha384","sha512","md5","rmd160"].concat(n);e.getHashes=function(){return s};var o=i(8396);e.pbkdf2=o.pbkdf2,e.pbkdf2Sync=o.pbkdf2Sync;var a=i(125);e.Cipher=a.Cipher,e.createCipher=a.createCipher,e.Cipheriv=a.Cipheriv,e.createCipheriv=a.createCipheriv,e.Decipher=a.Decipher,e.createDecipher=a.createDecipher,e.Decipheriv=a.Decipheriv,e.createDecipheriv=a.createDecipheriv,e.getCiphers=a.getCiphers,e.listCiphers=a.listCiphers;var h=i(5380);e.DiffieHellmanGroup=h.DiffieHellmanGroup,e.createDiffieHellmanGroup=h.createDiffieHellmanGroup,e.getDiffieHellman=h.getDiffieHellman,e.createDiffieHellman=h.createDiffieHellman,e.DiffieHellman=h.DiffieHellman;var l=i(20);e.createSign=l.createSign,e.Sign=l.Sign,e.createVerify=l.createVerify,e.Verify=l.Verify,e.createECDH=i(1324);var u=i(7168);e.publicEncrypt=u.publicEncrypt,e.privateEncrypt=u.privateEncrypt,e.publicDecrypt=u.publicDecrypt,e.privateDecrypt=u.privateDecrypt;var c=i(6983);e.randomFill=c.randomFill,e.randomFillSync=c.randomFillSync,e.createCredentials=function(){throw new Error("sorry, createCredentials is not implemented yet\nwe accept pull requests\nhttps://github.com/browserify/crypto-browserify")},e.constants={DH_CHECK_P_NOT_SAFE_PRIME:2,DH_CHECK_P_NOT_PRIME:1,DH_UNABLE_TO_CHECK_GENERATOR:4,DH_NOT_SUITABLE_GENERATOR:8,NPN_ENABLED:1,ALPN_ENABLED:1,RSA_PKCS1_PADDING:1,RSA_SSLV23_PADDING:2,RSA_NO_PADDING:3,RSA_PKCS1_OAEP_PADDING:4,RSA_X931_PADDING:5,RSA_PKCS1_PSS_PADDING:6,POINT_CONVERSION_COMPRESSED:2,POINT_CONVERSION_UNCOMPRESSED:4,POINT_CONVERSION_HYBRID:6}},1636:t=>{"use strict";t.exports={rE:"6.6.1"}},1638:()=>{},1652:(t,e,i)=>{"use strict";i.d(e,{TO:()=>r,Td:()=>s,bO:()=>n});const r=2*Math.PI,n=180/Math.PI,s=Math.PI/180},1691:(t,e,i)=>{var r=i(1741),n=i(1345),s=i(8980),o=i(7260),a=i(855),h=i(4977),l=i(5747),u=["RS256","RS384","RS512","ES256","ES384","ES512"],c=["RS256","RS384","RS512"],d=["HS256","HS384","HS512"];h&&(u.splice(3,0,"PS256","PS384","PS512"),c.splice(3,0,"PS256","PS384","PS512")),t.exports=function(t,e,i,h){var f;if("function"!=typeof i||h||(h=i,i={}),i||(i={}),i=Object.assign({},i),f=h||function(t,e){if(t)throw t;return e},i.clockTimestamp&&"number"!=typeof i.clockTimestamp)return f(new r("clockTimestamp must be a number"));if(void 0!==i.nonce&&("string"!=typeof i.nonce||""===i.nonce.trim()))return f(new r("nonce must be a non-empty string"));var p=i.clockTimestamp||Math.floor(Date.now()/1e3);if(!t)return f(new r("jwt must be provided"));if("string"!=typeof t)return f(new r("jwt must be a string"));var m,g=t.split(".");if(3!==g.length)return f(new r("jwt malformed"));try{m=o(t,{complete:!0})}catch(t){return f(t)}if(!m)return f(new r("invalid token"));var v,y=m.header;if("function"==typeof e){if(!h)return f(new r("verify must be called asynchronous if secret or public key is provided as a callback"));v=e}else v=function(t,i){return i(null,e)};return v(y,function(e,o){if(e)return f(new r("error in secret or public key callback: "+e.message));var h,v=""!==g[2].trim();if(!v&&o)return f(new r("jwt signature is required"));if(v&&!o)return f(new r("secret or public key must be provided"));if(v||i.algorithms||(i.algorithms=["none"]),i.algorithms||(i.algorithms=~o.toString().indexOf("BEGIN CERTIFICATE")||~o.toString().indexOf("BEGIN PUBLIC KEY")?u:~o.toString().indexOf("BEGIN RSA PUBLIC KEY")?c:d),!~i.algorithms.indexOf(m.header.alg))return f(new r("invalid algorithm"));try{h=l.verify(t,m.header.alg,o)}catch(t){return f(t)}if(!h)return f(new r("invalid signature"));var b=m.payload;if(void 0!==b.nbf&&!i.ignoreNotBefore){if("number"!=typeof b.nbf)return f(new r("invalid nbf value"));if(b.nbf>p+(i.clockTolerance||0))return f(new n("jwt not active",new Date(1e3*b.nbf)))}if(void 0!==b.exp&&!i.ignoreExpiration){if("number"!=typeof b.exp)return f(new r("invalid exp value"));if(p>=b.exp+(i.clockTolerance||0))return f(new s("jwt expired",new Date(1e3*b.exp)))}if(i.audience){var _=Array.isArray(i.audience)?i.audience:[i.audience];if(!(Array.isArray(b.aud)?b.aud:[b.aud]).some(function(t){return _.some(function(e){return e instanceof RegExp?e.test(t):e===t})}))return f(new r("jwt audience invalid. expected: "+_.join(" or ")))}if(i.issuer&&("string"==typeof i.issuer&&b.iss!==i.issuer||Array.isArray(i.issuer)&&-1===i.issuer.indexOf(b.iss)))return f(new r("jwt issuer invalid. expected: "+i.issuer));if(i.subject&&b.sub!==i.subject)return f(new r("jwt subject invalid. expected: "+i.subject));if(i.jwtid&&b.jti!==i.jwtid)return f(new r("jwt jwtid invalid. expected: "+i.jwtid));if(i.nonce&&b.nonce!==i.nonce)return f(new r("jwt nonce invalid. expected: "+i.nonce));if(i.maxAge){if("number"!=typeof b.iat)return f(new r("iat required when maxAge is specified"));var x=a(i.maxAge,b.iat);if(void 0===x)return f(new r('"maxAge" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'));if(p>=x+(i.clockTolerance||0))return f(new s("maxAge exceeded",new Date(1e3*x)))}if(!0===i.complete){var w=m.signature;return f(null,{header:y,payload:b,signature:w})}return f(null,b)})}},1741:t=>{var e=function(t,e){Error.call(this,t),Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor),this.name="JsonWebTokenError",this.message=t,e&&(this.inner=e)};(e.prototype=Object.create(Error.prototype)).constructor=e,t.exports=e},1761:(t,e,i)=>{"use strict";i.d(e,{e:()=>n});let r={createCanvas:(t,e)=>{const i=document.createElement("canvas");return i.width=t,i.height=e,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>(new DOMParser).parseFromString(t,"text/xml")};const n={get:()=>r,set(t){r=t}}},1800:(t,e,i)=>{"use strict";var r=i(6698),n=i(2861).Buffer,s=i(6168),o=n.alloc(128),a=64;function h(t,e){s.call(this,"digest"),"string"==typeof e&&(e=n.from(e)),this._alg=t,this._key=e,e.length>a?e=t(e):e.length<a&&(e=n.concat([e,o],a));for(var i=this._ipad=n.allocUnsafe(a),r=this._opad=n.allocUnsafe(a),h=0;h<a;h++)i[h]=54^e[h],r[h]=92^e[h];this._hash=[i]}r(h,s),h.prototype._update=function(t){this._hash.push(t)},h.prototype._final=function(){var t=this._alg(n.concat(this._hash));return this._alg(n.concat([this._opad,t]))},t.exports=h},1801:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=i(565);const n=function(t,e){var i=e?(0,r.A)(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}},1816:(t,e,i)=>{"use strict";t.exports=o;var r=i(6248),n=Object.create(i(5622));function s(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(!r)return this.emit("error",new Error("write callback called multiple times"));i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function o(t){if(!(this instanceof o))return new o(t);r.call(this,t),this._transformState={afterTransform:s.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",a)}function a(){var t=this;"function"==typeof this._flush?this._flush(function(e,i){h(t,e,i)}):h(this,null,null)}function h(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(t._transformState.transforming)throw new Error("Calling transform done when still transforming");return t.push(null)}n.inherits=i(6698),n.inherits(o,r),o.prototype.push=function(t,e){return this._transformState.needTransform=!1,r.prototype.push.call(this,t,e)},o.prototype._transform=function(t,e,i){throw new Error("_transform() is not implemented")},o.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},o.prototype._read=function(t){var e=this._transformState;null!==e.writechunk&&e.writecb&&!e.transforming?(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform)):e.needTransform=!0},o.prototype._destroy=function(t,e){var i=this;r.prototype._destroy.call(this,t,function(t){e(t),i.emit("close")})}},1849:(t,e,i)=>{"use strict";i.d(e,{v:()=>s});var r=i(4486),n=i(4670);class s extends r.A{constructor(){super(...arguments),this.chars=Object.create(null),this.lineHeight=0,this.fontFamily="",this.fontMetrics={fontSize:0,ascent:0,descent:0},this.baseLineOffset=0,this.distanceField={type:"none",range:0},this.pages=[],this.applyFillAsTint=!0,this.baseMeasurementFontSize=100,this.baseRenderedFontSize=100}get font(){return(0,n.t6)(n.lj,"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead."),this.fontFamily}get pageTextures(){return(0,n.t6)(n.lj,"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead."),this.pages}get size(){return(0,n.t6)(n.lj,"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead."),this.fontMetrics.fontSize}get distanceFieldRange(){return(0,n.t6)(n.lj,"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead."),this.distanceField.range}get distanceFieldType(){return(0,n.t6)(n.lj,"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead."),this.distanceField.type}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners();for(const t in this.chars)this.chars[t].texture?.destroy();this.chars=null,t&&(this.pages.forEach(t=>t.texture.destroy(!0)),this.pages=null)}}},1882:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(2383),n=i(3098);const s=function(t){return"symbol"==typeof t||(0,n.A)(t)&&"[object Symbol]"==(0,r.A)(t)}},1911:(t,e,i)=>{"use strict";var r=i(7426),n=i(7766);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3418070365,3238371032,1654270250,914150663,2438529370,812702999,355462360,4144912697,1731405415,4290775857,2394180231,1750603025,3675008525,1694076839,1203062813,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=1024,s.outSize=384,s.hmacStrength=192,s.padLength=128,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,12),"big"):r.split32(this.h.slice(0,12),"big")}},1917:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(2136),n="object"==typeof self&&self&&self.Object===Object&&self;const s=r.A||n||Function("return this")()},1957:(t,e,i)=>{"use strict";i.d(e,{K:()=>n,Q:()=>r});const r={normal:"normal-npm",add:"add-npm",screen:"screen-npm"};var n=(t=>(t[t.DISABLED=0]="DISABLED",t[t.RENDERING_MASK_ADD=1]="RENDERING_MASK_ADD",t[t.MASK_ACTIVE=2]="MASK_ACTIVE",t[t.INVERSE_MASK_ACTIVE=3]="INVERSE_MASK_ACTIVE",t[t.RENDERING_MASK_REMOVE=4]="RENDERING_MASK_REMOVE",t[t.NONE=5]="NONE",t))(n||{})},1979:(t,e,i)=>{"use strict";i.d(e,{l:()=>s});var r=i(268),n=i(2406);const s=new class{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const e=this._cache.get(t);return e||(0,r.R)(`[Assets] Asset id ${t} was not found in the Cache`),e}set(t,e){const i=(0,n.z)(t);let s;for(let t=0;t<this.parsers.length;t++){const r=this.parsers[t];if(r.test(e)){s=r.getCacheableAssets(i,e);break}}const o=new Map(Object.entries(s||{}));s||i.forEach(t=>{o.set(t,e)});const a=[...o.keys()],h={cacheKeys:a,keys:i};i.forEach(t=>{this._cacheMap.set(t,h)}),a.forEach(t=>{const i=s?s[t]:e;this._cache.has(t)&&this._cache.get(t)!==i&&(0,r.R)("[Cache] already has key:",t),this._cache.set(t,o.get(t))})}remove(t){if(!this._cacheMap.has(t))return void(0,r.R)(`[Assets] Asset id ${t} was not found in the Cache`);const e=this._cacheMap.get(t);e.cacheKeys.forEach(t=>{this._cache.delete(t)}),e.keys.forEach(t=>{this._cacheMap.delete(t)})}get parsers(){return this._parsers}}},2010:(t,e,i)=>{var r=i(6698),n=i(7568),s=n.base,o=n.bignum,a=n.constants.der;function h(t){this.enc="der",this.name=t.name,this.entity=t,this.tree=new l,this.tree._init(t.body)}function l(t){s.Node.call(this,"der",t)}function u(t,e){var i=t.readUInt8(e);if(t.isError(i))return i;var r=a.tagClass[i>>6],n=!(32&i);if(31&~i)i&=31;else{var s=i;for(i=0;!(128&~s);){if(s=t.readUInt8(e),t.isError(s))return s;i<<=7,i|=127&s}}return{cls:r,primitive:n,tag:i,tagStr:a.tag[i]}}function c(t,e,i){var r=t.readUInt8(i);if(t.isError(r))return r;if(!e&&128===r)return null;if(!(128&r))return r;var n=127&r;if(n>4)return t.error("length octect is too long");r=0;for(var s=0;s<n;s++){r<<=8;var o=t.readUInt8(i);if(t.isError(o))return o;r|=o}return r}t.exports=h,h.prototype.decode=function(t,e){return t instanceof s.DecoderBuffer||(t=new s.DecoderBuffer(t,e)),this.tree._decode(t,e)},r(l,s.Node),l.prototype._peekTag=function(t,e,i){if(t.isEmpty())return!1;var r=t.save(),n=u(t,'Failed to peek tag: "'+e+'"');return t.isError(n)?n:(t.restore(r),n.tag===e||n.tagStr===e||n.tagStr+"of"===e||i)},l.prototype._decodeTag=function(t,e,i){var r=u(t,'Failed to decode tag of "'+e+'"');if(t.isError(r))return r;var n=c(t,r.primitive,'Failed to get length of "'+e+'"');if(t.isError(n))return n;if(!i&&r.tag!==e&&r.tagStr!==e&&r.tagStr+"of"!==e)return t.error('Failed to match tag: "'+e+'"');if(r.primitive||null!==n)return t.skip(n,'Failed to match body of: "'+e+'"');var s=t.save(),o=this._skipUntilEnd(t,'Failed to skip indefinite length body: "'+this.tag+'"');return t.isError(o)?o:(n=t.offset-s.offset,t.restore(s),t.skip(n,'Failed to match body of: "'+e+'"'))},l.prototype._skipUntilEnd=function(t,e){for(;;){var i=u(t,e);if(t.isError(i))return i;var r,n=c(t,i.primitive,e);if(t.isError(n))return n;if(r=i.primitive||null!==n?t.skip(n):this._skipUntilEnd(t,e),t.isError(r))return r;if("end"===i.tagStr)break}},l.prototype._decodeList=function(t,e,i,r){for(var n=[];!t.isEmpty();){var s=this._peekTag(t,"end");if(t.isError(s))return s;var o=i.decode(t,"der",r);if(t.isError(o)&&s)break;n.push(o)}return n},l.prototype._decodeStr=function(t,e){if("bitstr"===e){var i=t.readUInt8();return t.isError(i)?i:{unused:i,data:t.raw()}}if("bmpstr"===e){var r=t.raw();if(r.length%2==1)return t.error("Decoding of string type: bmpstr length mismatch");for(var n="",s=0;s<r.length/2;s++)n+=String.fromCharCode(r.readUInt16BE(2*s));return n}if("numstr"===e){var o=t.raw().toString("ascii");return this._isNumstr(o)?o:t.error("Decoding of string type: numstr unsupported characters")}if("octstr"===e)return t.raw();if("objDesc"===e)return t.raw();if("printstr"===e){var a=t.raw().toString("ascii");return this._isPrintstr(a)?a:t.error("Decoding of string type: printstr unsupported characters")}return/str$/.test(e)?t.raw().toString():t.error("Decoding of string type: "+e+" unsupported")},l.prototype._decodeObjid=function(t,e,i){for(var r,n=[],s=0;!t.isEmpty();){var o=t.readUInt8();s<<=7,s|=127&o,128&o||(n.push(s),s=0)}128&o&&n.push(s);var a=n[0]/40|0,h=n[0]%40;if(r=i?n:[a,h].concat(n.slice(1)),e){var l=e[r.join(" ")];void 0===l&&(l=e[r.join(".")]),void 0!==l&&(r=l)}return r},l.prototype._decodeTime=function(t,e){var i=t.raw().toString();if("gentime"===e)var r=0|i.slice(0,4),n=0|i.slice(4,6),s=0|i.slice(6,8),o=0|i.slice(8,10),a=0|i.slice(10,12),h=0|i.slice(12,14);else{if("utctime"!==e)return t.error("Decoding "+e+" time is not supported yet");r=0|i.slice(0,2),n=0|i.slice(2,4),s=0|i.slice(4,6),o=0|i.slice(6,8),a=0|i.slice(8,10),h=0|i.slice(10,12),r=r<70?2e3+r:1900+r}return Date.UTC(r,n-1,s,o,a,h,0)},l.prototype._decodeNull=function(t){return null},l.prototype._decodeBool=function(t){var e=t.readUInt8();return t.isError(e)?e:0!==e},l.prototype._decodeInt=function(t,e){var i=t.raw(),r=new o(i);return e&&(r=e[r.toString(10)]||r),r},l.prototype._use=function(t,e){return"function"==typeof t&&(t=t(e)),t._getDecoder("der").tree}},2031:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(2851),n=i(2528);const s=function(t,e,i,s){var o=!i;i||(i={});for(var a=-1,h=e.length;++a<h;){var l=e[a],u=s?s(i[l],t[l],l,i,t):void 0;void 0===u&&(u=t[l]),o?(0,n.A)(i,l,u):(0,r.A)(i,l,u)}return i}},2048:(t,e,i)=>{"use strict";function r(t,e,i){const{width:r,height:n}=i.orig,s=i.trim;if(s){const i=s.width,o=s.height;t.minX=s.x-e._x*r,t.maxX=t.minX+i,t.minY=s.y-e._y*n,t.maxY=t.minY+o}else t.minX=-e._x*r,t.maxX=t.minX+r,t.minY=-e._y*n,t.maxY=t.minY+n}i.d(e,{y:()=>r})},2049:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=Array.isArray},2050:(t,e,i)=>{"use strict";i.d(e,{A:()=>d});const r=(0,i(8562).A)(Object,"create");var n=Object.prototype.hasOwnProperty;var s=Object.prototype.hasOwnProperty;function o(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}o.prototype.clear=function(){this.__data__=r?r(null):{},this.size=0},o.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},o.prototype.get=function(t){var e=this.__data__;if(r){var i=e[t];return"__lodash_hash_undefined__"===i?void 0:i}return n.call(e,t)?e[t]:void 0},o.prototype.has=function(t){var e=this.__data__;return r?void 0!==e[t]:s.call(e,t)},o.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=r&&void 0===e?"__lodash_hash_undefined__":e,this};const a=o;var h=i(9469),l=i(8335);const u=function(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map};function c(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}c.prototype.clear=function(){this.size=0,this.__data__={hash:new a,map:new(l.A||h.A),string:new a}},c.prototype.delete=function(t){var e=u(this,t).delete(t);return this.size-=e?1:0,e},c.prototype.get=function(t){return u(this,t).get(t)},c.prototype.has=function(t){return u(this,t).has(t)},c.prototype.set=function(t,e){var i=u(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this};const d=c},2061:t=>{t.exports=function(t,e){for(var i=t.length,r=-1;++r<i;)t[r]^=e[r];return t}},2067:(t,e,i)=>{"use strict";i.d(e,{Ls:()=>r,mA:()=>n});const r={name:"local-uniform-bit",vertex:{header:"\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        ",main:"\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        ",end:"\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        "}},n=(r.vertex,r.vertex.header.replace("group(1)","group(2)"),{name:"local-uniform-bit",vertex:{header:"\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        ",main:"\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        ",end:"\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        "}})},2080:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var r=i(9469);var n=i(8335),s=i(2050);function o(t){var e=this.__data__=new r.A(t);this.size=e.size}o.prototype.clear=function(){this.__data__=new r.A,this.size=0},o.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},o.prototype.get=function(t){return this.__data__.get(t)},o.prototype.has=function(t){return this.__data__.has(t)},o.prototype.set=function(t,e){var i=this.__data__;if(i instanceof r.A){var o=i.__data__;if(!n.A||o.length<199)return o.push([t,e]),this.size=++i.size,this;i=this.__data__=new s.A(o)}return i.set(t,e),this.size=i.size,this};const a=o},2136:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r="object"==typeof global&&global&&global.Object===Object&&global},2153:(t,e,i)=>{var r=e;r._reverse=function(t){var e={};return Object.keys(t).forEach(function(i){(0|i)==i&&(i|=0);var r=t[i];e[r]=i}),e},r.der=i(4598)},2205:(t,e,i)=>{"use strict";var r=i(6743),n=i(1002),s=i(3144);t.exports=function(){return s(r,n,arguments)}},2208:(t,e,i)=>{"use strict";i.d(e,{o:()=>a,u:()=>o});var r=i(9313),n=i(8425),s=i(9636);const o=new n.b(r.u),a=new n.b(s.c)},2211:(t,e,i)=>{"use strict";var r=i(3349),n=i(6698),s=i(7626),o=i(2808);function a(){this.tmp=new Array(2),this.keys=null}function h(t){o.call(this,t);var e=new a;this._desState=e,this.deriveKeys(e,t.key)}n(h,o),t.exports=h,h.create=function(t){return new h(t)};var l=[1,1,2,2,2,2,2,2,1,2,2,2,2,2,2,1];h.prototype.deriveKeys=function(t,e){t.keys=new Array(32),r.equal(e.length,this.blockSize,"Invalid key length");var i=s.readUInt32BE(e,0),n=s.readUInt32BE(e,4);s.pc1(i,n,t.tmp,0),i=t.tmp[0],n=t.tmp[1];for(var o=0;o<t.keys.length;o+=2){var a=l[o>>>1];i=s.r28shl(i,a),n=s.r28shl(n,a),s.pc2(i,n,t.keys,o)}},h.prototype._update=function(t,e,i,r){var n=this._desState,o=s.readUInt32BE(t,e),a=s.readUInt32BE(t,e+4);s.ip(o,a,n.tmp,0),o=n.tmp[0],a=n.tmp[1],"encrypt"===this.type?this._encrypt(n,o,a,n.tmp,0):this._decrypt(n,o,a,n.tmp,0),o=n.tmp[0],a=n.tmp[1],s.writeUInt32BE(i,o,r),s.writeUInt32BE(i,a,r+4)},h.prototype._pad=function(t,e){if(!1===this.padding)return!1;for(var i=t.length-e,r=e;r<t.length;r++)t[r]=i;return!0},h.prototype._unpad=function(t){if(!1===this.padding)return t;for(var e=t[t.length-1],i=t.length-e;i<t.length;i++)r.equal(t[i],e);return t.slice(0,t.length-e)},h.prototype._encrypt=function(t,e,i,r,n){for(var o=e,a=i,h=0;h<t.keys.length;h+=2){var l=t.keys[h],u=t.keys[h+1];s.expand(a,t.tmp,0),l^=t.tmp[0],u^=t.tmp[1];var c=s.substitute(l,u),d=a;a=(o^s.permute(c))>>>0,o=d}s.rip(a,o,r,n)},h.prototype._decrypt=function(t,e,i,r,n){for(var o=i,a=e,h=t.keys.length-2;h>=0;h-=2){var l=t.keys[h],u=t.keys[h+1];s.expand(o,t.tmp,0),l^=t.tmp[0],u^=t.tmp[1];var c=s.substitute(l,u),d=o;o=(a^s.permute(c))>>>0,a=d}s.rip(o,a,r,n)}},2217:(t,e,i)=>{"use strict";i.d(e,{a:()=>r});const r=t=>!Array.isArray(t)},2233:(t,e,i)=>{"use strict";i.d(e,{Y:()=>r});const r=(t,e)=>{const i=e.split("?")[1];return i&&(t+=`?${i}`),t}},2240:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},2244:(t,e,i)=>{var r=i(9404),n=i(5037);function s(t){this.rand=t||new n.Rand}t.exports=s,s.create=function(t){return new s(t)},s.prototype._randbelow=function(t){var e=t.bitLength(),i=Math.ceil(e/8);do{var n=new r(this.rand.generate(i))}while(n.cmp(t)>=0);return n},s.prototype._randrange=function(t,e){var i=e.sub(t);return t.add(this._randbelow(i))},s.prototype.test=function(t,e,i){var n=t.bitLength(),s=r.mont(t),o=new r(1).toRed(s);e||(e=Math.max(1,n/48|0));for(var a=t.subn(1),h=0;!a.testn(h);h++);for(var l=t.shrn(h),u=a.toRed(s);e>0;e--){var c=this._randrange(new r(2),a);i&&i(c);var d=c.toRed(s).redPow(l);if(0!==d.cmp(o)&&0!==d.cmp(u)){for(var f=1;f<h;f++){if(0===(d=d.redSqr()).cmp(o))return!1;if(0===d.cmp(u))break}if(f===h)return!1}}return!0},s.prototype.getDivisor=function(t,e){var i=t.bitLength(),n=r.mont(t),s=new r(1).toRed(n);e||(e=Math.max(1,i/48|0));for(var o=t.subn(1),a=0;!o.testn(a);a++);for(var h=t.shrn(a),l=o.toRed(n);e>0;e--){var u=this._randrange(new r(2),o),c=t.gcd(u);if(0!==c.cmpn(1))return c;var d=u.toRed(n).redPow(h);if(0!==d.cmp(s)&&0!==d.cmp(l)){for(var f=1;f<a;f++){if(0===(d=d.redSqr()).cmp(s))return d.fromRed().subn(1).gcd(t);if(0===d.cmp(l))break}if(f===a)return(d=d.redSqr()).fromRed().subn(1).gcd(t)}}return!1}},2287:(t,e,i)=>{"use strict";var r=i(7426),n=i(6166),s=i(6225),o=i(3349),a=r.sum32,h=r.sum32_4,l=r.sum32_5,u=s.ch32,c=s.maj32,d=s.s0_256,f=s.s1_256,p=s.g0_256,m=s.g1_256,g=n.BlockHash,v=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298];function y(){if(!(this instanceof y))return new y;g.call(this),this.h=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225],this.k=v,this.W=new Array(64)}r.inherits(y,g),t.exports=y,y.blockSize=512,y.outSize=256,y.hmacStrength=192,y.padLength=64,y.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=h(m(i[r-2]),i[r-7],p(i[r-15]),i[r-16]);var n=this.h[0],s=this.h[1],g=this.h[2],v=this.h[3],y=this.h[4],b=this.h[5],_=this.h[6],x=this.h[7];for(o(this.k.length===i.length),r=0;r<i.length;r++){var w=l(x,f(y),u(y,b,_),this.k[r],i[r]),M=a(d(n),c(n,s,g));x=_,_=b,b=y,y=a(v,w),v=g,g=s,s=n,n=a(w,M)}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],g),this.h[3]=a(this.h[3],v),this.h[4]=a(this.h[4],y),this.h[5]=a(this.h[5],b),this.h[6]=a(this.h[6],_),this.h[7]=a(this.h[7],x)},y.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},2299:(t,e,i)=>{"use strict";function r(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var i=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=i){var r,n,s,o,a=[],h=!0,l=!1;try{if(s=(i=i.call(t)).next,0===e){if(Object(i)!==i)return;h=!1}else for(;!(h=(r=s.call(i)).done)&&(a.push(r.value),a.length!==e);h=!0);}catch(t){l=!0,n=t}finally{try{if(!h&&null!=i.return&&(o=i.return(),Object(o)!==o))return}finally{if(l)throw n}}return a}}(t,e)||function(t,e){if(t){if("string"==typeof t)return n(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?n(t,e):void 0}}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function n(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,r=new Array(e);i<e;i++)r[i]=t[i];return r}function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}var o=void 0!==/a/g.flags,a=function(t){var e=[];return t.forEach(function(t){return e.push(t)}),e},h=function(t){var e=[];return t.forEach(function(t,i){return e.push([i,t])}),e},l=Object.is?Object.is:i(7653),u=Object.getOwnPropertySymbols?Object.getOwnPropertySymbols:function(){return[]},c=Number.isNaN?Number.isNaN:i(4133);function d(t){return t.call.bind(t)}var f=d(Object.prototype.hasOwnProperty),p=d(Object.prototype.propertyIsEnumerable),m=d(Object.prototype.toString),g=i(537).types,v=g.isAnyArrayBuffer,y=g.isArrayBufferView,b=g.isDate,_=g.isMap,x=g.isRegExp,w=g.isSet,M=g.isNativeError,S=g.isBoxedPrimitive,A=g.isNumberObject,E=g.isStringObject,T=g.isBooleanObject,R=g.isBigIntObject,P=g.isSymbolObject,C=g.isFloat32Array,I=g.isFloat64Array;function k(t){if(0===t.length||t.length>10)return!0;for(var e=0;e<t.length;e++){var i=t.charCodeAt(e);if(i<48||i>57)return!0}return 10===t.length&&t>=Math.pow(2,32)}function B(t){return Object.keys(t).filter(k).concat(u(t).filter(Object.prototype.propertyIsEnumerable.bind(t)))}function O(t,e){if(t===e)return 0;for(var i=t.length,r=e.length,n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0}function L(t,e,i,r){if(t===e)return 0!==t||!i||l(t,e);if(i){if("object"!==s(t))return"number"==typeof t&&c(t)&&c(e);if("object"!==s(e)||null===t||null===e)return!1;if(Object.getPrototypeOf(t)!==Object.getPrototypeOf(e))return!1}else{if(null===t||"object"!==s(t))return(null===e||"object"!==s(e))&&t==e;if(null===e||"object"!==s(e))return!1}var n,a,h,u,d=m(t);if(d!==m(e))return!1;if(Array.isArray(t)){if(t.length!==e.length)return!1;var f=B(t),p=B(e);return f.length===p.length&&D(t,e,i,r,1,f)}if("[object Object]"===d&&(!_(t)&&_(e)||!w(t)&&w(e)))return!1;if(b(t)){if(!b(e)||Date.prototype.getTime.call(t)!==Date.prototype.getTime.call(e))return!1}else if(x(t)){if(!x(e)||(h=t,u=e,!(o?h.source===u.source&&h.flags===u.flags:RegExp.prototype.toString.call(h)===RegExp.prototype.toString.call(u))))return!1}else if(M(t)||t instanceof Error){if(t.message!==e.message||t.name!==e.name)return!1}else{if(y(t)){if(i||!C(t)&&!I(t)){if(!function(t,e){return t.byteLength===e.byteLength&&0===O(new Uint8Array(t.buffer,t.byteOffset,t.byteLength),new Uint8Array(e.buffer,e.byteOffset,e.byteLength))}(t,e))return!1}else if(!function(t,e){if(t.byteLength!==e.byteLength)return!1;for(var i=0;i<t.byteLength;i++)if(t[i]!==e[i])return!1;return!0}(t,e))return!1;var g=B(t),k=B(e);return g.length===k.length&&D(t,e,i,r,0,g)}if(w(t))return!(!w(e)||t.size!==e.size)&&D(t,e,i,r,2);if(_(t))return!(!_(e)||t.size!==e.size)&&D(t,e,i,r,3);if(v(t)){if(a=e,(n=t).byteLength!==a.byteLength||0!==O(new Uint8Array(n),new Uint8Array(a)))return!1}else if(S(t)&&!function(t,e){return A(t)?A(e)&&l(Number.prototype.valueOf.call(t),Number.prototype.valueOf.call(e)):E(t)?E(e)&&String.prototype.valueOf.call(t)===String.prototype.valueOf.call(e):T(t)?T(e)&&Boolean.prototype.valueOf.call(t)===Boolean.prototype.valueOf.call(e):R(t)?R(e)&&BigInt.prototype.valueOf.call(t)===BigInt.prototype.valueOf.call(e):P(e)&&Symbol.prototype.valueOf.call(t)===Symbol.prototype.valueOf.call(e)}(t,e))return!1}return D(t,e,i,r,0)}function U(t,e){return e.filter(function(e){return p(t,e)})}function D(t,e,i,n,o,l){if(5===arguments.length){l=Object.keys(t);var c=Object.keys(e);if(l.length!==c.length)return!1}for(var d=0;d<l.length;d++)if(!f(e,l[d]))return!1;if(i&&5===arguments.length){var m=u(t);if(0!==m.length){var g=0;for(d=0;d<m.length;d++){var v=m[d];if(p(t,v)){if(!p(e,v))return!1;l.push(v),g++}else if(p(e,v))return!1}var y=u(e);if(m.length!==y.length&&U(e,y).length!==g)return!1}else{var b=u(e);if(0!==b.length&&0!==U(e,b).length)return!1}}if(0===l.length&&(0===o||1===o&&0===t.length||0===t.size))return!0;if(void 0===n)n={val1:new Map,val2:new Map,position:0};else{var _=n.val1.get(t);if(void 0!==_){var x=n.val2.get(e);if(void 0!==x)return _===x}n.position++}n.val1.set(t,n.position),n.val2.set(e,n.position);var w=function(t,e,i,n,o,l){var u=0;if(2===l){if(!function(t,e,i,r){for(var n=null,o=a(t),h=0;h<o.length;h++){var l=o[h];if("object"===s(l)&&null!==l)null===n&&(n=new Set),n.add(l);else if(!e.has(l)){if(i)return!1;if(!z(t,e,l))return!1;null===n&&(n=new Set),n.add(l)}}if(null!==n){for(var u=a(e),c=0;c<u.length;c++){var d=u[c];if("object"===s(d)&&null!==d){if(!N(n,d,i,r))return!1}else if(!i&&!t.has(d)&&!N(n,d,i,r))return!1}return 0===n.size}return!0}(t,e,i,o))return!1}else if(3===l){if(!function(t,e,i,n){for(var o=null,a=h(t),l=0;l<a.length;l++){var u=r(a[l],2),c=u[0],d=u[1];if("object"===s(c)&&null!==c)null===o&&(o=new Set),o.add(c);else{var f=e.get(c);if(void 0===f&&!e.has(c)||!L(d,f,i,n)){if(i)return!1;if(!G(t,e,c,d,n))return!1;null===o&&(o=new Set),o.add(c)}}}if(null!==o){for(var p=h(e),m=0;m<p.length;m++){var g=r(p[m],2),v=g[0],y=g[1];if("object"===s(v)&&null!==v){if(!j(o,t,v,y,i,n))return!1}else if(!(i||t.has(v)&&L(t.get(v),y,!1,n)||j(o,t,v,y,!1,n)))return!1}return 0===o.size}return!0}(t,e,i,o))return!1}else if(1===l)for(;u<t.length;u++){if(!f(t,u)){if(f(e,u))return!1;for(var c=Object.keys(t);u<c.length;u++){var d=c[u];if(!f(e,d)||!L(t[d],e[d],i,o))return!1}return c.length===Object.keys(e).length}if(!f(e,u)||!L(t[u],e[u],i,o))return!1}for(u=0;u<n.length;u++){var p=n[u];if(!L(t[p],e[p],i,o))return!1}return!0}(t,e,i,l,n,o);return n.val1.delete(t),n.val2.delete(e),w}function N(t,e,i,r){for(var n=a(t),s=0;s<n.length;s++){var o=n[s];if(L(e,o,i,r))return t.delete(o),!0}return!1}function F(t){switch(s(t)){case"undefined":return null;case"object":return;case"symbol":return!1;case"string":t=+t;case"number":if(c(t))return!1}return!0}function z(t,e,i){var r=F(i);return null!=r?r:e.has(r)&&!t.has(r)}function G(t,e,i,r,n){var s=F(i);if(null!=s)return s;var o=e.get(s);return!(void 0===o&&!e.has(s)||!L(r,o,!1,n))&&!t.has(s)&&L(r,o,!1,n)}function j(t,e,i,r,n,s){for(var o=a(t),h=0;h<o.length;h++){var l=o[h];if(L(i,l,n,s)&&L(r,e.get(l),n,s))return t.delete(l),!0}return!1}t.exports={isDeepEqual:function(t,e){return L(t,e,!1)},isDeepStrictEqual:function(t,e){return L(t,e,!0)}}},2356:(t,e,i)=>{var r=i(462),n=i(2861).Buffer,s=i(6168),o=i(6698),a=i(5892),h=i(295),l=i(5122);function u(t,e,i,o){s.call(this);var h=n.alloc(4,0);this._cipher=new r.AES(e);var u=this._cipher.encryptBlock(h);this._ghash=new a(u),i=function(t,e,i){if(12===e.length)return t._finID=n.concat([e,n.from([0,0,0,1])]),n.concat([e,n.from([0,0,0,2])]);var r=new a(i),s=e.length,o=s%16;r.update(e),o&&(o=16-o,r.update(n.alloc(o,0))),r.update(n.alloc(8,0));var h=8*s,u=n.alloc(8);u.writeUIntBE(h,0,8),r.update(u),t._finID=r.state;var c=n.from(t._finID);return l(c),c}(this,i,u),this._prev=n.from(i),this._cache=n.allocUnsafe(0),this._secCache=n.allocUnsafe(0),this._decrypt=o,this._alen=0,this._len=0,this._mode=t,this._authTag=null,this._called=!1}o(u,s),u.prototype._update=function(t){if(!this._called&&this._alen){var e=16-this._alen%16;e<16&&(e=n.alloc(e,0),this._ghash.update(e))}this._called=!0;var i=this._mode.encrypt(this,t);return this._decrypt?this._ghash.update(t):this._ghash.update(i),this._len+=t.length,i},u.prototype._final=function(){if(this._decrypt&&!this._authTag)throw new Error("Unsupported state or unable to authenticate data");var t=h(this._ghash.final(8*this._alen,8*this._len),this._cipher.encryptBlock(this._finID));if(this._decrypt&&function(t,e){var i=0;t.length!==e.length&&i++;for(var r=Math.min(t.length,e.length),n=0;n<r;++n)i+=t[n]^e[n];return i}(t,this._authTag))throw new Error("Unsupported state or unable to authenticate data");this._authTag=t,this._cipher.scrub()},u.prototype.getAuthTag=function(){if(this._decrypt||!n.isBuffer(this._authTag))throw new Error("Attempting to get auth tag in unsupported state");return this._authTag},u.prototype.setAuthTag=function(t){if(!this._decrypt)throw new Error("Attempting to set auth tag in unsupported state");this._authTag=t},u.prototype.setAAD=function(t){if(this._called)throw new Error("Attempting to set AAD in unsupported state");this._ghash.update(t),this._alen+=t.length},t.exports=u},2383:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var r=i(241),n=Object.prototype,s=n.hasOwnProperty,o=n.toString,a=r.A?r.A.toStringTag:void 0;var h=Object.prototype.toString;var l=r.A?r.A.toStringTag:void 0;const u=function(t){return null==t?void 0===t?"[object Undefined]":"[object Null]":l&&l in Object(t)?function(t){var e=s.call(t,a),i=t[a];try{t[a]=void 0;var r=!0}catch(t){}var n=o.call(t);return r&&(e?t[a]=i:delete t[a]),n}(t):function(t){return h.call(t)}(t)}},2406:(t,e,i)=>{"use strict";i.d(e,{z:()=>r});const r=(t,e,i=!1)=>(Array.isArray(t)||(t=[t]),e?t.map(t=>"string"==typeof t||i?e(t):t):t)},2411:(t,e,i)=>{"use strict";i.d(e,{m:()=>l});var r=i(4922),n=i(9437),s=i(5062),o=i(5644),a=i(5979),h=i(6763);class l{scene;renderer;camera;bgTexture;bgMaterial;bgGeometry;bgMesh;timerMaterial;timerGeometry;fgTexture;fgMaterial;fgGeometry;fgMesh;logoTexture;logoMaterial;logoGeometry;logoMesh;trueSize;particles;clock;counter;deltaCount;canvasFPSTexture;textFPSMaterial;textGeometry;textFPSMesh;angle;settings;constructor(){this.counter=0,this.deltaCount=0,this.angle=0,this.clock=new r.zD7,this.trueSize=!0,this.scene=new r.Z58,this.scene.background=new r.Q1f(0),this.bgGeometry=new r.bdM(1920,1080),this.bgTexture=(new r.Tap).load("./bg.jpg"),this.bgMaterial=new r.V9B({map:this.bgTexture,transparent:!1}),this.bgMesh=new r.eaF(this.bgGeometry,this.bgMaterial),this.bgMesh.position.set(0,0,-1e3),this.bgMesh.name="Background Mesh",this.scene.add(this.bgMesh),this.fgGeometry=new r.bdM(1920,1080),this.fgTexture=(new r.Tap).load("./fg.png"),this.fgMaterial=new r.V9B({map:this.fgTexture,transparent:!0}),this.fgMesh=new r.eaF(this.fgGeometry,this.fgMaterial),this.fgMesh.position.set(0,0,-1),this.fgMesh.name="Foreground Mesh",this.renderer=new n.JeP({antialias:!0,alpha:!0}),this.renderer.autoClear=!1,this.renderer.outputColorSpace=r.Zr2;const t=window.innerHeight,e=window.innerWidth/2;this.camera=new r.qUd(-e/2,e/2,t/2,-t/2,1,1e4),this.renderer.setSize(e,t),this.logoGeometry=new r.bdM(128,64),this.logoTexture=(new r.Tap).load("./threeLogo.png"),this.logoMaterial=new r.V9B({map:this.logoTexture,transparent:!0}),this.logoMesh=new r.eaF(this.logoGeometry,this.logoMaterial),this.logoMesh.position.set(this.camera.right-64,this.camera.top-32,-100),this.logoMesh.name="Logo Mesh",this.scene.add(this.logoMesh),this.timerGeometry=new r.bdM(4e3,20),this.timerMaterial=new r.V9B({color:new r.Q1f(10066329)}),this.canvasFPSTexture=new a.G(256,32),this.canvasFPSTexture.drawText("","center",21,"#ffffff"),this.textGeometry=new r.bdM(384,48),this.textFPSMaterial=new r.V9B({map:this.canvasFPSTexture.texture,transparent:!1}),this.textFPSMesh=new r.eaF(this.textGeometry,this.textFPSMaterial),this.textFPSMesh.position.set(this.camera.left+180,this.camera.top-32,-1e3),this.textFPSMesh.name="FPS Mesh",this.scene.add(this.textFPSMesh),this.particles=new s.o(this.scene,{forcedType:o.M2.Three})}init(){h.log("init three previewer")}event(t){"w"==t.key&&(this.trueSize?this.trueSize=!1:this.trueSize=!0,this.windowResize()),"p"==t.key&&this.particles.pause(),"r"==t.key&&this.particles.reset(),"q"==t.key&&this.particles.play(),"s"==t.key&&this.particles.stop()}detach(t){t.removeChild(this.renderer.domElement)}add(t){t.appendChild(this.renderer.domElement)}setBackground(t){const e=new r.gPd(t);e.minFilter=r.hxR,e.needsUpdate=!0,this.bgMaterial.map=e,this.bgMaterial.needsUpdate=!0}setForeground(t){const e=new r.gPd(t);e.minFilter=r.hxR,e.needsUpdate=!0,this.fgMaterial.map=e,this.fgMaterial.needsUpdate=!0}setParticlePosition(t,e){this.particles.setPosition(t,e,0)}updateParticlesPosition(t,e){const i=window.innerHeight,r=window.innerWidth/2;if(this.trueSize)this.particles.setSpawnPosition(t-r/2,i/2-e,0);else{const n=1/r*1920;this.particles.setSpawnPosition((t-r/2)*n,(i/2-e)*n,0)}}setParticles(t){this.settings=t,this.particles.setParameters(this.settings),this.particles.setPosition(0,0,-500),this.particles.stop(),this.particles.reset(),this.particles.play()}setTexture(t){this.particles.setTexture(t)}stop(){this.particles.stop()}reset(){this.particles.reset()}play(){this.particles.play()}playOnce(){this.particles.playOnce()}setCount(t){this.particles.setCount(t),this.particles.reset()}windowResize(){const t=window.innerHeight,e=window.innerWidth/2;if(this.renderer.setSize(e,t),this.trueSize)this.camera.left=-e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-t/2,this.logoMesh.position.x=this.camera.right-64,this.logoMesh.position.y=this.camera.top-32,this.logoMesh.scale.x=1,this.logoMesh.scale.y=1,this.textFPSMesh.position.set(this.camera.left+180,this.camera.top-32,-1e3),this.textFPSMesh.scale.x=1,this.textFPSMesh.scale.y=1;else{this.camera.left=-960,this.camera.right=960,this.camera.top=t/e*960,this.camera.bottom=-t/e*960;const i=1/e*1920;this.logoMesh.scale.x=i,this.logoMesh.scale.y=i,this.logoMesh.position.x=this.camera.right-64*i,this.logoMesh.position.y=this.camera.top-32*i,this.textFPSMesh.scale.x=i,this.textFPSMesh.scale.y=i,this.textFPSMesh.position.set(this.camera.left+180*i,this.camera.top-32*i,-1e3)}this.camera.updateProjectionMatrix()}animate(){const t=this.clock.getDelta();if(this.particles&&(this.particles.update(t),this.deltaCount+=t,this.counter++,this.deltaCount>.2)){const t=this.deltaCount/this.counter;this.canvasFPSTexture.drawBackground("#000000"),this.canvasFPSTexture.drawText(Math.round(1/t)+" fps","left",21,"#ffffff"),this.deltaCount=0,this.counter=0}this.renderer.clear(),this.renderer.render(this.scene,this.camera)}}},2434:(t,e,i)=>{"use strict";i.d(e,{A:()=>M});var r=i(8562),n=i(1917);const s=(0,r.A)(n.A,"DataView");var o=i(8335);const a=(0,r.A)(n.A,"Promise"),h=(0,r.A)(n.A,"Set"),l=(0,r.A)(n.A,"WeakMap");var u=i(2383),c=i(1121),d="[object Map]",f="[object Promise]",p="[object Set]",m="[object WeakMap]",g="[object DataView]",v=(0,c.A)(s),y=(0,c.A)(o.A),b=(0,c.A)(a),_=(0,c.A)(h),x=(0,c.A)(l),w=u.A;(s&&w(new s(new ArrayBuffer(1)))!=g||o.A&&w(new o.A)!=d||a&&w(a.resolve())!=f||h&&w(new h)!=p||l&&w(new l)!=m)&&(w=function(t){var e=(0,u.A)(t),i="[object Object]"==e?t.constructor:void 0,r=i?(0,c.A)(i):"";if(r)switch(r){case v:return g;case y:return d;case b:return f;case _:return p;case x:return m}return e});const M=w},2437:(t,e,i)=>{"use strict";i.d(e,{W:()=>a});var r=i(9939),n=i(1285),s=i(4492);let o=0;const a=new class{constructor(t){this._poolKeyHash=Object.create(null),this._texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1}createTexture(t,e,i){const r=new n.v({...this.textureOptions,width:t,height:e,resolution:1,antialias:i,autoGarbageCollect:!1});return new s.g({source:r,label:"texturePool_"+o++})}getOptimalTexture(t,e,i=1,n){let s=Math.ceil(t*i-1e-6),o=Math.ceil(e*i-1e-6);s=(0,r.U5)(s),o=(0,r.U5)(o);const a=(s<<17)+(o<<1)+(n?1:0);this._texturePool[a]||(this._texturePool[a]=[]);let h=this._texturePool[a].pop();return h||(h=this.createTexture(s,o,n)),h.source._resolution=i,h.source.width=s/i,h.source.height=o/i,h.source.pixelWidth=s,h.source.pixelHeight=o,h.frame.x=0,h.frame.y=0,h.frame.width=t,h.frame.height=e,h.updateUvs(),this._poolKeyHash[h.uid]=a,h}getSameSizeTexture(t,e=!1){const i=t.source;return this.getOptimalTexture(t.width,t.height,i._resolution,e)}returnTexture(t){const e=this._poolKeyHash[t.uid];this._texturePool[e].push(t)}clear(t){if(t=!1!==t)for(const t in this._texturePool){const e=this._texturePool[t];if(e)for(let t=0;t<e.length;t++)e[t].destroy(!0)}this._texturePool={}}}},2438:(t,e)=>{e["des-ecb"]={key:8,iv:0},e["des-cbc"]=e.des={key:8,iv:8},e["des-ede3-cbc"]=e.des3={key:24,iv:8},e["des-ede3"]={key:24,iv:0},e["des-ede-cbc"]={key:16,iv:8},e["des-ede"]={key:16,iv:0}},2455:(t,e,i)=>{"use strict";var r,n=i(5606);r=i.g.process&&i.g.process.browser?"utf-8":i.g.process&&i.g.process.version?parseInt(n.version.split(".")[0].slice(1),10)>=6?"utf-8":"binary":"utf-8",t.exports=r},2464:(t,e,i)=>{"use strict";var r=i(8452),n=i(6642);t.exports=function(){var t=n();return r(Number,{isNaN:t},{isNaN:function(){return Number.isNaN!==t}}),t}},2528:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=i(4171);const n=function(t,e,i){"__proto__"==e&&r.A?(0,r.A)(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}},2543:function(t,e,i){var r;t=i.nmd(t),function(){var n,s="Expected a function",o="__lodash_hash_undefined__",a="__lodash_placeholder__",h=32,l=128,u=1/0,c=9007199254740991,d=NaN,f=4294967295,p=[["ary",l],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",h],["partialRight",64],["rearg",256]],m="[object Arguments]",g="[object Array]",v="[object Boolean]",y="[object Date]",b="[object Error]",_="[object Function]",x="[object GeneratorFunction]",w="[object Map]",M="[object Number]",S="[object Object]",A="[object Promise]",E="[object RegExp]",T="[object Set]",R="[object String]",P="[object Symbol]",C="[object WeakMap]",I="[object ArrayBuffer]",k="[object DataView]",B="[object Float32Array]",O="[object Float64Array]",L="[object Int8Array]",U="[object Int16Array]",D="[object Int32Array]",N="[object Uint8Array]",F="[object Uint8ClampedArray]",z="[object Uint16Array]",G="[object Uint32Array]",j=/\b__p \+= '';/g,V=/\b(__p \+=) '' \+/g,H=/(__e\(.*?\)|\b__t\)) \+\n'';/g,W=/&(?:amp|lt|gt|quot|#39);/g,X=/[&<>"']/g,q=RegExp(W.source),Y=RegExp(X.source),Z=/<%-([\s\S]+?)%>/g,K=/<%([\s\S]+?)%>/g,$=/<%=([\s\S]+?)%>/g,Q=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,J=/^\w*$/,tt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,et=/[\\^$.*+?()[\]{}|]/g,it=RegExp(et.source),rt=/^\s+/,nt=/\s/,st=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,ot=/\{\n\/\* \[wrapped with (.+)\] \*/,at=/,? & /,ht=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,lt=/[()=,{}\[\]\/\s]/,ut=/\\(\\)?/g,ct=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,dt=/\w*$/,ft=/^[-+]0x[0-9a-f]+$/i,pt=/^0b[01]+$/i,mt=/^\[object .+?Constructor\]$/,gt=/^0o[0-7]+$/i,vt=/^(?:0|[1-9]\d*)$/,yt=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,bt=/($^)/,_t=/['\n\r\u2028\u2029\\]/g,xt="\\ud800-\\udfff",wt="\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff",Mt="\\u2700-\\u27bf",St="a-z\\xdf-\\xf6\\xf8-\\xff",At="A-Z\\xc0-\\xd6\\xd8-\\xde",Et="\\ufe0e\\ufe0f",Tt="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="["+xt+"]",Pt="["+Tt+"]",Ct="["+wt+"]",It="\\d+",kt="["+Mt+"]",Bt="["+St+"]",Ot="[^"+xt+Tt+It+Mt+St+At+"]",Lt="\\ud83c[\\udffb-\\udfff]",Ut="[^"+xt+"]",Dt="(?:\\ud83c[\\udde6-\\uddff]){2}",Nt="[\\ud800-\\udbff][\\udc00-\\udfff]",Ft="["+At+"]",zt="\\u200d",Gt="(?:"+Bt+"|"+Ot+")",jt="(?:"+Ft+"|"+Ot+")",Vt="(?:['](?:d|ll|m|re|s|t|ve))?",Ht="(?:['](?:D|LL|M|RE|S|T|VE))?",Wt="(?:"+Ct+"|"+Lt+")?",Xt="["+Et+"]?",qt=Xt+Wt+"(?:"+zt+"(?:"+[Ut,Dt,Nt].join("|")+")"+Xt+Wt+")*",Yt="(?:"+[kt,Dt,Nt].join("|")+")"+qt,Zt="(?:"+[Ut+Ct+"?",Ct,Dt,Nt,Rt].join("|")+")",Kt=RegExp("[']","g"),$t=RegExp(Ct,"g"),Qt=RegExp(Lt+"(?="+Lt+")|"+Zt+qt,"g"),Jt=RegExp([Ft+"?"+Bt+"+"+Vt+"(?="+[Pt,Ft,"$"].join("|")+")",jt+"+"+Ht+"(?="+[Pt,Ft+Gt,"$"].join("|")+")",Ft+"?"+Gt+"+"+Vt,Ft+"+"+Ht,"\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])","\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",It,Yt].join("|"),"g"),te=RegExp("["+zt+xt+wt+Et+"]"),ee=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,ie=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],re=-1,ne={};ne[B]=ne[O]=ne[L]=ne[U]=ne[D]=ne[N]=ne[F]=ne[z]=ne[G]=!0,ne[m]=ne[g]=ne[I]=ne[v]=ne[k]=ne[y]=ne[b]=ne[_]=ne[w]=ne[M]=ne[S]=ne[E]=ne[T]=ne[R]=ne[C]=!1;var se={};se[m]=se[g]=se[I]=se[k]=se[v]=se[y]=se[B]=se[O]=se[L]=se[U]=se[D]=se[w]=se[M]=se[S]=se[E]=se[T]=se[R]=se[P]=se[N]=se[F]=se[z]=se[G]=!0,se[b]=se[_]=se[C]=!1;var oe={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ae=parseFloat,he=parseInt,le="object"==typeof i.g&&i.g&&i.g.Object===Object&&i.g,ue="object"==typeof self&&self&&self.Object===Object&&self,ce=le||ue||Function("return this")(),de=e&&!e.nodeType&&e,fe=de&&t&&!t.nodeType&&t,pe=fe&&fe.exports===de,me=pe&&le.process,ge=function(){try{return fe&&fe.require&&fe.require("util").types||me&&me.binding&&me.binding("util")}catch(t){}}(),ve=ge&&ge.isArrayBuffer,ye=ge&&ge.isDate,be=ge&&ge.isMap,_e=ge&&ge.isRegExp,xe=ge&&ge.isSet,we=ge&&ge.isTypedArray;function Me(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}function Se(t,e,i,r){for(var n=-1,s=null==t?0:t.length;++n<s;){var o=t[n];e(r,o,i(o),t)}return r}function Ae(t,e){for(var i=-1,r=null==t?0:t.length;++i<r&&!1!==e(t[i],i,t););return t}function Ee(t,e){for(var i=null==t?0:t.length;i--&&!1!==e(t[i],i,t););return t}function Te(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(!e(t[i],i,t))return!1;return!0}function Re(t,e){for(var i=-1,r=null==t?0:t.length,n=0,s=[];++i<r;){var o=t[i];e(o,i,t)&&(s[n++]=o)}return s}function Pe(t,e){return!(null==t||!t.length)&&Fe(t,e,0)>-1}function Ce(t,e,i){for(var r=-1,n=null==t?0:t.length;++r<n;)if(i(e,t[r]))return!0;return!1}function Ie(t,e){for(var i=-1,r=null==t?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n}function ke(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}function Be(t,e,i,r){var n=-1,s=null==t?0:t.length;for(r&&s&&(i=t[++n]);++n<s;)i=e(i,t[n],n,t);return i}function Oe(t,e,i,r){var n=null==t?0:t.length;for(r&&n&&(i=t[--n]);n--;)i=e(i,t[n],n,t);return i}function Le(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1}var Ue=Ve("length");function De(t,e,i){var r;return i(t,function(t,i,n){if(e(t,i,n))return r=i,!1}),r}function Ne(t,e,i,r){for(var n=t.length,s=i+(r?1:-1);r?s--:++s<n;)if(e(t[s],s,t))return s;return-1}function Fe(t,e,i){return e==e?function(t,e,i){for(var r=i-1,n=t.length;++r<n;)if(t[r]===e)return r;return-1}(t,e,i):Ne(t,Ge,i)}function ze(t,e,i,r){for(var n=i-1,s=t.length;++n<s;)if(r(t[n],e))return n;return-1}function Ge(t){return t!=t}function je(t,e){var i=null==t?0:t.length;return i?Xe(t,e)/i:d}function Ve(t){return function(e){return null==e?n:e[t]}}function He(t){return function(e){return null==t?n:t[e]}}function We(t,e,i,r,n){return n(t,function(t,n,s){i=r?(r=!1,t):e(i,t,n,s)}),i}function Xe(t,e){for(var i,r=-1,s=t.length;++r<s;){var o=e(t[r]);o!==n&&(i=i===n?o:i+o)}return i}function qe(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}function Ye(t){return t?t.slice(0,ci(t)+1).replace(rt,""):t}function Ze(t){return function(e){return t(e)}}function Ke(t,e){return Ie(e,function(e){return t[e]})}function $e(t,e){return t.has(e)}function Qe(t,e){for(var i=-1,r=t.length;++i<r&&Fe(e,t[i],0)>-1;);return i}function Je(t,e){for(var i=t.length;i--&&Fe(e,t[i],0)>-1;);return i}var ti=He({:"A",:"A",:"A",:"A",:"A",:"A",:"a",:"a",:"a",:"a",:"a",:"a",:"C",:"c",:"D",:"d",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"N",:"n",:"O",:"O",:"O",:"O",:"O",:"O",:"o",:"o",:"o",:"o",:"o",:"o",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"Y",:"y",:"y",:"Ae",:"ae",:"Th",:"th",:"ss",:"A",:"A",:"A",:"a",:"a",:"a",:"C",:"C",:"C",:"C",:"c",:"c",:"c",:"c",:"D",:"D",:"d",:"d",:"E",:"E",:"E",:"E",:"E",:"e",:"e",:"e",:"e",:"e",:"G",:"G",:"G",:"G",:"g",:"g",:"g",:"g",:"H",:"H",:"h",:"h",:"I",:"I",:"I",:"I",:"I",:"i",:"i",:"i",:"i",:"i",:"J",:"j",:"K",:"k",:"k",:"L",:"L",:"L",:"L",:"L",:"l",:"l",:"l",:"l",:"l",:"N",:"N",:"N",:"N",:"n",:"n",:"n",:"n",:"O",:"O",:"O",:"o",:"o",:"o",:"R",:"R",:"R",:"r",:"r",:"r",:"S",:"S",:"S",:"S",:"s",:"s",:"s",:"s",:"T",:"T",:"T",:"t",:"t",:"t",:"U",:"U",:"U",:"U",:"U",:"U",:"u",:"u",:"u",:"u",:"u",:"u",:"W",:"w",:"Y",:"y",:"Y",:"Z",:"Z",:"Z",:"z",:"z",:"z",:"IJ",:"ij",:"Oe",:"oe",:"'n",:"s"}),ei=He({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"});function ii(t){return"\\"+oe[t]}function ri(t){return te.test(t)}function ni(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i}function si(t,e){return function(i){return t(e(i))}}function oi(t,e){for(var i=-1,r=t.length,n=0,s=[];++i<r;){var o=t[i];o!==e&&o!==a||(t[i]=a,s[n++]=i)}return s}function ai(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i}function hi(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=[t,t]}),i}function li(t){return ri(t)?function(t){for(var e=Qt.lastIndex=0;Qt.test(t);)++e;return e}(t):Ue(t)}function ui(t){return ri(t)?function(t){return t.match(Qt)||[]}(t):function(t){return t.split("")}(t)}function ci(t){for(var e=t.length;e--&&nt.test(t.charAt(e)););return e}var di=He({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),fi=function t(e){var i,r=(e=null==e?ce:fi.defaults(ce.Object(),e,fi.pick(ce,ie))).Array,nt=e.Date,xt=e.Error,wt=e.Function,Mt=e.Math,St=e.Object,At=e.RegExp,Et=e.String,Tt=e.TypeError,Rt=r.prototype,Pt=wt.prototype,Ct=St.prototype,It=e["__core-js_shared__"],kt=Pt.toString,Bt=Ct.hasOwnProperty,Ot=0,Lt=(i=/[^.]+$/.exec(It&&It.keys&&It.keys.IE_PROTO||""))?"Symbol(src)_1."+i:"",Ut=Ct.toString,Dt=kt.call(St),Nt=ce._,Ft=At("^"+kt.call(Bt).replace(et,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),zt=pe?e.Buffer:n,Gt=e.Symbol,jt=e.Uint8Array,Vt=zt?zt.allocUnsafe:n,Ht=si(St.getPrototypeOf,St),Wt=St.create,Xt=Ct.propertyIsEnumerable,qt=Rt.splice,Yt=Gt?Gt.isConcatSpreadable:n,Zt=Gt?Gt.iterator:n,Qt=Gt?Gt.toStringTag:n,te=function(){try{var t=hs(St,"defineProperty");return t({},"",{}),t}catch(t){}}(),oe=e.clearTimeout!==ce.clearTimeout&&e.clearTimeout,le=nt&&nt.now!==ce.Date.now&&nt.now,ue=e.setTimeout!==ce.setTimeout&&e.setTimeout,de=Mt.ceil,fe=Mt.floor,me=St.getOwnPropertySymbols,ge=zt?zt.isBuffer:n,Ue=e.isFinite,He=Rt.join,pi=si(St.keys,St),mi=Mt.max,gi=Mt.min,vi=nt.now,yi=e.parseInt,bi=Mt.random,_i=Rt.reverse,xi=hs(e,"DataView"),wi=hs(e,"Map"),Mi=hs(e,"Promise"),Si=hs(e,"Set"),Ai=hs(e,"WeakMap"),Ei=hs(St,"create"),Ti=Ai&&new Ai,Ri={},Pi=Us(xi),Ci=Us(wi),Ii=Us(Mi),ki=Us(Si),Bi=Us(Ai),Oi=Gt?Gt.prototype:n,Li=Oi?Oi.valueOf:n,Ui=Oi?Oi.toString:n;function Di(t){if(ta(t)&&!Vo(t)&&!(t instanceof Gi)){if(t instanceof zi)return t;if(Bt.call(t,"__wrapped__"))return Ds(t)}return new zi(t)}var Ni=function(){function t(){}return function(e){if(!Jo(e))return{};if(Wt)return Wt(e);t.prototype=e;var i=new t;return t.prototype=n,i}}();function Fi(){}function zi(t,e){this.__wrapped__=t,this.__actions__=[],this.__chain__=!!e,this.__index__=0,this.__values__=n}function Gi(t){this.__wrapped__=t,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=f,this.__views__=[]}function ji(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Vi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Hi(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}function Wi(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new Hi;++e<i;)this.add(t[e])}function Xi(t){var e=this.__data__=new Vi(t);this.size=e.size}function qi(t,e){var i=Vo(t),r=!i&&jo(t),n=!i&&!r&&qo(t),s=!i&&!r&&!n&&ha(t),o=i||r||n||s,a=o?qe(t.length,Et):[],h=a.length;for(var l in t)!e&&!Bt.call(t,l)||o&&("length"==l||n&&("offset"==l||"parent"==l)||s&&("buffer"==l||"byteLength"==l||"byteOffset"==l)||ms(l,h))||a.push(l);return a}function Yi(t){var e=t.length;return e?t[Hr(0,e-1)]:n}function Zi(t,e){return Is(En(t),nr(e,0,t.length))}function Ki(t){return Is(En(t))}function $i(t,e,i){(i!==n&&!Fo(t[e],i)||i===n&&!(e in t))&&ir(t,e,i)}function Qi(t,e,i){var r=t[e];Bt.call(t,e)&&Fo(r,i)&&(i!==n||e in t)||ir(t,e,i)}function Ji(t,e){for(var i=t.length;i--;)if(Fo(t[i][0],e))return i;return-1}function tr(t,e,i,r){return lr(t,function(t,n,s){e(r,t,i(t),s)}),r}function er(t,e){return t&&Tn(e,Ca(e),t)}function ir(t,e,i){"__proto__"==e&&te?te(t,e,{configurable:!0,enumerable:!0,value:i,writable:!0}):t[e]=i}function rr(t,e){for(var i=-1,s=e.length,o=r(s),a=null==t;++i<s;)o[i]=a?n:Aa(t,e[i]);return o}function nr(t,e,i){return t==t&&(i!==n&&(t=t<=i?t:i),e!==n&&(t=t>=e?t:e)),t}function sr(t,e,i,r,s,o){var a,h=1&e,l=2&e,u=4&e;if(i&&(a=s?i(t,r,s,o):i(t)),a!==n)return a;if(!Jo(t))return t;var c=Vo(t);if(c){if(a=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&Bt.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(t),!h)return En(t,a)}else{var d=cs(t),f=d==_||d==x;if(qo(t))return _n(t,h);if(d==S||d==m||f&&!s){if(a=l||f?{}:fs(t),!h)return l?function(t,e){return Tn(t,us(t),e)}(t,function(t,e){return t&&Tn(e,Ia(e),t)}(a,t)):function(t,e){return Tn(t,ls(t),e)}(t,er(a,t))}else{if(!se[d])return s?t:{};a=function(t,e,i){var r,n=t.constructor;switch(e){case I:return xn(t);case v:case y:return new n(+t);case k:return function(t,e){var i=e?xn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case B:case O:case L:case U:case D:case N:case F:case z:case G:return wn(t,i);case w:return new n;case M:case R:return new n(t);case E:return function(t){var e=new t.constructor(t.source,dt.exec(t));return e.lastIndex=t.lastIndex,e}(t);case T:return new n;case P:return r=t,Li?St(Li.call(r)):{}}}(t,d,h)}}o||(o=new Xi);var p=o.get(t);if(p)return p;o.set(t,a),sa(t)?t.forEach(function(r){a.add(sr(r,e,i,r,t,o))}):ea(t)&&t.forEach(function(r,n){a.set(n,sr(r,e,i,n,t,o))});var g=c?n:(u?l?es:ts:l?Ia:Ca)(t);return Ae(g||t,function(r,n){g&&(r=t[n=r]),Qi(a,n,sr(r,e,i,n,t,o))}),a}function or(t,e,i){var r=i.length;if(null==t)return!r;for(t=St(t);r--;){var s=i[r],o=e[s],a=t[s];if(a===n&&!(s in t)||!o(a))return!1}return!0}function ar(t,e,i){if("function"!=typeof t)throw new Tt(s);return Ts(function(){t.apply(n,i)},e)}function hr(t,e,i,r){var n=-1,s=Pe,o=!0,a=t.length,h=[],l=e.length;if(!a)return h;i&&(e=Ie(e,Ze(i))),r?(s=Ce,o=!1):e.length>=200&&(s=$e,o=!1,e=new Wi(e));t:for(;++n<a;){var u=t[n],c=null==i?u:i(u);if(u=r||0!==u?u:0,o&&c==c){for(var d=l;d--;)if(e[d]===c)continue t;h.push(u)}else s(e,c,r)||h.push(u)}return h}Di.templateSettings={escape:Z,evaluate:K,interpolate:$,variable:"",imports:{_:Di}},Di.prototype=Fi.prototype,Di.prototype.constructor=Di,zi.prototype=Ni(Fi.prototype),zi.prototype.constructor=zi,Gi.prototype=Ni(Fi.prototype),Gi.prototype.constructor=Gi,ji.prototype.clear=function(){this.__data__=Ei?Ei(null):{},this.size=0},ji.prototype.delete=function(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e},ji.prototype.get=function(t){var e=this.__data__;if(Ei){var i=e[t];return i===o?n:i}return Bt.call(e,t)?e[t]:n},ji.prototype.has=function(t){var e=this.__data__;return Ei?e[t]!==n:Bt.call(e,t)},ji.prototype.set=function(t,e){var i=this.__data__;return this.size+=this.has(t)?0:1,i[t]=Ei&&e===n?o:e,this},Vi.prototype.clear=function(){this.__data__=[],this.size=0},Vi.prototype.delete=function(t){var e=this.__data__,i=Ji(e,t);return!(i<0||(i==e.length-1?e.pop():qt.call(e,i,1),--this.size,0))},Vi.prototype.get=function(t){var e=this.__data__,i=Ji(e,t);return i<0?n:e[i][1]},Vi.prototype.has=function(t){return Ji(this.__data__,t)>-1},Vi.prototype.set=function(t,e){var i=this.__data__,r=Ji(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this},Hi.prototype.clear=function(){this.size=0,this.__data__={hash:new ji,map:new(wi||Vi),string:new ji}},Hi.prototype.delete=function(t){var e=os(this,t).delete(t);return this.size-=e?1:0,e},Hi.prototype.get=function(t){return os(this,t).get(t)},Hi.prototype.has=function(t){return os(this,t).has(t)},Hi.prototype.set=function(t,e){var i=os(this,t),r=i.size;return i.set(t,e),this.size+=i.size==r?0:1,this},Wi.prototype.add=Wi.prototype.push=function(t){return this.__data__.set(t,o),this},Wi.prototype.has=function(t){return this.__data__.has(t)},Xi.prototype.clear=function(){this.__data__=new Vi,this.size=0},Xi.prototype.delete=function(t){var e=this.__data__,i=e.delete(t);return this.size=e.size,i},Xi.prototype.get=function(t){return this.__data__.get(t)},Xi.prototype.has=function(t){return this.__data__.has(t)},Xi.prototype.set=function(t,e){var i=this.__data__;if(i instanceof Vi){var r=i.__data__;if(!wi||r.length<199)return r.push([t,e]),this.size=++i.size,this;i=this.__data__=new Hi(r)}return i.set(t,e),this.size=i.size,this};var lr=Cn(vr),ur=Cn(yr,!0);function cr(t,e){var i=!0;return lr(t,function(t,r,n){return i=!!e(t,r,n)}),i}function dr(t,e,i){for(var r=-1,s=t.length;++r<s;){var o=t[r],a=e(o);if(null!=a&&(h===n?a==a&&!aa(a):i(a,h)))var h=a,l=o}return l}function fr(t,e){var i=[];return lr(t,function(t,r,n){e(t,r,n)&&i.push(t)}),i}function pr(t,e,i,r,n){var s=-1,o=t.length;for(i||(i=ps),n||(n=[]);++s<o;){var a=t[s];e>0&&i(a)?e>1?pr(a,e-1,i,r,n):ke(n,a):r||(n[n.length]=a)}return n}var mr=In(),gr=In(!0);function vr(t,e){return t&&mr(t,e,Ca)}function yr(t,e){return t&&gr(t,e,Ca)}function br(t,e){return Re(e,function(e){return Ko(t[e])})}function _r(t,e){for(var i=0,r=(e=gn(e,t)).length;null!=t&&i<r;)t=t[Ls(e[i++])];return i&&i==r?t:n}function xr(t,e,i){var r=e(t);return Vo(t)?r:ke(r,i(t))}function wr(t){return null==t?t===n?"[object Undefined]":"[object Null]":Qt&&Qt in St(t)?function(t){var e=Bt.call(t,Qt),i=t[Qt];try{t[Qt]=n;var r=!0}catch(t){}var s=Ut.call(t);return r&&(e?t[Qt]=i:delete t[Qt]),s}(t):function(t){return Ut.call(t)}(t)}function Mr(t,e){return t>e}function Sr(t,e){return null!=t&&Bt.call(t,e)}function Ar(t,e){return null!=t&&e in St(t)}function Er(t,e,i){for(var s=i?Ce:Pe,o=t[0].length,a=t.length,h=a,l=r(a),u=1/0,c=[];h--;){var d=t[h];h&&e&&(d=Ie(d,Ze(e))),u=gi(d.length,u),l[h]=!i&&(e||o>=120&&d.length>=120)?new Wi(h&&d):n}d=t[0];var f=-1,p=l[0];t:for(;++f<o&&c.length<u;){var m=d[f],g=e?e(m):m;if(m=i||0!==m?m:0,!(p?$e(p,g):s(c,g,i))){for(h=a;--h;){var v=l[h];if(!(v?$e(v,g):s(t[h],g,i)))continue t}p&&p.push(g),c.push(m)}}return c}function Tr(t,e,i){var r=null==(t=Ss(t,e=gn(e,t)))?t:t[Ls(Ys(e))];return null==r?n:Me(r,t,i)}function Rr(t){return ta(t)&&wr(t)==m}function Pr(t,e,i,r,s){return t===e||(null==t||null==e||!ta(t)&&!ta(e)?t!=t&&e!=e:function(t,e,i,r,s,o){var a=Vo(t),h=Vo(e),l=a?g:cs(t),u=h?g:cs(e),c=(l=l==m?S:l)==S,d=(u=u==m?S:u)==S,f=l==u;if(f&&qo(t)){if(!qo(e))return!1;a=!0,c=!1}if(f&&!c)return o||(o=new Xi),a||ha(t)?Qn(t,e,i,r,s,o):function(t,e,i,r,n,s,o){switch(i){case k:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case I:return!(t.byteLength!=e.byteLength||!s(new jt(t),new jt(e)));case v:case y:case M:return Fo(+t,+e);case b:return t.name==e.name&&t.message==e.message;case E:case R:return t==e+"";case w:var a=ni;case T:var h=1&r;if(a||(a=ai),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var u=Qn(a(t),a(e),r,n,s,o);return o.delete(t),u;case P:if(Li)return Li.call(t)==Li.call(e)}return!1}(t,e,l,i,r,s,o);if(!(1&i)){var p=c&&Bt.call(t,"__wrapped__"),_=d&&Bt.call(e,"__wrapped__");if(p||_){var x=p?t.value():t,A=_?e.value():e;return o||(o=new Xi),s(x,A,i,r,o)}}return!!f&&(o||(o=new Xi),function(t,e,i,r,s,o){var a=1&i,h=ts(t),l=h.length;if(l!=ts(e).length&&!a)return!1;for(var u=l;u--;){var c=h[u];if(!(a?c in e:Bt.call(e,c)))return!1}var d=o.get(t),f=o.get(e);if(d&&f)return d==e&&f==t;var p=!0;o.set(t,e),o.set(e,t);for(var m=a;++u<l;){var g=t[c=h[u]],v=e[c];if(r)var y=a?r(v,g,c,e,t,o):r(g,v,c,t,e,o);if(!(y===n?g===v||s(g,v,i,r,o):y)){p=!1;break}m||(m="constructor"==c)}if(p&&!m){var b=t.constructor,_=e.constructor;b==_||!("constructor"in t)||!("constructor"in e)||"function"==typeof b&&b instanceof b&&"function"==typeof _&&_ instanceof _||(p=!1)}return o.delete(t),o.delete(e),p}(t,e,i,r,s,o))}(t,e,i,r,Pr,s))}function Cr(t,e,i,r){var s=i.length,o=s,a=!r;if(null==t)return!o;for(t=St(t);s--;){var h=i[s];if(a&&h[2]?h[1]!==t[h[0]]:!(h[0]in t))return!1}for(;++s<o;){var l=(h=i[s])[0],u=t[l],c=h[1];if(a&&h[2]){if(u===n&&!(l in t))return!1}else{var d=new Xi;if(r)var f=r(u,c,l,t,e,d);if(!(f===n?Pr(c,u,3,r,d):f))return!1}}return!0}function Ir(t){return!(!Jo(t)||(e=t,Lt&&Lt in e))&&(Ko(t)?Ft:mt).test(Us(t));var e}function kr(t){return"function"==typeof t?t:null==t?ih:"object"==typeof t?Vo(t)?Dr(t[0],t[1]):Ur(t):ch(t)}function Br(t){if(!_s(t))return pi(t);var e=[];for(var i in St(t))Bt.call(t,i)&&"constructor"!=i&&e.push(i);return e}function Or(t,e){return t<e}function Lr(t,e){var i=-1,n=Wo(t)?r(t.length):[];return lr(t,function(t,r,s){n[++i]=e(t,r,s)}),n}function Ur(t){var e=as(t);return 1==e.length&&e[0][2]?ws(e[0][0],e[0][1]):function(i){return i===t||Cr(i,t,e)}}function Dr(t,e){return vs(t)&&xs(e)?ws(Ls(t),e):function(i){var r=Aa(i,t);return r===n&&r===e?Ea(i,t):Pr(e,r,3)}}function Nr(t,e,i,r,s){t!==e&&mr(e,function(o,a){if(s||(s=new Xi),Jo(o))!function(t,e,i,r,s,o,a){var h=As(t,i),l=As(e,i),u=a.get(l);if(u)$i(t,i,u);else{var c=o?o(h,l,i+"",t,e,a):n,d=c===n;if(d){var f=Vo(l),p=!f&&qo(l),m=!f&&!p&&ha(l);c=l,f||p||m?Vo(h)?c=h:Xo(h)?c=En(h):p?(d=!1,c=_n(l,!0)):m?(d=!1,c=wn(l,!0)):c=[]:ra(l)||jo(l)?(c=h,jo(h)?c=ga(h):Jo(h)&&!Ko(h)||(c=fs(l))):d=!1}d&&(a.set(l,c),s(c,l,r,o,a),a.delete(l)),$i(t,i,c)}}(t,e,a,i,Nr,r,s);else{var h=r?r(As(t,a),o,a+"",t,e,s):n;h===n&&(h=o),$i(t,a,h)}},Ia)}function Fr(t,e){var i=t.length;if(i)return ms(e+=e<0?i:0,i)?t[e]:n}function zr(t,e,i){e=e.length?Ie(e,function(t){return Vo(t)?function(e){return _r(e,1===t.length?t[0]:t)}:t}):[ih];var r=-1;e=Ie(e,Ze(ss()));var n=Lr(t,function(t,i,n){var s=Ie(e,function(e){return e(t)});return{criteria:s,index:++r,value:t}});return function(t){var e=t.length;for(t.sort(function(t,e){return function(t,e,i){for(var r=-1,n=t.criteria,s=e.criteria,o=n.length,a=i.length;++r<o;){var h=Mn(n[r],s[r]);if(h)return r>=a?h:h*("desc"==i[r]?-1:1)}return t.index-e.index}(t,e,i)});e--;)t[e]=t[e].value;return t}(n)}function Gr(t,e,i){for(var r=-1,n=e.length,s={};++r<n;){var o=e[r],a=_r(t,o);i(a,o)&&Zr(s,gn(o,t),a)}return s}function jr(t,e,i,r){var n=r?ze:Fe,s=-1,o=e.length,a=t;for(t===e&&(e=En(e)),i&&(a=Ie(t,Ze(i)));++s<o;)for(var h=0,l=e[s],u=i?i(l):l;(h=n(a,u,h,r))>-1;)a!==t&&qt.call(a,h,1),qt.call(t,h,1);return t}function Vr(t,e){for(var i=t?e.length:0,r=i-1;i--;){var n=e[i];if(i==r||n!==s){var s=n;ms(n)?qt.call(t,n,1):hn(t,n)}}return t}function Hr(t,e){return t+fe(bi()*(e-t+1))}function Wr(t,e){var i="";if(!t||e<1||e>c)return i;do{e%2&&(i+=t),(e=fe(e/2))&&(t+=t)}while(e);return i}function Xr(t,e){return Rs(Ms(t,e,ih),t+"")}function qr(t){return Yi(Fa(t))}function Yr(t,e){var i=Fa(t);return Is(i,nr(e,0,i.length))}function Zr(t,e,i,r){if(!Jo(t))return t;for(var s=-1,o=(e=gn(e,t)).length,a=o-1,h=t;null!=h&&++s<o;){var l=Ls(e[s]),u=i;if("__proto__"===l||"constructor"===l||"prototype"===l)return t;if(s!=a){var c=h[l];(u=r?r(c,l,h):n)===n&&(u=Jo(c)?c:ms(e[s+1])?[]:{})}Qi(h,l,u),h=h[l]}return t}var Kr=Ti?function(t,e){return Ti.set(t,e),t}:ih,$r=te?function(t,e){return te(t,"toString",{configurable:!0,enumerable:!1,value:Ja(e),writable:!0})}:ih;function Qr(t){return Is(Fa(t))}function Jr(t,e,i){var n=-1,s=t.length;e<0&&(e=-e>s?0:s+e),(i=i>s?s:i)<0&&(i+=s),s=e>i?0:i-e>>>0,e>>>=0;for(var o=r(s);++n<s;)o[n]=t[n+e];return o}function tn(t,e){var i;return lr(t,function(t,r,n){return!(i=e(t,r,n))}),!!i}function en(t,e,i){var r=0,n=null==t?r:t.length;if("number"==typeof e&&e==e&&n<=2147483647){for(;r<n;){var s=r+n>>>1,o=t[s];null!==o&&!aa(o)&&(i?o<=e:o<e)?r=s+1:n=s}return n}return rn(t,e,ih,i)}function rn(t,e,i,r){var s=0,o=null==t?0:t.length;if(0===o)return 0;for(var a=(e=i(e))!=e,h=null===e,l=aa(e),u=e===n;s<o;){var c=fe((s+o)/2),d=i(t[c]),f=d!==n,p=null===d,m=d==d,g=aa(d);if(a)var v=r||m;else v=u?m&&(r||f):h?m&&f&&(r||!p):l?m&&f&&!p&&(r||!g):!p&&!g&&(r?d<=e:d<e);v?s=c+1:o=c}return gi(o,4294967294)}function nn(t,e){for(var i=-1,r=t.length,n=0,s=[];++i<r;){var o=t[i],a=e?e(o):o;if(!i||!Fo(a,h)){var h=a;s[n++]=0===o?0:o}}return s}function sn(t){return"number"==typeof t?t:aa(t)?d:+t}function on(t){if("string"==typeof t)return t;if(Vo(t))return Ie(t,on)+"";if(aa(t))return Ui?Ui.call(t):"";var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function an(t,e,i){var r=-1,n=Pe,s=t.length,o=!0,a=[],h=a;if(i)o=!1,n=Ce;else if(s>=200){var l=e?null:Xn(t);if(l)return ai(l);o=!1,n=$e,h=new Wi}else h=e?[]:a;t:for(;++r<s;){var u=t[r],c=e?e(u):u;if(u=i||0!==u?u:0,o&&c==c){for(var d=h.length;d--;)if(h[d]===c)continue t;e&&h.push(c),a.push(u)}else n(h,c,i)||(h!==a&&h.push(c),a.push(u))}return a}function hn(t,e){return null==(t=Ss(t,e=gn(e,t)))||delete t[Ls(Ys(e))]}function ln(t,e,i,r){return Zr(t,e,i(_r(t,e)),r)}function un(t,e,i,r){for(var n=t.length,s=r?n:-1;(r?s--:++s<n)&&e(t[s],s,t););return i?Jr(t,r?0:s,r?s+1:n):Jr(t,r?s+1:0,r?n:s)}function cn(t,e){var i=t;return i instanceof Gi&&(i=i.value()),Be(e,function(t,e){return e.func.apply(e.thisArg,ke([t],e.args))},i)}function dn(t,e,i){var n=t.length;if(n<2)return n?an(t[0]):[];for(var s=-1,o=r(n);++s<n;)for(var a=t[s],h=-1;++h<n;)h!=s&&(o[s]=hr(o[s]||a,t[h],e,i));return an(pr(o,1),e,i)}function fn(t,e,i){for(var r=-1,s=t.length,o=e.length,a={};++r<s;){var h=r<o?e[r]:n;i(a,t[r],h)}return a}function pn(t){return Xo(t)?t:[]}function mn(t){return"function"==typeof t?t:ih}function gn(t,e){return Vo(t)?t:vs(t,e)?[t]:Os(va(t))}var vn=Xr;function yn(t,e,i){var r=t.length;return i=i===n?r:i,!e&&i>=r?t:Jr(t,e,i)}var bn=oe||function(t){return ce.clearTimeout(t)};function _n(t,e){if(e)return t.slice();var i=t.length,r=Vt?Vt(i):new t.constructor(i);return t.copy(r),r}function xn(t){var e=new t.constructor(t.byteLength);return new jt(e).set(new jt(t)),e}function wn(t,e){var i=e?xn(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.length)}function Mn(t,e){if(t!==e){var i=t!==n,r=null===t,s=t==t,o=aa(t),a=e!==n,h=null===e,l=e==e,u=aa(e);if(!h&&!u&&!o&&t>e||o&&a&&l&&!h&&!u||r&&a&&l||!i&&l||!s)return 1;if(!r&&!o&&!u&&t<e||u&&i&&s&&!r&&!o||h&&i&&s||!a&&s||!l)return-1}return 0}function Sn(t,e,i,n){for(var s=-1,o=t.length,a=i.length,h=-1,l=e.length,u=mi(o-a,0),c=r(l+u),d=!n;++h<l;)c[h]=e[h];for(;++s<a;)(d||s<o)&&(c[i[s]]=t[s]);for(;u--;)c[h++]=t[s++];return c}function An(t,e,i,n){for(var s=-1,o=t.length,a=-1,h=i.length,l=-1,u=e.length,c=mi(o-h,0),d=r(c+u),f=!n;++s<c;)d[s]=t[s];for(var p=s;++l<u;)d[p+l]=e[l];for(;++a<h;)(f||s<o)&&(d[p+i[a]]=t[s++]);return d}function En(t,e){var i=-1,n=t.length;for(e||(e=r(n));++i<n;)e[i]=t[i];return e}function Tn(t,e,i,r){var s=!i;i||(i={});for(var o=-1,a=e.length;++o<a;){var h=e[o],l=r?r(i[h],t[h],h,i,t):n;l===n&&(l=t[h]),s?ir(i,h,l):Qi(i,h,l)}return i}function Rn(t,e){return function(i,r){var n=Vo(i)?Se:tr,s=e?e():{};return n(i,t,ss(r,2),s)}}function Pn(t){return Xr(function(e,i){var r=-1,s=i.length,o=s>1?i[s-1]:n,a=s>2?i[2]:n;for(o=t.length>3&&"function"==typeof o?(s--,o):n,a&&gs(i[0],i[1],a)&&(o=s<3?n:o,s=1),e=St(e);++r<s;){var h=i[r];h&&t(e,h,r,o)}return e})}function Cn(t,e){return function(i,r){if(null==i)return i;if(!Wo(i))return t(i,r);for(var n=i.length,s=e?n:-1,o=St(i);(e?s--:++s<n)&&!1!==r(o[s],s,o););return i}}function In(t){return function(e,i,r){for(var n=-1,s=St(e),o=r(e),a=o.length;a--;){var h=o[t?a:++n];if(!1===i(s[h],h,s))break}return e}}function kn(t){return function(e){var i=ri(e=va(e))?ui(e):n,r=i?i[0]:e.charAt(0),s=i?yn(i,1).join(""):e.slice(1);return r[t]()+s}}function Bn(t){return function(e){return Be(Ka(ja(e).replace(Kt,"")),t,"")}}function On(t){return function(){var e=arguments;switch(e.length){case 0:return new t;case 1:return new t(e[0]);case 2:return new t(e[0],e[1]);case 3:return new t(e[0],e[1],e[2]);case 4:return new t(e[0],e[1],e[2],e[3]);case 5:return new t(e[0],e[1],e[2],e[3],e[4]);case 6:return new t(e[0],e[1],e[2],e[3],e[4],e[5]);case 7:return new t(e[0],e[1],e[2],e[3],e[4],e[5],e[6])}var i=Ni(t.prototype),r=t.apply(i,e);return Jo(r)?r:i}}function Ln(t){return function(e,i,r){var s=St(e);if(!Wo(e)){var o=ss(i,3);e=Ca(e),i=function(t){return o(s[t],t,s)}}var a=t(e,i,r);return a>-1?s[o?e[a]:a]:n}}function Un(t){return Jn(function(e){var i=e.length,r=i,o=zi.prototype.thru;for(t&&e.reverse();r--;){var a=e[r];if("function"!=typeof a)throw new Tt(s);if(o&&!h&&"wrapper"==rs(a))var h=new zi([],!0)}for(r=h?r:i;++r<i;){var l=rs(a=e[r]),u="wrapper"==l?is(a):n;h=u&&ys(u[0])&&424==u[1]&&!u[4].length&&1==u[9]?h[rs(u[0])].apply(h,u[3]):1==a.length&&ys(a)?h[l]():h.thru(a)}return function(){var t=arguments,r=t[0];if(h&&1==t.length&&Vo(r))return h.plant(r).value();for(var n=0,s=i?e[n].apply(this,t):r;++n<i;)s=e[n].call(this,s);return s}})}function Dn(t,e,i,s,o,a,h,u,c,d){var f=e&l,p=1&e,m=2&e,g=24&e,v=512&e,y=m?n:On(t);return function l(){for(var b=arguments.length,_=r(b),x=b;x--;)_[x]=arguments[x];if(g)var w=ns(l),M=function(t,e){for(var i=t.length,r=0;i--;)t[i]===e&&++r;return r}(_,w);if(s&&(_=Sn(_,s,o,g)),a&&(_=An(_,a,h,g)),b-=M,g&&b<d){var S=oi(_,w);return Hn(t,e,Dn,l.placeholder,i,_,S,u,c,d-b)}var A=p?i:this,E=m?A[t]:t;return b=_.length,u?_=function(t,e){for(var i=t.length,r=gi(e.length,i),s=En(t);r--;){var o=e[r];t[r]=ms(o,i)?s[o]:n}return t}(_,u):v&&b>1&&_.reverse(),f&&c<b&&(_.length=c),this&&this!==ce&&this instanceof l&&(E=y||On(E)),E.apply(A,_)}}function Nn(t,e){return function(i,r){return function(t,e,i,r){return vr(t,function(t,n,s){e(r,i(t),n,s)}),r}(i,t,e(r),{})}}function Fn(t,e){return function(i,r){var s;if(i===n&&r===n)return e;if(i!==n&&(s=i),r!==n){if(s===n)return r;"string"==typeof i||"string"==typeof r?(i=on(i),r=on(r)):(i=sn(i),r=sn(r)),s=t(i,r)}return s}}function zn(t){return Jn(function(e){return e=Ie(e,Ze(ss())),Xr(function(i){var r=this;return t(e,function(t){return Me(t,r,i)})})})}function Gn(t,e){var i=(e=e===n?" ":on(e)).length;if(i<2)return i?Wr(e,t):e;var r=Wr(e,de(t/li(e)));return ri(e)?yn(ui(r),0,t).join(""):r.slice(0,t)}function jn(t){return function(e,i,s){return s&&"number"!=typeof s&&gs(e,i,s)&&(i=s=n),e=da(e),i===n?(i=e,e=0):i=da(i),function(t,e,i,n){for(var s=-1,o=mi(de((e-t)/(i||1)),0),a=r(o);o--;)a[n?o:++s]=t,t+=i;return a}(e,i,s=s===n?e<i?1:-1:da(s),t)}}function Vn(t){return function(e,i){return"string"==typeof e&&"string"==typeof i||(e=ma(e),i=ma(i)),t(e,i)}}function Hn(t,e,i,r,s,o,a,l,u,c){var d=8&e;e|=d?h:64,4&(e&=~(d?64:h))||(e&=-4);var f=[t,e,s,d?o:n,d?a:n,d?n:o,d?n:a,l,u,c],p=i.apply(n,f);return ys(t)&&Es(p,f),p.placeholder=r,Ps(p,t,e)}function Wn(t){var e=Mt[t];return function(t,i){if(t=ma(t),(i=null==i?0:gi(fa(i),292))&&Ue(t)){var r=(va(t)+"e").split("e");return+((r=(va(e(r[0]+"e"+(+r[1]+i)))+"e").split("e"))[0]+"e"+(+r[1]-i))}return e(t)}}var Xn=Si&&1/ai(new Si([,-0]))[1]==u?function(t){return new Si(t)}:ah;function qn(t){return function(e){var i=cs(e);return i==w?ni(e):i==T?hi(e):function(t,e){return Ie(e,function(e){return[e,t[e]]})}(e,t(e))}}function Yn(t,e,i,o,u,c,d,f){var p=2&e;if(!p&&"function"!=typeof t)throw new Tt(s);var m=o?o.length:0;if(m||(e&=-97,o=u=n),d=d===n?d:mi(fa(d),0),f=f===n?f:fa(f),m-=u?u.length:0,64&e){var g=o,v=u;o=u=n}var y=p?n:is(t),b=[t,e,i,o,u,g,v,c,d,f];if(y&&function(t,e){var i=t[1],r=e[1],n=i|r,s=n<131,o=r==l&&8==i||r==l&&256==i&&t[7].length<=e[8]||384==r&&e[7].length<=e[8]&&8==i;if(!s&&!o)return t;1&r&&(t[2]=e[2],n|=1&i?0:4);var h=e[3];if(h){var u=t[3];t[3]=u?Sn(u,h,e[4]):h,t[4]=u?oi(t[3],a):e[4]}(h=e[5])&&(u=t[5],t[5]=u?An(u,h,e[6]):h,t[6]=u?oi(t[5],a):e[6]),(h=e[7])&&(t[7]=h),r&l&&(t[8]=null==t[8]?e[8]:gi(t[8],e[8])),null==t[9]&&(t[9]=e[9]),t[0]=e[0],t[1]=n}(b,y),t=b[0],e=b[1],i=b[2],o=b[3],u=b[4],!(f=b[9]=b[9]===n?p?0:t.length:mi(b[9]-m,0))&&24&e&&(e&=-25),e&&1!=e)_=8==e||16==e?function(t,e,i){var s=On(t);return function o(){for(var a=arguments.length,h=r(a),l=a,u=ns(o);l--;)h[l]=arguments[l];var c=a<3&&h[0]!==u&&h[a-1]!==u?[]:oi(h,u);return(a-=c.length)<i?Hn(t,e,Dn,o.placeholder,n,h,c,n,n,i-a):Me(this&&this!==ce&&this instanceof o?s:t,this,h)}}(t,e,f):e!=h&&33!=e||u.length?Dn.apply(n,b):function(t,e,i,n){var s=1&e,o=On(t);return function e(){for(var a=-1,h=arguments.length,l=-1,u=n.length,c=r(u+h),d=this&&this!==ce&&this instanceof e?o:t;++l<u;)c[l]=n[l];for(;h--;)c[l++]=arguments[++a];return Me(d,s?i:this,c)}}(t,e,i,o);else var _=function(t,e,i){var r=1&e,n=On(t);return function e(){return(this&&this!==ce&&this instanceof e?n:t).apply(r?i:this,arguments)}}(t,e,i);return Ps((y?Kr:Es)(_,b),t,e)}function Zn(t,e,i,r){return t===n||Fo(t,Ct[i])&&!Bt.call(r,i)?e:t}function Kn(t,e,i,r,s,o){return Jo(t)&&Jo(e)&&(o.set(e,t),Nr(t,e,n,Kn,o),o.delete(e)),t}function $n(t){return ra(t)?n:t}function Qn(t,e,i,r,s,o){var a=1&i,h=t.length,l=e.length;if(h!=l&&!(a&&l>h))return!1;var u=o.get(t),c=o.get(e);if(u&&c)return u==e&&c==t;var d=-1,f=!0,p=2&i?new Wi:n;for(o.set(t,e),o.set(e,t);++d<h;){var m=t[d],g=e[d];if(r)var v=a?r(g,m,d,e,t,o):r(m,g,d,t,e,o);if(v!==n){if(v)continue;f=!1;break}if(p){if(!Le(e,function(t,e){if(!$e(p,e)&&(m===t||s(m,t,i,r,o)))return p.push(e)})){f=!1;break}}else if(m!==g&&!s(m,g,i,r,o)){f=!1;break}}return o.delete(t),o.delete(e),f}function Jn(t){return Rs(Ms(t,n,Vs),t+"")}function ts(t){return xr(t,Ca,ls)}function es(t){return xr(t,Ia,us)}var is=Ti?function(t){return Ti.get(t)}:ah;function rs(t){for(var e=t.name+"",i=Ri[e],r=Bt.call(Ri,e)?i.length:0;r--;){var n=i[r],s=n.func;if(null==s||s==t)return n.name}return e}function ns(t){return(Bt.call(Di,"placeholder")?Di:t).placeholder}function ss(){var t=Di.iteratee||rh;return t=t===rh?kr:t,arguments.length?t(arguments[0],arguments[1]):t}function os(t,e){var i,r,n=t.__data__;return("string"==(r=typeof(i=e))||"number"==r||"symbol"==r||"boolean"==r?"__proto__"!==i:null===i)?n["string"==typeof e?"string":"hash"]:n.map}function as(t){for(var e=Ca(t),i=e.length;i--;){var r=e[i],n=t[r];e[i]=[r,n,xs(n)]}return e}function hs(t,e){var i=function(t,e){return null==t?n:t[e]}(t,e);return Ir(i)?i:n}var ls=me?function(t){return null==t?[]:(t=St(t),Re(me(t),function(e){return Xt.call(t,e)}))}:ph,us=me?function(t){for(var e=[];t;)ke(e,ls(t)),t=Ht(t);return e}:ph,cs=wr;function ds(t,e,i){for(var r=-1,n=(e=gn(e,t)).length,s=!1;++r<n;){var o=Ls(e[r]);if(!(s=null!=t&&i(t,o)))break;t=t[o]}return s||++r!=n?s:!!(n=null==t?0:t.length)&&Qo(n)&&ms(o,n)&&(Vo(t)||jo(t))}function fs(t){return"function"!=typeof t.constructor||_s(t)?{}:Ni(Ht(t))}function ps(t){return Vo(t)||jo(t)||!!(Yt&&t&&t[Yt])}function ms(t,e){var i=typeof t;return!!(e=null==e?c:e)&&("number"==i||"symbol"!=i&&vt.test(t))&&t>-1&&t%1==0&&t<e}function gs(t,e,i){if(!Jo(i))return!1;var r=typeof e;return!!("number"==r?Wo(i)&&ms(e,i.length):"string"==r&&e in i)&&Fo(i[e],t)}function vs(t,e){if(Vo(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!aa(t))||J.test(t)||!Q.test(t)||null!=e&&t in St(e)}function ys(t){var e=rs(t),i=Di[e];if("function"!=typeof i||!(e in Gi.prototype))return!1;if(t===i)return!0;var r=is(i);return!!r&&t===r[0]}(xi&&cs(new xi(new ArrayBuffer(1)))!=k||wi&&cs(new wi)!=w||Mi&&cs(Mi.resolve())!=A||Si&&cs(new Si)!=T||Ai&&cs(new Ai)!=C)&&(cs=function(t){var e=wr(t),i=e==S?t.constructor:n,r=i?Us(i):"";if(r)switch(r){case Pi:return k;case Ci:return w;case Ii:return A;case ki:return T;case Bi:return C}return e});var bs=It?Ko:mh;function _s(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||Ct)}function xs(t){return t==t&&!Jo(t)}function ws(t,e){return function(i){return null!=i&&i[t]===e&&(e!==n||t in St(i))}}function Ms(t,e,i){return e=mi(e===n?t.length-1:e,0),function(){for(var n=arguments,s=-1,o=mi(n.length-e,0),a=r(o);++s<o;)a[s]=n[e+s];s=-1;for(var h=r(e+1);++s<e;)h[s]=n[s];return h[e]=i(a),Me(t,this,h)}}function Ss(t,e){return e.length<2?t:_r(t,Jr(e,0,-1))}function As(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]}var Es=Cs(Kr),Ts=ue||function(t,e){return ce.setTimeout(t,e)},Rs=Cs($r);function Ps(t,e,i){var r=e+"";return Rs(t,function(t,e){var i=e.length;if(!i)return t;var r=i-1;return e[r]=(i>1?"& ":"")+e[r],e=e.join(i>2?", ":" "),t.replace(st,"{\n/* [wrapped with "+e+"] */\n")}(r,function(t,e){return Ae(p,function(i){var r="_."+i[0];e&i[1]&&!Pe(t,r)&&t.push(r)}),t.sort()}(function(t){var e=t.match(ot);return e?e[1].split(at):[]}(r),i)))}function Cs(t){var e=0,i=0;return function(){var r=vi(),s=16-(r-i);if(i=r,s>0){if(++e>=800)return arguments[0]}else e=0;return t.apply(n,arguments)}}function Is(t,e){var i=-1,r=t.length,s=r-1;for(e=e===n?r:e;++i<e;){var o=Hr(i,s),a=t[o];t[o]=t[i],t[i]=a}return t.length=e,t}var ks,Bs,Os=(ks=Bo(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(tt,function(t,i,r,n){e.push(r?n.replace(ut,"$1"):i||t)}),e},function(t){return 500===Bs.size&&Bs.clear(),t}),Bs=ks.cache,ks);function Ls(t){if("string"==typeof t||aa(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e}function Us(t){if(null!=t){try{return kt.call(t)}catch(t){}try{return t+""}catch(t){}}return""}function Ds(t){if(t instanceof Gi)return t.clone();var e=new zi(t.__wrapped__,t.__chain__);return e.__actions__=En(t.__actions__),e.__index__=t.__index__,e.__values__=t.__values__,e}var Ns=Xr(function(t,e){return Xo(t)?hr(t,pr(e,1,Xo,!0)):[]}),Fs=Xr(function(t,e){var i=Ys(e);return Xo(i)&&(i=n),Xo(t)?hr(t,pr(e,1,Xo,!0),ss(i,2)):[]}),zs=Xr(function(t,e){var i=Ys(e);return Xo(i)&&(i=n),Xo(t)?hr(t,pr(e,1,Xo,!0),n,i):[]});function Gs(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var n=null==i?0:fa(i);return n<0&&(n=mi(r+n,0)),Ne(t,ss(e,3),n)}function js(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r-1;return i!==n&&(s=fa(i),s=i<0?mi(r+s,0):gi(s,r-1)),Ne(t,ss(e,3),s,!0)}function Vs(t){return null!=t&&t.length?pr(t,1):[]}function Hs(t){return t&&t.length?t[0]:n}var Ws=Xr(function(t){var e=Ie(t,pn);return e.length&&e[0]===t[0]?Er(e):[]}),Xs=Xr(function(t){var e=Ys(t),i=Ie(t,pn);return e===Ys(i)?e=n:i.pop(),i.length&&i[0]===t[0]?Er(i,ss(e,2)):[]}),qs=Xr(function(t){var e=Ys(t),i=Ie(t,pn);return(e="function"==typeof e?e:n)&&i.pop(),i.length&&i[0]===t[0]?Er(i,n,e):[]});function Ys(t){var e=null==t?0:t.length;return e?t[e-1]:n}var Zs=Xr(Ks);function Ks(t,e){return t&&t.length&&e&&e.length?jr(t,e):t}var $s=Jn(function(t,e){var i=null==t?0:t.length,r=rr(t,e);return Vr(t,Ie(e,function(t){return ms(t,i)?+t:t}).sort(Mn)),r});function Qs(t){return null==t?t:_i.call(t)}var Js=Xr(function(t){return an(pr(t,1,Xo,!0))}),to=Xr(function(t){var e=Ys(t);return Xo(e)&&(e=n),an(pr(t,1,Xo,!0),ss(e,2))}),eo=Xr(function(t){var e=Ys(t);return e="function"==typeof e?e:n,an(pr(t,1,Xo,!0),n,e)});function io(t){if(!t||!t.length)return[];var e=0;return t=Re(t,function(t){if(Xo(t))return e=mi(t.length,e),!0}),qe(e,function(e){return Ie(t,Ve(e))})}function ro(t,e){if(!t||!t.length)return[];var i=io(t);return null==e?i:Ie(i,function(t){return Me(e,n,t)})}var no=Xr(function(t,e){return Xo(t)?hr(t,e):[]}),so=Xr(function(t){return dn(Re(t,Xo))}),oo=Xr(function(t){var e=Ys(t);return Xo(e)&&(e=n),dn(Re(t,Xo),ss(e,2))}),ao=Xr(function(t){var e=Ys(t);return e="function"==typeof e?e:n,dn(Re(t,Xo),n,e)}),ho=Xr(io),lo=Xr(function(t){var e=t.length,i=e>1?t[e-1]:n;return i="function"==typeof i?(t.pop(),i):n,ro(t,i)});function uo(t){var e=Di(t);return e.__chain__=!0,e}function co(t,e){return e(t)}var fo=Jn(function(t){var e=t.length,i=e?t[0]:0,r=this.__wrapped__,s=function(e){return rr(e,t)};return!(e>1||this.__actions__.length)&&r instanceof Gi&&ms(i)?((r=r.slice(i,+i+(e?1:0))).__actions__.push({func:co,args:[s],thisArg:n}),new zi(r,this.__chain__).thru(function(t){return e&&!t.length&&t.push(n),t})):this.thru(s)}),po=Rn(function(t,e,i){Bt.call(t,i)?++t[i]:ir(t,i,1)}),mo=Ln(Gs),go=Ln(js);function vo(t,e){return(Vo(t)?Ae:lr)(t,ss(e,3))}function yo(t,e){return(Vo(t)?Ee:ur)(t,ss(e,3))}var bo=Rn(function(t,e,i){Bt.call(t,i)?t[i].push(e):ir(t,i,[e])}),_o=Xr(function(t,e,i){var n=-1,s="function"==typeof e,o=Wo(t)?r(t.length):[];return lr(t,function(t){o[++n]=s?Me(e,t,i):Tr(t,e,i)}),o}),xo=Rn(function(t,e,i){ir(t,i,e)});function wo(t,e){return(Vo(t)?Ie:Lr)(t,ss(e,3))}var Mo=Rn(function(t,e,i){t[i?0:1].push(e)},function(){return[[],[]]}),So=Xr(function(t,e){if(null==t)return[];var i=e.length;return i>1&&gs(t,e[0],e[1])?e=[]:i>2&&gs(e[0],e[1],e[2])&&(e=[e[0]]),zr(t,pr(e,1),[])}),Ao=le||function(){return ce.Date.now()};function Eo(t,e,i){return e=i?n:e,e=t&&null==e?t.length:e,Yn(t,l,n,n,n,n,e)}function To(t,e){var i;if("function"!=typeof e)throw new Tt(s);return t=fa(t),function(){return--t>0&&(i=e.apply(this,arguments)),t<=1&&(e=n),i}}var Ro=Xr(function(t,e,i){var r=1;if(i.length){var n=oi(i,ns(Ro));r|=h}return Yn(t,r,e,i,n)}),Po=Xr(function(t,e,i){var r=3;if(i.length){var n=oi(i,ns(Po));r|=h}return Yn(e,r,t,i,n)});function Co(t,e,i){var r,o,a,h,l,u,c=0,d=!1,f=!1,p=!0;if("function"!=typeof t)throw new Tt(s);function m(e){var i=r,s=o;return r=o=n,c=e,h=t.apply(s,i)}function g(t){var i=t-u;return u===n||i>=e||i<0||f&&t-c>=a}function v(){var t=Ao();if(g(t))return y(t);l=Ts(v,function(t){var i=e-(t-u);return f?gi(i,a-(t-c)):i}(t))}function y(t){return l=n,p&&r?m(t):(r=o=n,h)}function b(){var t=Ao(),i=g(t);if(r=arguments,o=this,u=t,i){if(l===n)return function(t){return c=t,l=Ts(v,e),d?m(t):h}(u);if(f)return bn(l),l=Ts(v,e),m(u)}return l===n&&(l=Ts(v,e)),h}return e=ma(e)||0,Jo(i)&&(d=!!i.leading,a=(f="maxWait"in i)?mi(ma(i.maxWait)||0,e):a,p="trailing"in i?!!i.trailing:p),b.cancel=function(){l!==n&&bn(l),c=0,r=u=o=l=n},b.flush=function(){return l===n?h:y(Ao())},b}var Io=Xr(function(t,e){return ar(t,1,e)}),ko=Xr(function(t,e,i){return ar(t,ma(e)||0,i)});function Bo(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new Tt(s);var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var o=t.apply(this,r);return i.cache=s.set(n,o)||s,o};return i.cache=new(Bo.Cache||Hi),i}function Oo(t){if("function"!=typeof t)throw new Tt(s);return function(){var e=arguments;switch(e.length){case 0:return!t.call(this);case 1:return!t.call(this,e[0]);case 2:return!t.call(this,e[0],e[1]);case 3:return!t.call(this,e[0],e[1],e[2])}return!t.apply(this,e)}}Bo.Cache=Hi;var Lo=vn(function(t,e){var i=(e=1==e.length&&Vo(e[0])?Ie(e[0],Ze(ss())):Ie(pr(e,1),Ze(ss()))).length;return Xr(function(r){for(var n=-1,s=gi(r.length,i);++n<s;)r[n]=e[n].call(this,r[n]);return Me(t,this,r)})}),Uo=Xr(function(t,e){var i=oi(e,ns(Uo));return Yn(t,h,n,e,i)}),Do=Xr(function(t,e){var i=oi(e,ns(Do));return Yn(t,64,n,e,i)}),No=Jn(function(t,e){return Yn(t,256,n,n,n,e)});function Fo(t,e){return t===e||t!=t&&e!=e}var zo=Vn(Mr),Go=Vn(function(t,e){return t>=e}),jo=Rr(function(){return arguments}())?Rr:function(t){return ta(t)&&Bt.call(t,"callee")&&!Xt.call(t,"callee")},Vo=r.isArray,Ho=ve?Ze(ve):function(t){return ta(t)&&wr(t)==I};function Wo(t){return null!=t&&Qo(t.length)&&!Ko(t)}function Xo(t){return ta(t)&&Wo(t)}var qo=ge||mh,Yo=ye?Ze(ye):function(t){return ta(t)&&wr(t)==y};function Zo(t){if(!ta(t))return!1;var e=wr(t);return e==b||"[object DOMException]"==e||"string"==typeof t.message&&"string"==typeof t.name&&!ra(t)}function Ko(t){if(!Jo(t))return!1;var e=wr(t);return e==_||e==x||"[object AsyncFunction]"==e||"[object Proxy]"==e}function $o(t){return"number"==typeof t&&t==fa(t)}function Qo(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=c}function Jo(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}function ta(t){return null!=t&&"object"==typeof t}var ea=be?Ze(be):function(t){return ta(t)&&cs(t)==w};function ia(t){return"number"==typeof t||ta(t)&&wr(t)==M}function ra(t){if(!ta(t)||wr(t)!=S)return!1;var e=Ht(t);if(null===e)return!0;var i=Bt.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&kt.call(i)==Dt}var na=_e?Ze(_e):function(t){return ta(t)&&wr(t)==E},sa=xe?Ze(xe):function(t){return ta(t)&&cs(t)==T};function oa(t){return"string"==typeof t||!Vo(t)&&ta(t)&&wr(t)==R}function aa(t){return"symbol"==typeof t||ta(t)&&wr(t)==P}var ha=we?Ze(we):function(t){return ta(t)&&Qo(t.length)&&!!ne[wr(t)]},la=Vn(Or),ua=Vn(function(t,e){return t<=e});function ca(t){if(!t)return[];if(Wo(t))return oa(t)?ui(t):En(t);if(Zt&&t[Zt])return function(t){for(var e,i=[];!(e=t.next()).done;)i.push(e.value);return i}(t[Zt]());var e=cs(t);return(e==w?ni:e==T?ai:Fa)(t)}function da(t){return t?(t=ma(t))===u||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}function fa(t){var e=da(t),i=e%1;return e==e?i?e-i:e:0}function pa(t){return t?nr(fa(t),0,f):0}function ma(t){if("number"==typeof t)return t;if(aa(t))return d;if(Jo(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=Jo(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=Ye(t);var i=pt.test(t);return i||gt.test(t)?he(t.slice(2),i?2:8):ft.test(t)?d:+t}function ga(t){return Tn(t,Ia(t))}function va(t){return null==t?"":on(t)}var ya=Pn(function(t,e){if(_s(e)||Wo(e))Tn(e,Ca(e),t);else for(var i in e)Bt.call(e,i)&&Qi(t,i,e[i])}),ba=Pn(function(t,e){Tn(e,Ia(e),t)}),_a=Pn(function(t,e,i,r){Tn(e,Ia(e),t,r)}),xa=Pn(function(t,e,i,r){Tn(e,Ca(e),t,r)}),wa=Jn(rr),Ma=Xr(function(t,e){t=St(t);var i=-1,r=e.length,s=r>2?e[2]:n;for(s&&gs(e[0],e[1],s)&&(r=1);++i<r;)for(var o=e[i],a=Ia(o),h=-1,l=a.length;++h<l;){var u=a[h],c=t[u];(c===n||Fo(c,Ct[u])&&!Bt.call(t,u))&&(t[u]=o[u])}return t}),Sa=Xr(function(t){return t.push(n,Kn),Me(Ba,n,t)});function Aa(t,e,i){var r=null==t?n:_r(t,e);return r===n?i:r}function Ea(t,e){return null!=t&&ds(t,e,Ar)}var Ta=Nn(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),t[e]=i},Ja(ih)),Ra=Nn(function(t,e,i){null!=e&&"function"!=typeof e.toString&&(e=Ut.call(e)),Bt.call(t,e)?t[e].push(i):t[e]=[i]},ss),Pa=Xr(Tr);function Ca(t){return Wo(t)?qi(t):Br(t)}function Ia(t){return Wo(t)?qi(t,!0):function(t){if(!Jo(t))return function(t){var e=[];if(null!=t)for(var i in St(t))e.push(i);return e}(t);var e=_s(t),i=[];for(var r in t)("constructor"!=r||!e&&Bt.call(t,r))&&i.push(r);return i}(t)}var ka=Pn(function(t,e,i){Nr(t,e,i)}),Ba=Pn(function(t,e,i,r){Nr(t,e,i,r)}),Oa=Jn(function(t,e){var i={};if(null==t)return i;var r=!1;e=Ie(e,function(e){return e=gn(e,t),r||(r=e.length>1),e}),Tn(t,es(t),i),r&&(i=sr(i,7,$n));for(var n=e.length;n--;)hn(i,e[n]);return i}),La=Jn(function(t,e){return null==t?{}:function(t,e){return Gr(t,e,function(e,i){return Ea(t,i)})}(t,e)});function Ua(t,e){if(null==t)return{};var i=Ie(es(t),function(t){return[t]});return e=ss(e),Gr(t,i,function(t,i){return e(t,i[0])})}var Da=qn(Ca),Na=qn(Ia);function Fa(t){return null==t?[]:Ke(t,Ca(t))}var za=Bn(function(t,e,i){return e=e.toLowerCase(),t+(i?Ga(e):e)});function Ga(t){return Za(va(t).toLowerCase())}function ja(t){return(t=va(t))&&t.replace(yt,ti).replace($t,"")}var Va=Bn(function(t,e,i){return t+(i?"-":"")+e.toLowerCase()}),Ha=Bn(function(t,e,i){return t+(i?" ":"")+e.toLowerCase()}),Wa=kn("toLowerCase"),Xa=Bn(function(t,e,i){return t+(i?"_":"")+e.toLowerCase()}),qa=Bn(function(t,e,i){return t+(i?" ":"")+Za(e)}),Ya=Bn(function(t,e,i){return t+(i?" ":"")+e.toUpperCase()}),Za=kn("toUpperCase");function Ka(t,e,i){return t=va(t),(e=i?n:e)===n?function(t){return ee.test(t)}(t)?function(t){return t.match(Jt)||[]}(t):function(t){return t.match(ht)||[]}(t):t.match(e)||[]}var $a=Xr(function(t,e){try{return Me(t,n,e)}catch(t){return Zo(t)?t:new xt(t)}}),Qa=Jn(function(t,e){return Ae(e,function(e){e=Ls(e),ir(t,e,Ro(t[e],t))}),t});function Ja(t){return function(){return t}}var th=Un(),eh=Un(!0);function ih(t){return t}function rh(t){return kr("function"==typeof t?t:sr(t,1))}var nh=Xr(function(t,e){return function(i){return Tr(i,t,e)}}),sh=Xr(function(t,e){return function(i){return Tr(t,i,e)}});function oh(t,e,i){var r=Ca(e),n=br(e,r);null!=i||Jo(e)&&(n.length||!r.length)||(i=e,e=t,t=this,n=br(e,Ca(e)));var s=!(Jo(i)&&"chain"in i&&!i.chain),o=Ko(t);return Ae(n,function(i){var r=e[i];t[i]=r,o&&(t.prototype[i]=function(){var e=this.__chain__;if(s||e){var i=t(this.__wrapped__);return(i.__actions__=En(this.__actions__)).push({func:r,args:arguments,thisArg:t}),i.__chain__=e,i}return r.apply(t,ke([this.value()],arguments))})}),t}function ah(){}var hh=zn(Ie),lh=zn(Te),uh=zn(Le);function ch(t){return vs(t)?Ve(Ls(t)):function(t){return function(e){return _r(e,t)}}(t)}var dh=jn(),fh=jn(!0);function ph(){return[]}function mh(){return!1}var gh,vh=Fn(function(t,e){return t+e},0),yh=Wn("ceil"),bh=Fn(function(t,e){return t/e},1),_h=Wn("floor"),xh=Fn(function(t,e){return t*e},1),wh=Wn("round"),Mh=Fn(function(t,e){return t-e},0);return Di.after=function(t,e){if("function"!=typeof e)throw new Tt(s);return t=fa(t),function(){if(--t<1)return e.apply(this,arguments)}},Di.ary=Eo,Di.assign=ya,Di.assignIn=ba,Di.assignInWith=_a,Di.assignWith=xa,Di.at=wa,Di.before=To,Di.bind=Ro,Di.bindAll=Qa,Di.bindKey=Po,Di.castArray=function(){if(!arguments.length)return[];var t=arguments[0];return Vo(t)?t:[t]},Di.chain=uo,Di.chunk=function(t,e,i){e=(i?gs(t,e,i):e===n)?1:mi(fa(e),0);var s=null==t?0:t.length;if(!s||e<1)return[];for(var o=0,a=0,h=r(de(s/e));o<s;)h[a++]=Jr(t,o,o+=e);return h},Di.compact=function(t){for(var e=-1,i=null==t?0:t.length,r=0,n=[];++e<i;){var s=t[e];s&&(n[r++]=s)}return n},Di.concat=function(){var t=arguments.length;if(!t)return[];for(var e=r(t-1),i=arguments[0],n=t;n--;)e[n-1]=arguments[n];return ke(Vo(i)?En(i):[i],pr(e,1))},Di.cond=function(t){var e=null==t?0:t.length,i=ss();return t=e?Ie(t,function(t){if("function"!=typeof t[1])throw new Tt(s);return[i(t[0]),t[1]]}):[],Xr(function(i){for(var r=-1;++r<e;){var n=t[r];if(Me(n[0],this,i))return Me(n[1],this,i)}})},Di.conforms=function(t){return function(t){var e=Ca(t);return function(i){return or(i,t,e)}}(sr(t,1))},Di.constant=Ja,Di.countBy=po,Di.create=function(t,e){var i=Ni(t);return null==e?i:er(i,e)},Di.curry=function t(e,i,r){var s=Yn(e,8,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},Di.curryRight=function t(e,i,r){var s=Yn(e,16,n,n,n,n,n,i=r?n:i);return s.placeholder=t.placeholder,s},Di.debounce=Co,Di.defaults=Ma,Di.defaultsDeep=Sa,Di.defer=Io,Di.delay=ko,Di.difference=Ns,Di.differenceBy=Fs,Di.differenceWith=zs,Di.drop=function(t,e,i){var r=null==t?0:t.length;return r?Jr(t,(e=i||e===n?1:fa(e))<0?0:e,r):[]},Di.dropRight=function(t,e,i){var r=null==t?0:t.length;return r?Jr(t,0,(e=r-(e=i||e===n?1:fa(e)))<0?0:e):[]},Di.dropRightWhile=function(t,e){return t&&t.length?un(t,ss(e,3),!0,!0):[]},Di.dropWhile=function(t,e){return t&&t.length?un(t,ss(e,3),!0):[]},Di.fill=function(t,e,i,r){var s=null==t?0:t.length;return s?(i&&"number"!=typeof i&&gs(t,e,i)&&(i=0,r=s),function(t,e,i,r){var s=t.length;for((i=fa(i))<0&&(i=-i>s?0:s+i),(r=r===n||r>s?s:fa(r))<0&&(r+=s),r=i>r?0:pa(r);i<r;)t[i++]=e;return t}(t,e,i,r)):[]},Di.filter=function(t,e){return(Vo(t)?Re:fr)(t,ss(e,3))},Di.flatMap=function(t,e){return pr(wo(t,e),1)},Di.flatMapDeep=function(t,e){return pr(wo(t,e),u)},Di.flatMapDepth=function(t,e,i){return i=i===n?1:fa(i),pr(wo(t,e),i)},Di.flatten=Vs,Di.flattenDeep=function(t){return null!=t&&t.length?pr(t,u):[]},Di.flattenDepth=function(t,e){return null!=t&&t.length?pr(t,e=e===n?1:fa(e)):[]},Di.flip=function(t){return Yn(t,512)},Di.flow=th,Di.flowRight=eh,Di.fromPairs=function(t){for(var e=-1,i=null==t?0:t.length,r={};++e<i;){var n=t[e];r[n[0]]=n[1]}return r},Di.functions=function(t){return null==t?[]:br(t,Ca(t))},Di.functionsIn=function(t){return null==t?[]:br(t,Ia(t))},Di.groupBy=bo,Di.initial=function(t){return null!=t&&t.length?Jr(t,0,-1):[]},Di.intersection=Ws,Di.intersectionBy=Xs,Di.intersectionWith=qs,Di.invert=Ta,Di.invertBy=Ra,Di.invokeMap=_o,Di.iteratee=rh,Di.keyBy=xo,Di.keys=Ca,Di.keysIn=Ia,Di.map=wo,Di.mapKeys=function(t,e){var i={};return e=ss(e,3),vr(t,function(t,r,n){ir(i,e(t,r,n),t)}),i},Di.mapValues=function(t,e){var i={};return e=ss(e,3),vr(t,function(t,r,n){ir(i,r,e(t,r,n))}),i},Di.matches=function(t){return Ur(sr(t,1))},Di.matchesProperty=function(t,e){return Dr(t,sr(e,1))},Di.memoize=Bo,Di.merge=ka,Di.mergeWith=Ba,Di.method=nh,Di.methodOf=sh,Di.mixin=oh,Di.negate=Oo,Di.nthArg=function(t){return t=fa(t),Xr(function(e){return Fr(e,t)})},Di.omit=Oa,Di.omitBy=function(t,e){return Ua(t,Oo(ss(e)))},Di.once=function(t){return To(2,t)},Di.orderBy=function(t,e,i,r){return null==t?[]:(Vo(e)||(e=null==e?[]:[e]),Vo(i=r?n:i)||(i=null==i?[]:[i]),zr(t,e,i))},Di.over=hh,Di.overArgs=Lo,Di.overEvery=lh,Di.overSome=uh,Di.partial=Uo,Di.partialRight=Do,Di.partition=Mo,Di.pick=La,Di.pickBy=Ua,Di.property=ch,Di.propertyOf=function(t){return function(e){return null==t?n:_r(t,e)}},Di.pull=Zs,Di.pullAll=Ks,Di.pullAllBy=function(t,e,i){return t&&t.length&&e&&e.length?jr(t,e,ss(i,2)):t},Di.pullAllWith=function(t,e,i){return t&&t.length&&e&&e.length?jr(t,e,n,i):t},Di.pullAt=$s,Di.range=dh,Di.rangeRight=fh,Di.rearg=No,Di.reject=function(t,e){return(Vo(t)?Re:fr)(t,Oo(ss(e,3)))},Di.remove=function(t,e){var i=[];if(!t||!t.length)return i;var r=-1,n=[],s=t.length;for(e=ss(e,3);++r<s;){var o=t[r];e(o,r,t)&&(i.push(o),n.push(r))}return Vr(t,n),i},Di.rest=function(t,e){if("function"!=typeof t)throw new Tt(s);return Xr(t,e=e===n?e:fa(e))},Di.reverse=Qs,Di.sampleSize=function(t,e,i){return e=(i?gs(t,e,i):e===n)?1:fa(e),(Vo(t)?Zi:Yr)(t,e)},Di.set=function(t,e,i){return null==t?t:Zr(t,e,i)},Di.setWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:Zr(t,e,i,r)},Di.shuffle=function(t){return(Vo(t)?Ki:Qr)(t)},Di.slice=function(t,e,i){var r=null==t?0:t.length;return r?(i&&"number"!=typeof i&&gs(t,e,i)?(e=0,i=r):(e=null==e?0:fa(e),i=i===n?r:fa(i)),Jr(t,e,i)):[]},Di.sortBy=So,Di.sortedUniq=function(t){return t&&t.length?nn(t):[]},Di.sortedUniqBy=function(t,e){return t&&t.length?nn(t,ss(e,2)):[]},Di.split=function(t,e,i){return i&&"number"!=typeof i&&gs(t,e,i)&&(e=i=n),(i=i===n?f:i>>>0)?(t=va(t))&&("string"==typeof e||null!=e&&!na(e))&&!(e=on(e))&&ri(t)?yn(ui(t),0,i):t.split(e,i):[]},Di.spread=function(t,e){if("function"!=typeof t)throw new Tt(s);return e=null==e?0:mi(fa(e),0),Xr(function(i){var r=i[e],n=yn(i,0,e);return r&&ke(n,r),Me(t,this,n)})},Di.tail=function(t){var e=null==t?0:t.length;return e?Jr(t,1,e):[]},Di.take=function(t,e,i){return t&&t.length?Jr(t,0,(e=i||e===n?1:fa(e))<0?0:e):[]},Di.takeRight=function(t,e,i){var r=null==t?0:t.length;return r?Jr(t,(e=r-(e=i||e===n?1:fa(e)))<0?0:e,r):[]},Di.takeRightWhile=function(t,e){return t&&t.length?un(t,ss(e,3),!1,!0):[]},Di.takeWhile=function(t,e){return t&&t.length?un(t,ss(e,3)):[]},Di.tap=function(t,e){return e(t),t},Di.throttle=function(t,e,i){var r=!0,n=!0;if("function"!=typeof t)throw new Tt(s);return Jo(i)&&(r="leading"in i?!!i.leading:r,n="trailing"in i?!!i.trailing:n),Co(t,e,{leading:r,maxWait:e,trailing:n})},Di.thru=co,Di.toArray=ca,Di.toPairs=Da,Di.toPairsIn=Na,Di.toPath=function(t){return Vo(t)?Ie(t,Ls):aa(t)?[t]:En(Os(va(t)))},Di.toPlainObject=ga,Di.transform=function(t,e,i){var r=Vo(t),n=r||qo(t)||ha(t);if(e=ss(e,4),null==i){var s=t&&t.constructor;i=n?r?new s:[]:Jo(t)&&Ko(s)?Ni(Ht(t)):{}}return(n?Ae:vr)(t,function(t,r,n){return e(i,t,r,n)}),i},Di.unary=function(t){return Eo(t,1)},Di.union=Js,Di.unionBy=to,Di.unionWith=eo,Di.uniq=function(t){return t&&t.length?an(t):[]},Di.uniqBy=function(t,e){return t&&t.length?an(t,ss(e,2)):[]},Di.uniqWith=function(t,e){return e="function"==typeof e?e:n,t&&t.length?an(t,n,e):[]},Di.unset=function(t,e){return null==t||hn(t,e)},Di.unzip=io,Di.unzipWith=ro,Di.update=function(t,e,i){return null==t?t:ln(t,e,mn(i))},Di.updateWith=function(t,e,i,r){return r="function"==typeof r?r:n,null==t?t:ln(t,e,mn(i),r)},Di.values=Fa,Di.valuesIn=function(t){return null==t?[]:Ke(t,Ia(t))},Di.without=no,Di.words=Ka,Di.wrap=function(t,e){return Uo(mn(e),t)},Di.xor=so,Di.xorBy=oo,Di.xorWith=ao,Di.zip=ho,Di.zipObject=function(t,e){return fn(t||[],e||[],Qi)},Di.zipObjectDeep=function(t,e){return fn(t||[],e||[],Zr)},Di.zipWith=lo,Di.entries=Da,Di.entriesIn=Na,Di.extend=ba,Di.extendWith=_a,oh(Di,Di),Di.add=vh,Di.attempt=$a,Di.camelCase=za,Di.capitalize=Ga,Di.ceil=yh,Di.clamp=function(t,e,i){return i===n&&(i=e,e=n),i!==n&&(i=(i=ma(i))==i?i:0),e!==n&&(e=(e=ma(e))==e?e:0),nr(ma(t),e,i)},Di.clone=function(t){return sr(t,4)},Di.cloneDeep=function(t){return sr(t,5)},Di.cloneDeepWith=function(t,e){return sr(t,5,e="function"==typeof e?e:n)},Di.cloneWith=function(t,e){return sr(t,4,e="function"==typeof e?e:n)},Di.conformsTo=function(t,e){return null==e||or(t,e,Ca(e))},Di.deburr=ja,Di.defaultTo=function(t,e){return null==t||t!=t?e:t},Di.divide=bh,Di.endsWith=function(t,e,i){t=va(t),e=on(e);var r=t.length,s=i=i===n?r:nr(fa(i),0,r);return(i-=e.length)>=0&&t.slice(i,s)==e},Di.eq=Fo,Di.escape=function(t){return(t=va(t))&&Y.test(t)?t.replace(X,ei):t},Di.escapeRegExp=function(t){return(t=va(t))&&it.test(t)?t.replace(et,"\\$&"):t},Di.every=function(t,e,i){var r=Vo(t)?Te:cr;return i&&gs(t,e,i)&&(e=n),r(t,ss(e,3))},Di.find=mo,Di.findIndex=Gs,Di.findKey=function(t,e){return De(t,ss(e,3),vr)},Di.findLast=go,Di.findLastIndex=js,Di.findLastKey=function(t,e){return De(t,ss(e,3),yr)},Di.floor=_h,Di.forEach=vo,Di.forEachRight=yo,Di.forIn=function(t,e){return null==t?t:mr(t,ss(e,3),Ia)},Di.forInRight=function(t,e){return null==t?t:gr(t,ss(e,3),Ia)},Di.forOwn=function(t,e){return t&&vr(t,ss(e,3))},Di.forOwnRight=function(t,e){return t&&yr(t,ss(e,3))},Di.get=Aa,Di.gt=zo,Di.gte=Go,Di.has=function(t,e){return null!=t&&ds(t,e,Sr)},Di.hasIn=Ea,Di.head=Hs,Di.identity=ih,Di.includes=function(t,e,i,r){t=Wo(t)?t:Fa(t),i=i&&!r?fa(i):0;var n=t.length;return i<0&&(i=mi(n+i,0)),oa(t)?i<=n&&t.indexOf(e,i)>-1:!!n&&Fe(t,e,i)>-1},Di.indexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var n=null==i?0:fa(i);return n<0&&(n=mi(r+n,0)),Fe(t,e,n)},Di.inRange=function(t,e,i){return e=da(e),i===n?(i=e,e=0):i=da(i),function(t,e,i){return t>=gi(e,i)&&t<mi(e,i)}(t=ma(t),e,i)},Di.invoke=Pa,Di.isArguments=jo,Di.isArray=Vo,Di.isArrayBuffer=Ho,Di.isArrayLike=Wo,Di.isArrayLikeObject=Xo,Di.isBoolean=function(t){return!0===t||!1===t||ta(t)&&wr(t)==v},Di.isBuffer=qo,Di.isDate=Yo,Di.isElement=function(t){return ta(t)&&1===t.nodeType&&!ra(t)},Di.isEmpty=function(t){if(null==t)return!0;if(Wo(t)&&(Vo(t)||"string"==typeof t||"function"==typeof t.splice||qo(t)||ha(t)||jo(t)))return!t.length;var e=cs(t);if(e==w||e==T)return!t.size;if(_s(t))return!Br(t).length;for(var i in t)if(Bt.call(t,i))return!1;return!0},Di.isEqual=function(t,e){return Pr(t,e)},Di.isEqualWith=function(t,e,i){var r=(i="function"==typeof i?i:n)?i(t,e):n;return r===n?Pr(t,e,n,i):!!r},Di.isError=Zo,Di.isFinite=function(t){return"number"==typeof t&&Ue(t)},Di.isFunction=Ko,Di.isInteger=$o,Di.isLength=Qo,Di.isMap=ea,Di.isMatch=function(t,e){return t===e||Cr(t,e,as(e))},Di.isMatchWith=function(t,e,i){return i="function"==typeof i?i:n,Cr(t,e,as(e),i)},Di.isNaN=function(t){return ia(t)&&t!=+t},Di.isNative=function(t){if(bs(t))throw new xt("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ir(t)},Di.isNil=function(t){return null==t},Di.isNull=function(t){return null===t},Di.isNumber=ia,Di.isObject=Jo,Di.isObjectLike=ta,Di.isPlainObject=ra,Di.isRegExp=na,Di.isSafeInteger=function(t){return $o(t)&&t>=-9007199254740991&&t<=c},Di.isSet=sa,Di.isString=oa,Di.isSymbol=aa,Di.isTypedArray=ha,Di.isUndefined=function(t){return t===n},Di.isWeakMap=function(t){return ta(t)&&cs(t)==C},Di.isWeakSet=function(t){return ta(t)&&"[object WeakSet]"==wr(t)},Di.join=function(t,e){return null==t?"":He.call(t,e)},Di.kebabCase=Va,Di.last=Ys,Di.lastIndexOf=function(t,e,i){var r=null==t?0:t.length;if(!r)return-1;var s=r;return i!==n&&(s=(s=fa(i))<0?mi(r+s,0):gi(s,r-1)),e==e?function(t,e,i){for(var r=i+1;r--;)if(t[r]===e)return r;return r}(t,e,s):Ne(t,Ge,s,!0)},Di.lowerCase=Ha,Di.lowerFirst=Wa,Di.lt=la,Di.lte=ua,Di.max=function(t){return t&&t.length?dr(t,ih,Mr):n},Di.maxBy=function(t,e){return t&&t.length?dr(t,ss(e,2),Mr):n},Di.mean=function(t){return je(t,ih)},Di.meanBy=function(t,e){return je(t,ss(e,2))},Di.min=function(t){return t&&t.length?dr(t,ih,Or):n},Di.minBy=function(t,e){return t&&t.length?dr(t,ss(e,2),Or):n},Di.stubArray=ph,Di.stubFalse=mh,Di.stubObject=function(){return{}},Di.stubString=function(){return""},Di.stubTrue=function(){return!0},Di.multiply=xh,Di.nth=function(t,e){return t&&t.length?Fr(t,fa(e)):n},Di.noConflict=function(){return ce._===this&&(ce._=Nt),this},Di.noop=ah,Di.now=Ao,Di.pad=function(t,e,i){t=va(t);var r=(e=fa(e))?li(t):0;if(!e||r>=e)return t;var n=(e-r)/2;return Gn(fe(n),i)+t+Gn(de(n),i)},Di.padEnd=function(t,e,i){t=va(t);var r=(e=fa(e))?li(t):0;return e&&r<e?t+Gn(e-r,i):t},Di.padStart=function(t,e,i){t=va(t);var r=(e=fa(e))?li(t):0;return e&&r<e?Gn(e-r,i)+t:t},Di.parseInt=function(t,e,i){return i||null==e?e=0:e&&(e=+e),yi(va(t).replace(rt,""),e||0)},Di.random=function(t,e,i){if(i&&"boolean"!=typeof i&&gs(t,e,i)&&(e=i=n),i===n&&("boolean"==typeof e?(i=e,e=n):"boolean"==typeof t&&(i=t,t=n)),t===n&&e===n?(t=0,e=1):(t=da(t),e===n?(e=t,t=0):e=da(e)),t>e){var r=t;t=e,e=r}if(i||t%1||e%1){var s=bi();return gi(t+s*(e-t+ae("1e-"+((s+"").length-1))),e)}return Hr(t,e)},Di.reduce=function(t,e,i){var r=Vo(t)?Be:We,n=arguments.length<3;return r(t,ss(e,4),i,n,lr)},Di.reduceRight=function(t,e,i){var r=Vo(t)?Oe:We,n=arguments.length<3;return r(t,ss(e,4),i,n,ur)},Di.repeat=function(t,e,i){return e=(i?gs(t,e,i):e===n)?1:fa(e),Wr(va(t),e)},Di.replace=function(){var t=arguments,e=va(t[0]);return t.length<3?e:e.replace(t[1],t[2])},Di.result=function(t,e,i){var r=-1,s=(e=gn(e,t)).length;for(s||(s=1,t=n);++r<s;){var o=null==t?n:t[Ls(e[r])];o===n&&(r=s,o=i),t=Ko(o)?o.call(t):o}return t},Di.round=wh,Di.runInContext=t,Di.sample=function(t){return(Vo(t)?Yi:qr)(t)},Di.size=function(t){if(null==t)return 0;if(Wo(t))return oa(t)?li(t):t.length;var e=cs(t);return e==w||e==T?t.size:Br(t).length},Di.snakeCase=Xa,Di.some=function(t,e,i){var r=Vo(t)?Le:tn;return i&&gs(t,e,i)&&(e=n),r(t,ss(e,3))},Di.sortedIndex=function(t,e){return en(t,e)},Di.sortedIndexBy=function(t,e,i){return rn(t,e,ss(i,2))},Di.sortedIndexOf=function(t,e){var i=null==t?0:t.length;if(i){var r=en(t,e);if(r<i&&Fo(t[r],e))return r}return-1},Di.sortedLastIndex=function(t,e){return en(t,e,!0)},Di.sortedLastIndexBy=function(t,e,i){return rn(t,e,ss(i,2),!0)},Di.sortedLastIndexOf=function(t,e){if(null!=t&&t.length){var i=en(t,e,!0)-1;if(Fo(t[i],e))return i}return-1},Di.startCase=qa,Di.startsWith=function(t,e,i){return t=va(t),i=null==i?0:nr(fa(i),0,t.length),e=on(e),t.slice(i,i+e.length)==e},Di.subtract=Mh,Di.sum=function(t){return t&&t.length?Xe(t,ih):0},Di.sumBy=function(t,e){return t&&t.length?Xe(t,ss(e,2)):0},Di.template=function(t,e,i){var r=Di.templateSettings;i&&gs(t,e,i)&&(e=n),t=va(t),e=_a({},e,r,Zn);var s,o,a=_a({},e.imports,r.imports,Zn),h=Ca(a),l=Ke(a,h),u=0,c=e.interpolate||bt,d="__p += '",f=At((e.escape||bt).source+"|"+c.source+"|"+(c===$?ct:bt).source+"|"+(e.evaluate||bt).source+"|$","g"),p="//# sourceURL="+(Bt.call(e,"sourceURL")?(e.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++re+"]")+"\n";t.replace(f,function(e,i,r,n,a,h){return r||(r=n),d+=t.slice(u,h).replace(_t,ii),i&&(s=!0,d+="' +\n__e("+i+") +\n'"),a&&(o=!0,d+="';\n"+a+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=h+e.length,e}),d+="';\n";var m=Bt.call(e,"variable")&&e.variable;if(m){if(lt.test(m))throw new xt("Invalid `variable` option passed into `_.template`")}else d="with (obj) {\n"+d+"\n}\n";d=(o?d.replace(j,""):d).replace(V,"$1").replace(H,"$1;"),d="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(s?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=$a(function(){return wt(h,p+"return "+d).apply(n,l)});if(g.source=d,Zo(g))throw g;return g},Di.times=function(t,e){if((t=fa(t))<1||t>c)return[];var i=f,r=gi(t,f);e=ss(e),t-=f;for(var n=qe(r,e);++i<t;)e(i);return n},Di.toFinite=da,Di.toInteger=fa,Di.toLength=pa,Di.toLower=function(t){return va(t).toLowerCase()},Di.toNumber=ma,Di.toSafeInteger=function(t){return t?nr(fa(t),-9007199254740991,c):0===t?t:0},Di.toString=va,Di.toUpper=function(t){return va(t).toUpperCase()},Di.trim=function(t,e,i){if((t=va(t))&&(i||e===n))return Ye(t);if(!t||!(e=on(e)))return t;var r=ui(t),s=ui(e);return yn(r,Qe(r,s),Je(r,s)+1).join("")},Di.trimEnd=function(t,e,i){if((t=va(t))&&(i||e===n))return t.slice(0,ci(t)+1);if(!t||!(e=on(e)))return t;var r=ui(t);return yn(r,0,Je(r,ui(e))+1).join("")},Di.trimStart=function(t,e,i){if((t=va(t))&&(i||e===n))return t.replace(rt,"");if(!t||!(e=on(e)))return t;var r=ui(t);return yn(r,Qe(r,ui(e))).join("")},Di.truncate=function(t,e){var i=30,r="...";if(Jo(e)){var s="separator"in e?e.separator:s;i="length"in e?fa(e.length):i,r="omission"in e?on(e.omission):r}var o=(t=va(t)).length;if(ri(t)){var a=ui(t);o=a.length}if(i>=o)return t;var h=i-li(r);if(h<1)return r;var l=a?yn(a,0,h).join(""):t.slice(0,h);if(s===n)return l+r;if(a&&(h+=l.length-h),na(s)){if(t.slice(h).search(s)){var u,c=l;for(s.global||(s=At(s.source,va(dt.exec(s))+"g")),s.lastIndex=0;u=s.exec(c);)var d=u.index;l=l.slice(0,d===n?h:d)}}else if(t.indexOf(on(s),h)!=h){var f=l.lastIndexOf(s);f>-1&&(l=l.slice(0,f))}return l+r},Di.unescape=function(t){return(t=va(t))&&q.test(t)?t.replace(W,di):t},Di.uniqueId=function(t){var e=++Ot;return va(t)+e},Di.upperCase=Ya,Di.upperFirst=Za,Di.each=vo,Di.eachRight=yo,Di.first=Hs,oh(Di,(gh={},vr(Di,function(t,e){Bt.call(Di.prototype,e)||(gh[e]=t)}),gh),{chain:!1}),Di.VERSION="4.17.21",Ae(["bind","bindKey","curry","curryRight","partial","partialRight"],function(t){Di[t].placeholder=Di}),Ae(["drop","take"],function(t,e){Gi.prototype[t]=function(i){i=i===n?1:mi(fa(i),0);var r=this.__filtered__&&!e?new Gi(this):this.clone();return r.__filtered__?r.__takeCount__=gi(i,r.__takeCount__):r.__views__.push({size:gi(i,f),type:t+(r.__dir__<0?"Right":"")}),r},Gi.prototype[t+"Right"]=function(e){return this.reverse()[t](e).reverse()}}),Ae(["filter","map","takeWhile"],function(t,e){var i=e+1,r=1==i||3==i;Gi.prototype[t]=function(t){var e=this.clone();return e.__iteratees__.push({iteratee:ss(t,3),type:i}),e.__filtered__=e.__filtered__||r,e}}),Ae(["head","last"],function(t,e){var i="take"+(e?"Right":"");Gi.prototype[t]=function(){return this[i](1).value()[0]}}),Ae(["initial","tail"],function(t,e){var i="drop"+(e?"":"Right");Gi.prototype[t]=function(){return this.__filtered__?new Gi(this):this[i](1)}}),Gi.prototype.compact=function(){return this.filter(ih)},Gi.prototype.find=function(t){return this.filter(t).head()},Gi.prototype.findLast=function(t){return this.reverse().find(t)},Gi.prototype.invokeMap=Xr(function(t,e){return"function"==typeof t?new Gi(this):this.map(function(i){return Tr(i,t,e)})}),Gi.prototype.reject=function(t){return this.filter(Oo(ss(t)))},Gi.prototype.slice=function(t,e){t=fa(t);var i=this;return i.__filtered__&&(t>0||e<0)?new Gi(i):(t<0?i=i.takeRight(-t):t&&(i=i.drop(t)),e!==n&&(i=(e=fa(e))<0?i.dropRight(-e):i.take(e-t)),i)},Gi.prototype.takeRightWhile=function(t){return this.reverse().takeWhile(t).reverse()},Gi.prototype.toArray=function(){return this.take(f)},vr(Gi.prototype,function(t,e){var i=/^(?:filter|find|map|reject)|While$/.test(e),r=/^(?:head|last)$/.test(e),s=Di[r?"take"+("last"==e?"Right":""):e],o=r||/^find/.test(e);s&&(Di.prototype[e]=function(){var e=this.__wrapped__,a=r?[1]:arguments,h=e instanceof Gi,l=a[0],u=h||Vo(e),c=function(t){var e=s.apply(Di,ke([t],a));return r&&d?e[0]:e};u&&i&&"function"==typeof l&&1!=l.length&&(h=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=o&&!d,m=h&&!f;if(!o&&u){e=m?e:new Gi(this);var g=t.apply(e,a);return g.__actions__.push({func:co,args:[c],thisArg:n}),new zi(g,d)}return p&&m?t.apply(this,a):(g=this.thru(c),p?r?g.value()[0]:g.value():g)})}),Ae(["pop","push","shift","sort","splice","unshift"],function(t){var e=Rt[t],i=/^(?:push|sort|unshift)$/.test(t)?"tap":"thru",r=/^(?:pop|shift)$/.test(t);Di.prototype[t]=function(){var t=arguments;if(r&&!this.__chain__){var n=this.value();return e.apply(Vo(n)?n:[],t)}return this[i](function(i){return e.apply(Vo(i)?i:[],t)})}}),vr(Gi.prototype,function(t,e){var i=Di[e];if(i){var r=i.name+"";Bt.call(Ri,r)||(Ri[r]=[]),Ri[r].push({name:e,func:i})}}),Ri[Dn(n,2).name]=[{name:"wrapper",func:n}],Gi.prototype.clone=function(){var t=new Gi(this.__wrapped__);return t.__actions__=En(this.__actions__),t.__dir__=this.__dir__,t.__filtered__=this.__filtered__,t.__iteratees__=En(this.__iteratees__),t.__takeCount__=this.__takeCount__,t.__views__=En(this.__views__),t},Gi.prototype.reverse=function(){if(this.__filtered__){var t=new Gi(this);t.__dir__=-1,t.__filtered__=!0}else(t=this.clone()).__dir__*=-1;return t},Gi.prototype.value=function(){var t=this.__wrapped__.value(),e=this.__dir__,i=Vo(t),r=e<0,n=i?t.length:0,s=function(t,e,i){for(var r=-1,n=i.length;++r<n;){var s=i[r],o=s.size;switch(s.type){case"drop":t+=o;break;case"dropRight":e-=o;break;case"take":e=gi(e,t+o);break;case"takeRight":t=mi(t,e-o)}}return{start:t,end:e}}(0,n,this.__views__),o=s.start,a=s.end,h=a-o,l=r?a:o-1,u=this.__iteratees__,c=u.length,d=0,f=gi(h,this.__takeCount__);if(!i||!r&&n==h&&f==h)return cn(t,this.__actions__);var p=[];t:for(;h--&&d<f;){for(var m=-1,g=t[l+=e];++m<c;){var v=u[m],y=v.iteratee,b=v.type,_=y(g);if(2==b)g=_;else if(!_){if(1==b)continue t;break t}}p[d++]=g}return p},Di.prototype.at=fo,Di.prototype.chain=function(){return uo(this)},Di.prototype.commit=function(){return new zi(this.value(),this.__chain__)},Di.prototype.next=function(){this.__values__===n&&(this.__values__=ca(this.value()));var t=this.__index__>=this.__values__.length;return{done:t,value:t?n:this.__values__[this.__index__++]}},Di.prototype.plant=function(t){for(var e,i=this;i instanceof Fi;){var r=Ds(i);r.__index__=0,r.__values__=n,e?s.__wrapped__=r:e=r;var s=r;i=i.__wrapped__}return s.__wrapped__=t,e},Di.prototype.reverse=function(){var t=this.__wrapped__;if(t instanceof Gi){var e=t;return this.__actions__.length&&(e=new Gi(this)),(e=e.reverse()).__actions__.push({func:co,args:[Qs],thisArg:n}),new zi(e,this.__chain__)}return this.thru(Qs)},Di.prototype.toJSON=Di.prototype.valueOf=Di.prototype.value=function(){return cn(this.__wrapped__,this.__actions__)},Di.prototype.first=Di.prototype.head,Zt&&(Di.prototype[Zt]=function(){return this}),Di}();ce._=fi,(r=function(){return fi}.call(e,i,e,t))===n||(t.exports=r)}.call(this)},2577:(t,e,i)=>{"use strict";i.d(e,{Q:()=>I});var r={grad:.9,turn:360,rad:360/(2*Math.PI)},n=function(t){return"string"==typeof t?t.length>0:"number"==typeof t},s=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=Math.pow(10,e)),Math.round(i*t)/i+0},o=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t>i?i:t>e?t:e},a=function(t){return(t=isFinite(t)?t%360:0)>0?t:t+360},h=function(t){return{r:o(t.r,0,255),g:o(t.g,0,255),b:o(t.b,0,255),a:o(t.a)}},l=function(t){return{r:s(t.r),g:s(t.g),b:s(t.b),a:s(t.a,3)}},u=/^#([0-9a-f]{3,8})$/i,c=function(t){var e=t.toString(16);return e.length<2?"0"+e:e},d=function(t){var e=t.r,i=t.g,r=t.b,n=t.a,s=Math.max(e,i,r),o=s-Math.min(e,i,r),a=o?s===e?(i-r)/o:s===i?2+(r-e)/o:4+(e-i)/o:0;return{h:60*(a<0?a+6:a),s:s?o/s*100:0,v:s/255*100,a:n}},f=function(t){var e=t.h,i=t.s,r=t.v,n=t.a;e=e/360*6,i/=100,r/=100;var s=Math.floor(e),o=r*(1-i),a=r*(1-(e-s)*i),h=r*(1-(1-e+s)*i),l=s%6;return{r:255*[r,a,o,o,h,r][l],g:255*[h,r,r,a,o,o][l],b:255*[o,o,h,r,r,a][l],a:n}},p=function(t){return{h:a(t.h),s:o(t.s,0,100),l:o(t.l,0,100),a:o(t.a)}},m=function(t){return{h:s(t.h),s:s(t.s),l:s(t.l),a:s(t.a,3)}},g=function(t){return f((i=(e=t).s,{h:e.h,s:(i*=((r=e.l)<50?r:100-r)/100)>0?2*i/(r+i)*100:0,v:r+i,a:e.a}));var e,i,r},v=function(t){return{h:(e=d(t)).h,s:(n=(200-(i=e.s))*(r=e.v)/100)>0&&n<200?i*r/100/(n<=100?n:200-n)*100:0,l:n/2,a:e.a};var e,i,r,n},y=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,b=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,_=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,x=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,w={string:[[function(t){var e=u.exec(t);return e?(t=e[1]).length<=4?{r:parseInt(t[0]+t[0],16),g:parseInt(t[1]+t[1],16),b:parseInt(t[2]+t[2],16),a:4===t.length?s(parseInt(t[3]+t[3],16)/255,2):1}:6===t.length||8===t.length?{r:parseInt(t.substr(0,2),16),g:parseInt(t.substr(2,2),16),b:parseInt(t.substr(4,2),16),a:8===t.length?s(parseInt(t.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(t){var e=_.exec(t)||x.exec(t);return e?e[2]!==e[4]||e[4]!==e[6]?null:h({r:Number(e[1])/(e[2]?100/255:1),g:Number(e[3])/(e[4]?100/255:1),b:Number(e[5])/(e[6]?100/255:1),a:void 0===e[7]?1:Number(e[7])/(e[8]?100:1)}):null},"rgb"],[function(t){var e=y.exec(t)||b.exec(t);if(!e)return null;var i,n,s=p({h:(i=e[1],n=e[2],void 0===n&&(n="deg"),Number(i)*(r[n]||1)),s:Number(e[3]),l:Number(e[4]),a:void 0===e[5]?1:Number(e[5])/(e[6]?100:1)});return g(s)},"hsl"]],object:[[function(t){var e=t.r,i=t.g,r=t.b,s=t.a,o=void 0===s?1:s;return n(e)&&n(i)&&n(r)?h({r:Number(e),g:Number(i),b:Number(r),a:Number(o)}):null},"rgb"],[function(t){var e=t.h,i=t.s,r=t.l,s=t.a,o=void 0===s?1:s;if(!n(e)||!n(i)||!n(r))return null;var a=p({h:Number(e),s:Number(i),l:Number(r),a:Number(o)});return g(a)},"hsl"],[function(t){var e=t.h,i=t.s,r=t.v,s=t.a,h=void 0===s?1:s;if(!n(e)||!n(i)||!n(r))return null;var l=function(t){return{h:a(t.h),s:o(t.s,0,100),v:o(t.v,0,100),a:o(t.a)}}({h:Number(e),s:Number(i),v:Number(r),a:Number(h)});return f(l)},"hsv"]]},M=function(t,e){for(var i=0;i<e.length;i++){var r=e[i][0](t);if(r)return[r,e[i][1]]}return[null,void 0]},S=function(t,e){var i=v(t);return{h:i.h,s:o(i.s+100*e,0,100),l:i.l,a:i.a}},A=function(t){return(299*t.r+587*t.g+114*t.b)/1e3/255},E=function(t,e){var i=v(t);return{h:i.h,s:i.s,l:o(i.l+100*e,0,100),a:i.a}},T=function(){function t(t){this.parsed=function(t){return"string"==typeof t?M(t.trim(),w.string):"object"==typeof t&&null!==t?M(t,w.object):[null,void 0]}(t)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return t.prototype.isValid=function(){return null!==this.parsed},t.prototype.brightness=function(){return s(A(this.rgba),2)},t.prototype.isDark=function(){return A(this.rgba)<.5},t.prototype.isLight=function(){return A(this.rgba)>=.5},t.prototype.toHex=function(){return e=(t=l(this.rgba)).r,i=t.g,r=t.b,o=(n=t.a)<1?c(s(255*n)):"","#"+c(e)+c(i)+c(r)+o;var t,e,i,r,n,o},t.prototype.toRgb=function(){return l(this.rgba)},t.prototype.toRgbString=function(){return e=(t=l(this.rgba)).r,i=t.g,r=t.b,(n=t.a)<1?"rgba("+e+", "+i+", "+r+", "+n+")":"rgb("+e+", "+i+", "+r+")";var t,e,i,r,n},t.prototype.toHsl=function(){return m(v(this.rgba))},t.prototype.toHslString=function(){return e=(t=m(v(this.rgba))).h,i=t.s,r=t.l,(n=t.a)<1?"hsla("+e+", "+i+"%, "+r+"%, "+n+")":"hsl("+e+", "+i+"%, "+r+"%)";var t,e,i,r,n},t.prototype.toHsv=function(){return t=d(this.rgba),{h:s(t.h),s:s(t.s),v:s(t.v),a:s(t.a,3)};var t},t.prototype.invert=function(){return R({r:255-(t=this.rgba).r,g:255-t.g,b:255-t.b,a:t.a});var t},t.prototype.saturate=function(t){return void 0===t&&(t=.1),R(S(this.rgba,t))},t.prototype.desaturate=function(t){return void 0===t&&(t=.1),R(S(this.rgba,-t))},t.prototype.grayscale=function(){return R(S(this.rgba,-1))},t.prototype.lighten=function(t){return void 0===t&&(t=.1),R(E(this.rgba,t))},t.prototype.darken=function(t){return void 0===t&&(t=.1),R(E(this.rgba,-t))},t.prototype.rotate=function(t){return void 0===t&&(t=15),this.hue(this.hue()+t)},t.prototype.alpha=function(t){return"number"==typeof t?R({r:(e=this.rgba).r,g:e.g,b:e.b,a:t}):s(this.rgba.a,3);var e},t.prototype.hue=function(t){var e=v(this.rgba);return"number"==typeof t?R({h:t,s:e.s,l:e.l,a:e.a}):s(e.h)},t.prototype.isEqual=function(t){return this.toHex()===R(t).toHex()},t}(),R=function(t){return t instanceof T?t:new T(t)},P=[];!function(t){t.forEach(function(t){P.indexOf(t)<0&&(t(T,w),P.push(t))})}([function(t,e){var i={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},r={};for(var n in i)r[i[n]]=n;var s={};t.prototype.toName=function(e){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var n,o,a=r[this.toHex()];if(a)return a;if(null==e?void 0:e.closest){var h=this.toRgb(),l=1/0,u="black";if(!s.length)for(var c in i)s[c]=new t(i[c]).toRgb();for(var d in i){var f=(n=h,o=s[d],Math.pow(n.r-o.r,2)+Math.pow(n.g-o.g,2)+Math.pow(n.b-o.b,2));f<l&&(l=f,u=d)}return u}},e.string.push([function(e){var r=e.toLowerCase(),n="transparent"===r?"#0000":i[r];return n?new t(n).toRgb():null},"name"])}]);const C=class t{constructor(t=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=t}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(t){return this.value=t,this}set value(e){if(e instanceof t)this._value=this._cloneSource(e._value),this._int=e._int,this._components.set(e._components);else{if(null===e)throw new Error("Cannot set Color#value to null");null!==this._value&&this._isSourceEqual(this._value,e)||(this._value=this._cloneSource(e),this._normalize(this._value))}}get value(){return this._value}_cloneSource(t){return"string"==typeof t||"number"==typeof t||t instanceof Number||null===t?t:Array.isArray(t)||ArrayBuffer.isView(t)?t.slice(0):"object"==typeof t&&null!==t?{...t}:t}_isSourceEqual(t,e){const i=typeof t;if(i!==typeof e)return!1;if("number"===i||"string"===i||t instanceof Number)return t===e;if(Array.isArray(t)&&Array.isArray(e)||ArrayBuffer.isView(t)&&ArrayBuffer.isView(e))return t.length===e.length&&t.every((t,i)=>t===e[i]);if(null!==t&&null!==e){const i=Object.keys(t),r=Object.keys(e);return i.length===r.length&&i.every(i=>t[i]===e[i])}return t===e}toRgba(){const[t,e,i,r]=this._components;return{r:t,g:e,b:i,a:r}}toRgb(){const[t,e,i]=this._components;return{r:t,g:e,b:i}}toRgbaString(){const[t,e,i]=this.toUint8RgbArray();return`rgba(${t},${e},${i},${this.alpha})`}toUint8RgbArray(t){const[e,i,r]=this._components;return this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb),t[0]=Math.round(255*e),t[1]=Math.round(255*i),t[2]=Math.round(255*r),t}toArray(t){this._arrayRgba||(this._arrayRgba=[]),t||(t=this._arrayRgba);const[e,i,r,n]=this._components;return t[0]=e,t[1]=i,t[2]=r,t[3]=n,t}toRgbArray(t){this._arrayRgb||(this._arrayRgb=[]),t||(t=this._arrayRgb);const[e,i,r]=this._components;return t[0]=e,t[1]=i,t[2]=r,t}toNumber(){return this._int}toBgrNumber(){const[t,e,i]=this.toUint8RgbArray();return(i<<16)+(e<<8)+t}toLittleEndianNumber(){const t=this._int;return(t>>16)+(65280&t)+((255&t)<<16)}multiply(e){const[i,r,n,s]=t._temp.setValue(e)._components;return this._components[0]*=i,this._components[1]*=r,this._components[2]*=n,this._components[3]*=s,this._refreshInt(),this._value=null,this}premultiply(t,e=!0){return e&&(this._components[0]*=t,this._components[1]*=t,this._components[2]*=t),this._components[3]=t,this._refreshInt(),this._value=null,this}toPremultiplied(t,e=!0){if(1===t)return(255<<24)+this._int;if(0===t)return e?0:this._int;let i=this._int>>16&255,r=this._int>>8&255,n=255&this._int;return e&&(i=i*t+.5|0,r=r*t+.5|0,n=n*t+.5|0),(255*t<<24)+(i<<16)+(r<<8)+n}toHex(){const t=this._int.toString(16);return`#${"000000".substring(0,6-t.length)+t}`}toHexa(){const t=Math.round(255*this._components[3]).toString(16);return this.toHex()+"00".substring(0,2-t.length)+t}setAlpha(t){return this._components[3]=this._clamp(t),this}_normalize(e){let i,r,n,s;if(("number"==typeof e||e instanceof Number)&&e>=0&&e<=16777215)i=(e>>16&255)/255,r=(e>>8&255)/255,n=(255&e)/255,s=1;else if((Array.isArray(e)||e instanceof Float32Array)&&e.length>=3&&e.length<=4)e=this._clamp(e),[i,r,n,s=1]=e;else if((e instanceof Uint8Array||e instanceof Uint8ClampedArray)&&e.length>=3&&e.length<=4)e=this._clamp(e,0,255),[i,r,n,s=255]=e,i/=255,r/=255,n/=255,s/=255;else if("string"==typeof e||"object"==typeof e){if("string"==typeof e){const i=t.HEX_PATTERN.exec(e);i&&(e=`#${i[2]}`)}const o=R(e);o.isValid()&&(({r:i,g:r,b:n,a:s}=o.rgba),i/=255,r/=255,n/=255)}if(void 0===i)throw new Error(`Unable to convert color ${e}`);this._components[0]=i,this._components[1]=r,this._components[2]=n,this._components[3]=s,this._refreshInt()}_refreshInt(){this._clamp(this._components);const[t,e,i]=this._components;this._int=(255*t<<16)+(255*e<<8)+(255*i|0)}_clamp(t,e=0,i=1){return"number"==typeof t?Math.min(Math.max(t,e),i):(t.forEach((r,n)=>{t[n]=Math.min(Math.max(r,e),i)}),t)}static isColorLike(e){return"number"==typeof e||"string"==typeof e||e instanceof Number||e instanceof t||Array.isArray(e)||e instanceof Uint8Array||e instanceof Uint8ClampedArray||e instanceof Float32Array||void 0!==e.r&&void 0!==e.g&&void 0!==e.b||void 0!==e.r&&void 0!==e.g&&void 0!==e.b&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.l||void 0!==e.h&&void 0!==e.s&&void 0!==e.l&&void 0!==e.a||void 0!==e.h&&void 0!==e.s&&void 0!==e.v||void 0!==e.h&&void 0!==e.s&&void 0!==e.v&&void 0!==e.a}};C.shared=new C,C._temp=new C,C.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let I=C},2632:(t,e)=>{e.encrypt=function(t,e){return t._cipher.encryptBlock(e)},e.decrypt=function(t,e){return t._cipher.decryptBlock(e)}},2668:()=>{},2682:(t,e,i)=>{"use strict";var r=i(9600),n=Object.prototype.toString,s=Object.prototype.hasOwnProperty;t.exports=function(t,e,i){if(!r(e))throw new TypeError("iterator must be a function");var o,a;arguments.length>=3&&(o=i),a=t,"[object Array]"===n.call(a)?function(t,e,i){for(var r=0,n=t.length;r<n;r++)s.call(t,r)&&(null==i?e(t[r],r,t):e.call(i,t[r],r,t))}(t,e,o):"string"==typeof t?function(t,e,i){for(var r=0,n=t.length;r<n;r++)null==i?e(t.charAt(r),r,t):e.call(i,t.charAt(r),r,t)}(t,e,o):function(t,e,i){for(var r in t)s.call(t,r)&&(null==i?e(t[r],r,t):e.call(i,t[r],r,t))}(t,e,o)}},2723:(t,e,i)=>{"use strict";var r=i(7952),n=i(4367),s=i(3349);function o(t){if(!(this instanceof o))return new o(t);this.hash=t.hash,this.predResist=!!t.predResist,this.outLen=this.hash.outSize,this.minEntropy=t.minEntropy||this.hash.hmacStrength,this._reseed=null,this.reseedInterval=null,this.K=null,this.V=null;var e=n.toArray(t.entropy,t.entropyEnc||"hex"),i=n.toArray(t.nonce,t.nonceEnc||"hex"),r=n.toArray(t.pers,t.persEnc||"hex");s(e.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._init(e,i,r)}t.exports=o,o.prototype._init=function(t,e,i){var r=t.concat(e).concat(i);this.K=new Array(this.outLen/8),this.V=new Array(this.outLen/8);for(var n=0;n<this.V.length;n++)this.K[n]=0,this.V[n]=1;this._update(r),this._reseed=1,this.reseedInterval=281474976710656},o.prototype._hmac=function(){return new r.hmac(this.hash,this.K)},o.prototype._update=function(t){var e=this._hmac().update(this.V).update([0]);t&&(e=e.update(t)),this.K=e.digest(),this.V=this._hmac().update(this.V).digest(),t&&(this.K=this._hmac().update(this.V).update([1]).update(t).digest(),this.V=this._hmac().update(this.V).digest())},o.prototype.reseed=function(t,e,i,r){"string"!=typeof e&&(r=i,i=e,e=null),t=n.toArray(t,e),i=n.toArray(i,r),s(t.length>=this.minEntropy/8,"Not enough entropy. Minimum is: "+this.minEntropy+" bits"),this._update(t.concat(i||[])),this._reseed=1},o.prototype.generate=function(t,e,i,r){if(this._reseed>this.reseedInterval)throw new Error("Reseed is required");"string"!=typeof e&&(r=i,i=e,e=null),i&&(i=n.toArray(i,r||"hex"),this._update(i));for(var s=[];s.length<t;)this.V=this._hmac().update(this.V).digest(),s=s.concat(this.V);var o=s.slice(0,t);return this._update(i),this._reseed++,n.encode(o,e)}},2726:(t,e,i)=>{"use strict";function r(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function n(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?r(Object(i),!0).forEach(function(e){s(t,e,i[e])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):r(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function s(t,e,i){return(e=a(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}var h=i(8287).Buffer,l=i(5340).inspect,u=l&&l.custom||"inspect";function c(t,e,i){h.prototype.copy.call(t,e,i)}t.exports=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.head=null,this.tail=null,this.length=0}var e,i;return e=t,(i=[{key:"push",value:function(t){var e={data:t,next:null};this.length>0?this.tail.next=e:this.head=e,this.tail=e,++this.length}},{key:"unshift",value:function(t){var e={data:t,next:this.head};0===this.length&&(this.tail=e),this.head=e,++this.length}},{key:"shift",value:function(){if(0!==this.length){var t=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,t}}},{key:"clear",value:function(){this.head=this.tail=null,this.length=0}},{key:"join",value:function(t){if(0===this.length)return"";for(var e=this.head,i=""+e.data;e=e.next;)i+=t+e.data;return i}},{key:"concat",value:function(t){if(0===this.length)return h.alloc(0);for(var e=h.allocUnsafe(t>>>0),i=this.head,r=0;i;)c(i.data,e,r),r+=i.data.length,i=i.next;return e}},{key:"consume",value:function(t,e){var i;return t<this.head.data.length?(i=this.head.data.slice(0,t),this.head.data=this.head.data.slice(t)):i=t===this.head.data.length?this.shift():e?this._getString(t):this._getBuffer(t),i}},{key:"first",value:function(){return this.head.data}},{key:"_getString",value:function(t){var e=this.head,i=1,r=e.data;for(t-=r.length;e=e.next;){var n=e.data,s=t>n.length?n.length:t;if(s===n.length?r+=n:r+=n.slice(0,t),0===(t-=s)){s===n.length?(++i,e.next?this.head=e.next:this.head=this.tail=null):(this.head=e,e.data=n.slice(s));break}++i}return this.length-=i,r}},{key:"_getBuffer",value:function(t){var e=h.allocUnsafe(t),i=this.head,r=1;for(i.data.copy(e),t-=i.data.length;i=i.next;){var n=i.data,s=t>n.length?n.length:t;if(n.copy(e,e.length-t,0,s),0===(t-=s)){s===n.length?(++r,i.next?this.head=i.next:this.head=this.tail=null):(this.head=i,i.data=n.slice(s));break}++r}return this.length-=r,e}},{key:u,value:function(t,e){return l(this,n(n({},e),{},{depth:0,customInspect:!1}))}}])&&o(e.prototype,i),Object.defineProperty(e,"prototype",{writable:!1}),t}()},2747:t=>{"use strict";t.exports={stdout:!1,stderr:!1}},2760:(t,e,i)=>{"use strict";function r(t,e,i){const r=(t>>24&255)/255;e[i++]=(255&t)/255*r,e[i++]=(t>>8&255)/255*r,e[i++]=(t>>16&255)/255*r,e[i++]=r}i.d(e,{V:()=>r})},2763:(t,e,i)=>{"use strict";function r(t,e,i,r){const n={width:0,height:0,offsetY:0,scale:e.fontSize/i.baseMeasurementFontSize,lines:[{width:0,charPositions:[],spaceWidth:0,spacesIndex:[],chars:[]}]};n.offsetY=i.baseLineOffset;let s=n.lines[0],o=null,a=!0;const h={spaceWord:!1,width:0,start:0,index:0,positions:[],chars:[]},l=t=>{const e=s.width;for(let i=0;i<h.index;i++){const r=t.positions[i];s.chars.push(t.chars[i]),s.charPositions.push(r+e)}s.width+=t.width,a=!1,h.width=0,h.index=0,h.chars.length=0},u=()=>{let t=s.chars.length-1;if(r){let e=s.chars[t];for(;" "===e;)s.width-=i.chars[e].xAdvance,e=s.chars[--t]}n.width=Math.max(n.width,s.width),s={width:0,charPositions:[],chars:[],spaceWidth:0,spacesIndex:[]},a=!0,n.lines.push(s),n.height+=i.lineHeight},c=i.baseMeasurementFontSize/e.fontSize,d=e.letterSpacing*c,f=e.wordWrapWidth*c;for(let r=0;r<t.length+1;r++){let n;const c=r===t.length;c||(n=t[r]);const p=i.chars[n]||i.chars[" "];if(/(?:\s)/.test(n)||"\r"===n||"\n"===n||c){if(!a&&e.wordWrap&&s.width+h.width-d>f?(u(),l(h),c||s.charPositions.push(0)):(h.start=s.width,l(h),c||s.charPositions.push(0)),"\r"===n||"\n"===n)0!==s.width&&u();else if(!c){const t=p.xAdvance+(p.kerning[o]||0)+d;s.width+=t,s.spaceWidth=t,s.spacesIndex.push(s.charPositions.length),s.chars.push(n)}}else{const t=p.kerning[o]||0,e=p.xAdvance+t+d;h.positions[h.index++]=h.width+t,h.chars.push(n),h.width+=e}o=n}return u(),"center"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],r=t.width/2-i.width/2;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(n):"right"===e.align?function(t){for(let e=0;e<t.lines.length;e++){const i=t.lines[e],r=t.width-i.width;for(let t=0;t<i.charPositions.length;t++)i.charPositions[t]+=r}}(n):"justify"===e.align&&function(t){const e=t.width;for(let i=0;i<t.lines.length;i++){const r=t.lines[i];let n=0,s=r.spacesIndex[n++],o=0;const a=r.spacesIndex.length,h=(e-r.width)/a;for(let t=0;t<r.charPositions.length;t++)t===s&&(s=r.spacesIndex[n++],o+=h),r.charPositions[t]+=o}}(n),n}i.d(e,{Z:()=>r})},2786:(t,e,i)=>{"use strict";var r=i(8287).Buffer,n=new r(4);n.fill(0),t.exports=function(t,e){var i=e(function(t){if(t.length%4!=0){var e=t.length+(4-t.length%4);t=r.concat([t,n],e)}for(var i=new Array(t.length>>>2),s=0,o=0;s<t.length;s+=4,o++)i[o]=t.readInt32LE(s);return i}(t),8*t.length);t=new r(16);for(var s=0;s<i.length;s++)t.writeInt32LE(i[s],s<<2,!0);return t}},2789:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t){return function(e){return t(e)}}},2802:(t,e,i)=>{"use strict";t.exports=function(e){var i=e.toLowerCase(),r=t.exports[i];if(!r)throw new Error(i+" is not supported (we accept pull requests)");return new r},t.exports.sha=i(7816),t.exports.sha1=i(3737),t.exports.sha224=i(6710),t.exports.sha256=i(4107),t.exports.sha384=i(2827),t.exports.sha512=i(2890)},2806:(t,e,i)=>{"use strict";i.d(e,{m:()=>o});var r=i(9313),n=i(133);const s={repeat:{addressModeU:"repeat",addressModeV:"repeat"},"repeat-x":{addressModeU:"repeat",addressModeV:"clamp-to-edge"},"repeat-y":{addressModeU:"clamp-to-edge",addressModeV:"repeat"},"no-repeat":{addressModeU:"clamp-to-edge",addressModeV:"clamp-to-edge"}};class o{constructor(t,e){this.uid=(0,n.L)("fillPattern"),this.transform=new r.u,this._styleKey=null,this.texture=t,this.transform.scale(1/t.frame.width,1/t.frame.height),e&&(t.source.style.addressModeU=s[e].addressModeU,t.source.style.addressModeV=s[e].addressModeV)}setTransform(t){const e=this.texture;this.transform.copyFrom(t),this.transform.invert(),this.transform.scale(1/e.frame.width,1/e.frame.height),this._styleKey=null}get styleKey(){return this._styleKey||(this._styleKey=`fill-pattern-${this.uid}-${this.texture.uid}-${this.transform.toArray().join("-")}`),this._styleKey}}},2808:(t,e,i)=>{"use strict";var r=i(3349);function n(t){this.options=t,this.type=this.options.type,this.blockSize=8,this._init(),this.buffer=new Array(this.blockSize),this.bufferOff=0,this.padding=!1!==t.padding}t.exports=n,n.prototype._init=function(){},n.prototype.update=function(t){return 0===t.length?[]:"decrypt"===this.type?this._updateDecrypt(t):this._updateEncrypt(t)},n.prototype._buffer=function(t,e){for(var i=Math.min(this.buffer.length-this.bufferOff,t.length-e),r=0;r<i;r++)this.buffer[this.bufferOff+r]=t[e+r];return this.bufferOff+=i,i},n.prototype._flushBuffer=function(t,e){return this._update(this.buffer,0,t,e),this.bufferOff=0,this.blockSize},n.prototype._updateEncrypt=function(t){var e=0,i=0,r=(this.bufferOff+t.length)/this.blockSize|0,n=new Array(r*this.blockSize);0!==this.bufferOff&&(e+=this._buffer(t,e),this.bufferOff===this.buffer.length&&(i+=this._flushBuffer(n,i)));for(var s=t.length-(t.length-e)%this.blockSize;e<s;e+=this.blockSize)this._update(t,e,n,i),i+=this.blockSize;for(;e<t.length;e++,this.bufferOff++)this.buffer[this.bufferOff]=t[e];return n},n.prototype._updateDecrypt=function(t){for(var e=0,i=0,r=Math.ceil((this.bufferOff+t.length)/this.blockSize)-1,n=new Array(r*this.blockSize);r>0;r--)e+=this._buffer(t,e),i+=this._flushBuffer(n,i);return e+=this._buffer(t,e),n},n.prototype.final=function(t){var e,i;return t&&(e=this.update(t)),i="encrypt"===this.type?this._finalEncrypt():this._finalDecrypt(),e?e.concat(i):i},n.prototype._pad=function(t,e){if(0===e)return!1;for(;e<t.length;)t[e++]=0;return!0},n.prototype._finalEncrypt=function(){if(!this._pad(this.buffer,this.bufferOff))return[];var t=new Array(this.blockSize);return this._update(this.buffer,0,t,0),t},n.prototype._unpad=function(t){return t},n.prototype._finalDecrypt=function(){r.equal(this.bufferOff,this.blockSize,"Not enough data to decrypt");var t=new Array(this.blockSize);return this._flushBuffer(t,0),this._unpad(t)}},2812:(t,e,i)=>{"use strict";i.d(e,{o:()=>r});class r{constructor(t,e,i){this._x=e||0,this._y=i||0,this._observer=t}clone(t){return new r(t??this._observer,this._x,this._y)}set(t=0,e=t){return this._x===t&&this._y===e||(this._x=t,this._y=e,this._observer._onUpdate(this)),this}copyFrom(t){return this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this._observer._onUpdate(this)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[pixi.js/math:ObservablePoint x=0 y=0 scope=${this._observer}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this._observer._onUpdate(this))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this._observer._onUpdate(this))}}},2827:(t,e,i)=>{"use strict";var r=i(6698),n=i(2890),s=i(392),o=i(2861).Buffer,a=new Array(160);function h(){this.init(),this._w=a,s.call(this,128,112)}r(h,n),h.prototype.init=function(){return this._ah=3418070365,this._bh=1654270250,this._ch=2438529370,this._dh=355462360,this._eh=1731405415,this._fh=2394180231,this._gh=3675008525,this._hh=1203062813,this._al=3238371032,this._bl=914150663,this._cl=812702999,this._dl=4144912697,this._el=4290775857,this._fl=1750603025,this._gl=1694076839,this._hl=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(48);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),t},t.exports=h},2851:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(2528),n=i(6984),s=Object.prototype.hasOwnProperty;const o=function(t,e,i){var o=t[e];s.call(t,e)&&(0,n.A)(o,i)&&(void 0!==i||e in t)||(0,r.A)(t,e,i)}},2853:(t,e,i)=>{var r=e;r.der=i(2010),r.pem=i(8903)},2861:(t,e,i)=>{var r=i(8287),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),o.prototype=Object.create(n.prototype),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},2884:(t,e,i)=>{var r=i(295);e.encrypt=function(t,e){var i=r(e,t._prev);return t._prev=t._cipher.encryptBlock(i),t._prev},e.decrypt=function(t,e){var i=t._prev;t._prev=e;var n=t._cipher.decryptBlock(e);return r(n,i)}},2890:(t,e,i)=>{"use strict";var r=i(6698),n=i(392),s=i(2861).Buffer,o=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591],a=new Array(160);function h(){this.init(),this._w=a,n.call(this,128,112)}function l(t,e,i){return i^t&(e^i)}function u(t,e,i){return t&e|i&(t|e)}function c(t,e){return(t>>>28|e<<4)^(e>>>2|t<<30)^(e>>>7|t<<25)}function d(t,e){return(t>>>14|e<<18)^(t>>>18|e<<14)^(e>>>9|t<<23)}function f(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^t>>>7}function p(t,e){return(t>>>1|e<<31)^(t>>>8|e<<24)^(t>>>7|e<<25)}function m(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^t>>>6}function g(t,e){return(t>>>19|e<<13)^(e>>>29|t<<3)^(t>>>6|e<<26)}function v(t,e){return t>>>0<e>>>0?1:0}r(h,n),h.prototype.init=function(){return this._ah=1779033703,this._bh=3144134277,this._ch=1013904242,this._dh=2773480762,this._eh=1359893119,this._fh=2600822924,this._gh=528734635,this._hh=1541459225,this._al=4089235720,this._bl=2227873595,this._cl=4271175723,this._dl=1595750129,this._el=2917565137,this._fl=725511199,this._gl=4215389547,this._hl=327033209,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._ah,r=0|this._bh,n=0|this._ch,s=0|this._dh,a=0|this._eh,h=0|this._fh,y=0|this._gh,b=0|this._hh,_=0|this._al,x=0|this._bl,w=0|this._cl,M=0|this._dl,S=0|this._el,A=0|this._fl,E=0|this._gl,T=0|this._hl,R=0;R<32;R+=2)e[R]=t.readInt32BE(4*R),e[R+1]=t.readInt32BE(4*R+4);for(;R<160;R+=2){var P=e[R-30],C=e[R-30+1],I=f(P,C),k=p(C,P),B=m(P=e[R-4],C=e[R-4+1]),O=g(C,P),L=e[R-14],U=e[R-14+1],D=e[R-32],N=e[R-32+1],F=k+U|0,z=I+L+v(F,k)|0;z=(z=z+B+v(F=F+O|0,O)|0)+D+v(F=F+N|0,N)|0,e[R]=z,e[R+1]=F}for(var G=0;G<160;G+=2){z=e[G],F=e[G+1];var j=u(i,r,n),V=u(_,x,w),H=c(i,_),W=c(_,i),X=d(a,S),q=d(S,a),Y=o[G],Z=o[G+1],K=l(a,h,y),$=l(S,A,E),Q=T+q|0,J=b+X+v(Q,T)|0;J=(J=(J=J+K+v(Q=Q+$|0,$)|0)+Y+v(Q=Q+Z|0,Z)|0)+z+v(Q=Q+F|0,F)|0;var tt=W+V|0,et=H+j+v(tt,W)|0;b=y,T=E,y=h,E=A,h=a,A=S,a=s+J+v(S=M+Q|0,M)|0,s=n,M=w,n=r,w=x,r=i,x=_,i=J+et+v(_=Q+tt|0,Q)|0}this._al=this._al+_|0,this._bl=this._bl+x|0,this._cl=this._cl+w|0,this._dl=this._dl+M|0,this._el=this._el+S|0,this._fl=this._fl+A|0,this._gl=this._gl+E|0,this._hl=this._hl+T|0,this._ah=this._ah+i+v(this._al,_)|0,this._bh=this._bh+r+v(this._bl,x)|0,this._ch=this._ch+n+v(this._cl,w)|0,this._dh=this._dh+s+v(this._dl,M)|0,this._eh=this._eh+a+v(this._el,S)|0,this._fh=this._fh+h+v(this._fl,A)|0,this._gh=this._gh+y+v(this._gl,E)|0,this._hh=this._hh+b+v(this._hl,T)|0},h.prototype._hash=function(){var t=s.allocUnsafe(64);function e(e,i,r){t.writeInt32BE(e,r),t.writeInt32BE(i,r+4)}return e(this._ah,this._al,0),e(this._bh,this._bl,8),e(this._ch,this._cl,16),e(this._dh,this._dl,24),e(this._eh,this._el,32),e(this._fh,this._fl,40),e(this._gh,this._gl,48),e(this._hh,this._hl,56),t},t.exports=h},2927:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(1761);function n(t){if("string"!=typeof t)throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function s(t){return t.split("?")[0].split("#")[0]}const o={toPosix:t=>t.replace(new RegExp("\\".replace(/[.*+?^${}()|[\]\\]/g,"\\$&"),"g"),"/"),isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl:t=>/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t),isBlobUrl:t=>t.startsWith("blob:"),hasProtocol(t){return/^[^/:]+:/.test(this.toPosix(t))},getProtocol(t){n(t),t=this.toPosix(t);const e=/^file:\/\/\//.exec(t);if(e)return e[0];const i=/^[^/:]+:\/{0,2}/.exec(t);return i?i[0]:""},toAbsolute(t,e,i){if(n(t),this.isDataUrl(t)||this.isBlobUrl(t))return t;const a=s(this.toPosix(e??r.e.get().getBaseUrl())),h=s(this.toPosix(i??this.rootname(a)));return(t=this.toPosix(t)).startsWith("/")?o.join(h,t.slice(1)):this.isAbsolute(t)?t:this.join(a,t)},normalize(t){if(n(t),0===t.length)return".";if(this.isDataUrl(t)||this.isBlobUrl(t))return t;let e="";const i=(t=this.toPosix(t)).startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const r=t.endsWith("/");return(t=function(t){let e="",i=0,r=-1,n=0,s=-1;for(let o=0;o<=t.length;++o){if(o<t.length)s=t.charCodeAt(o);else{if(47===s)break;s=47}if(47===s){if(r===o-1||1===n);else if(r!==o-1&&2===n){if(e.length<2||2!==i||46!==e.charCodeAt(e.length-1)||46!==e.charCodeAt(e.length-2))if(e.length>2){const t=e.lastIndexOf("/");if(t!==e.length-1){-1===t?(e="",i=0):(e=e.slice(0,t),i=e.length-1-e.lastIndexOf("/")),r=o,n=0;continue}}else if(2===e.length||1===e.length){e="",i=0,r=o,n=0;continue}}else e.length>0?e+=`/${t.slice(r+1,o)}`:e=t.slice(r+1,o),i=o-r-1;r=o,n=0}else 46===s&&-1!==n?++n:n=-1}return e}(t)).length>0&&r&&(t+="/"),i?`/${t}`:e+t},isAbsolute(t){return n(t),t=this.toPosix(t),!!this.hasProtocol(t)||t.startsWith("/")},join(...t){if(0===t.length)return".";let e;for(let i=0;i<t.length;++i){const r=t[i];if(n(r),r.length>0)if(void 0===e)e=r;else{const n=t[i-1]??"";this.joinExtensions.includes(this.extname(n).toLowerCase())?e+=`/../${r}`:e+=`/${r}`}}return void 0===e?".":this.normalize(e)},dirname(t){if(n(t),0===t.length)return".";let e=(t=this.toPosix(t)).charCodeAt(0);const i=47===e;let r=-1,s=!0;const o=this.getProtocol(t),a=t;for(let i=(t=t.slice(o.length)).length-1;i>=1;--i)if(e=t.charCodeAt(i),47===e){if(!s){r=i;break}}else s=!1;return-1===r?i?"/":this.isUrl(a)?o+t:o:i&&1===r?"//":o+t.slice(0,r)},rootname(t){n(t);let e="";if(e=(t=this.toPosix(t)).startsWith("/")?"/":this.getProtocol(t),this.isUrl(t)){const i=t.indexOf("/",e.length);e=-1!==i?t.slice(0,i):t,e.endsWith("/")||(e+="/")}return e},basename(t,e){n(t),e&&n(e),t=s(this.toPosix(t));let i,r=0,o=-1,a=!0;if(void 0!==e&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let n=e.length-1,s=-1;for(i=t.length-1;i>=0;--i){const h=t.charCodeAt(i);if(47===h){if(!a){r=i+1;break}}else-1===s&&(a=!1,s=i+1),n>=0&&(h===e.charCodeAt(n)?-1===--n&&(o=i):(n=-1,o=s))}return r===o?o=s:-1===o&&(o=t.length),t.slice(r,o)}for(i=t.length-1;i>=0;--i)if(47===t.charCodeAt(i)){if(!a){r=i+1;break}}else-1===o&&(a=!1,o=i+1);return-1===o?"":t.slice(r,o)},extname(t){n(t);let e=-1,i=0,r=-1,o=!0,a=0;for(let n=(t=s(this.toPosix(t))).length-1;n>=0;--n){const s=t.charCodeAt(n);if(47!==s)-1===r&&(o=!1,r=n+1),46===s?-1===e?e=n:1!==a&&(a=1):-1!==e&&(a=-1);else if(!o){i=n+1;break}}return-1===e||-1===r||0===a||1===a&&e===r-1&&e===i+1?"":t.slice(e,r)},parse(t){n(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(0===t.length)return e;let i=(t=s(this.toPosix(t))).charCodeAt(0);const r=this.isAbsolute(t);let o;e.root=this.rootname(t),o=r||this.hasProtocol(t)?1:0;let a=-1,h=0,l=-1,u=!0,c=t.length-1,d=0;for(;c>=o;--c)if(i=t.charCodeAt(c),47!==i)-1===l&&(u=!1,l=c+1),46===i?-1===a?a=c:1!==d&&(d=1):-1!==a&&(d=-1);else if(!u){h=c+1;break}return-1===a||-1===l||0===d||1===d&&a===l-1&&a===h+1?-1!==l&&(e.base=e.name=0===h&&r?t.slice(1,l):t.slice(h,l)):(0===h&&r?(e.name=t.slice(1,a),e.base=t.slice(1,l)):(e.name=t.slice(h,a),e.base=t.slice(h,l)),e.ext=t.slice(a,l)),e.dir=this.dirname(t),e},sep:"/",delimiter:":",joinExtensions:[".html"]}},2951:t=>{"use strict";t.exports=JSON.parse('{"sha224WithRSAEncryption":{"sign":"rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"RSA-SHA224":{"sign":"ecdsa/rsa","hash":"sha224","id":"302d300d06096086480165030402040500041c"},"sha256WithRSAEncryption":{"sign":"rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"RSA-SHA256":{"sign":"ecdsa/rsa","hash":"sha256","id":"3031300d060960864801650304020105000420"},"sha384WithRSAEncryption":{"sign":"rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"RSA-SHA384":{"sign":"ecdsa/rsa","hash":"sha384","id":"3041300d060960864801650304020205000430"},"sha512WithRSAEncryption":{"sign":"rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA512":{"sign":"ecdsa/rsa","hash":"sha512","id":"3051300d060960864801650304020305000440"},"RSA-SHA1":{"sign":"rsa","hash":"sha1","id":"3021300906052b0e03021a05000414"},"ecdsa-with-SHA1":{"sign":"ecdsa","hash":"sha1","id":""},"sha256":{"sign":"ecdsa","hash":"sha256","id":""},"sha224":{"sign":"ecdsa","hash":"sha224","id":""},"sha384":{"sign":"ecdsa","hash":"sha384","id":""},"sha512":{"sign":"ecdsa","hash":"sha512","id":""},"DSA-SHA":{"sign":"dsa","hash":"sha1","id":""},"DSA-SHA1":{"sign":"dsa","hash":"sha1","id":""},"DSA":{"sign":"dsa","hash":"sha1","id":""},"DSA-WITH-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-SHA224":{"sign":"dsa","hash":"sha224","id":""},"DSA-WITH-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-SHA256":{"sign":"dsa","hash":"sha256","id":""},"DSA-WITH-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-SHA384":{"sign":"dsa","hash":"sha384","id":""},"DSA-WITH-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-SHA512":{"sign":"dsa","hash":"sha512","id":""},"DSA-RIPEMD160":{"sign":"dsa","hash":"rmd160","id":""},"ripemd160WithRSA":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"RSA-RIPEMD160":{"sign":"rsa","hash":"rmd160","id":"3021300906052b2403020105000414"},"md5WithRSAEncryption":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"},"RSA-MD5":{"sign":"rsa","hash":"md5","id":"3020300c06082a864886f70d020505000410"}}')},2955:(t,e,i)=>{"use strict";var r,n=i(5606);function s(t,e,i){return(e=function(t){var e=function(t){if("object"!=typeof t||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!=typeof i)return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"==typeof e?e:String(e)}(e))in t?Object.defineProperty(t,e,{value:i,enumerable:!0,configurable:!0,writable:!0}):t[e]=i,t}var o=i(6238),a=Symbol("lastResolve"),h=Symbol("lastReject"),l=Symbol("error"),u=Symbol("ended"),c=Symbol("lastPromise"),d=Symbol("handlePromise"),f=Symbol("stream");function p(t,e){return{value:t,done:e}}function m(t){var e=t[a];if(null!==e){var i=t[f].read();null!==i&&(t[c]=null,t[a]=null,t[h]=null,e(p(i,!1)))}}function g(t){n.nextTick(m,t)}var v=Object.getPrototypeOf(function(){}),y=Object.setPrototypeOf((s(r={get stream(){return this[f]},next:function(){var t=this,e=this[l];if(null!==e)return Promise.reject(e);if(this[u])return Promise.resolve(p(void 0,!0));if(this[f].destroyed)return new Promise(function(e,i){n.nextTick(function(){t[l]?i(t[l]):e(p(void 0,!0))})});var i,r=this[c];if(r)i=new Promise(function(t,e){return function(i,r){t.then(function(){e[u]?i(p(void 0,!0)):e[d](i,r)},r)}}(r,this));else{var s=this[f].read();if(null!==s)return Promise.resolve(p(s,!1));i=new Promise(this[d])}return this[c]=i,i}},Symbol.asyncIterator,function(){return this}),s(r,"return",function(){var t=this;return new Promise(function(e,i){t[f].destroy(null,function(t){t?i(t):e(p(void 0,!0))})})}),r),v);t.exports=function(t){var e,i=Object.create(y,(s(e={},f,{value:t,writable:!0}),s(e,a,{value:null,writable:!0}),s(e,h,{value:null,writable:!0}),s(e,l,{value:null,writable:!0}),s(e,u,{value:t._readableState.endEmitted,writable:!0}),s(e,d,{value:function(t,e){var r=i[f].read();r?(i[c]=null,i[a]=null,i[h]=null,t(p(r,!1))):(i[a]=t,i[h]=e)},writable:!0}),e));return i[c]=null,o(t,function(t){if(t&&"ERR_STREAM_PREMATURE_CLOSE"!==t.code){var e=i[h];return null!==e&&(i[c]=null,i[a]=null,i[h]=null,e(t)),void(i[l]=t)}var r=i[a];null!==r&&(i[c]=null,i[a]=null,i[h]=null,r(p(void 0,!0))),i[u]=!0}),t.on("readable",g.bind(null,i)),i}},2991:t=>{"use strict";const e=/(?:\\(u(?:[a-f\d]{4}|\{[a-f\d]{1,6}\})|x[a-f\d]{2}|.))|(?:\{(~)?(\w+(?:\([^)]*\))?(?:\.\w+(?:\([^)]*\))?)*)(?:[ \t]|(?=\r?\n)))|(\})|((?:.|[\r\n\f])+?)/gi,i=/(?:^|\.)(\w+)(?:\(([^)]*)\))?/g,r=/^(['"])((?:\\.|(?!\1)[^\\])*)\1$/,n=/\\(u(?:[a-f\d]{4}|{[a-f\d]{1,6}})|x[a-f\d]{2}|.)|([^\\])/gi,s=new Map([["n","\n"],["r","\r"],["t","\t"],["b","\b"],["f","\f"],["v","\v"],["0","\0"],["\\","\\"],["e",""],["a",""]]);function o(t){const e="u"===t[0],i="{"===t[1];return e&&!i&&5===t.length||"x"===t[0]&&3===t.length?String.fromCharCode(parseInt(t.slice(1),16)):e&&i?String.fromCodePoint(parseInt(t.slice(2,-1),16)):s.get(t)||t}function a(t,e){const i=[],s=e.trim().split(/\s*,\s*/g);let a;for(const e of s){const s=Number(e);if(Number.isNaN(s)){if(!(a=e.match(r)))throw new Error(`Invalid Chalk template style argument: ${e} (in style '${t}')`);i.push(a[2].replace(n,(t,e,i)=>e?o(e):i))}else i.push(s)}return i}function h(t){i.lastIndex=0;const e=[];let r;for(;null!==(r=i.exec(t));){const t=r[1];if(r[2]){const i=a(t,r[2]);e.push([t].concat(i))}else e.push([t])}return e}function l(t,e){const i={};for(const t of e)for(const e of t.styles)i[e[0]]=t.inverse?null:e.slice(1);let r=t;for(const[t,e]of Object.entries(i))if(Array.isArray(e)){if(!(t in r))throw new Error(`Unknown Chalk style: ${t}`);r=e.length>0?r[t](...e):r[t]}return r}t.exports=(t,i)=>{const r=[],n=[];let s=[];if(i.replace(e,(e,i,a,u,c,d)=>{if(i)s.push(o(i));else if(u){const e=s.join("");s=[],n.push(0===r.length?e:l(t,r)(e)),r.push({inverse:a,styles:h(u)})}else if(c){if(0===r.length)throw new Error("Found extraneous } in Chalk template literal");n.push(l(t,r)(s.join(""))),s=[],r.pop()}else s.push(d)}),n.push(s.join("")),r.length>0){const t=`Chalk template literal is missing ${r.length} closing bracket${1===r.length?"":"s"} (\`}\`)`;throw new Error(t)}return n.join("")}},3003:t=>{"use strict";t.exports=function(t){return t!=t}},3012:(t,e,i)=>{"use strict";i.d(e,{B:()=>l});var r=i(5571),n=i(8306);const s={f32:"float32","vec2<f32>":"float32x2","vec3<f32>":"float32x3","vec4<f32>":"float32x4",vec2f:"float32x2",vec3f:"float32x3",vec4f:"float32x4",i32:"sint32","vec2<i32>":"sint32x2","vec3<i32>":"sint32x3","vec4<i32>":"sint32x4",u32:"uint32","vec2<u32>":"uint32x2","vec3<u32>":"uint32x3","vec4<u32>":"uint32x4",bool:"uint32","vec2<bool>":"uint32x2","vec3<bool>":"uint32x3","vec4<bool>":"uint32x4"};function o(t){const e=/@group\((\d+)\)/,i=/@binding\((\d+)\)/,r=/var(<[^>]+>)? (\w+)/,n=/:\s*(\w+)/,s=/(\w+)\s*:\s*([\w\<\>]+)/g,o=/struct\s+(\w+)/,a=t.match(/(^|[^/])@(group|binding)\(\d+\)[^;]+;/g)?.map(t=>({group:parseInt(t.match(e)[1],10),binding:parseInt(t.match(i)[1],10),name:t.match(r)[2],isUniform:"<uniform>"===t.match(r)[1],type:t.match(n)[1]}));if(!a)return{groups:[],structs:[]};const h=t.match(/struct\s+(\w+)\s*{([^}]+)}/g)?.map(t=>{const e=t.match(o)[1],i=t.match(s).reduce((t,e)=>{const[i,r]=e.split(":");return t[i.trim()]=r.trim(),t},{});return i?{name:e,members:i}:null}).filter(({name:t})=>a.some(e=>e.type===t))??[];return{groups:a,structs:h}}var a=(t=>(t[t.VERTEX=1]="VERTEX",t[t.FRAGMENT=2]="FRAGMENT",t[t.COMPUTE=4]="COMPUTE",t))(a||{});const h=Object.create(null);class l{constructor(t){this._layoutKey=0,this._attributeLocationsKey=0;const{fragment:e,vertex:i,layout:r,gpuLayout:n,name:s}=t;if(this.name=s,this.fragment=e,this.vertex=i,e.source===i.source){const t=o(e.source);this.structsAndGroups=t}else{const t=o(i.source),r=o(e.source);this.structsAndGroups=function(t,e){const i=new Set,r=new Set;return{structs:[...t.structs,...e.structs].filter(t=>!i.has(t.name)&&(i.add(t.name),!0)),groups:[...t.groups,...e.groups].filter(t=>{const e=`${t.name}-${t.binding}`;return!r.has(e)&&(r.add(e),!0)})}}(t,r)}this.layout=r??function({groups:t}){const e=[];for(let i=0;i<t.length;i++){const r=t[i];e[r.group]||(e[r.group]={}),e[r.group][r.name]=r.binding}return e}(this.structsAndGroups),this.gpuLayout=n??function({groups:t}){const e=[];for(let i=0;i<t.length;i++){const r=t[i];e[r.group]||(e[r.group]=[]),r.isUniform?e[r.group].push({binding:r.binding,visibility:a.VERTEX|a.FRAGMENT,buffer:{type:"uniform"}}):"sampler"===r.type?e[r.group].push({binding:r.binding,visibility:a.FRAGMENT,sampler:{type:"filtering"}}):"texture_2d"===r.type&&e[r.group].push({binding:r.binding,visibility:a.FRAGMENT,texture:{sampleType:"float",viewDimension:"2d",multisampled:!1}})}return e}(this.structsAndGroups),this.autoAssignGlobalUniforms=!(void 0===this.layout[0]?.globalUniforms),this.autoAssignLocalUniforms=!(void 0===this.layout[1]?.localUniforms),this._generateProgramKey()}_generateProgramKey(){const{vertex:t,fragment:e}=this,i=t.source+e.source+t.entryPoint+e.entryPoint;this._layoutKey=(0,r.X)(i,"program")}get attributeData(){return this._attributeData??(this._attributeData=function({source:t,entryPoint:e}){const i={},r=t.indexOf(`fn ${e}`);if(-1!==r){const e=t.indexOf("->",r);if(-1!==e){const o=t.substring(r,e),a=/@location\((\d+)\)\s+([a-zA-Z0-9_]+)\s*:\s*([a-zA-Z0-9_<>]+)(?:,|\s|$)/g;let h;for(;null!==(h=a.exec(o));){const t=s[h[3]]??"float32";i[h[2]]={location:parseInt(h[1],10),format:t,stride:(0,n.m)(t).stride,offset:0,instance:!1,start:0}}}}return i}(this.vertex)),this._attributeData}destroy(){this.gpuLayout=null,this.layout=null,this.structsAndGroups=null,this.fragment=null,this.vertex=null}static from(t){const e=`${t.vertex.source}:${t.fragment.source}:${t.fragment.entryPoint}:${t.vertex.entryPoint}`;return h[e]||(h[e]=new l(t)),h[e]}}},3053:(t,e,i)=>{var r=i(295),n=i(2861).Buffer,s=i(5122);function o(t){var e=t._cipher.encryptBlockRaw(t._prev);return s(t._prev),e}e.encrypt=function(t,e){var i=Math.ceil(e.length/16),s=t._cache.length;t._cache=n.concat([t._cache,n.allocUnsafe(16*i)]);for(var a=0;a<i;a++){var h=o(t),l=s+16*a;t._cache.writeUInt32BE(h[0],l+0),t._cache.writeUInt32BE(h[1],l+4),t._cache.writeUInt32BE(h[2],l+8),t._cache.writeUInt32BE(h[3],l+12)}var u=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),r(e,u)}},3093:(t,e,i)=>{"use strict";var r=i(4459);t.exports=function(t){return r(t)||0===t?t:t<0?-1:1}},3098:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t){return null!=t&&"object"==typeof t}},3126:(t,e,i)=>{"use strict";var r=i(6743),n=i(9675),s=i(76),o=i(3144);t.exports=function(t){if(t.length<1||"function"!=typeof t[0])throw new n("a function is required");return o(r,s,t)}},3141:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.I=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=o(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},3144:(t,e,i)=>{"use strict";var r=i(6743),n=i(1002),s=i(76),o=i(7119);t.exports=o||r.call(s,n)},3149:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t){var e=typeof t;return null!=t&&("object"==e||"function"==e)}},3153:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(){return[]}},3209:(t,e,i)=>{"use strict";var r=i(5606),n=65536,s=i(2861).Buffer,o=i.g.crypto||i.g.msCrypto;o&&o.getRandomValues?t.exports=function(t,e){if(t>4294967295)throw new RangeError("requested too many random bytes");var i=s.allocUnsafe(t);if(t>0)if(t>n)for(var a=0;a<t;a+=n)o.getRandomValues(i.slice(a,a+n));else o.getRandomValues(i);return"function"==typeof e?r.nextTick(function(){e(null,i)}):i}:t.exports=function(){throw new Error("Secure random number generation is not supported by this browser.\nUse Chrome, Firefox or Internet Explorer 11")}},3219:t=>{"use strict";t.exports=JSON.parse('{"aes-128-ecb":{"cipher":"AES","key":128,"iv":0,"mode":"ECB","type":"block"},"aes-192-ecb":{"cipher":"AES","key":192,"iv":0,"mode":"ECB","type":"block"},"aes-256-ecb":{"cipher":"AES","key":256,"iv":0,"mode":"ECB","type":"block"},"aes-128-cbc":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes-192-cbc":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes-256-cbc":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes128":{"cipher":"AES","key":128,"iv":16,"mode":"CBC","type":"block"},"aes192":{"cipher":"AES","key":192,"iv":16,"mode":"CBC","type":"block"},"aes256":{"cipher":"AES","key":256,"iv":16,"mode":"CBC","type":"block"},"aes-128-cfb":{"cipher":"AES","key":128,"iv":16,"mode":"CFB","type":"stream"},"aes-192-cfb":{"cipher":"AES","key":192,"iv":16,"mode":"CFB","type":"stream"},"aes-256-cfb":{"cipher":"AES","key":256,"iv":16,"mode":"CFB","type":"stream"},"aes-128-cfb8":{"cipher":"AES","key":128,"iv":16,"mode":"CFB8","type":"stream"},"aes-192-cfb8":{"cipher":"AES","key":192,"iv":16,"mode":"CFB8","type":"stream"},"aes-256-cfb8":{"cipher":"AES","key":256,"iv":16,"mode":"CFB8","type":"stream"},"aes-128-cfb1":{"cipher":"AES","key":128,"iv":16,"mode":"CFB1","type":"stream"},"aes-192-cfb1":{"cipher":"AES","key":192,"iv":16,"mode":"CFB1","type":"stream"},"aes-256-cfb1":{"cipher":"AES","key":256,"iv":16,"mode":"CFB1","type":"stream"},"aes-128-ofb":{"cipher":"AES","key":128,"iv":16,"mode":"OFB","type":"stream"},"aes-192-ofb":{"cipher":"AES","key":192,"iv":16,"mode":"OFB","type":"stream"},"aes-256-ofb":{"cipher":"AES","key":256,"iv":16,"mode":"OFB","type":"stream"},"aes-128-ctr":{"cipher":"AES","key":128,"iv":16,"mode":"CTR","type":"stream"},"aes-192-ctr":{"cipher":"AES","key":192,"iv":16,"mode":"CTR","type":"stream"},"aes-256-ctr":{"cipher":"AES","key":256,"iv":16,"mode":"CTR","type":"stream"},"aes-128-gcm":{"cipher":"AES","key":128,"iv":12,"mode":"GCM","type":"auth"},"aes-192-gcm":{"cipher":"AES","key":192,"iv":12,"mode":"GCM","type":"auth"},"aes-256-gcm":{"cipher":"AES","key":256,"iv":12,"mode":"GCM","type":"auth"}}')},3225:(t,e,i)=>{"use strict";var r=i(5606);void 0===r||!r.version||0===r.version.indexOf("v0.")||0===r.version.indexOf("v1.")&&0!==r.version.indexOf("v1.8.")?t.exports={nextTick:function(t,e,i,n){if("function"!=typeof t)throw new TypeError('"callback" argument must be a function');var s,o,a=arguments.length;switch(a){case 0:case 1:return r.nextTick(t);case 2:return r.nextTick(function(){t.call(null,e)});case 3:return r.nextTick(function(){t.call(null,e,i)});case 4:return r.nextTick(function(){t.call(null,e,i,n)});default:for(s=new Array(a-1),o=0;o<s.length;)s[o++]=arguments[o];return r.nextTick(function(){t.apply(null,s)})}}}:t.exports=r},3241:t=>{"use strict";t.exports=JSON.parse('{"modp1":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a63a3620ffffffffffffffff"},"modp2":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece65381ffffffffffffffff"},"modp5":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca237327ffffffffffffffff"},"modp14":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aacaa68ffffffffffffffff"},"modp15":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a93ad2caffffffffffffffff"},"modp16":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c934063199ffffffffffffffff"},"modp17":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dcc4024ffffffffffffffff"},"modp18":{"gen":"02","prime":"ffffffffffffffffc90fdaa22168c234c4c6628b80dc1cd129024e088a67cc74020bbea63b139b22514a08798e3404ddef9519b3cd3a431b302b0a6df25f14374fe1356d6d51c245e485b576625e7ec6f44c42e9a637ed6b0bff5cb6f406b7edee386bfb5a899fa5ae9f24117c4b1fe649286651ece45b3dc2007cb8a163bf0598da48361c55d39a69163fa8fd24cf5f83655d23dca3ad961c62f356208552bb9ed529077096966d670c354e4abc9804f1746c08ca18217c32905e462e36ce3be39e772c180e86039b2783a2ec07a28fb5c55df06f4c52c9de2bcbf6955817183995497cea956ae515d2261898fa051015728e5a8aaac42dad33170d04507a33a85521abdf1cba64ecfb850458dbef0a8aea71575d060c7db3970f85a6e1e4c7abf5ae8cdb0933d71e8c94e04a25619dcee3d2261ad2ee6bf12ffa06d98a0864d87602733ec86a64521f2b18177b200cbbe117577a615d6c770988c0bad946e208e24fa074e5ab3143db5bfce0fd108e4b82d120a92108011a723c12a787e6d788719a10bdba5b2699c327186af4e23c1a946834b6150bda2583e9ca2ad44ce8dbbbc2db04de8ef92e8efc141fbecaa6287c59474e6bc05d99b2964fa090c3a2233ba186515be7ed1f612970cee2d7afb81bdd762170481cd0069127d5b05aa993b4ea988d8fddc186ffb7dc90a6c08f4df435c93402849236c3fab4d27c7026c1d4dcb2602646dec9751e763dba37bdf8ff9406ad9e530ee5db382f413001aeb06a53ed9027d831179727b0865a8918da3edbebcf9b14ed44ce6cbaced4bb1bdb7f1447e6cc254b332051512bd7af426fb8f401378cd2bf5983ca01c64b92ecf032ea15d1721d03f482d7ce6e74fef6d55e702f46980c82b5a84031900b1c9e59e7c97fbec7e8f323a97a7e36cc88be0f1d45b7ff585ac54bd407b22b4154aacc8f6d7ebf48e1d814cc5ed20f8037e0a79715eef29be32806a1d58bb7c5da76f550aa3d8a1fbff0eb19ccb1a313d55cda56c9ec2ef29632387fe8d76e3c0468043e8f663f4860ee12bf2d5b0b7474d6e694f91e6dbe115974a3926f12fee5e438777cb6a932df8cd8bec4d073b931ba3bc832b68d9dd300741fa7bf8afc47ed2576f6936ba424663aab639c5ae4f5683423b4742bf1c978238f16cbe39d652de3fdb8befc848ad922222e04a4037c0713eb57a81a23f0c73473fc646cea306b4bcbc8862f8385ddfa9d4b7fa2c087e879683303ed5bdd3a062b3cf5b3a278a66d2a13f83f44f82ddf310ee074ab6a364597e899a0255dc164f31cc50846851df9ab48195ded7ea1b1d510bd7ee74d73faf36bc31ecfa268359046f4eb879f924009438b481c6cd7889a002ed5ee382bc9190da6fc026e479558e4475677e9aa9e3050e2765694dfc81f56e880b96e7160c980dd98edd3dfffffffffffffffff"}}')},3349:t=>{function e(t,e){if(!t)throw new Error(e||"Assertion failed")}t.exports=e,e.equal=function(t,e,i){if(t!=e)throw new Error(i||"Assertion failed: "+t+" != "+e)}},3382:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(5377),s="undefined"!=typeof Uint8Array,o=s&&"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView;t.exports=function(t,e,i){if("string"==typeof t||r.isBuffer(t)||s&&t instanceof Uint8Array||o&&o(t))return n(t,e);throw new TypeError(i+" must be a string, a Buffer, a Uint8Array, or a DataView")}},3387:(t,e,i)=>{var r=i(2861).Buffer,n=i(8948),s=i(8789),o=i(8310),a=i(5232),h=i(537);function l(t,e){return r.from(t,e).toString("base64").replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function u(t){var e=t.header,i=t.payload,r=t.secret||t.privateKey,n=t.encoding,o=s(e.alg),u=function(t,e,i){i=i||"utf8";var r=l(a(t),"binary"),n=l(a(e),i);return h.format("%s.%s",r,n)}(e,i,n),c=o.sign(u,r);return h.format("%s.%s",u,c)}function c(t){var e=t.secret||t.privateKey||t.key,i=new n(e);this.readable=!0,this.header=t.header,this.encoding=t.encoding,this.secret=this.privateKey=this.key=i,this.payload=new n(t.payload),this.secret.once("close",function(){!this.payload.writable&&this.readable&&this.sign()}.bind(this)),this.payload.once("close",function(){!this.secret.writable&&this.readable&&this.sign()}.bind(this))}h.inherits(c,o),c.prototype.sign=function(){try{var t=u({header:this.header,payload:this.payload.buffer,secret:this.secret.buffer,encoding:this.encoding});return this.emit("done",t),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}},c.sign=u,t.exports=c},3389:(t,e,i)=>{"use strict";var r=i(3349),n=i(6698),s={};function o(t){r.equal(t.length,8,"Invalid IV length"),this.iv=new Array(8);for(var e=0;e<this.iv.length;e++)this.iv[e]=t[e]}e.instantiate=function(t){function e(e){t.call(this,e),this._cbcInit()}n(e,t);for(var i=Object.keys(s),r=0;r<i.length;r++){var o=i[r];e.prototype[o]=s[o]}return e.create=function(t){return new e(t)},e},s._cbcInit=function(){var t=new o(this.options.iv);this._cbcState=t},s._update=function(t,e,i,r){var n=this._cbcState,s=this.constructor.super_.prototype,o=n.iv;if("encrypt"===this.type){for(var a=0;a<this.blockSize;a++)o[a]^=t[e+a];for(s._update.call(this,o,0,i,r),a=0;a<this.blockSize;a++)o[a]=i[r+a]}else{for(s._update.call(this,t,e,i,r),a=0;a<this.blockSize;a++)i[r+a]^=o[a];for(a=0;a<this.blockSize;a++)o[a]=t[e+a]}}},3507:(t,e,i)=>{"use strict";var r=i(6698),n=i(1800),s=i(6168),o=i(2861).Buffer,a=i(320),h=i(6011),l=i(2802),u=o.alloc(128);function c(t,e){s.call(this,"digest"),"string"==typeof e&&(e=o.from(e));var i="sha512"===t||"sha384"===t?128:64;this._alg=t,this._key=e,e.length>i?e=("rmd160"===t?new h:l(t)).update(e).digest():e.length<i&&(e=o.concat([e,u],i));for(var r=this._ipad=o.allocUnsafe(i),n=this._opad=o.allocUnsafe(i),a=0;a<i;a++)r[a]=54^e[a],n[a]=92^e[a];this._hash="rmd160"===t?new h:l(t),this._hash.update(r)}r(c,s),c.prototype._update=function(t){this._hash.update(t)},c.prototype._final=function(){var t=this._hash.digest();return("rmd160"===this._alg?new h:l(this._alg)).update(this._opad).update(t).digest()},t.exports=function(t,e){return"rmd160"===(t=t.toLowerCase())||"ripemd160"===t?new c("rmd160",e):"md5"===t?new n(a,e):new c(t,e)}},3513:(t,e,i)=>{"use strict";i.d(e,{T:()=>r});class r{constructor(t){this.resources=Object.create(null),this._dirty=!0;let e=0;for(const i in t){const r=t[i];this.setResource(r,e++)}this._updateKey()}_updateKey(){if(!this._dirty)return;this._dirty=!1;const t=[];let e=0;for(const i in this.resources)t[e++]=this.resources[i]._resourceId;this._key=t.join("|")}setResource(t,e){const i=this.resources[e];t!==i&&(i&&t.off?.("change",this.onResourceChange,this),t.on?.("change",this.onResourceChange,this),this.resources[e]=t,this._dirty=!0)}getResource(t){return this.resources[t]}_touch(t){const e=this.resources;for(const i in e)e[i]._touched=t}destroy(){const t=this.resources;for(const e in t){const i=t[e];i.off?.("change",this.onResourceChange,this)}this.resources=null}onResourceChange(t){if(this._dirty=!0,t.destroyed){const e=this.resources;for(const i in e)e[i]===t&&(e[i]=null)}else this._updateKey()}}},3527:t=>{"use strict";function e(t){return(t/8|0)+(t%8==0?0:1)}var i={ES256:e(256),ES384:e(384),ES512:e(521)};t.exports=function(t){var e=i[t];if(e)return e;throw new Error('Unknown algorithm "'+t+'"')}},3548:(t,e,i)=>{"use strict";i.d(e,{r:()=>l});var r=i(2577),n=i(9313),s=i(4492),o=i(268),a=i(7276),h=i(2806);function l(t,e){if(t.texture===s.g.WHITE&&!t.fill)return r.Q.shared.setValue(t.color).setAlpha(t.alpha??1).toHexa();if(!t.fill){const i=e.createPattern(t.texture.source.resource,"repeat"),r=t.matrix.copyTo(n.u.shared);return r.scale(t.texture.frame.width,t.texture.frame.height),i.setTransform(r),i}if(t.fill instanceof h.m){const i=t.fill,r=e.createPattern(i.texture.source.resource,"repeat"),s=i.transform.copyTo(n.u.shared);return s.scale(i.texture.frame.width,i.texture.frame.height),r.setTransform(s),r}if(t.fill instanceof a._){const i=t.fill;if("linear"===i.type){const t=e.createLinearGradient(i.x0,i.y0,i.x1,i.y1);return i.gradientStops.forEach(e=>{t.addColorStop(e.offset,r.Q.shared.setValue(e.color).toHex())}),t}}return(0,o.R)("FillStyle not recognised",t),"red"}},3600:(t,e,i)=>{"use strict";t.exports=n;var r=i(4610);function n(t){if(!(this instanceof n))return new n(t);r.call(this,t)}i(6698)(n,r),n.prototype._transform=function(t,e,i){i(null,t)}},3628:(t,e,i)=>{"use strict";var r=i(8648),n=i(1064),s=i(7176);t.exports=r?function(t){return r(t)}:n?function(t){if(!t||"object"!=typeof t&&"function"!=typeof t)throw new TypeError("getProto: not an object");return n(t)}:s?function(t){return s(t)}:null},3639:t=>{var e=Object.prototype.toString;t.exports=function(t){return"number"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Number]"==e.call(t)}},3726:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(8399).Transform;function s(t){n.call(this),this._block=r.allocUnsafe(t),this._blockSize=t,this._blockOffset=0,this._length=[0,0,0,0],this._finalized=!1}i(6698)(s,n),s.prototype._transform=function(t,e,i){var r=null;try{this.update(t,e)}catch(t){r=t}i(r)},s.prototype._flush=function(t){var e=null;try{this.push(this.digest())}catch(t){e=t}t(e)},s.prototype.update=function(t,e){if(function(t){if(!r.isBuffer(t)&&"string"!=typeof t)throw new TypeError("Data must be a string or a buffer")}(t),this._finalized)throw new Error("Digest already called");r.isBuffer(t)||(t=r.from(t,e));for(var i=this._block,n=0;this._blockOffset+t.length-n>=this._blockSize;){for(var s=this._blockOffset;s<this._blockSize;)i[s++]=t[n++];this._update(),this._blockOffset=0}for(;n<t.length;)i[this._blockOffset++]=t[n++];for(var o=0,a=8*t.length;a>0;++o)this._length[o]+=a,(a=this._length[o]/4294967296|0)>0&&(this._length[o]-=4294967296*a);return this},s.prototype._update=function(){throw new Error("_update is not implemented")},s.prototype.digest=function(t){if(this._finalized)throw new Error("Digest already called");this._finalized=!0;var e=this._digest();void 0!==t&&(e=e.toString(t)),this._block.fill(0),this._blockOffset=0;for(var i=0;i<4;++i)this._length[i]=0;return e},s.prototype._digest=function(){throw new Error("_digest is not implemented")},t.exports=s},3737:(t,e,i)=>{"use strict";var r=i(6698),n=i(392),s=i(2861).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,n.call(this,64,56)}function l(t){return t<<1|t>>>31}function u(t){return t<<5|t>>>27}function c(t){return t<<30|t>>>2}function d(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(h,n),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,h=0;h<16;++h)e[h]=t.readInt32BE(4*h);for(;h<80;++h)e[h]=l(e[h-3]^e[h-8]^e[h-14]^e[h-16]);for(var f=0;f<80;++f){var p=~~(f/20),m=u(i)+d(p,r,n,s)+a+e[f]+o[p]|0;a=s,s=n,n=c(r),r=i,i=m}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},3776:()=>{},3804:(t,e,i)=>{"use strict";i.d(e,{W:()=>s});var r=i(1761);let n;function s(){if(!n||n?.isContextLost()){const t=r.e.get().createCanvas();n=t.getContext("webgl",{})}return n}},3831:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(6912),n=i(2049);const s=function(t,e,i){var s=e(t);return(0,n.A)(t)?s:(0,r.A)(s,i(t))}},3832:(t,e,i)=>{"use strict";var r,n,s=i(2861).Buffer,o=i(4196),a=i(2455),h=i(1352),l=i(3382),u=i.g.crypto&&i.g.crypto.subtle,c={sha:"SHA-1","sha-1":"SHA-1",sha1:"SHA-1",sha256:"SHA-256","sha-256":"SHA-256",sha384:"SHA-384","sha-384":"SHA-384","sha-512":"SHA-512",sha512:"SHA-512"},d=[];function f(){return n||(n=i.g.process&&i.g.process.nextTick?i.g.process.nextTick:i.g.queueMicrotask?i.g.queueMicrotask:i.g.setImmediate?i.g.setImmediate:i.g.setTimeout)}function p(t,e,i,r,n){return u.importKey("raw",t,{name:"PBKDF2"},!1,["deriveBits"]).then(function(t){return u.deriveBits({name:"PBKDF2",salt:e,iterations:i,hash:{name:n}},t,r<<3)}).then(function(t){return s.from(t)})}t.exports=function(t,e,n,m,g,v){"function"==typeof g&&(v=g,g=void 0);var y=c[(g=g||"sha1").toLowerCase()];if(y&&"function"==typeof i.g.Promise){if(o(n,m),t=l(t,a,"Password"),e=l(e,a,"Salt"),"function"!=typeof v)throw new Error("No callback provided to pbkdf2");!function(t,e){t.then(function(t){f()(function(){e(null,t)})},function(t){f()(function(){e(t)})})}(function(t){if(i.g.process&&!i.g.process.browser)return Promise.resolve(!1);if(!u||!u.importKey||!u.deriveBits)return Promise.resolve(!1);if(void 0!==d[t])return d[t];var e=p(r=r||s.alloc(8),r,10,128,t).then(function(){return!0},function(){return!1});return d[t]=e,e}(y).then(function(i){return i?p(t,e,n,m,y):h(t,e,n,m,g)}),v)}else f()(function(){var i;try{i=h(t,e,n,m,g)}catch(t){return void v(t)}v(null,i)})}},3870:(t,e,i)=>{"use strict";i.a(t,async(t,e)=>{try{var r=i(2411),n=i(7691),s=i(4498),o=i(7901),a=i(2543),h=i.n(a),l=i(6763);let c,d,f,p,m,g,v,y,b=!0,_=!1,x=[],w=!0,M=0,S=0,A=!1,E=1,T=!0,R=0,P=0,C=0;const I="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABcSAAAXEgFnn9JSAAAKKWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NjQ4LCAyMDIxLzAxLzEyLTE1OjUyOjI5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjc4ZTE4OGU0LTI4NzQtZDA0NC1iYTMzLWU0YWNkN2JkMDE2OCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNjY4NTM0Yy00ZTUzLWMzNGUtODM3Yy1kMmI2YzBmMTEwZmIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iMzU4MTBBNkQxMkIwQ0RGREJGOTlCMjI2RjY0QTNGMEUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAzLTEyVDE5OjQ5OjE5KzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMy0xN1QxMzo0OTozNiswMTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMy0xN1QxMzo0OTozNiswMTowMCIgdGlmZjpJbWFnZVdpZHRoPSIzNDUiIHRpZmY6SW1hZ2VMZW5ndGg9IjM0NSIgdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPSIyIiB0aWZmOlNhbXBsZXNQZXJQaXhlbD0iMyIgdGlmZjpYUmVzb2x1dGlvbj0iMTUwLzEiIHRpZmY6WVJlc29sdXRpb249IjE1MC8xIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkV4aWZWZXJzaW9uPSIwMjMxIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMzQ1IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMzQ1Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTM0OTZiMDQtMGViZS0yNjQzLWEyNzQtZTAwNGJkODk4YWM2IiBzdEV2dDp3aGVuPSIyMDIxLTAzLTEyVDIwOjIyOjExKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gaW1hZ2UvanBlZyB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJhZWQ4MjhlLWZmZGQtMTU0ZS05NjZiLTVmYmU1NThiMjEyNCIgc3RFdnQ6d2hlbj0iMjAyMS0wMy0xMlQyMDoyMjoxMSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphNjY4NTM0Yy00ZTUzLWMzNGUtODM3Yy1kMmI2YzBmMTEwZmIiIHN0RXZ0OndoZW49IjIwMjEtMDMtMTdUMTM6NDk6MzYrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTM0OTZiMDQtMGViZS0yNjQzLWEyNzQtZTAwNGJkODk4YWM2IiBzdFJlZjpkb2N1bWVudElEPSIzNTgxMEE2RDEyQjBDREZEQkY5OUIyMjZGNjRBM0YwRSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSIzNTgxMEE2RDEyQjBDREZEQkY5OUIyMjZGNjRBM0YwRSIvPiA8dGlmZjpCaXRzUGVyU2FtcGxlPiA8cmRmOlNlcT4gPHJkZjpsaT44PC9yZGY6bGk+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L3RpZmY6Qml0c1BlclNhbXBsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ZPTNUAAASBElEQVR4nO2dyY8cVx3HPz0z7Zmxx+Pd8cTGcSAkgFgTIOLAGnYJDrkhDggOXBB/DTcO3JDgAEiIRYgEKQgRFkFYQggQIITgxNt4vM3W09Mcfu+r96vX1dvYcXXX669Uqq7qV0vX7/t+63vVjU6nQ8ZohHW2D2Gu6huoGA33OUsSzFR9AxWiQZEAWWJKgLyfQdY/voP9/lky1gQ5EwBM8E0yfg7Z/vCAGcwRnmqATDFH5pHQlAAwz1QDZAtpgCkBMsUs0yggWzSIJqBZ8b1UhtwJ0MQIMFvxvVSGnAkAsA/Yz9QEZIldIgGyfQ7Z/nAsFSwCZJsLyJkAMxgBFpiagCwhAiwyJUCWkAk4zDQMzBJtYAk4w5QA2eII8EZME2SJ3AlwDLgfSwZlidwJsACsMNUA2WIBOB7WWSJ3AixjIeCBqm+kKuROgP1hfazSu6gQOROgQXT+jld5I1UiZwLMEFX/wSpvpErUjQCjzPaZBw6Fz1MTUAM0GI0AC0QNsDLEecv2TzzqRACPYYSjQhBYPWCUXMAMoxNuLFEnAjTcWlO++mEZSwUDHKW3H9ChOHM4FX7D7Zs41IUAZcIfJJATGAn0+fAerjXVAGOEtCcOEsxBogk4znCOoJ7XxPd8oU4E6GDj/BrE8f79Jn0cI5aBD1DMBaS93F9jhqhlZojmYSKJUBcCSPheQJr42aRcOCeTba8BvJ1P0Sj5Xn7CxD3PibvhAUgdNgmr7HcuJdtHStqkr42RZvHnm8ieL9SNAFLJ6csfUqFBt9NXlgvw6l3zCD0JpHmEXSYMdRwOLaFJ+F5NN7ChYNCd/z/tPkuQ3umTT+GJ1EnWE4c6aYD0lW/eUfOOoZCaAO8DiCw6Z3qeBjUQPkw+AbxAIKp/HxFIdfuQrQmcSs51kiIpdonaQg7lLEWHM33JVOpzjH2uYBIJkIZ3EoR3AL3tbhLfA6Tfe4QYBajtSaJf4OP8ZrimzuOvtYORwZsGfZ8KfSyf9ST5AJrIsUnskS2KD1uC82Zgjm5nbZnugaCLxMygNx+z4boikTTLblhmMU3RCZ933WdpkKkGuAPQgz+OPeAWJjSp5RQ+GmhiQhThj9MdBSwD97htmRd/rATpnURdY5Eo8GW6hT6WvsIkEQBi7z+L9eANoknw8H4AmAD9iyBW6C7+zAP3uW0/d1BmoIMJuU3UNruh7UbYvjcc57UQTAlw25A6vxi234H1uu2Stql/oBdBiCgrJW3BhAfRcVwIi3+JhATZJpKvFa7xLmyc4RpRG4w1qiZAWlYdBD38/wC3gE9glbydsH8WE4ZX1XL+5jFhztEdAQgiQMO1PxTWEqhsv3IKLcypfByrKfzL3Y/ajy2qJgAUQ6deRRjd5w6xJz4HrAIfA94Q9rUx9Ss17WsCGgBylN4EUDJoFjMRByg6g9tEjdIK93M/8KVw7t9S7viNpfqH6gngQzcJysfsZcRQ7+sAv8D8gk8BjxBDMzlsvr0SQUfoPQRMzmETywn4dwd4714q/zHgK+H774d76VV86oVRteAdRdUEgGLMLpu6zy1N18573QuYUH4G3AQ+jAnkGOaQyQmUrZY9P04kgJw63cMZ4Fxovx/r1RKoHMmbWM7gi8CXw718G9NG+4hEKev1ZYL221kSQPBE8NpAhFAcvhjWUvFrwK+wXvlB4OOYWlaSRpBTd5pYB9hN1ieAhzC7v0iRhC3MBDwMfBVT+zeAbwAvu3vu5fz50Upa+3qFyH1XSTAuiSCFVWlSx9fddzGhansLs9MbwPOYYN+NCfAB4KfA3ykSagl4PeYH6Bq+tx4A3gK8immSrbC/g2mEDwGfwbTEK8B3gWeJCaBNinmJtMeXqXkfrvok1l3BuBAAoipOCzfyCaQN2m7/LHFY1+8w5+7h0P6zwJ+Bf4djljGSvJ2Y8/flY+Fh4BomlKuYoM9i5uXdGDEuYsJ/gpgk8mlhocyRlYnAbVcWKYwTAWSP9VnrDtGp20fsRfL05zGBXgX+gNnx14V9HwdeAi5hgjuFaYg0T+AF9WZMq1wJ53wrFt8/FPZvAz8HfhSOWyQ6hdC/x3v/QEubKQG6kDpnEMMvn/nTw53DBHEZ+DVGgEPE7J5UdBMjCMnxHvdivfl6uP4ZzHe4Ea7xNPAdYB3TKiJh6thpLUG3KPoH6vmVhojjTgCvHhuYjZUWWAifpVqXwnIByxGcw0K+o5igFl27fmhiUcJKuPYCJuwFzJz8ADML92BE8X6J7l12fRfTGDIPvte36TY/dx3jTAD1Hj1g7dd3PlxsEDNyDUx9v4q9/+dQaKN5gBJMvwhI4d9mWJYx7fITzJzcG/YvuvMp5GyHe1av33bbEnqldt9jXAkgSPAtooNVFiotYmr4QFgOYb22Q+zx6eyeFD5hpLZzmPe/BfwT8wlkWq6H9jvh/raIBNh2+3aI2szb/rHAMATwY9+HvXE/ckbw4Zy2vTB9BOBH4kC3yvQPUQ94FhM6mLO3hPXSHawHq32vKWNpMkZZvznM/q9jUcRNTAscDudvUxT8VrL24wfSUUT+Weia2k6znr3gzc/IWmUYAvTLaKUX1I/bTbb992kPUBsJ2Dt/vqgC0aZuE4UNMXN3L5YDWCH6AMOmZsucONy9HMF6/xxGglUsKtCglJ1wT1sUC0aKWMqSPV64aUcYtdPtSavslQDpPt28er7StenQ6bIfltrDQT9kH5YAWsYyd6ewnnkWKwqdxTz/IxQnie4lw6Z7OYwRSxNN9mEVyfNhuYqRYZhzpRBJ0tyA/77fM/F+kT/XUIRojNGfR+/DhHaQ2NuOYWnbk5igV4gTOQ+6pZ9wPSFHRfpwwYSzHpZLGBFeDst/MedzNXx3EStbjy32SoBeNko2U1k6jajZj9nkw5gAj2GCU4h2DOvFJ0NbFWJu5wWO8vRvhwDQba4GQc7fKvA/jBSXsfD0CtGHWMUyjiKTzIkPGXtBNQTfzmtfrwHKzFn8QUMSwM+G8ZMjfaGmgfXWN2HZswcxVXwGE/qdKjzJR1CdYDfZFiHlGKYOFtyeOdD5NSB0L2hjUcQaRoLrGDFuhn2Xw+d1zAHdCO1uEP2ibWKYukMx3yAi+ZAUSpzEUcJAX73ygleZVTX0DWxUzDqmFg+5ZTksh7FwzQ/UHOU+vKPkhe/9Cy/81KYOi17H+euUEc77PGXX07iEI0Pexxb2TF8A/gY8g5keyeGWu6YPOf26FKOYAD+u3n/Wj9a+NsZKfafvF4mDLGQS9mOEWMEya/dgWuQoRpiDod0oL3Hy4Rb0FkKvY9OsXurRCzPsTZN47GA9W73/CmYermO9/ZpbroblGpaJVB4CillTX+IeGBYOQ4BBXuhrASV1DmHa4jRW478PcwaPYb3nRFiGfc3bIH+gTNC7WA9sMpq2kq2/jPXQG5jdv44J8CXML7iECXUjtLs5wjVuG+MUBYyCJqY5jhPJcRYL1e7HcgBH6Z4SNogAZVnGMnu/jgnzIubonQ+fr4T1K5gtv0J09NKcxl5QVr72KPN3+uJ2CFCmGQapxDSkSs+V2na1VXIpTedq5G6TqBHOAO8BHsVqAcvsLZrw6rOFhXcvAH8Ky0uY4F/BhDwq/CwjKPfa0/0ioU+WqQzdcscMnR28nVTwIOGnvSltnwqb5LN34uYoOqDzxHBRQ72WwudNTO1ewrSCv96w4aB3oNrhXM9iztdfMIdMHvkB4oAQ73mrx6dZv9RBLXsuHj7aUWHMp5KVZdQ1RkoEDZsJHOZkw2QMe+3XdjqLxme3NCrIRx7+xQ8aI3gTs7MiigZqDgrb0ogC4hAvDQlfDd+dxghwK7TZCNfVgJE016/fouuk4waHSWT5TuLzL2XPcmi1vtdU8O0g1SJl5sBHGH6ouB8trOM7RCFI4PuxtPBi2C9zobx8mQfvk1u6doeY698leuNtzDGUWhbZ9HtUBNpxx/ZTxYNSvWX7RulwPTEO5eDU9vm5AD755P/qvUVxBpDU6g1sUOf7MX9gnVjAWQvtDtLfDKjYNENMtqxh0chJ4I9h3xJxlI83TYIIpe/vhBN4xzEOBIBugeuzH0Kth6jSa1px3MGqgR8B3kacIHIeE+A6JvwH6P8vYR3Me7+FCXgGcwA3sQjjCPBXigkXn5FUCly/Q/eMazM2oVfVBPA2Pk01ezWt3uPtoezgHHGC6EeBT2PqeQsT5JOYT3AflnCaxwZ49sIVzNFTvv4wFlLewIjzXmIRSH88Ld8hFayfUg7FUUNjQYKqCQBR+J4McpR8VssLXWq1SUyDPg58MuxbxQaHPonZ7VOYBvgXJqh+BHg+HHsDi/GvYVrjwXDsCvDO8N1VjFAqPPnyszdtfhxASupKUTUBGiWfUzUpEqTbTeIonPcCn8fU8z8wwf8QU9unMEfwAqYVljEtoehA6WsJ7hlsePkBTPjnsfz7c0Tf4jRmZp7GvH8/JNyHeGkUo+v5t5Z4R/iua4WqCQDdxRMo9v40PNNIXcXa57BpWieApzDhP40J+B5i5W0WE+hzYX2i5Lrb2MjfS+GaW+G6LYwYF7Ak0+sxAlzEzAXheqrC+UEoaeLL5zbS/P1dxzgQoJMsUO4oSf1LIG3MPn8BE+b3sPH6LxFHDYlICttWMSFfCMf4yIPw/X+xXr2fOOBTiajnsSTT+zACPEqs9e9i5kClWa8FfKmaZH+lvsCdqtHvFV7wvqLVL9ctH2AJ+BwWmn0T+Bpm45eIJNG5NTy7hdnul8P50vcLXQJexPyKdaKvofV+4vDwJzDV/0jYr3v32UCtpRl8tnAsHMGqNcCwIZF3DjU8/DGsl38di80hRgSaQewfukbqXsF6uT+37LCKOfOhvRJLygkoAbUO/Ca0/QBmFp4imowUXs17TeAH0FaCqjXAsPCaYhabwLkP+BZR+HqPn588qjh8AxOaMnSvuHN7gVzGcgatcMwmMRewQBz7L1K8CPw4bL+NOAVt2N9SuRaYFAJAdATPYQ/uJ5i9hzhrWN68z5VvuEXTvc+78/r3CLxKzARuEid2pOlrEXEGMxu/xMzAWXfdXtU9f44y/+euYpIIAKbytzBP/nrY59OsvpLYIdpfCVXtvAnwCaf/hbXMhX8RpQiosFGaYR7zGX4fzn+UotDL6h1jg0kjwDamvvVOvtSHSQd/yPvfDMeKIErwpMdIo0gDaKSu2vkBGWmJVmMGNFW8kbQdS1TtBI4KP/mi10P1gyY0QrZFMbewitn7Q8Qy8TbxHYQSrMY2evi8RMcdLxLsUqw1jK3wYfI0gC8WScX7FKt36Lzql0BFgGsYCSBqhZsYKSCGfqoptN1+H5EI8j90b9t0+w1jiUnTAD516oXg060+m6ie7ytyYHn+q+GznsE60SwomyeSpdfyw7nSTGaZZz+2BJg0DdCrV6WFFvV4n4BJz3Mx2bdK1Aq+F4sEIpC0UJn3PlHCh8kjgJA+eN/7lfkrewOHt8dXKWIN0wxqJydSwvck89fy6euJw6QSoAze+x+myHIp2V5z7SVMmZHUhPjrTTQmzQfoBd8j5ZDJI/fwvTQ1AZeT7XRIV9l3E4+6EEBQ71d04B23VEVfoBijX3DfeW2S5hXSNhONupiAtPf3msuH23eZYl5h1X1OEzh+GFq/auXEoQ4awHv+XkBe/Zc5a9eIdX8oOoW9ZgXXotd71EUDaNDHKKXVa5jjJ6Q+gJD2/MoKN68F6kIAGF0wmr0Llu270KdtGhKOSraxRR1MwDDDycqwQ9QAaxS1Qb/r1MoM1EUD7KWuvo2NAIL+8/KV+PHXqg0J6kSAUdEi9npN9OyHtMZfC9TBBOwVbWKvX6W3BijTKrUhQF00wF5xy61b/RrWFbkTQMWf1b6taozcCSC1nxaGskHuBJAJSEvD2SB3Amxio4uvD2pYV+ROgC1smti1QQ3ritwJsIPNEZhqgEyxic34vTKoYV0xJYC9D2Ct4vuoDLkTYAfLAZRNAMkCUwJYKDgW7+upArkTYAubEFKL2v5ekDsBNP9vqgEyRZviDODskDsBpAHSSR/ZYEqA+BaQLJE7AVqYBpg6gZlC/wdUq3F+oyB3AvgZP1kidwLoHQK1mu41CnIngN4h5F8BkxVyJUDZfMIskSsBoPhnU5W9rr1q5EqAfu8NyAq5EgC6XyyVJXKeGaQZv9lGAMDE/nfwFHcI/wfIn77K89UlKwAAAABJRU5ErkJggg==";async function k(){function t(t){t.preventDefault(),t.stopPropagation()}function e(t,i,r){const n=i.pop();n?n.isFile?n.file(s=>{t.set(n.fullPath,s),e(t,i,r)},()=>l.error("Could not load file: %s",n.fullPath)):(l.warn("Unknown asset type: "+n.fullPath),e(t,i,r)):function(t,e){l.log("finishDropHandling2",e),Array.from(t).forEach(([t,e])=>{if(/\.(json)$/i.exec(e.name)??/\.(JSON)$/i.exec(e.name)){t.replace(e.name,"");const i=new FileReader;i.readAsText(e),i.onload=function(){if(!h().isString(i.result))throw new Error("error");const t=JSON.parse(i.result);v.setValues(t),y.add(v.getValues()),m.setParticles(v.getValues()),g.setParticles(v.getValues()),B(),m.stop(),g.stop(),m.reset(),g.reset(),m.play(),g.play()}}else if(/\.(jpg)$/i.exec(e.name)??/\.(JPG)$/i.exec(e.name)??/\.(png)$/i.exec(e.name)??/\.(PNG)$/i.exec(e.name)??/\.(jpeg)$/i.exec(e.name)??/\.(JPEG)$/i.exec(e.name)){const t=new FileReader;t.readAsDataURL(e),t.onloadend=function(){const e=document.createElement("img");e.src=t.result,m.setBackground(e),g.setBackground(e)}}})}(t,r)}function i(t,e,r){const n=e.pop();n?n.isFile?n.file(s=>{t.set(n.fullPath,s),i(t,e,r)},()=>l.error("Could not load file: %s",n.fullPath)):(l.warn("Unknown asset type: "+n.fullPath),i(t,e,r)):function(t,e){Array.from(t).forEach(([t,i])=>{if(/\.(json)$/i.exec(i.name)??/\.(JSON)$/i.exec(i.name)){t.replace(i.name,"");const e=new FileReader;e.readAsText(i),e.onload=function(){if(!h().isString(e.result))throw new Error("error");const t=JSON.parse(e.result);v.setValues(t),B(),m.reset(),g.reset(),m.play(),g.play()}}else if(/\.(jpg)$/i.exec(i.name)??/\.(png)$/i.exec(i.name)??/\.(JPG)$/i.exec(i.name)??/\.(PNG)$/i.exec(i.name)){const t=new FileReader;t.readAsDataURL(i),t.onloadend=function(){v.mouseDown(e),v.setTexture(t.result),y.add(v.getValues()),m.setParticles(v.getValues()),g.setParticles(v.getValues())}}else if(/\.(svg)$/i.exec(i.name)??/\.(SVG)$/i.exec(i.name)){const t=new FileReader;t.readAsText(i),t.onloadend=function(){const r=(new DOMParser).parseFromString(t.result,"text/xml").getElementsByTagName("path"),n=[];for(let t=0;t<r.length;t++)n.push(r[t].getAttribute("d"));null!=n&&(v.mouseDown(e),v.setShape(i.name,n),y.add(v.getValues()),m.setParticles(v.getValues()),g.setParticles(v.getValues()))}}})}(t,r)}function a(t){_=!1,v.mouseUp(t),B()}c=document.createElement("div"),document.title="Particle Editor "+"2.2.6".toString(),c.classList.add("row"),c.id="main doc",document.body.appendChild(c),d=document.createElement("div"),d.classList.add("column"),d.id="previewFrame",c.appendChild(d),p=document.createElement("div"),p.classList.add("column"),p.id="editor",c.appendChild(p),f=document.createElement("div"),f.classList.add("row1"),f.id="particles",d.appendChild(f),function(){const t=document.querySelector("head"),e=document.createElement("link");e.setAttribute("rel","shortcut icon"),e.setAttribute("href","./favicon.png"),null!=t&&t.appendChild(e)}(),["dragenter","dragover","dragleave","drop"].forEach(e=>{p.addEventListener(e,t,!1),f.addEventListener(e,t,!1),document.body.addEventListener(e,t,!1)}),d.addEventListener("drop",function(t){const i=new Map;let r=[];if(null==t.dataTransfer)throw new Error("er");if(t.dataTransfer.items){const e=[];Object.keys(t.dataTransfer.items).map(t=>Number(t)).forEach(i=>e.push(t.dataTransfer.items[i])),r=[].slice.call(e).map(t=>t.webkitGetAsEntry())}r||l.error("Required drag-and-drop APIs are not supported in this browser."),e(i,r,t)},!1),p.addEventListener("drop",function(t){const e=new Map;let r=[];if(null==t.dataTransfer)throw new Error("er");if(t.dataTransfer.items){const e=[];Object.keys(t.dataTransfer.items).map(t=>Number(t)).forEach(i=>e.push(t.dataTransfer.items[i])),r=[].slice.call(e).map(t=>t.webkitGetAsEntry())}r||l.error("Required drag-and-drop APIs are not supported in this browser."),i(e,r,t)},!1),v=new o.K,v.add(p),v.update(),x=v.getValues(),m=new r.m,m.add(d),g=new n.w,await g.init(),v.setPrefabList(),y=new s.B,0!=y.init().length?v.setValues(y.init()):y.set(x),m.setParticles(v.getValues()),g.setParticles(v.getValues()),m.play(),g.play(),d.addEventListener("mousemove",function(t){A=!0,m.updateParticlesPosition(t.x,t.y),g.updateParticlesPosition(t.x,t.y)},!1),d.addEventListener("mouseleave",function(){A=!1;const t=window.innerHeight,e=window.innerWidth/2;m.updateParticlesPosition(e/2,t/2),g.updateParticlesPosition(e/2,t/2)},!1),d.addEventListener("mousedown",function(){m.reset(),g.reset(),m.playOnce(),g.playOnce()},!1),p.addEventListener("mousedown",function(t){_=!0,v.mouseDown(t);const e=v.hitButton(t);""!=e&&async function(t){const e=await fetch(`http://localhost:3002/prefab/${t}`),i=await e.json();v.setValues(i),m.setParticles(v.getValues()),g.setParticles(v.getValues())}(e)},!1),p.addEventListener("mousemove",function(t){v.mouseMove(t),_&&"move"!=v.selected&&B()},!1),p.addEventListener("mouseleave",a,!1),p.addEventListener("mouseup",a,!1)}function B(){O(v.getEditorSettings()[0]);const t=v.getValues();v.historyNeedsUpdate()&&y.add(t),m.setParticles(t),g.setParticles(t)}function O(t){const e=window.innerHeight,i=window.innerWidth/2/2+t[1].values[0],r=e/2+t[2].values[0];E=t[4].values[0],0==t[5].values[0]?T=!1:1==t[5].values[0]&&(T=!0),m.updateParticlesPosition(i,r),g.updateParticlesPosition(i,r)}function L(){const t=JSON.stringify(v.getValues()),e=document.createElement("a"),i=new Blob([t],{type:"text/plain"});e.href=URL.createObjectURL(i),e.download="particle.json",e.click()}function U(){m.windowResize(),g.windowResize(),v.windowResize()}function D(t){m.event(t),g.event(t),v.keyboardEvent(t),"d"==t.key&&L(),"a"==t.key&&y.add(v.getValues()),"c"==t.key&&y.clear(),"x"==t.key&&(b?(m.detach(d),g.add(d),b=!1):(g.detach(d),m.add(d),b=!0)),t.ctrlKey&&"z"==t.key&&v.setValues(y.ctrlZ()),t.ctrlKey&&"q"==t.key&&v.setValues(y.ctrlR()),t.ctrlKey&&"m"==t.key&&(m.setTexture(I),g.setTexture(I),(new Image).src=I,N(I))}async function N(t){const e=await fetch(t),i=await e.blob(),r=URL.createObjectURL(i),n=document.createElement("a");n.href=r,n.download="image",document.body.appendChild(n),n.click(),document.body.removeChild(n)}var u;await k(),G(),document.addEventListener("resize",U,!0),document.addEventListener("keydown",D),function(t){t.Hidden="hidden",t.Visible="visible"}(u||(u={}));const F="visibilitychange";function z(){w=document.visibilityState!==u.Hidden}function G(){const t=requestAnimationFrame(G)/100;R>=100?(P+=1,P>=100&&(R=0,P=0)):R+=1,C+=1,C>150&&(C=0,m.animate(),R=0,P=0);const e=t%E/E,i=v.getPathPosition(e),r=window.innerWidth/2/2+i[0],n=window.innerHeight/2+i[1];0==A&&1==T&&(m.updateParticlesPosition(r,n),g.updateParticlesPosition(r,n)),M=M+500*t-500*S,M>=1e3&&(M=0),S=t,w&&(m.animate(),g.animate(),v.update()),m.windowResize(),g.windowResize(),v.windowResize()}document.addEventListener(F,z),e()}catch(j){e(j)}},1)},3917:(t,e,i)=>{"use strict";var r=i(7426),n=i(6166),s=i(6225),o=r.rotl32,a=r.sum32,h=r.sum32_5,l=s.ft_1,u=n.BlockHash,c=[1518500249,1859775393,2400959708,3395469782];function d(){if(!(this instanceof d))return new d;u.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.W=new Array(80)}r.inherits(d,u),t.exports=d,d.blockSize=512,d.outSize=160,d.hmacStrength=80,d.padLength=64,d.prototype._update=function(t,e){for(var i=this.W,r=0;r<16;r++)i[r]=t[e+r];for(;r<i.length;r++)i[r]=o(i[r-3]^i[r-8]^i[r-14]^i[r-16],1);var n=this.h[0],s=this.h[1],u=this.h[2],d=this.h[3],f=this.h[4];for(r=0;r<i.length;r++){var p=~~(r/20),m=h(o(n,5),l(p,s,u,d),f,i[r],c[p]);f=d,d=u,u=o(s,30),s=n,n=m}this.h[0]=a(this.h[0],n),this.h[1]=a(this.h[1],s),this.h[2]=a(this.h[2],u),this.h[3]=a(this.h[3],d),this.h[4]=a(this.h[4],f)},d.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},3918:(t,e,i)=>{"use strict";var r=i(5606);function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable})),i.push.apply(i,r)}return i}function s(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach(function(e){var r,n,s;r=t,n=e,s=i[e],(n=a(n))in r?Object.defineProperty(r,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):r[n]=s}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach(function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))})}return t}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,a(r.key),r)}}function a(t){var e=function(t){if("object"!==m(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!==m(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===m(e)?e:String(e)}function h(t,e){if(e&&("object"===m(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return l(t)}function l(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function u(t){var e="function"==typeof Map?new Map:void 0;return u=function(t){if(null===t||(i=t,-1===Function.toString.call(i).indexOf("[native code]")))return t;var i;if("function"!=typeof t)throw new TypeError("Super expression must either be null or a function");if(void 0!==e){if(e.has(t))return e.get(t);e.set(t,r)}function r(){return c(t,arguments,p(this).constructor)}return r.prototype=Object.create(t.prototype,{constructor:{value:r,enumerable:!1,writable:!0,configurable:!0}}),f(r,t)},u(t)}function c(t,e,i){return c=d()?Reflect.construct.bind():function(t,e,i){var r=[null];r.push.apply(r,e);var n=new(Function.bind.apply(t,r));return i&&f(n,i.prototype),n},c.apply(null,arguments)}function d(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}function f(t,e){return f=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},f(t,e)}function p(t){return p=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},p(t)}function m(t){return m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},m(t)}var g=i(537).inspect,v=i(9597).codes.ERR_INVALID_ARG_TYPE;function y(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-e.length,i)===e}var b="",_="",x="",w="",M={deepStrictEqual:"Expected values to be strictly deep-equal:",strictEqual:"Expected values to be strictly equal:",strictEqualObject:'Expected "actual" to be reference-equal to "expected":',deepEqual:"Expected values to be loosely deep-equal:",equal:"Expected values to be loosely equal:",notDeepStrictEqual:'Expected "actual" not to be strictly deep-equal to:',notStrictEqual:'Expected "actual" to be strictly unequal to:',notStrictEqualObject:'Expected "actual" not to be reference-equal to "expected":',notDeepEqual:'Expected "actual" not to be loosely deep-equal to:',notEqual:'Expected "actual" to be loosely unequal to:',notIdentical:"Values identical but not reference-equal:"};function S(t){var e=Object.keys(t),i=Object.create(Object.getPrototypeOf(t));return e.forEach(function(e){i[e]=t[e]}),Object.defineProperty(i,"message",{value:t.message}),i}function A(t){return g(t,{compact:!1,customInspect:!1,depth:1e3,maxArrayLength:1/0,showHidden:!1,breakLength:1/0,showProxy:!1,sorted:!0,getters:!0})}var E=function(t,e){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&f(t,e)}(E,t);var i,n,a,u,c=(i=E,n=d(),function(){var t,e=p(i);if(n){var r=p(this).constructor;t=Reflect.construct(e,arguments,r)}else t=e.apply(this,arguments);return h(this,t)});function E(t){var e;if(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,E),"object"!==m(t)||null===t)throw new v("options","Object",t);var i=t.message,n=t.operator,s=t.stackStartFn,o=t.actual,a=t.expected,u=Error.stackTraceLimit;if(Error.stackTraceLimit=0,null!=i)e=c.call(this,String(i));else if(r.stderr&&r.stderr.isTTY&&(r.stderr&&r.stderr.getColorDepth&&1!==r.stderr.getColorDepth()?(b="[34m",_="[32m",w="[39m",x="[31m"):(b="",_="",w="",x="")),"object"===m(o)&&null!==o&&"object"===m(a)&&null!==a&&"stack"in o&&o instanceof Error&&"stack"in a&&a instanceof Error&&(o=S(o),a=S(a)),"deepStrictEqual"===n||"strictEqual"===n)e=c.call(this,function(t,e,i){var n="",s="",o=0,a="",h=!1,l=A(t),u=l.split("\n"),c=A(e).split("\n"),d=0,f="";if("strictEqual"===i&&"object"===m(t)&&"object"===m(e)&&null!==t&&null!==e&&(i="strictEqualObject"),1===u.length&&1===c.length&&u[0]!==c[0]){var p=u[0].length+c[0].length;if(p<=10){if(!("object"===m(t)&&null!==t||"object"===m(e)&&null!==e||0===t&&0===e))return"".concat(M[i],"\n\n")+"".concat(u[0]," !== ").concat(c[0],"\n")}else if("strictEqualObject"!==i&&p<(r.stderr&&r.stderr.isTTY?r.stderr.columns:80)){for(;u[0][d]===c[0][d];)d++;d>2&&(f="\n  ".concat(function(t,e){if(e=Math.floor(e),0==t.length||0==e)return"";var i=t.length*e;for(e=Math.floor(Math.log(e)/Math.log(2));e;)t+=t,e--;return t+t.substring(0,i-t.length)}(" ",d),"^"),d=0)}}for(var g=u[u.length-1],v=c[c.length-1];g===v&&(d++<2?a="\n  ".concat(g).concat(a):n=g,u.pop(),c.pop(),0!==u.length&&0!==c.length);)g=u[u.length-1],v=c[c.length-1];var S=Math.max(u.length,c.length);if(0===S){var E=l.split("\n");if(E.length>30)for(E[26]="".concat(b,"...").concat(w);E.length>27;)E.pop();return"".concat(M.notIdentical,"\n\n").concat(E.join("\n"),"\n")}d>3&&(a="\n".concat(b,"...").concat(w).concat(a),h=!0),""!==n&&(a="\n  ".concat(n).concat(a),n="");var T=0,R=M[i]+"\n".concat(_,"+ actual").concat(w," ").concat(x,"- expected").concat(w),P=" ".concat(b,"...").concat(w," Lines skipped");for(d=0;d<S;d++){var C=d-o;if(u.length<d+1)C>1&&d>2&&(C>4?(s+="\n".concat(b,"...").concat(w),h=!0):C>3&&(s+="\n  ".concat(c[d-2]),T++),s+="\n  ".concat(c[d-1]),T++),o=d,n+="\n".concat(x,"-").concat(w," ").concat(c[d]),T++;else if(c.length<d+1)C>1&&d>2&&(C>4?(s+="\n".concat(b,"...").concat(w),h=!0):C>3&&(s+="\n  ".concat(u[d-2]),T++),s+="\n  ".concat(u[d-1]),T++),o=d,s+="\n".concat(_,"+").concat(w," ").concat(u[d]),T++;else{var I=c[d],k=u[d],B=k!==I&&(!y(k,",")||k.slice(0,-1)!==I);B&&y(I,",")&&I.slice(0,-1)===k&&(B=!1,k+=","),B?(C>1&&d>2&&(C>4?(s+="\n".concat(b,"...").concat(w),h=!0):C>3&&(s+="\n  ".concat(u[d-2]),T++),s+="\n  ".concat(u[d-1]),T++),o=d,s+="\n".concat(_,"+").concat(w," ").concat(k),n+="\n".concat(x,"-").concat(w," ").concat(I),T+=2):(s+=n,n="",1!==C&&0!==d||(s+="\n  ".concat(k),T++))}if(T>20&&d<S-2)return"".concat(R).concat(P,"\n").concat(s,"\n").concat(b,"...").concat(w).concat(n,"\n")+"".concat(b,"...").concat(w)}return"".concat(R).concat(h?P:"","\n").concat(s).concat(n).concat(a).concat(f)}(o,a,n));else if("notDeepStrictEqual"===n||"notStrictEqual"===n){var d=M[n],f=A(o).split("\n");if("notStrictEqual"===n&&"object"===m(o)&&null!==o&&(d=M.notStrictEqualObject),f.length>30)for(f[26]="".concat(b,"...").concat(w);f.length>27;)f.pop();e=1===f.length?c.call(this,"".concat(d," ").concat(f[0])):c.call(this,"".concat(d,"\n\n").concat(f.join("\n"),"\n"))}else{var p=A(o),g="",T=M[n];"notDeepEqual"===n||"notEqual"===n?(p="".concat(M[n],"\n\n").concat(p)).length>1024&&(p="".concat(p.slice(0,1021),"...")):(g="".concat(A(a)),p.length>512&&(p="".concat(p.slice(0,509),"...")),g.length>512&&(g="".concat(g.slice(0,509),"...")),"deepEqual"===n||"equal"===n?p="".concat(T,"\n\n").concat(p,"\n\nshould equal\n\n"):g=" ".concat(n," ").concat(g)),e=c.call(this,"".concat(p).concat(g))}return Error.stackTraceLimit=u,e.generatedMessage=!i,Object.defineProperty(l(e),"name",{value:"AssertionError [ERR_ASSERTION]",enumerable:!1,writable:!0,configurable:!0}),e.code="ERR_ASSERTION",e.actual=o,e.expected=a,e.operator=n,Error.captureStackTrace&&Error.captureStackTrace(l(e),s),e.stack,e.name="AssertionError",h(e)}return a=E,(u=[{key:"toString",value:function(){return"".concat(this.name," [").concat(this.code,"]: ").concat(this.message)}},{key:e,value:function(t,e){return g(this,s(s({},e),{},{customInspect:!1,depth:0}))}}])&&o(a.prototype,u),Object.defineProperty(a,"prototype",{writable:!1}),E}(u(Error),g.custom);t.exports=E},3988:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=i(1917).A.Uint8Array},4e3:(t,e,i)=>{"use strict";i.d(e,{P:()=>l,_:()=>o});const r={};function n(t){const e=[];if(1===t)e.push("@group(1) @binding(0) var textureSource1: texture_2d<f32>;"),e.push("@group(1) @binding(1) var textureSampler1: sampler;");else{let i=0;for(let r=0;r<t;r++)e.push(`@group(1) @binding(${i++}) var textureSource${r+1}: texture_2d<f32>;`),e.push(`@group(1) @binding(${i++}) var textureSampler${r+1}: sampler;`)}return e.join("\n")}function s(t){const e=[];if(1===t)e.push("outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);");else{e.push("switch vTextureId {");for(let i=0;i<t;i++)i===t-1?e.push("  default:{"):e.push(`  case ${i}:{`),e.push(`      outColor = textureSampleGrad(textureSource${i+1}, textureSampler${i+1}, vUV, uvDx, uvDy);`),e.push("      break;}");e.push("}")}return e.join("\n")}function o(t){return r[t]||(r[t]={name:"texture-batch-bit",vertex:{header:"\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            "},fragment:{header:`\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${n(t)}\n            `,main:`\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${s(t)}\n            `}}),r[t]}const a={};function h(t){const e=[];for(let i=0;i<t;i++)i>0&&e.push("else"),i<t-1&&e.push(`if(vTextureId < ${i}.5)`),e.push("{"),e.push(`\toutColor = texture(uTextures[${i}], vUV);`),e.push("}");return e.join("\n")}function l(t){return a[t]||(a[t]={name:"texture-batch-bit",vertex:{header:"\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            ",main:"\n                vTextureId = aTextureIdAndRound.y;\n            ",end:"\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            "},fragment:{header:`\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${t}];\n\n            `,main:`\n\n                ${h(t)}\n            `}}),a[t]}},4011:t=>{t.exports={doubles:{step:4,points:[["e60fce93b59e9ec53011aabc21c23e97b2a31369b87a5ae9c44ee89e2a6dec0a","f7e3507399e595929db99f34f57937101296891e44d23f0be1f32cce69616821"],["8282263212c609d9ea2a6e3e172de238d8c39cabd5ac1ca10646e23fd5f51508","11f8a8098557dfe45e8256e830b60ace62d613ac2f7b17bed31b6eaff6e26caf"],["175e159f728b865a72f99cc6c6fc846de0b93833fd2222ed73fce5b551e5b739","d3506e0d9e3c79eba4ef97a51ff71f5eacb5955add24345c6efa6ffee9fed695"],["363d90d447b00c9c99ceac05b6262ee053441c7e55552ffe526bad8f83ff4640","4e273adfc732221953b445397f3363145b9a89008199ecb62003c7f3bee9de9"],["8b4b5f165df3c2be8c6244b5b745638843e4a781a15bcd1b69f79a55dffdf80c","4aad0a6f68d308b4b3fbd7813ab0da04f9e336546162ee56b3eff0c65fd4fd36"],["723cbaa6e5db996d6bf771c00bd548c7b700dbffa6c0e77bcb6115925232fcda","96e867b5595cc498a921137488824d6e2660a0653779494801dc069d9eb39f5f"],["eebfa4d493bebf98ba5feec812c2d3b50947961237a919839a533eca0e7dd7fa","5d9a8ca3970ef0f269ee7edaf178089d9ae4cdc3a711f712ddfd4fdae1de8999"],["100f44da696e71672791d0a09b7bde459f1215a29b3c03bfefd7835b39a48db0","cdd9e13192a00b772ec8f3300c090666b7ff4a18ff5195ac0fbd5cd62bc65a09"],["e1031be262c7ed1b1dc9227a4a04c017a77f8d4464f3b3852c8acde6e534fd2d","9d7061928940405e6bb6a4176597535af292dd419e1ced79a44f18f29456a00d"],["feea6cae46d55b530ac2839f143bd7ec5cf8b266a41d6af52d5e688d9094696d","e57c6b6c97dce1bab06e4e12bf3ecd5c981c8957cc41442d3155debf18090088"],["da67a91d91049cdcb367be4be6ffca3cfeed657d808583de33fa978bc1ec6cb1","9bacaa35481642bc41f463f7ec9780e5dec7adc508f740a17e9ea8e27a68be1d"],["53904faa0b334cdda6e000935ef22151ec08d0f7bb11069f57545ccc1a37b7c0","5bc087d0bc80106d88c9eccac20d3c1c13999981e14434699dcb096b022771c8"],["8e7bcd0bd35983a7719cca7764ca906779b53a043a9b8bcaeff959f43ad86047","10b7770b2a3da4b3940310420ca9514579e88e2e47fd68b3ea10047e8460372a"],["385eed34c1cdff21e6d0818689b81bde71a7f4f18397e6690a841e1599c43862","283bebc3e8ea23f56701de19e9ebf4576b304eec2086dc8cc0458fe5542e5453"],["6f9d9b803ecf191637c73a4413dfa180fddf84a5947fbc9c606ed86c3fac3a7","7c80c68e603059ba69b8e2a30e45c4d47ea4dd2f5c281002d86890603a842160"],["3322d401243c4e2582a2147c104d6ecbf774d163db0f5e5313b7e0e742d0e6bd","56e70797e9664ef5bfb019bc4ddaf9b72805f63ea2873af624f3a2e96c28b2a0"],["85672c7d2de0b7da2bd1770d89665868741b3f9af7643397721d74d28134ab83","7c481b9b5b43b2eb6374049bfa62c2e5e77f17fcc5298f44c8e3094f790313a6"],["948bf809b1988a46b06c9f1919413b10f9226c60f668832ffd959af60c82a0a","53a562856dcb6646dc6b74c5d1c3418c6d4dff08c97cd2bed4cb7f88d8c8e589"],["6260ce7f461801c34f067ce0f02873a8f1b0e44dfc69752accecd819f38fd8e8","bc2da82b6fa5b571a7f09049776a1ef7ecd292238051c198c1a84e95b2b4ae17"],["e5037de0afc1d8d43d8348414bbf4103043ec8f575bfdc432953cc8d2037fa2d","4571534baa94d3b5f9f98d09fb990bddbd5f5b03ec481f10e0e5dc841d755bda"],["e06372b0f4a207adf5ea905e8f1771b4e7e8dbd1c6a6c5b725866a0ae4fce725","7a908974bce18cfe12a27bb2ad5a488cd7484a7787104870b27034f94eee31dd"],["213c7a715cd5d45358d0bbf9dc0ce02204b10bdde2a3f58540ad6908d0559754","4b6dad0b5ae462507013ad06245ba190bb4850f5f36a7eeddff2c27534b458f2"],["4e7c272a7af4b34e8dbb9352a5419a87e2838c70adc62cddf0cc3a3b08fbd53c","17749c766c9d0b18e16fd09f6def681b530b9614bff7dd33e0b3941817dcaae6"],["fea74e3dbe778b1b10f238ad61686aa5c76e3db2be43057632427e2840fb27b6","6e0568db9b0b13297cf674deccb6af93126b596b973f7b77701d3db7f23cb96f"],["76e64113f677cf0e10a2570d599968d31544e179b760432952c02a4417bdde39","c90ddf8dee4e95cf577066d70681f0d35e2a33d2b56d2032b4b1752d1901ac01"],["c738c56b03b2abe1e8281baa743f8f9a8f7cc643df26cbee3ab150242bcbb891","893fb578951ad2537f718f2eacbfbbbb82314eef7880cfe917e735d9699a84c3"],["d895626548b65b81e264c7637c972877d1d72e5f3a925014372e9f6588f6c14b","febfaa38f2bc7eae728ec60818c340eb03428d632bb067e179363ed75d7d991f"],["b8da94032a957518eb0f6433571e8761ceffc73693e84edd49150a564f676e03","2804dfa44805a1e4d7c99cc9762808b092cc584d95ff3b511488e4e74efdf6e7"],["e80fea14441fb33a7d8adab9475d7fab2019effb5156a792f1a11778e3c0df5d","eed1de7f638e00771e89768ca3ca94472d155e80af322ea9fcb4291b6ac9ec78"],["a301697bdfcd704313ba48e51d567543f2a182031efd6915ddc07bbcc4e16070","7370f91cfb67e4f5081809fa25d40f9b1735dbf7c0a11a130c0d1a041e177ea1"],["90ad85b389d6b936463f9d0512678de208cc330b11307fffab7ac63e3fb04ed4","e507a3620a38261affdcbd9427222b839aefabe1582894d991d4d48cb6ef150"],["8f68b9d2f63b5f339239c1ad981f162ee88c5678723ea3351b7b444c9ec4c0da","662a9f2dba063986de1d90c2b6be215dbbea2cfe95510bfdf23cbf79501fff82"],["e4f3fb0176af85d65ff99ff9198c36091f48e86503681e3e6686fd5053231e11","1e63633ad0ef4f1c1661a6d0ea02b7286cc7e74ec951d1c9822c38576feb73bc"],["8c00fa9b18ebf331eb961537a45a4266c7034f2f0d4e1d0716fb6eae20eae29e","efa47267fea521a1a9dc343a3736c974c2fadafa81e36c54e7d2a4c66702414b"],["e7a26ce69dd4829f3e10cec0a9e98ed3143d084f308b92c0997fddfc60cb3e41","2a758e300fa7984b471b006a1aafbb18d0a6b2c0420e83e20e8a9421cf2cfd51"],["b6459e0ee3662ec8d23540c223bcbdc571cbcb967d79424f3cf29eb3de6b80ef","67c876d06f3e06de1dadf16e5661db3c4b3ae6d48e35b2ff30bf0b61a71ba45"],["d68a80c8280bb840793234aa118f06231d6f1fc67e73c5a5deda0f5b496943e8","db8ba9fff4b586d00c4b1f9177b0e28b5b0e7b8f7845295a294c84266b133120"],["324aed7df65c804252dc0270907a30b09612aeb973449cea4095980fc28d3d5d","648a365774b61f2ff130c0c35aec1f4f19213b0c7e332843967224af96ab7c84"],["4df9c14919cde61f6d51dfdbe5fee5dceec4143ba8d1ca888e8bd373fd054c96","35ec51092d8728050974c23a1d85d4b5d506cdc288490192ebac06cad10d5d"],["9c3919a84a474870faed8a9c1cc66021523489054d7f0308cbfc99c8ac1f98cd","ddb84f0f4a4ddd57584f044bf260e641905326f76c64c8e6be7e5e03d4fc599d"],["6057170b1dd12fdf8de05f281d8e06bb91e1493a8b91d4cc5a21382120a959e5","9a1af0b26a6a4807add9a2daf71df262465152bc3ee24c65e899be932385a2a8"],["a576df8e23a08411421439a4518da31880cef0fba7d4df12b1a6973eecb94266","40a6bf20e76640b2c92b97afe58cd82c432e10a7f514d9f3ee8be11ae1b28ec8"],["7778a78c28dec3e30a05fe9629de8c38bb30d1f5cf9a3a208f763889be58ad71","34626d9ab5a5b22ff7098e12f2ff580087b38411ff24ac563b513fc1fd9f43ac"],["928955ee637a84463729fd30e7afd2ed5f96274e5ad7e5cb09eda9c06d903ac","c25621003d3f42a827b78a13093a95eeac3d26efa8a8d83fc5180e935bcd091f"],["85d0fef3ec6db109399064f3a0e3b2855645b4a907ad354527aae75163d82751","1f03648413a38c0be29d496e582cf5663e8751e96877331582c237a24eb1f962"],["ff2b0dce97eece97c1c9b6041798b85dfdfb6d8882da20308f5404824526087e","493d13fef524ba188af4c4dc54d07936c7b7ed6fb90e2ceb2c951e01f0c29907"],["827fbbe4b1e880ea9ed2b2e6301b212b57f1ee148cd6dd28780e5e2cf856e241","c60f9c923c727b0b71bef2c67d1d12687ff7a63186903166d605b68baec293ec"],["eaa649f21f51bdbae7be4ae34ce6e5217a58fdce7f47f9aa7f3b58fa2120e2b3","be3279ed5bbbb03ac69a80f89879aa5a01a6b965f13f7e59d47a5305ba5ad93d"],["e4a42d43c5cf169d9391df6decf42ee541b6d8f0c9a137401e23632dda34d24f","4d9f92e716d1c73526fc99ccfb8ad34ce886eedfa8d8e4f13a7f7131deba9414"],["1ec80fef360cbdd954160fadab352b6b92b53576a88fea4947173b9d4300bf19","aeefe93756b5340d2f3a4958a7abbf5e0146e77f6295a07b671cdc1cc107cefd"],["146a778c04670c2f91b00af4680dfa8bce3490717d58ba889ddb5928366642be","b318e0ec3354028add669827f9d4b2870aaa971d2f7e5ed1d0b297483d83efd0"],["fa50c0f61d22e5f07e3acebb1aa07b128d0012209a28b9776d76a8793180eef9","6b84c6922397eba9b72cd2872281a68a5e683293a57a213b38cd8d7d3f4f2811"],["da1d61d0ca721a11b1a5bf6b7d88e8421a288ab5d5bba5220e53d32b5f067ec2","8157f55a7c99306c79c0766161c91e2966a73899d279b48a655fba0f1ad836f1"],["a8e282ff0c9706907215ff98e8fd416615311de0446f1e062a73b0610d064e13","7f97355b8db81c09abfb7f3c5b2515888b679a3e50dd6bd6cef7c73111f4cc0c"],["174a53b9c9a285872d39e56e6913cab15d59b1fa512508c022f382de8319497c","ccc9dc37abfc9c1657b4155f2c47f9e6646b3a1d8cb9854383da13ac079afa73"],["959396981943785c3d3e57edf5018cdbe039e730e4918b3d884fdff09475b7ba","2e7e552888c331dd8ba0386a4b9cd6849c653f64c8709385e9b8abf87524f2fd"],["d2a63a50ae401e56d645a1153b109a8fcca0a43d561fba2dbb51340c9d82b151","e82d86fb6443fcb7565aee58b2948220a70f750af484ca52d4142174dcf89405"],["64587e2335471eb890ee7896d7cfdc866bacbdbd3839317b3436f9b45617e073","d99fcdd5bf6902e2ae96dd6447c299a185b90a39133aeab358299e5e9faf6589"],["8481bde0e4e4d885b3a546d3e549de042f0aa6cea250e7fd358d6c86dd45e458","38ee7b8cba5404dd84a25bf39cecb2ca900a79c42b262e556d64b1b59779057e"],["13464a57a78102aa62b6979ae817f4637ffcfed3c4b1ce30bcd6303f6caf666b","69be159004614580ef7e433453ccb0ca48f300a81d0942e13f495a907f6ecc27"],["bc4a9df5b713fe2e9aef430bcc1dc97a0cd9ccede2f28588cada3a0d2d83f366","d3a81ca6e785c06383937adf4b798caa6e8a9fbfa547b16d758d666581f33c1"],["8c28a97bf8298bc0d23d8c749452a32e694b65e30a9472a3954ab30fe5324caa","40a30463a3305193378fedf31f7cc0eb7ae784f0451cb9459e71dc73cbef9482"],["8ea9666139527a8c1dd94ce4f071fd23c8b350c5a4bb33748c4ba111faccae0","620efabbc8ee2782e24e7c0cfb95c5d735b783be9cf0f8e955af34a30e62b945"],["dd3625faef5ba06074669716bbd3788d89bdde815959968092f76cc4eb9a9787","7a188fa3520e30d461da2501045731ca941461982883395937f68d00c644a573"],["f710d79d9eb962297e4f6232b40e8f7feb2bc63814614d692c12de752408221e","ea98e67232d3b3295d3b535532115ccac8612c721851617526ae47a9c77bfc82"]]},naf:{wnd:7,points:[["f9308a019258c31049344f85f89d5229b531c845836f99b08601f113bce036f9","388f7b0f632de8140fe337e62a37f3566500a99934c2231b6cb9fd7584b8e672"],["2f8bde4d1a07209355b4a7250a5c5128e88b84bddc619ab7cba8d569b240efe4","d8ac222636e5e3d6d4dba9dda6c9c426f788271bab0d6840dca87d3aa6ac62d6"],["5cbdf0646e5db4eaa398f365f2ea7a0e3d419b7e0330e39ce92bddedcac4f9bc","6aebca40ba255960a3178d6d861a54dba813d0b813fde7b5a5082628087264da"],["acd484e2f0c7f65309ad178a9f559abde09796974c57e714c35f110dfc27ccbe","cc338921b0a7d9fd64380971763b61e9add888a4375f8e0f05cc262ac64f9c37"],["774ae7f858a9411e5ef4246b70c65aac5649980be5c17891bbec17895da008cb","d984a032eb6b5e190243dd56d7b7b365372db1e2dff9d6a8301d74c9c953c61b"],["f28773c2d975288bc7d1d205c3748651b075fbc6610e58cddeeddf8f19405aa8","ab0902e8d880a89758212eb65cdaf473a1a06da521fa91f29b5cb52db03ed81"],["d7924d4f7d43ea965a465ae3095ff41131e5946f3c85f79e44adbcf8e27e080e","581e2872a86c72a683842ec228cc6defea40af2bd896d3a5c504dc9ff6a26b58"],["defdea4cdb677750a420fee807eacf21eb9898ae79b9768766e4faa04a2d4a34","4211ab0694635168e997b0ead2a93daeced1f4a04a95c0f6cfb199f69e56eb77"],["2b4ea0a797a443d293ef5cff444f4979f06acfebd7e86d277475656138385b6c","85e89bc037945d93b343083b5a1c86131a01f60c50269763b570c854e5c09b7a"],["352bbf4a4cdd12564f93fa332ce333301d9ad40271f8107181340aef25be59d5","321eb4075348f534d59c18259dda3e1f4a1b3b2e71b1039c67bd3d8bcf81998c"],["2fa2104d6b38d11b0230010559879124e42ab8dfeff5ff29dc9cdadd4ecacc3f","2de1068295dd865b64569335bd5dd80181d70ecfc882648423ba76b532b7d67"],["9248279b09b4d68dab21a9b066edda83263c3d84e09572e269ca0cd7f5453714","73016f7bf234aade5d1aa71bdea2b1ff3fc0de2a887912ffe54a32ce97cb3402"],["daed4f2be3a8bf278e70132fb0beb7522f570e144bf615c07e996d443dee8729","a69dce4a7d6c98e8d4a1aca87ef8d7003f83c230f3afa726ab40e52290be1c55"],["c44d12c7065d812e8acf28d7cbb19f9011ecd9e9fdf281b0e6a3b5e87d22e7db","2119a460ce326cdc76c45926c982fdac0e106e861edf61c5a039063f0e0e6482"],["6a245bf6dc698504c89a20cfded60853152b695336c28063b61c65cbd269e6b4","e022cf42c2bd4a708b3f5126f16a24ad8b33ba48d0423b6efd5e6348100d8a82"],["1697ffa6fd9de627c077e3d2fe541084ce13300b0bec1146f95ae57f0d0bd6a5","b9c398f186806f5d27561506e4557433a2cf15009e498ae7adee9d63d01b2396"],["605bdb019981718b986d0f07e834cb0d9deb8360ffb7f61df982345ef27a7479","2972d2de4f8d20681a78d93ec96fe23c26bfae84fb14db43b01e1e9056b8c49"],["62d14dab4150bf497402fdc45a215e10dcb01c354959b10cfe31c7e9d87ff33d","80fc06bd8cc5b01098088a1950eed0db01aa132967ab472235f5642483b25eaf"],["80c60ad0040f27dade5b4b06c408e56b2c50e9f56b9b8b425e555c2f86308b6f","1c38303f1cc5c30f26e66bad7fe72f70a65eed4cbe7024eb1aa01f56430bd57a"],["7a9375ad6167ad54aa74c6348cc54d344cc5dc9487d847049d5eabb0fa03c8fb","d0e3fa9eca8726909559e0d79269046bdc59ea10c70ce2b02d499ec224dc7f7"],["d528ecd9b696b54c907a9ed045447a79bb408ec39b68df504bb51f459bc3ffc9","eecf41253136e5f99966f21881fd656ebc4345405c520dbc063465b521409933"],["49370a4b5f43412ea25f514e8ecdad05266115e4a7ecb1387231808f8b45963","758f3f41afd6ed428b3081b0512fd62a54c3f3afbb5b6764b653052a12949c9a"],["77f230936ee88cbbd73df930d64702ef881d811e0e1498e2f1c13eb1fc345d74","958ef42a7886b6400a08266e9ba1b37896c95330d97077cbbe8eb3c7671c60d6"],["f2dac991cc4ce4b9ea44887e5c7c0bce58c80074ab9d4dbaeb28531b7739f530","e0dedc9b3b2f8dad4da1f32dec2531df9eb5fbeb0598e4fd1a117dba703a3c37"],["463b3d9f662621fb1b4be8fbbe2520125a216cdfc9dae3debcba4850c690d45b","5ed430d78c296c3543114306dd8622d7c622e27c970a1de31cb377b01af7307e"],["f16f804244e46e2a09232d4aff3b59976b98fac14328a2d1a32496b49998f247","cedabd9b82203f7e13d206fcdf4e33d92a6c53c26e5cce26d6579962c4e31df6"],["caf754272dc84563b0352b7a14311af55d245315ace27c65369e15f7151d41d1","cb474660ef35f5f2a41b643fa5e460575f4fa9b7962232a5c32f908318a04476"],["2600ca4b282cb986f85d0f1709979d8b44a09c07cb86d7c124497bc86f082120","4119b88753c15bd6a693b03fcddbb45d5ac6be74ab5f0ef44b0be9475a7e4b40"],["7635ca72d7e8432c338ec53cd12220bc01c48685e24f7dc8c602a7746998e435","91b649609489d613d1d5e590f78e6d74ecfc061d57048bad9e76f302c5b9c61"],["754e3239f325570cdbbf4a87deee8a66b7f2b33479d468fbc1a50743bf56cc18","673fb86e5bda30fb3cd0ed304ea49a023ee33d0197a695d0c5d98093c536683"],["e3e6bd1071a1e96aff57859c82d570f0330800661d1c952f9fe2694691d9b9e8","59c9e0bba394e76f40c0aa58379a3cb6a5a2283993e90c4167002af4920e37f5"],["186b483d056a033826ae73d88f732985c4ccb1f32ba35f4b4cc47fdcf04aa6eb","3b952d32c67cf77e2e17446e204180ab21fb8090895138b4a4a797f86e80888b"],["df9d70a6b9876ce544c98561f4be4f725442e6d2b737d9c91a8321724ce0963f","55eb2dafd84d6ccd5f862b785dc39d4ab157222720ef9da217b8c45cf2ba2417"],["5edd5cc23c51e87a497ca815d5dce0f8ab52554f849ed8995de64c5f34ce7143","efae9c8dbc14130661e8cec030c89ad0c13c66c0d17a2905cdc706ab7399a868"],["290798c2b6476830da12fe02287e9e777aa3fba1c355b17a722d362f84614fba","e38da76dcd440621988d00bcf79af25d5b29c094db2a23146d003afd41943e7a"],["af3c423a95d9f5b3054754efa150ac39cd29552fe360257362dfdecef4053b45","f98a3fd831eb2b749a93b0e6f35cfb40c8cd5aa667a15581bc2feded498fd9c6"],["766dbb24d134e745cccaa28c99bf274906bb66b26dcf98df8d2fed50d884249a","744b1152eacbe5e38dcc887980da38b897584a65fa06cedd2c924f97cbac5996"],["59dbf46f8c94759ba21277c33784f41645f7b44f6c596a58ce92e666191abe3e","c534ad44175fbc300f4ea6ce648309a042ce739a7919798cd85e216c4a307f6e"],["f13ada95103c4537305e691e74e9a4a8dd647e711a95e73cb62dc6018cfd87b8","e13817b44ee14de663bf4bc808341f326949e21a6a75c2570778419bdaf5733d"],["7754b4fa0e8aced06d4167a2c59cca4cda1869c06ebadfb6488550015a88522c","30e93e864e669d82224b967c3020b8fa8d1e4e350b6cbcc537a48b57841163a2"],["948dcadf5990e048aa3874d46abef9d701858f95de8041d2a6828c99e2262519","e491a42537f6e597d5d28a3224b1bc25df9154efbd2ef1d2cbba2cae5347d57e"],["7962414450c76c1689c7b48f8202ec37fb224cf5ac0bfa1570328a8a3d7c77ab","100b610ec4ffb4760d5c1fc133ef6f6b12507a051f04ac5760afa5b29db83437"],["3514087834964b54b15b160644d915485a16977225b8847bb0dd085137ec47ca","ef0afbb2056205448e1652c48e8127fc6039e77c15c2378b7e7d15a0de293311"],["d3cc30ad6b483e4bc79ce2c9dd8bc54993e947eb8df787b442943d3f7b527eaf","8b378a22d827278d89c5e9be8f9508ae3c2ad46290358630afb34db04eede0a4"],["1624d84780732860ce1c78fcbfefe08b2b29823db913f6493975ba0ff4847610","68651cf9b6da903e0914448c6cd9d4ca896878f5282be4c8cc06e2a404078575"],["733ce80da955a8a26902c95633e62a985192474b5af207da6df7b4fd5fc61cd4","f5435a2bd2badf7d485a4d8b8db9fcce3e1ef8e0201e4578c54673bc1dc5ea1d"],["15d9441254945064cf1a1c33bbd3b49f8966c5092171e699ef258dfab81c045c","d56eb30b69463e7234f5137b73b84177434800bacebfc685fc37bbe9efe4070d"],["a1d0fcf2ec9de675b612136e5ce70d271c21417c9d2b8aaaac138599d0717940","edd77f50bcb5a3cab2e90737309667f2641462a54070f3d519212d39c197a629"],["e22fbe15c0af8ccc5780c0735f84dbe9a790badee8245c06c7ca37331cb36980","a855babad5cd60c88b430a69f53a1a7a38289154964799be43d06d77d31da06"],["311091dd9860e8e20ee13473c1155f5f69635e394704eaa74009452246cfa9b3","66db656f87d1f04fffd1f04788c06830871ec5a64feee685bd80f0b1286d8374"],["34c1fd04d301be89b31c0442d3e6ac24883928b45a9340781867d4232ec2dbdf","9414685e97b1b5954bd46f730174136d57f1ceeb487443dc5321857ba73abee"],["f219ea5d6b54701c1c14de5b557eb42a8d13f3abbcd08affcc2a5e6b049b8d63","4cb95957e83d40b0f73af4544cccf6b1f4b08d3c07b27fb8d8c2962a400766d1"],["d7b8740f74a8fbaab1f683db8f45de26543a5490bca627087236912469a0b448","fa77968128d9c92ee1010f337ad4717eff15db5ed3c049b3411e0315eaa4593b"],["32d31c222f8f6f0ef86f7c98d3a3335ead5bcd32abdd94289fe4d3091aa824bf","5f3032f5892156e39ccd3d7915b9e1da2e6dac9e6f26e961118d14b8462e1661"],["7461f371914ab32671045a155d9831ea8793d77cd59592c4340f86cbc18347b5","8ec0ba238b96bec0cbdddcae0aa442542eee1ff50c986ea6b39847b3cc092ff6"],["ee079adb1df1860074356a25aa38206a6d716b2c3e67453d287698bad7b2b2d6","8dc2412aafe3be5c4c5f37e0ecc5f9f6a446989af04c4e25ebaac479ec1c8c1e"],["16ec93e447ec83f0467b18302ee620f7e65de331874c9dc72bfd8616ba9da6b5","5e4631150e62fb40d0e8c2a7ca5804a39d58186a50e497139626778e25b0674d"],["eaa5f980c245f6f038978290afa70b6bd8855897f98b6aa485b96065d537bd99","f65f5d3e292c2e0819a528391c994624d784869d7e6ea67fb18041024edc07dc"],["78c9407544ac132692ee1910a02439958ae04877151342ea96c4b6b35a49f51","f3e0319169eb9b85d5404795539a5e68fa1fbd583c064d2462b675f194a3ddb4"],["494f4be219a1a77016dcd838431aea0001cdc8ae7a6fc688726578d9702857a5","42242a969283a5f339ba7f075e36ba2af925ce30d767ed6e55f4b031880d562c"],["a598a8030da6d86c6bc7f2f5144ea549d28211ea58faa70ebf4c1e665c1fe9b5","204b5d6f84822c307e4b4a7140737aec23fc63b65b35f86a10026dbd2d864e6b"],["c41916365abb2b5d09192f5f2dbeafec208f020f12570a184dbadc3e58595997","4f14351d0087efa49d245b328984989d5caf9450f34bfc0ed16e96b58fa9913"],["841d6063a586fa475a724604da03bc5b92a2e0d2e0a36acfe4c73a5514742881","73867f59c0659e81904f9a1c7543698e62562d6744c169ce7a36de01a8d6154"],["5e95bb399a6971d376026947f89bde2f282b33810928be4ded112ac4d70e20d5","39f23f366809085beebfc71181313775a99c9aed7d8ba38b161384c746012865"],["36e4641a53948fd476c39f8a99fd974e5ec07564b5315d8bf99471bca0ef2f66","d2424b1b1abe4eb8164227b085c9aa9456ea13493fd563e06fd51cf5694c78fc"],["336581ea7bfbbb290c191a2f507a41cf5643842170e914faeab27c2c579f726","ead12168595fe1be99252129b6e56b3391f7ab1410cd1e0ef3dcdcabd2fda224"],["8ab89816dadfd6b6a1f2634fcf00ec8403781025ed6890c4849742706bd43ede","6fdcef09f2f6d0a044e654aef624136f503d459c3e89845858a47a9129cdd24e"],["1e33f1a746c9c5778133344d9299fcaa20b0938e8acff2544bb40284b8c5fb94","60660257dd11b3aa9c8ed618d24edff2306d320f1d03010e33a7d2057f3b3b6"],["85b7c1dcb3cec1b7ee7f30ded79dd20a0ed1f4cc18cbcfcfa410361fd8f08f31","3d98a9cdd026dd43f39048f25a8847f4fcafad1895d7a633c6fed3c35e999511"],["29df9fbd8d9e46509275f4b125d6d45d7fbe9a3b878a7af872a2800661ac5f51","b4c4fe99c775a606e2d8862179139ffda61dc861c019e55cd2876eb2a27d84b"],["a0b1cae06b0a847a3fea6e671aaf8adfdfe58ca2f768105c8082b2e449fce252","ae434102edde0958ec4b19d917a6a28e6b72da1834aff0e650f049503a296cf2"],["4e8ceafb9b3e9a136dc7ff67e840295b499dfb3b2133e4ba113f2e4c0e121e5","cf2174118c8b6d7a4b48f6d534ce5c79422c086a63460502b827ce62a326683c"],["d24a44e047e19b6f5afb81c7ca2f69080a5076689a010919f42725c2b789a33b","6fb8d5591b466f8fc63db50f1c0f1c69013f996887b8244d2cdec417afea8fa3"],["ea01606a7a6c9cdd249fdfcfacb99584001edd28abbab77b5104e98e8e3b35d4","322af4908c7312b0cfbfe369f7a7b3cdb7d4494bc2823700cfd652188a3ea98d"],["af8addbf2b661c8a6c6328655eb96651252007d8c5ea31be4ad196de8ce2131f","6749e67c029b85f52a034eafd096836b2520818680e26ac8f3dfbcdb71749700"],["e3ae1974566ca06cc516d47e0fb165a674a3dabcfca15e722f0e3450f45889","2aeabe7e4531510116217f07bf4d07300de97e4874f81f533420a72eeb0bd6a4"],["591ee355313d99721cf6993ffed1e3e301993ff3ed258802075ea8ced397e246","b0ea558a113c30bea60fc4775460c7901ff0b053d25ca2bdeee98f1a4be5d196"],["11396d55fda54c49f19aa97318d8da61fa8584e47b084945077cf03255b52984","998c74a8cd45ac01289d5833a7beb4744ff536b01b257be4c5767bea93ea57a4"],["3c5d2a1ba39c5a1790000738c9e0c40b8dcdfd5468754b6405540157e017aa7a","b2284279995a34e2f9d4de7396fc18b80f9b8b9fdd270f6661f79ca4c81bd257"],["cc8704b8a60a0defa3a99a7299f2e9c3fbc395afb04ac078425ef8a1793cc030","bdd46039feed17881d1e0862db347f8cf395b74fc4bcdc4e940b74e3ac1f1b13"],["c533e4f7ea8555aacd9777ac5cad29b97dd4defccc53ee7ea204119b2889b197","6f0a256bc5efdf429a2fb6242f1a43a2d9b925bb4a4b3a26bb8e0f45eb596096"],["c14f8f2ccb27d6f109f6d08d03cc96a69ba8c34eec07bbcf566d48e33da6593","c359d6923bb398f7fd4473e16fe1c28475b740dd098075e6c0e8649113dc3a38"],["a6cbc3046bc6a450bac24789fa17115a4c9739ed75f8f21ce441f72e0b90e6ef","21ae7f4680e889bb130619e2c0f95a360ceb573c70603139862afd617fa9b9f"],["347d6d9a02c48927ebfb86c1359b1caf130a3c0267d11ce6344b39f99d43cc38","60ea7f61a353524d1c987f6ecec92f086d565ab687870cb12689ff1e31c74448"],["da6545d2181db8d983f7dcb375ef5866d47c67b1bf31c8cf855ef7437b72656a","49b96715ab6878a79e78f07ce5680c5d6673051b4935bd897fea824b77dc208a"],["c40747cc9d012cb1a13b8148309c6de7ec25d6945d657146b9d5994b8feb1111","5ca560753be2a12fc6de6caf2cb489565db936156b9514e1bb5e83037e0fa2d4"],["4e42c8ec82c99798ccf3a610be870e78338c7f713348bd34c8203ef4037f3502","7571d74ee5e0fb92a7a8b33a07783341a5492144cc54bcc40a94473693606437"],["3775ab7089bc6af823aba2e1af70b236d251cadb0c86743287522a1b3b0dedea","be52d107bcfa09d8bcb9736a828cfa7fac8db17bf7a76a2c42ad961409018cf7"],["cee31cbf7e34ec379d94fb814d3d775ad954595d1314ba8846959e3e82f74e26","8fd64a14c06b589c26b947ae2bcf6bfa0149ef0be14ed4d80f448a01c43b1c6d"],["b4f9eaea09b6917619f6ea6a4eb5464efddb58fd45b1ebefcdc1a01d08b47986","39e5c9925b5a54b07433a4f18c61726f8bb131c012ca542eb24a8ac07200682a"],["d4263dfc3d2df923a0179a48966d30ce84e2515afc3dccc1b77907792ebcc60e","62dfaf07a0f78feb30e30d6295853ce189e127760ad6cf7fae164e122a208d54"],["48457524820fa65a4f8d35eb6930857c0032acc0a4a2de422233eeda897612c4","25a748ab367979d98733c38a1fa1c2e7dc6cc07db2d60a9ae7a76aaa49bd0f77"],["dfeeef1881101f2cb11644f3a2afdfc2045e19919152923f367a1767c11cceda","ecfb7056cf1de042f9420bab396793c0c390bde74b4bbdff16a83ae09a9a7517"],["6d7ef6b17543f8373c573f44e1f389835d89bcbc6062ced36c82df83b8fae859","cd450ec335438986dfefa10c57fea9bcc521a0959b2d80bbf74b190dca712d10"],["e75605d59102a5a2684500d3b991f2e3f3c88b93225547035af25af66e04541f","f5c54754a8f71ee540b9b48728473e314f729ac5308b06938360990e2bfad125"],["eb98660f4c4dfaa06a2be453d5020bc99a0c2e60abe388457dd43fefb1ed620c","6cb9a8876d9cb8520609af3add26cd20a0a7cd8a9411131ce85f44100099223e"],["13e87b027d8514d35939f2e6892b19922154596941888336dc3563e3b8dba942","fef5a3c68059a6dec5d624114bf1e91aac2b9da568d6abeb2570d55646b8adf1"],["ee163026e9fd6fe017c38f06a5be6fc125424b371ce2708e7bf4491691e5764a","1acb250f255dd61c43d94ccc670d0f58f49ae3fa15b96623e5430da0ad6c62b2"],["b268f5ef9ad51e4d78de3a750c2dc89b1e626d43505867999932e5db33af3d80","5f310d4b3c99b9ebb19f77d41c1dee018cf0d34fd4191614003e945a1216e423"],["ff07f3118a9df035e9fad85eb6c7bfe42b02f01ca99ceea3bf7ffdba93c4750d","438136d603e858a3a5c440c38eccbaddc1d2942114e2eddd4740d098ced1f0d8"],["8d8b9855c7c052a34146fd20ffb658bea4b9f69e0d825ebec16e8c3ce2b526a1","cdb559eedc2d79f926baf44fb84ea4d44bcf50fee51d7ceb30e2e7f463036758"],["52db0b5384dfbf05bfa9d472d7ae26dfe4b851ceca91b1eba54263180da32b63","c3b997d050ee5d423ebaf66a6db9f57b3180c902875679de924b69d84a7b375"],["e62f9490d3d51da6395efd24e80919cc7d0f29c3f3fa48c6fff543becbd43352","6d89ad7ba4876b0b22c2ca280c682862f342c8591f1daf5170e07bfd9ccafa7d"],["7f30ea2476b399b4957509c88f77d0191afa2ff5cb7b14fd6d8e7d65aaab1193","ca5ef7d4b231c94c3b15389a5f6311e9daff7bb67b103e9880ef4bff637acaec"],["5098ff1e1d9f14fb46a210fada6c903fef0fb7b4a1dd1d9ac60a0361800b7a00","9731141d81fc8f8084d37c6e7542006b3ee1b40d60dfe5362a5b132fd17ddc0"],["32b78c7de9ee512a72895be6b9cbefa6e2f3c4ccce445c96b9f2c81e2778ad58","ee1849f513df71e32efc3896ee28260c73bb80547ae2275ba497237794c8753c"],["e2cb74fddc8e9fbcd076eef2a7c72b0ce37d50f08269dfc074b581550547a4f7","d3aa2ed71c9dd2247a62df062736eb0baddea9e36122d2be8641abcb005cc4a4"],["8438447566d4d7bedadc299496ab357426009a35f235cb141be0d99cd10ae3a8","c4e1020916980a4da5d01ac5e6ad330734ef0d7906631c4f2390426b2edd791f"],["4162d488b89402039b584c6fc6c308870587d9c46f660b878ab65c82c711d67e","67163e903236289f776f22c25fb8a3afc1732f2b84b4e95dbda47ae5a0852649"],["3fad3fa84caf0f34f0f89bfd2dcf54fc175d767aec3e50684f3ba4a4bf5f683d","cd1bc7cb6cc407bb2f0ca647c718a730cf71872e7d0d2a53fa20efcdfe61826"],["674f2600a3007a00568c1a7ce05d0816c1fb84bf1370798f1c69532faeb1a86b","299d21f9413f33b3edf43b257004580b70db57da0b182259e09eecc69e0d38a5"],["d32f4da54ade74abb81b815ad1fb3b263d82d6c692714bcff87d29bd5ee9f08f","f9429e738b8e53b968e99016c059707782e14f4535359d582fc416910b3eea87"],["30e4e670435385556e593657135845d36fbb6931f72b08cb1ed954f1e3ce3ff6","462f9bce619898638499350113bbc9b10a878d35da70740dc695a559eb88db7b"],["be2062003c51cc3004682904330e4dee7f3dcd10b01e580bf1971b04d4cad297","62188bc49d61e5428573d48a74e1c655b1c61090905682a0d5558ed72dccb9bc"],["93144423ace3451ed29e0fb9ac2af211cb6e84a601df5993c419859fff5df04a","7c10dfb164c3425f5c71a3f9d7992038f1065224f72bb9d1d902a6d13037b47c"],["b015f8044f5fcbdcf21ca26d6c34fb8197829205c7b7d2a7cb66418c157b112c","ab8c1e086d04e813744a655b2df8d5f83b3cdc6faa3088c1d3aea1454e3a1d5f"],["d5e9e1da649d97d89e4868117a465a3a4f8a18de57a140d36b3f2af341a21b52","4cb04437f391ed73111a13cc1d4dd0db1693465c2240480d8955e8592f27447a"],["d3ae41047dd7ca065dbf8ed77b992439983005cd72e16d6f996a5316d36966bb","bd1aeb21ad22ebb22a10f0303417c6d964f8cdd7df0aca614b10dc14d125ac46"],["463e2763d885f958fc66cdd22800f0a487197d0a82e377b49f80af87c897b065","bfefacdb0e5d0fd7df3a311a94de062b26b80c61fbc97508b79992671ef7ca7f"],["7985fdfd127c0567c6f53ec1bb63ec3158e597c40bfe747c83cddfc910641917","603c12daf3d9862ef2b25fe1de289aed24ed291e0ec6708703a5bd567f32ed03"],["74a1ad6b5f76e39db2dd249410eac7f99e74c59cb83d2d0ed5ff1543da7703e9","cc6157ef18c9c63cd6193d83631bbea0093e0968942e8c33d5737fd790e0db08"],["30682a50703375f602d416664ba19b7fc9bab42c72747463a71d0896b22f6da3","553e04f6b018b4fa6c8f39e7f311d3176290d0e0f19ca73f17714d9977a22ff8"],["9e2158f0d7c0d5f26c3791efefa79597654e7a2b2464f52b1ee6c1347769ef57","712fcdd1b9053f09003a3481fa7762e9ffd7c8ef35a38509e2fbf2629008373"],["176e26989a43c9cfeba4029c202538c28172e566e3c4fce7322857f3be327d66","ed8cc9d04b29eb877d270b4878dc43c19aefd31f4eee09ee7b47834c1fa4b1c3"],["75d46efea3771e6e68abb89a13ad747ecf1892393dfc4f1b7004788c50374da8","9852390a99507679fd0b86fd2b39a868d7efc22151346e1a3ca4726586a6bed8"],["809a20c67d64900ffb698c4c825f6d5f2310fb0451c869345b7319f645605721","9e994980d9917e22b76b061927fa04143d096ccc54963e6a5ebfa5f3f8e286c1"],["1b38903a43f7f114ed4500b4eac7083fdefece1cf29c63528d563446f972c180","4036edc931a60ae889353f77fd53de4a2708b26b6f5da72ad3394119daf408f9"]]}}},4016:(t,e,i)=>{"use strict";i.d(e,{P:()=>a});var r=i(1761),n=i(1242);const s={willReadFrequently:!0},o=class t{static get experimentalLetterSpacingSupported(){let e=t._experimentalLetterSpacingSupported;if(void 0!==e){const i=r.e.get().getCanvasRenderingContext2D().prototype;e=t._experimentalLetterSpacingSupported="letterSpacing"in i||"textLetterSpacing"in i}return e}constructor(t,e,i,r,n,s,o,a,h){this.text=t,this.style=e,this.width=i,this.height=r,this.lines=n,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=h}static measureText(e=" ",i,r=t._canvas,s=i.wordWrap){const o=`${e}:${i.styleKey}`;if(t._measurementCache[o])return t._measurementCache[o];const a=(0,n.Z)(i),h=t.measureFont(a);0===h.fontSize&&(h.fontSize=i.fontSize,h.ascent=i.fontSize);const l=t.__context;l.font=a;const u=(s?t._wordWrap(e,i,r):e).split(/(?:\r\n|\r|\n)/),c=new Array(u.length);let d=0;for(let e=0;e<u.length;e++){const r=t._measureText(u[e],i.letterSpacing,l);c[e]=r,d=Math.max(d,r)}const f=i._stroke?.width||0;let p=d+f;i.dropShadow&&(p+=i.dropShadow.distance);const m=i.lineHeight||h.fontSize;let g=Math.max(m,h.fontSize+f)+(u.length-1)*(m+i.leading);return i.dropShadow&&(g+=i.dropShadow.distance),new t(e,i,p,g,u,c,m+i.leading,d,h)}static _measureText(e,i,r){let n=!1;t.experimentalLetterSpacingSupported&&(t.experimentalLetterSpacing?(r.letterSpacing=`${i}px`,r.textLetterSpacing=`${i}px`,n=!0):(r.letterSpacing="0px",r.textLetterSpacing="0px"));const s=r.measureText(e);let o=s.width;const a=-s.actualBoundingBoxLeft;let h=s.actualBoundingBoxRight-a;if(o>0)if(n)o-=i,h-=i;else{const r=(t.graphemeSegmenter(e).length-1)*i;o+=r,h+=r}return Math.max(o,h)}static _wordWrap(e,i,r=t._canvas){const n=r.getContext("2d",s);let o=0,a="",h="";const l=Object.create(null),{letterSpacing:u,whiteSpace:c}=i,d=t._collapseSpaces(c),f=t._collapseNewlines(c);let p=!d;const m=i.wordWrapWidth+u,g=t._tokenize(e);for(let e=0;e<g.length;e++){let r=g[e];if(t._isNewline(r)){if(!f){h+=t._addLine(a),p=!d,a="",o=0;continue}r=" "}if(d){const e=t.isBreakingSpace(r),i=t.isBreakingSpace(a[a.length-1]);if(e&&i)continue}const s=t._getFromCache(r,u,l,n);if(s>m)if(""!==a&&(h+=t._addLine(a),a="",o=0),t.canBreakWords(r,i.breakWords)){const e=t.wordWrapSplit(r);for(let s=0;s<e.length;s++){let c=e[s],d=c,f=1;for(;e[s+f];){const n=e[s+f];if(t.canBreakChars(d,n,r,s,i.breakWords))break;c+=n,d=n,f++}s+=f-1;const g=t._getFromCache(c,u,l,n);g+o>m&&(h+=t._addLine(a),p=!1,a="",o=0),a+=c,o+=g}}else{a.length>0&&(h+=t._addLine(a),a="",o=0);const i=e===g.length-1;h+=t._addLine(r,!i),p=!1,a="",o=0}else s+o>m&&(p=!1,h+=t._addLine(a),a="",o=0),(a.length>0||!t.isBreakingSpace(r)||p)&&(a+=r,o+=s)}return h+=t._addLine(a,!1),h}static _addLine(e,i=!0){return e=t._trimRight(e),i?`${e}\n`:e}static _getFromCache(e,i,r,n){let s=r[e];return"number"!=typeof s&&(s=t._measureText(e,i,n)+i,r[e]=s),s}static _collapseSpaces(t){return"normal"===t||"pre-line"===t}static _collapseNewlines(t){return"normal"===t}static _trimRight(e){if("string"!=typeof e)return"";for(let i=e.length-1;i>=0;i--){const r=e[i];if(!t.isBreakingSpace(r))break;e=e.slice(0,-1)}return e}static _isNewline(e){return"string"==typeof e&&t._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,i){return"string"==typeof e&&t._breakingSpaces.includes(e.charCodeAt(0))}static _tokenize(e){const i=[];let r="";if("string"!=typeof e)return i;for(let n=0;n<e.length;n++){const s=e[n],o=e[n+1];t.isBreakingSpace(s,o)||t._isNewline(s)?(""!==r&&(i.push(r),r=""),i.push(s)):r+=s}return""!==r&&i.push(r),i}static canBreakWords(t,e){return e}static canBreakChars(t,e,i,r,n){return!0}static wordWrapSplit(e){return t.graphemeSegmenter(e)}static measureFont(e){if(t._fonts[e])return t._fonts[e];const i=t._context;i.font=e;const r=i.measureText(t.METRICS_STRING+t.BASELINE_SYMBOL),n={ascent:r.actualBoundingBoxAscent,descent:r.actualBoundingBoxDescent,fontSize:r.actualBoundingBoxAscent+r.actualBoundingBoxDescent};return t._fonts[e]=n,n}static clearMetrics(e=""){e?delete t._fonts[e]:t._fonts={}}static get _canvas(){if(!t.__canvas){let e;try{const i=new OffscreenCanvas(0,0),n=i.getContext("2d",s);if(n?.measureText)return t.__canvas=i,i;e=r.e.get().createCanvas()}catch(t){e=r.e.get().createCanvas()}e.width=e.height=10,t.__canvas=e}return t.__canvas}static get _context(){return t.__context||(t.__context=t._canvas.getContext("2d",s)),t.__context}};o.METRICS_STRING="|q",o.BASELINE_SYMBOL="M",o.BASELINE_MULTIPLIER=1.4,o.HEIGHT_MULTIPLIER=2,o.graphemeSegmenter=(()=>{if("function"==typeof Intl?.Segmenter){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(t=>t.segment)}return t=>[...t]})(),o.experimentalLetterSpacing=!1,o._fonts={},o._newlines=[10,13],o._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288],o._measurementCache={};let a=o},4035:(t,e,i)=>{"use strict";var r,n=i(6556),s=i(9092)(),o=i(9957),a=i(5795);if(s){var h=n("RegExp.prototype.exec"),l={},u=function(){throw l},c={toString:u,valueOf:u};"symbol"==typeof Symbol.toPrimitive&&(c[Symbol.toPrimitive]=u),r=function(t){if(!t||"object"!=typeof t)return!1;var e=a(t,"lastIndex");if(!e||!o(e,"value"))return!1;try{h(t,c)}catch(t){return t===l}}}else{var d=n("Object.prototype.toString");r=function(t){return!(!t||"object"!=typeof t&&"function"!=typeof t)&&"[object RegExp]"===d(t)}}t.exports=r},4039:(t,e,i)=>{"use strict";var r="undefined"!=typeof Symbol&&Symbol,n=i(1333);t.exports=function(){return"function"==typeof r&&"function"==typeof Symbol&&"symbol"==typeof r("foo")&&"symbol"==typeof Symbol("bar")&&n()}},4040:(t,e,i)=>{t.exports={decode:i(7260),verify:i(1691),sign:i(7651),JsonWebTokenError:i(1741),NotBeforeError:i(1345),TokenExpiredError:i(8980)}},4050:(t,e,i)=>{var r=i(6168),n=i(9560),s=i(6698),o=i(2861).Buffer,a={"des-ede3-cbc":n.CBC.instantiate(n.EDE),"des-ede3":n.EDE,"des-ede-cbc":n.CBC.instantiate(n.EDE),"des-ede":n.EDE,"des-cbc":n.CBC.instantiate(n.DES),"des-ecb":n.DES};function h(t){r.call(this);var e,i=t.mode.toLowerCase(),n=a[i];e=t.decrypt?"decrypt":"encrypt";var s=t.key;o.isBuffer(s)||(s=o.from(s)),"des-ede"!==i&&"des-ede-cbc"!==i||(s=o.concat([s,s.slice(0,8)]));var h=t.iv;o.isBuffer(h)||(h=o.from(h)),this._des=n.create({key:s,iv:h,type:e})}a.des=a["des-cbc"],a.des3=a["des-ede3-cbc"],t.exports=h,s(h,r),h.prototype._update=function(t){return o.from(this._des.update(t))},h.prototype._final=function(){return o.from(this._des.final())}},4058:t=>{"use strict";t.exports={stringReplaceAll:(t,e,i)=>{let r=t.indexOf(e);if(-1===r)return t;const n=e.length;let s=0,o="";do{o+=t.substr(s,r-s)+e+i,s=r+n,r=t.indexOf(e,s)}while(-1!==r);return o+=t.substr(s),o},stringEncaseCRLFWithFirstIndex:(t,e,i,r)=>{let n=0,s="";do{const o="\r"===t[r-1];s+=t.substr(n,(o?r-1:r)-n)+e+(o?"\r\n":"\n")+i,n=r+1,r=t.indexOf("\n",n)}while(-1!==r);return s+=t.substr(n),s}}},4083:(t,e,i)=>{"use strict";t=i.nmd(t);const r=(t,e)=>(...i)=>`[${t(...i)+e}m`,n=(t,e)=>(...i)=>{const r=t(...i);return`[${38+e};5;${r}m`},s=(t,e)=>(...i)=>{const r=t(...i);return`[${38+e};2;${r[0]};${r[1]};${r[2]}m`},o=t=>t,a=(t,e,i)=>[t,e,i],h=(t,e,i)=>{Object.defineProperty(t,e,{get:()=>{const r=i();return Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0}),r},enumerable:!0,configurable:!0})};let l;const u=(t,e,r,n)=>{void 0===l&&(l=i(734));const s=n?10:0,o={};for(const[i,n]of Object.entries(l)){const a="ansi16"===i?"ansi":i;i===e?o[a]=t(r,s):"object"==typeof n&&(o[a]=t(n[e],s))}return o};Object.defineProperty(t,"exports",{enumerable:!0,get:function(){const t=new Map,e={modifier:{reset:[0,0],bold:[1,22],dim:[2,22],italic:[3,23],underline:[4,24],inverse:[7,27],hidden:[8,28],strikethrough:[9,29]},color:{black:[30,39],red:[31,39],green:[32,39],yellow:[33,39],blue:[34,39],magenta:[35,39],cyan:[36,39],white:[37,39],blackBright:[90,39],redBright:[91,39],greenBright:[92,39],yellowBright:[93,39],blueBright:[94,39],magentaBright:[95,39],cyanBright:[96,39],whiteBright:[97,39]},bgColor:{bgBlack:[40,49],bgRed:[41,49],bgGreen:[42,49],bgYellow:[43,49],bgBlue:[44,49],bgMagenta:[45,49],bgCyan:[46,49],bgWhite:[47,49],bgBlackBright:[100,49],bgRedBright:[101,49],bgGreenBright:[102,49],bgYellowBright:[103,49],bgBlueBright:[104,49],bgMagentaBright:[105,49],bgCyanBright:[106,49],bgWhiteBright:[107,49]}};e.color.gray=e.color.blackBright,e.bgColor.bgGray=e.bgColor.bgBlackBright,e.color.grey=e.color.blackBright,e.bgColor.bgGrey=e.bgColor.bgBlackBright;for(const[i,r]of Object.entries(e)){for(const[i,n]of Object.entries(r))e[i]={open:`[${n[0]}m`,close:`[${n[1]}m`},r[i]=e[i],t.set(n[0],n[1]);Object.defineProperty(e,i,{value:r,enumerable:!1})}return Object.defineProperty(e,"codes",{value:t,enumerable:!1}),e.color.close="[39m",e.bgColor.close="[49m",h(e.color,"ansi",()=>u(r,"ansi16",o,!1)),h(e.color,"ansi256",()=>u(n,"ansi256",o,!1)),h(e.color,"ansi16m",()=>u(s,"rgb",a,!1)),h(e.bgColor,"ansi",()=>u(r,"ansi16",o,!0)),h(e.bgColor,"ansi256",()=>u(n,"ansi256",o,!0)),h(e.bgColor,"ansi16m",()=>u(s,"rgb",a,!0)),e}})},4101:(t,e,i)=>{"use strict";var r=/Proc-Type: 4,ENCRYPTED[\n\r]+DEK-Info: AES-((?:128)|(?:192)|(?:256))-CBC,([0-9A-H]+)[\n\r]+([0-9A-z\n\r+/=]+)[\n\r]+/m,n=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----/m,s=/^-----BEGIN ((?:.*? KEY)|CERTIFICATE)-----([0-9A-z\n\r+/=]+)-----END \1-----$/m,o=i(8078),a=i(1241),h=i(2861).Buffer;t.exports=function(t,e){var i,l=t.toString(),u=l.match(r);if(u){var c="aes"+u[1],d=h.from(u[2],"hex"),f=h.from(u[3].replace(/[\r\n]/g,""),"base64"),p=o(e,d.slice(0,8),parseInt(u[1],10)).key,m=[],g=a.createDecipheriv(c,p,d);m.push(g.update(f)),m.push(g.final()),i=h.concat(m)}else{var v=l.match(s);i=h.from(v[2].replace(/[\r\n]/g,""),"base64")}return{tag:l.match(n)[1],data:i}}},4107:(t,e,i)=>{"use strict";var r=i(6698),n=i(392),s=i(2861).Buffer,o=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],a=new Array(64);function h(){this.init(),this._w=a,n.call(this,64,56)}function l(t,e,i){return i^t&(e^i)}function u(t,e,i){return t&e|i&(t|e)}function c(t){return(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10)}function d(t){return(t>>>6|t<<26)^(t>>>11|t<<21)^(t>>>25|t<<7)}function f(t){return(t>>>7|t<<25)^(t>>>18|t<<14)^t>>>3}function p(t){return(t>>>17|t<<15)^(t>>>19|t<<13)^t>>>10}r(h,n),h.prototype.init=function(){return this._a=1779033703,this._b=3144134277,this._c=1013904242,this._d=2773480762,this._e=1359893119,this._f=2600822924,this._g=528734635,this._h=1541459225,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,h=0|this._f,m=0|this._g,g=0|this._h,v=0;v<16;++v)e[v]=t.readInt32BE(4*v);for(;v<64;++v)e[v]=p(e[v-2])+e[v-7]+f(e[v-15])+e[v-16]|0;for(var y=0;y<64;++y){var b=g+d(a)+l(a,h,m)+o[y]+e[y]|0,_=c(i)+u(i,r,n)|0;g=m,m=h,h=a,a=s+b|0,s=n,n=r,r=i,i=b+_|0}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0,this._f=h+this._f|0,this._g=m+this._g|0,this._h=g+this._h|0},h.prototype._hash=function(){var t=s.allocUnsafe(32);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t.writeInt32BE(this._h,28),t},t.exports=h},4116:(t,e,i)=>{var r=i(8287),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},4133:(t,e,i)=>{"use strict";var r=i(487),n=i(8452),s=i(3003),o=i(6642),a=i(2464),h=r(o(),Number);n(h,{getPolyfill:o,implementation:s,shim:a}),t.exports=h},4148:(t,e,i)=>{"use strict";var r=i(5606),n=i(6763);function s(t){return s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},s(t)}function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,h(r.key),r)}}function a(t,e,i){return e&&o(t.prototype,e),i&&o(t,i),Object.defineProperty(t,"prototype",{writable:!1}),t}function h(t){var e=function(t){if("object"!==s(t)||null===t)return t;var e=t[Symbol.toPrimitive];if(void 0!==e){var i=e.call(t,"string");if("object"!==s(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(t);return"symbol"===s(e)?e:String(e)}var l,u,c=i(9597).codes,d=c.ERR_AMBIGUOUS_ARGUMENT,f=c.ERR_INVALID_ARG_TYPE,p=c.ERR_INVALID_ARG_VALUE,m=c.ERR_INVALID_RETURN_VALUE,g=c.ERR_MISSING_ARGS,v=i(3918),y=i(537).inspect,b=i(537).types,_=b.isPromise,x=b.isRegExp,w=i(9133)(),M=i(9394)(),S=i(8075)("RegExp.prototype.test");function A(){var t=i(2299);l=t.isDeepEqual,u=t.isDeepStrictEqual}new Map;var E=!1,T=t.exports=I,R={};function P(t){if(t.message instanceof Error)throw t.message;throw new v(t)}function C(t,e,i,r){if(!i){var n=!1;if(0===e)n=!0,r="No value argument passed to `assert.ok()`";else if(r instanceof Error)throw r;var s=new v({actual:i,expected:!0,message:r,operator:"==",stackStartFn:t});throw s.generatedMessage=n,s}}function I(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];C.apply(void 0,[I,e.length].concat(e))}T.fail=function t(e,i,s,o,a){var h,l=arguments.length;if(0===l?h="Failed":1===l?(s=e,e=void 0):(!1===E&&(E=!0,(r.emitWarning?r.emitWarning:n.warn.bind(n))("assert.fail() with more than one argument is deprecated. Please use assert.strictEqual() instead or only pass a message.","DeprecationWarning","DEP0094")),2===l&&(o="!=")),s instanceof Error)throw s;var u={actual:e,expected:i,operator:void 0===o?"fail":o,stackStartFn:a||t};void 0!==s&&(u.message=s);var c=new v(u);throw h&&(c.message=h,c.generatedMessage=!0),c},T.AssertionError=v,T.ok=I,T.equal=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");e!=i&&P({actual:e,expected:i,message:r,operator:"==",stackStartFn:t})},T.notEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");e==i&&P({actual:e,expected:i,message:r,operator:"!=",stackStartFn:t})},T.deepEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");void 0===l&&A(),l(e,i)||P({actual:e,expected:i,message:r,operator:"deepEqual",stackStartFn:t})},T.notDeepEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");void 0===l&&A(),l(e,i)&&P({actual:e,expected:i,message:r,operator:"notDeepEqual",stackStartFn:t})},T.deepStrictEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");void 0===l&&A(),u(e,i)||P({actual:e,expected:i,message:r,operator:"deepStrictEqual",stackStartFn:t})},T.notDeepStrictEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");void 0===l&&A(),u(e,i)&&P({actual:e,expected:i,message:r,operator:"notDeepStrictEqual",stackStartFn:t})},T.strictEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");M(e,i)||P({actual:e,expected:i,message:r,operator:"strictEqual",stackStartFn:t})},T.notStrictEqual=function t(e,i,r){if(arguments.length<2)throw new g("actual","expected");M(e,i)&&P({actual:e,expected:i,message:r,operator:"notStrictEqual",stackStartFn:t})};var k=a(function t(e,i,r){var n=this;!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),i.forEach(function(t){t in e&&(void 0!==r&&"string"==typeof r[t]&&x(e[t])&&S(e[t],r[t])?n[t]=r[t]:n[t]=e[t])})});function B(t,e,i,r){if("function"!=typeof e){if(x(e))return S(e,t);if(2===arguments.length)throw new f("expected",["Function","RegExp"],e);if("object"!==s(t)||null===t){var n=new v({actual:t,expected:e,message:i,operator:"deepStrictEqual",stackStartFn:r});throw n.operator=r.name,n}var o=Object.keys(e);if(e instanceof Error)o.push("name","message");else if(0===o.length)throw new p("error",e,"may not be an empty object");return void 0===l&&A(),o.forEach(function(n){"string"==typeof t[n]&&x(e[n])&&S(e[n],t[n])||function(t,e,i,r,n,s){if(!(i in t)||!u(t[i],e[i])){if(!r){var o=new k(t,n),a=new k(e,n,t),h=new v({actual:o,expected:a,operator:"deepStrictEqual",stackStartFn:s});throw h.actual=t,h.expected=e,h.operator=s.name,h}P({actual:t,expected:e,message:r,operator:s.name,stackStartFn:s})}}(t,e,n,i,o,r)}),!0}return void 0!==e.prototype&&t instanceof e||!Error.isPrototypeOf(e)&&!0===e.call({},t)}function O(t){if("function"!=typeof t)throw new f("fn","Function",t);try{t()}catch(t){return t}return R}function L(t){return _(t)||null!==t&&"object"===s(t)&&"function"==typeof t.then&&"function"==typeof t.catch}function U(t){return Promise.resolve().then(function(){var e;if("function"==typeof t){if(!L(e=t()))throw new m("instance of Promise","promiseFn",e)}else{if(!L(t))throw new f("promiseFn",["Function","Promise"],t);e=t}return Promise.resolve().then(function(){return e}).then(function(){return R}).catch(function(t){return t})})}function D(t,e,i,r){if("string"==typeof i){if(4===arguments.length)throw new f("error",["Object","Error","Function","RegExp"],i);if("object"===s(e)&&null!==e){if(e.message===i)throw new d("error/message",'The error message "'.concat(e.message,'" is identical to the message.'))}else if(e===i)throw new d("error/message",'The error "'.concat(e,'" is identical to the message.'));r=i,i=void 0}else if(null!=i&&"object"!==s(i)&&"function"!=typeof i)throw new f("error",["Object","Error","Function","RegExp"],i);if(e===R){var n="";i&&i.name&&(n+=" (".concat(i.name,")")),n+=r?": ".concat(r):".";var o="rejects"===t.name?"rejection":"exception";P({actual:void 0,expected:i,operator:t.name,message:"Missing expected ".concat(o).concat(n),stackStartFn:t})}if(i&&!B(e,i,r,t))throw e}function N(t,e,i,r){if(e!==R){if("string"==typeof i&&(r=i,i=void 0),!i||B(e,i)){var n=r?": ".concat(r):".",s="doesNotReject"===t.name?"rejection":"exception";P({actual:e,expected:i,operator:t.name,message:"Got unwanted ".concat(s).concat(n,"\n")+'Actual message: "'.concat(e&&e.message,'"'),stackStartFn:t})}throw e}}function F(t,e,i,r,n){if(!x(e))throw new f("regexp","RegExp",e);var o="match"===n;if("string"!=typeof t||S(e,t)!==o){if(i instanceof Error)throw i;var a=!i;i=i||("string"!=typeof t?'The "string" argument must be of type string. Received type '+"".concat(s(t)," (").concat(y(t),")"):(o?"The input did not match the regular expression ":"The input was expected to not match the regular expression ")+"".concat(y(e),". Input:\n\n").concat(y(t),"\n"));var h=new v({actual:t,expected:e,message:i,operator:n,stackStartFn:r});throw h.generatedMessage=a,h}}function z(){for(var t=arguments.length,e=new Array(t),i=0;i<t;i++)e[i]=arguments[i];C.apply(void 0,[z,e.length].concat(e))}T.throws=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];D.apply(void 0,[t,O(e)].concat(r))},T.rejects=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return U(e).then(function(e){return D.apply(void 0,[t,e].concat(r))})},T.doesNotThrow=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];N.apply(void 0,[t,O(e)].concat(r))},T.doesNotReject=function t(e){for(var i=arguments.length,r=new Array(i>1?i-1:0),n=1;n<i;n++)r[n-1]=arguments[n];return U(e).then(function(e){return N.apply(void 0,[t,e].concat(r))})},T.ifError=function t(e){if(null!=e){var i="ifError got unwanted exception: ";"object"===s(e)&&"string"==typeof e.message?0===e.message.length&&e.constructor?i+=e.constructor.name:i+=e.message:i+=y(e);var r=new v({actual:e,expected:null,operator:"ifError",message:i,stackStartFn:t}),n=e.stack;if("string"==typeof n){var o=n.split("\n");o.shift();for(var a=r.stack.split("\n"),h=0;h<o.length;h++){var l=a.indexOf(o[h]);if(-1!==l){a=a.slice(0,l);break}}r.stack="".concat(a.join("\n"),"\n").concat(o.join("\n"))}throw r}},T.match=function t(e,i,r){F(e,i,r,t,"match")},T.doesNotMatch=function t(e,i,r){F(e,i,r,t,"doesNotMatch")},T.strict=w(z,T,{equal:T.strictEqual,deepEqual:T.deepStrictEqual,notEqual:T.notStrictEqual,notDeepEqual:T.notDeepStrictEqual}),T.strict.strict=T.strict},4171:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=i(8562);const n=function(){try{var t=(0,r.A)(Object,"defineProperty");return t({},"",{}),t}catch(t){}}()},4195:(t,e,i)=>{"use strict";i.d(e,{P:()=>s});var r=i(888),n=i(1285);class s extends n.v{constructor(t){const e=t.resource||new Float32Array(t.width*t.height*4);let i=t.format;i||(i=e instanceof Float32Array?"rgba32float":e instanceof Int32Array||e instanceof Uint32Array?"rgba32uint":e instanceof Int16Array||e instanceof Uint16Array?"rgba16uint":(Int8Array,"bgra8unorm")),super({...t,resource:e,format:i}),this.uploadMethodId="buffer"}static test(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array}}s.extension=r.Ag.TextureSource},4196:t=>{"use strict";var e=Math.pow(2,30)-1;t.exports=function(t,i){if("number"!=typeof t)throw new TypeError("Iterations not a number");if(t<0)throw new TypeError("Bad iterations");if("number"!=typeof i)throw new TypeError("Key length not a number");if(i<0||i>e||i!=i)throw new TypeError("Bad key length")}},4304:(t,e,i)=>{"use strict";var r=i(8287).Buffer,n=i(6698),s=i(602);function o(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function a(t,e){return t<<e|t>>>32-e}function h(t,e,i,r,n,s,o,h){return a(t+(e^i^r)+s+o|0,h)+n|0}function l(t,e,i,r,n,s,o,h){return a(t+(e&i|~e&r)+s+o|0,h)+n|0}function u(t,e,i,r,n,s,o,h){return a(t+((e|~i)^r)+s+o|0,h)+n|0}function c(t,e,i,r,n,s,o,h){return a(t+(e&r|i&~r)+s+o|0,h)+n|0}function d(t,e,i,r,n,s,o,h){return a(t+(e^(i|~r))+s+o|0,h)+n|0}n(o,s),o.prototype._update=function(){for(var t=new Array(16),e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,s=this._d,o=this._e;i=h(i,r,n,s,o,t[0],0,11),o=h(o,i,r,n=a(n,10),s,t[1],0,14),s=h(s,o,i,r=a(r,10),n,t[2],0,15),n=h(n,s,o,i=a(i,10),r,t[3],0,12),r=h(r,n,s,o=a(o,10),i,t[4],0,5),i=h(i,r,n,s=a(s,10),o,t[5],0,8),o=h(o,i,r,n=a(n,10),s,t[6],0,7),s=h(s,o,i,r=a(r,10),n,t[7],0,9),n=h(n,s,o,i=a(i,10),r,t[8],0,11),r=h(r,n,s,o=a(o,10),i,t[9],0,13),i=h(i,r,n,s=a(s,10),o,t[10],0,14),o=h(o,i,r,n=a(n,10),s,t[11],0,15),s=h(s,o,i,r=a(r,10),n,t[12],0,6),n=h(n,s,o,i=a(i,10),r,t[13],0,7),r=h(r,n,s,o=a(o,10),i,t[14],0,9),o=l(o,i=h(i,r,n,s=a(s,10),o,t[15],0,8),r,n=a(n,10),s,t[7],1518500249,7),s=l(s,o,i,r=a(r,10),n,t[4],1518500249,6),n=l(n,s,o,i=a(i,10),r,t[13],1518500249,8),r=l(r,n,s,o=a(o,10),i,t[1],1518500249,13),i=l(i,r,n,s=a(s,10),o,t[10],1518500249,11),o=l(o,i,r,n=a(n,10),s,t[6],1518500249,9),s=l(s,o,i,r=a(r,10),n,t[15],1518500249,7),n=l(n,s,o,i=a(i,10),r,t[3],1518500249,15),r=l(r,n,s,o=a(o,10),i,t[12],1518500249,7),i=l(i,r,n,s=a(s,10),o,t[0],1518500249,12),o=l(o,i,r,n=a(n,10),s,t[9],1518500249,15),s=l(s,o,i,r=a(r,10),n,t[5],1518500249,9),n=l(n,s,o,i=a(i,10),r,t[2],1518500249,11),r=l(r,n,s,o=a(o,10),i,t[14],1518500249,7),i=l(i,r,n,s=a(s,10),o,t[11],1518500249,13),s=u(s,o=l(o,i,r,n=a(n,10),s,t[8],1518500249,12),i,r=a(r,10),n,t[3],1859775393,11),n=u(n,s,o,i=a(i,10),r,t[10],1859775393,13),r=u(r,n,s,o=a(o,10),i,t[14],1859775393,6),i=u(i,r,n,s=a(s,10),o,t[4],1859775393,7),o=u(o,i,r,n=a(n,10),s,t[9],1859775393,14),s=u(s,o,i,r=a(r,10),n,t[15],1859775393,9),n=u(n,s,o,i=a(i,10),r,t[8],1859775393,13),r=u(r,n,s,o=a(o,10),i,t[1],1859775393,15),i=u(i,r,n,s=a(s,10),o,t[2],1859775393,14),o=u(o,i,r,n=a(n,10),s,t[7],1859775393,8),s=u(s,o,i,r=a(r,10),n,t[0],1859775393,13),n=u(n,s,o,i=a(i,10),r,t[6],1859775393,6),r=u(r,n,s,o=a(o,10),i,t[13],1859775393,5),i=u(i,r,n,s=a(s,10),o,t[11],1859775393,12),o=u(o,i,r,n=a(n,10),s,t[5],1859775393,7),n=c(n,s=u(s,o,i,r=a(r,10),n,t[12],1859775393,5),o,i=a(i,10),r,t[1],2400959708,11),r=c(r,n,s,o=a(o,10),i,t[9],2400959708,12),i=c(i,r,n,s=a(s,10),o,t[11],2400959708,14),o=c(o,i,r,n=a(n,10),s,t[10],2400959708,15),s=c(s,o,i,r=a(r,10),n,t[0],2400959708,14),n=c(n,s,o,i=a(i,10),r,t[8],2400959708,15),r=c(r,n,s,o=a(o,10),i,t[12],2400959708,9),i=c(i,r,n,s=a(s,10),o,t[4],2400959708,8),o=c(o,i,r,n=a(n,10),s,t[13],2400959708,9),s=c(s,o,i,r=a(r,10),n,t[3],2400959708,14),n=c(n,s,o,i=a(i,10),r,t[7],2400959708,5),r=c(r,n,s,o=a(o,10),i,t[15],2400959708,6),i=c(i,r,n,s=a(s,10),o,t[14],2400959708,8),o=c(o,i,r,n=a(n,10),s,t[5],2400959708,6),s=c(s,o,i,r=a(r,10),n,t[6],2400959708,5),r=d(r,n=c(n,s,o,i=a(i,10),r,t[2],2400959708,12),s,o=a(o,10),i,t[4],2840853838,9),i=d(i,r,n,s=a(s,10),o,t[0],2840853838,15),o=d(o,i,r,n=a(n,10),s,t[5],2840853838,5),s=d(s,o,i,r=a(r,10),n,t[9],2840853838,11),n=d(n,s,o,i=a(i,10),r,t[7],2840853838,6),r=d(r,n,s,o=a(o,10),i,t[12],2840853838,8),i=d(i,r,n,s=a(s,10),o,t[2],2840853838,13),o=d(o,i,r,n=a(n,10),s,t[10],2840853838,12),s=d(s,o,i,r=a(r,10),n,t[14],2840853838,5),n=d(n,s,o,i=a(i,10),r,t[1],2840853838,12),r=d(r,n,s,o=a(o,10),i,t[3],2840853838,13),i=d(i,r,n,s=a(s,10),o,t[8],2840853838,14),o=d(o,i,r,n=a(n,10),s,t[11],2840853838,11),s=d(s,o,i,r=a(r,10),n,t[6],2840853838,8),n=d(n,s,o,i=a(i,10),r,t[15],2840853838,5),r=d(r,n,s,o=a(o,10),i,t[13],2840853838,6),s=a(s,10);var f=this._a,p=this._b,m=this._c,g=this._d,v=this._e;f=d(f,p,m,g,v,t[5],1352829926,8),v=d(v,f,p,m=a(m,10),g,t[14],1352829926,9),g=d(g,v,f,p=a(p,10),m,t[7],1352829926,9),m=d(m,g,v,f=a(f,10),p,t[0],1352829926,11),p=d(p,m,g,v=a(v,10),f,t[9],1352829926,13),f=d(f,p,m,g=a(g,10),v,t[2],1352829926,15),v=d(v,f,p,m=a(m,10),g,t[11],1352829926,15),g=d(g,v,f,p=a(p,10),m,t[4],1352829926,5),m=d(m,g,v,f=a(f,10),p,t[13],1352829926,7),p=d(p,m,g,v=a(v,10),f,t[6],1352829926,7),f=d(f,p,m,g=a(g,10),v,t[15],1352829926,8),v=d(v,f,p,m=a(m,10),g,t[8],1352829926,11),g=d(g,v,f,p=a(p,10),m,t[1],1352829926,14),m=d(m,g,v,f=a(f,10),p,t[10],1352829926,14),p=d(p,m,g,v=a(v,10),f,t[3],1352829926,12),v=c(v,f=d(f,p,m,g=a(g,10),v,t[12],1352829926,6),p,m=a(m,10),g,t[6],1548603684,9),g=c(g,v,f,p=a(p,10),m,t[11],1548603684,13),m=c(m,g,v,f=a(f,10),p,t[3],1548603684,15),p=c(p,m,g,v=a(v,10),f,t[7],1548603684,7),f=c(f,p,m,g=a(g,10),v,t[0],1548603684,12),v=c(v,f,p,m=a(m,10),g,t[13],1548603684,8),g=c(g,v,f,p=a(p,10),m,t[5],1548603684,9),m=c(m,g,v,f=a(f,10),p,t[10],1548603684,11),p=c(p,m,g,v=a(v,10),f,t[14],1548603684,7),f=c(f,p,m,g=a(g,10),v,t[15],1548603684,7),v=c(v,f,p,m=a(m,10),g,t[8],1548603684,12),g=c(g,v,f,p=a(p,10),m,t[12],1548603684,7),m=c(m,g,v,f=a(f,10),p,t[4],1548603684,6),p=c(p,m,g,v=a(v,10),f,t[9],1548603684,15),f=c(f,p,m,g=a(g,10),v,t[1],1548603684,13),g=u(g,v=c(v,f,p,m=a(m,10),g,t[2],1548603684,11),f,p=a(p,10),m,t[15],1836072691,9),m=u(m,g,v,f=a(f,10),p,t[5],1836072691,7),p=u(p,m,g,v=a(v,10),f,t[1],1836072691,15),f=u(f,p,m,g=a(g,10),v,t[3],1836072691,11),v=u(v,f,p,m=a(m,10),g,t[7],1836072691,8),g=u(g,v,f,p=a(p,10),m,t[14],1836072691,6),m=u(m,g,v,f=a(f,10),p,t[6],1836072691,6),p=u(p,m,g,v=a(v,10),f,t[9],1836072691,14),f=u(f,p,m,g=a(g,10),v,t[11],1836072691,12),v=u(v,f,p,m=a(m,10),g,t[8],1836072691,13),g=u(g,v,f,p=a(p,10),m,t[12],1836072691,5),m=u(m,g,v,f=a(f,10),p,t[2],1836072691,14),p=u(p,m,g,v=a(v,10),f,t[10],1836072691,13),f=u(f,p,m,g=a(g,10),v,t[0],1836072691,13),v=u(v,f,p,m=a(m,10),g,t[4],1836072691,7),m=l(m,g=u(g,v,f,p=a(p,10),m,t[13],1836072691,5),v,f=a(f,10),p,t[8],2053994217,15),p=l(p,m,g,v=a(v,10),f,t[6],2053994217,5),f=l(f,p,m,g=a(g,10),v,t[4],2053994217,8),v=l(v,f,p,m=a(m,10),g,t[1],2053994217,11),g=l(g,v,f,p=a(p,10),m,t[3],2053994217,14),m=l(m,g,v,f=a(f,10),p,t[11],2053994217,14),p=l(p,m,g,v=a(v,10),f,t[15],2053994217,6),f=l(f,p,m,g=a(g,10),v,t[0],2053994217,14),v=l(v,f,p,m=a(m,10),g,t[5],2053994217,6),g=l(g,v,f,p=a(p,10),m,t[12],2053994217,9),m=l(m,g,v,f=a(f,10),p,t[2],2053994217,12),p=l(p,m,g,v=a(v,10),f,t[13],2053994217,9),f=l(f,p,m,g=a(g,10),v,t[9],2053994217,12),v=l(v,f,p,m=a(m,10),g,t[7],2053994217,5),g=l(g,v,f,p=a(p,10),m,t[10],2053994217,15),p=h(p,m=l(m,g,v,f=a(f,10),p,t[14],2053994217,8),g,v=a(v,10),f,t[12],0,8),f=h(f,p,m,g=a(g,10),v,t[15],0,5),v=h(v,f,p,m=a(m,10),g,t[10],0,12),g=h(g,v,f,p=a(p,10),m,t[4],0,9),m=h(m,g,v,f=a(f,10),p,t[1],0,12),p=h(p,m,g,v=a(v,10),f,t[5],0,5),f=h(f,p,m,g=a(g,10),v,t[8],0,14),v=h(v,f,p,m=a(m,10),g,t[7],0,6),g=h(g,v,f,p=a(p,10),m,t[6],0,8),m=h(m,g,v,f=a(f,10),p,t[2],0,13),p=h(p,m,g,v=a(v,10),f,t[13],0,6),f=h(f,p,m,g=a(g,10),v,t[14],0,5),v=h(v,f,p,m=a(m,10),g,t[0],0,15),g=h(g,v,f,p=a(p,10),m,t[3],0,13),m=h(m,g,v,f=a(f,10),p,t[9],0,11),p=h(p,m,g,v=a(v,10),f,t[11],0,11),g=a(g,10);var y=this._b+n+g|0;this._b=this._c+s+v|0,this._c=this._d+o+f|0,this._d=this._e+i+p|0,this._e=this._a+r+m|0,this._a=y},o.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=o},4367:(t,e)=>{"use strict";var i=e;function r(t){return 1===t.length?"0"+t:t}function n(t){for(var e="",i=0;i<t.length;i++)e+=r(t[i].toString(16));return e}i.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"!=typeof t){for(var r=0;r<t.length;r++)i[r]=0|t[r];return i}if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),r=0;r<t.length;r+=2)i.push(parseInt(t[r]+t[r+1],16));else for(r=0;r<t.length;r++){var n=t.charCodeAt(r),s=n>>8,o=255&n;s?i.push(s,o):i.push(o)}return i},i.zero2=r,i.toHex=n,i.encode=function(t,e){return"hex"===e?n(t):t}},4372:(t,e,i)=>{"use strict";var r=i(9675),n=i(6556)("TypedArray.prototype.buffer",!0),s=i(5680);t.exports=n||function(t){if(!s(t))throw new r("Not a Typed Array");return t.buffer}},4453:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(7271);const n=(0,i(367).A)(Object.keys,Object);var s=Object.prototype.hasOwnProperty;const o=function(t){if(!(0,r.A)(t))return n(t);var e=[];for(var i in Object(t))s.call(t,i)&&"constructor"!=i&&e.push(i);return e}},4458:(t,e,i)=>{"use strict";i.d(e,{d:()=>r});var r=(t=>(t[t.INTERACTION=50]="INTERACTION",t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(r||{})},4459:t=>{"use strict";t.exports=Number.isNaN||function(t){return t!=t}},4486:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=i(228)},4492:(t,e,i)=>{"use strict";i.d(e,{g:()=>_});var r=i(4486),n=i(9313);const s=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],o=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],a=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],h=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],l=[],u=[],c=Math.sign;!function(){for(let t=0;t<16;t++){const e=[];l.push(e);for(let i=0;i<16;i++){const r=c(s[t]*s[i]+a[t]*o[i]),n=c(o[t]*s[i]+h[t]*o[i]),l=c(s[t]*a[i]+a[t]*h[i]),u=c(o[t]*a[i]+h[t]*h[i]);for(let t=0;t<16;t++)if(s[t]===r&&o[t]===n&&a[t]===l&&h[t]===u){e.push(t);break}}}for(let t=0;t<16;t++){const e=new n.u;e.set(s[t],o[t],a[t],h[t],0,0),u.push(e)}}();const d={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>s[t],uY:t=>o[t],vX:t=>a[t],vY:t=>h[t],inv:t=>8&t?15&t:7&-t,add:(t,e)=>l[t][e],sub:(t,e)=>l[t][d.inv(e)],rotate180:t=>4^t,isVertical:t=>2==(3&t),byDirection:(t,e)=>2*Math.abs(t)<=Math.abs(e)?e>=0?d.S:d.N:2*Math.abs(e)<=Math.abs(t)?t>0?d.E:d.W:e>0?t>0?d.SE:d.SW:t>0?d.NE:d.NW,matrixAppendRotationInv:(t,e,i=0,r=0)=>{const n=u[d.inv(e)];n.tx=i,n.ty=r,t.append(n)}};var f=i(9252),p=i(133),m=i(4670);const g=()=>{};var v=i(4195),y=i(1285),b=i(1196);class _ extends r.A{constructor({source:t,label:e,frame:i,orig:r,trim:n,defaultAnchor:s,defaultBorders:o,rotate:a,dynamic:h}={}){if(super(),this.uid=(0,p.L)("texture"),this.uvs={x0:0,y0:0,x1:0,y1:0,x2:0,y2:0,x3:0,y3:0},this.frame=new f.M,this.noFrame=!1,this.dynamic=!1,this.isTexture=!0,this.label=e,this.source=t?.source??new y.v,this.noFrame=!i,i)this.frame.copyFrom(i);else{const{width:t,height:e}=this._source;this.frame.width=t,this.frame.height=e}this.orig=r||this.frame,this.trim=n,this.rotate=a??0,this.defaultAnchor=s,this.defaultBorders=o,this.destroyed=!1,this.dynamic=h||!1,this.updateUvs()}set source(t){this._source&&this._source.off("resize",this.update,this),this._source=t,t.on("resize",this.update,this),this.emit("update",this)}get source(){return this._source}get textureMatrix(){return this._textureMatrix||(this._textureMatrix=new b.N(this)),this._textureMatrix}get width(){return this.orig.width}get height(){return this.orig.height}updateUvs(){const{uvs:t,frame:e}=this,{width:i,height:r}=this._source,n=e.x/i,s=e.y/r,o=e.width/i,a=e.height/r;let h=this.rotate;if(h){const e=o/2,i=a/2,r=n+e,l=s+i;h=d.add(h,d.NW),t.x0=r+e*d.uX(h),t.y0=l+i*d.uY(h),h=d.add(h,2),t.x1=r+e*d.uX(h),t.y1=l+i*d.uY(h),h=d.add(h,2),t.x2=r+e*d.uX(h),t.y2=l+i*d.uY(h),h=d.add(h,2),t.x3=r+e*d.uX(h),t.y3=l+i*d.uY(h)}else t.x0=n,t.y0=s,t.x1=n+o,t.y1=s,t.x2=n+o,t.y2=s+a,t.x3=n,t.y3=s+a}destroy(t=!1){this._source&&t&&(this._source.destroy(),this._source=null),this._textureMatrix=null,this.destroyed=!0,this.emit("destroy",this),this.removeAllListeners()}update(){this.noFrame&&(this.frame.width=this._source.width,this.frame.height=this._source.height),this.updateUvs(),this.emit("update",this)}get baseTexture(){return(0,m.t6)(m.lj,"Texture.baseTexture is now Texture.source"),this._source}}_.EMPTY=new _({label:"EMPTY",source:new y.v({label:"EMPTY"})}),_.EMPTY.destroy=g,_.WHITE=new _({source:new v.P({resource:new Uint8Array([255,255,255,255]),width:1,height:1,alphaMode:"premultiply-alpha-on-upload",label:"WHITE"}),label:"WHITE"}),_.WHITE.destroy=g},4498:(t,e,i)=>{"use strict";i.d(e,{B:()=>r});class r{currentHistory=0;posInHistory=0;ctrlZcount=20;historyArray=[];parameters=[];constructor(){this.historyArray=[]}init(){this.historyArray=[];for(let t=0;t<this.ctrlZcount;t++)this.historyArray.push(t);if(null!=localStorage.getItem("historyArray")){const t=localStorage.getItem("historyArray");""!=t&&(this.historyArray=[],this.historyArray=JSON.parse(null===t?"[]":"["+t+"]"))}null==localStorage.getItem("history")?this.posInHistory=0:this.posInHistory=Number(localStorage.getItem("history")),this.historyArray.length>this.posInHistory&&(this.currentHistory=this.historyArray[this.posInHistory]);const t=localStorage.getItem("backup"+this.currentHistory.toString());if(null!=t){const e=JSON.parse(t??"[]");this.parameters=e}else localStorage.setItem("history",this.posInHistory.toString()),localStorage.setItem("historyArray",this.historyArray.toString());return this.parameters}clear(){localStorage.removeItem("history"),localStorage.removeItem("historyArray");for(let t=0;t<this.ctrlZcount;t++)null!=localStorage.getItem("backup"+t.toString())&&localStorage.removeItem("backup"+t.toString());this.currentHistory=0,this.posInHistory=0,this.historyArray=[];for(let t=0;t<this.ctrlZcount;t++)this.historyArray.push(t)}set(t){localStorage.setItem("backup"+this.currentHistory.toString(),JSON.stringify(t)),localStorage.setItem("history",this.posInHistory.toString()),localStorage.setItem("historyArray",this.historyArray.toString())}add(t){if(this.posInHistory==this.ctrlZcount-1)this.historyArray.push(this.historyArray[0]),this.historyArray.shift();else{this.posInHistory++;for(let t=0;t<this.ctrlZcount;t++)this.posInHistory<this.ctrlZcount-1&&this.historyArray[t+this.posInHistory]&&null!=localStorage.getItem("backup"+this.historyArray[t+this.posInHistory].toString())&&localStorage.removeItem("backup"+this.historyArray[t+this.posInHistory].toString())}this.currentHistory=this.historyArray[this.posInHistory],localStorage.setItem("backup"+this.currentHistory.toString(),JSON.stringify(t)),localStorage.setItem("history",this.posInHistory.toString()),localStorage.setItem("historyArray",this.historyArray.toString())}ctrlZ(){this.posInHistory>0&&(this.posInHistory=this.posInHistory-1),this.currentHistory=this.historyArray[this.posInHistory];const t=localStorage.getItem("backup"+this.currentHistory.toString());if(null!=t){const e=JSON.parse(t??"[]");this.parameters=e}return localStorage.setItem("history",this.posInHistory.toString()),this.parameters}ctrlR(){if(this.posInHistory<this.ctrlZcount-1&&null!=localStorage.getItem("backup"+this.historyArray[this.posInHistory+1].toString())){this.posInHistory++,this.currentHistory=this.historyArray[this.posInHistory];const t=localStorage.getItem("backup"+this.currentHistory.toString());if(null!=t){const e=JSON.parse(t??"[]");this.parameters=e}localStorage.setItem("history",this.posInHistory.toString())}return this.parameters}}},4589:t=>{"use strict";t.exports=JSON.parse('{"1.3.132.0.10":"secp256k1","1.3.132.0.33":"p224","1.2.840.10045.3.1.1":"p192","1.2.840.10045.3.1.7":"p256","1.3.132.0.34":"p384","1.3.132.0.35":"p521"}')},4598:(t,e,i)=>{var r=i(2153);e.tagClass={0:"universal",1:"application",2:"context",3:"private"},e.tagClassByName=r._reverse(e.tagClass),e.tag={0:"end",1:"bool",2:"int",3:"bitstr",4:"octstr",5:"null_",6:"objid",7:"objDesc",8:"external",9:"real",10:"enum",11:"embed",12:"utf8str",13:"relativeOid",16:"seq",17:"set",18:"numstr",19:"printstr",20:"t61str",21:"videostr",22:"ia5str",23:"utctime",24:"gentime",25:"graphstr",26:"iso646str",27:"genstr",28:"unistr",29:"charstr",30:"bmpstr"},e.tagByName=r._reverse(e.tag)},4610:(t,e,i)=>{"use strict";t.exports=u;var r=i(6048).F,n=r.ERR_METHOD_NOT_IMPLEMENTED,s=r.ERR_MULTIPLE_CALLBACK,o=r.ERR_TRANSFORM_ALREADY_TRANSFORMING,a=r.ERR_TRANSFORM_WITH_LENGTH_0,h=i(5382);function l(t,e){var i=this._transformState;i.transforming=!1;var r=i.writecb;if(null===r)return this.emit("error",new s);i.writechunk=null,i.writecb=null,null!=e&&this.push(e),r(t);var n=this._readableState;n.reading=!1,(n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}function u(t){if(!(this instanceof u))return new u(t);h.call(this,t),this._transformState={afterTransform:l.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,t&&("function"==typeof t.transform&&(this._transform=t.transform),"function"==typeof t.flush&&(this._flush=t.flush)),this.on("prefinish",c)}function c(){var t=this;"function"!=typeof this._flush||this._readableState.destroyed?d(this,null,null):this._flush(function(e,i){d(t,e,i)})}function d(t,e,i){if(e)return t.emit("error",e);if(null!=i&&t.push(i),t._writableState.length)throw new a;if(t._transformState.transforming)throw new o;return t.push(null)}i(6698)(u,h),u.prototype.push=function(t,e){return this._transformState.needTransform=!1,h.prototype.push.call(this,t,e)},u.prototype._transform=function(t,e,i){i(new n("_transform()"))},u.prototype._write=function(t,e,i){var r=this._transformState;if(r.writecb=i,r.writechunk=t,r.writeencoding=e,!r.transforming){var n=this._readableState;(r.needTransform||n.needReadable||n.length<n.highWaterMark)&&this._read(n.highWaterMark)}},u.prototype._read=function(t){var e=this._transformState;null===e.writechunk||e.transforming?e.needTransform=!0:(e.transforming=!0,this._transform(e.writechunk,e.writeencoding,e.afterTransform))},u.prototype._destroy=function(t,e){h.prototype._destroy.call(this,t,function(t){e(t)})}},4634:t=>{var e={}.toString;t.exports=Array.isArray||function(t){return"[object Array]"==e.call(t)}},4643:(t,e,i)=>{var r=i(6763);function n(t){try{if(!i.g.localStorage)return!1}catch(t){return!1}var e=i.g.localStorage[t];return null!=e&&"true"===String(e).toLowerCase()}t.exports=function(t,e){if(n("noDeprecation"))return t;var i=!1;return function(){if(!i){if(n("throwDeprecation"))throw new Error(e);n("traceDeprecation")?r.trace(e):r.warn(e),i=!0}return t.apply(this,arguments)}}},4669:(t,e,i)=>{var r=e;r.der=i(82),r.pem=i(735)},4670:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>o,lj:()=>s,t6:()=>a});var r=i(6763);const n={},s="8.0.0",o="8.3.4";function a(t,e,i=3){if(n[e])return;let s=(new Error).stack;void 0===s?r.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`):(s=s.split("\n").splice(i).join("\n"),r.groupCollapsed?(r.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}\nDeprecated since v${t}`),r.warn(s),r.groupEnd()):(r.warn("PixiJS Deprecation Warning: ",`${e}\nDeprecated since v${t}`),r.warn(s))),n[e]=!0}},4676:(t,e,i)=>{"use strict";function r(t,e){return 16777215!==t&&e?16777215!==e&&t?((t>>16&255)*(e>>16&255)/255<<16)+((t>>8&255)*(e>>8&255)/255<<8)+((255&t)*(255&e)/255|0):t:e}i.d(e,{u:()=>r})},4741:(t,e,i)=>{var r,n=i(5606);!function(t){!function(){var e="object"==typeof i.g?i.g:"object"==typeof self?self:"object"==typeof this?this:Function("return this;")(),r=s(t);function s(t,e){return function(i,r){"function"!=typeof t[i]&&Object.defineProperty(t,i,{configurable:!0,writable:!0,value:r}),e&&e(i,r)}}void 0===e.Reflect?e.Reflect=t:r=s(e.Reflect,r),function(t){var e=Object.prototype.hasOwnProperty,i="function"==typeof Symbol,r=i&&void 0!==Symbol.toPrimitive?Symbol.toPrimitive:"@@toPrimitive",s=i&&void 0!==Symbol.iterator?Symbol.iterator:"@@iterator",o="function"==typeof Object.create,a={__proto__:[]}instanceof Array,h=!o&&!a,l={create:o?function(){return D(Object.create(null))}:a?function(){return D({__proto__:null})}:function(){return D({})},has:h?function(t,i){return e.call(t,i)}:function(t,e){return e in t},get:h?function(t,i){return e.call(t,i)?t[i]:void 0}:function(t,e){return t[e]}},u=Object.getPrototypeOf(Function),c="object"==typeof n&&n.env&&"true"===n.env.REFLECT_METADATA_USE_MAP_POLYFILL,d=c||"function"!=typeof Map||"function"!=typeof Map.prototype.entries?function(){var t={},e=[],i=function(){function t(t,e,i){this._index=0,this._keys=t,this._values=e,this._selector=i}return t.prototype["@@iterator"]=function(){return this},t.prototype[s]=function(){return this},t.prototype.next=function(){var t=this._index;if(t>=0&&t<this._keys.length){var i=this._selector(this._keys[t],this._values[t]);return t+1>=this._keys.length?(this._index=-1,this._keys=e,this._values=e):this._index++,{value:i,done:!1}}return{value:void 0,done:!0}},t.prototype.throw=function(t){throw this._index>=0&&(this._index=-1,this._keys=e,this._values=e),t},t.prototype.return=function(t){return this._index>=0&&(this._index=-1,this._keys=e,this._values=e),{value:t,done:!0}},t}();return function(){function e(){this._keys=[],this._values=[],this._cacheKey=t,this._cacheIndex=-2}return Object.defineProperty(e.prototype,"size",{get:function(){return this._keys.length},enumerable:!0,configurable:!0}),e.prototype.has=function(t){return this._find(t,!1)>=0},e.prototype.get=function(t){var e=this._find(t,!1);return e>=0?this._values[e]:void 0},e.prototype.set=function(t,e){var i=this._find(t,!0);return this._values[i]=e,this},e.prototype.delete=function(e){var i=this._find(e,!1);if(i>=0){for(var r=this._keys.length,n=i+1;n<r;n++)this._keys[n-1]=this._keys[n],this._values[n-1]=this._values[n];return this._keys.length--,this._values.length--,e===this._cacheKey&&(this._cacheKey=t,this._cacheIndex=-2),!0}return!1},e.prototype.clear=function(){this._keys.length=0,this._values.length=0,this._cacheKey=t,this._cacheIndex=-2},e.prototype.keys=function(){return new i(this._keys,this._values,r)},e.prototype.values=function(){return new i(this._keys,this._values,n)},e.prototype.entries=function(){return new i(this._keys,this._values,o)},e.prototype["@@iterator"]=function(){return this.entries()},e.prototype[s]=function(){return this.entries()},e.prototype._find=function(t,e){return this._cacheKey!==t&&(this._cacheIndex=this._keys.indexOf(this._cacheKey=t)),this._cacheIndex<0&&e&&(this._cacheIndex=this._keys.length,this._keys.push(t),this._values.push(void 0)),this._cacheIndex},e}();function r(t,e){return t}function n(t,e){return e}function o(t,e){return[t,e]}}():Map,f=c||"function"!=typeof Set||"function"!=typeof Set.prototype.entries?function(){function t(){this._map=new d}return Object.defineProperty(t.prototype,"size",{get:function(){return this._map.size},enumerable:!0,configurable:!0}),t.prototype.has=function(t){return this._map.has(t)},t.prototype.add=function(t){return this._map.set(t,t),this},t.prototype.delete=function(t){return this._map.delete(t)},t.prototype.clear=function(){this._map.clear()},t.prototype.keys=function(){return this._map.keys()},t.prototype.values=function(){return this._map.values()},t.prototype.entries=function(){return this._map.entries()},t.prototype["@@iterator"]=function(){return this.keys()},t.prototype[s]=function(){return this.keys()},t}():Set,p=new(c||"function"!=typeof WeakMap?function(){var t=l.create(),i=r();return function(){function t(){this._key=r()}return t.prototype.has=function(t){var e=n(t,!1);return void 0!==e&&l.has(e,this._key)},t.prototype.get=function(t){var e=n(t,!1);return void 0!==e?l.get(e,this._key):void 0},t.prototype.set=function(t,e){return n(t,!0)[this._key]=e,this},t.prototype.delete=function(t){var e=n(t,!1);return void 0!==e&&delete e[this._key]},t.prototype.clear=function(){this._key=r()},t}();function r(){var e;do{e="@@WeakMap@@"+o()}while(l.has(t,e));return t[e]=!0,e}function n(t,r){if(!e.call(t,i)){if(!r)return;Object.defineProperty(t,i,{value:l.create()})}return t[i]}function s(t,e){for(var i=0;i<e;++i)t[i]=255*Math.random()|0;return t}function o(){var t,e=(t=16,"function"==typeof Uint8Array?"undefined"!=typeof crypto?crypto.getRandomValues(new Uint8Array(t)):"undefined"!=typeof msCrypto?msCrypto.getRandomValues(new Uint8Array(t)):s(new Uint8Array(t),t):s(new Array(t),t));e[6]=79&e[6]|64,e[8]=191&e[8]|128;for(var i="",r=0;r<16;++r){var n=e[r];4!==r&&6!==r&&8!==r||(i+="-"),n<16&&(i+="0"),i+=n.toString(16).toLowerCase()}return i}}():WeakMap);function m(t,e,i){var r=p.get(t);if(S(r)){if(!i)return;r=new d,p.set(t,r)}var n=r.get(e);if(S(n)){if(!i)return;n=new d,r.set(e,n)}return n}function g(t,e,i){if(v(t,e,i))return!0;var r=U(e);return!A(r)&&g(t,r,i)}function v(t,e,i){var r=m(e,i,!1);return!S(r)&&!!r.has(t)}function y(t,e,i){if(v(t,e,i))return b(t,e,i);var r=U(e);return A(r)?void 0:y(t,r,i)}function b(t,e,i){var r=m(e,i,!1);if(!S(r))return r.get(t)}function _(t,e,i,r){m(i,r,!0).set(t,e)}function x(t,e){var i=w(t,e),r=U(t);if(null===r)return i;var n=x(r,e);if(n.length<=0)return i;if(i.length<=0)return n;for(var s=new f,o=[],a=0,h=i;a<h.length;a++){var l=h[a];s.has(l)||(s.add(l),o.push(l))}for(var u=0,c=n;u<c.length;u++)l=c[u],s.has(l)||(s.add(l),o.push(l));return o}function w(t,e){var i=[],r=m(t,e,!1);if(S(r))return i;for(var n=function(t){var e=k(t,s);if(!C(e))throw new TypeError;var i=e.call(t);if(!E(i))throw new TypeError;return i}(r.keys()),o=0;;){var a=O(n);if(!a)return i.length=o,i;var h=B(a);try{i[o]=h}catch(t){try{L(n)}finally{throw t}}o++}}function M(t){if(null===t)return 1;switch(typeof t){case"undefined":return 0;case"boolean":return 2;case"string":return 3;case"symbol":return 4;case"number":return 5;case"object":return null===t?1:6;default:return 6}}function S(t){return void 0===t}function A(t){return null===t}function E(t){return"object"==typeof t?null!==t:"function"==typeof t}function T(t,e){switch(M(t)){case 0:case 1:case 2:case 3:case 4:case 5:return t}var i=3===e?"string":5===e?"number":"default",n=k(t,r);if(void 0!==n){var s=n.call(t,i);if(E(s))throw new TypeError;return s}return function(t,e){if("string"===e){var i=t.toString;if(C(i)&&!E(n=i.call(t)))return n;if(C(r=t.valueOf)&&!E(n=r.call(t)))return n}else{var r;if(C(r=t.valueOf)&&!E(n=r.call(t)))return n;var n,s=t.toString;if(C(s)&&!E(n=s.call(t)))return n}throw new TypeError}(t,"default"===i?"number":i)}function R(t){var e=T(t,3);return"symbol"==typeof e?e:function(t){return""+t}(e)}function P(t){return Array.isArray?Array.isArray(t):t instanceof Object?t instanceof Array:"[object Array]"===Object.prototype.toString.call(t)}function C(t){return"function"==typeof t}function I(t){return"function"==typeof t}function k(t,e){var i=t[e];if(null!=i){if(!C(i))throw new TypeError;return i}}function B(t){return t.value}function O(t){var e=t.next();return!e.done&&e}function L(t){var e=t.return;e&&e.call(t)}function U(t){var e=Object.getPrototypeOf(t);if("function"!=typeof t||t===u)return e;if(e!==u)return e;var i=t.prototype,r=i&&Object.getPrototypeOf(i);if(null==r||r===Object.prototype)return e;var n=r.constructor;return"function"!=typeof n||n===t?e:n}function D(t){return t.__=void 0,delete t.__,t}t("decorate",function(t,e,i,r){if(S(i)){if(!P(t))throw new TypeError;if(!I(e))throw new TypeError;return function(t,e){for(var i=t.length-1;i>=0;--i){var r=(0,t[i])(e);if(!S(r)&&!A(r)){if(!I(r))throw new TypeError;e=r}}return e}(t,e)}if(!P(t))throw new TypeError;if(!E(e))throw new TypeError;if(!E(r)&&!S(r)&&!A(r))throw new TypeError;return A(r)&&(r=void 0),function(t,e,i,r){for(var n=t.length-1;n>=0;--n){var s=(0,t[n])(e,i,r);if(!S(s)&&!A(s)){if(!E(s))throw new TypeError;r=s}}return r}(t,e,i=R(i),r)}),t("metadata",function(t,e){return function(i,r){if(!E(i))throw new TypeError;if(!S(r)&&!function(t){switch(M(t)){case 3:case 4:return!0;default:return!1}}(r))throw new TypeError;_(t,e,i,r)}}),t("defineMetadata",function(t,e,i,r){if(!E(i))throw new TypeError;return S(r)||(r=R(r)),_(t,e,i,r)}),t("hasMetadata",function(t,e,i){if(!E(e))throw new TypeError;return S(i)||(i=R(i)),g(t,e,i)}),t("hasOwnMetadata",function(t,e,i){if(!E(e))throw new TypeError;return S(i)||(i=R(i)),v(t,e,i)}),t("getMetadata",function(t,e,i){if(!E(e))throw new TypeError;return S(i)||(i=R(i)),y(t,e,i)}),t("getOwnMetadata",function(t,e,i){if(!E(e))throw new TypeError;return S(i)||(i=R(i)),b(t,e,i)}),t("getMetadataKeys",function(t,e){if(!E(t))throw new TypeError;return S(e)||(e=R(e)),x(t,e)}),t("getOwnMetadataKeys",function(t,e){if(!E(t))throw new TypeError;return S(e)||(e=R(e)),w(t,e)}),t("deleteMetadata",function(t,e,i){if(!E(e))throw new TypeError;S(i)||(i=R(i));var r=m(e,i,!1);if(S(r))return!1;if(!r.delete(t))return!1;if(r.size>0)return!0;var n=p.get(e);return n.delete(i),n.size>0||p.delete(e),!0})}(r)}()}(r||(r={}))},4749:(t,e,i)=>{"use strict";i.d(e,{A:()=>u});var r=i(2383),n=i(5254),s=i(3098),o={};o["[object Float32Array]"]=o["[object Float64Array]"]=o["[object Int8Array]"]=o["[object Int16Array]"]=o["[object Int32Array]"]=o["[object Uint8Array]"]=o["[object Uint8ClampedArray]"]=o["[object Uint16Array]"]=o["[object Uint32Array]"]=!0,o["[object Arguments]"]=o["[object Array]"]=o["[object ArrayBuffer]"]=o["[object Boolean]"]=o["[object DataView]"]=o["[object Date]"]=o["[object Error]"]=o["[object Function]"]=o["[object Map]"]=o["[object Number]"]=o["[object Object]"]=o["[object RegExp]"]=o["[object Set]"]=o["[object String]"]=o["[object WeakMap]"]=!1;var a=i(2789),h=i(4841),l=h.A&&h.A.isTypedArray;const u=l?(0,a.A)(l):function(t){return(0,s.A)(t)&&(0,n.A)(t.length)&&!!o[(0,r.A)(t)]}},4781:(t,e,i)=>{"use strict";var r,n;i.d(e,{K:()=>r,e:()=>n}),function(t){t[t.Burst=1]="Burst",t[t.Loop=2]="Loop"}(r||(r={})),function(t){t[t.Forward=1]="Forward",t[t.Reversed=2]="Reversed",t[t.PingPong=3]="PingPong"}(n||(n={}))},4835:(t,e,i)=>{"use strict";i.d(e,{T:()=>H});var r=i(4486),n=i(2577),s=i(9313),o=i(5101),a=i(4492),h=i(133),l=i(4670),u=i(9636),c=i(268),d=i(8133),f=i(9252);class p{constructor(t=0,e=0,i=0){this.type="circle",this.x=t,this.y=e,this.radius=i}clone(){return new p(this.x,this.y,this.radius)}contains(t,e){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-t,n=this.y-e;return r*=r,n*=n,r+n<=i}strokeContains(t,e,i,r=.5){if(0===this.radius)return!1;const n=this.x-t,s=this.y-e,o=this.radius,a=(1-r)*i,h=Math.sqrt(n*n+s*s);return h<=o+a&&h>o-(i-a)}getBounds(t){return t||(t=new f.M),t.x=this.x-this.radius,t.y=this.y-this.radius,t.width=2*this.radius,t.height=2*this.radius,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.radius=t.radius,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class m{constructor(t=0,e=0,i=0,r=0){this.type="ellipse",this.x=t,this.y=e,this.halfWidth=i,this.halfHeight=r}clone(){return new m(this.x,this.y,this.halfWidth,this.halfHeight)}contains(t,e){if(this.halfWidth<=0||this.halfHeight<=0)return!1;let i=(t-this.x)/this.halfWidth,r=(e-this.y)/this.halfHeight;return i*=i,r*=r,i+r<=1}strokeContains(t,e,i,r=.5){const{halfWidth:n,halfHeight:s}=this;if(n<=0||s<=0)return!1;const o=i*(1-r),a=i-o,h=n-a,l=s-a,u=n+o,c=s+o,d=t-this.x,f=e-this.y;return d*d/(h*h)+f*f/(l*l)>1&&d*d/(u*u)+f*f/(c*c)<=1}getBounds(t){return t||(t=new f.M),t.x=this.x-this.halfWidth,t.y=this.y-this.halfHeight,t.width=2*this.halfWidth,t.height=2*this.halfHeight,t}copyFrom(t){return this.x=t.x,this.y=t.y,this.halfWidth=t.halfWidth,this.halfHeight=t.halfHeight,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`}}function g(t,e,i,r,n,s){const o=n-i,a=s-r,h=o*o+a*a;let l,u,c=-1;0!==h&&(c=((t-i)*o+(e-r)*a)/h),c<0?(l=i,u=r):c>1?(l=n,u=s):(l=i+c*o,u=r+c*a);const d=t-l,f=e-u;return d*d+f*f}class v{constructor(...t){this.type="polygon";let e=Array.isArray(t[0])?t[0]:t;if("number"!=typeof e[0]){const t=[];for(let i=0,r=e.length;i<r;i++)t.push(e[i].x,e[i].y);e=t}this.points=e,this.closePath=!0}clone(){const t=this.points.slice(),e=new v(t);return e.closePath=this.closePath,e}contains(t,e){let i=!1;const r=this.points.length/2;for(let n=0,s=r-1;n<r;s=n++){const r=this.points[2*n],o=this.points[2*n+1],a=this.points[2*s],h=this.points[2*s+1];o>e!=h>e&&t<(e-o)/(h-o)*(a-r)+r&&(i=!i)}return i}strokeContains(t,e,i,r=.5){const n=i*i,s=n*(1-r),o=n-s,{points:a}=this,h=a.length-(this.closePath?0:2);for(let i=0;i<h;i+=2){const r=a[i],n=a[i+1],h=a[(i+2)%a.length],l=a[(i+3)%a.length];if(g(t,e,r,n,h,l)<=(Math.sign((h-r)*(e-n)-(l-n)*(t-r))<0?o:s))return!0}return!1}getBounds(t){t||(t=new f.M);const e=this.points;let i=1/0,r=-1/0,n=1/0,s=-1/0;for(let t=0,o=e.length;t<o;t+=2){const o=e[t],a=e[t+1];i=o<i?o:i,r=o>r?o:r,n=a<n?a:n,s=a>s?a:s}return t.x=i,t.width=r-i,t.y=n,t.height=s-n,t}copyFrom(t){return this.points=t.points.slice(),this.closePath=t.closePath,this}copyTo(t){return t.copyFrom(this),t}toString(){return`[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((t,e)=>`${t}, ${e}`,"")}]`}get lastX(){return this.points[this.points.length-2]}get lastY(){return this.points[this.points.length-1]}get x(){return this.points[this.points.length-2]}get y(){return this.points[this.points.length-1]}}const y=(t,e,i,r,n,s,o)=>{const a=t-i,h=e-r,l=Math.sqrt(a*a+h*h);return l>=n-s&&l<=n+o};class b{constructor(t=0,e=0,i=0,r=0,n=20){this.type="roundedRectangle",this.x=t,this.y=e,this.width=i,this.height=r,this.radius=n}getBounds(t){return t||(t=new f.M),t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}clone(){return new b(this.x,this.y,this.width,this.height,this.radius)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(e>=this.y+i&&e<=this.y+this.height-i||t>=this.x+i&&t<=this.x+this.width-i)return!0;let r=t-(this.x+i),n=e-(this.y+i);const s=i*i;if(r*r+n*n<=s)return!0;if(r=t-(this.x+this.width-i),r*r+n*n<=s)return!0;if(n=e-(this.y+this.height-i),r*r+n*n<=s)return!0;if(r=t-(this.x+i),r*r+n*n<=s)return!0}return!1}strokeContains(t,e,i,r=.5){const{x:n,y:s,width:o,height:a,radius:h}=this,l=i*(1-r),u=i-l,c=n+h,d=s+h,f=n+o,p=s+a;return(t>=n-l&&t<=n+u||t>=f-u&&t<=f+l)&&e>=d&&e<=d+(a-2*h)||(e>=s-l&&e<=s+u||e>=p-u&&e<=p+l)&&t>=c&&t<=c+(o-2*h)||t<c&&e<d&&y(t,e,c,d,h,u,l)||t>f-h&&e<d&&y(t,e,f-h,d,h,u,l)||t>f-h&&e>p-h&&y(t,e,f-h,p-h,h,u,l)||t<c&&e>p-h&&y(t,e,c,p-h,h,u,l)}toString(){return`[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}var _=i(1335);const x=1.1920929e-7;function w(t,e,i,r,n,s,o,a,h,l){let u=(1-Math.min(.99,Math.max(0,l??_.GH.defaultOptions.bezierSmoothness)))/1;return u*=u,function(t,e,i,r,n,s,o,a,h,l){M(t,e,i,r,n,s,o,a,h,l,0),h.push(o,a)}(e,i,r,n,s,o,a,h,t,u),t}function M(t,e,i,r,n,s,o,a,h,l,u){if(u>8)return;Math.PI;const c=(t+i)/2,d=(e+r)/2,f=(i+n)/2,p=(r+s)/2,m=(n+o)/2,g=(s+a)/2,v=(c+f)/2,y=(d+p)/2,b=(f+m)/2,_=(p+g)/2,w=(v+b)/2,S=(y+_)/2;if(u>0){let u=o-t,c=a-e;const d=Math.abs((i-o)*c-(r-a)*u),f=Math.abs((n-o)*c-(s-a)*u);if(d>x&&f>x){if((d+f)*(d+f)<=l*(u*u+c*c))return void h.push(w,S)}else if(d>x){if(d*d<=l*(u*u+c*c))return void h.push(w,S)}else if(f>x){if(f*f<=l*(u*u+c*c))return void h.push(w,S)}else if(u=w-(t+o)/2,c=S-(e+a)/2,u*u+c*c<=l)return void h.push(w,S)}M(t,e,c,d,v,y,w,S,h,l,u+1),M(w,S,b,_,m,g,o,a,h,l,u+1)}function S(t,e,i,r,n,s,o,a){let h=(1-Math.min(.99,Math.max(0,a??_.GH.defaultOptions.bezierSmoothness)))/1;return h*=h,function(t,e,i,r,n,s,o,a){A(o,t,e,i,r,n,s,a,0),o.push(n,s)}(e,i,r,n,s,o,t,h),t}function A(t,e,i,r,n,s,o,a,h){if(h>8)return;Math.PI;const l=(e+r)/2,u=(i+n)/2,c=(r+s)/2,d=(n+o)/2,f=(l+c)/2,p=(u+d)/2;let m=s-e,g=o-i;const v=Math.abs((r-s)*g-(n-o)*m);if(v>1.1920929e-7){if(v*v<=a*(m*m+g*g))return void t.push(f,p)}else if(m=f-(e+s)/2,g=p-(i+o)/2,m*m+g*g<=a)return void t.push(f,p);A(t,e,i,l,u,f,p,a,h+1),A(t,f,p,c,d,s,o,a,h+1)}function E(t,e,i,r,n,s,o,a){let h=Math.abs(n-s);(!o&&n>s||o&&s>n)&&(h=2*Math.PI-h),a||(a=Math.max(6,Math.floor(6*Math.pow(r,1/3)*(h/Math.PI))));let l=h/(a=Math.max(a,3)),u=n;l*=o?-1:1;for(let n=0;n<a+1;n++){const n=e+Math.cos(u)*r,s=i+Math.sin(u)*r;t.push(n,s),u+=l}}const T=2*Math.PI,R={centerX:0,centerY:0,ang1:0,ang2:0},P=({x:t,y:e},i,r,n,s,o,a,h)=>{const l=n*(t*=i)-s*(e*=r),u=s*t+n*e;return h.x=l+o,h.y=u+a,h};function C(t,e){const i=-1.5707963267948966===e?-.551915024494:4/3*Math.tan(e/4),r=1.5707963267948966===e?.551915024494:i,n=Math.cos(t),s=Math.sin(t),o=Math.cos(t+e),a=Math.sin(t+e);return[{x:n-s*r,y:s+n*r},{x:o+a*r,y:a-o*r},{x:o,y:a}]}const I=(t,e,i,r)=>{let n=t*i+e*r;return n>1&&(n=1),n<-1&&(n=-1),(t*r-e*i<0?-1:1)*Math.acos(n)};const k=new f.M;class B{constructor(t){this.shapePrimitives=[],this._currentPoly=null,this._bounds=new u.c,this._graphicsPath2D=t}moveTo(t,e){return this.startPoly(t,e),this}lineTo(t,e){this._ensurePoly();const i=this._currentPoly.points,r=i[i.length-2],n=i[i.length-1];return r===t&&n===e||i.push(t,e),this}arc(t,e,i,r,n,s){return this._ensurePoly(!1),E(this._currentPoly.points,t,e,i,r,n,s),this}arcTo(t,e,i,r,n){return this._ensurePoly(),function(t,e,i,r,n,s){const o=t[t.length-2],a=t[t.length-1]-i,h=o-e,l=n-i,u=r-e,c=Math.abs(a*u-h*l);if(c<1e-8||0===s)return void(t[t.length-2]===e&&t[t.length-1]===i||t.push(e,i));const d=a*a+h*h,f=l*l+u*u,p=a*l+h*u,m=s*Math.sqrt(d)/c,g=s*Math.sqrt(f)/c,v=m*p/d,y=g*p/f,b=m*u+g*h,_=m*l+g*a,x=h*(g+v),w=a*(g+v),M=u*(m+y),S=l*(m+y);E(t,b+e,_+i,s,Math.atan2(w-_,x-b),Math.atan2(S-_,M-b),h*l>u*a)}(this._currentPoly.points,t,e,i,r,n),this}arcToSvg(t,e,i,r,n,s,o){return function(t,e,i,r,n,s,o,a=0,h=0,l=0){if(0===s||0===o)return;const u=Math.sin(a*T/360),c=Math.cos(a*T/360),d=c*(e-r)/2+u*(i-n)/2,f=-u*(e-r)/2+c*(i-n)/2;if(0===d&&0===f)return;s=Math.abs(s),o=Math.abs(o);const p=Math.pow(d,2)/Math.pow(s,2)+Math.pow(f,2)/Math.pow(o,2);p>1&&(s*=Math.sqrt(p),o*=Math.sqrt(p)),((t,e,i,r,n,s,o,a,h,l,u,c,d)=>{const f=Math.pow(n,2),p=Math.pow(s,2),m=Math.pow(u,2),g=Math.pow(c,2);let v=f*p-f*g-p*m;v<0&&(v=0),v/=f*g+p*m,v=Math.sqrt(v)*(o===a?-1:1);const y=v*n/s*c,b=v*-s/n*u,_=l*y-h*b+(t+i)/2,x=h*y+l*b+(e+r)/2,w=(u-y)/n,M=(c-b)/s,S=(-u-y)/n,A=(-c-b)/s,E=I(1,0,w,M);let R=I(w,M,S,A);0===a&&R>0&&(R-=T),1===a&&R<0&&(R+=T),d.centerX=_,d.centerY=x,d.ang1=E,d.ang2=R})(e,i,r,n,s,o,h,l,u,c,d,f,R);let{ang1:m,ang2:g}=R;const{centerX:v,centerY:y}=R;let b=Math.abs(g)/(T/4);Math.abs(1-b)<1e-7&&(b=1);const _=Math.max(Math.ceil(b),1);g/=_;let x=t[t.length-2],M=t[t.length-1];const S={x:0,y:0};for(let e=0;e<_;e++){const e=C(m,g),{x:i,y:r}=P(e[0],s,o,c,u,v,y,S),{x:n,y:a}=P(e[1],s,o,c,u,v,y,S),{x:h,y:l}=P(e[2],s,o,c,u,v,y,S);w(t,x,M,i,r,n,a,h,l),x=h,M=l,m+=g}}(this._currentPoly.points,this._currentPoly.lastX,this._currentPoly.lastY,s,o,t,e,i,r,n),this}bezierCurveTo(t,e,i,r,n,s,o){this._ensurePoly();const a=this._currentPoly;return w(this._currentPoly.points,a.lastX,a.lastY,t,e,i,r,n,s,o),this}quadraticCurveTo(t,e,i,r,n){this._ensurePoly();const s=this._currentPoly;return S(this._currentPoly.points,s.lastX,s.lastY,t,e,i,r,n),this}closePath(){return this.endPoly(!0),this}addPath(t,e){this.endPoly(),e&&!e.isIdentity()&&(t=t.clone(!0)).transform(e);for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}return this}finish(t=!1){this.endPoly(t)}rect(t,e,i,r,n){return this.drawShape(new f.M(t,e,i,r),n),this}circle(t,e,i,r){return this.drawShape(new p(t,e,i),r),this}poly(t,e,i){const r=new v(t);return r.closePath=e,this.drawShape(r,i),this}regularPoly(t,e,i,r,n=0,s){r=Math.max(0|r,3);const o=-1*Math.PI/2+n,a=2*Math.PI/r,h=[];for(let n=0;n<r;n++){const r=o-n*a;h.push(t+i*Math.cos(r),e+i*Math.sin(r))}return this.poly(h,!0,s),this}roundPoly(t,e,i,r,n,s=0,o){if(r=Math.max(0|r,3),n<=0)return this.regularPoly(t,e,i,r,s);const a=i*Math.sin(Math.PI/r)-.001;n=Math.min(n,a);const h=-1*Math.PI/2+s,l=2*Math.PI/r,u=(r-2)*Math.PI/r/2;for(let s=0;s<r;s++){const r=s*l+h,a=t+i*Math.cos(r),c=e+i*Math.sin(r),d=r+Math.PI+u,f=r-Math.PI-u,p=a+n*Math.cos(d),m=c+n*Math.sin(d),g=a+n*Math.cos(f),v=c+n*Math.sin(f);0===s?this.moveTo(p,m):this.lineTo(p,m),this.quadraticCurveTo(a,c,g,v,o)}return this.closePath()}roundShape(t,e,i=!1,r){return t.length<3?this:(i?function(t,e,i,r){const n=(t,e)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),s=(t,e,i)=>({x:t.x+(e.x-t.x)*i,y:t.y+(e.y-t.y)*i}),o=e.length;for(let a=0;a<o;a++){const h=e[(a+1)%o],l=h.radius??i;if(l<=0){0===a?t.moveTo(h.x,h.y):t.lineTo(h.x,h.y);continue}const u=e[a],c=e[(a+2)%o],d=n(u,h);let f;f=d<1e-4?h:s(h,u,Math.min(d/2,l)/d);const p=n(c,h);let m;m=p<1e-4?h:s(h,c,Math.min(p/2,l)/p),0===a?t.moveTo(f.x,f.y):t.lineTo(f.x,f.y),t.quadraticCurveTo(h.x,h.y,m.x,m.y,r)}}(this,t,e,r):function(t,e,i){const r=(t,e)=>{const i=e.x-t.x,r=e.y-t.y,n=Math.sqrt(i*i+r*r);return{len:n,nx:i/n,ny:r/n}},n=(e,i)=>{0===e?t.moveTo(i.x,i.y):t.lineTo(i.x,i.y)};let s=e[e.length-1];for(let o=0;o<e.length;o++){const a=e[o%e.length],h=a.radius??i;if(h<=0){n(o,a),s=a;continue}const l=e[(o+1)%e.length],u=r(a,s),c=r(a,l);if(u.len<1e-4||c.len<1e-4){n(o,a),s=a;continue}let d=Math.asin(u.nx*c.ny-u.ny*c.nx),f=1,p=!1;u.nx*c.nx-u.ny*-c.ny<0?d<0?d=Math.PI+d:(d=Math.PI-d,f=-1,p=!0):d>0&&(f=-1,p=!0);const m=d/2;let g,v=Math.abs(Math.cos(m)*h/Math.sin(m));v>Math.min(u.len/2,c.len/2)?(v=Math.min(u.len/2,c.len/2),g=Math.abs(v*Math.sin(m)/Math.cos(m))):g=h;const y=a.x+c.nx*v+-c.ny*g*f,b=a.y+c.ny*v+c.nx*g*f,_=Math.atan2(u.ny,u.nx)+Math.PI/2*f,x=Math.atan2(c.ny,c.nx)-Math.PI/2*f;0===o&&t.moveTo(y+Math.cos(_)*g,b+Math.sin(_)*g),t.arc(y,b,g,_,x,p),s=a}}(this,t,e),this.closePath())}filletRect(t,e,i,r,n){if(0===n)return this.rect(t,e,i,r);const s=Math.min(i,r)/2,o=Math.min(s,Math.max(-s,n)),a=t+i,h=e+r,l=o<0?-o:0,u=Math.abs(o);return this.moveTo(t,e+u).arcTo(t+l,e+l,t+u,e,u).lineTo(a-u,e).arcTo(a-l,e+l,a,e+u,u).lineTo(a,h-u).arcTo(a-l,h-l,t+i-u,h,u).lineTo(t+u,h).arcTo(t+l,h-l,t,h-u,u).closePath()}chamferRect(t,e,i,r,n,s){if(n<=0)return this.rect(t,e,i,r);const o=Math.min(n,Math.min(i,r)/2),a=t+i,h=e+r,l=[t+o,e,a-o,e,a,e+o,a,h-o,a-o,h,t+o,h,t,h-o,t,e+o];for(let t=l.length-1;t>=2;t-=2)l[t]===l[t-2]&&l[t-1]===l[t-3]&&l.splice(t-1,2);return this.poly(l,!0,s)}ellipse(t,e,i,r,n){return this.drawShape(new m(t,e,i,r),n),this}roundRect(t,e,i,r,n,s){return this.drawShape(new b(t,e,i,r,n),s),this}drawShape(t,e){return this.endPoly(),this.shapePrimitives.push({shape:t,transform:e}),this}startPoly(t,e){let i=this._currentPoly;return i&&this.endPoly(),i=new v,i.points.push(t,e),this._currentPoly=i,this}endPoly(t=!1){const e=this._currentPoly;return e&&e.points.length>2&&(e.closePath=t,this.shapePrimitives.push({shape:e})),this._currentPoly=null,this}_ensurePoly(t=!0){if(!this._currentPoly&&(this._currentPoly=new v,t)){const t=this.shapePrimitives[this.shapePrimitives.length-1];if(t){let e=t.shape.x,i=t.shape.y;if(t.transform&&!t.transform.isIdentity()){const r=t.transform,n=e;e=r.a*e+r.c*i+r.tx,i=r.b*n+r.d*i+r.ty}this._currentPoly.points.push(e,i)}else this._currentPoly.points.push(0,0)}}buildPath(){const t=this._graphicsPath2D;this.shapePrimitives.length=0,this._currentPoly=null;for(let e=0;e<t.instructions.length;e++){const i=t.instructions[e];this[i.action](...i.data)}this.finish()}get bounds(){const t=this._bounds;t.clear();const e=this.shapePrimitives;for(let i=0;i<e.length;i++){const r=e[i],n=r.shape.getBounds(k);r.transform?t.addRect(n,r.transform):t.addRect(n)}return t}}class O{constructor(t){this.instructions=[],this.uid=(0,h.L)("graphicsPath"),this._dirty=!0,"string"==typeof t?function(t,e){const i=d(t),r=[];let n=null,s=0,o=0;for(let t=0;t<i.length;t++){const a=i[t],h=a[0],l=a;switch(h){case"M":s=l[1],o=l[2],e.moveTo(s,o);break;case"m":s+=l[1],o+=l[2],e.moveTo(s,o);break;case"H":s=l[1],e.lineTo(s,o);break;case"h":s+=l[1],e.lineTo(s,o);break;case"V":o=l[1],e.lineTo(s,o);break;case"v":o+=l[1],e.lineTo(s,o);break;case"L":s=l[1],o=l[2],e.lineTo(s,o);break;case"l":s+=l[1],o+=l[2],e.lineTo(s,o);break;case"C":s=l[5],o=l[6],e.bezierCurveTo(l[1],l[2],l[3],l[4],s,o);break;case"c":e.bezierCurveTo(s+l[1],o+l[2],s+l[3],o+l[4],s+l[5],o+l[6]),s+=l[5],o+=l[6];break;case"S":s=l[3],o=l[4],e.bezierCurveToShort(l[1],l[2],s,o);break;case"s":e.bezierCurveToShort(s+l[1],o+l[2],s+l[3],o+l[4]),s+=l[3],o+=l[4];break;case"Q":s=l[3],o=l[4],e.quadraticCurveTo(l[1],l[2],s,o);break;case"q":e.quadraticCurveTo(s+l[1],o+l[2],s+l[3],o+l[4]),s+=l[3],o+=l[4];break;case"T":s=l[1],o=l[2],e.quadraticCurveToShort(s,o);break;case"t":s+=l[1],o+=l[2],e.quadraticCurveToShort(s,o);break;case"A":s=l[6],o=l[7],e.arcToSvg(l[1],l[2],l[3],l[4],l[5],s,o);break;case"a":s+=l[6],o+=l[7],e.arcToSvg(l[1],l[2],l[3],l[4],l[5],s,o);break;case"Z":case"z":e.closePath(),r.length>0&&(n=r.pop(),n?(s=n.startX,o=n.startY):(s=0,o=0)),n=null;break;default:(0,c.R)(`Unknown SVG path command: ${h}`)}"Z"!==h&&"z"!==h&&null===n&&(n={startX:s,startY:o},r.push(n))}}(t,this):this.instructions=t?.slice()??[]}get shapePath(){return this._shapePath||(this._shapePath=new B(this)),this._dirty&&(this._dirty=!1,this._shapePath.buildPath()),this._shapePath}addPath(t,e){return t=t.clone(),this.instructions.push({action:"addPath",data:[t,e]}),this._dirty=!0,this}arc(...t){return this.instructions.push({action:"arc",data:t}),this._dirty=!0,this}arcTo(...t){return this.instructions.push({action:"arcTo",data:t}),this._dirty=!0,this}arcToSvg(...t){return this.instructions.push({action:"arcToSvg",data:t}),this._dirty=!0,this}bezierCurveTo(...t){return this.instructions.push({action:"bezierCurveTo",data:t}),this._dirty=!0,this}bezierCurveToShort(t,e,i,r,n){const s=this.instructions[this.instructions.length-1],a=this.getLastPoint(o.b.shared);let h=0,l=0;if(s&&"bezierCurveTo"===s.action){h=s.data[2],l=s.data[3];const t=a.x,e=a.y;h=t+(t-h),l=e+(e-l)}else h=a.x,l=a.y;return this.instructions.push({action:"bezierCurveTo",data:[h,l,t,e,i,r,n]}),this._dirty=!0,this}closePath(){return this.instructions.push({action:"closePath",data:[]}),this._dirty=!0,this}ellipse(...t){return this.instructions.push({action:"ellipse",data:t}),this._dirty=!0,this}lineTo(...t){return this.instructions.push({action:"lineTo",data:t}),this._dirty=!0,this}moveTo(...t){return this.instructions.push({action:"moveTo",data:t}),this}quadraticCurveTo(...t){return this.instructions.push({action:"quadraticCurveTo",data:t}),this._dirty=!0,this}quadraticCurveToShort(t,e,i){const r=this.instructions[this.instructions.length-1],n=this.getLastPoint(o.b.shared);let s=0,a=0;if(r&&"quadraticCurveTo"===r.action){s=r.data[0],a=r.data[1];const t=n.x,e=n.y;s=t+(t-s),a=e+(e-a)}else s=n.x,a=n.y;return this.instructions.push({action:"quadraticCurveTo",data:[s,a,t,e,i]}),this._dirty=!0,this}rect(t,e,i,r,n){return this.instructions.push({action:"rect",data:[t,e,i,r,n]}),this._dirty=!0,this}circle(t,e,i,r){return this.instructions.push({action:"circle",data:[t,e,i,r]}),this._dirty=!0,this}roundRect(...t){return this.instructions.push({action:"roundRect",data:t}),this._dirty=!0,this}poly(...t){return this.instructions.push({action:"poly",data:t}),this._dirty=!0,this}regularPoly(...t){return this.instructions.push({action:"regularPoly",data:t}),this._dirty=!0,this}roundPoly(...t){return this.instructions.push({action:"roundPoly",data:t}),this._dirty=!0,this}roundShape(...t){return this.instructions.push({action:"roundShape",data:t}),this._dirty=!0,this}filletRect(...t){return this.instructions.push({action:"filletRect",data:t}),this._dirty=!0,this}chamferRect(...t){return this.instructions.push({action:"chamferRect",data:t}),this._dirty=!0,this}star(t,e,i,r,n,s,o){n||(n=r/2);const a=-1*Math.PI/2+s,h=2*i,l=2*Math.PI/h,u=[];for(let i=0;i<h;i++){const s=i%2?n:r,o=i*l+a;u.push(t+s*Math.cos(o),e+s*Math.sin(o))}return this.poly(u,!0,o),this}clone(t=!1){const e=new O;if(t)for(let t=0;t<this.instructions.length;t++){const i=this.instructions[t];e.instructions.push({action:i.action,data:i.data.slice()})}else e.instructions=this.instructions.slice();return e}clear(){return this.instructions.length=0,this._dirty=!0,this}transform(t){if(t.isIdentity())return this;const e=t.a,i=t.b,r=t.c,n=t.d,s=t.tx,o=t.ty;let a=0,h=0,l=0,u=0,d=0,f=0,p=0,m=0;for(let g=0;g<this.instructions.length;g++){const v=this.instructions[g],y=v.data;switch(v.action){case"moveTo":case"lineTo":a=y[0],h=y[1],y[0]=e*a+r*h+s,y[1]=i*a+n*h+o;break;case"bezierCurveTo":l=y[0],u=y[1],d=y[2],f=y[3],a=y[4],h=y[5],y[0]=e*l+r*u+s,y[1]=i*l+n*u+o,y[2]=e*d+r*f+s,y[3]=i*d+n*f+o,y[4]=e*a+r*h+s,y[5]=i*a+n*h+o;break;case"quadraticCurveTo":l=y[0],u=y[1],a=y[2],h=y[3],y[0]=e*l+r*u+s,y[1]=i*l+n*u+o,y[2]=e*a+r*h+s,y[3]=i*a+n*h+o;break;case"arcToSvg":a=y[5],h=y[6],p=y[0],m=y[1],y[0]=e*p+r*m,y[1]=i*p+n*m,y[5]=e*a+r*h+s,y[6]=i*a+n*h+o;break;case"circle":y[4]=L(y[3],t);break;case"rect":y[4]=L(y[4],t);break;case"ellipse":y[8]=L(y[8],t);break;case"roundRect":y[5]=L(y[5],t);break;case"addPath":y[0].transform(t);break;case"poly":y[2]=L(y[2],t);break;default:(0,c.R)("unknown transform action",v.action)}}return this._dirty=!0,this}get bounds(){return this.shapePath.bounds}getLastPoint(t){let e=this.instructions.length-1,i=this.instructions[e];if(!i)return t.x=0,t.y=0,t;for(;"closePath"===i.action;){if(e--,e<0)return t.x=0,t.y=0,t;i=this.instructions[e]}switch(i.action){case"moveTo":case"lineTo":t.x=i.data[0],t.y=i.data[1];break;case"quadraticCurveTo":t.x=i.data[2],t.y=i.data[3];break;case"bezierCurveTo":t.x=i.data[4],t.y=i.data[5];break;case"arc":case"arcToSvg":t.x=i.data[5],t.y=i.data[6];break;case"addPath":i.data[0].getLastPoint(t)}return t}}function L(t,e){return t?t.prepend(e):e.clone()}var U=i(6763);function D(t,e){if("string"==typeof t){const e=document.createElement("div");e.innerHTML=t.trim(),t=e.querySelector("svg")}return N(t,{context:e,path:new O},null,null),e}function N(t,e,i,r){const s=t.children,{fillStyle:o,strokeStyle:a}=function(t){const e=t.getAttribute("style"),i={},r={};let s=!1,o=!1;if(e){const t=e.split(";");for(let e=0;e<t.length;e++){const a=t[e],[h,l]=a.split(":");switch(h){case"stroke":"none"!==l&&(i.color=n.Q.shared.setValue(l).toNumber(),o=!0);break;case"stroke-width":i.width=Number(l);break;case"fill":"none"!==l&&(s=!0,r.color=n.Q.shared.setValue(l).toNumber());break;case"fill-opacity":r.alpha=Number(l);break;case"stroke-opacity":i.alpha=Number(l);break;case"opacity":r.alpha=Number(l),i.alpha=Number(l)}}}else{const e=t.getAttribute("stroke");e&&"none"!==e&&(o=!0,i.color=n.Q.shared.setValue(e).toNumber(),i.width=F(t,"stroke-width",1));const a=t.getAttribute("fill");a&&"none"!==a&&(s=!0,r.color=n.Q.shared.setValue(a).toNumber())}return{strokeStyle:o?i:null,fillStyle:s?r:null}}(t);let h,l,u,c,d,f,p,m,g,v,y,b,_,x,w,M,S;switch(o&&i?i={...i,...o}:o&&(i=o),a&&r?r={...r,...a}:a&&(r=a),e.context.fillStyle=i,e.context.strokeStyle=r,t.nodeName.toLowerCase()){case"path":x=t.getAttribute("d"),w=new O(x),e.context.path(w),i&&e.context.fill(),r&&e.context.stroke();break;case"circle":p=F(t,"cx",0),m=F(t,"cy",0),g=F(t,"r",0),e.context.ellipse(p,m,g,g),i&&e.context.fill(),r&&e.context.stroke();break;case"rect":h=F(t,"x",0),l=F(t,"y",0),M=F(t,"width",0),S=F(t,"height",0),v=F(t,"rx",0),y=F(t,"ry",0),v||y?e.context.roundRect(h,l,M,S,v||y):e.context.rect(h,l,M,S),i&&e.context.fill(),r&&e.context.stroke();break;case"ellipse":p=F(t,"cx",0),m=F(t,"cy",0),v=F(t,"rx",0),y=F(t,"ry",0),e.context.beginPath(),e.context.ellipse(p,m,v,y),i&&e.context.fill(),r&&e.context.stroke();break;case"line":u=F(t,"x1",0),c=F(t,"y1",0),d=F(t,"x2",0),f=F(t,"y2",0),e.context.beginPath(),e.context.moveTo(u,c),e.context.lineTo(d,f),r&&e.context.stroke();break;case"polygon":_=t.getAttribute("points"),b=_.match(/\d+/g).map(t=>parseInt(t,10)),e.context.poly(b,!0),i&&e.context.fill(),r&&e.context.stroke();break;case"polyline":_=t.getAttribute("points"),b=_.match(/\d+/g).map(t=>parseInt(t,10)),e.context.poly(b,!1),r&&e.context.stroke();break;case"g":case"svg":break;default:U.info(`[SVG parser] <${t.nodeName}> elements unsupported`)}for(let t=0;t<s.length;t++)N(s[t],e,i,r)}function F(t,e,i){const r=t.getAttribute(e);return r?Number(r):i}var z=i(990);const G=new o.b,j=new s.u,V=class t extends r.A{constructor(){super(...arguments),this.uid=(0,h.L)("graphicsContext"),this.dirty=!0,this.batchMode="auto",this.instructions=[],this._activePath=new O,this._transform=new s.u,this._fillStyle={...t.defaultFillStyle},this._strokeStyle={...t.defaultStrokeStyle},this._stateStack=[],this._tick=0,this._bounds=new u.c,this._boundsDirty=!0}clone(){const e=new t;return e.batchMode=this.batchMode,e.instructions=this.instructions.slice(),e._activePath=this._activePath.clone(),e._transform=this._transform.clone(),e._fillStyle={...this._fillStyle},e._strokeStyle={...this._strokeStyle},e._stateStack=this._stateStack.slice(),e._bounds=this._bounds.clone(),e._boundsDirty=!0,e}get fillStyle(){return this._fillStyle}set fillStyle(e){this._fillStyle=(0,z.w)(e,t.defaultFillStyle)}get strokeStyle(){return this._strokeStyle}set strokeStyle(e){this._strokeStyle=(0,z.T)(e,t.defaultStrokeStyle)}setFillStyle(e){return this._fillStyle=(0,z.w)(e,t.defaultFillStyle),this}setStrokeStyle(e){return this._strokeStyle=(0,z.w)(e,t.defaultStrokeStyle),this}texture(t,e,i,r,s,o){return this.instructions.push({action:"texture",data:{image:t,dx:i||0,dy:r||0,dw:s||t.frame.width,dh:o||t.frame.height,transform:this._transform.clone(),alpha:this._fillStyle.alpha,style:e?n.Q.shared.setValue(e).toNumber():16777215}}),this.onUpdate(),this}beginPath(){return this._activePath=new O,this}fill(e,i){let r;const n=this.instructions[this.instructions.length-1];return r=0===this._tick&&n&&"stroke"===n.action?n.data.path:this._activePath.clone(),r?(null!=e&&(void 0!==i&&"number"==typeof e&&((0,l.t6)(l.lj,"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead"),e={color:e,alpha:i}),this._fillStyle=(0,z.w)(e,t.defaultFillStyle)),this.instructions.push({action:"fill",data:{style:this.fillStyle,path:r}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}_initNextPathLocation(){const{x:t,y:e}=this._activePath.getLastPoint(o.b.shared);this._activePath.clear(),this._activePath.moveTo(t,e)}stroke(e){let i;const r=this.instructions[this.instructions.length-1];return i=0===this._tick&&r&&"fill"===r.action?r.data.path:this._activePath.clone(),i?(null!=e&&(this._strokeStyle=(0,z.T)(e,t.defaultStrokeStyle)),this.instructions.push({action:"stroke",data:{style:this.strokeStyle,path:i}}),this.onUpdate(),this._initNextPathLocation(),this._tick=0,this):this}cut(){for(let t=0;t<2;t++){const e=this.instructions[this.instructions.length-1-t],i=this._activePath.clone();if(e&&("stroke"===e.action||"fill"===e.action)){if(!e.data.hole){e.data.hole=i;break}e.data.hole.addPath(i)}}return this._initNextPathLocation(),this}arc(t,e,i,r,n,s){this._tick++;const o=this._transform;return this._activePath.arc(o.a*t+o.c*e+o.tx,o.b*t+o.d*e+o.ty,i,r,n,s),this}arcTo(t,e,i,r,n){this._tick++;const s=this._transform;return this._activePath.arcTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty,s.a*i+s.c*r+s.tx,s.b*i+s.d*r+s.ty,n),this}arcToSvg(t,e,i,r,n,s,o){this._tick++;const a=this._transform;return this._activePath.arcToSvg(t,e,i,r,n,a.a*s+a.c*o+a.tx,a.b*s+a.d*o+a.ty),this}bezierCurveTo(t,e,i,r,n,s,o){this._tick++;const a=this._transform;return this._activePath.bezierCurveTo(a.a*t+a.c*e+a.tx,a.b*t+a.d*e+a.ty,a.a*i+a.c*r+a.tx,a.b*i+a.d*r+a.ty,a.a*n+a.c*s+a.tx,a.b*n+a.d*s+a.ty,o),this}closePath(){return this._tick++,this._activePath?.closePath(),this}ellipse(t,e,i,r){return this._tick++,this._activePath.ellipse(t,e,i,r,this._transform.clone()),this}circle(t,e,i){return this._tick++,this._activePath.circle(t,e,i,this._transform.clone()),this}path(t){return this._tick++,this._activePath.addPath(t,this._transform.clone()),this}lineTo(t,e){this._tick++;const i=this._transform;return this._activePath.lineTo(i.a*t+i.c*e+i.tx,i.b*t+i.d*e+i.ty),this}moveTo(t,e){this._tick++;const i=this._transform,r=this._activePath.instructions,n=i.a*t+i.c*e+i.tx,s=i.b*t+i.d*e+i.ty;return 1===r.length&&"moveTo"===r[0].action?(r[0].data[0]=n,r[0].data[1]=s,this):(this._activePath.moveTo(n,s),this)}quadraticCurveTo(t,e,i,r,n){this._tick++;const s=this._transform;return this._activePath.quadraticCurveTo(s.a*t+s.c*e+s.tx,s.b*t+s.d*e+s.ty,s.a*i+s.c*r+s.tx,s.b*i+s.d*r+s.ty,n),this}rect(t,e,i,r){return this._tick++,this._activePath.rect(t,e,i,r,this._transform.clone()),this}roundRect(t,e,i,r,n){return this._tick++,this._activePath.roundRect(t,e,i,r,n,this._transform.clone()),this}poly(t,e){return this._tick++,this._activePath.poly(t,e,this._transform.clone()),this}regularPoly(t,e,i,r,n=0,s){return this._tick++,this._activePath.regularPoly(t,e,i,r,n,s),this}roundPoly(t,e,i,r,n,s){return this._tick++,this._activePath.roundPoly(t,e,i,r,n,s),this}roundShape(t,e,i,r){return this._tick++,this._activePath.roundShape(t,e,i,r),this}filletRect(t,e,i,r,n){return this._tick++,this._activePath.filletRect(t,e,i,r,n),this}chamferRect(t,e,i,r,n,s){return this._tick++,this._activePath.chamferRect(t,e,i,r,n,s),this}star(t,e,i,r,n=0,s=0){return this._tick++,this._activePath.star(t,e,i,r,n,s,this._transform.clone()),this}svg(t){return this._tick++,D(t,this),this}restore(){const t=this._stateStack.pop();return t&&(this._transform=t.transform,this._fillStyle=t.fillStyle,this._strokeStyle=t.strokeStyle),this}save(){return this._stateStack.push({transform:this._transform.clone(),fillStyle:{...this._fillStyle},strokeStyle:{...this._strokeStyle}}),this}getTransform(){return this._transform}resetTransform(){return this._transform.identity(),this}rotate(t){return this._transform.rotate(t),this}scale(t,e=t){return this._transform.scale(t,e),this}setTransform(t,e,i,r,n,o){return t instanceof s.u?(this._transform.set(t.a,t.b,t.c,t.d,t.tx,t.ty),this):(this._transform.set(t,e,i,r,n,o),this)}transform(t,e,i,r,n,o){return t instanceof s.u?(this._transform.append(t),this):(j.set(t,e,i,r,n,o),this._transform.append(j),this)}translate(t,e=t){return this._transform.translate(t,e),this}clear(){return this._activePath.clear(),this.instructions.length=0,this.resetTransform(),this.onUpdate(),this}onUpdate(){this.dirty||(this.emit("update",this,16),this.dirty=!0,this._boundsDirty=!0)}get bounds(){if(!this._boundsDirty)return this._bounds;const t=this._bounds;t.clear();for(let e=0;e<this.instructions.length;e++){const i=this.instructions[e],r=i.action;if("fill"===r){const e=i.data;t.addBounds(e.path.bounds)}else if("texture"===r){const e=i.data;t.addFrame(e.dx,e.dy,e.dx+e.dw,e.dy+e.dh,e.transform)}if("stroke"===r){const e=i.data,r=e.style.alignment,n=e.style.width*(1-r),s=e.path.bounds;t.addFrame(s.minX-n,s.minY-n,s.maxX+n,s.maxY+n)}}return t}containsPoint(t){if(!this.bounds.containsPoint(t.x,t.y))return!1;const e=this.instructions;let i=!1;for(let r=0;r<e.length;r++){const n=e[r],s=n.data,o=s.path;if(!n.action||!o)continue;const a=s.style,h=o.shapePath.shapePrimitives;for(let e=0;e<h.length;e++){const r=h[e].shape;if(!a||!r)continue;const o=h[e].transform,l=o?o.applyInverse(t,G):t;if("fill"===n.action)i=r.contains(l.x,l.y);else{const t=a;i=r.strokeContains(l.x,l.y,t.width,t.alignment)}const u=s.hole;if(u){const t=u.shapePath?.shapePrimitives;if(t)for(let e=0;e<t.length;e++)t[e].shape.contains(l.x,l.y)&&(i=!1)}if(i)return!0}}return i}destroy(t=!1){if(this._stateStack.length=0,this._transform=null,this.emit("destroy",this),this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._fillStyle.texture&&this._fillStyle.texture.destroy(e),this._strokeStyle.texture&&this._strokeStyle.texture.destroy(e)}this._fillStyle=null,this._strokeStyle=null,this.instructions=null,this._activePath=null,this._bounds=null,this._stateStack=null,this.customShader=null,this._transform=null}};V.defaultFillStyle={color:16777215,alpha:1,texture:a.g.WHITE,matrix:null,fill:null},V.defaultStrokeStyle={width:1,color:16777215,alpha:1,alignment:.5,miterLimit:10,cap:"butt",join:"miter",texture:a.g.WHITE,matrix:null,fill:null,pixelLine:!1};let H=V},4841:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var r=i(2136),n="object"==typeof exports&&exports&&!exports.nodeType&&exports,s=n&&"object"==typeof module&&module&&!module.nodeType&&module,o=s&&s.exports===n&&r.A.process;const a=function(){try{return s&&s.require&&s.require("util").types||o&&o.binding&&o.binding("util")}catch(t){}}()},4847:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(6162),s=i(6729).ec,o=i(8170),a=i(4589);function h(t,e){if(t.cmpn(0)<=0)throw new Error("invalid sig");if(t.cmp(e)>=0)throw new Error("invalid sig")}t.exports=function(t,e,i,l,u){var c=o(i);if("ec"===c.type){if("ecdsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");return function(t,e,i){var r=a[i.data.algorithm.curve.join(".")];if(!r)throw new Error("unknown curve "+i.data.algorithm.curve.join("."));var n=new s(r),o=i.data.subjectPrivateKey.data;return n.verify(e,t,o)}(t,e,c)}if("dsa"===c.type){if("dsa"!==l)throw new Error("wrong public key type");return function(t,e,i){var r=i.data.p,s=i.data.q,a=i.data.g,l=i.data.pub_key,u=o.signature.decode(t,"der"),c=u.s,d=u.r;h(c,s),h(d,s);var f=n.mont(r),p=c.invm(s);return 0===a.toRed(f).redPow(new n(e).mul(p).mod(s)).fromRed().mul(l.toRed(f).redPow(d.mul(p).mod(s)).fromRed()).mod(r).mod(s).cmp(d)}(t,e,c)}if("rsa"!==l&&"ecdsa/rsa"!==l)throw new Error("wrong public key type");e=r.concat([u,e]);for(var d=c.modulus.byteLength(),f=[1],p=0;e.length+f.length+2<d;)f.push(255),p+=1;f.push(0);for(var m=-1;++m<e.length;)f.push(e[m]);f=r.from(f);var g=n.mont(c.modulus);t=(t=new n(t).toRed(g)).redPow(new n(c.publicExponent)),t=r.from(t.fromRed().toArray());var v=p<8?1:0;for(d=Math.min(t.length,f.length),t.length!==f.length&&(v=1),m=-1;++m<d;)v|=t[m]^f[m];return 0===v}},4884:(t,e,i)=>{"use strict";i.d(e,{q:()=>o});var r=i(1761),n=i(888),s=i(1285);class o extends s.v{constructor(t){t.resource||(t.resource=r.e.get().createCanvas()),t.width||(t.width=t.resource.width,t.autoDensity||(t.width/=t.resolution)),t.height||(t.height=t.resource.height,t.autoDensity||(t.height/=t.resolution)),super(t),this.uploadMethodId="image",this.autoDensity=t.autoDensity,this.resizeCanvas(),this.transparent=!!t.transparent}resizeCanvas(){this.autoDensity&&(this.resource.style.width=`${this.width}px`,this.resource.style.height=`${this.height}px`),this.resource.width===this.pixelWidth&&this.resource.height===this.pixelHeight||(this.resource.width=this.pixelWidth,this.resource.height=this.pixelHeight)}resize(t=this.width,e=this.height,i=this._resolution){const r=super.resize(t,e,i);return r&&this.resizeCanvas(),r}static test(t){return globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement||globalThis.OffscreenCanvas&&t instanceof OffscreenCanvas}get context2D(){return this._context2D||(this._context2D=this.resource.getContext("2d"))}}o.extension=n.Ag.TextureSource},4897:(t,e,i)=>{"use strict";i.d(e,{sP:()=>_t,mcf:()=>zt.mc,V23:()=>Li.V,bEs:()=>$.b,uqu:()=>wt.u,eaF:()=>Hr,bRX:()=>Mt.b,Mtr:()=>It.M,kxk:()=>Re.k,gPd:()=>c.g,JeP:()=>zr,v5d:()=>tt});var r=i(888);const n={extension:{type:r.Ag.Environment,name:"browser",priority:-1},test:()=>!0,load:async()=>{await Promise.all([i.e(647),i.e(852)]).then(i.bind(i,9852))}},s={extension:{type:r.Ag.Environment,name:"webworker",priority:0},test:()=>"undefined"!=typeof self&&void 0!==self.WorkerGlobalScope,load:async()=>{await Promise.all([i.e(647),i.e(162)]).then(i.bind(i,2162))}};i(8480),i(9010);var o=i(6970),a=i(2233),h=i(1761),l=i(2927),u=i(9252),c=i(4492),d=i(1849),f=i(1312);class p extends d.v{constructor(t,e){super();const{textures:i,data:r}=t;Object.keys(r.pages).forEach(t=>{const e=r.pages[parseInt(t,10)],n=i[e.id];this.pages.push({texture:n})}),Object.keys(r.chars).forEach(t=>{const e=r.chars[t],{frame:n,source:s}=i[e.page],o=new u.M(e.x+n.x,e.y+n.y,e.width,e.height),a=new c.g({source:s,frame:o});this.chars[t]={id:t.codePointAt(0),xOffset:e.xOffset,yOffset:e.yOffset,xAdvance:e.xAdvance,kerning:e.kerning??{},texture:a}}),this.baseRenderedFontSize=r.fontSize,this.baseMeasurementFontSize=r.fontSize,this.fontMetrics={ascent:0,descent:0,fontSize:r.fontSize},this.baseLineOffset=r.baseLineOffset,this.lineHeight=r.lineHeight,this.fontFamily=r.fontFamily,this.distanceField=r.distanceField??{type:"none",range:0},this.url=e}destroy(){super.destroy();for(let t=0;t<this.pages.length;t++){const{texture:e}=this.pages[t];e.destroy(!0)}this.pages=null}static install(t){f.c.install(t)}static uninstall(t){f.c.uninstall(t)}}const m={test:t=>"string"==typeof t&&t.startsWith("info face="),parse(t){const e=t.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const t in e){const r=e[t].match(/^[a-z]+/gm)[0],n=e[t].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),s={};for(const t in n){const e=n[t].split("="),i=e[0],r=e[1].replace(/"/gm,""),o=parseFloat(r),a=isNaN(o)?r:o;s[i]=a}i[r].push(s)}const r={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},[n]=i.info,[s]=i.common,[o]=i.distanceField??[];o&&(r.distanceField={range:parseInt(o.distanceRange,10),type:o.fieldType}),r.fontSize=parseInt(n.size,10),r.fontFamily=n.face,r.lineHeight=parseInt(s.lineHeight,10);const a=i.page;for(let t=0;t<a.length;t++)r.pages.push({id:parseInt(a[t].id,10)||0,file:a[t].file});const h={};r.baseLineOffset=r.lineHeight-parseInt(s.base,10);const l=i.char;for(let t=0;t<l.length;t++){const e=l[t],i=parseInt(e.id,10);let n=e.letter??e.char??String.fromCharCode(i);"space"===n&&(n=" "),h[i]=n,r.chars[n]={id:i,page:parseInt(e.page,10)||0,x:parseInt(e.x,10),y:parseInt(e.y,10),width:parseInt(e.width,10),height:parseInt(e.height,10),xOffset:parseInt(e.xoffset,10),yOffset:parseInt(e.yoffset,10),xAdvance:parseInt(e.xadvance,10),kerning:{}}}const u=i.kerning||[];for(let t=0;t<u.length;t++){const e=parseInt(u[t].first,10),i=parseInt(u[t].second,10),n=parseInt(u[t].amount,10);r.chars[h[i]].kerning[h[e]]=n}return r}},g={test(t){const e=t;return"string"!=typeof e&&"getElementsByTagName"in e&&e.getElementsByTagName("page").length&&null!==e.getElementsByTagName("info")[0].getAttribute("face")},parse(t){const e={chars:{},pages:[],lineHeight:0,fontSize:0,fontFamily:"",distanceField:null,baseLineOffset:0},i=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],n=t.getElementsByTagName("distanceField")[0];n&&(e.distanceField={type:n.getAttribute("fieldType"),range:parseInt(n.getAttribute("distanceRange"),10)});const s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning");e.fontSize=parseInt(i.getAttribute("size"),10),e.fontFamily=i.getAttribute("face"),e.lineHeight=parseInt(r.getAttribute("lineHeight"),10);for(let t=0;t<s.length;t++)e.pages.push({id:parseInt(s[t].getAttribute("id"),10)||0,file:s[t].getAttribute("file")});const h={};e.baseLineOffset=e.lineHeight-parseInt(r.getAttribute("base"),10);for(let t=0;t<o.length;t++){const i=o[t],r=parseInt(i.getAttribute("id"),10);let n=i.getAttribute("letter")??i.getAttribute("char")??String.fromCharCode(r);"space"===n&&(n=" "),h[r]=n,e.chars[n]={id:r,page:parseInt(i.getAttribute("page"),10)||0,x:parseInt(i.getAttribute("x"),10),y:parseInt(i.getAttribute("y"),10),width:parseInt(i.getAttribute("width"),10),height:parseInt(i.getAttribute("height"),10),xOffset:parseInt(i.getAttribute("xoffset"),10),yOffset:parseInt(i.getAttribute("yoffset"),10),xAdvance:parseInt(i.getAttribute("xadvance"),10),kerning:{}}}for(let t=0;t<a.length;t++){const i=parseInt(a[t].getAttribute("first"),10),r=parseInt(a[t].getAttribute("second"),10),n=parseInt(a[t].getAttribute("amount"),10);e.chars[h[r]].kerning[h[i]]=n}return e}},v=t=>!("string"!=typeof t||!t.includes("<font>"))&&g.test(h.e.get().parseXML(t)),y=t=>g.parse(h.e.get().parseXML(t)),b=[".xml",".fnt"],_={extension:{type:r.Ag.CacheParser,name:"cacheBitmapFont"},test:t=>t instanceof p,getCacheableAssets(t,e){const i={};return t.forEach(t=>{i[t]=e,i[`${t}-bitmap`]=e}),i[`${e.fontFamily}-bitmap`]=e,i}},x={extension:{type:r.Ag.LoadParser,priority:o.T.Normal},name:"loadBitmapFont",test:t=>b.includes(l.A.extname(t).toLowerCase()),testParse:async t=>m.test(t)||v(t),async parse(t,e,i){const r=m.test(t)?m.parse(t):y(t),{src:n}=e,{pages:s}=r,o=[],h=r.distanceField?{scaleMode:"linear",alphaMode:"premultiply-alpha-on-upload",autoGenerateMipmaps:!1,resolution:1}:{};for(let t=0;t<s.length;++t){const e=s[t].file;let i=l.A.join(l.A.dirname(n),e);i=(0,a.Y)(i,n),o.push({src:i,data:h})}const u=await i.load(o),c=o.map(t=>u[t.src]);return new p({data:r,textures:c},n)},async load(t,e){const i=await h.e.get().fetch(t);return await i.text()},async unload(t,e,i){await Promise.all(t.pages.map(t=>i.unload(t.texture.source._sourceOrigin))),t.destroy()}};var w=i(268),M=i(6763);class S{constructor(t,e=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=e}add(t){t.forEach(t=>{this._assetList.push(t)}),this.verbose&&M.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],e=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<e;i++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}var A=i(1979);const E={extension:{type:r.Ag.CacheParser,name:"cacheTextureArray"},test:t=>Array.isArray(t)&&t.every(t=>t instanceof c.g),getCacheableAssets:(t,e)=>{const i={};return t.forEach(t=>{e.forEach((e,r)=>{i[t+(0===r?"":r+1)]=e})}),i}};async function T(t){if("Image"in globalThis)return new Promise(e=>{const i=new Image;i.onload=()=>{e(!0)},i.onerror=()=>{e(!1)},i.src=t});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const e=await(await fetch(t)).blob();await createImageBitmap(e)}catch(t){return!1}return!0}return!1}const R={extension:{type:r.Ag.DetectionParser,priority:1},test:async()=>T("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async t=>[...t,"avif"],remove:async t=>t.filter(t=>"avif"!==t)},P=["png","jpg","jpeg"],C={extension:{type:r.Ag.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...P],remove:async t=>t.filter(t=>!P.includes(t))},I="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function k(t){return!I&&""!==document.createElement("video").canPlayType(t)}const B={extension:{type:r.Ag.DetectionParser,priority:0},test:async()=>k("video/mp4"),add:async t=>[...t,"mp4","m4v"],remove:async t=>t.filter(t=>"mp4"!==t&&"m4v"!==t)},O={extension:{type:r.Ag.DetectionParser,priority:0},test:async()=>k("video/ogg"),add:async t=>[...t,"ogv"],remove:async t=>t.filter(t=>"ogv"!==t)},L={extension:{type:r.Ag.DetectionParser,priority:0},test:async()=>k("video/webm"),add:async t=>[...t,"webm"],remove:async t=>t.filter(t=>"webm"!==t)},U={extension:{type:r.Ag.DetectionParser,priority:0},test:async()=>T("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async t=>[...t,"webp"],remove:async t=>t.filter(t=>"webp"!==t)};var D=i(2406),N=i(2217);class F{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(t,e,i)=>(this._parsersValidated=!1,t[e]=i,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(t,e){const i={promise:null,parser:null};return i.promise=(async()=>{let r=null,n=null;if(e.loadParser&&(n=this._parserHash[e.loadParser],n||(0,w.R)(`[Assets] specified load parser "${e.loadParser}" not found while loading ${t}`)),!n){for(let i=0;i<this.parsers.length;i++){const r=this.parsers[i];if(r.load&&r.test?.(t,e,this)){n=r;break}}if(!n)return(0,w.R)(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}r=await n.load(t,e,this),i.parser=n;for(let t=0;t<this.parsers.length;t++){const n=this.parsers[t];n.parse&&n.parse&&await(n.testParse?.(r,e,this))&&(r=await n.parse(r,e,this)||r,i.parser=n)}return r})(),i}async load(t,e){this._parsersValidated||this._validateParsers();let i=0;const r={},n=(0,N.a)(t),s=(0,D.z)(t,t=>({alias:[t],src:t,data:{}})),o=s.length,a=s.map(async t=>{const n=l.A.toAbsolute(t.src);if(!r[t.src])try{this.promiseCache[n]||(this.promiseCache[n]=this._getLoadPromiseAndParser(n,t)),r[t.src]=await this.promiseCache[n].promise,e&&e(++i/o)}catch(e){throw delete this.promiseCache[n],delete r[t.src],new Error(`[Loader.load] Failed to load ${n}.\n${e}`)}});return await Promise.all(a),n?r[s[0].src]:r}async unload(t){const e=(0,D.z)(t,t=>({alias:[t],src:t})).map(async t=>{const e=l.A.toAbsolute(t.src),i=this.promiseCache[e];if(i){const r=await i.promise;delete this.promiseCache[e],await(i.parser?.unload?.(r,t,this))}});await Promise.all(e)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(t=>t.name).reduce((t,e)=>(e.name?t[e.name]&&(0,w.R)(`[Assets] loadParser name conflict "${e.name}"`):(0,w.R)("[Assets] loadParser should have a name"),{...t,[e.name]:e}),{})}}function z(t,e){if(Array.isArray(e)){for(const i of e)if(t.startsWith(`data:${i}`))return!0;return!1}return t.startsWith(`data:${e}`)}function G(t,e){const i=t.split("?")[0],r=l.A.extname(i).toLowerCase();return Array.isArray(e)?e.includes(r):r===e}const j={extension:{type:r.Ag.LoadParser,priority:o.T.Low},name:"loadJson",test:t=>z(t,"application/json")||G(t,".json"),async load(t){const e=await h.e.get().fetch(t);return await e.json()}},V={name:"loadTxt",extension:{type:r.Ag.LoadParser,priority:o.T.Low,name:"loadTxt"},test:t=>z(t,"text/plain")||G(t,".txt"),async load(t){const e=await h.e.get().fetch(t);return await e.text()}},H=["normal","bold","100","200","300","400","500","600","700","800","900"],W=[".ttf",".otf",".woff",".woff2"],X=["font/ttf","font/otf","font/woff","font/woff2"],q=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i,Y=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function Z(t){return Y.test(t)?t:encodeURI(t)}const K={extension:{type:r.Ag.LoadParser,priority:o.T.Low},name:"loadWebFont",test:t=>z(t,X)||G(t,W),async load(t,e){const i=h.e.get().getFontFaceSet();if(i){const r=[],n=e.data?.family??function(t){const e=l.A.extname(t),i=l.A.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(t=>t.charAt(0).toUpperCase()+t.slice(1));let r=i.length>0;for(const t of i)if(!t.match(q)){r=!1;break}let n=i.join(" ");return r||(n=`"${n.replace(/[\\"]/g,"\\$&")}"`),n}(t),s=e.data?.weights?.filter(t=>H.includes(t))??["normal"],o=e.data??{};for(let e=0;e<s.length;e++){const a=s[e],h=new FontFace(n,`url(${Z(t)})`,{...o,weight:a});await h.load(),i.add(h),r.push(h)}return A.l.set(`${n}-and-url`,{url:t,fontFaces:r}),1===r.length?r[0]:r}return(0,w.R)("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(t=>{A.l.remove(`${t.family}-and-url`),h.e.get().getFontFaceSet().delete(t)})}};var $=i(8293),Q=i(4835),J=i(1173);function tt(t,e=1){const i=J.x.RETINA_PREFIX?.exec(t);return i?parseFloat(i[1]):e}function et(t,e,i){t.label=i,t._sourceOrigin=i;const r=new c.g({source:t,label:i}),n=()=>{delete e.promiseCache[i],A.l.has(i)&&A.l.remove(i)};return r.source.once("destroy",()=>{e.promiseCache[i]&&((0,w.R)("[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource."),n())}),r.once("destroy",()=>{t.destroyed||((0,w.R)("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),n())}),r}const it={extension:{type:r.Ag.LoadParser,priority:o.T.Low,name:"loadSVG"},name:"loadSVG",config:{crossOrigin:"anonymous",parseAsGraphicsContext:!1},test:t=>z(t,"image/svg+xml")||G(t,".svg"),async load(t,e,i){return e.data?.parseAsGraphicsContext??this.config.parseAsGraphicsContext?async function(t){const e=await h.e.get().fetch(t),i=await e.text(),r=new Q.T;return r.svg(i),r}(t):async function(t,e,i,r){const n=await h.e.get().fetch(t),s=await n.blob(),o=URL.createObjectURL(s),a=new Image;a.src=o,a.crossOrigin=r,await a.decode(),URL.revokeObjectURL(o);const l=document.createElement("canvas"),u=l.getContext("2d"),c=e.data?.resolution||tt(t),d=e.data?.width??a.width,f=e.data?.height??a.height;l.width=d*c,l.height=f*c,u.drawImage(a,0,0,d*c,f*c);const{parseAsGraphicsContext:p,...m}=e.data??{};return et(new $.b({resource:l,alphaMode:"premultiply-alpha-on-upload",resolution:c,...m}),i,t)}(t,e,i,this.config.crossOrigin)},unload(t){t.destroy(!0)}};let rt=null;class nt{constructor(){rt||(rt=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    const WHITE_PNG = "data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=";\n    async function checkImageBitmap() {\n      try {\n        if (typeof createImageBitmap !== "function")\n          return false;\n        const response = await fetch(WHITE_PNG);\n        const imageBlob = await response.blob();\n        const imageBitmap = await createImageBitmap(imageBlob);\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\n      } catch (_e) {\n        return false;\n      }\n    }\n    void checkImageBitmap().then((result) => {\n      self.postMessage(result);\n    });\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(rt)}}nt.revokeObjectURL=function(){rt&&(URL.revokeObjectURL(rt),rt=null)};let st=null;class ot{constructor(){st||(st=URL.createObjectURL(new Blob(['(function () {\n    \'use strict\';\n\n    async function loadImageBitmap(url, alphaMode) {\n      const response = await fetch(url);\n      if (!response.ok) {\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n      }\n      const imageBlob = await response.blob();\n      return alphaMode === "premultiplied-alpha" ? createImageBitmap(imageBlob, { premultiplyAlpha: "none" }) : createImageBitmap(imageBlob);\n    }\n    self.onmessage = async (event) => {\n      try {\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\n        self.postMessage({\n          data: imageBitmap,\n          uuid: event.data.uuid,\n          id: event.data.id\n        }, [imageBitmap]);\n      } catch (e) {\n        self.postMessage({\n          error: e,\n          uuid: event.data.uuid,\n          id: event.data.id\n        });\n      }\n    };\n\n})();\n'],{type:"application/javascript"}))),this.worker=new Worker(st)}}ot.revokeObjectURL=function(){st&&(URL.revokeObjectURL(st),st=null)};let at,ht=0;const lt=new class{constructor(){this._initialized=!1,this._createdWorkers=0,this._workerPool=[],this._queue=[],this._resolveHash={}}isImageBitmapSupported(){return void 0!==this._isImageBitmapSupported||(this._isImageBitmapSupported=new Promise(t=>{const{worker:e}=new nt;e.addEventListener("message",i=>{e.terminate(),nt.revokeObjectURL(),t(i.data)})})),this._isImageBitmapSupported}loadImageBitmap(t,e){return this._run("loadImageBitmap",[t,e?.data?.alphaMode])}async _initWorkers(){this._initialized||(this._initialized=!0)}_getWorker(){void 0===at&&(at=navigator.hardwareConcurrency||4);let t=this._workerPool.pop();return!t&&this._createdWorkers<at&&(this._createdWorkers++,t=(new ot).worker,t.addEventListener("message",t=>{this._complete(t.data),this._returnWorker(t.target),this._next()})),t}_returnWorker(t){this._workerPool.push(t)}_complete(t){void 0!==t.error?this._resolveHash[t.uuid].reject(t.error):this._resolveHash[t.uuid].resolve(t.data),this._resolveHash[t.uuid]=null}async _run(t,e){await this._initWorkers();const i=new Promise((i,r)=>{this._queue.push({id:t,arguments:e,resolve:i,reject:r})});return this._next(),i}_next(){if(!this._queue.length)return;const t=this._getWorker();if(!t)return;const e=this._queue.pop(),i=e.id;this._resolveHash[ht]={resolve:e.resolve,reject:e.reject},t.postMessage({data:e.arguments,uuid:ht++,id:i})}},ut=[".jpeg",".jpg",".png",".webp",".avif"],ct=["image/jpeg","image/png","image/webp","image/avif"],dt={name:"loadTextures",extension:{type:r.Ag.LoadParser,priority:o.T.High,name:"loadTextures"},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test:t=>z(t,ct)||G(t,ut),async load(t,e,i){let r=null;return r=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap?this.config.preferWorkers&&await lt.isImageBitmapSupported()?await lt.loadImageBitmap(t,e):await async function(t,e){const i=await h.e.get().fetch(t);if(!i.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${i.status} ${i.statusText}`);const r=await i.blob();return"premultiplied-alpha"===e?.data?.alphaMode?createImageBitmap(r,{premultiplyAlpha:"none"}):createImageBitmap(r)}(t,e):await new Promise((e,i)=>{r=new Image,r.crossOrigin=this.config.crossOrigin,r.src=t,r.complete?e(r):(r.onload=()=>{e(r)},r.onerror=i)}),et(new $.b({resource:r,alphaMode:"premultiply-alpha-on-upload",resolution:e.data?.resolution||tt(t),...e.data}),i,t)},unload(t){t.destroy(!0)}};var ft=i(6139),pt=i(6858);const mt=[".mp4",".m4v",".webm",".ogg",".ogv",".h264",".avi",".mov"],gt=mt.map(t=>`video/${t.substring(1)}`);const vt={name:"loadVideo",extension:{type:r.Ag.LoadParser,name:"loadVideo"},test(t){const e=z(t,gt),i=G(t,mt);return e||i},async load(t,e,i){const r={...ft.$.defaultOptions,resolution:e.data?.resolution||tt(t),alphaMode:e.data?.alphaMode||await(0,pt.C)(),...e.data},n=document.createElement("video"),s={preload:!1!==r.autoLoad?"auto":void 0,"webkit-playsinline":!1!==r.playsinline?"":void 0,playsinline:!1!==r.playsinline?"":void 0,muted:!0===r.muted?"":void 0,loop:!0===r.loop?"":void 0,autoplay:!1!==r.autoPlay?"":void 0};Object.keys(s).forEach(t=>{const e=s[t];void 0!==e&&n.setAttribute(t,e)}),!0===r.muted&&(n.muted=!0),function(t,e,i){void 0!==i||e.startsWith("data:")?!1!==i&&(t.crossOrigin="string"==typeof i?i:"anonymous"):t.crossOrigin=function(t,e=globalThis.location){if(t.startsWith("data:"))return"";e||(e=globalThis.location);const i=new URL(t,document.baseURI);return i.hostname!==e.hostname||i.port!==e.port||i.protocol!==e.protocol?"anonymous":""}(e)}(n,t,r.crossorigin);const o=document.createElement("source");let a;if(t.startsWith("data:"))a=t.slice(5,t.indexOf(";"));else if(!t.startsWith("blob:")){const e=t.split("?")[0].slice(t.lastIndexOf(".")+1).toLowerCase();a=ft.$.MIME_TYPES[e]||`video/${e}`}return o.src=t,a&&(o.type=a),new Promise(s=>{const a=async()=>{const o=new ft.$({...r,resource:n});var h;n.removeEventListener("canplay",a),e.data.preload&&await(h=n,new Promise((t,e)=>{function i(){n(),t()}function r(t){n(),e(t)}function n(){h.removeEventListener("canplaythrough",i),h.removeEventListener("error",r)}h.addEventListener("canplaythrough",i),h.addEventListener("error",r),h.load()})),s(et(o,i,t))};n.addEventListener("canplay",a),n.appendChild(o)})},unload(t){t.destroy(!0)}},yt={extension:{type:r.Ag.ResolveParser,name:"resolveTexture"},test:dt.test,parse:t=>({resolution:parseFloat(J.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:t.split(".").pop(),src:t})},bt={extension:{type:r.Ag.ResolveParser,priority:-2,name:"resolveJson"},test:t=>J.x.RETINA_PREFIX.test(t)&&t.endsWith(".json"),parse:yt.parse},_t=new class{constructor(){this._detections=[],this._initialized=!1,this.resolver=new J.x,this.loader=new F,this.cache=A.l,this._backgroundLoader=new S(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){if(this._initialized)return void(0,w.R)("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let e=t.manifest;"string"==typeof e&&(e=await this.load(e)),this.resolver.addManifest(e)}const e=t.texturePreference?.resolution??1,i="number"==typeof e?[e]:e,r=await this._detectFormats({preferredFormats:t.texturePreference?.format,skipDetections:t.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:r,resolution:i}}),t.preferences&&this.setPreferences(t.preferences)}add(t){this.resolver.add(t)}async load(t,e){this._initialized||await this.init();const i=(0,N.a)(t),r=(0,D.z)(t).map(t=>{if("string"!=typeof t){const e=this.resolver.getAlias(t);return e.some(t=>!this.resolver.hasKey(t))&&this.add(t),Array.isArray(e)?e[0]:e}return this.resolver.hasKey(t)||this.add({alias:t,src:t}),t}),n=this.resolver.resolve(r),s=await this._mapLoadToResolve(n,e);return i?s[r[0]]:s}addBundle(t,e){this.resolver.addBundle(t,e)}async loadBundle(t,e){this._initialized||await this.init();let i=!1;"string"==typeof t&&(i=!0,t=[t]);const r=this.resolver.resolveBundle(t),n={},s=Object.keys(r);let o=0,a=0;const h=()=>{e?.(++o/a)},l=s.map(t=>{const e=r[t];return a+=Object.keys(e).length,this._mapLoadToResolve(e,h).then(e=>{n[t]=e})});return await Promise.all(l),i?n[t[0]]:n}async backgroundLoad(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(e))}async backgroundLoadBundle(t){this._initialized||await this.init(),"string"==typeof t&&(t=[t]);const e=this.resolver.resolveBundle(t);Object.values(e).forEach(t=>{this._backgroundLoader.add(Object.values(t))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if("string"==typeof t)return A.l.get(t);const e={};for(let i=0;i<t.length;i++)e[i]=A.l.get(t[i]);return e}async _mapLoadToResolve(t,e){const i=[...new Set(Object.values(t))];this._backgroundLoader.active=!1;const r=await this.loader.load(i,e);this._backgroundLoader.active=!0;const n={};return i.forEach(t=>{const e=r[t.src],i=[t.src];t.alias&&i.push(...t.alias),i.forEach(t=>{n[t]=e}),A.l.set(i,e)}),n}async unload(t){this._initialized||await this.init();const e=(0,D.z)(t).map(t=>"string"!=typeof t?t.src:t),i=this.resolver.resolve(e);await this._unloadFromResolved(i)}async unloadBundle(t){this._initialized||await this.init(),t=(0,D.z)(t);const e=this.resolver.resolveBundle(t),i=Object.keys(e).map(t=>this._unloadFromResolved(e[t]));await Promise.all(i)}async _unloadFromResolved(t){const e=Object.values(t);e.forEach(t=>{A.l.remove(t.src)}),await this.loader.unload(e)}async _detectFormats(t){let e=[];t.preferredFormats&&(e=Array.isArray(t.preferredFormats)?t.preferredFormats:[t.preferredFormats]);for(const i of t.detections)t.skipDetections||await i.test()?e=await i.add(e):t.skipDetections||(e=await i.remove(e));return e=e.filter((t,i)=>e.indexOf(t)===i),e}get detections(){return this._detections}setPreferences(t){this.loader.parsers.forEach(e=>{e.config&&Object.keys(e.config).filter(e=>e in t).forEach(i=>{e.config[i]=t[i]})})}};r.XO.handleByList(r.Ag.LoadParser,_t.loader.parsers).handleByList(r.Ag.ResolveParser,_t.resolver.parsers).handleByList(r.Ag.CacheParser,_t.cache.parsers).handleByList(r.Ag.DetectionParser,_t.detections),r.XO.add(E,C,R,U,B,O,L,j,V,K,it,dt,vt,x,_,yt,bt);const xt={loader:r.Ag.LoadParser,resolver:r.Ag.ResolveParser,cache:r.Ag.CacheParser,detection:r.Ag.DetectionParser};r.XO.handle(r.Ag.Asset,t=>{const e=t.ref;Object.entries(xt).filter(([t])=>!!e[t]).forEach(([t,i])=>r.XO.add(Object.assign(e[t],{extension:e[t].extension??i})))},t=>{const e=t.ref;Object.keys(xt).filter(t=>!!e[t]).forEach(t=>r.XO.remove(e[t]))});var wt=i(9313),Mt=i(5101),St=i(6563),At=i(5611),Et=i(6840),Tt=i(4e3),Rt=i(2067),Pt=i(6665),Ct=i(6040),It=i(8475),kt=i(5811);class Bt{init(){const t=new kt.k({uColor:{value:new Float32Array([1,1,1,1]),type:"vec4<f32>"},uTransformMatrix:{value:new wt.u,type:"mat3x3<f32>"},uRound:{value:0,type:"f32"}}),e=(0,St.a)(),i=(0,At.I)({name:"graphics",bits:[Et.a,(0,Tt.P)(e),Rt.mA,Pt.m]});this.shader=new It.M({glProgram:i,resources:{localUniforms:t,batchSamplers:(0,Ct.n)(e)}})}execute(t,e){const i=e.context,r=i.customShader||this.shader,n=t.renderer,s=n.graphicsContext,{batcher:o,instructions:a}=s.getContextRenderData(i);r.groups[0]=n.globalUniforms.bindGroup,n.state.set(t.state),n.shader.bind(r),n.geometry.bind(o.geometry,r.glProgram);const h=a.instructions;for(let t=0;t<a.instructionSize;t++){const e=h[t];if(e.size){for(let t=0;t<e.textures.count;t++)n.texture.bind(e.textures.textures[t],t);n.geometry.draw(e.topology,e.size,e.start)}}}destroy(){this.shader.destroy(!0),this.shader=null}}Bt.extension={type:[r.Ag.WebGLPipesAdaptor],name:"graphics"};const Ot={name:"texture-bit",vertex:{header:"\n            uniform mat3 uTextureMatrix;\n        ",main:"\n            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;\n        "},fragment:{header:"\n        uniform sampler2D uTexture;\n\n         \n        ",main:"\n            outColor = texture(uTexture, vUV);\n        "}};class Lt{init(){const t=(0,At.I)({name:"mesh",bits:[Rt.mA,Ot,Pt.m]});this._shader=new It.M({glProgram:t,resources:{uTexture:c.g.EMPTY.source,textureUniforms:{uTextureMatrix:{type:"mat3x3<f32>",value:new wt.u}}}})}execute(t,e){const i=t.renderer;let r=e._shader;if(r){if(!r.glProgram)return void(0,w.R)("Mesh shader has no glProgram",e.shader)}else{r=this._shader;const t=e.texture,i=t.source;r.resources.uTexture=i,r.resources.uSampler=i.style,r.resources.textureUniforms.uniforms.uTextureMatrix=t.textureMatrix.mapCoord}r.groups[100]=i.globalUniforms.bindGroup,r.groups[101]=t.localUniformsBindGroup,i.encoder.draw({geometry:e._geometry,shader:r,state:e.state})}destroy(){this._shader.destroy(!0),this._shader=null}}Lt.extension={type:[r.Ag.WebGLPipesAdaptor],name:"mesh"};var Ut=i(7547);class Dt{constructor(){this._tempState=Ut.U.for2d(),this._didUploadHash={}}init(t){t.renderer.runners.contextChange.add(this)}contextChange(){this._didUploadHash={}}start(t,e,i){const r=t.renderer,n=this._didUploadHash[i.uid];r.shader.bind(i,n),n||(this._didUploadHash[i.uid]=!0),r.shader.updateUniformGroup(r.globalUniforms.uniformGroup),r.geometry.bind(e,i.glProgram)}execute(t,e){const i=t.renderer;this._tempState.blendMode=e.blendMode,i.state.set(this._tempState);const r=e.textures.textures;for(let t=0;t<e.textures.count;t++)i.texture.bind(r[t],t);i.geometry.draw(e.topology,e.size,e.start)}}Dt.extension={type:[r.Ag.WebGLPipesAdaptor],name:"batch"};var Nt=i(2577);const Ft=[];r.XO.handleByNamedList(r.Ag.Environment,Ft);var zt=i(5815);let Gt;function jt(){if("boolean"==typeof Gt)return Gt;try{const t=new Function("param1","param2","param3","return param1[param2] === param3;");Gt=!0===t({a:"b"},"a","b")}catch(t){Gt=!1}return Gt}var Vt=i(4670),Ht=(t=>(t[t.NONE=0]="NONE",t[t.COLOR=16384]="COLOR",t[t.STENCIL=1024]="STENCIL",t[t.DEPTH=256]="DEPTH",t[t.COLOR_DEPTH=16640]="COLOR_DEPTH",t[t.COLOR_STENCIL=17408]="COLOR_STENCIL",t[t.DEPTH_STENCIL=1280]="DEPTH_STENCIL",t[t.ALL=17664]="ALL",t))(Ht||{});class Wt{constructor(t){this.items=[],this._name=t}emit(t,e,i,r,n,s,o,a){const{name:h,items:l}=this;for(let u=0,c=l.length;u<c;u++)l[u][h](t,e,i,r,n,s,o,a);return this}add(t){return t[this._name]&&(this.remove(t),this.items.push(t)),this}remove(t){const e=this.items.indexOf(t);return-1!==e&&this.items.splice(e,1),this}contains(t){return-1!==this.items.indexOf(t)}removeAll(){return this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return 0===this.items.length}get name(){return this._name}}var Xt=i(4486);const qt=["init","destroy","contextChange","resolutionChange","resetState","renderEnd","renderStart","render","update","postrender","prerender"],Yt=class t extends Xt.A{constructor(t){super(),this.runners=Object.create(null),this.renderPipes=Object.create(null),this._initOptions={},this._systemsHash=Object.create(null),this.type=t.type,this.name=t.name,this.config=t;const e=[...qt,...this.config.runners??[]];this._addRunners(...e),this._unsafeEvalCheck()}async init(e={}){const i=!0===e.skipExtensionImports||!1===e.manageImports;await async function(t){if(!t)for(let t=0;t<Ft.length;t++){const e=Ft[t];if(e.value.test())return void await e.value.load()}}(i),this._addSystems(this.config.systems),this._addPipes(this.config.renderPipes,this.config.renderPipeAdaptors);for(const t in this._systemsHash)e={...this._systemsHash[t].constructor.defaultOptions,...e};e={...t.defaultOptions,...e},this._roundPixels=e.roundPixels?1:0;for(let t=0;t<this.runners.init.items.length;t++)await this.runners.init.items[t].init(e);this._initOptions=e}render(t,e){let i=t;if(i instanceof zt.mc&&(i={container:i},e&&((0,Vt.t6)(Vt.lj,"passing a second argument is deprecated, please use render options instead"),i.target=e.renderTexture)),i.target||(i.target=this.view.renderTarget),i.target===this.view.renderTarget&&(this._lastObjectRendered=i.container,i.clearColor??(i.clearColor=this.background.colorRgba),i.clear??(i.clear=this.background.clearBeforeRender)),i.clearColor){const t=Array.isArray(i.clearColor)&&4===i.clearColor.length;i.clearColor=t?i.clearColor:Nt.Q.shared.setValue(i.clearColor).toArray()}i.transform||(i.container.updateLocalTransform(),i.transform=i.container.localTransform),i.container.enableRenderGroup(),this.runners.prerender.emit(i),this.runners.renderStart.emit(i),this.runners.render.emit(i),this.runners.renderEnd.emit(i),this.runners.postrender.emit(i)}resize(t,e,i){const r=this.view.resolution;this.view.resize(t,e,i),this.emit("resize",this.view.screen.width,this.view.screen.height,this.view.resolution),void 0!==i&&i!==r&&this.runners.resolutionChange.emit(i)}clear(t={}){t.target||(t.target=this.renderTarget.renderTarget),t.clearColor||(t.clearColor=this.background.colorRgba),t.clear??(t.clear=Ht.ALL);const{clear:e,clearColor:i,target:r}=t;Nt.Q.shared.setValue(i??this.background.colorRgba),this.renderTarget.clear(r,e,Nt.Q.shared.toArray())}get resolution(){return this.view.resolution}set resolution(t){this.view.resolution=t,this.runners.resolutionChange.emit(t)}get width(){return this.view.texture.frame.width}get height(){return this.view.texture.frame.height}get canvas(){return this.view.canvas}get lastObjectRendered(){return this._lastObjectRendered}get renderingToScreen(){return this.renderTarget.renderingToScreen}get screen(){return this.view.screen}_addRunners(...t){t.forEach(t=>{this.runners[t]=new Wt(t)})}_addSystems(t){let e;for(e in t){const i=t[e];this._addSystem(i.value,i.name)}}_addSystem(t,e){const i=new t(this);if(this[e])throw new Error(`Whoops! The name "${e}" is already in use`);this[e]=i,this._systemsHash[e]=i;for(const t in this.runners)this.runners[t].add(i);return this}_addPipes(t,e){const i=e.reduce((t,e)=>(t[e.name]=e.value,t),{});t.forEach(t=>{const e=t.value,r=t.name,n=i[r];this.renderPipes[r]=new e(this,n?new n:null)})}destroy(t=!1){this.runners.destroy.items.reverse(),this.runners.destroy.emit(t),Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash=null,this.renderPipes=null}generateTexture(t){return this.textureGenerator.generateTexture(t)}get roundPixels(){return!!this._roundPixels}_unsafeEvalCheck(){if(!jt())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}resetState(){this.runners.resetState.emit()}};Yt.defaultOptions={resolution:1,failIfMajorPerformanceCaveat:!1,roundPixels:!1};let Zt=Yt;class Kt{constructor(t){this._renderer=t}updateRenderable(){}destroyRenderable(){}validateRenderable(){return!1}addRenderable(t,e){this._renderer.renderPipes.batch.break(e),e.add(t)}execute(t){t.isRenderable&&t.render(this._renderer)}destroy(){this._renderer=null}}Kt.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"customRender"};var $t=i(8218),Qt=i(8422);function Jt(t,e){const i=t.instructionSet,r=i.instructions;for(let t=0;t<i.instructionSize;t++){const i=r[t];e[i.renderPipeId].execute(i)}}const te=new wt.u;class ee{constructor(t){this._renderer=t}addRenderGroup(t,e){t.isCachedAsTexture?this._addRenderableCacheAsTexture(t,e):this._addRenderableDirect(t,e)}execute(t){t.isRenderable&&(t.isCachedAsTexture?this._executeCacheAsTexture(t):this._executeDirect(t))}destroy(){this._renderer=null}_addRenderableDirect(t,e){this._renderer.renderPipes.batch.break(e),t._batchableRenderGroup&&($t.Z.return(t._batchableRenderGroup),t._batchableRenderGroup=null),e.add(t)}_addRenderableCacheAsTexture(t,e){const i=t._batchableRenderGroup??(t._batchableRenderGroup=$t.Z.get(Qt.K));i.renderable=t.root,i.transform=t.root.relativeGroupTransform,i.texture=t.texture,i.bounds=t._textureBounds,e.add(t),this._renderer.renderPipes.batch.addToBatch(i,e)}_executeCacheAsTexture(t){if(t.textureNeedsUpdate){t.textureNeedsUpdate=!1;const e=te.identity().translate(-t._textureBounds.x,-t._textureBounds.y);this._renderer.renderTarget.push(t.texture,!0,null,t.texture.frame),this._renderer.globalUniforms.push({worldTransformMatrix:e,worldColor:4294967295}),Jt(t,this._renderer.renderPipes),this._renderer.renderTarget.finishRenderPass(),this._renderer.renderTarget.pop(),this._renderer.globalUniforms.pop()}t._batchableRenderGroup._batcher.updateElement(t._batchableRenderGroup),t._batchableRenderGroup._batcher.geometry.buffers[0].update()}_executeDirect(t){this._renderer.globalUniforms.push({worldTransformMatrix:t.inverseParentTextureTransform,worldColor:t.worldColorAlpha}),Jt(t,this._renderer.renderPipes),this._renderer.globalUniforms.pop()}}ee.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"renderGroup"};var ie=i(2437),re=i(9636);function ne(t,e){e||(e=0);for(let i=e;i<t.length&&t[i];i++)t[i]=null}var se=i(753);const oe=new zt.mc,ae=zt.fR|zt.ig|zt.u;function he(t,e=!1){!function(t){const e=t.root;let i;if(t.renderGroupParent){const r=t.renderGroupParent;t.worldTransform.appendFrom(e.relativeGroupTransform,r.worldTransform),t.worldColor=(0,se.j)(e.groupColor,r.worldColor),i=e.groupAlpha*r.worldAlpha}else t.worldTransform.copyFrom(e.localTransform),t.worldColor=e.localColor,i=e.localAlpha;i=i<0?0:i>1?1:i,t.worldAlpha=i,t.worldColorAlpha=t.worldColor+(255*i<<24)}(t);const i=t.childrenToUpdate,r=t.updateTick++;for(const e in i){const n=Number(e),s=i[e],o=s.list,a=s.index;for(let e=0;e<a;e++){const i=o[e];i.parentRenderGroup===t&&i.relativeRenderGroupDepth===n&&le(i,r,0)}ne(o,a),s.index=0}if(e)for(let i=0;i<t.renderGroupChildren.length;i++)he(t.renderGroupChildren[i],e)}function le(t,e,i){if(e===t.updateTick)return;t.updateTick=e,t.didChange=!1;const r=t.localTransform;t.updateLocalTransform();const n=t.parent;if(n&&!n.renderGroup?(i|=t._updateFlags,t.relativeGroupTransform.appendFrom(r,n.relativeGroupTransform),i&ae&&ue(t,n,i)):(i=t._updateFlags,t.relativeGroupTransform.copyFrom(r),i&ae&&ue(t,oe,i)),!t.renderGroup){const r=t.children,n=r.length;for(let t=0;t<n;t++)le(r[t],e,i);const s=t.parentRenderGroup,o=t;o.renderPipeId&&!s.structureDidChange&&s.updateRenderable(o)}}function ue(t,e,i){if(i&zt.ig){t.groupColor=(0,se.j)(t.localColor,e.groupColor);let i=t.localAlpha*e.groupAlpha;i=i<0?0:i>1?1:i,t.groupAlpha=i,t.groupColorAlpha=t.groupColor+(255*i<<24)}i&zt.u&&(t.groupBlendMode="inherit"===t.localBlendMode?e.groupBlendMode:t.localBlendMode),i&zt.fR&&(t.globalDisplayStatus=t.localDisplayStatus&e.globalDisplayStatus),t._updateFlags=0}const ce=new wt.u;class de{constructor(t){this._renderer=t}render({container:t,transform:e}){const i=t.parent,r=t.renderGroup.renderGroupParent;t.parent=null,t.renderGroup.renderGroupParent=null;const n=this._renderer;let s=ce;e&&(s=s.copyFrom(t.renderGroup.localTransform),t.renderGroup.localTransform.copyFrom(e));const o=n.renderPipes;this._updateCachedRenderGroups(t.renderGroup,null),this._updateRenderGroups(t.renderGroup),n.globalUniforms.start({worldTransformMatrix:e?t.renderGroup.localTransform:t.renderGroup.worldTransform,worldColor:t.renderGroup.worldColorAlpha}),Jt(t.renderGroup,o),o.uniformBatch&&o.uniformBatch.renderEnd(),e&&t.renderGroup.localTransform.copyFrom(s),t.parent=i,t.renderGroup.renderGroupParent=r}destroy(){this._renderer=null}_updateCachedRenderGroups(t,e){if(t.isCachedAsTexture){if(!t.updateCacheTexture)return;e=t}t._parentCacheAsTextureRenderGroup=e;for(let i=t.renderGroupChildren.length-1;i>=0;i--)this._updateCachedRenderGroups(t.renderGroupChildren[i],e);if(t.invalidateMatrices(),t.isCachedAsTexture){if(t.textureNeedsUpdate){const e=t.root.getLocalBounds();e.ceil();const i=t.texture;t.texture&&ie.W.returnTexture(t.texture);const r=this._renderer,n=t.textureOptions.resolution||r.view.resolution,s=t.textureOptions.antialias??r.view.antialias;t.texture=ie.W.getOptimalTexture(e.width,e.height,n,s),t._textureBounds||(t._textureBounds=new re.c),t._textureBounds.copyFrom(e),i!==t.texture&&t.renderGroupParent&&(t.renderGroupParent.structureDidChange=!0)}}else t.texture&&(ie.W.returnTexture(t.texture),t.texture=null)}_updateRenderGroups(t){const e=this._renderer,i=e.renderPipes;if(t.runOnRender(e),t.instructionSet.renderPipes=i,t.structureDidChange?ne(t.childrenRenderablesToUpdate.list,0):function(t,e){const{list:i,index:r}=t.childrenRenderablesToUpdate;let n=!1;for(let t=0;t<r;t++){const r=i[t];if(n=e[r.renderPipeId].validateRenderable(r),n)break}t.structureDidChange=n}(t,i),he(t),t.structureDidChange?(t.structureDidChange=!1,this._buildInstructions(t,e)):this._updateRenderables(t),t.childrenRenderablesToUpdate.index=0,e.renderPipes.batch.upload(t.instructionSet),!t.isCachedAsTexture||t.textureNeedsUpdate)for(let e=0;e<t.renderGroupChildren.length;e++)this._updateRenderGroups(t.renderGroupChildren[e])}_updateRenderables(t){const{list:e,index:i}=t.childrenRenderablesToUpdate;for(let r=0;r<i;r++){const i=e[r];i.didViewUpdate&&t.updateRenderable(i)}ne(e,i)}_buildInstructions(t,e){const i=t.root,r=t.instructionSet;r.reset();const n=e.renderPipes?e:e.batch.renderer,s=n.renderPipes;s.batch.buildStart(r),s.blendMode.buildStart(),s.colorMask.buildStart(),i.sortableChildren&&i.sortChildren(),i.collectRenderablesWithEffects(r,n,null),s.batch.buildEnd(r),s.blendMode.buildEnd(r)}}de.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"renderGroup"};class fe{constructor(t){this._gpuSpriteHash=Object.create(null),this._destroyRenderableBound=this.destroyRenderable.bind(this),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuSpriteHash")}addRenderable(t,e){const i=this._getGpuSprite(t);t.didViewUpdate&&this._updateBatchableSprite(t,i),this._renderer.renderPipes.batch.addToBatch(i,e)}updateRenderable(t){const e=this._gpuSpriteHash[t.uid];t.didViewUpdate&&this._updateBatchableSprite(t,e),e._batcher.updateElement(e)}validateRenderable(t){const e=this._getGpuSprite(t);return!e._batcher.checkAndUpdateTexture(e,t._texture)}destroyRenderable(t){const e=this._gpuSpriteHash[t.uid];$t.Z.return(e),this._gpuSpriteHash[t.uid]=null,t.off("destroyed",this._destroyRenderableBound)}_updateBatchableSprite(t,e){e.bounds=t.visualBounds,e.texture=t._texture}_getGpuSprite(t){return this._gpuSpriteHash[t.uid]||this._initGPUSprite(t)}_initGPUSprite(t){const e=$t.Z.get(Qt.K);return e.renderable=t,e.transform=t.groupTransform,e.texture=t._texture,e.bounds=t.visualBounds,e.roundPixels=this._renderer._roundPixels|t._roundPixels,this._gpuSpriteHash[t.uid]=e,t.on("destroyed",this._destroyRenderableBound),e}destroy(){for(const t in this._gpuSpriteHash)$t.Z.return(this._gpuSpriteHash[t]);this._gpuSpriteHash=null,this._renderer=null}}fe.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"sprite"};const pe="8.7.3";r.Ag.Application;class me{constructor(t){this._renderer=t}init(){globalThis.__PIXI_RENDERER_INIT__?.(this._renderer,pe)}destroy(){this._renderer=null}}me.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem],name:"initHook",priority:-10};var ge=i(5337);const ve=class t{constructor(t,e){this.state=Ut.U.for2d(),this._batchersByInstructionSet=Object.create(null),this._activeBatches=Object.create(null),this.renderer=t,this._adaptor=e,this._adaptor.init?.(this)}static getBatcher(t){return new this._availableBatchers[t]}buildStart(t){let e=this._batchersByInstructionSet[t.uid];e||(e=this._batchersByInstructionSet[t.uid]=Object.create(null),e.default||(e.default=new ge.J)),this._activeBatches=e,this._activeBatch=this._activeBatches.default;for(const t in this._activeBatches)this._activeBatches[t].begin()}addToBatch(e,i){if(this._activeBatch.name!==e.batcherName){this._activeBatch.break(i);let r=this._activeBatches[e.batcherName];r||(r=this._activeBatches[e.batcherName]=t.getBatcher(e.batcherName),r.begin()),this._activeBatch=r}this._activeBatch.add(e)}break(t){this._activeBatch.break(t)}buildEnd(t){this._activeBatch.break(t);const e=this._activeBatches;for(const t in e){const i=e[t],r=i.geometry;r.indexBuffer.setDataWithSize(i.indexBuffer,i.indexSize,!0),r.buffers[0].setDataWithSize(i.attributeBuffer.float32View,i.attributeSize,!1)}}upload(t){const e=this._batchersByInstructionSet[t.uid];for(const t in e){const i=e[t],r=i.geometry;i.dirty&&(i.dirty=!1,r.buffers[0].update(4*i.attributeSize))}}execute(t){if("startBatch"===t.action){const e=t.batcher,i=e.geometry,r=e.shader;this._adaptor.start(this,i,r)}this._adaptor.execute(this,t)}destroy(){this.state=null,this.renderer=null,this._adaptor=null;for(const t in this._activeBatches)this._activeBatches[t].destroy();this._activeBatches=null}};ve.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"batch"},ve._availableBatchers=Object.create(null);let ye=ve;r.XO.handleByMap(r.Ag.Batcher,ye._availableBatchers),r.XO.add(ge.J);var be=i(9049),_e=i(9113),xe=i(3012),we=i(1196);const Me=class t extends It.M{constructor(e){super(e={...t.defaultOptions,...e}),this.enabled=!0,this._state=Ut.U.for2d(),this.blendMode=e.blendMode,this.padding=e.padding,"boolean"==typeof e.antialias?this.antialias=e.antialias?"on":"off":this.antialias=e.antialias,this.resolution=e.resolution,this.blendRequired=e.blendRequired,this.clipToViewport=e.clipToViewport,this.addResource("uTexture",0,1)}apply(t,e,i,r){t.applyFilter(this,e,i,r)}get blendMode(){return this._state.blendMode}set blendMode(t){this._state.blendMode=t}static from(e){const{gpu:i,gl:r,...n}=e;let s,o;return i&&(s=xe.B.from(i)),r&&(o=_e.M.from(r)),new t({gpuProgram:s,glProgram:o,...n})}};Me.defaultOptions={blendMode:"normal",resolution:1,padding:0,antialias:"off",blendRequired:!1,clipToViewport:!0};let Se=Me;var Ae="struct GlobalFilterUniforms {\n  uInputSize:vec4<f32>,\n  uInputPixel:vec4<f32>,\n  uInputClamp:vec4<f32>,\n  uOutputFrame:vec4<f32>,\n  uGlobalFrame:vec4<f32>,\n  uOutputTexture:vec4<f32>,\n};\n\nstruct MaskUniforms {\n  uFilterMatrix:mat3x3<f32>,\n  uMaskClamp:vec4<f32>,\n  uAlpha:f32,\n  uInverse:f32,\n};\n\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\n@group(0) @binding(2) var uSampler : sampler;\n\n@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;\n@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;\n\nstruct VSOutput {\n    @builtin(position) position: vec4<f32>,\n    @location(0) uv : vec2<f32>,\n    @location(1) filterUv : vec2<f32>,\n};\n\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\n{\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\n\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\n}\n\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);\n}\n\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\n{\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\n}\n\nfn getSize() -> vec2<f32>\n{\n  return gfu.uGlobalFrame.zw;\n}\n\n@vertex\nfn mainVertex(\n  @location(0) aPosition : vec2<f32>,\n) -> VSOutput {\n  return VSOutput(\n   filterVertexPosition(aPosition),\n   filterTextureCoord(aPosition),\n   getFilterCoord(aPosition)\n  );\n}\n\n@fragment\nfn mainFragment(\n  @location(0) uv: vec2<f32>,\n  @location(1) filterUv: vec2<f32>,\n  @builtin(position) position: vec4<f32>\n) -> @location(0) vec4<f32> {\n\n    var maskClamp = filterUniforms.uMaskClamp;\n    var uAlpha = filterUniforms.uAlpha;\n\n    var clip = step(3.5,\n      step(maskClamp.x, filterUv.x) +\n      step(maskClamp.y, filterUv.y) +\n      step(filterUv.x, maskClamp.z) +\n      step(filterUv.y, maskClamp.w));\n\n    var mask = textureSample(uMaskTexture, uSampler, filterUv);\n    var source = textureSample(uTexture, uSampler, uv);\n    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);\n\n    var a: f32 = alphaMul * mask.r * uAlpha * clip;\n\n    if (filterUniforms.uInverse == 1.0) {\n        a = 1.0 - a;\n    }\n\n    return source * a;\n}\n";class Ee extends Se{constructor(t){const{sprite:e,...i}=t,r=new we.N(e.texture),n=new kt.k({uFilterMatrix:{value:new wt.u,type:"mat3x3<f32>"},uMaskClamp:{value:r.uClampFrame,type:"vec4<f32>"},uAlpha:{value:1,type:"f32"},uInverse:{value:t.inverse?1:0,type:"f32"}});super({...i,gpuProgram:xe.B.from({vertex:{source:Ae,entryPoint:"mainVertex"},fragment:{source:Ae,entryPoint:"mainFragment"}}),glProgram:_e.M.from({vertex:"in vec2 aPosition;\n\nout vec2 vTextureCoord;\nout vec2 vMaskCoord;\n\n\nuniform vec4 uInputSize;\nuniform vec4 uOutputFrame;\nuniform vec4 uOutputTexture;\nuniform mat3 uFilterMatrix;\n\nvec4 filterVertexPosition(  vec2 aPosition )\n{\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\n       \n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\n\n    return vec4(position, 0.0, 1.0);\n}\n\nvec2 filterTextureCoord(  vec2 aPosition )\n{\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\n}\n\nvec2 getFilterCoord( vec2 aPosition )\n{\n    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\n}   \n\nvoid main(void)\n{\n    gl_Position = filterVertexPosition(aPosition);\n    vTextureCoord = filterTextureCoord(aPosition);\n    vMaskCoord = getFilterCoord(aPosition);\n}\n",fragment:"in vec2 vMaskCoord;\nin vec2 vTextureCoord;\n\nuniform sampler2D uTexture;\nuniform sampler2D uMaskTexture;\n\nuniform float uAlpha;\nuniform vec4 uMaskClamp;\nuniform float uInverse;\n\nout vec4 finalColor;\n\nvoid main(void)\n{\n    float clip = step(3.5,\n        step(uMaskClamp.x, vMaskCoord.x) +\n        step(uMaskClamp.y, vMaskCoord.y) +\n        step(vMaskCoord.x, uMaskClamp.z) +\n        step(vMaskCoord.y, uMaskClamp.w));\n\n    // TODO look into why this is needed\n    float npmAlpha = uAlpha;\n    vec4 original = texture(uTexture, vTextureCoord);\n    vec4 masky = texture(uMaskTexture, vMaskCoord);\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\n\n    float a = alphaMul * masky.r * npmAlpha * clip;\n\n    if (uInverse == 1.0) {\n        a = 1.0 - a;\n    }\n\n    finalColor = original * a;\n}\n",name:"mask-filter"}),resources:{filterUniforms:n,uMaskTexture:e.texture.source}}),this.sprite=e,this._textureMatrix=r}set inverse(t){this.resources.filterUniforms.uniforms.uInverse=t?1:0}get inverse(){return 1===this.resources.filterUniforms.uniforms.uInverse}apply(t,e,i,r){this._textureMatrix.texture=this.sprite.texture,t.calculateSpriteMatrix(this.resources.filterUniforms.uniforms.uFilterMatrix,this.sprite).prepend(this._textureMatrix.mapCoord),this.resources.uMaskTexture=this.sprite.texture.source,t.applyFilter(this,e,i,r)}}var Te=i(9443),Re=i(6844),Pe=i(5099);const Ce=new re.c;class Ie extends be.a{constructor(){super(),this.filters=[new Ee({sprite:new Re.k(c.g.EMPTY),inverse:!1,resolution:"inherit",antialias:"inherit"})]}get sprite(){return this.filters[0].sprite}set sprite(t){this.filters[0].sprite=t}get inverse(){return this.filters[0].inverse}set inverse(t){this.filters[0].inverse=t}}class ke{constructor(t){this._activeMaskStage=[],this._renderer=t}push(t,e,i){const r=this._renderer;if(r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1,maskedContainer:e}),t.inverse=e._maskOptions.inverse,t.renderMaskToTexture){const e=t.mask;e.includeInBuild=!0,e.collectRenderables(i,r,null),e.includeInBuild=!1}r.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"pushMaskEnd",mask:t,maskedContainer:e,inverse:e._maskOptions.inverse,canBundle:!1})}pop(t,e,i){this._renderer.renderPipes.batch.break(i),i.add({renderPipeId:"alphaMask",action:"popMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1})}execute(t){const e=this._renderer,i=t.mask.renderMaskToTexture;if("pushMaskBegin"===t.action){const r=$t.Z.get(Ie);if(r.inverse=t.inverse,i){t.mask.mask.measurable=!0;const i=(0,Te.fB)(t.mask.mask,!0,Ce);t.mask.mask.measurable=!1,i.ceil();const n=e.renderTarget.renderTarget.colorTexture.source,s=ie.W.getOptimalTexture(i.width,i.height,n._resolution,n.antialias);e.renderTarget.push(s,!0),e.globalUniforms.push({offset:i,worldColor:4294967295});const o=r.sprite;o.texture=s,o.worldTransform.tx=i.minX,o.worldTransform.ty=i.minY,this._activeMaskStage.push({filterEffect:r,maskedContainer:t.maskedContainer,filterTexture:s})}else r.sprite=t.mask.mask,this._activeMaskStage.push({filterEffect:r,maskedContainer:t.maskedContainer})}else if("pushMaskEnd"===t.action){const t=this._activeMaskStage[this._activeMaskStage.length-1];i&&(e.type===Pe.W.WEBGL&&e.renderTarget.finishRenderPass(),e.renderTarget.pop(),e.globalUniforms.pop()),e.filter.push({renderPipeId:"filter",action:"pushFilter",container:t.maskedContainer,filterEffect:t.filterEffect,canBundle:!1})}else if("popMaskEnd"===t.action){e.filter.pop();const t=this._activeMaskStage.pop();i&&ie.W.returnTexture(t.filterTexture),$t.Z.return(t.filterEffect)}}destroy(){this._renderer=null,this._activeMaskStage=null}}ke.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"alphaMask"};class Be{constructor(t){this._colorStack=[],this._colorStackIndex=0,this._currentColor=0,this._renderer=t}buildStart(){this._colorStack[0]=15,this._colorStackIndex=1,this._currentColor=15}push(t,e,i){this._renderer.renderPipes.batch.break(i);const r=this._colorStack;r[this._colorStackIndex]=r[this._colorStackIndex-1]&t.mask;const n=this._colorStack[this._colorStackIndex];n!==this._currentColor&&(this._currentColor=n,i.add({renderPipeId:"colorMask",colorMask:n,canBundle:!1})),this._colorStackIndex++}pop(t,e,i){this._renderer.renderPipes.batch.break(i);const r=this._colorStack;this._colorStackIndex--;const n=r[this._colorStackIndex-1];n!==this._currentColor&&(this._currentColor=n,i.add({renderPipeId:"colorMask",colorMask:n,canBundle:!1}))}execute(t){this._renderer.colorMask.setMask(t.colorMask)}destroy(){this._colorStack=null}}Be.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"colorMask"};var Oe=i(1957);class Le{constructor(t){this._maskStackHash={},this._maskHash=new WeakMap,this._renderer=t}push(t,e,i){var r;const n=t,s=this._renderer;s.renderPipes.batch.break(i),s.renderPipes.blendMode.setBlendMode(n.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"pushMaskBegin",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const o=n.mask;o.includeInBuild=!0,this._maskHash.has(n)||this._maskHash.set(n,{instructionsStart:0,instructionsLength:0});const a=this._maskHash.get(n);a.instructionsStart=i.instructionSize,o.collectRenderables(i,s,null),o.includeInBuild=!1,s.renderPipes.batch.break(i),i.add({renderPipeId:"stencilMask",action:"pushMaskEnd",mask:t,inverse:e._maskOptions.inverse,canBundle:!1});const h=i.instructionSize-a.instructionsStart-1;a.instructionsLength=h;const l=s.renderTarget.renderTarget.uid;(r=this._maskStackHash)[l]??(r[l]=0)}pop(t,e,i){const r=t,n=this._renderer;n.renderPipes.batch.break(i),n.renderPipes.blendMode.setBlendMode(r.mask,"none",i),i.add({renderPipeId:"stencilMask",action:"popMaskBegin",inverse:e._maskOptions.inverse,canBundle:!1});const s=this._maskHash.get(t);for(let t=0;t<s.instructionsLength;t++)i.instructions[i.instructionSize++]=i.instructions[s.instructionsStart++];i.add({renderPipeId:"stencilMask",action:"popMaskEnd",canBundle:!1})}execute(t){var e;const i=this._renderer,r=i.renderTarget.renderTarget.uid;let n=(e=this._maskStackHash)[r]??(e[r]=0);"pushMaskBegin"===t.action?(i.renderTarget.ensureDepthStencil(),i.stencil.setStencilMode(Oe.K.RENDERING_MASK_ADD,n),n++,i.colorMask.setMask(0)):"pushMaskEnd"===t.action?(t.inverse?i.stencil.setStencilMode(Oe.K.INVERSE_MASK_ACTIVE,n):i.stencil.setStencilMode(Oe.K.MASK_ACTIVE,n),i.colorMask.setMask(15)):"popMaskBegin"===t.action?(i.colorMask.setMask(0),0!==n?i.stencil.setStencilMode(Oe.K.RENDERING_MASK_REMOVE,n):(i.renderTarget.clear(null,Ht.STENCIL),i.stencil.setStencilMode(Oe.K.DISABLED,n)),n--):"popMaskEnd"===t.action&&(t.inverse?i.stencil.setStencilMode(Oe.K.INVERSE_MASK_ACTIVE,n):i.stencil.setStencilMode(Oe.K.MASK_ACTIVE,n),i.colorMask.setMask(15)),this._maskStackHash[r]=n}destroy(){this._renderer=null,this._maskStackHash=null,this._maskHash=null}}Le.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"stencilMask"};const Ue=class t{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Nt.Q(0),this.color=this._backgroundColor,this.alpha=1}init(e){e={...t.defaultOptions,...e},this.clearBeforeRender=e.clearBeforeRender,this.color=e.background||e.backgroundColor||this._backgroundColor,this.alpha=e.backgroundAlpha,this._backgroundColor.setAlpha(e.backgroundAlpha)}get color(){return this._backgroundColor}set color(t){this._backgroundColor.setValue(t)}get alpha(){return this._backgroundColor.alpha}set alpha(t){this._backgroundColor.setAlpha(t)}get colorRgba(){return this._backgroundColor.toArray()}destroy(){}};Ue.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"background",priority:0},Ue.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0};let De=Ue;const Ne={};r.XO.handle(r.Ag.BlendMode,t=>{if(!t.name)throw new Error("BlendMode extension must have a name property");Ne[t.name]=t.ref},t=>{delete Ne[t.name]});class Fe{constructor(t){this._isAdvanced=!1,this._filterHash=Object.create(null),this._renderer=t,this._renderer.runners.prerender.add(this)}prerender(){this._activeBlendMode="normal",this._isAdvanced=!1}setBlendMode(t,e,i){this._activeBlendMode!==e?(this._activeBlendMode=e,this._isAdvanced&&this._endAdvancedBlendMode(i),this._isAdvanced=!!Ne[e],this._isAdvanced&&(this._beginAdvancedBlendMode(i),this._renderableList.push(t))):this._isAdvanced&&this._renderableList.push(t)}_beginAdvancedBlendMode(t){this._renderer.renderPipes.batch.break(t);const e=this._activeBlendMode;if(!Ne[e])return void(0,w.R)(`Unable to assign BlendMode: '${e}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);let i=this._filterHash[e];i||(i=this._filterHash[e]=new be.a,i.filters=[new Ne[e]]);const r={renderPipeId:"filter",action:"pushFilter",renderables:[],filterEffect:i,canBundle:!1};this._renderableList=r.renderables,t.add(r)}_endAdvancedBlendMode(t){this._renderableList=null,this._renderer.renderPipes.batch.break(t),t.add({renderPipeId:"filter",action:"popFilter",canBundle:!1})}buildStart(){this._isAdvanced=!1}buildEnd(t){this._isAdvanced&&this._endAdvancedBlendMode(t)}destroy(){this._renderer=null,this._renderableList=null;for(const t in this._filterHash)this._filterHash[t].destroy();this._filterHash=null}}Fe.extension={type:[r.Ag.WebGLPipes,r.Ag.WebGPUPipes,r.Ag.CanvasPipes],name:"blendMode"};var ze=i(6763);const Ge={png:"image/png",jpg:"image/jpeg",webp:"image/webp"},je=class t{constructor(t){this._renderer=t}_normalizeOptions(t,e={}){return t instanceof zt.mc||t instanceof c.g?{target:t,...e}:{...e,...t}}async image(t){const e=new Image;return e.src=await this.base64(t),e}async base64(e){e=this._normalizeOptions(e,t.defaultImageOptions);const{format:i,quality:r}=e,n=this.canvas(e);if(void 0!==n.toBlob)return new Promise((t,e)=>{n.toBlob(i=>{if(!i)return void e(new Error("ICanvas.toBlob failed!"));const r=new FileReader;r.onload=()=>t(r.result),r.onerror=e,r.readAsDataURL(i)},Ge[i],r)});if(void 0!==n.toDataURL)return n.toDataURL(Ge[i],r);if(void 0!==n.convertToBlob){const t=await n.convertToBlob({type:Ge[i],quality:r});return new Promise((e,i)=>{const r=new FileReader;r.onload=()=>e(r.result),r.onerror=i,r.readAsDataURL(t)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(t){const e=(t=this._normalizeOptions(t)).target,i=this._renderer;if(e instanceof c.g)return i.texture.generateCanvas(e);const r=i.textureGenerator.generateTexture(t),n=i.texture.generateCanvas(r);return r.destroy(!0),n}pixels(t){const e=(t=this._normalizeOptions(t)).target,i=this._renderer,r=e instanceof c.g?e:i.textureGenerator.generateTexture(t),n=i.texture.getPixels(r);return e instanceof zt.mc&&r.destroy(!0),n}texture(t){return(t=this._normalizeOptions(t)).target instanceof c.g?t.target:this._renderer.textureGenerator.generateTexture(t)}download(t){t=this._normalizeOptions(t);const e=this.canvas(t),i=document.createElement("a");i.download=t.filename??"image.png",i.href=e.toDataURL("image/png"),document.body.appendChild(i),i.click(),document.body.removeChild(i)}log(t){const e=t.width??200;t=this._normalizeOptions(t);const i=this.canvas(t),r=i.toDataURL();ze.log(`[Pixi Texture] ${i.width}px ${i.height}px`);const n=["font-size: 1px;",`padding: ${e}px 300px;`,`background: url(${r}) no-repeat;`,"background-size: contain;"].join(" ");ze.log("%c ",n)}destroy(){this._renderer=null}};je.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem],name:"extract"},je.defaultImageOptions={format:"png",quality:1};let Ve=je;var He=i(7269),We=i(1285);class Xe extends c.g{static create(t){return new Xe({source:new We.v(t)})}resize(t,e,i){return this.source.resize(t,e,i),this}}const qe=new u.M,Ye=new re.c,Ze=[0,0,0,0];class Ke{constructor(t){this._renderer=t}generateTexture(t){t instanceof zt.mc&&(t={target:t,frame:void 0,textureSourceOptions:{},resolution:void 0});const e=t.resolution||this._renderer.resolution,i=t.antialias||this._renderer.view.antialias,r=t.target;let n=t.clearColor;n=n?Array.isArray(n)&&4===n.length?n:Nt.Q.shared.setValue(n).toArray():Ze;const s=t.frame?.copyTo(qe)||(0,He.n)(r,Ye).rectangle;s.width=0|Math.max(s.width,1/e),s.height=0|Math.max(s.height,1/e);const o=Xe.create({...t.textureSourceOptions,width:s.width,height:s.height,resolution:e,antialias:i}),a=wt.u.shared.translate(-s.x,-s.y);return this._renderer.render({container:r,transform:a,target:o,clearColor:n}),o.source.updateMipmaps(),o}destroy(){this._renderer=null}}Ke.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem],name:"textureGenerator"};var $e=i(2760),Qe=i(3513);class Je{constructor(t){this._stackIndex=0,this._globalUniformDataStack=[],this._uniformsPool=[],this._activeUniforms=[],this._bindGroupPool=[],this._activeBindGroups=[],this._renderer=t}reset(){this._stackIndex=0;for(let t=0;t<this._activeUniforms.length;t++)this._uniformsPool.push(this._activeUniforms[t]);for(let t=0;t<this._activeBindGroups.length;t++)this._bindGroupPool.push(this._activeBindGroups[t]);this._activeUniforms.length=0,this._activeBindGroups.length=0}start(t){this.reset(),this.push(t)}bind({size:t,projectionMatrix:e,worldTransformMatrix:i,worldColor:r,offset:n}){const s=this._renderer.renderTarget.renderTarget,o=this._stackIndex?this._globalUniformDataStack[this._stackIndex-1]:{projectionData:s,worldTransformMatrix:new wt.u,worldColor:4294967295,offset:new Mt.b},a={projectionMatrix:e||this._renderer.renderTarget.projectionMatrix,resolution:t||s.size,worldTransformMatrix:i||o.worldTransformMatrix,worldColor:r||o.worldColor,offset:n||o.offset,bindGroup:null},h=this._uniformsPool.pop()||this._createUniforms();this._activeUniforms.push(h);const l=h.uniforms;let u;l.uProjectionMatrix=a.projectionMatrix,l.uResolution=a.resolution,l.uWorldTransformMatrix.copyFrom(a.worldTransformMatrix),l.uWorldTransformMatrix.tx-=a.offset.x,l.uWorldTransformMatrix.ty-=a.offset.y,(0,$e.V)(a.worldColor,l.uWorldColorAlpha,0),h.update(),this._renderer.renderPipes.uniformBatch?u=this._renderer.renderPipes.uniformBatch.getUniformBindGroup(h,!1):(u=this._bindGroupPool.pop()||new Qe.T,this._activeBindGroups.push(u),u.setResource(h,0)),a.bindGroup=u,this._currentGlobalUniformData=a}push(t){this.bind(t),this._globalUniformDataStack[this._stackIndex++]=this._currentGlobalUniformData}pop(){this._currentGlobalUniformData=this._globalUniformDataStack[--this._stackIndex-1],this._renderer.type===Pe.W.WEBGL&&this._currentGlobalUniformData.bindGroup.resources[0].update()}get bindGroup(){return this._currentGlobalUniformData.bindGroup}get globalUniformData(){return this._currentGlobalUniformData}get uniformGroup(){return this._currentGlobalUniformData.bindGroup.resources[0]}_createUniforms(){return new kt.k({uProjectionMatrix:{value:new wt.u,type:"mat3x3<f32>"},uWorldTransformMatrix:{value:new wt.u,type:"mat3x3<f32>"},uWorldColorAlpha:{value:new Float32Array(4),type:"vec4<f32>"},uResolution:{value:[0,0],type:"vec2<f32>"}},{isStatic:!0})}destroy(){this._renderer=null}}Je.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"globalUniforms"};var ti=i(7309);let ei=1;class ii{constructor(){this._tasks=[],this._offset=0}init(){ti.R.system.add(this._update,this)}repeat(t,e,i=!0){const r=ei++;let n=0;return i&&(this._offset+=1e3,n=this._offset),this._tasks.push({func:t,duration:e,start:performance.now(),offset:n,last:performance.now(),repeat:!0,id:r}),r}cancel(t){for(let e=0;e<this._tasks.length;e++)if(this._tasks[e].id===t)return void this._tasks.splice(e,1)}_update(){const t=performance.now();for(let e=0;e<this._tasks.length;e++){const i=this._tasks[e];if(t-i.offset-i.last>=i.duration){const e=t-i.start;i.func(e),i.last=t}}}destroy(){ti.R.system.remove(this._update,this),this._tasks.length=0}}ii.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"scheduler",priority:0};let ri=!1;class ni{constructor(t){this._renderer=t}init(t){if(t.hello){let t=this._renderer.name;this._renderer.type===Pe.W.WEBGL&&(t+=` ${this._renderer.context.webGLVersion}`),function(t){if(!ri){if(h.e.get().getNavigator().userAgent.toLowerCase().indexOf("chrome")>-1){const e=[`%c  %c  %c  %c  %c PixiJS %c v${pe} (${t}) http://www.pixijs.com/\n\n`,"background: #E72264; padding:5px 0;","background: #6CA2EA; padding:5px 0;","background: #B5D33D; padding:5px 0;","background: #FED23F; padding:5px 0;","color: #FFFFFF; background: #E72264; padding:5px 0;","color: #E72264; background: #FFFFFF; padding:5px 0;"];globalThis.console.log(...e)}else globalThis.console&&globalThis.console.log(`PixiJS ${pe} - ${t} - http://www.pixijs.com/`);ri=!0}}(t)}}}function si(t){let e=!1;for(const i in t)if(null==t[i]){e=!0;break}if(!e)return t;const i=Object.create(null);for(const e in t){const r=t[e];r&&(i[e]=r)}return i}function oi(t){let e=0;for(let i=0;i<t.length;i++)null==t[i]?e++:t[i-e]=t[i];return t.length-=e,t}ni.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"hello",priority:-2},ni.defaultOptions={hello:!1};let ai=0;const hi=class t{constructor(t){this._managedRenderables=[],this._managedHashes=[],this._managedArrays=[],this._renderer=t}init(e){e={...t.defaultOptions,...e},this.maxUnusedTime=e.renderableGCMaxUnusedTime,this._frequency=e.renderableGCFrequency,this.enabled=e.renderableGCActive}get enabled(){return!!this._handler}set enabled(t){this.enabled!==t&&(t?(this._handler=this._renderer.scheduler.repeat(()=>this.run(),this._frequency,!1),this._hashHandler=this._renderer.scheduler.repeat(()=>{for(const t of this._managedHashes)t.context[t.hash]=si(t.context[t.hash])},this._frequency),this._arrayHandler=this._renderer.scheduler.repeat(()=>{for(const t of this._managedArrays)oi(t.context[t.hash])},this._frequency)):(this._renderer.scheduler.cancel(this._handler),this._renderer.scheduler.cancel(this._hashHandler),this._renderer.scheduler.cancel(this._arrayHandler)))}addManagedHash(t,e){this._managedHashes.push({context:t,hash:e})}addManagedArray(t,e){this._managedArrays.push({context:t,hash:e})}prerender({container:t}){this._now=performance.now(),t.renderGroup.gcTick=ai++,this._updateInstructionGCTick(t.renderGroup,t.renderGroup.gcTick)}addRenderable(t){this.enabled&&(-1===t._lastUsed&&(this._managedRenderables.push(t),t.once("destroyed",this._removeRenderable,this)),t._lastUsed=this._now)}run(){const t=this._now,e=this._managedRenderables,i=this._renderer.renderPipes;let r=0;for(let n=0;n<e.length;n++){const s=e[n];if(null===s){r++;continue}const o=s.renderGroup??s.parentRenderGroup,a=o?.instructionSet?.gcTick??-1;if((o?.gcTick??0)===a&&(s._lastUsed=t),t-s._lastUsed>this.maxUnusedTime){if(!s.destroyed){const t=i;o&&(o.structureDidChange=!0),t[s.renderPipeId].destroyRenderable(s)}s._lastUsed=-1,r++,s.off("destroyed",this._removeRenderable,this)}else e[n-r]=s}e.length-=r}destroy(){this.enabled=!1,this._renderer=null,this._managedRenderables.length=0,this._managedHashes.length=0,this._managedArrays.length=0}_removeRenderable(t){const e=this._managedRenderables.indexOf(t);e>=0&&(t.off("destroyed",this._removeRenderable,this),this._managedRenderables[e]=null)}_updateInstructionGCTick(t,e){t.instructionSet.gcTick=e;for(const i of t.renderGroupChildren)this._updateInstructionGCTick(i,e)}};hi.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem],name:"renderableGC",priority:0},hi.defaultOptions={renderableGCActive:!0,renderableGCMaxUnusedTime:6e4,renderableGCFrequency:3e4};let li=hi;const ui=class t{constructor(t){this._renderer=t,this.count=0,this.checkCount=0}init(e){e={...t.defaultOptions,...e},this.checkCountMax=e.textureGCCheckCountMax,this.maxIdle=e.textureGCAMaxIdle??e.textureGCMaxIdle,this.active=e.textureGCActive}postrender(){this._renderer.renderingToScreen&&(this.count++,this.active&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this._renderer.texture.managedTextures;for(let e=0;e<t.length;e++){const i=t[e];i.autoGarbageCollect&&i.resource&&i._touched>-1&&this.count-i._touched>this.maxIdle&&(i._touched=-1,i.unload())}}destroy(){this._renderer=null}};ui.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem],name:"textureGC"},ui.defaultOptions={textureGCActive:!0,textureGCAMaxIdle:null,textureGCMaxIdle:3600,textureGCCheckCountMax:600};let ci=ui;var di=i(133);const fi=class t{constructor(e={}){if(this.uid=(0,di.L)("renderTarget"),this.colorTextures=[],this.dirtyId=0,this.isRoot=!1,this._size=new Float32Array(2),this._managedColorTextures=!1,e={...t.defaultOptions,...e},this.stencil=e.stencil,this.depth=e.depth,this.isRoot=e.isRoot,"number"==typeof e.colorTextures){this._managedColorTextures=!0;for(let t=0;t<e.colorTextures;t++)this.colorTextures.push(new We.v({width:e.width,height:e.height,resolution:e.resolution,antialias:e.antialias}))}else{this.colorTextures=[...e.colorTextures.map(t=>t.source)];const t=this.colorTexture.source;this.resize(t.width,t.height,t._resolution)}this.colorTexture.source.on("resize",this.onSourceResize,this),(e.depthStencilTexture||this.stencil)&&(e.depthStencilTexture instanceof c.g||e.depthStencilTexture instanceof We.v?this.depthStencilTexture=e.depthStencilTexture.source:this.ensureDepthStencilTexture())}get size(){const t=this._size;return t[0]=this.pixelWidth,t[1]=this.pixelHeight,t}get width(){return this.colorTexture.source.width}get height(){return this.colorTexture.source.height}get pixelWidth(){return this.colorTexture.source.pixelWidth}get pixelHeight(){return this.colorTexture.source.pixelHeight}get resolution(){return this.colorTexture.source._resolution}get colorTexture(){return this.colorTextures[0]}onSourceResize(t){this.resize(t.width,t.height,t._resolution,!0)}ensureDepthStencilTexture(){this.depthStencilTexture||(this.depthStencilTexture=new We.v({width:this.width,height:this.height,resolution:this.resolution,format:"depth24plus-stencil8",autoGenerateMipmaps:!1,antialias:!1,mipLevelCount:1}))}resize(t,e,i=this.resolution,r=!1){this.dirtyId++,this.colorTextures.forEach((n,s)=>{r&&0===s||n.source.resize(t,e,i)}),this.depthStencilTexture&&this.depthStencilTexture.source.resize(t,e,i)}destroy(){this.colorTexture.source.off("resize",this.onSourceResize,this),this._managedColorTextures&&this.colorTextures.forEach(t=>{t.destroy()}),this.depthStencilTexture&&(this.depthStencilTexture.destroy(),delete this.depthStencilTexture)}};fi.defaultOptions={width:0,height:0,resolution:1,colorTextures:1,stencil:!1,depth:!1,antialias:!1,isRoot:!1};let pi=fi;var mi=i(4884);const gi=new Map;function vi(t,e){if(!gi.has(t)){const i=new c.g({source:new mi.q({resource:t,...e})}),r=()=>{gi.get(t)===i&&gi.delete(t)};i.once("destroy",r),i.source.once("destroy",r),gi.set(t,i)}return gi.get(t)}const yi=class t{get autoDensity(){return this.texture.source.autoDensity}set autoDensity(t){this.texture.source.autoDensity=t}get resolution(){return this.texture.source._resolution}set resolution(t){this.texture.source.resize(this.texture.source.width,this.texture.source.height,t)}init(e){(e={...t.defaultOptions,...e}).view&&((0,Vt.t6)(Vt.lj,"ViewSystem.view has been renamed to ViewSystem.canvas"),e.canvas=e.view),this.screen=new u.M(0,0,e.width,e.height),this.canvas=e.canvas||h.e.get().createCanvas(),this.antialias=!!e.antialias,this.texture=vi(this.canvas,e),this.renderTarget=new pi({colorTextures:[this.texture],depth:!!e.depth,isRoot:!0}),this.texture.source.transparent=e.backgroundAlpha<1,this.resolution=e.resolution}resize(t,e,i){this.texture.source.resize(t,e,i),this.screen.width=this.texture.frame.width,this.screen.height=this.texture.frame.height}destroy(t=!1){("boolean"==typeof t?t:t?.removeView)&&this.canvas.parentNode&&this.canvas.parentNode.removeChild(this.canvas)}};yi.extension={type:[r.Ag.WebGLSystem,r.Ag.WebGPUSystem,r.Ag.CanvasSystem],name:"view",priority:0},yi.defaultOptions={width:800,height:600,autoDensity:!1,antialias:!1};const bi=[De,Je,ni,yi,de,ci,Ke,Ve,me,li,ii],_i=[Fe,ye,fe,ee,ke,Le,Be,Kt];var xi=i(1132),wi=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(wi||{});class Mi{constructor(t,e){this._lastBindBaseLocation=-1,this._lastBindCallId=-1,this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.type=e}}class Si{constructor(t){this._gpuBuffers=Object.create(null),this._boundBufferBases=Object.create(null),this._minBaseLocation=0,this._nextBindBaseIndex=this._minBaseLocation,this._bindCallId=0,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_gpuBuffers")}destroy(){this._renderer=null,this._gl=null,this._gpuBuffers=null,this._boundBufferBases=null}contextChange(){const t=this._gl=this._renderer.gl;this._gpuBuffers=Object.create(null),this._maxBindings=t.MAX_UNIFORM_BUFFER_BINDINGS?t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS):0}getGlBuffer(t){return this._gpuBuffers[t.uid]||this.createGLBuffer(t)}bind(t){const{_gl:e}=this,i=this.getGlBuffer(t);e.bindBuffer(i.type,i.buffer)}bindBufferBase(t,e){const{_gl:i}=this;this._boundBufferBases[e]!==t&&(this._boundBufferBases[e]=t,t._lastBindBaseLocation=e,i.bindBufferBase(i.UNIFORM_BUFFER,e,t.buffer))}nextBindBase(t){this._bindCallId++,this._minBaseLocation=0,t&&(this._boundBufferBases[0]=null,this._minBaseLocation=1,this._nextBindBaseIndex<1&&(this._nextBindBaseIndex=1))}freeLocationForBufferBase(t){let e=this.getLastBindBaseLocation(t);if(e>=this._minBaseLocation)return t._lastBindCallId=this._bindCallId,e;let i=0,r=this._nextBindBaseIndex;for(;i<2;){r>=this._maxBindings&&(r=this._minBaseLocation,i++);const t=this._boundBufferBases[r];if(!t||t._lastBindCallId!==this._bindCallId)break;r++}return e=r,this._nextBindBaseIndex=r+1,i>=2?-1:(t._lastBindCallId=this._bindCallId,this._boundBufferBases[e]=null,e)}getLastBindBaseLocation(t){const e=t._lastBindBaseLocation;return this._boundBufferBases[e]===t?e:-1}bindBufferRange(t,e,i,r){const{_gl:n}=this;i||(i=0),e||(e=0),this._boundBufferBases[e]=null,n.bindBufferRange(n.UNIFORM_BUFFER,e||0,t.buffer,256*i,r||256)}updateBuffer(t){const{_gl:e}=this,i=this.getGlBuffer(t);if(t._updateID===i.updateID)return i;i.updateID=t._updateID,e.bindBuffer(i.type,i.buffer);const r=t.data,n=t.descriptor.usage&xi.S.STATIC?e.STATIC_DRAW:e.DYNAMIC_DRAW;return r?i.byteLength>=r.byteLength?e.bufferSubData(i.type,0,r,0,t._updateSize/r.BYTES_PER_ELEMENT):(i.byteLength=r.byteLength,e.bufferData(i.type,r,n)):(i.byteLength=t.descriptor.size,e.bufferData(i.type,i.byteLength,n)),i}destroyAll(){const t=this._gl;for(const e in this._gpuBuffers)t.deleteBuffer(this._gpuBuffers[e].buffer);this._gpuBuffers=Object.create(null)}onBufferDestroy(t,e){const i=this._gpuBuffers[t.uid],r=this._gl;e||r.deleteBuffer(i.buffer),this._gpuBuffers[t.uid]=null}createGLBuffer(t){const{_gl:e}=this;let i=wi.ARRAY_BUFFER;t.descriptor.usage&xi.S.INDEX?i=wi.ELEMENT_ARRAY_BUFFER:t.descriptor.usage&xi.S.UNIFORM&&(i=wi.UNIFORM_BUFFER);const r=new Mi(e.createBuffer(),i);return this._gpuBuffers[t.uid]=r,t.on("destroy",this.onBufferDestroy,this),r}resetState(){this._boundBufferBases=Object.create(null)}}Si.extension={type:[r.Ag.WebGLSystem],name:"buffer"};const Ai=class t{constructor(t){this.supports={uint32Indices:!0,uniformBufferObject:!0,vertexArrayObject:!0,srgbTextures:!0,nonPowOf2wrapping:!0,msaa:!0,nonPowOf2mipmaps:!0},this._renderer=t,this.extensions=Object.create(null),this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this._renderer.gl=t}init(e){e={...t.defaultOptions,...e};let i=this.multiView=e.multiView;if(e.context&&i&&((0,w.R)("Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together."),i=!1),this.canvas=i?h.e.get().createCanvas(this._renderer.canvas.width,this._renderer.canvas.height):this._renderer.view.canvas,e.context)this.initFromContext(e.context);else{const t=this._renderer.background.alpha<1,i=e.premultipliedAlpha??!0,r=e.antialias&&!this._renderer.backBuffer.useBackBuffer;this.createContext(e.preferWebGLVersion,{alpha:t,premultipliedAlpha:i,antialias:r,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference??"default"})}}ensureCanvasSize(t){if(!this.multiView)return void(t!==this.canvas&&(0,w.R)("multiView is disabled, but targetCanvas is not the main canvas"));const{canvas:e}=this;(e.width<t.width||e.height<t.height)&&(e.width=Math.max(t.width,t.width),e.height=Math.max(t.height,t.height))}initFromContext(t){this.gl=t,this.webGLVersion=t instanceof h.e.get().getWebGLRenderingContext()?1:2,this.getExtensions(),this.validateContext(t),this._renderer.runners.contextChange.emit(t);const e=this._renderer.view.canvas;e.addEventListener("webglcontextlost",this.handleContextLost,!1),e.addEventListener("webglcontextrestored",this.handleContextRestored,!1)}createContext(t,e){let i;const r=this.canvas;if(2===t&&(i=r.getContext("webgl2",e)),!i&&(i=r.getContext("webgl",e),!i))throw new Error("This browser does not support WebGL. Try using the canvas renderer");this.gl=i,this.initFromContext(this.gl)}getExtensions(){const{gl:t}=this,e={anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc"),bptc:t.getExtension("EXT_texture_compression_bptc"),rgtc:t.getExtension("EXT_texture_compression_rgtc"),loseContext:t.getExtension("WEBGL_lose_context")};if(1===this.webGLVersion)this.extensions={...e,drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear"),vertexAttribDivisorANGLE:t.getExtension("ANGLE_instanced_arrays"),srgb:t.getExtension("EXT_sRGB")};else{this.extensions={...e,colorBufferFloat:t.getExtension("EXT_color_buffer_float")};const i=t.getExtension("WEBGL_provoking_vertex");i&&i.provokingVertexWEBGL(i.FIRST_VERTEX_CONVENTION_WEBGL)}}handleContextLost(t){t.preventDefault(),this._contextLossForced&&(this._contextLossForced=!1,setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext?.restoreContext()},0))}handleContextRestored(){this._renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this._renderer.view.canvas;this._renderer=null,t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored),this.gl.useProgram(null),this.extensions.loseContext?.loseContext()}forceContextLoss(){this.extensions.loseContext?.loseContext(),this._contextLossForced=!0}validateContext(t){const e=t.getContextAttributes();e&&!e.stencil&&(0,w.R)("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const i=this.supports,r=2===this.webGLVersion,n=this.extensions;i.uint32Indices=r||!!n.uint32ElementIndex,i.uniformBufferObject=r,i.vertexArrayObject=r||!!n.vertexArrayObject,i.srgbTextures=r||!!n.srgb,i.nonPowOf2wrapping=r,i.nonPowOf2mipmaps=r,i.msaa=r,i.uint32Indices||(0,w.R)("Provided WebGL context does not support 32 index buffer, large scenes may not render correctly")}};Ai.extension={type:[r.Ag.WebGLSystem],name:"context"},Ai.defaultOptions={context:null,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:void 0,preferWebGLVersion:2,multiView:!1};let Ei=Ai;var Ti=i(8306);var Ri=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(Ri||{}),Pi=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(Pi||{}),Ci=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(Ci||{});const Ii={uint8x2:Ci.UNSIGNED_BYTE,uint8x4:Ci.UNSIGNED_BYTE,sint8x2:Ci.BYTE,sint8x4:Ci.BYTE,unorm8x2:Ci.UNSIGNED_BYTE,unorm8x4:Ci.UNSIGNED_BYTE,snorm8x2:Ci.BYTE,snorm8x4:Ci.BYTE,uint16x2:Ci.UNSIGNED_SHORT,uint16x4:Ci.UNSIGNED_SHORT,sint16x2:Ci.SHORT,sint16x4:Ci.SHORT,unorm16x2:Ci.UNSIGNED_SHORT,unorm16x4:Ci.UNSIGNED_SHORT,snorm16x2:Ci.SHORT,snorm16x4:Ci.SHORT,float16x2:Ci.HALF_FLOAT,float16x4:Ci.HALF_FLOAT,float32:Ci.FLOAT,float32x2:Ci.FLOAT,float32x3:Ci.FLOAT,float32x4:Ci.FLOAT,uint32:Ci.UNSIGNED_INT,uint32x2:Ci.UNSIGNED_INT,uint32x3:Ci.UNSIGNED_INT,uint32x4:Ci.UNSIGNED_INT,sint32:Ci.INT,sint32x2:Ci.INT,sint32x3:Ci.INT,sint32x4:Ci.INT};function ki(t){return Ii[t]??Ii.float32}const Bi={"point-list":0,"line-list":1,"line-strip":3,"triangle-list":4,"triangle-strip":5};class Oi{constructor(t){this._geometryVaoHash=Object.create(null),this._renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this._renderer.renderableGC.addManagedHash(this,"_geometryVaoHash")}contextChange(){const t=this.gl=this._renderer.gl;if(!this._renderer.context.supports.vertexArrayObject)throw new Error("[PixiJS] Vertex Array Objects are not supported on this device");const e=this._renderer.context.extensions.vertexArrayObject;e&&(t.createVertexArray=()=>e.createVertexArrayOES(),t.bindVertexArray=t=>e.bindVertexArrayOES(t),t.deleteVertexArray=t=>e.deleteVertexArrayOES(t));const i=this._renderer.context.extensions.vertexAttribDivisorANGLE;i&&(t.drawArraysInstanced=(t,e,r,n)=>{i.drawArraysInstancedANGLE(t,e,r,n)},t.drawElementsInstanced=(t,e,r,n,s)=>{i.drawElementsInstancedANGLE(t,e,r,n,s)},t.vertexAttribDivisor=(t,e)=>i.vertexAttribDivisorANGLE(t,e)),this._activeGeometry=null,this._activeVao=null,this._geometryVaoHash=Object.create(null)}bind(t,e){const i=this.gl;this._activeGeometry=t;const r=this.getVao(t,e);this._activeVao!==r&&(this._activeVao=r,i.bindVertexArray(r)),this.updateBuffers()}resetState(){this.unbind()}updateBuffers(){const t=this._activeGeometry,e=this._renderer.buffer;for(let i=0;i<t.buffers.length;i++){const r=t.buffers[i];e.updateBuffer(r)}}checkCompatibility(t,e){const i=t.attributes,r=e._attributeData;for(const t in r)if(!i[t])throw new Error(`shader and geometry incompatible, geometry missing the "${t}" attribute`)}getSignature(t,e){const i=t.attributes,r=e._attributeData,n=["g",t.uid];for(const t in i)r[t]&&n.push(t,r[t].location);return n.join("-")}getVao(t,e){return this._geometryVaoHash[t.uid]?.[e._key]||this.initGeometryVao(t,e)}initGeometryVao(t,e,i=!0){const r=this._renderer.gl,n=this._renderer.buffer;this._renderer.shader._getProgramData(e),this.checkCompatibility(t,e);const s=this.getSignature(t,e);this._geometryVaoHash[t.uid]||(this._geometryVaoHash[t.uid]=Object.create(null),t.on("destroy",this.onGeometryDestroy,this));const o=this._geometryVaoHash[t.uid];let a=o[s];if(a)return o[e._key]=a,a;!function(t,e){for(const i in t.attributes){const r=t.attributes[i],n=e[i];n?(r.format??(r.format=n.format),r.offset??(r.offset=n.offset),r.instance??(r.instance=n.instance)):(0,w.R)(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`)}!function(t){const{buffers:e,attributes:i}=t,r={},n={};for(const t in e){const i=e[t];r[i.uid]=0,n[i.uid]=0}for(const t in i){const e=i[t];r[e.buffer.uid]+=(0,Ti.m)(e.format).stride}for(const t in i){const e=i[t];e.stride??(e.stride=r[e.buffer.uid]),e.start??(e.start=n[e.buffer.uid]),n[e.buffer.uid]+=(0,Ti.m)(e.format).stride}}(t)}(t,e._attributeData);const h=t.buffers;a=r.createVertexArray(),r.bindVertexArray(a);for(let t=0;t<h.length;t++){const e=h[t];n.bind(e)}return this.activateVao(t,e),o[e._key]=a,o[s]=a,r.bindVertexArray(null),a}onGeometryDestroy(t,e){const i=this._geometryVaoHash[t.uid],r=this.gl;if(i){if(e)for(const t in i)this._activeVao!==i[t]&&this.unbind(),r.deleteVertexArray(i[t]);this._geometryVaoHash[t.uid]=null}}destroyAll(t=!1){const e=this.gl;for(const i in this._geometryVaoHash){if(t)for(const t in this._geometryVaoHash[i]){const r=this._geometryVaoHash[i];this._activeVao!==r&&this.unbind(),e.deleteVertexArray(r[t])}this._geometryVaoHash[i]=null}}activateVao(t,e){const i=this._renderer.gl,r=this._renderer.buffer,n=t.attributes;t.indexBuffer&&r.bind(t.indexBuffer);let s=null;for(const t in n){const o=n[t],a=o.buffer,h=r.getGlBuffer(a),l=e._attributeData[t];if(l){s!==h&&(r.bind(a),s=h);const t=l.location;i.enableVertexAttribArray(t);const e=(0,Ti.m)(o.format),n=ki(o.format);if("int"===l.format?.substring(1,4)?i.vertexAttribIPointer(t,e.size,n,o.stride,o.offset):i.vertexAttribPointer(t,e.size,n,e.normalised,o.stride,o.offset),o.instance){if(!this.hasInstance)throw new Error("geometry error, GPU Instancing is not supported on this device");{const e=o.divisor??1;i.vertexAttribDivisor(t,e)}}}}}draw(t,e,i,r){const{gl:n}=this._renderer,s=this._activeGeometry,o=Bi[t||s.topology];if(r??(r=s.instanceCount),s.indexBuffer){const t=s.indexBuffer.data.BYTES_PER_ELEMENT,a=2===t?n.UNSIGNED_SHORT:n.UNSIGNED_INT;r>1?n.drawElementsInstanced(o,e||s.indexBuffer.data.length,a,(i||0)*t,r):n.drawElements(o,e||s.indexBuffer.data.length,a,(i||0)*t)}else r>1?n.drawArraysInstanced(o,i||0,e||s.getSize(),r):n.drawArrays(o,i||0,e||s.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this._renderer=null,this.gl=null,this._activeVao=null,this._activeGeometry=null}}Oi.extension={type:[r.Ag.WebGLSystem],name:"geometry"};var Li=i(8392);const Ui=new Li.V({attributes:{aPosition:[-1,-1,3,-1,-1,3]}}),Di=class t{constructor(t){this.useBackBuffer=!1,this._useBackBufferThisRender=!1,this._renderer=t}init(e={}){const{useBackBuffer:i,antialias:r}={...t.defaultOptions,...e};this.useBackBuffer=i,this._antialias=r,this._renderer.context.supports.msaa||((0,w.R)("antialiasing, is not supported on when using the back buffer"),this._antialias=!1),this._state=Ut.U.for2d();const n=new _e.M({vertex:"\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }",fragment:"\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }",name:"big-triangle"});this._bigTriangleShader=new It.M({glProgram:n,resources:{uTexture:c.g.WHITE.source}})}renderStart(t){const e=this._renderer.renderTarget.getRenderTarget(t.target);if(this._useBackBufferThisRender=this.useBackBuffer&&!!e.isRoot,this._useBackBufferThisRender){const e=this._renderer.renderTarget.getRenderTarget(t.target);this._targetTexture=e.colorTexture,t.target=this._getBackBufferTexture(e.colorTexture)}}renderEnd(){this._presentBackBuffer()}_presentBackBuffer(){const t=this._renderer;t.renderTarget.finishRenderPass(),this._useBackBufferThisRender&&(t.renderTarget.bind(this._targetTexture,!1),this._bigTriangleShader.resources.uTexture=this._backBufferTexture.source,t.encoder.draw({geometry:Ui,shader:this._bigTriangleShader,state:this._state}))}_getBackBufferTexture(t){return this._backBufferTexture=this._backBufferTexture||new c.g({source:new We.v({width:t.width,height:t.height,resolution:t._resolution,antialias:this._antialias})}),this._backBufferTexture.source.resize(t.width,t.height,t._resolution),this._backBufferTexture}destroy(){this._backBufferTexture&&(this._backBufferTexture.destroy(),this._backBufferTexture=null)}};Di.extension={type:[r.Ag.WebGLSystem],name:"backBuffer",priority:1},Di.defaultOptions={useBackBuffer:!1};let Ni=Di;class Fi{constructor(t){this._colorMaskCache=15,this._renderer=t}setMask(t){this._colorMaskCache!==t&&(this._colorMaskCache=t,this._renderer.gl.colorMask(!!(8&t),!!(4&t),!!(2&t),!!(1&t)))}}Fi.extension={type:[r.Ag.WebGLSystem],name:"colorMask"};class zi{constructor(t){this.commandFinished=Promise.resolve(),this._renderer=t}setGeometry(t,e){this._renderer.geometry.bind(t,e.glProgram)}finishRenderPass(){}draw(t){const e=this._renderer,{geometry:i,shader:r,state:n,skipSync:s,topology:o,size:a,start:h,instanceCount:l}=t;e.shader.bind(r,s),e.geometry.bind(i,e.shader._activeProgram),n&&e.state.set(n),e.geometry.draw(o,a,h,l??i.instanceCount)}destroy(){this._renderer=null}}zi.extension={type:[r.Ag.WebGLSystem],name:"encoder"};const Gi=[];Gi[Oe.K.NONE]=void 0,Gi[Oe.K.DISABLED]={stencilWriteMask:0,stencilReadMask:0},Gi[Oe.K.RENDERING_MASK_ADD]={stencilFront:{compare:"equal",passOp:"increment-clamp"},stencilBack:{compare:"equal",passOp:"increment-clamp"}},Gi[Oe.K.RENDERING_MASK_REMOVE]={stencilFront:{compare:"equal",passOp:"decrement-clamp"},stencilBack:{compare:"equal",passOp:"decrement-clamp"}},Gi[Oe.K.MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"equal",passOp:"keep"},stencilBack:{compare:"equal",passOp:"keep"}},Gi[Oe.K.INVERSE_MASK_ACTIVE]={stencilWriteMask:0,stencilFront:{compare:"not-equal",passOp:"replace"},stencilBack:{compare:"not-equal",passOp:"replace"}};class ji{constructor(t){this._stencilCache={enabled:!1,stencilReference:0,stencilMode:Oe.K.NONE},this._renderTargetStencilState=Object.create(null),t.renderTarget.onRenderTargetChange.add(this)}contextChange(t){this._gl=t,this._comparisonFuncMapping={always:t.ALWAYS,never:t.NEVER,equal:t.EQUAL,"not-equal":t.NOTEQUAL,less:t.LESS,"less-equal":t.LEQUAL,greater:t.GREATER,"greater-equal":t.GEQUAL},this._stencilOpsMapping={keep:t.KEEP,zero:t.ZERO,replace:t.REPLACE,invert:t.INVERT,"increment-clamp":t.INCR,"decrement-clamp":t.DECR,"increment-wrap":t.INCR_WRAP,"decrement-wrap":t.DECR_WRAP},this._stencilCache.enabled=!1,this._stencilCache.stencilMode=Oe.K.NONE,this._stencilCache.stencilReference=0}onRenderTargetChange(t){if(this._activeRenderTarget===t)return;this._activeRenderTarget=t;let e=this._renderTargetStencilState[t.uid];e||(e=this._renderTargetStencilState[t.uid]={stencilMode:Oe.K.DISABLED,stencilReference:0}),this.setStencilMode(e.stencilMode,e.stencilReference)}setStencilMode(t,e){const i=this._renderTargetStencilState[this._activeRenderTarget.uid],r=this._gl,n=Gi[t],s=this._stencilCache;i.stencilMode=t,i.stencilReference=e,t!==Oe.K.DISABLED?(this._stencilCache.enabled||(this._stencilCache.enabled=!0,r.enable(r.STENCIL_TEST)),t===s.stencilMode&&s.stencilReference===e||(s.stencilMode=t,s.stencilReference=e,r.stencilFunc(this._comparisonFuncMapping[n.stencilBack.compare],e,255),r.stencilOp(r.KEEP,r.KEEP,this._stencilOpsMapping[n.stencilBack.passOp]))):this._stencilCache.enabled&&(this._stencilCache.enabled=!1,r.disable(r.STENCIL_TEST))}}ji.extension={type:[r.Ag.WebGLSystem],name:"stencil"};var Vi=i(949);class Hi{constructor(t){this._syncFunctionHash=Object.create(null),this._adaptor=t,this._systemCheck()}_systemCheck(){if(!jt())throw new Error("Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.")}ensureUniformGroup(t){const e=this.getUniformGroupData(t);t.buffer||(t.buffer=new Vi.h({data:new Float32Array(e.layout.size/4),usage:xi.S.UNIFORM|xi.S.COPY_DST}))}getUniformGroupData(t){return this._syncFunctionHash[t._signature]||this._initUniformGroup(t)}_initUniformGroup(t){const e=t._signature;let i=this._syncFunctionHash[e];if(!i){const r=Object.keys(t.uniformStructures).map(e=>t.uniformStructures[e]),n=this._adaptor.createUboElements(r),s=this._generateUboSync(n.uboElements);i=this._syncFunctionHash[e]={layout:n,syncFunction:s}}return this._syncFunctionHash[e]}_generateUboSync(t){return this._adaptor.generateUboSync(t)}syncUniformGroup(t,e,i){const r=this.getUniformGroupData(t);t.buffer||(t.buffer=new Vi.h({data:new Float32Array(r.layout.size/4),usage:xi.S.UNIFORM|xi.S.COPY_DST}));let n=null;return e||(e=t.buffer.data,n=t.buffer.dataInt32),i||(i=0),r.syncFunction(t.uniforms,e,n,i),!0}updateUniformGroup(t){if(t.isStatic&&!t._dirtyId)return!1;t._dirtyId=0;const e=this.syncUniformGroup(t);return t.buffer.update(),e}destroy(){this._syncFunctionHash=null}}const Wi={f32:4,i32:4,"vec2<f32>":8,"vec3<f32>":12,"vec4<f32>":16,"vec2<i32>":8,"vec3<i32>":12,"vec4<i32>":16,"mat2x2<f32>":32,"mat3x3<f32>":48,"mat4x4<f32>":64};function Xi(t){const e=t.map(t=>({data:t,offset:0,size:0}));let i=0,r=0;for(let t=0;t<e.length;t++){const n=e[t];if(i=Wi[n.data.type],!i)throw new Error(`Unknown type ${n.data.type}`);n.data.size>1&&(i=Math.max(i,16)*n.data.size);const s=12===i?16:i;n.size=i;const o=r%16;r+=o>0&&16-o<s?(16-o)%16:(i-o%i)%i,n.offset=r,r+=i}return r=16*Math.ceil(r/16),{uboElements:e,size:r}}const qi=[{type:"mat3x3<f32>",test:t=>void 0!==t.value.a,ubo:"\n            var matrix = uv[name].toArray(true);\n            data[offset] = matrix[0];\n            data[offset + 1] = matrix[1];\n            data[offset + 2] = matrix[2];\n            data[offset + 4] = matrix[3];\n            data[offset + 5] = matrix[4];\n            data[offset + 6] = matrix[5];\n            data[offset + 8] = matrix[6];\n            data[offset + 9] = matrix[7];\n            data[offset + 10] = matrix[8];\n        ",uniform:"\n            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));\n        "},{type:"vec4<f32>",test:t=>"vec4<f32>"===t.type&&1===t.size&&void 0!==t.value.width,ubo:"\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n            data[offset + 2] = v.width;\n            data[offset + 3] = v.height;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                cv[2] = v.width;\n                cv[3] = v.height;\n                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);\n            }\n        "},{type:"vec2<f32>",test:t=>"vec2<f32>"===t.type&&1===t.size&&void 0!==t.value.x,ubo:"\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                gl.uniform2f(ud[name].location, v.x, v.y);\n            }\n        "},{type:"vec4<f32>",test:t=>"vec4<f32>"===t.type&&1===t.size&&void 0!==t.value.red,ubo:"\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n            data[offset + 3] = v.alpha;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                cv[3] = v.alpha;\n                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);\n            }\n        "},{type:"vec3<f32>",test:t=>"vec3<f32>"===t.type&&1===t.size&&void 0!==t.value.red,ubo:"\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n        ",uniform:"\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);\n            }\n        "}];function Yi(t,e){return`\n        for (let i = 0; i < ${t*e}; i++) {\n            data[offset + (((i / ${t})|0) * 4) + (i % ${t})] = v[i];\n        }\n    `}const Zi={f32:"\n        data[offset] = v;",i32:"\n        dataInt32[offset] = v;","vec2<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];","vec3<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];","vec4<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];","vec2<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];","vec3<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];","vec4<i32>":"\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];\n        dataInt32[offset + 3] = v[3];","mat2x2<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 4] = v[2];\n        data[offset + 5] = v[3];","mat3x3<f32>":"\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];","mat4x4<f32>":"\n        for (let i = 0; i < 16; i++) {\n            data[offset + i] = v[i];\n        }","mat3x2<f32>":Yi(3,2),"mat4x2<f32>":Yi(4,2),"mat2x3<f32>":Yi(2,3),"mat4x3<f32>":Yi(4,3),"mat2x4<f32>":Yi(2,4),"mat3x4<f32>":Yi(3,4)};function Ki(t,e){const i=Math.max(Wi[t.data.type]/16,1),r=t.data.value.length/t.data.size,n=(4-r%4)%4,s=t.data.type.indexOf("i32")>=0?"dataInt32":"data";return`\n        v = uv.${t.data.name};\n        offset += ${e};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${t.data.size*i}; i++)\n        {\n            for(var j = 0; j < ${r}; j++)\n            {\n                ${s}[arrayOffset++] = v[t++];\n            }\n            ${0!==n?`arrayOffset += ${n};`:""}\n        }\n    `}function $i(t){return function(t,e,i,r){const n=["\n        var v = null;\n        var v2 = null;\n        var t = 0;\n        var index = 0;\n        var name = null;\n        var arrayOffset = null;\n    "];let s=0;for(let e=0;e<t.length;e++){const o=t[e],a=o.data.name;let h=!1,l=0;for(let t=0;t<qi.length;t++)if(qi[t].test(o.data)){l=o.offset/4,n.push(`name = "${a}";`,`offset += ${l-s};`,qi[t].uboStd40||qi[t].ubo),h=!0;break}if(!h)if(o.data.size>1)l=o.offset/4,n.push(i(o,l-s));else{const t=r[o.data.type];l=o.offset/4,n.push(`\n                    v = uv.${a};\n                    offset += ${l-s};\n                    ${t};\n                `)}s=l}const o=n.join("\n");return new Function("uv","data","dataInt32","offset",o)}(t,0,Ki,Zi)}class Qi extends Hi{constructor(){super({createUboElements:Xi,generateUboSync:$i})}}Qi.extension={type:[r.Ag.WebGLSystem],name:"ubo"};class Ji{constructor(t){this.rootViewPort=new u.M,this.viewport=new u.M,this.onRenderTargetChange=new Wt("onRenderTargetChange"),this.projectionMatrix=new wt.u,this.defaultClearColor=[0,0,0,0],this._renderSurfaceToRenderTargetHash=new Map,this._gpuRenderTargetHash=Object.create(null),this._renderTargetStack=[],this._renderer=t,t.renderableGC.addManagedHash(this,"_gpuRenderTargetHash")}finishRenderPass(){this.adaptor.finishRenderPass(this.renderTarget)}renderStart({target:t,clear:e,clearColor:i,frame:r}){this._renderTargetStack.length=0,this.push(t,e,i,r),this.rootViewPort.copyFrom(this.viewport),this.rootRenderTarget=this.renderTarget,this.renderingToScreen=function(t){const e=t.colorTexture.source.resource;return globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement&&document.body.contains(e)}(this.rootRenderTarget),this.adaptor.prerender?.(this.rootRenderTarget)}postrender(){this.adaptor.postrender?.(this.rootRenderTarget)}bind(t,e=!0,i,r){const n=this.getRenderTarget(t),s=this.renderTarget!==n;this.renderTarget=n,this.renderSurface=t;const o=this.getGpuRenderTarget(n);n.pixelWidth===o.width&&n.pixelHeight===o.height||(this.adaptor.resizeGpuRenderTarget(n),o.width=n.pixelWidth,o.height=n.pixelHeight);const a=n.colorTexture,h=this.viewport,l=a.pixelWidth,u=a.pixelHeight;if(!r&&t instanceof c.g&&(r=t.frame),r){const t=a._resolution;h.x=r.x*t+.5|0,h.y=r.y*t+.5|0,h.width=r.width*t+.5|0,h.height=r.height*t+.5|0}else h.x=0,h.y=0,h.width=l,h.height=u;return function(t,e,i,r,n,s){const o=s?1:-1;t.identity(),t.a=1/r*2,t.d=o*(1/n*2),t.tx=-1-0*t.a,t.ty=-o-0*t.d}(this.projectionMatrix,0,0,h.width/a.resolution,h.height/a.resolution,!n.isRoot),this.adaptor.startRenderPass(n,e,i,h),s&&this.onRenderTargetChange.emit(n),n}clear(t,e=Ht.ALL,i){e&&(t&&(t=this.getRenderTarget(t)),this.adaptor.clear(t||this.renderTarget,e,i,this.viewport))}contextChange(){this._gpuRenderTargetHash=Object.create(null)}push(t,e=Ht.ALL,i,r){const n=this.bind(t,e,i,r);return this._renderTargetStack.push({renderTarget:n,frame:r}),n}pop(){this._renderTargetStack.pop();const t=this._renderTargetStack[this._renderTargetStack.length-1];this.bind(t.renderTarget,!1,null,t.frame)}getRenderTarget(t){return t.isTexture&&(t=t.source),this._renderSurfaceToRenderTargetHash.get(t)??this._initRenderTarget(t)}copyToTexture(t,e,i,r,n){i.x<0&&(r.width+=i.x,n.x-=i.x,i.x=0),i.y<0&&(r.height+=i.y,n.y-=i.y,i.y=0);const{pixelWidth:s,pixelHeight:o}=t;return r.width=Math.min(r.width,s-i.x),r.height=Math.min(r.height,o-i.y),this.adaptor.copyToTexture(t,e,i,r,n)}ensureDepthStencil(){this.renderTarget.stencil||(this.renderTarget.stencil=!0,this.adaptor.startRenderPass(this.renderTarget,!1,null,this.viewport))}destroy(){this._renderer=null,this._renderSurfaceToRenderTargetHash.forEach((t,e)=>{t!==e&&t.destroy()}),this._renderSurfaceToRenderTargetHash.clear(),this._gpuRenderTargetHash=Object.create(null)}_initRenderTarget(t){let e=null;return mi.q.test(t)&&(t=vi(t).source),t instanceof pi?e=t:t instanceof We.v&&(e=new pi({colorTextures:[t]}),mi.q.test(t.source.resource)&&(e.isRoot=!0),t.once("destroy",()=>{e.destroy(),this._renderSurfaceToRenderTargetHash.delete(t);const i=this._gpuRenderTargetHash[e.uid];i&&(this._gpuRenderTargetHash[e.uid]=null,this.adaptor.destroyGpuRenderTarget(i))})),this._renderSurfaceToRenderTargetHash.set(t,e),e}getGpuRenderTarget(t){return this._gpuRenderTargetHash[t.uid]||(this._gpuRenderTargetHash[t.uid]=this.adaptor.initGpuRenderTarget(t))}resetState(){this.renderTarget=null,this.renderSurface=null}}class tr{constructor(){this.width=-1,this.height=-1,this.msaa=!1,this.msaaRenderBuffer=[]}}class er{constructor(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new u.M}init(t,e){this._renderer=t,this._renderTargetSystem=e,t.runners.contextChange.add(this)}contextChange(){this._clearColorCache=[0,0,0,0],this._viewPortCache=new u.M}copyToTexture(t,e,i,r,n){const s=this._renderTargetSystem,o=this._renderer,a=s.getGpuRenderTarget(t),h=o.gl;return this.finishRenderPass(t),h.bindFramebuffer(h.FRAMEBUFFER,a.resolveTargetFramebuffer),o.texture.bind(e,0),h.copyTexSubImage2D(h.TEXTURE_2D,0,n.x,n.y,i.x,i.y,r.width,r.height),e}startRenderPass(t,e=!0,i,r){const n=this._renderTargetSystem,s=t.colorTexture,o=n.getGpuRenderTarget(t);let a=r.y;t.isRoot&&(a=s.pixelHeight-r.height),t.colorTextures.forEach(t=>{this._renderer.texture.unbind(t)});const h=this._renderer.gl;h.bindFramebuffer(h.FRAMEBUFFER,o.framebuffer);const l=this._viewPortCache;l.x===r.x&&l.y===a&&l.width===r.width&&l.height===r.height||(l.x=r.x,l.y=a,l.width=r.width,l.height=r.height,h.viewport(r.x,a,r.width,r.height)),o.depthStencilRenderBuffer||!t.stencil&&!t.depth||this._initStencil(o),this.clear(t,e,i)}finishRenderPass(t){const e=this._renderTargetSystem.getGpuRenderTarget(t);if(!e.msaa)return;const i=this._renderer.gl;i.bindFramebuffer(i.FRAMEBUFFER,e.resolveTargetFramebuffer),i.bindFramebuffer(i.READ_FRAMEBUFFER,e.framebuffer),i.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,i.COLOR_BUFFER_BIT,i.NEAREST),i.bindFramebuffer(i.FRAMEBUFFER,e.framebuffer)}initGpuRenderTarget(t){const e=this._renderer,i=e.gl,r=new tr;return t.colorTexture.resource===e.canvas?(this._renderer.context.ensureCanvasSize(t.colorTexture.resource),r.framebuffer=null,r):(this._initColor(t,r),i.bindFramebuffer(i.FRAMEBUFFER,null),r)}destroyGpuRenderTarget(t){const e=this._renderer.gl;t.framebuffer&&(e.deleteFramebuffer(t.framebuffer),t.framebuffer=null),t.resolveTargetFramebuffer&&(e.deleteFramebuffer(t.resolveTargetFramebuffer),t.resolveTargetFramebuffer=null),t.depthStencilRenderBuffer&&(e.deleteRenderbuffer(t.depthStencilRenderBuffer),t.depthStencilRenderBuffer=null),t.msaaRenderBuffer.forEach(t=>{e.deleteRenderbuffer(t)}),t.msaaRenderBuffer=null}clear(t,e,i){if(!e)return;const r=this._renderTargetSystem;"boolean"==typeof e&&(e=e?Ht.ALL:Ht.NONE);const n=this._renderer.gl;if(e&Ht.COLOR){i??(i=r.defaultClearColor);const t=this._clearColorCache,e=i;t[0]===e[0]&&t[1]===e[1]&&t[2]===e[2]&&t[3]===e[3]||(t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],n.clearColor(e[0],e[1],e[2],e[3]))}n.clear(e)}resizeGpuRenderTarget(t){if(t.isRoot)return;const e=this._renderTargetSystem.getGpuRenderTarget(t);this._resizeColor(t,e),(t.stencil||t.depth)&&this._resizeStencil(e)}_initColor(t,e){const i=this._renderer,r=i.gl,n=r.createFramebuffer();if(e.resolveTargetFramebuffer=n,r.bindFramebuffer(r.FRAMEBUFFER,n),e.width=t.colorTexture.source.pixelWidth,e.height=t.colorTexture.source.pixelHeight,t.colorTextures.forEach((t,n)=>{const s=t.source;s.antialias&&(i.context.supports.msaa?e.msaa=!0:(0,w.R)("[RenderTexture] Antialiasing on textures is not supported in WebGL1")),i.texture.bindSource(s,0);const o=i.texture.getGlSource(s).texture;r.framebufferTexture2D(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+n,3553,o,0)}),e.msaa){const i=r.createFramebuffer();e.framebuffer=i,r.bindFramebuffer(r.FRAMEBUFFER,i),t.colorTextures.forEach((t,i)=>{const n=r.createRenderbuffer();e.msaaRenderBuffer[i]=n})}else e.framebuffer=n;this._resizeColor(t,e)}_resizeColor(t,e){const i=t.colorTexture.source;if(e.width=i.pixelWidth,e.height=i.pixelHeight,t.colorTextures.forEach((t,e)=>{0!==e&&t.source.resize(i.width,i.height,i._resolution)}),e.msaa){const i=this._renderer,r=i.gl,n=e.framebuffer;r.bindFramebuffer(r.FRAMEBUFFER,n),t.colorTextures.forEach((t,n)=>{const s=t.source;i.texture.bindSource(s,0);const o=i.texture.getGlSource(s).internalFormat,a=e.msaaRenderBuffer[n];r.bindRenderbuffer(r.RENDERBUFFER,a),r.renderbufferStorageMultisample(r.RENDERBUFFER,4,o,s.pixelWidth,s.pixelHeight),r.framebufferRenderbuffer(r.FRAMEBUFFER,r.COLOR_ATTACHMENT0+n,r.RENDERBUFFER,a)})}}_initStencil(t){if(null===t.framebuffer)return;const e=this._renderer.gl,i=e.createRenderbuffer();t.depthStencilRenderBuffer=i,e.bindRenderbuffer(e.RENDERBUFFER,i),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_STENCIL_ATTACHMENT,e.RENDERBUFFER,i),this._resizeStencil(t)}_resizeStencil(t){const e=this._renderer.gl;e.bindRenderbuffer(e.RENDERBUFFER,t.depthStencilRenderBuffer),t.msaa?e.renderbufferStorageMultisample(e.RENDERBUFFER,4,e.DEPTH24_STENCIL8,t.width,t.height):e.renderbufferStorage(e.RENDERBUFFER,2===this._renderer.context.webGLVersion?e.DEPTH24_STENCIL8:e.DEPTH_STENCIL,t.width,t.height)}prerender(t){const e=t.colorTexture.resource;this._renderer.context.multiView&&mi.q.test(e)&&this._renderer.context.ensureCanvasSize(e)}postrender(t){if(this._renderer.context.multiView&&mi.q.test(t.colorTexture.resource)){const e=this._renderer.context.canvas,i=t.colorTexture;i.context2D.drawImage(e,0,i.pixelHeight-e.height)}}}class ir extends Ji{constructor(t){super(t),this.adaptor=new er,this.adaptor.init(t,this)}}ir.extension={type:[r.Ag.WebGLSystem],name:"renderTarget"};class rr extends Xt.A{constructor({buffer:t,offset:e,size:i}){super(),this.uid=(0,di.L)("buffer"),this._resourceType="bufferResource",this._touched=0,this._resourceId=(0,di.L)("resource"),this._bufferResource=!0,this.destroyed=!1,this.buffer=t,this.offset=0|e,this.size=i,this.buffer.on("change",this.onBufferChange,this)}onBufferChange(){this._resourceId=(0,di.L)("resource"),this.emit("change",this)}destroy(t=!1){this.destroyed=!0,t&&this.buffer.destroy(),this.emit("change",this),this.buffer=null}}class nr{constructor(t,e){this.program=t,this.uniformData=e,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBlockBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBlockBindings=null,this.program=null}}function sr(t,e,i){const r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}function or(t){const e=new Array(t);for(let t=0;t<e.length;t++)e[t]=!1;return e}function ar(t,e){switch(t){case"float":case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return or(2*e);case"bvec3":return or(3*e);case"bvec4":return or(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}let hr=null;const lr={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"},ur={float:"float32",vec2:"float32x2",vec3:"float32x3",vec4:"float32x4",int:"sint32",ivec2:"sint32x2",ivec3:"sint32x3",ivec4:"sint32x4",uint:"uint32",uvec2:"uint32x2",uvec3:"uint32x3",uvec4:"uint32x4",bool:"uint32",bvec2:"uint32x2",bvec3:"uint32x3",bvec4:"uint32x4"};function cr(t,e){if(!hr){const e=Object.keys(lr);hr={};for(let i=0;i<e.length;++i){const r=e[i];hr[t[r]]=lr[r]}}return hr[e]}function dr(t,e){const i=cr(t,e);return ur[i]||"float32"}var fr=i(6763);function pr(t,e){const i=t.getShaderSource(e).split("\n").map((t,e)=>`${e}: ${t}`),r=t.getShaderInfoLog(e),n=r.split("\n"),s={},o=n.map(t=>parseFloat(t.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(t=>!(!t||s[t]||(s[t]=!0,0))),a=[""];o.forEach(t=>{i[t-1]=`%c${i[t-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const h=i.join("\n");a[0]=h,fr.error(r),fr.groupCollapsed("click to view full shader code"),fr.warn(...a),fr.groupEnd()}const mr={textureCount:0,blockIndex:0};class gr{constructor(t){this._activeProgram=null,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_programDataHash")}contextChange(t){this._gl=t,this._programDataHash=Object.create(null),this._shaderSyncFunctions=Object.create(null),this._activeProgram=null,this.maxTextures=(0,St.a)()}bind(t,e){if(this._setProgram(t.glProgram),e)return;mr.textureCount=0,mr.blockIndex=0;let i=this._shaderSyncFunctions[t.glProgram._key];i||(i=this._shaderSyncFunctions[t.glProgram._key]=this._generateShaderSync(t,this)),this._renderer.buffer.nextBindBase(!!t.glProgram.transformFeedbackVaryings),i(this._renderer,t,mr)}updateUniformGroup(t){this._renderer.uniformGroup.updateUniformGroup(t,this._activeProgram,mr)}bindUniformBlock(t,e,i=0){const r=this._renderer.buffer,n=this._getProgramData(this._activeProgram),s=t._bufferResource;s||this._renderer.ubo.updateUniformGroup(t);const o=t.buffer,a=r.updateBuffer(o),h=r.freeLocationForBufferBase(a);if(s){const{offset:e,size:i}=t;0===e&&i===o.data.byteLength?r.bindBufferBase(a,h):r.bindBufferRange(a,h,e)}else r.getLastBindBaseLocation(a)!==h&&r.bindBufferBase(a,h);const l=this._activeProgram._uniformBlockData[e].index;n.uniformBlockBindings[i]!==h&&(n.uniformBlockBindings[i]=h,this._renderer.gl.uniformBlockBinding(n.program,l,h))}_setProgram(t){if(this._activeProgram===t)return;this._activeProgram=t;const e=this._getProgramData(t);this._gl.useProgram(e.program)}_getProgramData(t){return this._programDataHash[t._key]||this._createProgramData(t)}_createProgramData(t){const e=t._key;return this._programDataHash[e]=function(t,e){const i=sr(t,t.VERTEX_SHADER,e.vertex),r=sr(t,t.FRAGMENT_SHADER,e.fragment),n=t.createProgram();t.attachShader(n,i),t.attachShader(n,r);const s=e.transformFeedbackVaryings;s&&("function"!=typeof t.transformFeedbackVaryings?(0,w.R)("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(n,s.names,"separate"===s.bufferMode?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(n),t.getProgramParameter(n,t.LINK_STATUS)||function(t,e,i,r){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(i,t.COMPILE_STATUS)||pr(t,i),t.getShaderParameter(r,t.COMPILE_STATUS)||pr(t,r),fr.error("PixiJS Error: Could not initialize shader."),""!==t.getProgramInfoLog(e)&&fr.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}(t,n,i,r),e._attributeData=function(t,e,i=!1){const r={},n=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let i=0;i<n;i++){const n=e.getActiveAttrib(t,i);if(n.name.startsWith("gl_"))continue;const s=dr(e,n.type);r[n.name]={location:0,format:s,stride:(0,Ti.m)(s).stride,offset:0,instance:!1,start:0}}const s=Object.keys(r);if(i){s.sort((t,e)=>t>e?1:-1);for(let i=0;i<s.length;i++)r[s[i]].location=i,e.bindAttribLocation(t,i,s[i]);e.linkProgram(t)}else for(let i=0;i<s.length;i++)r[s[i]].location=e.getAttribLocation(t,s[i]);return r}(n,t,!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertex)),e._uniformData=function(t,e){const i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let n=0;n<r;n++){const r=e.getActiveUniform(t,n),s=r.name.replace(/\[.*?\]$/,""),o=!!r.name.match(/\[.*?\]$/),a=cr(e,r.type);i[s]={name:s,index:n,type:a,size:r.size,isArray:o,value:ar(a,r.size)}}return i}(n,t),e._uniformBlockData=function(t,e){if(!e.ACTIVE_UNIFORM_BLOCKS)return{};const i={},r=e.getProgramParameter(t,e.ACTIVE_UNIFORM_BLOCKS);for(let n=0;n<r;n++){const r=e.getActiveUniformBlockName(t,n),s=e.getUniformBlockIndex(t,r),o=e.getActiveUniformBlockParameter(t,n,e.UNIFORM_BLOCK_DATA_SIZE);i[r]={name:r,index:s,size:o}}return i}(n,t),t.deleteShader(i),t.deleteShader(r);const o={};for(const i in e._uniformData){const r=e._uniformData[i];o[i]={location:t.getUniformLocation(n,i),value:ar(r.type,r.size)}}return new nr(n,o)}(this._gl,t),this._programDataHash[e]}destroy(){for(const t of Object.keys(this._programDataHash))this._programDataHash[t].destroy(),this._programDataHash[t]=null;this._programDataHash=null}_generateShaderSync(t,e){return function(t,e){const i=[],r=["\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    "];let n=!1,s=0;const o=e._getProgramData(t.glProgram);for(const a in t.groups){const h=t.groups[a];i.push(`\n            resources = g[${a}].resources;\n        `);for(const l in h.resources){const u=h.resources[l];if(u instanceof kt.k)if(u.ubo){const e=t._uniformBindMap[a][Number(l)];i.push(`\n                        sS.bindUniformBlock(\n                            resources[${l}],\n                            '${e}',\n                            ${t.glProgram._uniformBlockData[e].index}\n                        );\n                    `)}else i.push(`\n                        ugS.updateUniformGroup(resources[${l}], p, sD);\n                    `);else if(u instanceof rr){const e=t._uniformBindMap[a][Number(l)];i.push(`\n                    sS.bindUniformBlock(\n                        resources[${l}],\n                        '${e}',\n                        ${t.glProgram._uniformBlockData[e].index}\n                    );\n                `)}else if(u instanceof We.v){const h=t._uniformBindMap[a][l],u=o.uniformData[h];u&&(n||(n=!0,r.push("\n                        var tS = r.texture;\n                        ")),e._gl.uniform1i(u.location,s),i.push(`\n                        tS.bind(resources[${l}], ${s});\n                    `),s++)}}}const a=[...r,...i].join("\n");return new Function("r","s","sD",a)}(t,e)}resetState(){this._activeProgram=null}}gr.extension={type:[r.Ag.WebGLSystem],name:"shader"};const vr={f32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }","vec2<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }","vec3<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }","vec4<f32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }",i32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }","vec2<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }","vec3<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }","vec4<i32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }",u32:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }","vec2<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }","vec3<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }","vec4<u32>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }",bool:"if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }","vec2<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }","vec3<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }","vec4<bool>":"if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);"},yr={f32:"gl.uniform1fv(location, v);","vec2<f32>":"gl.uniform2fv(location, v);","vec3<f32>":"gl.uniform3fv(location, v);","vec4<f32>":"gl.uniform4fv(location, v);","mat2x2<f32>":"gl.uniformMatrix2fv(location, false, v);","mat3x3<f32>":"gl.uniformMatrix3fv(location, false, v);","mat4x4<f32>":"gl.uniformMatrix4fv(location, false, v);",i32:"gl.uniform1iv(location, v);","vec2<i32>":"gl.uniform2iv(location, v);","vec3<i32>":"gl.uniform3iv(location, v);","vec4<i32>":"gl.uniform4iv(location, v);",u32:"gl.uniform1iv(location, v);","vec2<u32>":"gl.uniform2iv(location, v);","vec3<u32>":"gl.uniform3iv(location, v);","vec4<u32>":"gl.uniform4iv(location, v);",bool:"gl.uniform1iv(location, v);","vec2<bool>":"gl.uniform2iv(location, v);","vec3<bool>":"gl.uniform3iv(location, v);","vec4<bool>":"gl.uniform4iv(location, v);"};class br{constructor(t){this._cache={},this._uniformGroupSyncHash={},this._renderer=t,this.gl=null,this._cache={}}contextChange(t){this.gl=t}updateUniformGroup(t,e,i){const r=this._renderer.shader._getProgramData(e);t.isStatic&&t._dirtyId===r.uniformDirtyGroups[t.uid]||(r.uniformDirtyGroups[t.uid]=t._dirtyId,this._getUniformSyncFunction(t,e)(r.uniformData,t.uniforms,this._renderer,i))}_getUniformSyncFunction(t,e){return this._uniformGroupSyncHash[t._signature]?.[e._key]||this._createUniformSyncFunction(t,e)}_createUniformSyncFunction(t,e){const i=this._uniformGroupSyncHash[t._signature]||(this._uniformGroupSyncHash[t._signature]={}),r=this._getSignature(t,e._uniformData,"u");return this._cache[r]||(this._cache[r]=this._generateUniformsSync(t,e._uniformData)),i[e._key]=this._cache[r],i[e._key]}_generateUniformsSync(t,e){return function(t,e){const i=["\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    "];for(const r in t.uniforms){if(!e[r]){t.uniforms[r]instanceof kt.k?t.uniforms[r].ubo?i.push(`\n                        renderer.shader.bindUniformBlock(uv.${r}, "${r}");\n                    `):i.push(`\n                        renderer.shader.updateUniformGroup(uv.${r});\n                    `):t.uniforms[r]instanceof rr&&i.push(`\n                        renderer.shader.bindBufferResource(uv.${r}, "${r}");\n                    `);continue}const n=t.uniformStructures[r];let s=!1;for(let t=0;t<qi.length;t++){const e=qi[t];if(n.type===e.type&&e.test(n)){i.push(`name = "${r}";`,qi[t].uniform),s=!0;break}}if(!s){const t=(1===n.size?vr:yr)[n.type].replace("location",`ud["${r}"].location`);i.push(`\n            cu = ud["${r}"];\n            cv = cu.value;\n            v = uv["${r}"];\n            ${t};`)}}return new Function("ud","uv","renderer","syncData",i.join("\n"))}(t,e)}_getSignature(t,e,i){const r=t.uniforms,n=[`${i}-`];for(const t in r)n.push(t),e[t]&&n.push(e[t].type);return n.join("-")}destroy(){this._renderer=null,this._cache=null}}br.extension={type:[r.Ag.WebGLSystem],name:"uniformGroup"};const _r=class t{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode="none",this._blendEq=!1,this.map=[],this.map[0]=this.setBlend,this.map[1]=this.setOffset,this.map[2]=this.setCullFace,this.map[3]=this.setDepthTest,this.map[4]=this.setFrontFace,this.map[5]=this.setDepthMask,this.checks=[],this.defaultState=Ut.U.for2d()}contextChange(t){this.gl=t,this.blendModesMap=function(t){const e={};if(e.normal=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e.add=[t.ONE,t.ONE],e.multiply=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.screen=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.none=[0,0],e["normal-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e["add-npm"]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e["screen-npm"]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e.erase=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],t instanceof h.e.get().getWebGLRenderingContext()){const i=t.getExtension("EXT_blend_minmax");i&&(e.min=[t.ONE,t.ONE,t.ONE,t.ONE,i.MIN_EXT,i.MIN_EXT],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,i.MAX_EXT,i.MAX_EXT])}else e.min=[t.ONE,t.ONE,t.ONE,t.ONE,t.MIN,t.MIN],e.max=[t.ONE,t.ONE,t.ONE,t.ONE,t.MAX,t.MAX];return e}(t),this.resetState()}set(t){if(t||(t=this.defaultState),this.stateId!==t.data){let e=this.stateId^t.data,i=0;for(;e;)1&e&&this.map[i].call(this,!!(t.data&1<<i)),e>>=1,i++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t||(t=this.defaultState);for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(e){this._updateCheck(t._checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this._updateCheck(t._checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(this.blendModesMap[t]||(t="normal"),t===this.blendMode)return;this.blendMode=t;const e=this.blendModesMap[t],i=this.gl;2===e.length?i.blendFunc(e[0],e[1]):i.blendFuncSeparate(e[0],e[1],e[2],e[3]),6===e.length?(this._blendEq=!0,i.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}resetState(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode="",this.setBlendMode("normal")}_updateCheck(t,e){const i=this.checks.indexOf(t);e&&-1===i?this.checks.push(t):e||-1===i||this.checks.splice(i,1)}static _checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static _checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null,this.checks.length=0}};_r.extension={type:[r.Ag.WebGLSystem],name:"state"};let xr=_r;class wr{constructor(t){this.target=Pi.TEXTURE_2D,this.texture=t,this.width=-1,this.height=-1,this.type=Ci.UNSIGNED_BYTE,this.internalFormat=Ri.RGBA,this.format=Ri.RGBA,this.samplerType=0}}const Mr={id:"buffer",upload(t,e,i){e.width===t.width||e.height===t.height?i.texSubImage2D(i.TEXTURE_2D,0,0,0,t.width,t.height,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,t.width,t.height,0,e.format,e.type,t.resource),e.width=t.width,e.height=t.height}},Sr={"bc1-rgba-unorm":!0,"bc1-rgba-unorm-srgb":!0,"bc2-rgba-unorm":!0,"bc2-rgba-unorm-srgb":!0,"bc3-rgba-unorm":!0,"bc3-rgba-unorm-srgb":!0,"bc4-r-unorm":!0,"bc4-r-snorm":!0,"bc5-rg-unorm":!0,"bc5-rg-snorm":!0,"bc6h-rgb-ufloat":!0,"bc6h-rgb-float":!0,"bc7-rgba-unorm":!0,"bc7-rgba-unorm-srgb":!0,"etc2-rgb8unorm":!0,"etc2-rgb8unorm-srgb":!0,"etc2-rgb8a1unorm":!0,"etc2-rgb8a1unorm-srgb":!0,"etc2-rgba8unorm":!0,"etc2-rgba8unorm-srgb":!0,"eac-r11unorm":!0,"eac-r11snorm":!0,"eac-rg11unorm":!0,"eac-rg11snorm":!0,"astc-4x4-unorm":!0,"astc-4x4-unorm-srgb":!0,"astc-5x4-unorm":!0,"astc-5x4-unorm-srgb":!0,"astc-5x5-unorm":!0,"astc-5x5-unorm-srgb":!0,"astc-6x5-unorm":!0,"astc-6x5-unorm-srgb":!0,"astc-6x6-unorm":!0,"astc-6x6-unorm-srgb":!0,"astc-8x5-unorm":!0,"astc-8x5-unorm-srgb":!0,"astc-8x6-unorm":!0,"astc-8x6-unorm-srgb":!0,"astc-8x8-unorm":!0,"astc-8x8-unorm-srgb":!0,"astc-10x5-unorm":!0,"astc-10x5-unorm-srgb":!0,"astc-10x6-unorm":!0,"astc-10x6-unorm-srgb":!0,"astc-10x8-unorm":!0,"astc-10x8-unorm-srgb":!0,"astc-10x10-unorm":!0,"astc-10x10-unorm-srgb":!0,"astc-12x10-unorm":!0,"astc-12x10-unorm-srgb":!0,"astc-12x12-unorm":!0,"astc-12x12-unorm-srgb":!0},Ar={id:"compressed",upload(t,e,i){i.pixelStorei(i.UNPACK_ALIGNMENT,4);let r=t.pixelWidth,n=t.pixelHeight;const s=!!Sr[t.format];for(let o=0;o<t.resource.length;o++){const a=t.resource[o];s?i.compressedTexImage2D(i.TEXTURE_2D,o,e.internalFormat,r,n,0,a):i.texImage2D(i.TEXTURE_2D,o,e.internalFormat,r,n,0,e.format,e.type,a),r=Math.max(r>>1,1),n=Math.max(n>>1,1)}}},Er={id:"image",upload(t,e,i,r){const n=e.width,s=e.height,o=t.pixelWidth,a=t.pixelHeight,h=t.resourceWidth,l=t.resourceHeight;h<o||l<a?(n===o&&s===a||i.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,null),2===r?i.texSubImage2D(i.TEXTURE_2D,0,0,0,h,l,e.format,e.type,t.resource):i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource)):n===o&&s===a?i.texSubImage2D(i.TEXTURE_2D,0,0,0,e.format,e.type,t.resource):2===r?i.texImage2D(e.target,0,e.internalFormat,o,a,0,e.format,e.type,t.resource):i.texImage2D(e.target,0,e.internalFormat,e.format,e.type,t.resource),e.width=o,e.height=a}},Tr={id:"video",upload(t,e,i,r){t.isValid?Er.upload(t,e,i,r):i.texImage2D(e.target,0,e.internalFormat,1,1,0,e.format,e.type,null)}},Rr={linear:9729,nearest:9728},Pr={linear:{linear:9987,nearest:9985},nearest:{linear:9986,nearest:9984}},Cr={"clamp-to-edge":33071,repeat:10497,"mirror-repeat":33648},Ir={never:512,less:513,equal:514,"less-equal":515,greater:516,"not-equal":517,"greater-equal":518,always:519};function kr(t,e,i,r,n,s,o,a){const h=s;if(!a||"repeat"!==t.addressModeU||"repeat"!==t.addressModeV||"repeat"!==t.addressModeW){const i=Cr[o?"clamp-to-edge":t.addressModeU],r=Cr[o?"clamp-to-edge":t.addressModeV],s=Cr[o?"clamp-to-edge":t.addressModeW];e[n](h,e.TEXTURE_WRAP_S,i),e[n](h,e.TEXTURE_WRAP_T,r),e.TEXTURE_WRAP_R&&e[n](h,e.TEXTURE_WRAP_R,s)}if(a&&"linear"===t.magFilter||e[n](h,e.TEXTURE_MAG_FILTER,Rr[t.magFilter]),i){if(!a||"linear"!==t.mipmapFilter){const i=Pr[t.minFilter][t.mipmapFilter];e[n](h,e.TEXTURE_MIN_FILTER,i)}}else e[n](h,e.TEXTURE_MIN_FILTER,Rr[t.minFilter]);if(r&&t.maxAnisotropy>1){const i=Math.min(t.maxAnisotropy,e.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));e[n](h,r.TEXTURE_MAX_ANISOTROPY_EXT,i)}t.compare&&e[n](h,e.TEXTURE_COMPARE_FUNC,Ir[t.compare])}class Br{constructor(t){this.managedTextures=[],this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundTextures=[],this._activeTextureLocation=-1,this._boundSamplers=Object.create(null),this._uploads={image:Er,buffer:Mr,video:Tr,compressed:Ar},this._premultiplyAlpha=!1,this._useSeparateSamplers=!1,this._renderer=t,this._renderer.renderableGC.addManagedHash(this,"_glTextures"),this._renderer.renderableGC.addManagedHash(this,"_glSamplers")}contextChange(t){this._gl=t,this._mapFormatToInternalFormat||(this._mapFormatToInternalFormat=function(t,e){let i={},r=t.RGBA;return t instanceof h.e.get().getWebGLRenderingContext()?e.srgb&&(i={"rgba8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT,"bgra8unorm-srgb":e.srgb.SRGB8_ALPHA8_EXT}):(i={"rgba8unorm-srgb":t.SRGB8_ALPHA8,"bgra8unorm-srgb":t.SRGB8_ALPHA8},r=t.RGBA8),{r8unorm:t.R8,r8snorm:t.R8_SNORM,r8uint:t.R8UI,r8sint:t.R8I,r16uint:t.R16UI,r16sint:t.R16I,r16float:t.R16F,rg8unorm:t.RG8,rg8snorm:t.RG8_SNORM,rg8uint:t.RG8UI,rg8sint:t.RG8I,r32uint:t.R32UI,r32sint:t.R32I,r32float:t.R32F,rg16uint:t.RG16UI,rg16sint:t.RG16I,rg16float:t.RG16F,rgba8unorm:t.RGBA,...i,rgba8snorm:t.RGBA8_SNORM,rgba8uint:t.RGBA8UI,rgba8sint:t.RGBA8I,bgra8unorm:r,rgb9e5ufloat:t.RGB9_E5,rgb10a2unorm:t.RGB10_A2,rg11b10ufloat:t.R11F_G11F_B10F,rg32uint:t.RG32UI,rg32sint:t.RG32I,rg32float:t.RG32F,rgba16uint:t.RGBA16UI,rgba16sint:t.RGBA16I,rgba16float:t.RGBA16F,rgba32uint:t.RGBA32UI,rgba32sint:t.RGBA32I,rgba32float:t.RGBA32F,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT16,depth24plus:t.DEPTH_COMPONENT24,"depth24plus-stencil8":t.DEPTH24_STENCIL8,depth32float:t.DEPTH_COMPONENT32F,"depth32float-stencil8":t.DEPTH32F_STENCIL8,...e.s3tc?{"bc1-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,"bc2-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,"bc3-rgba-unorm":e.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT}:{},...e.s3tc_sRGB?{"bc1-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,"bc2-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,"bc3-rgba-unorm-srgb":e.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}:{},...e.rgtc?{"bc4-r-unorm":e.rgtc.COMPRESSED_RED_RGTC1_EXT,"bc4-r-snorm":e.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,"bc5-rg-unorm":e.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,"bc5-rg-snorm":e.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}:{},...e.bptc?{"bc6h-rgb-float":e.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,"bc6h-rgb-ufloat":e.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,"bc7-rgba-unorm":e.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,"bc7-rgba-unorm-srgb":e.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT}:{},...e.etc?{"etc2-rgb8unorm":e.etc.COMPRESSED_RGB8_ETC2,"etc2-rgb8unorm-srgb":e.etc.COMPRESSED_SRGB8_ETC2,"etc2-rgb8a1unorm":e.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgb8a1unorm-srgb":e.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,"etc2-rgba8unorm":e.etc.COMPRESSED_RGBA8_ETC2_EAC,"etc2-rgba8unorm-srgb":e.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,"eac-r11unorm":e.etc.COMPRESSED_R11_EAC,"eac-rg11unorm":e.etc.COMPRESSED_SIGNED_RG11_EAC}:{},...e.astc?{"astc-4x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,"astc-4x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,"astc-5x4-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,"astc-5x4-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,"astc-5x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,"astc-5x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,"astc-6x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,"astc-6x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,"astc-6x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,"astc-6x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,"astc-8x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,"astc-8x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,"astc-8x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,"astc-8x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,"astc-8x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,"astc-8x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,"astc-10x5-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,"astc-10x5-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,"astc-10x6-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,"astc-10x6-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,"astc-10x8-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,"astc-10x8-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,"astc-10x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,"astc-10x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,"astc-12x10-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,"astc-12x10-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,"astc-12x12-unorm":e.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,"astc-12x12-unorm-srgb":e.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR}:{}}}(t,this._renderer.context.extensions),this._mapFormatToType=function(t){return{r8unorm:t.UNSIGNED_BYTE,r8snorm:t.BYTE,r8uint:t.UNSIGNED_BYTE,r8sint:t.BYTE,r16uint:t.UNSIGNED_SHORT,r16sint:t.SHORT,r16float:t.HALF_FLOAT,rg8unorm:t.UNSIGNED_BYTE,rg8snorm:t.BYTE,rg8uint:t.UNSIGNED_BYTE,rg8sint:t.BYTE,r32uint:t.UNSIGNED_INT,r32sint:t.INT,r32float:t.FLOAT,rg16uint:t.UNSIGNED_SHORT,rg16sint:t.SHORT,rg16float:t.HALF_FLOAT,rgba8unorm:t.UNSIGNED_BYTE,"rgba8unorm-srgb":t.UNSIGNED_BYTE,rgba8snorm:t.BYTE,rgba8uint:t.UNSIGNED_BYTE,rgba8sint:t.BYTE,bgra8unorm:t.UNSIGNED_BYTE,"bgra8unorm-srgb":t.UNSIGNED_BYTE,rgb9e5ufloat:t.UNSIGNED_INT_5_9_9_9_REV,rgb10a2unorm:t.UNSIGNED_INT_2_10_10_10_REV,rg11b10ufloat:t.UNSIGNED_INT_10F_11F_11F_REV,rg32uint:t.UNSIGNED_INT,rg32sint:t.INT,rg32float:t.FLOAT,rgba16uint:t.UNSIGNED_SHORT,rgba16sint:t.SHORT,rgba16float:t.HALF_FLOAT,rgba32uint:t.UNSIGNED_INT,rgba32sint:t.INT,rgba32float:t.FLOAT,stencil8:t.UNSIGNED_BYTE,depth16unorm:t.UNSIGNED_SHORT,depth24plus:t.UNSIGNED_INT,"depth24plus-stencil8":t.UNSIGNED_INT_24_8,depth32float:t.FLOAT,"depth32float-stencil8":t.FLOAT_32_UNSIGNED_INT_24_8_REV}}(t),this._mapFormatToFormat=function(t){return{r8unorm:t.RED,r8snorm:t.RED,r8uint:t.RED,r8sint:t.RED,r16uint:t.RED,r16sint:t.RED,r16float:t.RED,rg8unorm:t.RG,rg8snorm:t.RG,rg8uint:t.RG,rg8sint:t.RG,r32uint:t.RED,r32sint:t.RED,r32float:t.RED,rg16uint:t.RG,rg16sint:t.RG,rg16float:t.RG,rgba8unorm:t.RGBA,"rgba8unorm-srgb":t.RGBA,rgba8snorm:t.RGBA,rgba8uint:t.RGBA,rgba8sint:t.RGBA,bgra8unorm:t.RGBA,"bgra8unorm-srgb":t.RGBA,rgb9e5ufloat:t.RGB,rgb10a2unorm:t.RGBA,rg11b10ufloat:t.RGB,rg32uint:t.RG,rg32sint:t.RG,rg32float:t.RG,rgba16uint:t.RGBA,rgba16sint:t.RGBA,rgba16float:t.RGBA,rgba32uint:t.RGBA,rgba32sint:t.RGBA,rgba32float:t.RGBA,stencil8:t.STENCIL_INDEX8,depth16unorm:t.DEPTH_COMPONENT,depth24plus:t.DEPTH_COMPONENT,"depth24plus-stencil8":t.DEPTH_STENCIL,depth32float:t.DEPTH_COMPONENT,"depth32float-stencil8":t.DEPTH_STENCIL}}(t)),this._glTextures=Object.create(null),this._glSamplers=Object.create(null),this._boundSamplers=Object.create(null),this._premultiplyAlpha=!1;for(let t=0;t<16;t++)this.bind(c.g.EMPTY,t)}initSource(t){this.bind(t)}bind(t,e=0){const i=t.source;t?(this.bindSource(i,e),this._useSeparateSamplers&&this._bindSampler(i.style,e)):(this.bindSource(null,e),this._useSeparateSamplers&&this._bindSampler(null,e))}bindSource(t,e=0){const i=this._gl;if(t._touched=this._renderer.textureGC.count,this._boundTextures[e]!==t){this._boundTextures[e]=t,this._activateLocation(e),t||(t=c.g.EMPTY.source);const r=this.getGlSource(t);i.bindTexture(r.target,r.texture)}}_bindSampler(t,e=0){const i=this._gl;if(!t)return this._boundSamplers[e]=null,void i.bindSampler(e,null);const r=this._getGlSampler(t);this._boundSamplers[e]!==r&&(this._boundSamplers[e]=r,i.bindSampler(e,r))}unbind(t){const e=t.source,i=this._boundTextures,r=this._gl;for(let t=0;t<i.length;t++)if(i[t]===e){this._activateLocation(t);const n=this.getGlSource(e);r.bindTexture(n.target,null),i[t]=null}}_activateLocation(t){this._activeTextureLocation!==t&&(this._activeTextureLocation=t,this._gl.activeTexture(this._gl.TEXTURE0+t))}_initSource(t){const e=this._gl,i=new wr(e.createTexture());if(i.type=this._mapFormatToType[t.format],i.internalFormat=this._mapFormatToInternalFormat[t.format],i.format=this._mapFormatToFormat[t.format],t.autoGenerateMipmaps&&(this._renderer.context.supports.nonPowOf2mipmaps||t.isPowerOfTwo)){const e=Math.max(t.width,t.height);t.mipLevelCount=Math.floor(Math.log2(e))+1}return this._glTextures[t.uid]=i,this.managedTextures.includes(t)||(t.on("update",this.onSourceUpdate,this),t.on("resize",this.onSourceUpdate,this),t.on("styleChange",this.onStyleChange,this),t.on("destroy",this.onSourceDestroy,this),t.on("unload",this.onSourceUnload,this),t.on("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.push(t)),this.onSourceUpdate(t),this.updateStyle(t,!1),i}onStyleChange(t){this.updateStyle(t,!1)}updateStyle(t,e){const i=this._gl,r=this.getGlSource(t);i.bindTexture(i.TEXTURE_2D,r.texture),this._boundTextures[this._activeTextureLocation]=t,kr(t.style,i,t.mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"texParameteri",i.TEXTURE_2D,!this._renderer.context.supports.nonPowOf2wrapping&&!t.isPowerOfTwo,e)}onSourceUnload(t){const e=this._glTextures[t.uid];e&&(this.unbind(t),this._glTextures[t.uid]=null,this._gl.deleteTexture(e.texture))}onSourceUpdate(t){const e=this._gl,i=this.getGlSource(t);e.bindTexture(e.TEXTURE_2D,i.texture),this._boundTextures[this._activeTextureLocation]=t;const r="premultiply-alpha-on-upload"===t.alphaMode;this._premultiplyAlpha!==r&&(this._premultiplyAlpha=r,e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,r)),this._uploads[t.uploadMethodId]?this._uploads[t.uploadMethodId].upload(t,i,e,this._renderer.context.webGLVersion):e.texImage2D(e.TEXTURE_2D,0,e.RGBA,t.pixelWidth,t.pixelHeight,0,e.RGBA,e.UNSIGNED_BYTE,null),t.autoGenerateMipmaps&&t.mipLevelCount>1&&this.onUpdateMipmaps(t,!1)}onUpdateMipmaps(t,e=!0){e&&this.bindSource(t,0);const i=this.getGlSource(t);this._gl.generateMipmap(i.target)}onSourceDestroy(t){t.off("destroy",this.onSourceDestroy,this),t.off("update",this.onSourceUpdate,this),t.off("resize",this.onSourceUpdate,this),t.off("unload",this.onSourceUnload,this),t.off("styleChange",this.onStyleChange,this),t.off("updateMipmaps",this.onUpdateMipmaps,this),this.managedTextures.splice(this.managedTextures.indexOf(t),1),this.onSourceUnload(t)}_initSampler(t){const e=this._gl,i=this._gl.createSampler();return this._glSamplers[t._resourceId]=i,kr(t,e,this._boundTextures[this._activeTextureLocation].mipLevelCount>1,this._renderer.context.extensions.anisotropicFiltering,"samplerParameteri",i,!1,!0),this._glSamplers[t._resourceId]}_getGlSampler(t){return this._glSamplers[t._resourceId]||this._initSampler(t)}getGlSource(t){return this._glTextures[t.uid]||this._initSource(t)}generateCanvas(t){const{pixels:e,width:i,height:r}=this.getPixels(t),n=h.e.get().createCanvas();n.width=i,n.height=r;const s=n.getContext("2d");if(s){const t=s.createImageData(i,r);t.data.set(e),s.putImageData(t,0,0)}return n}getPixels(t){const e=t.source.resolution,i=t.frame,r=Math.max(Math.round(i.width*e),1),n=Math.max(Math.round(i.height*e),1),s=new Uint8Array(4*r*n),o=this._renderer,a=o.renderTarget.getRenderTarget(t),h=o.renderTarget.getGpuRenderTarget(a),l=o.gl;return l.bindFramebuffer(l.FRAMEBUFFER,h.resolveTargetFramebuffer),l.readPixels(Math.round(i.x*e),Math.round(i.y*e),r,n,l.RGBA,l.UNSIGNED_BYTE,s),{pixels:new Uint8ClampedArray(s.buffer),width:r,height:n}}destroy(){this.managedTextures.slice().forEach(t=>this.onSourceDestroy(t)),this.managedTextures=null,this._renderer=null}resetState(){this._activeTextureLocation=-1,this._boundTextures.fill(c.g.EMPTY.source),this._boundSamplers=Object.create(null)}}Br.extension={type:[r.Ag.WebGLSystem],name:"texture"};const Or=[...bi,Qi,Ni,Ei,Si,Br,ir,Oi,br,gr,zi,xr,ji,Fi],Lr=[..._i],Ur=[Dt,Lt,Bt],Dr=[],Nr=[],Fr=[];r.XO.handleByNamedList(r.Ag.WebGLSystem,Dr),r.XO.handleByNamedList(r.Ag.WebGLPipes,Nr),r.XO.handleByNamedList(r.Ag.WebGLPipesAdaptor,Fr),r.XO.add(...Or,...Lr,...Ur);class zr extends Zt{constructor(){super({name:"webgl",type:Pe.W.WEBGL,systems:Dr,renderPipes:Nr,renderPipeAdaptors:Fr})}}function Gr(t,e,i,r,n,s,o,a){const h=o-i,l=a-r,u=n-i,c=s-r,d=t-i,f=e-r,p=h*h+l*l,m=h*u+l*c,g=h*d+l*f,v=u*u+c*c,y=u*d+c*f,b=1/(p*v-m*m),_=(v*g-m*y)*b,x=(p*y-m*g)*b;return _>=0&&x>=0&&_+x<1}i(6557);var jr=i(4985),Vr=i(5060);class Hr extends jr.l{constructor(...t){let e=t[0];e instanceof Li.V&&((0,Vt.t6)(Vt.lj,"Mesh: use new Mesh({ geometry, shader }) instead"),e={geometry:e,shader:t[1]},t[3]&&((0,Vt.t6)(Vt.lj,"Mesh: drawMode argument has been removed, use geometry.topology instead"),e.geometry.topology=t[3]));const{geometry:i,shader:r,texture:n,roundPixels:s,state:o,...a}=e;super({label:"Mesh",...a}),this.renderPipeId="mesh",this._shader=null,this.allowChildren=!1,this.shader=r??null,this.texture=n??r?.texture??c.g.WHITE,this.state=o??Ut.U.for2d(),this._geometry=i,this._geometry.on("update",this.onViewUpdate,this),this.roundPixels=s??!1}get material(){return(0,Vt.t6)(Vt.lj,"mesh.material property has been removed, use mesh.shader instead"),this._shader}set shader(t){this._shader!==t&&(this._shader=t,this.onViewUpdate())}get shader(){return this._shader}set geometry(t){this._geometry!==t&&(this._geometry?.off("update",this.onViewUpdate,this),t.on("update",this.onViewUpdate,this),this._geometry=t,this.onViewUpdate())}get geometry(){return this._geometry}set texture(t){t||(t=c.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this.shader&&(this.shader.texture=t),this._texture=t,this.onViewUpdate())}get texture(){return this._texture}get batched(){return!this._shader&&!(12&this.state.data)&&this._geometry instanceof Vr.u&&("auto"===this._geometry.batchMode?this._geometry.positions.length/2<=100:"batch"===this._geometry.batchMode)}get bounds(){return this._geometry.bounds}updateBounds(){this._bounds=this._geometry.bounds}containsPoint(t){const{x:e,y:i}=t;if(!this.bounds.containsPoint(e,i))return!1;const r=this.geometry.getBuffer("aPosition").data,n="triangle-strip"===this.geometry.topology?3:1;if(this.geometry.getIndex()){const t=this.geometry.getIndex().data,s=t.length;for(let o=0;o+2<s;o+=n){const n=2*t[o],s=2*t[o+1],a=2*t[o+2];if(Gr(e,i,r[n],r[n+1],r[s],r[s+1],r[a],r[a+1]))return!0}}else{const t=r.length/2;for(let s=0;s+2<t;s+=n){const t=2*s,n=2*(s+1),o=2*(s+2);if(Gr(e,i,r[t],r[t+1],r[n],r[n+1],r[o],r[o+1]))return!0}}return!1}destroy(t){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._geometry?.off("update",this.onViewUpdate,this),this._texture=null,this._geometry=null,this._shader=null}}i(6570),r.XO.add(n,s)},4910:(t,e,i)=>{var r=i(8287).Buffer,n=i(9404),s=new(i(2244)),o=new n(24),a=new n(11),h=new n(10),l=new n(3),u=new n(7),c=i(4934),d=i(3209);function f(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._pub=new n(t),this}function p(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this._priv=new n(t),this}t.exports=g;var m={};function g(t,e,i){this.setGenerator(e),this.__prime=new n(t),this._prime=n.mont(this.__prime),this._primeLen=t.length,this._pub=void 0,this._priv=void 0,this._primeCode=void 0,i?(this.setPublicKey=f,this.setPrivateKey=p):this._primeCode=8}function v(t,e){var i=new r(t.toArray());return e?i.toString(e):i}Object.defineProperty(g.prototype,"verifyError",{enumerable:!0,get:function(){return"number"!=typeof this._primeCode&&(this._primeCode=function(t,e){var i=e.toString("hex"),r=[i,t.toString(16)].join("_");if(r in m)return m[r];var n,d=0;if(t.isEven()||!c.simpleSieve||!c.fermatTest(t)||!s.test(t))return d+=1,d+="02"===i||"05"===i?8:4,m[r]=d,d;switch(s.test(t.shrn(1))||(d+=2),i){case"02":t.mod(o).cmp(a)&&(d+=8);break;case"05":(n=t.mod(h)).cmp(l)&&n.cmp(u)&&(d+=8);break;default:d+=4}return m[r]=d,d}(this.__prime,this.__gen)),this._primeCode}}),g.prototype.generateKeys=function(){return this._priv||(this._priv=new n(d(this._primeLen))),this._pub=this._gen.toRed(this._prime).redPow(this._priv).fromRed(),this.getPublicKey()},g.prototype.computeSecret=function(t){var e=(t=(t=new n(t)).toRed(this._prime)).redPow(this._priv).fromRed(),i=new r(e.toArray()),s=this.getPrime();if(i.length<s.length){var o=new r(s.length-i.length);o.fill(0),i=r.concat([o,i])}return i},g.prototype.getPublicKey=function(t){return v(this._pub,t)},g.prototype.getPrivateKey=function(t){return v(this._priv,t)},g.prototype.getPrime=function(t){return v(this.__prime,t)},g.prototype.getGenerator=function(t){return v(this._gen,t)},g.prototype.setGenerator=function(t,e){return e=e||"utf8",r.isBuffer(t)||(t=new r(t,e)),this.__gen=t,this._gen=new n(t),this}},4922:(t,e,i)=>{"use strict";i.d(e,{$EB:()=>f,$Yl:()=>D,$_I:()=>yt,$ei:()=>S,A$4:()=>on,AQS:()=>ii,B69:()=>kr,BKk:()=>Ln,BXX:()=>Xt,B_h:()=>ee,CMB:()=>Lt,CSG:()=>fs,CVz:()=>$t,CWW:()=>_e,Cfg:()=>mt,Dmk:()=>Ct,EZo:()=>g,EdD:()=>y,FFZ:()=>ze,FV:()=>et,FXf:()=>x,Fn:()=>pe,GJx:()=>ut,GWd:()=>Bt,Gwm:()=>W,H23:()=>me,HIg:()=>kt,HO_:()=>be,HXV:()=>Zt,I9Y:()=>Je,IE4:()=>Vt,IUQ:()=>Mi,Iit:()=>kn,Jnc:()=>a,K52:()=>X,KDk:()=>Jt,KLL:()=>Ie,KRh:()=>Z,Kef:()=>ve,Kwu:()=>v,Kzv:()=>Ot,LAk:()=>rt,LiQ:()=>R,LlO:()=>On,LoY:()=>gn,MW4:()=>an,Mjd:()=>J,Mmk:()=>li,N1A:()=>as,N5j:()=>Se,NTi:()=>m,Nex:()=>Xs,Nt7:()=>k,Nz6:()=>Ht,O9p:()=>mr,OUM:()=>bt,Om:()=>lt,OuU:()=>C,PPD:()=>Qn,Pq0:()=>Pi,Q1f:()=>$r,QP0:()=>h,Qev:()=>He,Qrf:()=>ne,RQf:()=>At,Riy:()=>Qt,RrE:()=>U,RyA:()=>u,S$4:()=>fe,THS:()=>sn,Tap:()=>Cs,TdN:()=>je,TiK:()=>Ue,TkQ:()=>Gt,U3G:()=>H,V3x:()=>Pt,V9B:()=>en,VCu:()=>us,VT0:()=>Nt,Vb5:()=>o,VxR:()=>Ce,W9U:()=>ge,WNZ:()=>s,Wdf:()=>Ge,Wew:()=>Tt,Wk7:()=>l,XG_:()=>ye,XIg:()=>p,XrR:()=>K,YJl:()=>ls,Yuy:()=>Mt,Z58:()=>Wn,ZQM:()=>Ft,Zcv:()=>Zn,Zr2:()=>Pe,_QJ:()=>ae,_Ut:()=>Bn,a55:()=>qe,a5J:()=>oe,aEY:()=>O,aJ8:()=>nt,aVO:()=>ps,amv:()=>Be,b4q:()=>Vn,bC7:()=>ue,bCz:()=>b,bI3:()=>Ae,bdM:()=>ds,bkx:()=>St,brA:()=>j,bw0:()=>q,c90:()=>jt,cHt:()=>wt,caT:()=>Y,czI:()=>ie,dYF:()=>Ti,dcC:()=>Dt,dwI:()=>ti,e0p:()=>N,eHc:()=>z,eaF:()=>Rn,eoi:()=>De,er$:()=>Re,f4X:()=>T,fBL:()=>xt,g7M:()=>it,gJ2:()=>Rt,gO9:()=>_,gPd:()=>wi,gWB:()=>Fe,ghU:()=>ct,hB5:()=>c,hdd:()=>I,hgQ:()=>L,hsX:()=>d,hxR:()=>ft,hy7:()=>st,iNn:()=>Cn,ie2:()=>P,ix0:()=>Et,jR7:()=>Wt,jej:()=>ai,jf0:()=>Te,jzd:()=>Ne,k6Q:()=>qt,k6q:()=>gt,kO0:()=>Le,kRr:()=>vt,kTW:()=>dt,kTp:()=>Yt,kn4:()=>sr,kyO:()=>Q,lGu:()=>G,lPF:()=>ni,lxW:()=>In,lyL:()=>le,mcG:()=>oi,nNL:()=>tt,nST:()=>w,nWS:()=>Ai,nZQ:()=>ks,o6l:()=>Hn,ojh:()=>A,ojs:()=>de,ov9:()=>F,pBf:()=>Kt,pHI:()=>pt,paN:()=>zt,ppV:()=>fi,psI:()=>se,qUd:()=>Is,qa3:()=>te,qad:()=>E,qq$:()=>ri,qtW:()=>hn,rFo:()=>Ei,rSH:()=>re,sPf:()=>n,tBo:()=>Vs,tJf:()=>_t,tcD:()=>cs,uB5:()=>he,uV5:()=>ht,ubm:()=>zn,vim:()=>Oe,vyJ:()=>Ee,wfO:()=>at,wn6:()=>B,wrO:()=>It,xFO:()=>ot,xSv:()=>V,xiE:()=>hi,y3Z:()=>ce,y_p:()=>$,zD7:()=>Bs,zdS:()=>Ut,zgK:()=>gr,znC:()=>M});var r=i(6763);const n="172",s=0,o=1,a=2,h=1,l=2,u=3,c=0,d=1,f=2,p=0,m=1,g=2,v=3,y=4,b=5,_=100,x=101,w=102,M=103,S=104,A=200,E=201,T=202,R=203,P=204,C=205,I=206,k=207,B=208,O=209,L=210,U=211,D=212,N=213,F=214,z=0,G=1,j=2,V=3,H=4,W=5,X=6,q=7,Y=0,Z=1,K=2,$=0,Q=1,J=2,tt=3,et=4,it=5,rt=6,nt=7,st=301,ot=302,at=303,ht=304,lt=306,ut=1e3,ct=1001,dt=1002,ft=1003,pt=1004,mt=1005,gt=1006,vt=1007,yt=1008,bt=1009,_t=1010,xt=1011,wt=1012,Mt=1013,St=1014,At=1015,Et=1016,Tt=1017,Rt=1018,Pt=1020,Ct=35902,It=1021,kt=1022,Bt=1023,Ot=1024,Lt=1025,Ut=1026,Dt=1027,Nt=1028,Ft=1029,zt=1030,Gt=1031,jt=1033,Vt=33776,Ht=33777,Wt=33778,Xt=33779,qt=35840,Yt=35841,Zt=35842,Kt=35843,$t=36196,Qt=37492,Jt=37496,te=37808,ee=37809,ie=37810,re=37811,ne=37812,se=37813,oe=37814,ae=37815,he=37816,le=37817,ue=37818,ce=37819,de=37820,fe=37821,pe=36492,me=36494,ge=36495,ve=36283,ye=36284,be=36285,_e=36286,xe=2300,we=2301,Me=2302,Se=3201,Ae=0,Ee=1,Te="",Re="srgb",Pe="srgb-linear",Ce="linear",Ie="srgb",ke=7680,Be=512,Oe=513,Le=514,Ue=515,De=516,Ne=517,Fe=518,ze=519,Ge="300 es",je=2e3,Ve=2001;class He{addEventListener(t,e){void 0===this._listeners&&(this._listeners={});const i=this._listeners;void 0===i[t]&&(i[t]=[]),-1===i[t].indexOf(e)&&i[t].push(e)}hasEventListener(t,e){if(void 0===this._listeners)return!1;const i=this._listeners;return void 0!==i[t]&&-1!==i[t].indexOf(e)}removeEventListener(t,e){if(void 0===this._listeners)return;const i=this._listeners[t];if(void 0!==i){const t=i.indexOf(e);-1!==t&&i.splice(t,1)}}dispatchEvent(t){if(void 0===this._listeners)return;const e=this._listeners[t.type];if(void 0!==e){t.target=this;const i=e.slice(0);for(let e=0,r=i.length;e<r;e++)i[e].call(this,t);t.target=null}}}const We=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"],Xe=Math.PI/180,qe=180/Math.PI;function Ye(){const t=4294967295*Math.random()|0,e=4294967295*Math.random()|0,i=4294967295*Math.random()|0,r=4294967295*Math.random()|0;return(We[255&t]+We[t>>8&255]+We[t>>16&255]+We[t>>24&255]+"-"+We[255&e]+We[e>>8&255]+"-"+We[e>>16&15|64]+We[e>>24&255]+"-"+We[63&i|128]+We[i>>8&255]+"-"+We[i>>16&255]+We[i>>24&255]+We[255&r]+We[r>>8&255]+We[r>>16&255]+We[r>>24&255]).toLowerCase()}function Ze(t,e,i){return Math.max(e,Math.min(i,t))}function Ke(t,e,i){return(1-i)*t+i*e}function $e(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return t/4294967295;case Uint16Array:return t/65535;case Uint8Array:return t/255;case Int32Array:return Math.max(t/2147483647,-1);case Int16Array:return Math.max(t/32767,-1);case Int8Array:return Math.max(t/127,-1);default:throw new Error("Invalid component type.")}}function Qe(t,e){switch(e.constructor){case Float32Array:return t;case Uint32Array:return Math.round(4294967295*t);case Uint16Array:return Math.round(65535*t);case Uint8Array:return Math.round(255*t);case Int32Array:return Math.round(2147483647*t);case Int16Array:return Math.round(32767*t);case Int8Array:return Math.round(127*t);default:throw new Error("Invalid component type.")}}class Je{constructor(t=0,e=0){Je.prototype.isVector2=!0,this.x=t,this.y=e}get width(){return this.x}set width(t){this.x=t}get height(){return this.y}set height(t){this.y=t}set(t,e){return this.x=t,this.y=e,this}setScalar(t){return this.x=t,this.y=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y)}copy(t){return this.x=t.x,this.y=t.y,this}add(t){return this.x+=t.x,this.y+=t.y,this}addScalar(t){return this.x+=t,this.y+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this}subScalar(t){return this.x-=t,this.y-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this}multiply(t){return this.x*=t.x,this.y*=t.y,this}multiplyScalar(t){return this.x*=t,this.y*=t,this}divide(t){return this.x/=t.x,this.y/=t.y,this}divideScalar(t){return this.multiplyScalar(1/t)}applyMatrix3(t){const e=this.x,i=this.y,r=t.elements;return this.x=r[0]*e+r[3]*i+r[6],this.y=r[1]*e+r[4]*i+r[7],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this}clamp(t,e){return this.x=Ze(this.x,t.x,e.x),this.y=Ze(this.y,t.y,e.y),this}clampScalar(t,e){return this.x=Ze(this.x,t,e),this.y=Ze(this.y,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ze(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(t){return this.x*t.x+this.y*t.y}cross(t){return this.x*t.y-this.y*t.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ze(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y;return e*e+i*i}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this}equals(t){return t.x===this.x&&t.y===this.y}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this}rotateAround(t,e){const i=Math.cos(e),r=Math.sin(e),n=this.x-t.x,s=this.y-t.y;return this.x=n*i-s*r+t.x,this.y=n*r+s*i+t.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class ti{constructor(t,e,i,r,n,s,o,a,h){ti.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],void 0!==t&&this.set(t,e,i,r,n,s,o,a,h)}set(t,e,i,r,n,s,o,a,h){const l=this.elements;return l[0]=t,l[1]=r,l[2]=o,l[3]=e,l[4]=n,l[5]=a,l[6]=i,l[7]=s,l[8]=h,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],this}extractBasis(t,e,i){return t.setFromMatrix3Column(this,0),e.setFromMatrix3Column(this,1),i.setFromMatrix3Column(this,2),this}setFromMatrix4(t){const e=t.elements;return this.set(e[0],e[4],e[8],e[1],e[5],e[9],e[2],e[6],e[10]),this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,n=this.elements,s=i[0],o=i[3],a=i[6],h=i[1],l=i[4],u=i[7],c=i[2],d=i[5],f=i[8],p=r[0],m=r[3],g=r[6],v=r[1],y=r[4],b=r[7],_=r[2],x=r[5],w=r[8];return n[0]=s*p+o*v+a*_,n[3]=s*m+o*y+a*x,n[6]=s*g+o*b+a*w,n[1]=h*p+l*v+u*_,n[4]=h*m+l*y+u*x,n[7]=h*g+l*b+u*w,n[2]=c*p+d*v+f*_,n[5]=c*m+d*y+f*x,n[8]=c*g+d*b+f*w,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[3]*=t,e[6]*=t,e[1]*=t,e[4]*=t,e[7]*=t,e[2]*=t,e[5]*=t,e[8]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8];return e*s*l-e*o*h-i*n*l+i*o*a+r*n*h-r*s*a}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=l*s-o*h,c=o*a-l*n,d=h*n-s*a,f=e*u+i*c+r*d;if(0===f)return this.set(0,0,0,0,0,0,0,0,0);const p=1/f;return t[0]=u*p,t[1]=(r*h-l*i)*p,t[2]=(o*i-r*s)*p,t[3]=c*p,t[4]=(l*e-r*a)*p,t[5]=(r*n-o*e)*p,t[6]=d*p,t[7]=(i*a-h*e)*p,t[8]=(s*e-i*n)*p,this}transpose(){let t;const e=this.elements;return t=e[1],e[1]=e[3],e[3]=t,t=e[2],e[2]=e[6],e[6]=t,t=e[5],e[5]=e[7],e[7]=t,this}getNormalMatrix(t){return this.setFromMatrix4(t).invert().transpose()}transposeIntoArray(t){const e=this.elements;return t[0]=e[0],t[1]=e[3],t[2]=e[6],t[3]=e[1],t[4]=e[4],t[5]=e[7],t[6]=e[2],t[7]=e[5],t[8]=e[8],this}setUvTransform(t,e,i,r,n,s,o){const a=Math.cos(n),h=Math.sin(n);return this.set(i*a,i*h,-i*(a*s+h*o)+s+t,-r*h,r*a,-r*(-h*s+a*o)+o+e,0,0,1),this}scale(t,e){return this.premultiply(ei.makeScale(t,e)),this}rotate(t){return this.premultiply(ei.makeRotation(-t)),this}translate(t,e){return this.premultiply(ei.makeTranslation(t,e)),this}makeTranslation(t,e){return t.isVector2?this.set(1,0,t.x,0,1,t.y,0,0,1):this.set(1,0,t,0,1,e,0,0,1),this}makeRotation(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,i,e,0,0,0,1),this}makeScale(t,e){return this.set(t,0,0,0,e,0,0,0,1),this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<9;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<9;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t}clone(){return(new this.constructor).fromArray(this.elements)}}const ei=new ti;function ii(t){for(let e=t.length-1;e>=0;--e)if(t[e]>=65535)return!0;return!1}function ri(t){return document.createElementNS("http://www.w3.org/1999/xhtml",t)}function ni(){const t=ri("canvas");return t.style.display="block",t}Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array;const si={};function oi(t){t in si||(si[t]=!0,r.warn(t))}function ai(t,e,i){return new Promise(function(r,n){setTimeout(function s(){switch(t.clientWaitSync(e,t.SYNC_FLUSH_COMMANDS_BIT,0)){case t.WAIT_FAILED:n();break;case t.TIMEOUT_EXPIRED:setTimeout(s,i);break;default:r()}},i)})}function hi(t){const e=t.elements;e[2]=.5*e[2]+.5*e[3],e[6]=.5*e[6]+.5*e[7],e[10]=.5*e[10]+.5*e[11],e[14]=.5*e[14]+.5*e[15]}function li(t){const e=t.elements;-1===e[11]?(e[10]=-e[10]-1,e[14]=-e[14]):(e[10]=-e[10],e[14]=1-e[14])}const ui=(new ti).set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),ci=(new ti).set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function di(){const t={enabled:!0,workingColorSpace:Pe,spaces:{},convert:function(t,e,i){return!1!==this.enabled&&e!==i&&e&&i?(this.spaces[e].transfer===Ie&&(t.r=pi(t.r),t.g=pi(t.g),t.b=pi(t.b)),this.spaces[e].primaries!==this.spaces[i].primaries&&(t.applyMatrix3(this.spaces[e].toXYZ),t.applyMatrix3(this.spaces[i].fromXYZ)),this.spaces[i].transfer===Ie&&(t.r=mi(t.r),t.g=mi(t.g),t.b=mi(t.b)),t):t},fromWorkingColorSpace:function(t,e){return this.convert(t,this.workingColorSpace,e)},toWorkingColorSpace:function(t,e){return this.convert(t,e,this.workingColorSpace)},getPrimaries:function(t){return this.spaces[t].primaries},getTransfer:function(t){return t===Te?Ce:this.spaces[t].transfer},getLuminanceCoefficients:function(t,e=this.workingColorSpace){return t.fromArray(this.spaces[e].luminanceCoefficients)},define:function(t){Object.assign(this.spaces,t)},_getMatrix:function(t,e,i){return t.copy(this.spaces[e].toXYZ).multiply(this.spaces[i].fromXYZ)},_getDrawingBufferColorSpace:function(t){return this.spaces[t].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(t=this.workingColorSpace){return this.spaces[t].workingColorSpaceConfig.unpackColorSpace}},e=[.64,.33,.3,.6,.15,.06],i=[.2126,.7152,.0722],r=[.3127,.329];return t.define({[Pe]:{primaries:e,whitePoint:r,transfer:Ce,toXYZ:ui,fromXYZ:ci,luminanceCoefficients:i,workingColorSpaceConfig:{unpackColorSpace:Re},outputColorSpaceConfig:{drawingBufferColorSpace:Re}},[Re]:{primaries:e,whitePoint:r,transfer:Ie,toXYZ:ui,fromXYZ:ci,luminanceCoefficients:i,outputColorSpaceConfig:{drawingBufferColorSpace:Re}}}),t}const fi=di();function pi(t){return t<.04045?.0773993808*t:Math.pow(.9478672986*t+.0521327014,2.4)}function mi(t){return t<.0031308?12.92*t:1.055*Math.pow(t,.41666)-.055}let gi;class vi{static getDataURL(t){if(/^data:/i.test(t.src))return t.src;if("undefined"==typeof HTMLCanvasElement)return t.src;let e;if(t instanceof HTMLCanvasElement)e=t;else{void 0===gi&&(gi=ri("canvas")),gi.width=t.width,gi.height=t.height;const i=gi.getContext("2d");t instanceof ImageData?i.putImageData(t,0,0):i.drawImage(t,0,0,t.width,t.height),e=gi}return e.width>2048||e.height>2048?(r.warn("THREE.ImageUtils.getDataURL: Image converted to jpg for performance reasons",t),e.toDataURL("image/jpeg",.6)):e.toDataURL("image/png")}static sRGBToLinear(t){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap){const e=ri("canvas");e.width=t.width,e.height=t.height;const i=e.getContext("2d");i.drawImage(t,0,0,t.width,t.height);const r=i.getImageData(0,0,t.width,t.height),n=r.data;for(let t=0;t<n.length;t++)n[t]=255*pi(n[t]/255);return i.putImageData(r,0,0),e}if(t.data){const e=t.data.slice(0);for(let t=0;t<e.length;t++)e instanceof Uint8Array||e instanceof Uint8ClampedArray?e[t]=Math.floor(255*pi(e[t]/255)):e[t]=pi(e[t]);return{data:e,width:t.width,height:t.height}}return r.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),t}}let yi=0;class bi{constructor(t=null){this.isSource=!0,Object.defineProperty(this,"id",{value:yi++}),this.uuid=Ye(),this.data=t,this.dataReady=!0,this.version=0}set needsUpdate(t){!0===t&&this.version++}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.images[this.uuid])return t.images[this.uuid];const i={uuid:this.uuid,url:""},r=this.data;if(null!==r){let t;if(Array.isArray(r)){t=[];for(let e=0,i=r.length;e<i;e++)r[e].isDataTexture?t.push(_i(r[e].image)):t.push(_i(r[e]))}else t=_i(r);i.url=t}return e||(t.images[this.uuid]=i),i}}function _i(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap?vi.getDataURL(t):t.data?{data:Array.from(t.data),width:t.width,height:t.height,type:t.data.constructor.name}:(r.warn("THREE.Texture: Unable to serialize Texture."),{})}let xi=0;class wi extends He{constructor(t=wi.DEFAULT_IMAGE,e=wi.DEFAULT_MAPPING,i=ct,r=ct,n=gt,s=yt,o=Bt,a=bt,h=wi.DEFAULT_ANISOTROPY,l=Te){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:xi++}),this.uuid=Ye(),this.name="",this.source=new bi(t),this.mipmaps=[],this.mapping=e,this.channel=0,this.wrapS=i,this.wrapT=r,this.magFilter=n,this.minFilter=s,this.anisotropy=h,this.format=o,this.internalFormat=null,this.type=a,this.offset=new Je(0,0),this.repeat=new Je(1,1),this.center=new Je(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new ti,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=l,this.userData={},this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.pmremVersion=0}get image(){return this.source.data}set image(t=null){this.source.data=t}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}clone(){return(new this.constructor).copy(this)}copy(t){return this.name=t.name,this.source=t.source,this.mipmaps=t.mipmaps.slice(0),this.mapping=t.mapping,this.channel=t.channel,this.wrapS=t.wrapS,this.wrapT=t.wrapT,this.magFilter=t.magFilter,this.minFilter=t.minFilter,this.anisotropy=t.anisotropy,this.format=t.format,this.internalFormat=t.internalFormat,this.type=t.type,this.offset.copy(t.offset),this.repeat.copy(t.repeat),this.center.copy(t.center),this.rotation=t.rotation,this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrix.copy(t.matrix),this.generateMipmaps=t.generateMipmaps,this.premultiplyAlpha=t.premultiplyAlpha,this.flipY=t.flipY,this.unpackAlignment=t.unpackAlignment,this.colorSpace=t.colorSpace,this.renderTarget=t.renderTarget,this.isRenderTargetTexture=t.isRenderTargetTexture,this.userData=JSON.parse(JSON.stringify(t.userData)),this.needsUpdate=!0,this}toJSON(t){const e=void 0===t||"string"==typeof t;if(!e&&void 0!==t.textures[this.uuid])return t.textures[this.uuid];const i={metadata:{version:4.6,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(t).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(i.userData=this.userData),e||(t.textures[this.uuid]=i),i}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(t){if(300!==this.mapping)return t;if(t.applyMatrix3(this.matrix),t.x<0||t.x>1)switch(this.wrapS){case ut:t.x=t.x-Math.floor(t.x);break;case ct:t.x=t.x<0?0:1;break;case dt:1===Math.abs(Math.floor(t.x)%2)?t.x=Math.ceil(t.x)-t.x:t.x=t.x-Math.floor(t.x)}if(t.y<0||t.y>1)switch(this.wrapT){case ut:t.y=t.y-Math.floor(t.y);break;case ct:t.y=t.y<0?0:1;break;case dt:1===Math.abs(Math.floor(t.y)%2)?t.y=Math.ceil(t.y)-t.y:t.y=t.y-Math.floor(t.y)}return this.flipY&&(t.y=1-t.y),t}set needsUpdate(t){!0===t&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(t){!0===t&&this.pmremVersion++}}wi.DEFAULT_IMAGE=null,wi.DEFAULT_MAPPING=300,wi.DEFAULT_ANISOTROPY=1;class Mi{constructor(t=0,e=0,i=0,r=1){Mi.prototype.isVector4=!0,this.x=t,this.y=e,this.z=i,this.w=r}get width(){return this.z}set width(t){this.z=t}get height(){return this.w}set height(t){this.w=t}set(t,e,i,r){return this.x=t,this.y=e,this.z=i,this.w=r,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this.w=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setW(t){return this.w=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;case 3:this.w=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this.w=void 0!==t.w?t.w:1,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this.w+=t.w,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this.w+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this.w=t.w+e.w,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this.w+=t.w*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this.w-=t.w,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this.w-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this.w=t.w-e.w,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this.w*=t.w,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this.w*=t,this}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,n=this.w,s=t.elements;return this.x=s[0]*e+s[4]*i+s[8]*r+s[12]*n,this.y=s[1]*e+s[5]*i+s[9]*r+s[13]*n,this.z=s[2]*e+s[6]*i+s[10]*r+s[14]*n,this.w=s[3]*e+s[7]*i+s[11]*r+s[15]*n,this}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this.w/=t.w,this}divideScalar(t){return this.multiplyScalar(1/t)}setAxisAngleFromQuaternion(t){this.w=2*Math.acos(t.w);const e=Math.sqrt(1-t.w*t.w);return e<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=t.x/e,this.y=t.y/e,this.z=t.z/e),this}setAxisAngleFromRotationMatrix(t){let e,i,r,n;const s=.01,o=.1,a=t.elements,h=a[0],l=a[4],u=a[8],c=a[1],d=a[5],f=a[9],p=a[2],m=a[6],g=a[10];if(Math.abs(l-c)<s&&Math.abs(u-p)<s&&Math.abs(f-m)<s){if(Math.abs(l+c)<o&&Math.abs(u+p)<o&&Math.abs(f+m)<o&&Math.abs(h+d+g-3)<o)return this.set(1,0,0,0),this;e=Math.PI;const t=(h+1)/2,a=(d+1)/2,v=(g+1)/2,y=(l+c)/4,b=(u+p)/4,_=(f+m)/4;return t>a&&t>v?t<s?(i=0,r=.707106781,n=.707106781):(i=Math.sqrt(t),r=y/i,n=b/i):a>v?a<s?(i=.707106781,r=0,n=.707106781):(r=Math.sqrt(a),i=y/r,n=_/r):v<s?(i=.707106781,r=.707106781,n=0):(n=Math.sqrt(v),i=b/n,r=_/n),this.set(i,r,n,e),this}let v=Math.sqrt((m-f)*(m-f)+(u-p)*(u-p)+(c-l)*(c-l));return Math.abs(v)<.001&&(v=1),this.x=(m-f)/v,this.y=(u-p)/v,this.z=(c-l)/v,this.w=Math.acos((h+d+g-1)/2),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this.w=e[15],this}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this.w=Math.min(this.w,t.w),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this.w=Math.max(this.w,t.w),this}clamp(t,e){return this.x=Ze(this.x,t.x,e.x),this.y=Ze(this.y,t.y,e.y),this.z=Ze(this.z,t.z,e.z),this.w=Ze(this.w,t.w,e.w),this}clampScalar(t,e){return this.x=Ze(this.x,t,e),this.y=Ze(this.y,t,e),this.z=Ze(this.z,t,e),this.w=Ze(this.w,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ze(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z+this.w*t.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this.w+=(t.w-this.w)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this.w=t.w+(e.w-t.w)*i,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z&&t.w===this.w}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this.w=t[e+3],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t[e+3]=this.w,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this.w=t.getW(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class Si extends He{constructor(t=1,e=1,i={}){super(),this.isRenderTarget=!0,this.width=t,this.height=e,this.depth=1,this.scissor=new Mi(0,0,t,e),this.scissorTest=!1,this.viewport=new Mi(0,0,t,e);const r={width:t,height:e,depth:1};i=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:gt,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1},i);const n=new wi(r,i.mapping,i.wrapS,i.wrapT,i.magFilter,i.minFilter,i.format,i.type,i.anisotropy,i.colorSpace);n.flipY=!1,n.generateMipmaps=i.generateMipmaps,n.internalFormat=i.internalFormat,this.textures=[];const s=i.count;for(let t=0;t<s;t++)this.textures[t]=n.clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;this.depthBuffer=i.depthBuffer,this.stencilBuffer=i.stencilBuffer,this.resolveDepthBuffer=i.resolveDepthBuffer,this.resolveStencilBuffer=i.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=i.depthTexture,this.samples=i.samples}get texture(){return this.textures[0]}set texture(t){this.textures[0]=t}set depthTexture(t){null!==this._depthTexture&&(this._depthTexture.renderTarget=null),null!==t&&(t.renderTarget=this),this._depthTexture=t}get depthTexture(){return this._depthTexture}setSize(t,e,i=1){if(this.width!==t||this.height!==e||this.depth!==i){this.width=t,this.height=e,this.depth=i;for(let r=0,n=this.textures.length;r<n;r++)this.textures[r].image.width=t,this.textures[r].image.height=e,this.textures[r].image.depth=i;this.dispose()}this.viewport.set(0,0,t,e),this.scissor.set(0,0,t,e)}clone(){return(new this.constructor).copy(this)}copy(t){this.width=t.width,this.height=t.height,this.depth=t.depth,this.scissor.copy(t.scissor),this.scissorTest=t.scissorTest,this.viewport.copy(t.viewport),this.textures.length=0;for(let e=0,i=t.textures.length;e<i;e++)this.textures[e]=t.textures[e].clone(),this.textures[e].isRenderTargetTexture=!0,this.textures[e].renderTarget=this;const e=Object.assign({},t.texture.image);return this.texture.source=new bi(e),this.depthBuffer=t.depthBuffer,this.stencilBuffer=t.stencilBuffer,this.resolveDepthBuffer=t.resolveDepthBuffer,this.resolveStencilBuffer=t.resolveStencilBuffer,null!==t.depthTexture&&(this.depthTexture=t.depthTexture.clone()),this.samples=t.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class Ai extends Si{constructor(t=1,e=1,i={}){super(t,e,i),this.isWebGLRenderTarget=!0}}class Ei extends wi{constructor(t=null,e=1,i=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(t){this.layerUpdates.add(t)}clearLayerUpdates(){this.layerUpdates.clear()}}class Ti extends wi{constructor(t=null,e=1,i=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:t,width:e,height:i,depth:r},this.magFilter=ft,this.minFilter=ft,this.wrapR=ct,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class Ri{constructor(t=0,e=0,i=0,r=1){this.isQuaternion=!0,this._x=t,this._y=e,this._z=i,this._w=r}static slerpFlat(t,e,i,r,n,s,o){let a=i[r+0],h=i[r+1],l=i[r+2],u=i[r+3];const c=n[s+0],d=n[s+1],f=n[s+2],p=n[s+3];if(0===o)return t[e+0]=a,t[e+1]=h,t[e+2]=l,void(t[e+3]=u);if(1===o)return t[e+0]=c,t[e+1]=d,t[e+2]=f,void(t[e+3]=p);if(u!==p||a!==c||h!==d||l!==f){let t=1-o;const e=a*c+h*d+l*f+u*p,i=e>=0?1:-1,r=1-e*e;if(r>Number.EPSILON){const n=Math.sqrt(r),s=Math.atan2(n,e*i);t=Math.sin(t*s)/n,o=Math.sin(o*s)/n}const n=o*i;if(a=a*t+c*n,h=h*t+d*n,l=l*t+f*n,u=u*t+p*n,t===1-o){const t=1/Math.sqrt(a*a+h*h+l*l+u*u);a*=t,h*=t,l*=t,u*=t}}t[e]=a,t[e+1]=h,t[e+2]=l,t[e+3]=u}static multiplyQuaternionsFlat(t,e,i,r,n,s){const o=i[r],a=i[r+1],h=i[r+2],l=i[r+3],u=n[s],c=n[s+1],d=n[s+2],f=n[s+3];return t[e]=o*f+l*u+a*d-h*c,t[e+1]=a*f+l*c+h*u-o*d,t[e+2]=h*f+l*d+o*c-a*u,t[e+3]=l*f-o*u-a*c-h*d,t}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get w(){return this._w}set w(t){this._w=t,this._onChangeCallback()}set(t,e,i,r){return this._x=t,this._y=e,this._z=i,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(t){return this._x=t.x,this._y=t.y,this._z=t.z,this._w=t.w,this._onChangeCallback(),this}setFromEuler(t,e=!0){const i=t._x,n=t._y,s=t._z,o=t._order,a=Math.cos,h=Math.sin,l=a(i/2),u=a(n/2),c=a(s/2),d=h(i/2),f=h(n/2),p=h(s/2);switch(o){case"XYZ":this._x=d*u*c+l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c-d*f*p;break;case"YXZ":this._x=d*u*c+l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c+d*f*p;break;case"ZXY":this._x=d*u*c-l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c-d*f*p;break;case"ZYX":this._x=d*u*c-l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c+d*f*p;break;case"YZX":this._x=d*u*c+l*f*p,this._y=l*f*c+d*u*p,this._z=l*u*p-d*f*c,this._w=l*u*c-d*f*p;break;case"XZY":this._x=d*u*c-l*f*p,this._y=l*f*c-d*u*p,this._z=l*u*p+d*f*c,this._w=l*u*c+d*f*p;break;default:r.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return!0===e&&this._onChangeCallback(),this}setFromAxisAngle(t,e){const i=e/2,r=Math.sin(i);return this._x=t.x*r,this._y=t.y*r,this._z=t.z*r,this._w=Math.cos(i),this._onChangeCallback(),this}setFromRotationMatrix(t){const e=t.elements,i=e[0],r=e[4],n=e[8],s=e[1],o=e[5],a=e[9],h=e[2],l=e[6],u=e[10],c=i+o+u;if(c>0){const t=.5/Math.sqrt(c+1);this._w=.25/t,this._x=(l-a)*t,this._y=(n-h)*t,this._z=(s-r)*t}else if(i>o&&i>u){const t=2*Math.sqrt(1+i-o-u);this._w=(l-a)/t,this._x=.25*t,this._y=(r+s)/t,this._z=(n+h)/t}else if(o>u){const t=2*Math.sqrt(1+o-i-u);this._w=(n-h)/t,this._x=(r+s)/t,this._y=.25*t,this._z=(a+l)/t}else{const t=2*Math.sqrt(1+u-i-o);this._w=(s-r)/t,this._x=(n+h)/t,this._y=(a+l)/t,this._z=.25*t}return this._onChangeCallback(),this}setFromUnitVectors(t,e){let i=t.dot(e)+1;return i<Number.EPSILON?(i=0,Math.abs(t.x)>Math.abs(t.z)?(this._x=-t.y,this._y=t.x,this._z=0,this._w=i):(this._x=0,this._y=-t.z,this._z=t.y,this._w=i)):(this._x=t.y*e.z-t.z*e.y,this._y=t.z*e.x-t.x*e.z,this._z=t.x*e.y-t.y*e.x,this._w=i),this.normalize()}angleTo(t){return 2*Math.acos(Math.abs(Ze(this.dot(t),-1,1)))}rotateTowards(t,e){const i=this.angleTo(t);if(0===i)return this;const r=Math.min(1,e/i);return this.slerp(t,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(t){return this._x*t._x+this._y*t._y+this._z*t._z+this._w*t._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let t=this.length();return 0===t?(this._x=0,this._y=0,this._z=0,this._w=1):(t=1/t,this._x=this._x*t,this._y=this._y*t,this._z=this._z*t,this._w=this._w*t),this._onChangeCallback(),this}multiply(t){return this.multiplyQuaternions(this,t)}premultiply(t){return this.multiplyQuaternions(t,this)}multiplyQuaternions(t,e){const i=t._x,r=t._y,n=t._z,s=t._w,o=e._x,a=e._y,h=e._z,l=e._w;return this._x=i*l+s*o+r*h-n*a,this._y=r*l+s*a+n*o-i*h,this._z=n*l+s*h+i*a-r*o,this._w=s*l-i*o-r*a-n*h,this._onChangeCallback(),this}slerp(t,e){if(0===e)return this;if(1===e)return this.copy(t);const i=this._x,r=this._y,n=this._z,s=this._w;let o=s*t._w+i*t._x+r*t._y+n*t._z;if(o<0?(this._w=-t._w,this._x=-t._x,this._y=-t._y,this._z=-t._z,o=-o):this.copy(t),o>=1)return this._w=s,this._x=i,this._y=r,this._z=n,this;const a=1-o*o;if(a<=Number.EPSILON){const t=1-e;return this._w=t*s+e*this._w,this._x=t*i+e*this._x,this._y=t*r+e*this._y,this._z=t*n+e*this._z,this.normalize(),this}const h=Math.sqrt(a),l=Math.atan2(h,o),u=Math.sin((1-e)*l)/h,c=Math.sin(e*l)/h;return this._w=s*u+this._w*c,this._x=i*u+this._x*c,this._y=r*u+this._y*c,this._z=n*u+this._z*c,this._onChangeCallback(),this}slerpQuaternions(t,e,i){return this.copy(t).slerp(e,i)}random(){const t=2*Math.PI*Math.random(),e=2*Math.PI*Math.random(),i=Math.random(),r=Math.sqrt(1-i),n=Math.sqrt(i);return this.set(r*Math.sin(t),r*Math.cos(t),n*Math.sin(e),n*Math.cos(e))}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._w===this._w}fromArray(t,e=0){return this._x=t[e],this._y=t[e+1],this._z=t[e+2],this._w=t[e+3],this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._w,t}fromBufferAttribute(t,e){return this._x=t.getX(e),this._y=t.getY(e),this._z=t.getZ(e),this._w=t.getW(e),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class Pi{constructor(t=0,e=0,i=0){Pi.prototype.isVector3=!0,this.x=t,this.y=e,this.z=i}set(t,e,i){return void 0===i&&(i=this.z),this.x=t,this.y=e,this.z=i,this}setScalar(t){return this.x=t,this.y=t,this.z=t,this}setX(t){return this.x=t,this}setY(t){return this.y=t,this}setZ(t){return this.z=t,this}setComponent(t,e){switch(t){case 0:this.x=e;break;case 1:this.y=e;break;case 2:this.z=e;break;default:throw new Error("index is out of range: "+t)}return this}getComponent(t){switch(t){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+t)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(t){return this.x=t.x,this.y=t.y,this.z=t.z,this}add(t){return this.x+=t.x,this.y+=t.y,this.z+=t.z,this}addScalar(t){return this.x+=t,this.y+=t,this.z+=t,this}addVectors(t,e){return this.x=t.x+e.x,this.y=t.y+e.y,this.z=t.z+e.z,this}addScaledVector(t,e){return this.x+=t.x*e,this.y+=t.y*e,this.z+=t.z*e,this}sub(t){return this.x-=t.x,this.y-=t.y,this.z-=t.z,this}subScalar(t){return this.x-=t,this.y-=t,this.z-=t,this}subVectors(t,e){return this.x=t.x-e.x,this.y=t.y-e.y,this.z=t.z-e.z,this}multiply(t){return this.x*=t.x,this.y*=t.y,this.z*=t.z,this}multiplyScalar(t){return this.x*=t,this.y*=t,this.z*=t,this}multiplyVectors(t,e){return this.x=t.x*e.x,this.y=t.y*e.y,this.z=t.z*e.z,this}applyEuler(t){return this.applyQuaternion(Ii.setFromEuler(t))}applyAxisAngle(t,e){return this.applyQuaternion(Ii.setFromAxisAngle(t,e))}applyMatrix3(t){const e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[3]*i+n[6]*r,this.y=n[1]*e+n[4]*i+n[7]*r,this.z=n[2]*e+n[5]*i+n[8]*r,this}applyNormalMatrix(t){return this.applyMatrix3(t).normalize()}applyMatrix4(t){const e=this.x,i=this.y,r=this.z,n=t.elements,s=1/(n[3]*e+n[7]*i+n[11]*r+n[15]);return this.x=(n[0]*e+n[4]*i+n[8]*r+n[12])*s,this.y=(n[1]*e+n[5]*i+n[9]*r+n[13])*s,this.z=(n[2]*e+n[6]*i+n[10]*r+n[14])*s,this}applyQuaternion(t){const e=this.x,i=this.y,r=this.z,n=t.x,s=t.y,o=t.z,a=t.w,h=2*(s*r-o*i),l=2*(o*e-n*r),u=2*(n*i-s*e);return this.x=e+a*h+s*u-o*l,this.y=i+a*l+o*h-n*u,this.z=r+a*u+n*l-s*h,this}project(t){return this.applyMatrix4(t.matrixWorldInverse).applyMatrix4(t.projectionMatrix)}unproject(t){return this.applyMatrix4(t.projectionMatrixInverse).applyMatrix4(t.matrixWorld)}transformDirection(t){const e=this.x,i=this.y,r=this.z,n=t.elements;return this.x=n[0]*e+n[4]*i+n[8]*r,this.y=n[1]*e+n[5]*i+n[9]*r,this.z=n[2]*e+n[6]*i+n[10]*r,this.normalize()}divide(t){return this.x/=t.x,this.y/=t.y,this.z/=t.z,this}divideScalar(t){return this.multiplyScalar(1/t)}min(t){return this.x=Math.min(this.x,t.x),this.y=Math.min(this.y,t.y),this.z=Math.min(this.z,t.z),this}max(t){return this.x=Math.max(this.x,t.x),this.y=Math.max(this.y,t.y),this.z=Math.max(this.z,t.z),this}clamp(t,e){return this.x=Ze(this.x,t.x,e.x),this.y=Ze(this.y,t.y,e.y),this.z=Ze(this.z,t.z,e.z),this}clampScalar(t,e){return this.x=Ze(this.x,t,e),this.y=Ze(this.y,t,e),this.z=Ze(this.z,t,e),this}clampLength(t,e){const i=this.length();return this.divideScalar(i||1).multiplyScalar(Ze(i,t,e))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(t){return this.x*t.x+this.y*t.y+this.z*t.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(t){return this.normalize().multiplyScalar(t)}lerp(t,e){return this.x+=(t.x-this.x)*e,this.y+=(t.y-this.y)*e,this.z+=(t.z-this.z)*e,this}lerpVectors(t,e,i){return this.x=t.x+(e.x-t.x)*i,this.y=t.y+(e.y-t.y)*i,this.z=t.z+(e.z-t.z)*i,this}cross(t){return this.crossVectors(this,t)}crossVectors(t,e){const i=t.x,r=t.y,n=t.z,s=e.x,o=e.y,a=e.z;return this.x=r*a-n*o,this.y=n*s-i*a,this.z=i*o-r*s,this}projectOnVector(t){const e=t.lengthSq();if(0===e)return this.set(0,0,0);const i=t.dot(this)/e;return this.copy(t).multiplyScalar(i)}projectOnPlane(t){return Ci.copy(this).projectOnVector(t),this.sub(Ci)}reflect(t){return this.sub(Ci.copy(t).multiplyScalar(2*this.dot(t)))}angleTo(t){const e=Math.sqrt(this.lengthSq()*t.lengthSq());if(0===e)return Math.PI/2;const i=this.dot(t)/e;return Math.acos(Ze(i,-1,1))}distanceTo(t){return Math.sqrt(this.distanceToSquared(t))}distanceToSquared(t){const e=this.x-t.x,i=this.y-t.y,r=this.z-t.z;return e*e+i*i+r*r}manhattanDistanceTo(t){return Math.abs(this.x-t.x)+Math.abs(this.y-t.y)+Math.abs(this.z-t.z)}setFromSpherical(t){return this.setFromSphericalCoords(t.radius,t.phi,t.theta)}setFromSphericalCoords(t,e,i){const r=Math.sin(e)*t;return this.x=r*Math.sin(i),this.y=Math.cos(e)*t,this.z=r*Math.cos(i),this}setFromCylindrical(t){return this.setFromCylindricalCoords(t.radius,t.theta,t.y)}setFromCylindricalCoords(t,e,i){return this.x=t*Math.sin(e),this.y=i,this.z=t*Math.cos(e),this}setFromMatrixPosition(t){const e=t.elements;return this.x=e[12],this.y=e[13],this.z=e[14],this}setFromMatrixScale(t){const e=this.setFromMatrixColumn(t,0).length(),i=this.setFromMatrixColumn(t,1).length(),r=this.setFromMatrixColumn(t,2).length();return this.x=e,this.y=i,this.z=r,this}setFromMatrixColumn(t,e){return this.fromArray(t.elements,4*e)}setFromMatrix3Column(t,e){return this.fromArray(t.elements,3*e)}setFromEuler(t){return this.x=t._x,this.y=t._y,this.z=t._z,this}setFromColor(t){return this.x=t.r,this.y=t.g,this.z=t.b,this}equals(t){return t.x===this.x&&t.y===this.y&&t.z===this.z}fromArray(t,e=0){return this.x=t[e],this.y=t[e+1],this.z=t[e+2],this}toArray(t=[],e=0){return t[e]=this.x,t[e+1]=this.y,t[e+2]=this.z,t}fromBufferAttribute(t,e){return this.x=t.getX(e),this.y=t.getY(e),this.z=t.getZ(e),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const t=Math.random()*Math.PI*2,e=2*Math.random()-1,i=Math.sqrt(1-e*e);return this.x=i*Math.cos(t),this.y=e,this.z=i*Math.sin(t),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const Ci=new Pi,Ii=new Ri;class ki{constructor(t=new Pi(1/0,1/0,1/0),e=new Pi(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=t,this.max=e}set(t,e){return this.min.copy(t),this.max.copy(e),this}setFromArray(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e+=3)this.expandByPoint(Oi.fromArray(t,e));return this}setFromBufferAttribute(t){this.makeEmpty();for(let e=0,i=t.count;e<i;e++)this.expandByPoint(Oi.fromBufferAttribute(t,e));return this}setFromPoints(t){this.makeEmpty();for(let e=0,i=t.length;e<i;e++)this.expandByPoint(t[e]);return this}setFromCenterAndSize(t,e){const i=Oi.copy(e).multiplyScalar(.5);return this.min.copy(t).sub(i),this.max.copy(t).add(i),this}setFromObject(t,e=!1){return this.makeEmpty(),this.expandByObject(t,e)}clone(){return(new this.constructor).copy(this)}copy(t){return this.min.copy(t.min),this.max.copy(t.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(t){return this.isEmpty()?t.set(0,0,0):t.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(t){return this.isEmpty()?t.set(0,0,0):t.subVectors(this.max,this.min)}expandByPoint(t){return this.min.min(t),this.max.max(t),this}expandByVector(t){return this.min.sub(t),this.max.add(t),this}expandByScalar(t){return this.min.addScalar(-t),this.max.addScalar(t),this}expandByObject(t,e=!1){t.updateWorldMatrix(!1,!1);const i=t.geometry;if(void 0!==i){const r=i.getAttribute("position");if(!0===e&&void 0!==r&&!0!==t.isInstancedMesh)for(let e=0,i=r.count;e<i;e++)!0===t.isMesh?t.getVertexPosition(e,Oi):Oi.fromBufferAttribute(r,e),Oi.applyMatrix4(t.matrixWorld),this.expandByPoint(Oi);else void 0!==t.boundingBox?(null===t.boundingBox&&t.computeBoundingBox(),Li.copy(t.boundingBox)):(null===i.boundingBox&&i.computeBoundingBox(),Li.copy(i.boundingBox)),Li.applyMatrix4(t.matrixWorld),this.union(Li)}const r=t.children;for(let t=0,i=r.length;t<i;t++)this.expandByObject(r[t],e);return this}containsPoint(t){return t.x>=this.min.x&&t.x<=this.max.x&&t.y>=this.min.y&&t.y<=this.max.y&&t.z>=this.min.z&&t.z<=this.max.z}containsBox(t){return this.min.x<=t.min.x&&t.max.x<=this.max.x&&this.min.y<=t.min.y&&t.max.y<=this.max.y&&this.min.z<=t.min.z&&t.max.z<=this.max.z}getParameter(t,e){return e.set((t.x-this.min.x)/(this.max.x-this.min.x),(t.y-this.min.y)/(this.max.y-this.min.y),(t.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(t){return t.max.x>=this.min.x&&t.min.x<=this.max.x&&t.max.y>=this.min.y&&t.min.y<=this.max.y&&t.max.z>=this.min.z&&t.min.z<=this.max.z}intersectsSphere(t){return this.clampPoint(t.center,Oi),Oi.distanceToSquared(t.center)<=t.radius*t.radius}intersectsPlane(t){let e,i;return t.normal.x>0?(e=t.normal.x*this.min.x,i=t.normal.x*this.max.x):(e=t.normal.x*this.max.x,i=t.normal.x*this.min.x),t.normal.y>0?(e+=t.normal.y*this.min.y,i+=t.normal.y*this.max.y):(e+=t.normal.y*this.max.y,i+=t.normal.y*this.min.y),t.normal.z>0?(e+=t.normal.z*this.min.z,i+=t.normal.z*this.max.z):(e+=t.normal.z*this.max.z,i+=t.normal.z*this.min.z),e<=-t.constant&&i>=-t.constant}intersectsTriangle(t){if(this.isEmpty())return!1;this.getCenter(ji),Vi.subVectors(this.max,ji),Ui.subVectors(t.a,ji),Di.subVectors(t.b,ji),Ni.subVectors(t.c,ji),Fi.subVectors(Di,Ui),zi.subVectors(Ni,Di),Gi.subVectors(Ui,Ni);let e=[0,-Fi.z,Fi.y,0,-zi.z,zi.y,0,-Gi.z,Gi.y,Fi.z,0,-Fi.x,zi.z,0,-zi.x,Gi.z,0,-Gi.x,-Fi.y,Fi.x,0,-zi.y,zi.x,0,-Gi.y,Gi.x,0];return!!Xi(e,Ui,Di,Ni,Vi)&&(e=[1,0,0,0,1,0,0,0,1],!!Xi(e,Ui,Di,Ni,Vi)&&(Hi.crossVectors(Fi,zi),e=[Hi.x,Hi.y,Hi.z],Xi(e,Ui,Di,Ni,Vi)))}clampPoint(t,e){return e.copy(t).clamp(this.min,this.max)}distanceToPoint(t){return this.clampPoint(t,Oi).distanceTo(t)}getBoundingSphere(t){return this.isEmpty()?t.makeEmpty():(this.getCenter(t.center),t.radius=.5*this.getSize(Oi).length()),t}intersect(t){return this.min.max(t.min),this.max.min(t.max),this.isEmpty()&&this.makeEmpty(),this}union(t){return this.min.min(t.min),this.max.max(t.max),this}applyMatrix4(t){return this.isEmpty()||(Bi[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(t),Bi[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(t),Bi[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(t),Bi[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(t),Bi[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(t),Bi[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(t),Bi[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(t),Bi[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(t),this.setFromPoints(Bi)),this}translate(t){return this.min.add(t),this.max.add(t),this}equals(t){return t.min.equals(this.min)&&t.max.equals(this.max)}}const Bi=[new Pi,new Pi,new Pi,new Pi,new Pi,new Pi,new Pi,new Pi],Oi=new Pi,Li=new ki,Ui=new Pi,Di=new Pi,Ni=new Pi,Fi=new Pi,zi=new Pi,Gi=new Pi,ji=new Pi,Vi=new Pi,Hi=new Pi,Wi=new Pi;function Xi(t,e,i,r,n){for(let s=0,o=t.length-3;s<=o;s+=3){Wi.fromArray(t,s);const o=n.x*Math.abs(Wi.x)+n.y*Math.abs(Wi.y)+n.z*Math.abs(Wi.z),a=e.dot(Wi),h=i.dot(Wi),l=r.dot(Wi);if(Math.max(-Math.max(a,h,l),Math.min(a,h,l))>o)return!1}return!0}const qi=new ki,Yi=new Pi,Zi=new Pi;class Ki{constructor(t=new Pi,e=-1){this.isSphere=!0,this.center=t,this.radius=e}set(t,e){return this.center.copy(t),this.radius=e,this}setFromPoints(t,e){const i=this.center;void 0!==e?i.copy(e):qi.setFromPoints(t).getCenter(i);let r=0;for(let e=0,n=t.length;e<n;e++)r=Math.max(r,i.distanceToSquared(t[e]));return this.radius=Math.sqrt(r),this}copy(t){return this.center.copy(t.center),this.radius=t.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(t){return t.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(t){return t.distanceTo(this.center)-this.radius}intersectsSphere(t){const e=this.radius+t.radius;return t.center.distanceToSquared(this.center)<=e*e}intersectsBox(t){return t.intersectsSphere(this)}intersectsPlane(t){return Math.abs(t.distanceToPoint(this.center))<=this.radius}clampPoint(t,e){const i=this.center.distanceToSquared(t);return e.copy(t),i>this.radius*this.radius&&(e.sub(this.center).normalize(),e.multiplyScalar(this.radius).add(this.center)),e}getBoundingBox(t){return this.isEmpty()?(t.makeEmpty(),t):(t.set(this.center,this.center),t.expandByScalar(this.radius),t)}applyMatrix4(t){return this.center.applyMatrix4(t),this.radius=this.radius*t.getMaxScaleOnAxis(),this}translate(t){return this.center.add(t),this}expandByPoint(t){if(this.isEmpty())return this.center.copy(t),this.radius=0,this;Yi.subVectors(t,this.center);const e=Yi.lengthSq();if(e>this.radius*this.radius){const t=Math.sqrt(e),i=.5*(t-this.radius);this.center.addScaledVector(Yi,i/t),this.radius+=i}return this}union(t){return t.isEmpty()?this:this.isEmpty()?(this.copy(t),this):(!0===this.center.equals(t.center)?this.radius=Math.max(this.radius,t.radius):(Zi.subVectors(t.center,this.center).setLength(t.radius),this.expandByPoint(Yi.copy(t.center).add(Zi)),this.expandByPoint(Yi.copy(t.center).sub(Zi))),this)}equals(t){return t.center.equals(this.center)&&t.radius===this.radius}clone(){return(new this.constructor).copy(this)}}const $i=new Pi,Qi=new Pi,Ji=new Pi,tr=new Pi,er=new Pi,ir=new Pi,rr=new Pi;class nr{constructor(t=new Pi,e=new Pi(0,0,-1)){this.origin=t,this.direction=e}set(t,e){return this.origin.copy(t),this.direction.copy(e),this}copy(t){return this.origin.copy(t.origin),this.direction.copy(t.direction),this}at(t,e){return e.copy(this.origin).addScaledVector(this.direction,t)}lookAt(t){return this.direction.copy(t).sub(this.origin).normalize(),this}recast(t){return this.origin.copy(this.at(t,$i)),this}closestPointToPoint(t,e){e.subVectors(t,this.origin);const i=e.dot(this.direction);return i<0?e.copy(this.origin):e.copy(this.origin).addScaledVector(this.direction,i)}distanceToPoint(t){return Math.sqrt(this.distanceSqToPoint(t))}distanceSqToPoint(t){const e=$i.subVectors(t,this.origin).dot(this.direction);return e<0?this.origin.distanceToSquared(t):($i.copy(this.origin).addScaledVector(this.direction,e),$i.distanceToSquared(t))}distanceSqToSegment(t,e,i,r){Qi.copy(t).add(e).multiplyScalar(.5),Ji.copy(e).sub(t).normalize(),tr.copy(this.origin).sub(Qi);const n=.5*t.distanceTo(e),s=-this.direction.dot(Ji),o=tr.dot(this.direction),a=-tr.dot(Ji),h=tr.lengthSq(),l=Math.abs(1-s*s);let u,c,d,f;if(l>0)if(u=s*a-o,c=s*o-a,f=n*l,u>=0)if(c>=-f)if(c<=f){const t=1/l;u*=t,c*=t,d=u*(u+s*c+2*o)+c*(s*u+c+2*a)+h}else c=n,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;else c=-n,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;else c<=-f?(u=Math.max(0,-(-s*n+o)),c=u>0?-n:Math.min(Math.max(-n,-a),n),d=-u*u+c*(c+2*a)+h):c<=f?(u=0,c=Math.min(Math.max(-n,-a),n),d=c*(c+2*a)+h):(u=Math.max(0,-(s*n+o)),c=u>0?n:Math.min(Math.max(-n,-a),n),d=-u*u+c*(c+2*a)+h);else c=s>0?-n:n,u=Math.max(0,-(s*c+o)),d=-u*u+c*(c+2*a)+h;return i&&i.copy(this.origin).addScaledVector(this.direction,u),r&&r.copy(Qi).addScaledVector(Ji,c),d}intersectSphere(t,e){$i.subVectors(t.center,this.origin);const i=$i.dot(this.direction),r=$i.dot($i)-i*i,n=t.radius*t.radius;if(r>n)return null;const s=Math.sqrt(n-r),o=i-s,a=i+s;return a<0?null:o<0?this.at(a,e):this.at(o,e)}intersectsSphere(t){return this.distanceSqToPoint(t.center)<=t.radius*t.radius}distanceToPlane(t){const e=t.normal.dot(this.direction);if(0===e)return 0===t.distanceToPoint(this.origin)?0:null;const i=-(this.origin.dot(t.normal)+t.constant)/e;return i>=0?i:null}intersectPlane(t,e){const i=this.distanceToPlane(t);return null===i?null:this.at(i,e)}intersectsPlane(t){const e=t.distanceToPoint(this.origin);return 0===e||t.normal.dot(this.direction)*e<0}intersectBox(t,e){let i,r,n,s,o,a;const h=1/this.direction.x,l=1/this.direction.y,u=1/this.direction.z,c=this.origin;return h>=0?(i=(t.min.x-c.x)*h,r=(t.max.x-c.x)*h):(i=(t.max.x-c.x)*h,r=(t.min.x-c.x)*h),l>=0?(n=(t.min.y-c.y)*l,s=(t.max.y-c.y)*l):(n=(t.max.y-c.y)*l,s=(t.min.y-c.y)*l),i>s||n>r?null:((n>i||isNaN(i))&&(i=n),(s<r||isNaN(r))&&(r=s),u>=0?(o=(t.min.z-c.z)*u,a=(t.max.z-c.z)*u):(o=(t.max.z-c.z)*u,a=(t.min.z-c.z)*u),i>a||o>r?null:((o>i||i!=i)&&(i=o),(a<r||r!=r)&&(r=a),r<0?null:this.at(i>=0?i:r,e)))}intersectsBox(t){return null!==this.intersectBox(t,$i)}intersectTriangle(t,e,i,r,n){er.subVectors(e,t),ir.subVectors(i,t),rr.crossVectors(er,ir);let s,o=this.direction.dot(rr);if(o>0){if(r)return null;s=1}else{if(!(o<0))return null;s=-1,o=-o}tr.subVectors(this.origin,t);const a=s*this.direction.dot(ir.crossVectors(tr,ir));if(a<0)return null;const h=s*this.direction.dot(er.cross(tr));if(h<0)return null;if(a+h>o)return null;const l=-s*tr.dot(rr);return l<0?null:this.at(l/o,n)}applyMatrix4(t){return this.origin.applyMatrix4(t),this.direction.transformDirection(t),this}equals(t){return t.origin.equals(this.origin)&&t.direction.equals(this.direction)}clone(){return(new this.constructor).copy(this)}}class sr{constructor(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,m){sr.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],void 0!==t&&this.set(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,m)}set(t,e,i,r,n,s,o,a,h,l,u,c,d,f,p,m){const g=this.elements;return g[0]=t,g[4]=e,g[8]=i,g[12]=r,g[1]=n,g[5]=s,g[9]=o,g[13]=a,g[2]=h,g[6]=l,g[10]=u,g[14]=c,g[3]=d,g[7]=f,g[11]=p,g[15]=m,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return(new sr).fromArray(this.elements)}copy(t){const e=this.elements,i=t.elements;return e[0]=i[0],e[1]=i[1],e[2]=i[2],e[3]=i[3],e[4]=i[4],e[5]=i[5],e[6]=i[6],e[7]=i[7],e[8]=i[8],e[9]=i[9],e[10]=i[10],e[11]=i[11],e[12]=i[12],e[13]=i[13],e[14]=i[14],e[15]=i[15],this}copyPosition(t){const e=this.elements,i=t.elements;return e[12]=i[12],e[13]=i[13],e[14]=i[14],this}setFromMatrix3(t){const e=t.elements;return this.set(e[0],e[3],e[6],0,e[1],e[4],e[7],0,e[2],e[5],e[8],0,0,0,0,1),this}extractBasis(t,e,i){return t.setFromMatrixColumn(this,0),e.setFromMatrixColumn(this,1),i.setFromMatrixColumn(this,2),this}makeBasis(t,e,i){return this.set(t.x,e.x,i.x,0,t.y,e.y,i.y,0,t.z,e.z,i.z,0,0,0,0,1),this}extractRotation(t){const e=this.elements,i=t.elements,r=1/or.setFromMatrixColumn(t,0).length(),n=1/or.setFromMatrixColumn(t,1).length(),s=1/or.setFromMatrixColumn(t,2).length();return e[0]=i[0]*r,e[1]=i[1]*r,e[2]=i[2]*r,e[3]=0,e[4]=i[4]*n,e[5]=i[5]*n,e[6]=i[6]*n,e[7]=0,e[8]=i[8]*s,e[9]=i[9]*s,e[10]=i[10]*s,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromEuler(t){const e=this.elements,i=t.x,r=t.y,n=t.z,s=Math.cos(i),o=Math.sin(i),a=Math.cos(r),h=Math.sin(r),l=Math.cos(n),u=Math.sin(n);if("XYZ"===t.order){const t=s*l,i=s*u,r=o*l,n=o*u;e[0]=a*l,e[4]=-a*u,e[8]=h,e[1]=i+r*h,e[5]=t-n*h,e[9]=-o*a,e[2]=n-t*h,e[6]=r+i*h,e[10]=s*a}else if("YXZ"===t.order){const t=a*l,i=a*u,r=h*l,n=h*u;e[0]=t+n*o,e[4]=r*o-i,e[8]=s*h,e[1]=s*u,e[5]=s*l,e[9]=-o,e[2]=i*o-r,e[6]=n+t*o,e[10]=s*a}else if("ZXY"===t.order){const t=a*l,i=a*u,r=h*l,n=h*u;e[0]=t-n*o,e[4]=-s*u,e[8]=r+i*o,e[1]=i+r*o,e[5]=s*l,e[9]=n-t*o,e[2]=-s*h,e[6]=o,e[10]=s*a}else if("ZYX"===t.order){const t=s*l,i=s*u,r=o*l,n=o*u;e[0]=a*l,e[4]=r*h-i,e[8]=t*h+n,e[1]=a*u,e[5]=n*h+t,e[9]=i*h-r,e[2]=-h,e[6]=o*a,e[10]=s*a}else if("YZX"===t.order){const t=s*a,i=s*h,r=o*a,n=o*h;e[0]=a*l,e[4]=n-t*u,e[8]=r*u+i,e[1]=u,e[5]=s*l,e[9]=-o*l,e[2]=-h*l,e[6]=i*u+r,e[10]=t-n*u}else if("XZY"===t.order){const t=s*a,i=s*h,r=o*a,n=o*h;e[0]=a*l,e[4]=-u,e[8]=h*l,e[1]=t*u+n,e[5]=s*l,e[9]=i*u-r,e[2]=r*u-i,e[6]=o*l,e[10]=n*u+t}return e[3]=0,e[7]=0,e[11]=0,e[12]=0,e[13]=0,e[14]=0,e[15]=1,this}makeRotationFromQuaternion(t){return this.compose(hr,t,lr)}lookAt(t,e,i){const r=this.elements;return dr.subVectors(t,e),0===dr.lengthSq()&&(dr.z=1),dr.normalize(),ur.crossVectors(i,dr),0===ur.lengthSq()&&(1===Math.abs(i.z)?dr.x+=1e-4:dr.z+=1e-4,dr.normalize(),ur.crossVectors(i,dr)),ur.normalize(),cr.crossVectors(dr,ur),r[0]=ur.x,r[4]=cr.x,r[8]=dr.x,r[1]=ur.y,r[5]=cr.y,r[9]=dr.y,r[2]=ur.z,r[6]=cr.z,r[10]=dr.z,this}multiply(t){return this.multiplyMatrices(this,t)}premultiply(t){return this.multiplyMatrices(t,this)}multiplyMatrices(t,e){const i=t.elements,r=e.elements,n=this.elements,s=i[0],o=i[4],a=i[8],h=i[12],l=i[1],u=i[5],c=i[9],d=i[13],f=i[2],p=i[6],m=i[10],g=i[14],v=i[3],y=i[7],b=i[11],_=i[15],x=r[0],w=r[4],M=r[8],S=r[12],A=r[1],E=r[5],T=r[9],R=r[13],P=r[2],C=r[6],I=r[10],k=r[14],B=r[3],O=r[7],L=r[11],U=r[15];return n[0]=s*x+o*A+a*P+h*B,n[4]=s*w+o*E+a*C+h*O,n[8]=s*M+o*T+a*I+h*L,n[12]=s*S+o*R+a*k+h*U,n[1]=l*x+u*A+c*P+d*B,n[5]=l*w+u*E+c*C+d*O,n[9]=l*M+u*T+c*I+d*L,n[13]=l*S+u*R+c*k+d*U,n[2]=f*x+p*A+m*P+g*B,n[6]=f*w+p*E+m*C+g*O,n[10]=f*M+p*T+m*I+g*L,n[14]=f*S+p*R+m*k+g*U,n[3]=v*x+y*A+b*P+_*B,n[7]=v*w+y*E+b*C+_*O,n[11]=v*M+y*T+b*I+_*L,n[15]=v*S+y*R+b*k+_*U,this}multiplyScalar(t){const e=this.elements;return e[0]*=t,e[4]*=t,e[8]*=t,e[12]*=t,e[1]*=t,e[5]*=t,e[9]*=t,e[13]*=t,e[2]*=t,e[6]*=t,e[10]*=t,e[14]*=t,e[3]*=t,e[7]*=t,e[11]*=t,e[15]*=t,this}determinant(){const t=this.elements,e=t[0],i=t[4],r=t[8],n=t[12],s=t[1],o=t[5],a=t[9],h=t[13],l=t[2],u=t[6],c=t[10],d=t[14];return t[3]*(+n*a*u-r*h*u-n*o*c+i*h*c+r*o*d-i*a*d)+t[7]*(+e*a*d-e*h*c+n*s*c-r*s*d+r*h*l-n*a*l)+t[11]*(+e*h*u-e*o*d-n*s*u+i*s*d+n*o*l-i*h*l)+t[15]*(-r*o*l-e*a*u+e*o*c+r*s*u-i*s*c+i*a*l)}transpose(){const t=this.elements;let e;return e=t[1],t[1]=t[4],t[4]=e,e=t[2],t[2]=t[8],t[8]=e,e=t[6],t[6]=t[9],t[9]=e,e=t[3],t[3]=t[12],t[12]=e,e=t[7],t[7]=t[13],t[13]=e,e=t[11],t[11]=t[14],t[14]=e,this}setPosition(t,e,i){const r=this.elements;return t.isVector3?(r[12]=t.x,r[13]=t.y,r[14]=t.z):(r[12]=t,r[13]=e,r[14]=i),this}invert(){const t=this.elements,e=t[0],i=t[1],r=t[2],n=t[3],s=t[4],o=t[5],a=t[6],h=t[7],l=t[8],u=t[9],c=t[10],d=t[11],f=t[12],p=t[13],m=t[14],g=t[15],v=u*m*h-p*c*h+p*a*d-o*m*d-u*a*g+o*c*g,y=f*c*h-l*m*h-f*a*d+s*m*d+l*a*g-s*c*g,b=l*p*h-f*u*h+f*o*d-s*p*d-l*o*g+s*u*g,_=f*u*a-l*p*a-f*o*c+s*p*c+l*o*m-s*u*m,x=e*v+i*y+r*b+n*_;if(0===x)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const w=1/x;return t[0]=v*w,t[1]=(p*c*n-u*m*n-p*r*d+i*m*d+u*r*g-i*c*g)*w,t[2]=(o*m*n-p*a*n+p*r*h-i*m*h-o*r*g+i*a*g)*w,t[3]=(u*a*n-o*c*n-u*r*h+i*c*h+o*r*d-i*a*d)*w,t[4]=y*w,t[5]=(l*m*n-f*c*n+f*r*d-e*m*d-l*r*g+e*c*g)*w,t[6]=(f*a*n-s*m*n-f*r*h+e*m*h+s*r*g-e*a*g)*w,t[7]=(s*c*n-l*a*n+l*r*h-e*c*h-s*r*d+e*a*d)*w,t[8]=b*w,t[9]=(f*u*n-l*p*n-f*i*d+e*p*d+l*i*g-e*u*g)*w,t[10]=(s*p*n-f*o*n+f*i*h-e*p*h-s*i*g+e*o*g)*w,t[11]=(l*o*n-s*u*n-l*i*h+e*u*h+s*i*d-e*o*d)*w,t[12]=_*w,t[13]=(l*p*r-f*u*r+f*i*c-e*p*c-l*i*m+e*u*m)*w,t[14]=(f*o*r-s*p*r-f*i*a+e*p*a+s*i*m-e*o*m)*w,t[15]=(s*u*r-l*o*r+l*i*a-e*u*a-s*i*c+e*o*c)*w,this}scale(t){const e=this.elements,i=t.x,r=t.y,n=t.z;return e[0]*=i,e[4]*=r,e[8]*=n,e[1]*=i,e[5]*=r,e[9]*=n,e[2]*=i,e[6]*=r,e[10]*=n,e[3]*=i,e[7]*=r,e[11]*=n,this}getMaxScaleOnAxis(){const t=this.elements,e=t[0]*t[0]+t[1]*t[1]+t[2]*t[2],i=t[4]*t[4]+t[5]*t[5]+t[6]*t[6],r=t[8]*t[8]+t[9]*t[9]+t[10]*t[10];return Math.sqrt(Math.max(e,i,r))}makeTranslation(t,e,i){return t.isVector3?this.set(1,0,0,t.x,0,1,0,t.y,0,0,1,t.z,0,0,0,1):this.set(1,0,0,t,0,1,0,e,0,0,1,i,0,0,0,1),this}makeRotationX(t){const e=Math.cos(t),i=Math.sin(t);return this.set(1,0,0,0,0,e,-i,0,0,i,e,0,0,0,0,1),this}makeRotationY(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,0,i,0,0,1,0,0,-i,0,e,0,0,0,0,1),this}makeRotationZ(t){const e=Math.cos(t),i=Math.sin(t);return this.set(e,-i,0,0,i,e,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(t,e){const i=Math.cos(e),r=Math.sin(e),n=1-i,s=t.x,o=t.y,a=t.z,h=n*s,l=n*o;return this.set(h*s+i,h*o-r*a,h*a+r*o,0,h*o+r*a,l*o+i,l*a-r*s,0,h*a-r*o,l*a+r*s,n*a*a+i,0,0,0,0,1),this}makeScale(t,e,i){return this.set(t,0,0,0,0,e,0,0,0,0,i,0,0,0,0,1),this}makeShear(t,e,i,r,n,s){return this.set(1,i,n,0,t,1,s,0,e,r,1,0,0,0,0,1),this}compose(t,e,i){const r=this.elements,n=e._x,s=e._y,o=e._z,a=e._w,h=n+n,l=s+s,u=o+o,c=n*h,d=n*l,f=n*u,p=s*l,m=s*u,g=o*u,v=a*h,y=a*l,b=a*u,_=i.x,x=i.y,w=i.z;return r[0]=(1-(p+g))*_,r[1]=(d+b)*_,r[2]=(f-y)*_,r[3]=0,r[4]=(d-b)*x,r[5]=(1-(c+g))*x,r[6]=(m+v)*x,r[7]=0,r[8]=(f+y)*w,r[9]=(m-v)*w,r[10]=(1-(c+p))*w,r[11]=0,r[12]=t.x,r[13]=t.y,r[14]=t.z,r[15]=1,this}decompose(t,e,i){const r=this.elements;let n=or.set(r[0],r[1],r[2]).length();const s=or.set(r[4],r[5],r[6]).length(),o=or.set(r[8],r[9],r[10]).length();this.determinant()<0&&(n=-n),t.x=r[12],t.y=r[13],t.z=r[14],ar.copy(this);const a=1/n,h=1/s,l=1/o;return ar.elements[0]*=a,ar.elements[1]*=a,ar.elements[2]*=a,ar.elements[4]*=h,ar.elements[5]*=h,ar.elements[6]*=h,ar.elements[8]*=l,ar.elements[9]*=l,ar.elements[10]*=l,e.setFromRotationMatrix(ar),i.x=n,i.y=s,i.z=o,this}makePerspective(t,e,i,r,n,s,o=je){const a=this.elements,h=2*n/(e-t),l=2*n/(i-r),u=(e+t)/(e-t),c=(i+r)/(i-r);let d,f;if(o===je)d=-(s+n)/(s-n),f=-2*s*n/(s-n);else{if(o!==Ve)throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+o);d=-s/(s-n),f=-s*n/(s-n)}return a[0]=h,a[4]=0,a[8]=u,a[12]=0,a[1]=0,a[5]=l,a[9]=c,a[13]=0,a[2]=0,a[6]=0,a[10]=d,a[14]=f,a[3]=0,a[7]=0,a[11]=-1,a[15]=0,this}makeOrthographic(t,e,i,r,n,s,o=je){const a=this.elements,h=1/(e-t),l=1/(i-r),u=1/(s-n),c=(e+t)*h,d=(i+r)*l;let f,p;if(o===je)f=(s+n)*u,p=-2*u;else{if(o!==Ve)throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+o);f=n*u,p=-1*u}return a[0]=2*h,a[4]=0,a[8]=0,a[12]=-c,a[1]=0,a[5]=2*l,a[9]=0,a[13]=-d,a[2]=0,a[6]=0,a[10]=p,a[14]=-f,a[3]=0,a[7]=0,a[11]=0,a[15]=1,this}equals(t){const e=this.elements,i=t.elements;for(let t=0;t<16;t++)if(e[t]!==i[t])return!1;return!0}fromArray(t,e=0){for(let i=0;i<16;i++)this.elements[i]=t[i+e];return this}toArray(t=[],e=0){const i=this.elements;return t[e]=i[0],t[e+1]=i[1],t[e+2]=i[2],t[e+3]=i[3],t[e+4]=i[4],t[e+5]=i[5],t[e+6]=i[6],t[e+7]=i[7],t[e+8]=i[8],t[e+9]=i[9],t[e+10]=i[10],t[e+11]=i[11],t[e+12]=i[12],t[e+13]=i[13],t[e+14]=i[14],t[e+15]=i[15],t}}const or=new Pi,ar=new sr,hr=new Pi(0,0,0),lr=new Pi(1,1,1),ur=new Pi,cr=new Pi,dr=new Pi,fr=new sr,pr=new Ri;class mr{constructor(t=0,e=0,i=0,r=mr.DEFAULT_ORDER){this.isEuler=!0,this._x=t,this._y=e,this._z=i,this._order=r}get x(){return this._x}set x(t){this._x=t,this._onChangeCallback()}get y(){return this._y}set y(t){this._y=t,this._onChangeCallback()}get z(){return this._z}set z(t){this._z=t,this._onChangeCallback()}get order(){return this._order}set order(t){this._order=t,this._onChangeCallback()}set(t,e,i,r=this._order){return this._x=t,this._y=e,this._z=i,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(t){return this._x=t._x,this._y=t._y,this._z=t._z,this._order=t._order,this._onChangeCallback(),this}setFromRotationMatrix(t,e=this._order,i=!0){const n=t.elements,s=n[0],o=n[4],a=n[8],h=n[1],l=n[5],u=n[9],c=n[2],d=n[6],f=n[10];switch(e){case"XYZ":this._y=Math.asin(Ze(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-u,f),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(d,l),this._z=0);break;case"YXZ":this._x=Math.asin(-Ze(u,-1,1)),Math.abs(u)<.9999999?(this._y=Math.atan2(a,f),this._z=Math.atan2(h,l)):(this._y=Math.atan2(-c,s),this._z=0);break;case"ZXY":this._x=Math.asin(Ze(d,-1,1)),Math.abs(d)<.9999999?(this._y=Math.atan2(-c,f),this._z=Math.atan2(-o,l)):(this._y=0,this._z=Math.atan2(h,s));break;case"ZYX":this._y=Math.asin(-Ze(c,-1,1)),Math.abs(c)<.9999999?(this._x=Math.atan2(d,f),this._z=Math.atan2(h,s)):(this._x=0,this._z=Math.atan2(-o,l));break;case"YZX":this._z=Math.asin(Ze(h,-1,1)),Math.abs(h)<.9999999?(this._x=Math.atan2(-u,l),this._y=Math.atan2(-c,s)):(this._x=0,this._y=Math.atan2(a,f));break;case"XZY":this._z=Math.asin(-Ze(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(d,l),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-u,f),this._y=0);break;default:r.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+e)}return this._order=e,!0===i&&this._onChangeCallback(),this}setFromQuaternion(t,e,i){return fr.makeRotationFromQuaternion(t),this.setFromRotationMatrix(fr,e,i)}setFromVector3(t,e=this._order){return this.set(t.x,t.y,t.z,e)}reorder(t){return pr.setFromEuler(this),this.setFromQuaternion(pr,t)}equals(t){return t._x===this._x&&t._y===this._y&&t._z===this._z&&t._order===this._order}fromArray(t){return this._x=t[0],this._y=t[1],this._z=t[2],void 0!==t[3]&&(this._order=t[3]),this._onChangeCallback(),this}toArray(t=[],e=0){return t[e]=this._x,t[e+1]=this._y,t[e+2]=this._z,t[e+3]=this._order,t}_onChange(t){return this._onChangeCallback=t,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}mr.DEFAULT_ORDER="XYZ";class gr{constructor(){this.mask=1}set(t){this.mask=1<<t>>>0}enable(t){this.mask|=1<<t}enableAll(){this.mask=-1}toggle(t){this.mask^=1<<t}disable(t){this.mask&=~(1<<t)}disableAll(){this.mask=0}test(t){return 0!==(this.mask&t.mask)}isEnabled(t){return!!(this.mask&1<<t)}}let vr=0;const yr=new Pi,br=new Ri,_r=new sr,xr=new Pi,wr=new Pi,Mr=new Pi,Sr=new Ri,Ar=new Pi(1,0,0),Er=new Pi(0,1,0),Tr=new Pi(0,0,1),Rr={type:"added"},Pr={type:"removed"},Cr={type:"childadded",child:null},Ir={type:"childremoved",child:null};class kr extends He{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:vr++}),this.uuid=Ye(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=kr.DEFAULT_UP.clone();const t=new Pi,e=new mr,i=new Ri,r=new Pi(1,1,1);e._onChange(function(){i.setFromEuler(e,!1)}),i._onChange(function(){e.setFromQuaternion(i,void 0,!1)}),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:t},rotation:{configurable:!0,enumerable:!0,value:e},quaternion:{configurable:!0,enumerable:!0,value:i},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new sr},normalMatrix:{value:new ti}}),this.matrix=new sr,this.matrixWorld=new sr,this.matrixAutoUpdate=kr.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new gr,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(t){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(t),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(t){return this.quaternion.premultiply(t),this}setRotationFromAxisAngle(t,e){this.quaternion.setFromAxisAngle(t,e)}setRotationFromEuler(t){this.quaternion.setFromEuler(t,!0)}setRotationFromMatrix(t){this.quaternion.setFromRotationMatrix(t)}setRotationFromQuaternion(t){this.quaternion.copy(t)}rotateOnAxis(t,e){return br.setFromAxisAngle(t,e),this.quaternion.multiply(br),this}rotateOnWorldAxis(t,e){return br.setFromAxisAngle(t,e),this.quaternion.premultiply(br),this}rotateX(t){return this.rotateOnAxis(Ar,t)}rotateY(t){return this.rotateOnAxis(Er,t)}rotateZ(t){return this.rotateOnAxis(Tr,t)}translateOnAxis(t,e){return yr.copy(t).applyQuaternion(this.quaternion),this.position.add(yr.multiplyScalar(e)),this}translateX(t){return this.translateOnAxis(Ar,t)}translateY(t){return this.translateOnAxis(Er,t)}translateZ(t){return this.translateOnAxis(Tr,t)}localToWorld(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(this.matrixWorld)}worldToLocal(t){return this.updateWorldMatrix(!0,!1),t.applyMatrix4(_r.copy(this.matrixWorld).invert())}lookAt(t,e,i){t.isVector3?xr.copy(t):xr.set(t,e,i);const r=this.parent;this.updateWorldMatrix(!0,!1),wr.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?_r.lookAt(wr,xr,this.up):_r.lookAt(xr,wr,this.up),this.quaternion.setFromRotationMatrix(_r),r&&(_r.extractRotation(r.matrixWorld),br.setFromRotationMatrix(_r),this.quaternion.premultiply(br.invert()))}add(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return t===this?(r.error("THREE.Object3D.add: object can't be added as a child of itself.",t),this):(t&&t.isObject3D?(t.removeFromParent(),t.parent=this,this.children.push(t),t.dispatchEvent(Rr),Cr.child=t,this.dispatchEvent(Cr),Cr.child=null):r.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",t),this)}remove(t){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.remove(arguments[t]);return this}const e=this.children.indexOf(t);return-1!==e&&(t.parent=null,this.children.splice(e,1),t.dispatchEvent(Pr),Ir.child=t,this.dispatchEvent(Ir),Ir.child=null),this}removeFromParent(){const t=this.parent;return null!==t&&t.remove(this),this}clear(){return this.remove(...this.children)}attach(t){return this.updateWorldMatrix(!0,!1),_r.copy(this.matrixWorld).invert(),null!==t.parent&&(t.parent.updateWorldMatrix(!0,!1),_r.multiply(t.parent.matrixWorld)),t.applyMatrix4(_r),t.removeFromParent(),t.parent=this,this.children.push(t),t.updateWorldMatrix(!1,!0),t.dispatchEvent(Rr),Cr.child=t,this.dispatchEvent(Cr),Cr.child=null,this}getObjectById(t){return this.getObjectByProperty("id",t)}getObjectByName(t){return this.getObjectByProperty("name",t)}getObjectByProperty(t,e){if(this[t]===e)return this;for(let i=0,r=this.children.length;i<r;i++){const r=this.children[i].getObjectByProperty(t,e);if(void 0!==r)return r}}getObjectsByProperty(t,e,i=[]){this[t]===e&&i.push(this);const r=this.children;for(let n=0,s=r.length;n<s;n++)r[n].getObjectsByProperty(t,e,i);return i}getWorldPosition(t){return this.updateWorldMatrix(!0,!1),t.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wr,t,Mr),t}getWorldScale(t){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(wr,Sr,t),t}getWorldDirection(t){this.updateWorldMatrix(!0,!1);const e=this.matrixWorld.elements;return t.set(e[8],e[9],e[10]).normalize()}raycast(){}traverse(t){t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverse(t)}traverseVisible(t){if(!1===this.visible)return;t(this);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].traverseVisible(t)}traverseAncestors(t){const e=this.parent;null!==e&&(t(e),e.traverseAncestors(t))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(t){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||t)&&(!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,t=!0);const e=this.children;for(let i=0,r=e.length;i<r;i++)e[i].updateMatrixWorld(t)}updateWorldMatrix(t,e){const i=this.parent;if(!0===t&&null!==i&&i.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),!0===this.matrixWorldAutoUpdate&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),!0===e){const t=this.children;for(let e=0,i=t.length;e<i;e++)t[e].updateWorldMatrix(!1,!0)}}toJSON(t){const e=void 0===t||"string"==typeof t,i={};e&&(t={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},i.metadata={version:4.6,type:"Object",generator:"Object3D.toJSON"});const r={};function n(e,i){return void 0===e[i.uuid]&&(e[i.uuid]=i.toJSON(t)),i.uuid}if(r.uuid=this.uuid,r.type=this.type,""!==this.name&&(r.name=this.name),!0===this.castShadow&&(r.castShadow=!0),!0===this.receiveShadow&&(r.receiveShadow=!0),!1===this.visible&&(r.visible=!1),!1===this.frustumCulled&&(r.frustumCulled=!1),0!==this.renderOrder&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),!1===this.matrixAutoUpdate&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),null!==this.instanceColor&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.visibility=this._visibility,r.active=this._active,r.bounds=this._bounds.map(t=>({boxInitialized:t.boxInitialized,boxMin:t.box.min.toArray(),boxMax:t.box.max.toArray(),sphereInitialized:t.sphereInitialized,sphereRadius:t.sphere.radius,sphereCenter:t.sphere.center.toArray()})),r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.geometryCount=this._geometryCount,r.matricesTexture=this._matricesTexture.toJSON(t),null!==this._colorsTexture&&(r.colorsTexture=this._colorsTexture.toJSON(t)),null!==this.boundingSphere&&(r.boundingSphere={center:r.boundingSphere.center.toArray(),radius:r.boundingSphere.radius}),null!==this.boundingBox&&(r.boundingBox={min:r.boundingBox.min.toArray(),max:r.boundingBox.max.toArray()})),this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(t).uuid)),this.environment&&this.environment.isTexture&&!0!==this.environment.isRenderTargetTexture&&(r.environment=this.environment.toJSON(t).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=n(t.geometries,this.geometry);const e=this.geometry.parameters;if(void 0!==e&&void 0!==e.shapes){const i=e.shapes;if(Array.isArray(i))for(let e=0,r=i.length;e<r;e++){const r=i[e];n(t.shapes,r)}else n(t.shapes,i)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),void 0!==this.skeleton&&(n(t.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),void 0!==this.material)if(Array.isArray(this.material)){const e=[];for(let i=0,r=this.material.length;i<r;i++)e.push(n(t.materials,this.material[i]));r.material=e}else r.material=n(t.materials,this.material);if(this.children.length>0){r.children=[];for(let e=0;e<this.children.length;e++)r.children.push(this.children[e].toJSON(t).object)}if(this.animations.length>0){r.animations=[];for(let e=0;e<this.animations.length;e++){const i=this.animations[e];r.animations.push(n(t.animations,i))}}if(e){const e=s(t.geometries),r=s(t.materials),n=s(t.textures),o=s(t.images),a=s(t.shapes),h=s(t.skeletons),l=s(t.animations),u=s(t.nodes);e.length>0&&(i.geometries=e),r.length>0&&(i.materials=r),n.length>0&&(i.textures=n),o.length>0&&(i.images=o),a.length>0&&(i.shapes=a),h.length>0&&(i.skeletons=h),l.length>0&&(i.animations=l),u.length>0&&(i.nodes=u)}return i.object=r,i;function s(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}}clone(t){return(new this.constructor).copy(this,t)}copy(t,e=!0){if(this.name=t.name,this.up.copy(t.up),this.position.copy(t.position),this.rotation.order=t.rotation.order,this.quaternion.copy(t.quaternion),this.scale.copy(t.scale),this.matrix.copy(t.matrix),this.matrixWorld.copy(t.matrixWorld),this.matrixAutoUpdate=t.matrixAutoUpdate,this.matrixWorldAutoUpdate=t.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=t.matrixWorldNeedsUpdate,this.layers.mask=t.layers.mask,this.visible=t.visible,this.castShadow=t.castShadow,this.receiveShadow=t.receiveShadow,this.frustumCulled=t.frustumCulled,this.renderOrder=t.renderOrder,this.animations=t.animations.slice(),this.userData=JSON.parse(JSON.stringify(t.userData)),!0===e)for(let e=0;e<t.children.length;e++){const i=t.children[e];this.add(i.clone())}return this}}kr.DEFAULT_UP=new Pi(0,1,0),kr.DEFAULT_MATRIX_AUTO_UPDATE=!0,kr.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const Br=new Pi,Or=new Pi,Lr=new Pi,Ur=new Pi,Dr=new Pi,Nr=new Pi,Fr=new Pi,zr=new Pi,Gr=new Pi,jr=new Pi,Vr=new Mi,Hr=new Mi,Wr=new Mi;class Xr{constructor(t=new Pi,e=new Pi,i=new Pi){this.a=t,this.b=e,this.c=i}static getNormal(t,e,i,r){r.subVectors(i,e),Br.subVectors(t,e),r.cross(Br);const n=r.lengthSq();return n>0?r.multiplyScalar(1/Math.sqrt(n)):r.set(0,0,0)}static getBarycoord(t,e,i,r,n){Br.subVectors(r,e),Or.subVectors(i,e),Lr.subVectors(t,e);const s=Br.dot(Br),o=Br.dot(Or),a=Br.dot(Lr),h=Or.dot(Or),l=Or.dot(Lr),u=s*h-o*o;if(0===u)return n.set(0,0,0),null;const c=1/u,d=(h*a-o*l)*c,f=(s*l-o*a)*c;return n.set(1-d-f,f,d)}static containsPoint(t,e,i,r){return null!==this.getBarycoord(t,e,i,r,Ur)&&Ur.x>=0&&Ur.y>=0&&Ur.x+Ur.y<=1}static getInterpolation(t,e,i,r,n,s,o,a){return null===this.getBarycoord(t,e,i,r,Ur)?(a.x=0,a.y=0,"z"in a&&(a.z=0),"w"in a&&(a.w=0),null):(a.setScalar(0),a.addScaledVector(n,Ur.x),a.addScaledVector(s,Ur.y),a.addScaledVector(o,Ur.z),a)}static getInterpolatedAttribute(t,e,i,r,n,s){return Vr.setScalar(0),Hr.setScalar(0),Wr.setScalar(0),Vr.fromBufferAttribute(t,e),Hr.fromBufferAttribute(t,i),Wr.fromBufferAttribute(t,r),s.setScalar(0),s.addScaledVector(Vr,n.x),s.addScaledVector(Hr,n.y),s.addScaledVector(Wr,n.z),s}static isFrontFacing(t,e,i,r){return Br.subVectors(i,e),Or.subVectors(t,e),Br.cross(Or).dot(r)<0}set(t,e,i){return this.a.copy(t),this.b.copy(e),this.c.copy(i),this}setFromPointsAndIndices(t,e,i,r){return this.a.copy(t[e]),this.b.copy(t[i]),this.c.copy(t[r]),this}setFromAttributeAndIndices(t,e,i,r){return this.a.fromBufferAttribute(t,e),this.b.fromBufferAttribute(t,i),this.c.fromBufferAttribute(t,r),this}clone(){return(new this.constructor).copy(this)}copy(t){return this.a.copy(t.a),this.b.copy(t.b),this.c.copy(t.c),this}getArea(){return Br.subVectors(this.c,this.b),Or.subVectors(this.a,this.b),.5*Br.cross(Or).length()}getMidpoint(t){return t.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(t){return Xr.getNormal(this.a,this.b,this.c,t)}getPlane(t){return t.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(t,e){return Xr.getBarycoord(t,this.a,this.b,this.c,e)}getInterpolation(t,e,i,r,n){return Xr.getInterpolation(t,this.a,this.b,this.c,e,i,r,n)}containsPoint(t){return Xr.containsPoint(t,this.a,this.b,this.c)}isFrontFacing(t){return Xr.isFrontFacing(this.a,this.b,this.c,t)}intersectsBox(t){return t.intersectsTriangle(this)}closestPointToPoint(t,e){const i=this.a,r=this.b,n=this.c;let s,o;Dr.subVectors(r,i),Nr.subVectors(n,i),zr.subVectors(t,i);const a=Dr.dot(zr),h=Nr.dot(zr);if(a<=0&&h<=0)return e.copy(i);Gr.subVectors(t,r);const l=Dr.dot(Gr),u=Nr.dot(Gr);if(l>=0&&u<=l)return e.copy(r);const c=a*u-l*h;if(c<=0&&a>=0&&l<=0)return s=a/(a-l),e.copy(i).addScaledVector(Dr,s);jr.subVectors(t,n);const d=Dr.dot(jr),f=Nr.dot(jr);if(f>=0&&d<=f)return e.copy(n);const p=d*h-a*f;if(p<=0&&h>=0&&f<=0)return o=h/(h-f),e.copy(i).addScaledVector(Nr,o);const m=l*f-d*u;if(m<=0&&u-l>=0&&d-f>=0)return Fr.subVectors(n,r),o=(u-l)/(u-l+(d-f)),e.copy(r).addScaledVector(Fr,o);const g=1/(m+p+c);return s=p*g,o=c*g,e.copy(i).addScaledVector(Dr,s).addScaledVector(Nr,o)}equals(t){return t.a.equals(this.a)&&t.b.equals(this.b)&&t.c.equals(this.c)}}const qr={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},Yr={h:0,s:0,l:0},Zr={h:0,s:0,l:0};function Kr(t,e,i){return i<0&&(i+=1),i>1&&(i-=1),i<1/6?t+6*(e-t)*i:i<.5?e:i<2/3?t+6*(e-t)*(2/3-i):t}class $r{constructor(t,e,i){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(t,e,i)}set(t,e,i){if(void 0===e&&void 0===i){const e=t;e&&e.isColor?this.copy(e):"number"==typeof e?this.setHex(e):"string"==typeof e&&this.setStyle(e)}else this.setRGB(t,e,i);return this}setScalar(t){return this.r=t,this.g=t,this.b=t,this}setHex(t,e=Re){return t=Math.floor(t),this.r=(t>>16&255)/255,this.g=(t>>8&255)/255,this.b=(255&t)/255,fi.toWorkingColorSpace(this,e),this}setRGB(t,e,i,r=fi.workingColorSpace){return this.r=t,this.g=e,this.b=i,fi.toWorkingColorSpace(this,r),this}setHSL(t,e,i,r=fi.workingColorSpace){if(t=(t%(n=1)+n)%n,e=Ze(e,0,1),i=Ze(i,0,1),0===e)this.r=this.g=this.b=i;else{const r=i<=.5?i*(1+e):i+e-i*e,n=2*i-r;this.r=Kr(n,r,t+1/3),this.g=Kr(n,r,t),this.b=Kr(n,r,t-1/3)}var n;return fi.toWorkingColorSpace(this,r),this}setStyle(t,e=Re){function i(e){void 0!==e&&parseFloat(e)<1&&r.warn("THREE.Color: Alpha component of "+t+" will be ignored.")}let n;if(n=/^(\w+)\(([^\)]*)\)/.exec(t)){let s;const o=n[1],a=n[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,e);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,e);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return i(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,e);break;default:r.warn("THREE.Color: Unknown color model "+t)}}else if(n=/^\#([A-Fa-f\d]+)$/.exec(t)){const i=n[1],s=i.length;if(3===s)return this.setRGB(parseInt(i.charAt(0),16)/15,parseInt(i.charAt(1),16)/15,parseInt(i.charAt(2),16)/15,e);if(6===s)return this.setHex(parseInt(i,16),e);r.warn("THREE.Color: Invalid hex color "+t)}else if(t&&t.length>0)return this.setColorName(t,e);return this}setColorName(t,e=Re){const i=qr[t.toLowerCase()];return void 0!==i?this.setHex(i,e):r.warn("THREE.Color: Unknown color "+t),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(t){return this.r=t.r,this.g=t.g,this.b=t.b,this}copySRGBToLinear(t){return this.r=pi(t.r),this.g=pi(t.g),this.b=pi(t.b),this}copyLinearToSRGB(t){return this.r=mi(t.r),this.g=mi(t.g),this.b=mi(t.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(t=Re){return fi.fromWorkingColorSpace(Qr.copy(this),t),65536*Math.round(Ze(255*Qr.r,0,255))+256*Math.round(Ze(255*Qr.g,0,255))+Math.round(Ze(255*Qr.b,0,255))}getHexString(t=Re){return("000000"+this.getHex(t).toString(16)).slice(-6)}getHSL(t,e=fi.workingColorSpace){fi.fromWorkingColorSpace(Qr.copy(this),e);const i=Qr.r,r=Qr.g,n=Qr.b,s=Math.max(i,r,n),o=Math.min(i,r,n);let a,h;const l=(o+s)/2;if(o===s)a=0,h=0;else{const t=s-o;switch(h=l<=.5?t/(s+o):t/(2-s-o),s){case i:a=(r-n)/t+(r<n?6:0);break;case r:a=(n-i)/t+2;break;case n:a=(i-r)/t+4}a/=6}return t.h=a,t.s=h,t.l=l,t}getRGB(t,e=fi.workingColorSpace){return fi.fromWorkingColorSpace(Qr.copy(this),e),t.r=Qr.r,t.g=Qr.g,t.b=Qr.b,t}getStyle(t=Re){fi.fromWorkingColorSpace(Qr.copy(this),t);const e=Qr.r,i=Qr.g,r=Qr.b;return t!==Re?`color(${t} ${e.toFixed(3)} ${i.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(255*e)},${Math.round(255*i)},${Math.round(255*r)})`}offsetHSL(t,e,i){return this.getHSL(Yr),this.setHSL(Yr.h+t,Yr.s+e,Yr.l+i)}add(t){return this.r+=t.r,this.g+=t.g,this.b+=t.b,this}addColors(t,e){return this.r=t.r+e.r,this.g=t.g+e.g,this.b=t.b+e.b,this}addScalar(t){return this.r+=t,this.g+=t,this.b+=t,this}sub(t){return this.r=Math.max(0,this.r-t.r),this.g=Math.max(0,this.g-t.g),this.b=Math.max(0,this.b-t.b),this}multiply(t){return this.r*=t.r,this.g*=t.g,this.b*=t.b,this}multiplyScalar(t){return this.r*=t,this.g*=t,this.b*=t,this}lerp(t,e){return this.r+=(t.r-this.r)*e,this.g+=(t.g-this.g)*e,this.b+=(t.b-this.b)*e,this}lerpColors(t,e,i){return this.r=t.r+(e.r-t.r)*i,this.g=t.g+(e.g-t.g)*i,this.b=t.b+(e.b-t.b)*i,this}lerpHSL(t,e){this.getHSL(Yr),t.getHSL(Zr);const i=Ke(Yr.h,Zr.h,e),r=Ke(Yr.s,Zr.s,e),n=Ke(Yr.l,Zr.l,e);return this.setHSL(i,r,n),this}setFromVector3(t){return this.r=t.x,this.g=t.y,this.b=t.z,this}applyMatrix3(t){const e=this.r,i=this.g,r=this.b,n=t.elements;return this.r=n[0]*e+n[3]*i+n[6]*r,this.g=n[1]*e+n[4]*i+n[7]*r,this.b=n[2]*e+n[5]*i+n[8]*r,this}equals(t){return t.r===this.r&&t.g===this.g&&t.b===this.b}fromArray(t,e=0){return this.r=t[e],this.g=t[e+1],this.b=t[e+2],this}toArray(t=[],e=0){return t[e]=this.r,t[e+1]=this.g,t[e+2]=this.b,t}fromBufferAttribute(t,e){return this.r=t.getX(e),this.g=t.getY(e),this.b=t.getZ(e),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}}const Qr=new $r;$r.NAMES=qr;let Jr=0;class tn extends He{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:Jr++}),this.uuid=Ye(),this.name="",this.type="Material",this.blending=m,this.side=c,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=P,this.blendDst=C,this.blendEquation=_,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new $r(0,0,0),this.blendAlpha=0,this.depthFunc=V,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=519,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=ke,this.stencilZFail=ke,this.stencilZPass=ke,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(t){this._alphaTest>0!=t>0&&this.version++,this._alphaTest=t}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(t){if(void 0!==t)for(const e in t){const i=t[e];if(void 0===i){r.warn(`THREE.Material: parameter '${e}' has value of undefined.`);continue}const n=this[e];void 0!==n?n&&n.isColor?n.set(i):n&&n.isVector3&&i&&i.isVector3?n.copy(i):this[e]=i:r.warn(`THREE.Material: '${e}' is not a property of THREE.${this.type}.`)}}toJSON(t){const e=void 0===t||"string"==typeof t;e&&(t={textures:{},images:{}});const i={metadata:{version:4.6,type:"Material",generator:"Material.toJSON"}};function r(t){const e=[];for(const i in t){const r=t[i];delete r.metadata,e.push(r)}return e}if(i.uuid=this.uuid,i.type=this.type,""!==this.name&&(i.name=this.name),this.color&&this.color.isColor&&(i.color=this.color.getHex()),void 0!==this.roughness&&(i.roughness=this.roughness),void 0!==this.metalness&&(i.metalness=this.metalness),void 0!==this.sheen&&(i.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(i.sheenColor=this.sheenColor.getHex()),void 0!==this.sheenRoughness&&(i.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(i.emissive=this.emissive.getHex()),void 0!==this.emissiveIntensity&&1!==this.emissiveIntensity&&(i.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(i.specular=this.specular.getHex()),void 0!==this.specularIntensity&&(i.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(i.specularColor=this.specularColor.getHex()),void 0!==this.shininess&&(i.shininess=this.shininess),void 0!==this.clearcoat&&(i.clearcoat=this.clearcoat),void 0!==this.clearcoatRoughness&&(i.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(i.clearcoatMap=this.clearcoatMap.toJSON(t).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(i.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(t).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(i.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(t).uuid,i.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),void 0!==this.dispersion&&(i.dispersion=this.dispersion),void 0!==this.iridescence&&(i.iridescence=this.iridescence),void 0!==this.iridescenceIOR&&(i.iridescenceIOR=this.iridescenceIOR),void 0!==this.iridescenceThicknessRange&&(i.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(i.iridescenceMap=this.iridescenceMap.toJSON(t).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(i.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(t).uuid),void 0!==this.anisotropy&&(i.anisotropy=this.anisotropy),void 0!==this.anisotropyRotation&&(i.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(i.anisotropyMap=this.anisotropyMap.toJSON(t).uuid),this.map&&this.map.isTexture&&(i.map=this.map.toJSON(t).uuid),this.matcap&&this.matcap.isTexture&&(i.matcap=this.matcap.toJSON(t).uuid),this.alphaMap&&this.alphaMap.isTexture&&(i.alphaMap=this.alphaMap.toJSON(t).uuid),this.lightMap&&this.lightMap.isTexture&&(i.lightMap=this.lightMap.toJSON(t).uuid,i.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(i.aoMap=this.aoMap.toJSON(t).uuid,i.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(i.bumpMap=this.bumpMap.toJSON(t).uuid,i.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(i.normalMap=this.normalMap.toJSON(t).uuid,i.normalMapType=this.normalMapType,i.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(i.displacementMap=this.displacementMap.toJSON(t).uuid,i.displacementScale=this.displacementScale,i.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(i.roughnessMap=this.roughnessMap.toJSON(t).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(i.metalnessMap=this.metalnessMap.toJSON(t).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(i.emissiveMap=this.emissiveMap.toJSON(t).uuid),this.specularMap&&this.specularMap.isTexture&&(i.specularMap=this.specularMap.toJSON(t).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(i.specularIntensityMap=this.specularIntensityMap.toJSON(t).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(i.specularColorMap=this.specularColorMap.toJSON(t).uuid),this.envMap&&this.envMap.isTexture&&(i.envMap=this.envMap.toJSON(t).uuid,void 0!==this.combine&&(i.combine=this.combine)),void 0!==this.envMapRotation&&(i.envMapRotation=this.envMapRotation.toArray()),void 0!==this.envMapIntensity&&(i.envMapIntensity=this.envMapIntensity),void 0!==this.reflectivity&&(i.reflectivity=this.reflectivity),void 0!==this.refractionRatio&&(i.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(i.gradientMap=this.gradientMap.toJSON(t).uuid),void 0!==this.transmission&&(i.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(i.transmissionMap=this.transmissionMap.toJSON(t).uuid),void 0!==this.thickness&&(i.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(i.thicknessMap=this.thicknessMap.toJSON(t).uuid),void 0!==this.attenuationDistance&&this.attenuationDistance!==1/0&&(i.attenuationDistance=this.attenuationDistance),void 0!==this.attenuationColor&&(i.attenuationColor=this.attenuationColor.getHex()),void 0!==this.size&&(i.size=this.size),null!==this.shadowSide&&(i.shadowSide=this.shadowSide),void 0!==this.sizeAttenuation&&(i.sizeAttenuation=this.sizeAttenuation),this.blending!==m&&(i.blending=this.blending),this.side!==c&&(i.side=this.side),!0===this.vertexColors&&(i.vertexColors=!0),this.opacity<1&&(i.opacity=this.opacity),!0===this.transparent&&(i.transparent=!0),this.blendSrc!==P&&(i.blendSrc=this.blendSrc),this.blendDst!==C&&(i.blendDst=this.blendDst),this.blendEquation!==_&&(i.blendEquation=this.blendEquation),null!==this.blendSrcAlpha&&(i.blendSrcAlpha=this.blendSrcAlpha),null!==this.blendDstAlpha&&(i.blendDstAlpha=this.blendDstAlpha),null!==this.blendEquationAlpha&&(i.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(i.blendColor=this.blendColor.getHex()),0!==this.blendAlpha&&(i.blendAlpha=this.blendAlpha),this.depthFunc!==V&&(i.depthFunc=this.depthFunc),!1===this.depthTest&&(i.depthTest=this.depthTest),!1===this.depthWrite&&(i.depthWrite=this.depthWrite),!1===this.colorWrite&&(i.colorWrite=this.colorWrite),255!==this.stencilWriteMask&&(i.stencilWriteMask=this.stencilWriteMask),519!==this.stencilFunc&&(i.stencilFunc=this.stencilFunc),0!==this.stencilRef&&(i.stencilRef=this.stencilRef),255!==this.stencilFuncMask&&(i.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==ke&&(i.stencilFail=this.stencilFail),this.stencilZFail!==ke&&(i.stencilZFail=this.stencilZFail),this.stencilZPass!==ke&&(i.stencilZPass=this.stencilZPass),!0===this.stencilWrite&&(i.stencilWrite=this.stencilWrite),void 0!==this.rotation&&0!==this.rotation&&(i.rotation=this.rotation),!0===this.polygonOffset&&(i.polygonOffset=!0),0!==this.polygonOffsetFactor&&(i.polygonOffsetFactor=this.polygonOffsetFactor),0!==this.polygonOffsetUnits&&(i.polygonOffsetUnits=this.polygonOffsetUnits),void 0!==this.linewidth&&1!==this.linewidth&&(i.linewidth=this.linewidth),void 0!==this.dashSize&&(i.dashSize=this.dashSize),void 0!==this.gapSize&&(i.gapSize=this.gapSize),void 0!==this.scale&&(i.scale=this.scale),!0===this.dithering&&(i.dithering=!0),this.alphaTest>0&&(i.alphaTest=this.alphaTest),!0===this.alphaHash&&(i.alphaHash=!0),!0===this.alphaToCoverage&&(i.alphaToCoverage=!0),!0===this.premultipliedAlpha&&(i.premultipliedAlpha=!0),!0===this.forceSinglePass&&(i.forceSinglePass=!0),!0===this.wireframe&&(i.wireframe=!0),this.wireframeLinewidth>1&&(i.wireframeLinewidth=this.wireframeLinewidth),"round"!==this.wireframeLinecap&&(i.wireframeLinecap=this.wireframeLinecap),"round"!==this.wireframeLinejoin&&(i.wireframeLinejoin=this.wireframeLinejoin),!0===this.flatShading&&(i.flatShading=!0),!1===this.visible&&(i.visible=!1),!1===this.toneMapped&&(i.toneMapped=!1),!1===this.fog&&(i.fog=!1),Object.keys(this.userData).length>0&&(i.userData=this.userData),e){const e=r(t.textures),n=r(t.images);e.length>0&&(i.textures=e),n.length>0&&(i.images=n)}return i}clone(){return(new this.constructor).copy(this)}copy(t){this.name=t.name,this.blending=t.blending,this.side=t.side,this.vertexColors=t.vertexColors,this.opacity=t.opacity,this.transparent=t.transparent,this.blendSrc=t.blendSrc,this.blendDst=t.blendDst,this.blendEquation=t.blendEquation,this.blendSrcAlpha=t.blendSrcAlpha,this.blendDstAlpha=t.blendDstAlpha,this.blendEquationAlpha=t.blendEquationAlpha,this.blendColor.copy(t.blendColor),this.blendAlpha=t.blendAlpha,this.depthFunc=t.depthFunc,this.depthTest=t.depthTest,this.depthWrite=t.depthWrite,this.stencilWriteMask=t.stencilWriteMask,this.stencilFunc=t.stencilFunc,this.stencilRef=t.stencilRef,this.stencilFuncMask=t.stencilFuncMask,this.stencilFail=t.stencilFail,this.stencilZFail=t.stencilZFail,this.stencilZPass=t.stencilZPass,this.stencilWrite=t.stencilWrite;const e=t.clippingPlanes;let i=null;if(null!==e){const t=e.length;i=new Array(t);for(let r=0;r!==t;++r)i[r]=e[r].clone()}return this.clippingPlanes=i,this.clipIntersection=t.clipIntersection,this.clipShadows=t.clipShadows,this.shadowSide=t.shadowSide,this.colorWrite=t.colorWrite,this.precision=t.precision,this.polygonOffset=t.polygonOffset,this.polygonOffsetFactor=t.polygonOffsetFactor,this.polygonOffsetUnits=t.polygonOffsetUnits,this.dithering=t.dithering,this.alphaTest=t.alphaTest,this.alphaHash=t.alphaHash,this.alphaToCoverage=t.alphaToCoverage,this.premultipliedAlpha=t.premultipliedAlpha,this.forceSinglePass=t.forceSinglePass,this.visible=t.visible,this.toneMapped=t.toneMapped,this.userData=JSON.parse(JSON.stringify(t.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(t){!0===t&&this.version++}onBuild(){r.warn("Material: onBuild() has been removed.")}}class en extends tn{constructor(t){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new $r(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new mr,this.combine=Y,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.lightMap=t.lightMap,this.lightMapIntensity=t.lightMapIntensity,this.aoMap=t.aoMap,this.aoMapIntensity=t.aoMapIntensity,this.specularMap=t.specularMap,this.alphaMap=t.alphaMap,this.envMap=t.envMap,this.envMapRotation.copy(t.envMapRotation),this.combine=t.combine,this.reflectivity=t.reflectivity,this.refractionRatio=t.refractionRatio,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.wireframeLinecap=t.wireframeLinecap,this.wireframeLinejoin=t.wireframeLinejoin,this.fog=t.fog,this}}const rn=new Pi,nn=new Je;class sn{constructor(t,e,i=!1){if(Array.isArray(t))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,this.name="",this.array=t,this.itemSize=e,this.count=void 0!==t?t.length/e:0,this.normalized=i,this.usage=35044,this.updateRanges=[],this.gpuType=At,this.version=0}onUploadCallback(){}set needsUpdate(t){!0===t&&this.version++}setUsage(t){return this.usage=t,this}addUpdateRange(t,e){this.updateRanges.push({start:t,count:e})}clearUpdateRanges(){this.updateRanges.length=0}copy(t){return this.name=t.name,this.array=new t.array.constructor(t.array),this.itemSize=t.itemSize,this.count=t.count,this.normalized=t.normalized,this.usage=t.usage,this.gpuType=t.gpuType,this}copyAt(t,e,i){t*=this.itemSize,i*=e.itemSize;for(let r=0,n=this.itemSize;r<n;r++)this.array[t+r]=e.array[i+r];return this}copyArray(t){return this.array.set(t),this}applyMatrix3(t){if(2===this.itemSize)for(let e=0,i=this.count;e<i;e++)nn.fromBufferAttribute(this,e),nn.applyMatrix3(t),this.setXY(e,nn.x,nn.y);else if(3===this.itemSize)for(let e=0,i=this.count;e<i;e++)rn.fromBufferAttribute(this,e),rn.applyMatrix3(t),this.setXYZ(e,rn.x,rn.y,rn.z);return this}applyMatrix4(t){for(let e=0,i=this.count;e<i;e++)rn.fromBufferAttribute(this,e),rn.applyMatrix4(t),this.setXYZ(e,rn.x,rn.y,rn.z);return this}applyNormalMatrix(t){for(let e=0,i=this.count;e<i;e++)rn.fromBufferAttribute(this,e),rn.applyNormalMatrix(t),this.setXYZ(e,rn.x,rn.y,rn.z);return this}transformDirection(t){for(let e=0,i=this.count;e<i;e++)rn.fromBufferAttribute(this,e),rn.transformDirection(t),this.setXYZ(e,rn.x,rn.y,rn.z);return this}set(t,e=0){return this.array.set(t,e),this}getComponent(t,e){let i=this.array[t*this.itemSize+e];return this.normalized&&(i=$e(i,this.array)),i}setComponent(t,e,i){return this.normalized&&(i=Qe(i,this.array)),this.array[t*this.itemSize+e]=i,this}getX(t){let e=this.array[t*this.itemSize];return this.normalized&&(e=$e(e,this.array)),e}setX(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize]=e,this}getY(t){let e=this.array[t*this.itemSize+1];return this.normalized&&(e=$e(e,this.array)),e}setY(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+1]=e,this}getZ(t){let e=this.array[t*this.itemSize+2];return this.normalized&&(e=$e(e,this.array)),e}setZ(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+2]=e,this}getW(t){let e=this.array[t*this.itemSize+3];return this.normalized&&(e=$e(e,this.array)),e}setW(t,e){return this.normalized&&(e=Qe(e,this.array)),this.array[t*this.itemSize+3]=e,this}setXY(t,e,i){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),i=Qe(i,this.array)),this.array[t+0]=e,this.array[t+1]=i,this}setXYZ(t,e,i,r){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),i=Qe(i,this.array),r=Qe(r,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this}setXYZW(t,e,i,r,n){return t*=this.itemSize,this.normalized&&(e=Qe(e,this.array),i=Qe(i,this.array),r=Qe(r,this.array),n=Qe(n,this.array)),this.array[t+0]=e,this.array[t+1]=i,this.array[t+2]=r,this.array[t+3]=n,this}onUpload(t){return this.onUploadCallback=t,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const t={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return""!==this.name&&(t.name=this.name),35044!==this.usage&&(t.usage=this.usage),t}}class on extends sn{constructor(t,e,i){super(new Uint16Array(t),e,i)}}class an extends sn{constructor(t,e,i){super(new Uint32Array(t),e,i)}}class hn extends sn{constructor(t,e,i){super(new Float32Array(t),e,i)}}let ln=0;const un=new sr,cn=new kr,dn=new Pi,fn=new ki,pn=new ki,mn=new Pi;class gn extends He{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:ln++}),this.uuid=Ye(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(t){return Array.isArray(t)?this.index=new(ii(t)?an:on)(t,1):this.index=t,this}setIndirect(t){return this.indirect=t,this}getIndirect(){return this.indirect}getAttribute(t){return this.attributes[t]}setAttribute(t,e){return this.attributes[t]=e,this}deleteAttribute(t){return delete this.attributes[t],this}hasAttribute(t){return void 0!==this.attributes[t]}addGroup(t,e,i=0){this.groups.push({start:t,count:e,materialIndex:i})}clearGroups(){this.groups=[]}setDrawRange(t,e){this.drawRange.start=t,this.drawRange.count=e}applyMatrix4(t){const e=this.attributes.position;void 0!==e&&(e.applyMatrix4(t),e.needsUpdate=!0);const i=this.attributes.normal;if(void 0!==i){const e=(new ti).getNormalMatrix(t);i.applyNormalMatrix(e),i.needsUpdate=!0}const r=this.attributes.tangent;return void 0!==r&&(r.transformDirection(t),r.needsUpdate=!0),null!==this.boundingBox&&this.computeBoundingBox(),null!==this.boundingSphere&&this.computeBoundingSphere(),this}applyQuaternion(t){return un.makeRotationFromQuaternion(t),this.applyMatrix4(un),this}rotateX(t){return un.makeRotationX(t),this.applyMatrix4(un),this}rotateY(t){return un.makeRotationY(t),this.applyMatrix4(un),this}rotateZ(t){return un.makeRotationZ(t),this.applyMatrix4(un),this}translate(t,e,i){return un.makeTranslation(t,e,i),this.applyMatrix4(un),this}scale(t,e,i){return un.makeScale(t,e,i),this.applyMatrix4(un),this}lookAt(t){return cn.lookAt(t),cn.updateMatrix(),this.applyMatrix4(cn.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(dn).negate(),this.translate(dn.x,dn.y,dn.z),this}setFromPoints(t){const e=this.getAttribute("position");if(void 0===e){const e=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];e.push(r.x,r.y,r.z||0)}this.setAttribute("position",new hn(e,3))}else{const i=Math.min(t.length,e.count);for(let r=0;r<i;r++){const i=t[r];e.setXYZ(r,i.x,i.y,i.z||0)}t.length>e.count&&r.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),e.needsUpdate=!0}return this}computeBoundingBox(){null===this.boundingBox&&(this.boundingBox=new ki);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return r.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),void this.boundingBox.set(new Pi(-1/0,-1/0,-1/0),new Pi(1/0,1/0,1/0));if(void 0!==t){if(this.boundingBox.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];fn.setFromBufferAttribute(i),this.morphTargetsRelative?(mn.addVectors(this.boundingBox.min,fn.min),this.boundingBox.expandByPoint(mn),mn.addVectors(this.boundingBox.max,fn.max),this.boundingBox.expandByPoint(mn)):(this.boundingBox.expandByPoint(fn.min),this.boundingBox.expandByPoint(fn.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&r.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){null===this.boundingSphere&&(this.boundingSphere=new Ki);const t=this.attributes.position,e=this.morphAttributes.position;if(t&&t.isGLBufferAttribute)return r.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),void this.boundingSphere.set(new Pi,1/0);if(t){const i=this.boundingSphere.center;if(fn.setFromBufferAttribute(t),e)for(let t=0,i=e.length;t<i;t++){const i=e[t];pn.setFromBufferAttribute(i),this.morphTargetsRelative?(mn.addVectors(fn.min,pn.min),fn.expandByPoint(mn),mn.addVectors(fn.max,pn.max),fn.expandByPoint(mn)):(fn.expandByPoint(pn.min),fn.expandByPoint(pn.max))}fn.getCenter(i);let n=0;for(let e=0,r=t.count;e<r;e++)mn.fromBufferAttribute(t,e),n=Math.max(n,i.distanceToSquared(mn));if(e)for(let r=0,s=e.length;r<s;r++){const s=e[r],o=this.morphTargetsRelative;for(let e=0,r=s.count;e<r;e++)mn.fromBufferAttribute(s,e),o&&(dn.fromBufferAttribute(t,e),mn.add(dn)),n=Math.max(n,i.distanceToSquared(mn))}this.boundingSphere.radius=Math.sqrt(n),isNaN(this.boundingSphere.radius)&&r.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const t=this.index,e=this.attributes;if(null===t||void 0===e.position||void 0===e.normal||void 0===e.uv)return void r.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");const i=e.position,n=e.normal,s=e.uv;!1===this.hasAttribute("tangent")&&this.setAttribute("tangent",new sn(new Float32Array(4*i.count),4));const o=this.getAttribute("tangent"),a=[],h=[];for(let t=0;t<i.count;t++)a[t]=new Pi,h[t]=new Pi;const l=new Pi,u=new Pi,c=new Pi,d=new Je,f=new Je,p=new Je,m=new Pi,g=new Pi;function v(t,e,r){l.fromBufferAttribute(i,t),u.fromBufferAttribute(i,e),c.fromBufferAttribute(i,r),d.fromBufferAttribute(s,t),f.fromBufferAttribute(s,e),p.fromBufferAttribute(s,r),u.sub(l),c.sub(l),f.sub(d),p.sub(d);const n=1/(f.x*p.y-p.x*f.y);isFinite(n)&&(m.copy(u).multiplyScalar(p.y).addScaledVector(c,-f.y).multiplyScalar(n),g.copy(c).multiplyScalar(f.x).addScaledVector(u,-p.x).multiplyScalar(n),a[t].add(m),a[e].add(m),a[r].add(m),h[t].add(g),h[e].add(g),h[r].add(g))}let y=this.groups;0===y.length&&(y=[{start:0,count:t.count}]);for(let e=0,i=y.length;e<i;++e){const i=y[e],r=i.start;for(let e=r,n=r+i.count;e<n;e+=3)v(t.getX(e+0),t.getX(e+1),t.getX(e+2))}const b=new Pi,_=new Pi,x=new Pi,w=new Pi;function M(t){x.fromBufferAttribute(n,t),w.copy(x);const e=a[t];b.copy(e),b.sub(x.multiplyScalar(x.dot(e))).normalize(),_.crossVectors(w,e);const i=_.dot(h[t])<0?-1:1;o.setXYZW(t,b.x,b.y,b.z,i)}for(let e=0,i=y.length;e<i;++e){const i=y[e],r=i.start;for(let e=r,n=r+i.count;e<n;e+=3)M(t.getX(e+0)),M(t.getX(e+1)),M(t.getX(e+2))}}computeVertexNormals(){const t=this.index,e=this.getAttribute("position");if(void 0!==e){let i=this.getAttribute("normal");if(void 0===i)i=new sn(new Float32Array(3*e.count),3),this.setAttribute("normal",i);else for(let t=0,e=i.count;t<e;t++)i.setXYZ(t,0,0,0);const r=new Pi,n=new Pi,s=new Pi,o=new Pi,a=new Pi,h=new Pi,l=new Pi,u=new Pi;if(t)for(let c=0,d=t.count;c<d;c+=3){const d=t.getX(c+0),f=t.getX(c+1),p=t.getX(c+2);r.fromBufferAttribute(e,d),n.fromBufferAttribute(e,f),s.fromBufferAttribute(e,p),l.subVectors(s,n),u.subVectors(r,n),l.cross(u),o.fromBufferAttribute(i,d),a.fromBufferAttribute(i,f),h.fromBufferAttribute(i,p),o.add(l),a.add(l),h.add(l),i.setXYZ(d,o.x,o.y,o.z),i.setXYZ(f,a.x,a.y,a.z),i.setXYZ(p,h.x,h.y,h.z)}else for(let t=0,o=e.count;t<o;t+=3)r.fromBufferAttribute(e,t+0),n.fromBufferAttribute(e,t+1),s.fromBufferAttribute(e,t+2),l.subVectors(s,n),u.subVectors(r,n),l.cross(u),i.setXYZ(t+0,l.x,l.y,l.z),i.setXYZ(t+1,l.x,l.y,l.z),i.setXYZ(t+2,l.x,l.y,l.z);this.normalizeNormals(),i.needsUpdate=!0}}normalizeNormals(){const t=this.attributes.normal;for(let e=0,i=t.count;e<i;e++)mn.fromBufferAttribute(t,e),mn.normalize(),t.setXYZ(e,mn.x,mn.y,mn.z)}toNonIndexed(){function t(t,e){const i=t.array,r=t.itemSize,n=t.normalized,s=new i.constructor(e.length*r);let o=0,a=0;for(let n=0,h=e.length;n<h;n++){o=t.isInterleavedBufferAttribute?e[n]*t.data.stride+t.offset:e[n]*r;for(let t=0;t<r;t++)s[a++]=i[o++]}return new sn(s,r,n)}if(null===this.index)return r.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const e=new gn,i=this.index.array,n=this.attributes;for(const r in n){const s=t(n[r],i);e.setAttribute(r,s)}const s=this.morphAttributes;for(const r in s){const n=[],o=s[r];for(let e=0,r=o.length;e<r;e++){const r=t(o[e],i);n.push(r)}e.morphAttributes[r]=n}e.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let t=0,i=o.length;t<i;t++){const i=o[t];e.addGroup(i.start,i.count,i.materialIndex)}return e}toJSON(){const t={metadata:{version:4.6,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(t.uuid=this.uuid,t.type=this.type,""!==this.name&&(t.name=this.name),Object.keys(this.userData).length>0&&(t.userData=this.userData),void 0!==this.parameters){const e=this.parameters;for(const i in e)void 0!==e[i]&&(t[i]=e[i]);return t}t.data={attributes:{}};const e=this.index;null!==e&&(t.data.index={type:e.array.constructor.name,array:Array.prototype.slice.call(e.array)});const i=this.attributes;for(const e in i){const r=i[e];t.data.attributes[e]=r.toJSON(t.data)}const r={};let n=!1;for(const e in this.morphAttributes){const i=this.morphAttributes[e],s=[];for(let e=0,r=i.length;e<r;e++){const r=i[e];s.push(r.toJSON(t.data))}s.length>0&&(r[e]=s,n=!0)}n&&(t.data.morphAttributes=r,t.data.morphTargetsRelative=this.morphTargetsRelative);const s=this.groups;s.length>0&&(t.data.groups=JSON.parse(JSON.stringify(s)));const o=this.boundingSphere;return null!==o&&(t.data.boundingSphere={center:o.center.toArray(),radius:o.radius}),t}clone(){return(new this.constructor).copy(this)}copy(t){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const e={};this.name=t.name;const i=t.index;null!==i&&this.setIndex(i.clone(e));const r=t.attributes;for(const t in r){const i=r[t];this.setAttribute(t,i.clone(e))}const n=t.morphAttributes;for(const t in n){const i=[],r=n[t];for(let t=0,n=r.length;t<n;t++)i.push(r[t].clone(e));this.morphAttributes[t]=i}this.morphTargetsRelative=t.morphTargetsRelative;const s=t.groups;for(let t=0,e=s.length;t<e;t++){const e=s[t];this.addGroup(e.start,e.count,e.materialIndex)}const o=t.boundingBox;null!==o&&(this.boundingBox=o.clone());const a=t.boundingSphere;return null!==a&&(this.boundingSphere=a.clone()),this.drawRange.start=t.drawRange.start,this.drawRange.count=t.drawRange.count,this.userData=t.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const vn=new sr,yn=new nr,bn=new Ki,_n=new Pi,xn=new Pi,wn=new Pi,Mn=new Pi,Sn=new Pi,An=new Pi,En=new Pi,Tn=new Pi;class Rn extends kr{constructor(t=new gn,e=new en){super(),this.isMesh=!0,this.type="Mesh",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),void 0!==t.morphTargetInfluences&&(this.morphTargetInfluences=t.morphTargetInfluences.slice()),void 0!==t.morphTargetDictionary&&(this.morphTargetDictionary=Object.assign({},t.morphTargetDictionary)),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){const e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}getVertexPosition(t,e){const i=this.geometry,r=i.attributes.position,n=i.morphAttributes.position,s=i.morphTargetsRelative;e.fromBufferAttribute(r,t);const o=this.morphTargetInfluences;if(n&&o){An.set(0,0,0);for(let i=0,r=n.length;i<r;i++){const r=o[i],a=n[i];0!==r&&(Sn.fromBufferAttribute(a,t),s?An.addScaledVector(Sn,r):An.addScaledVector(Sn.sub(e),r))}e.add(An)}return e}raycast(t,e){const i=this.geometry,r=this.material,n=this.matrixWorld;if(void 0!==r){if(null===i.boundingSphere&&i.computeBoundingSphere(),bn.copy(i.boundingSphere),bn.applyMatrix4(n),yn.copy(t.ray).recast(t.near),!1===bn.containsPoint(yn.origin)){if(null===yn.intersectSphere(bn,_n))return;if(yn.origin.distanceToSquared(_n)>(t.far-t.near)**2)return}vn.copy(n).invert(),yn.copy(t.ray).applyMatrix4(vn),null!==i.boundingBox&&!1===yn.intersectsBox(i.boundingBox)||this._computeIntersections(t,e,yn)}}_computeIntersections(t,e,i){let r;const n=this.geometry,s=this.material,o=n.index,a=n.attributes.position,h=n.attributes.uv,l=n.attributes.uv1,u=n.attributes.normal,c=n.groups,d=n.drawRange;if(null!==o)if(Array.isArray(s))for(let n=0,a=c.length;n<a;n++){const a=c[n],f=s[a.materialIndex];for(let n=Math.max(a.start,d.start),s=Math.min(o.count,Math.min(a.start+a.count,d.start+d.count));n<s;n+=3)r=Pn(this,f,t,i,h,l,u,o.getX(n),o.getX(n+1),o.getX(n+2)),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=a.materialIndex,e.push(r))}else for(let n=Math.max(0,d.start),a=Math.min(o.count,d.start+d.count);n<a;n+=3)r=Pn(this,s,t,i,h,l,u,o.getX(n),o.getX(n+1),o.getX(n+2)),r&&(r.faceIndex=Math.floor(n/3),e.push(r));else if(void 0!==a)if(Array.isArray(s))for(let n=0,o=c.length;n<o;n++){const o=c[n],f=s[o.materialIndex];for(let n=Math.max(o.start,d.start),s=Math.min(a.count,Math.min(o.start+o.count,d.start+d.count));n<s;n+=3)r=Pn(this,f,t,i,h,l,u,n,n+1,n+2),r&&(r.faceIndex=Math.floor(n/3),r.face.materialIndex=o.materialIndex,e.push(r))}else for(let n=Math.max(0,d.start),o=Math.min(a.count,d.start+d.count);n<o;n+=3)r=Pn(this,s,t,i,h,l,u,n,n+1,n+2),r&&(r.faceIndex=Math.floor(n/3),e.push(r))}}function Pn(t,e,i,r,n,s,o,a,h,l){t.getVertexPosition(a,xn),t.getVertexPosition(h,wn),t.getVertexPosition(l,Mn);const u=function(t,e,i,r,n,s,o,a){let h;if(h=e.side===d?r.intersectTriangle(o,s,n,!0,a):r.intersectTriangle(n,s,o,e.side===c,a),null===h)return null;Tn.copy(a),Tn.applyMatrix4(t.matrixWorld);const l=i.ray.origin.distanceTo(Tn);return l<i.near||l>i.far?null:{distance:l,point:Tn.clone(),object:t}}(t,e,i,r,xn,wn,Mn,En);if(u){const t=new Pi;Xr.getBarycoord(En,xn,wn,Mn,t),n&&(u.uv=Xr.getInterpolatedAttribute(n,a,h,l,t,new Je)),s&&(u.uv1=Xr.getInterpolatedAttribute(s,a,h,l,t,new Je)),o&&(u.normal=Xr.getInterpolatedAttribute(o,a,h,l,t,new Pi),u.normal.dot(r.direction)>0&&u.normal.multiplyScalar(-1));const e={a,b:h,c:l,normal:new Pi,materialIndex:0};Xr.getNormal(xn,wn,Mn,e.normal),u.face=e,u.barycoord=t}return u}class Cn extends gn{constructor(t=1,e=1,i=1,r=1,n=1,s=1){super(),this.type="BoxGeometry",this.parameters={width:t,height:e,depth:i,widthSegments:r,heightSegments:n,depthSegments:s};const o=this;r=Math.floor(r),n=Math.floor(n),s=Math.floor(s);const a=[],h=[],l=[],u=[];let c=0,d=0;function f(t,e,i,r,n,s,f,p,m,g,v){const y=s/m,b=f/g,_=s/2,x=f/2,w=p/2,M=m+1,S=g+1;let A=0,E=0;const T=new Pi;for(let s=0;s<S;s++){const o=s*b-x;for(let a=0;a<M;a++){const c=a*y-_;T[t]=c*r,T[e]=o*n,T[i]=w,h.push(T.x,T.y,T.z),T[t]=0,T[e]=0,T[i]=p>0?1:-1,l.push(T.x,T.y,T.z),u.push(a/m),u.push(1-s/g),A+=1}}for(let t=0;t<g;t++)for(let e=0;e<m;e++){const i=c+e+M*t,r=c+e+M*(t+1),n=c+(e+1)+M*(t+1),s=c+(e+1)+M*t;a.push(i,r,s),a.push(r,n,s),E+=6}o.addGroup(d,E,v),d+=E,c+=A}f("z","y","x",-1,-1,i,e,t,s,n,0),f("z","y","x",1,-1,i,e,-t,s,n,1),f("x","z","y",1,1,t,i,e,r,s,2),f("x","z","y",1,-1,t,i,-e,r,s,3),f("x","y","z",1,-1,t,e,i,r,n,4),f("x","y","z",-1,-1,t,e,-i,r,n,5),this.setIndex(a),this.setAttribute("position",new hn(h,3)),this.setAttribute("normal",new hn(l,3)),this.setAttribute("uv",new hn(u,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new Cn(t.width,t.height,t.depth,t.widthSegments,t.heightSegments,t.depthSegments)}}function In(t){const e={};for(const i in t){e[i]={};for(const n in t[i]){const s=t[i][n];s&&(s.isColor||s.isMatrix3||s.isMatrix4||s.isVector2||s.isVector3||s.isVector4||s.isTexture||s.isQuaternion)?s.isRenderTargetTexture?(r.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[i][n]=null):e[i][n]=s.clone():Array.isArray(s)?e[i][n]=s.slice():e[i][n]=s}}return e}function kn(t){const e={};for(let i=0;i<t.length;i++){const r=In(t[i]);for(const t in r)e[t]=r[t]}return e}function Bn(t){const e=t.getRenderTarget();return null===e?t.outputColorSpace:!0===e.isXRRenderTarget?e.texture.colorSpace:fi.workingColorSpace}const On={clone:In,merge:kn};class Ln extends tn{constructor(t){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader="void main() {\n\tgl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\n}",this.fragmentShader="void main() {\n\tgl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );\n}",this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,void 0!==t&&this.setValues(t)}copy(t){return super.copy(t),this.fragmentShader=t.fragmentShader,this.vertexShader=t.vertexShader,this.uniforms=In(t.uniforms),this.uniformsGroups=function(t){const e=[];for(let i=0;i<t.length;i++)e.push(t[i].clone());return e}(t.uniformsGroups),this.defines=Object.assign({},t.defines),this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this.fog=t.fog,this.lights=t.lights,this.clipping=t.clipping,this.extensions=Object.assign({},t.extensions),this.glslVersion=t.glslVersion,this}toJSON(t){const e=super.toJSON(t);e.glslVersion=this.glslVersion,e.uniforms={};for(const i in this.uniforms){const r=this.uniforms[i].value;r&&r.isTexture?e.uniforms[i]={type:"t",value:r.toJSON(t).uuid}:r&&r.isColor?e.uniforms[i]={type:"c",value:r.getHex()}:r&&r.isVector2?e.uniforms[i]={type:"v2",value:r.toArray()}:r&&r.isVector3?e.uniforms[i]={type:"v3",value:r.toArray()}:r&&r.isVector4?e.uniforms[i]={type:"v4",value:r.toArray()}:r&&r.isMatrix3?e.uniforms[i]={type:"m3",value:r.toArray()}:r&&r.isMatrix4?e.uniforms[i]={type:"m4",value:r.toArray()}:e.uniforms[i]={value:r}}Object.keys(this.defines).length>0&&(e.defines=this.defines),e.vertexShader=this.vertexShader,e.fragmentShader=this.fragmentShader,e.lights=this.lights,e.clipping=this.clipping;const i={};for(const t in this.extensions)!0===this.extensions[t]&&(i[t]=!0);return Object.keys(i).length>0&&(e.extensions=i),e}}class Un extends kr{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new sr,this.projectionMatrix=new sr,this.projectionMatrixInverse=new sr,this.coordinateSystem=je}copy(t,e){return super.copy(t,e),this.matrixWorldInverse.copy(t.matrixWorldInverse),this.projectionMatrix.copy(t.projectionMatrix),this.projectionMatrixInverse.copy(t.projectionMatrixInverse),this.coordinateSystem=t.coordinateSystem,this}getWorldDirection(t){return super.getWorldDirection(t).negate()}updateMatrixWorld(t){super.updateMatrixWorld(t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(t,e){super.updateWorldMatrix(t,e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return(new this.constructor).copy(this)}}const Dn=new Pi,Nn=new Je,Fn=new Je;class zn extends Un{constructor(t=50,e=1,i=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=t,this.zoom=1,this.near=i,this.far=r,this.focus=10,this.aspect=e,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.fov=t.fov,this.zoom=t.zoom,this.near=t.near,this.far=t.far,this.focus=t.focus,this.aspect=t.aspect,this.view=null===t.view?null:Object.assign({},t.view),this.filmGauge=t.filmGauge,this.filmOffset=t.filmOffset,this}setFocalLength(t){const e=.5*this.getFilmHeight()/t;this.fov=2*qe*Math.atan(e),this.updateProjectionMatrix()}getFocalLength(){const t=Math.tan(.5*Xe*this.fov);return.5*this.getFilmHeight()/t}getEffectiveFOV(){return 2*qe*Math.atan(Math.tan(.5*Xe*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(t,e,i){Dn.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),e.set(Dn.x,Dn.y).multiplyScalar(-t/Dn.z),Dn.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),i.set(Dn.x,Dn.y).multiplyScalar(-t/Dn.z)}getViewSize(t,e){return this.getViewBounds(t,Nn,Fn),e.subVectors(Fn,Nn)}setViewOffset(t,e,i,r,n,s){this.aspect=t/e,null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=this.near;let e=t*Math.tan(.5*Xe*this.fov)/this.zoom,i=2*e,r=this.aspect*i,n=-.5*r;const s=this.view;if(null!==this.view&&this.view.enabled){const t=s.fullWidth,o=s.fullHeight;n+=s.offsetX*r/t,e-=s.offsetY*i/o,r*=s.width/t,i*=s.height/o}const o=this.filmOffset;0!==o&&(n+=t*o/this.getFilmWidth()),this.projectionMatrix.makePerspective(n,n+r,e,e-i,t,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.fov=this.fov,e.object.zoom=this.zoom,e.object.near=this.near,e.object.far=this.far,e.object.focus=this.focus,e.object.aspect=this.aspect,null!==this.view&&(e.object.view=Object.assign({},this.view)),e.object.filmGauge=this.filmGauge,e.object.filmOffset=this.filmOffset,e}}const Gn=-90;class jn extends kr{constructor(t,e,i){super(),this.type="CubeCamera",this.renderTarget=i,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new zn(Gn,1,t,e);r.layers=this.layers,this.add(r);const n=new zn(Gn,1,t,e);n.layers=this.layers,this.add(n);const s=new zn(Gn,1,t,e);s.layers=this.layers,this.add(s);const o=new zn(Gn,1,t,e);o.layers=this.layers,this.add(o);const a=new zn(Gn,1,t,e);a.layers=this.layers,this.add(a);const h=new zn(Gn,1,t,e);h.layers=this.layers,this.add(h)}updateCoordinateSystem(){const t=this.coordinateSystem,e=this.children.concat(),[i,r,n,s,o,a]=e;for(const t of e)this.remove(t);if(t===je)i.up.set(0,1,0),i.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),n.up.set(0,0,-1),n.lookAt(0,1,0),s.up.set(0,0,1),s.lookAt(0,-1,0),o.up.set(0,1,0),o.lookAt(0,0,1),a.up.set(0,1,0),a.lookAt(0,0,-1);else{if(t!==Ve)throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+t);i.up.set(0,-1,0),i.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),n.up.set(0,0,1),n.lookAt(0,1,0),s.up.set(0,0,-1),s.lookAt(0,-1,0),o.up.set(0,-1,0),o.lookAt(0,0,1),a.up.set(0,-1,0),a.lookAt(0,0,-1)}for(const t of e)this.add(t),t.updateMatrixWorld()}update(t,e){null===this.parent&&this.updateMatrixWorld();const{renderTarget:i,activeMipmapLevel:r}=this;this.coordinateSystem!==t.coordinateSystem&&(this.coordinateSystem=t.coordinateSystem,this.updateCoordinateSystem());const[n,s,o,a,h,l]=this.children,u=t.getRenderTarget(),c=t.getActiveCubeFace(),d=t.getActiveMipmapLevel(),f=t.xr.enabled;t.xr.enabled=!1;const p=i.texture.generateMipmaps;i.texture.generateMipmaps=!1,t.setRenderTarget(i,0,r),t.render(e,n),t.setRenderTarget(i,1,r),t.render(e,s),t.setRenderTarget(i,2,r),t.render(e,o),t.setRenderTarget(i,3,r),t.render(e,a),t.setRenderTarget(i,4,r),t.render(e,h),i.texture.generateMipmaps=p,t.setRenderTarget(i,5,r),t.render(e,l),t.setRenderTarget(u,c,d),t.xr.enabled=f,i.texture.needsPMREMUpdate=!0}}class Vn extends wi{constructor(t,e,i,r,n,s,o,a,h,l){super(t=void 0!==t?t:[],e=void 0!==e?e:st,i,r,n,s,o,a,h,l),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(t){this.image=t}}class Hn extends Ai{constructor(t=1,e={}){super(t,t,e),this.isWebGLCubeRenderTarget=!0;const i={width:t,height:t,depth:1},r=[i,i,i,i,i,i];this.texture=new Vn(r,e.mapping,e.wrapS,e.wrapT,e.magFilter,e.minFilter,e.format,e.type,e.anisotropy,e.colorSpace),this.texture.isRenderTargetTexture=!0,this.texture.generateMipmaps=void 0!==e.generateMipmaps&&e.generateMipmaps,this.texture.minFilter=void 0!==e.minFilter?e.minFilter:gt}fromEquirectangularTexture(t,e){this.texture.type=e.type,this.texture.colorSpace=e.colorSpace,this.texture.generateMipmaps=e.generateMipmaps,this.texture.minFilter=e.minFilter,this.texture.magFilter=e.magFilter;const i={tEquirect:{value:null}},r="\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\tvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\n\t\t\t\t\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n\n\t\t\t\t}\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvWorldDirection = transformDirection( position, modelMatrix );\n\n\t\t\t\t\t#include <begin_vertex>\n\t\t\t\t\t#include <project_vertex>\n\n\t\t\t\t}\n\t\t\t",n="\n\n\t\t\t\tuniform sampler2D tEquirect;\n\n\t\t\t\tvarying vec3 vWorldDirection;\n\n\t\t\t\t#include <common>\n\n\t\t\t\tvoid main() {\n\n\t\t\t\t\tvec3 direction = normalize( vWorldDirection );\n\n\t\t\t\t\tvec2 sampleUV = equirectUv( direction );\n\n\t\t\t\t\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\n\t\t\t\t}\n\t\t\t",s=new Cn(5,5,5),o=new Ln({name:"CubemapFromEquirect",uniforms:In(i),vertexShader:r,fragmentShader:n,side:d,blending:p});o.uniforms.tEquirect.value=e;const a=new Rn(s,o),h=e.minFilter;return e.minFilter===yt&&(e.minFilter=gt),new jn(1,10,this).update(t,a),e.minFilter=h,a.geometry.dispose(),a.material.dispose(),this}clear(t,e,i,r){const n=t.getRenderTarget();for(let n=0;n<6;n++)t.setRenderTarget(this,n),t.clear(e,i,r);t.setRenderTarget(n)}}class Wn extends kr{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new mr,this.environmentIntensity=1,this.environmentRotation=new mr,this.overrideMaterial=null,"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(t,e){return super.copy(t,e),null!==t.background&&(this.background=t.background.clone()),null!==t.environment&&(this.environment=t.environment.clone()),null!==t.fog&&(this.fog=t.fog.clone()),this.backgroundBlurriness=t.backgroundBlurriness,this.backgroundIntensity=t.backgroundIntensity,this.backgroundRotation.copy(t.backgroundRotation),this.environmentIntensity=t.environmentIntensity,this.environmentRotation.copy(t.environmentRotation),null!==t.overrideMaterial&&(this.overrideMaterial=t.overrideMaterial.clone()),this.matrixAutoUpdate=t.matrixAutoUpdate,this}toJSON(t){const e=super.toJSON(t);return null!==this.fog&&(e.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(e.object.backgroundBlurriness=this.backgroundBlurriness),1!==this.backgroundIntensity&&(e.object.backgroundIntensity=this.backgroundIntensity),e.object.backgroundRotation=this.backgroundRotation.toArray(),1!==this.environmentIntensity&&(e.object.environmentIntensity=this.environmentIntensity),e.object.environmentRotation=this.environmentRotation.toArray(),e}}const Xn=new Pi,qn=new Pi,Yn=new ti;class Zn{constructor(t=new Pi(1,0,0),e=0){this.isPlane=!0,this.normal=t,this.constant=e}set(t,e){return this.normal.copy(t),this.constant=e,this}setComponents(t,e,i,r){return this.normal.set(t,e,i),this.constant=r,this}setFromNormalAndCoplanarPoint(t,e){return this.normal.copy(t),this.constant=-e.dot(this.normal),this}setFromCoplanarPoints(t,e,i){const r=Xn.subVectors(i,e).cross(qn.subVectors(t,e)).normalize();return this.setFromNormalAndCoplanarPoint(r,t),this}copy(t){return this.normal.copy(t.normal),this.constant=t.constant,this}normalize(){const t=1/this.normal.length();return this.normal.multiplyScalar(t),this.constant*=t,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(t){return this.normal.dot(t)+this.constant}distanceToSphere(t){return this.distanceToPoint(t.center)-t.radius}projectPoint(t,e){return e.copy(t).addScaledVector(this.normal,-this.distanceToPoint(t))}intersectLine(t,e){const i=t.delta(Xn),r=this.normal.dot(i);if(0===r)return 0===this.distanceToPoint(t.start)?e.copy(t.start):null;const n=-(t.start.dot(this.normal)+this.constant)/r;return n<0||n>1?null:e.copy(t.start).addScaledVector(i,n)}intersectsLine(t){const e=this.distanceToPoint(t.start),i=this.distanceToPoint(t.end);return e<0&&i>0||i<0&&e>0}intersectsBox(t){return t.intersectsPlane(this)}intersectsSphere(t){return t.intersectsPlane(this)}coplanarPoint(t){return t.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(t,e){const i=e||Yn.getNormalMatrix(t),r=this.coplanarPoint(Xn).applyMatrix4(t),n=this.normal.applyMatrix3(i).normalize();return this.constant=-r.dot(n),this}translate(t){return this.constant-=t.dot(this.normal),this}equals(t){return t.normal.equals(this.normal)&&t.constant===this.constant}clone(){return(new this.constructor).copy(this)}}const Kn=new Ki,$n=new Pi;class Qn{constructor(t=new Zn,e=new Zn,i=new Zn,r=new Zn,n=new Zn,s=new Zn){this.planes=[t,e,i,r,n,s]}set(t,e,i,r,n,s){const o=this.planes;return o[0].copy(t),o[1].copy(e),o[2].copy(i),o[3].copy(r),o[4].copy(n),o[5].copy(s),this}copy(t){const e=this.planes;for(let i=0;i<6;i++)e[i].copy(t.planes[i]);return this}setFromProjectionMatrix(t,e=je){const i=this.planes,r=t.elements,n=r[0],s=r[1],o=r[2],a=r[3],h=r[4],l=r[5],u=r[6],c=r[7],d=r[8],f=r[9],p=r[10],m=r[11],g=r[12],v=r[13],y=r[14],b=r[15];if(i[0].setComponents(a-n,c-h,m-d,b-g).normalize(),i[1].setComponents(a+n,c+h,m+d,b+g).normalize(),i[2].setComponents(a+s,c+l,m+f,b+v).normalize(),i[3].setComponents(a-s,c-l,m-f,b-v).normalize(),i[4].setComponents(a-o,c-u,m-p,b-y).normalize(),e===je)i[5].setComponents(a+o,c+u,m+p,b+y).normalize();else{if(e!==Ve)throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+e);i[5].setComponents(o,u,p,y).normalize()}return this}intersectsObject(t){if(void 0!==t.boundingSphere)null===t.boundingSphere&&t.computeBoundingSphere(),Kn.copy(t.boundingSphere).applyMatrix4(t.matrixWorld);else{const e=t.geometry;null===e.boundingSphere&&e.computeBoundingSphere(),Kn.copy(e.boundingSphere).applyMatrix4(t.matrixWorld)}return this.intersectsSphere(Kn)}intersectsSprite(t){return Kn.center.set(0,0,0),Kn.radius=.7071067811865476,Kn.applyMatrix4(t.matrixWorld),this.intersectsSphere(Kn)}intersectsSphere(t){const e=this.planes,i=t.center,r=-t.radius;for(let t=0;t<6;t++)if(e[t].distanceToPoint(i)<r)return!1;return!0}intersectsBox(t){const e=this.planes;for(let i=0;i<6;i++){const r=e[i];if($n.x=r.normal.x>0?t.max.x:t.min.x,$n.y=r.normal.y>0?t.max.y:t.min.y,$n.z=r.normal.z>0?t.max.z:t.min.z,r.distanceToPoint($n)<0)return!1}return!0}containsPoint(t){const e=this.planes;for(let i=0;i<6;i++)if(e[i].distanceToPoint(t)<0)return!1;return!0}clone(){return(new this.constructor).copy(this)}}class Jn extends tn{constructor(t){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new $r(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(t)}copy(t){return super.copy(t),this.color.copy(t.color),this.map=t.map,this.linewidth=t.linewidth,this.linecap=t.linecap,this.linejoin=t.linejoin,this.fog=t.fog,this}}const ts=new Pi,es=new Pi,is=new sr,rs=new nr,ns=new Ki,ss=new Pi,os=new Pi;class as extends kr{constructor(t=new gn,e=new Jn){super(),this.isLine=!0,this.type="Line",this.geometry=t,this.material=e,this.updateMorphTargets()}copy(t,e){return super.copy(t,e),this.material=Array.isArray(t.material)?t.material.slice():t.material,this.geometry=t.geometry,this}computeLineDistances(){const t=this.geometry;if(null===t.index){const e=t.attributes.position,i=[0];for(let t=1,r=e.count;t<r;t++)ts.fromBufferAttribute(e,t-1),es.fromBufferAttribute(e,t),i[t]=i[t-1],i[t]+=ts.distanceTo(es);t.setAttribute("lineDistance",new hn(i,1))}else r.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(t,e){const i=this.geometry,r=this.matrixWorld,n=t.params.Line.threshold,s=i.drawRange;if(null===i.boundingSphere&&i.computeBoundingSphere(),ns.copy(i.boundingSphere),ns.applyMatrix4(r),ns.radius+=n,!1===t.ray.intersectsSphere(ns))return;is.copy(r).invert(),rs.copy(t.ray).applyMatrix4(is);const o=n/((this.scale.x+this.scale.y+this.scale.z)/3),a=o*o,h=this.isLineSegments?2:1,l=i.index,u=i.attributes.position;if(null!==l){const i=Math.max(0,s.start),r=Math.min(l.count,s.start+s.count);for(let n=i,s=r-1;n<s;n+=h){const i=l.getX(n),r=l.getX(n+1),s=hs(this,t,rs,a,i,r);s&&e.push(s)}if(this.isLineLoop){const n=l.getX(r-1),s=l.getX(i),o=hs(this,t,rs,a,n,s);o&&e.push(o)}}else{const i=Math.max(0,s.start),r=Math.min(u.count,s.start+s.count);for(let n=i,s=r-1;n<s;n+=h){const i=hs(this,t,rs,a,n,n+1);i&&e.push(i)}if(this.isLineLoop){const n=hs(this,t,rs,a,r-1,i);n&&e.push(n)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,e=Object.keys(t);if(e.length>0){const i=t[e[0]];if(void 0!==i){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let t=0,e=i.length;t<e;t++){const e=i[t].name||String(t);this.morphTargetInfluences.push(0),this.morphTargetDictionary[e]=t}}}}}function hs(t,e,i,r,n,s){const o=t.geometry.attributes.position;if(ts.fromBufferAttribute(o,n),es.fromBufferAttribute(o,s),i.distanceSqToSegment(ts,es,ss,os)>r)return;ss.applyMatrix4(t.matrixWorld);const a=e.ray.origin.distanceTo(ss);return a<e.near||a>e.far?void 0:{distance:a,point:os.clone().applyMatrix4(t.matrixWorld),index:n,face:null,faceIndex:null,barycoord:null,object:t}}class ls extends kr{constructor(){super(),this.isGroup=!0,this.type="Group"}}class us extends wi{constructor(t,e,i,r,n,s,o,a,h,l=Ut){if(l!==Ut&&l!==Dt)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");void 0===i&&l===Ut&&(i=St),void 0===i&&l===Dt&&(i=Pt),super(null,r,n,s,o,a,l,i,h),this.isDepthTexture=!0,this.image={width:t,height:e},this.magFilter=void 0!==o?o:ft,this.minFilter=void 0!==a?a:ft,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(t){return super.copy(t),this.compareFunction=t.compareFunction,this}toJSON(t){const e=super.toJSON(t);return null!==this.compareFunction&&(e.compareFunction=this.compareFunction),e}}class cs extends gn{constructor(t=1,e=32,i=0,r=2*Math.PI){super(),this.type="CircleGeometry",this.parameters={radius:t,segments:e,thetaStart:i,thetaLength:r},e=Math.max(3,e);const n=[],s=[],o=[],a=[],h=new Pi,l=new Je;s.push(0,0,0),o.push(0,0,1),a.push(.5,.5);for(let n=0,u=3;n<=e;n++,u+=3){const c=i+n/e*r;h.x=t*Math.cos(c),h.y=t*Math.sin(c),s.push(h.x,h.y,h.z),o.push(0,0,1),l.x=(s[u]/t+1)/2,l.y=(s[u+1]/t+1)/2,a.push(l.x,l.y)}for(let t=1;t<=e;t++)n.push(t,t+1,0);this.setIndex(n),this.setAttribute("position",new hn(s,3)),this.setAttribute("normal",new hn(o,3)),this.setAttribute("uv",new hn(a,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new cs(t.radius,t.segments,t.thetaStart,t.thetaLength)}}class ds extends gn{constructor(t=1,e=1,i=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:t,height:e,widthSegments:i,heightSegments:r};const n=t/2,s=e/2,o=Math.floor(i),a=Math.floor(r),h=o+1,l=a+1,u=t/o,c=e/a,d=[],f=[],p=[],m=[];for(let t=0;t<l;t++){const e=t*c-s;for(let i=0;i<h;i++){const r=i*u-n;f.push(r,-e,0),p.push(0,0,1),m.push(i/o),m.push(1-t/a)}}for(let t=0;t<a;t++)for(let e=0;e<o;e++){const i=e+h*t,r=e+h*(t+1),n=e+1+h*(t+1),s=e+1+h*t;d.push(i,r,s),d.push(r,n,s)}this.setIndex(d),this.setAttribute("position",new hn(f,3)),this.setAttribute("normal",new hn(p,3)),this.setAttribute("uv",new hn(m,2))}copy(t){return super.copy(t),this.parameters=Object.assign({},t.parameters),this}static fromJSON(t){return new ds(t.width,t.height,t.widthSegments,t.heightSegments)}}class fs extends tn{constructor(t){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=3200,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(t)}copy(t){return super.copy(t),this.depthPacking=t.depthPacking,this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this.wireframe=t.wireframe,this.wireframeLinewidth=t.wireframeLinewidth,this}}class ps extends tn{constructor(t){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(t)}copy(t){return super.copy(t),this.map=t.map,this.alphaMap=t.alphaMap,this.displacementMap=t.displacementMap,this.displacementScale=t.displacementScale,this.displacementBias=t.displacementBias,this}}function ms(t,e,i){return!t||!i&&t.constructor===e?t:"number"==typeof e.BYTES_PER_ELEMENT?new e(t):Array.prototype.slice.call(t)}class gs{constructor(t,e,i,r){this.parameterPositions=t,this._cachedIndex=0,this.resultBuffer=void 0!==r?r:new e.constructor(i),this.sampleValues=e,this.valueSize=i,this.settings=null,this.DefaultSettings_={}}evaluate(t){const e=this.parameterPositions;let i=this._cachedIndex,r=e[i],n=e[i-1];t:{e:{let s;i:{r:if(!(t<r)){for(let s=i+2;;){if(void 0===r){if(t<n)break r;return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}if(i===s)break;if(n=r,r=e[++i],t<r)break e}s=e.length;break i}if(!(t>=n)){const o=e[1];t<o&&(i=2,n=o);for(let s=i-2;;){if(void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(i===s)break;if(r=n,n=e[--i-1],t>=n)break e}s=i,i=0;break i}break t}for(;i<s;){const r=i+s>>>1;t<e[r]?s=r:i=r+1}if(r=e[i],n=e[i-1],void 0===n)return this._cachedIndex=0,this.copySampleValue_(0);if(void 0===r)return i=e.length,this._cachedIndex=i,this.copySampleValue_(i-1)}this._cachedIndex=i,this.intervalChanged_(i,n,r)}return this.interpolate_(i,n,t,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(t){const e=this.resultBuffer,i=this.sampleValues,r=this.valueSize,n=t*r;for(let t=0;t!==r;++t)e[t]=i[n+t];return e}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class vs extends gs{constructor(t,e,i,r){super(t,e,i,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:2400,endingEnd:2400}}intervalChanged_(t,e,i){const r=this.parameterPositions;let n=t-2,s=t+1,o=r[n],a=r[s];if(void 0===o)switch(this.getSettings_().endingStart){case 2401:n=t,o=2*e-i;break;case 2402:n=r.length-2,o=e+r[n]-r[n+1];break;default:n=t,o=i}if(void 0===a)switch(this.getSettings_().endingEnd){case 2401:s=t,a=2*i-e;break;case 2402:s=1,a=i+r[1]-r[0];break;default:s=t-1,a=e}const h=.5*(i-e),l=this.valueSize;this._weightPrev=h/(e-o),this._weightNext=h/(a-i),this._offsetPrev=n*l,this._offsetNext=s*l}interpolate_(t,e,i,r){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=this._offsetPrev,u=this._offsetNext,c=this._weightPrev,d=this._weightNext,f=(i-e)/(r-e),p=f*f,m=p*f,g=-c*m+2*c*p-c*f,v=(1+c)*m+(-1.5-2*c)*p+(-.5+c)*f+1,y=(-1-d)*m+(1.5+d)*p+.5*f,b=d*m-d*p;for(let t=0;t!==o;++t)n[t]=g*s[l+t]+v*s[h+t]+y*s[a+t]+b*s[u+t];return n}}class ys extends gs{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=t*o,h=a-o,l=(i-e)/(r-e),u=1-l;for(let t=0;t!==o;++t)n[t]=s[h+t]*u+s[a+t]*l;return n}}class bs extends gs{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t){return this.copySampleValue_(t-1)}}class _s{constructor(t,e,i,r){if(void 0===t)throw new Error("THREE.KeyframeTrack: track name is undefined");if(void 0===e||0===e.length)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+t);this.name=t,this.times=ms(e,this.TimeBufferType),this.values=ms(i,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(t){const e=t.constructor;let i;if(e.toJSON!==this.toJSON)i=e.toJSON(t);else{i={name:t.name,times:ms(t.times,Array),values:ms(t.values,Array)};const e=t.getInterpolation();e!==t.DefaultInterpolation&&(i.interpolation=e)}return i.type=t.ValueTypeName,i}InterpolantFactoryMethodDiscrete(t){return new bs(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodLinear(t){return new ys(this.times,this.values,this.getValueSize(),t)}InterpolantFactoryMethodSmooth(t){return new vs(this.times,this.values,this.getValueSize(),t)}setInterpolation(t){let e;switch(t){case xe:e=this.InterpolantFactoryMethodDiscrete;break;case we:e=this.InterpolantFactoryMethodLinear;break;case Me:e=this.InterpolantFactoryMethodSmooth}if(void 0===e){const e="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(void 0===this.createInterpolant){if(t===this.DefaultInterpolation)throw new Error(e);this.setInterpolation(this.DefaultInterpolation)}return r.warn("THREE.KeyframeTrack:",e),this}return this.createInterpolant=e,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return xe;case this.InterpolantFactoryMethodLinear:return we;case this.InterpolantFactoryMethodSmooth:return Me}}getValueSize(){return this.values.length/this.times.length}shift(t){if(0!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]+=t}return this}scale(t){if(1!==t){const e=this.times;for(let i=0,r=e.length;i!==r;++i)e[i]*=t}return this}trim(t,e){const i=this.times,r=i.length;let n=0,s=r-1;for(;n!==r&&i[n]<t;)++n;for(;-1!==s&&i[s]>e;)--s;if(++s,0!==n||s!==r){n>=s&&(s=Math.max(s,1),n=s-1);const t=this.getValueSize();this.times=i.slice(n,s),this.values=this.values.slice(n*t,s*t)}return this}validate(){let t=!0;const e=this.getValueSize();e-Math.floor(e)!==0&&(r.error("THREE.KeyframeTrack: Invalid value size in track.",this),t=!1);const i=this.times,n=this.values,s=i.length;0===s&&(r.error("THREE.KeyframeTrack: Track is empty.",this),t=!1);let o=null;for(let e=0;e!==s;e++){const n=i[e];if("number"==typeof n&&isNaN(n)){r.error("THREE.KeyframeTrack: Time is not a valid number.",this,e,n),t=!1;break}if(null!==o&&o>n){r.error("THREE.KeyframeTrack: Out of order keys.",this,e,n,o),t=!1;break}o=n}if(void 0!==n&&(a=n,ArrayBuffer.isView(a)&&!(a instanceof DataView)))for(let e=0,i=n.length;e!==i;++e){const i=n[e];if(isNaN(i)){r.error("THREE.KeyframeTrack: Value is not a valid number.",this,e,i),t=!1;break}}var a;return t}optimize(){const t=this.times.slice(),e=this.values.slice(),i=this.getValueSize(),r=this.getInterpolation()===Me,n=t.length-1;let s=1;for(let o=1;o<n;++o){let n=!1;const a=t[o];if(a!==t[o+1]&&(1!==o||a!==t[0]))if(r)n=!0;else{const t=o*i,r=t-i,s=t+i;for(let o=0;o!==i;++o){const i=e[t+o];if(i!==e[r+o]||i!==e[s+o]){n=!0;break}}}if(n){if(o!==s){t[s]=t[o];const r=o*i,n=s*i;for(let t=0;t!==i;++t)e[n+t]=e[r+t]}++s}}if(n>0){t[s]=t[n];for(let t=n*i,r=s*i,o=0;o!==i;++o)e[r+o]=e[t+o];++s}return s!==t.length?(this.times=t.slice(0,s),this.values=e.slice(0,s*i)):(this.times=t,this.values=e),this}clone(){const t=this.times.slice(),e=this.values.slice(),i=new(0,this.constructor)(this.name,t,e);return i.createInterpolant=this.createInterpolant,i}}_s.prototype.TimeBufferType=Float32Array,_s.prototype.ValueBufferType=Float32Array,_s.prototype.DefaultInterpolation=we;class xs extends _s{constructor(t,e,i){super(t,e,i)}}xs.prototype.ValueTypeName="bool",xs.prototype.ValueBufferType=Array,xs.prototype.DefaultInterpolation=xe,xs.prototype.InterpolantFactoryMethodLinear=void 0,xs.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends _s{}).prototype.ValueTypeName="color";(class extends _s{}).prototype.ValueTypeName="number";class ws extends gs{constructor(t,e,i,r){super(t,e,i,r)}interpolate_(t,e,i,r){const n=this.resultBuffer,s=this.sampleValues,o=this.valueSize,a=(i-e)/(r-e);let h=t*o;for(let t=h+o;h!==t;h+=4)Ri.slerpFlat(n,0,s,h-o,s,h,a);return n}}class Ms extends _s{InterpolantFactoryMethodLinear(t){return new ws(this.times,this.values,this.getValueSize(),t)}}Ms.prototype.ValueTypeName="quaternion",Ms.prototype.InterpolantFactoryMethodSmooth=void 0;class Ss extends _s{constructor(t,e,i){super(t,e,i)}}Ss.prototype.ValueTypeName="string",Ss.prototype.ValueBufferType=Array,Ss.prototype.DefaultInterpolation=xe,Ss.prototype.InterpolantFactoryMethodLinear=void 0,Ss.prototype.InterpolantFactoryMethodSmooth=void 0;(class extends _s{}).prototype.ValueTypeName="vector";const As={enabled:!1,files:{},add:function(t,e){!1!==this.enabled&&(this.files[t]=e)},get:function(t){if(!1!==this.enabled)return this.files[t]},remove:function(t){delete this.files[t]},clear:function(){this.files={}}};class Es{constructor(t,e,i){const r=this;let n,s=!1,o=0,a=0;const h=[];this.onStart=void 0,this.onLoad=t,this.onProgress=e,this.onError=i,this.itemStart=function(t){a++,!1===s&&void 0!==r.onStart&&r.onStart(t,o,a),s=!0},this.itemEnd=function(t){o++,void 0!==r.onProgress&&r.onProgress(t,o,a),o===a&&(s=!1,void 0!==r.onLoad&&r.onLoad())},this.itemError=function(t){void 0!==r.onError&&r.onError(t)},this.resolveURL=function(t){return n?n(t):t},this.setURLModifier=function(t){return n=t,this},this.addHandler=function(t,e){return h.push(t,e),this},this.removeHandler=function(t){const e=h.indexOf(t);return-1!==e&&h.splice(e,2),this},this.getHandler=function(t){for(let e=0,i=h.length;e<i;e+=2){const i=h[e],r=h[e+1];if(i.global&&(i.lastIndex=0),i.test(t))return r}return null}}}const Ts=new Es;class Rs{constructor(t){this.manager=void 0!==t?t:Ts,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(t,e){const i=this;return new Promise(function(r,n){i.load(t,r,e,n)})}parse(){}setCrossOrigin(t){return this.crossOrigin=t,this}setWithCredentials(t){return this.withCredentials=t,this}setPath(t){return this.path=t,this}setResourcePath(t){return this.resourcePath=t,this}setRequestHeader(t){return this.requestHeader=t,this}}Rs.DEFAULT_MATERIAL_NAME="__DEFAULT",Error;class Ps extends Rs{constructor(t){super(t)}load(t,e,i,r){void 0!==this.path&&(t=this.path+t),t=this.manager.resolveURL(t);const n=this,s=As.get(t);if(void 0!==s)return n.manager.itemStart(t),setTimeout(function(){e&&e(s),n.manager.itemEnd(t)},0),s;const o=ri("img");function a(){l(),As.add(t,this),e&&e(this),n.manager.itemEnd(t)}function h(e){l(),r&&r(e),n.manager.itemError(t),n.manager.itemEnd(t)}function l(){o.removeEventListener("load",a,!1),o.removeEventListener("error",h,!1)}return o.addEventListener("load",a,!1),o.addEventListener("error",h,!1),"data:"!==t.slice(0,5)&&void 0!==this.crossOrigin&&(o.crossOrigin=this.crossOrigin),n.manager.itemStart(t),o.src=t,o}}class Cs extends Rs{constructor(t){super(t)}load(t,e,i,r){const n=new wi,s=new Ps(this.manager);return s.setCrossOrigin(this.crossOrigin),s.setPath(this.path),s.load(t,function(t){n.image=t,n.needsUpdate=!0,void 0!==e&&e(n)},i,r),n}}class Is extends Un{constructor(t=-1,e=1,i=1,r=-1,n=.1,s=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=t,this.right=e,this.top=i,this.bottom=r,this.near=n,this.far=s,this.updateProjectionMatrix()}copy(t,e){return super.copy(t,e),this.left=t.left,this.right=t.right,this.top=t.top,this.bottom=t.bottom,this.near=t.near,this.far=t.far,this.zoom=t.zoom,this.view=null===t.view?null:Object.assign({},t.view),this}setViewOffset(t,e,i,r,n,s){null===this.view&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=t,this.view.fullHeight=e,this.view.offsetX=i,this.view.offsetY=r,this.view.width=n,this.view.height=s,this.updateProjectionMatrix()}clearViewOffset(){null!==this.view&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const t=(this.right-this.left)/(2*this.zoom),e=(this.top-this.bottom)/(2*this.zoom),i=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let n=i-t,s=i+t,o=r+e,a=r-e;if(null!==this.view&&this.view.enabled){const t=(this.right-this.left)/this.view.fullWidth/this.zoom,e=(this.top-this.bottom)/this.view.fullHeight/this.zoom;n+=t*this.view.offsetX,s=n+t*this.view.width,o-=e*this.view.offsetY,a=o-e*this.view.height}this.projectionMatrix.makeOrthographic(n,s,o,a,this.near,this.far,this.coordinateSystem),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(t){const e=super.toJSON(t);return e.object.zoom=this.zoom,e.object.left=this.left,e.object.right=this.right,e.object.top=this.top,e.object.bottom=this.bottom,e.object.near=this.near,e.object.far=this.far,null!==this.view&&(e.object.view=Object.assign({},this.view)),e}}class ks extends zn{constructor(t=[]){super(),this.isArrayCamera=!0,this.cameras=t}}class Bs{constructor(t=!0){this.autoStart=t,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=Os(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let t=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const e=Os();t=(e-this.oldTime)/1e3,this.oldTime=e,this.elapsedTime+=t}return t}}function Os(){return performance.now()}const Ls="\\[\\]\\.:\\/",Us=new RegExp("["+Ls+"]","g"),Ds="[^"+Ls+"]",Ns="[^"+Ls.replace("\\.","")+"]",Fs=new RegExp("^"+/((?:WC+[\/:])*)/.source.replace("WC",Ds)+/(WCOD+)?/.source.replace("WCOD",Ns)+/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Ds)+/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Ds)+"$"),zs=["material","materials","bones","map"];class Gs{constructor(t,e,i){this.path=e,this.parsedPath=i||Gs.parseTrackName(e),this.node=Gs.findNode(t,this.parsedPath.nodeName),this.rootNode=t,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(t,e,i){return t&&t.isAnimationObjectGroup?new Gs.Composite(t,e,i):new Gs(t,e,i)}static sanitizeNodeName(t){return t.replace(/\s/g,"_").replace(Us,"")}static parseTrackName(t){const e=Fs.exec(t);if(null===e)throw new Error("PropertyBinding: Cannot parse trackName: "+t);const i={nodeName:e[2],objectName:e[3],objectIndex:e[4],propertyName:e[5],propertyIndex:e[6]},r=i.nodeName&&i.nodeName.lastIndexOf(".");if(void 0!==r&&-1!==r){const t=i.nodeName.substring(r+1);-1!==zs.indexOf(t)&&(i.nodeName=i.nodeName.substring(0,r),i.objectName=t)}if(null===i.propertyName||0===i.propertyName.length)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+t);return i}static findNode(t,e){if(void 0===e||""===e||"."===e||-1===e||e===t.name||e===t.uuid)return t;if(t.skeleton){const i=t.skeleton.getBoneByName(e);if(void 0!==i)return i}if(t.children){const i=function(t){for(let r=0;r<t.length;r++){const n=t[r];if(n.name===e||n.uuid===e)return n;const s=i(n.children);if(s)return s}return null},r=i(t.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(t,e){t[e]=this.targetObject[this.propertyName]}_getValue_array(t,e){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)t[e++]=i[r]}_getValue_arrayElement(t,e){t[e]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(t,e){this.resolvedProperty.toArray(t,e)}_setValue_direct(t,e){this.targetObject[this.propertyName]=t[e]}_setValue_direct_setNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(t,e){this.targetObject[this.propertyName]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(t,e){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=t[e++]}_setValue_array_setNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(t,e){const i=this.resolvedProperty;for(let r=0,n=i.length;r!==n;++r)i[r]=t[e++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(t,e){this.resolvedProperty[this.propertyIndex]=t[e]}_setValue_arrayElement_setNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty[this.propertyIndex]=t[e],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(t,e){this.resolvedProperty.fromArray(t,e)}_setValue_fromArray_setNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(t,e){this.resolvedProperty.fromArray(t,e),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(t,e){this.bind(),this.getValue(t,e)}_setValue_unbound(t,e){this.bind(),this.setValue(t,e)}bind(){let t=this.node;const e=this.parsedPath,i=e.objectName,n=e.propertyName;let s=e.propertyIndex;if(t||(t=Gs.findNode(this.rootNode,e.nodeName),this.node=t),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!t)return void r.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");if(i){let n=e.objectIndex;switch(i){case"materials":if(!t.material)return void r.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.materials)return void r.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);t=t.material.materials;break;case"bones":if(!t.skeleton)return void r.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);t=t.skeleton.bones;for(let e=0;e<t.length;e++)if(t[e].name===n){n=e;break}break;case"map":if("map"in t){t=t.map;break}if(!t.material)return void r.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);if(!t.material.map)return void r.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);t=t.material.map;break;default:if(void 0===t[i])return void r.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);t=t[i]}if(void 0!==n){if(void 0===t[n])return void r.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,t);t=t[n]}}const o=t[n];if(void 0===o){const i=e.nodeName;return void r.error("THREE.PropertyBinding: Trying to update property for track: "+i+"."+n+" but it wasn't found.",t)}let a=this.Versioning.None;this.targetObject=t,!0===t.isMaterial?a=this.Versioning.NeedsUpdate:!0===t.isObject3D&&(a=this.Versioning.MatrixWorldNeedsUpdate);let h=this.BindingType.Direct;if(void 0!==s){if("morphTargetInfluences"===n){if(!t.geometry)return void r.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);if(!t.geometry.morphAttributes)return void r.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);void 0!==t.morphTargetDictionary[s]&&(s=t.morphTargetDictionary[s])}h=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else void 0!==o.fromArray&&void 0!==o.toArray?(h=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(h=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=n;this.getValue=this.GetterByBindingType[h],this.setValue=this.SetterByBindingTypeAndVersioning[h][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Gs.Composite=class{constructor(t,e,i){const r=i||Gs.parseTrackName(e);this._targetGroup=t,this._bindings=t.subscribe_(e,r)}getValue(t,e){this.bind();const i=this._targetGroup.nCachedObjects_,r=this._bindings[i];void 0!==r&&r.getValue(t,e)}setValue(t,e){const i=this._bindings;for(let r=this._targetGroup.nCachedObjects_,n=i.length;r!==n;++r)i[r].setValue(t,e)}bind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].bind()}unbind(){const t=this._bindings;for(let e=this._targetGroup.nCachedObjects_,i=t.length;e!==i;++e)t[e].unbind()}},Gs.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3},Gs.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2},Gs.prototype.GetterByBindingType=[Gs.prototype._getValue_direct,Gs.prototype._getValue_array,Gs.prototype._getValue_arrayElement,Gs.prototype._getValue_toArray],Gs.prototype.SetterByBindingTypeAndVersioning=[[Gs.prototype._setValue_direct,Gs.prototype._setValue_direct_setNeedsUpdate,Gs.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Gs.prototype._setValue_array,Gs.prototype._setValue_array_setNeedsUpdate,Gs.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Gs.prototype._setValue_arrayElement,Gs.prototype._setValue_arrayElement_setNeedsUpdate,Gs.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Gs.prototype._setValue_fromArray,Gs.prototype._setValue_fromArray_setNeedsUpdate,Gs.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]],new Float32Array(1);const js=new sr;class Vs{constructor(t,e,i=0,r=1/0){this.ray=new nr(t,e),this.near=i,this.far=r,this.camera=null,this.layers=new gr,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(t,e){this.ray.set(t,e)}setFromCamera(t,e){e.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(t.x,t.y,.5).unproject(e).sub(this.ray.origin).normalize(),this.camera=e):e.isOrthographicCamera?(this.ray.origin.set(t.x,t.y,(e.near+e.far)/(e.near-e.far)).unproject(e),this.ray.direction.set(0,0,-1).transformDirection(e.matrixWorld),this.camera=e):r.error("THREE.Raycaster: Unsupported camera type: "+e.type)}setFromXRController(t){return js.identity().extractRotation(t.matrixWorld),this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4(js),this}intersectObject(t,e=!0,i=[]){return Ws(t,this,i,e),i.sort(Hs),i}intersectObjects(t,e=!0,i=[]){for(let r=0,n=t.length;r<n;r++)Ws(t[r],this,i,e);return i.sort(Hs),i}}function Hs(t,e){return t.distance-e.distance}function Ws(t,e,i,r){let n=!0;if(t.layers.test(e.layers)&&!1===t.raycast(e,i)&&(n=!1),!0===n&&!0===r){const r=t.children;for(let t=0,n=r.length;t<n;t++)Ws(r[t],e,i,!0)}}function Xs(t,e,i,r){const n=function(t){switch(t){case bt:case _t:return{byteLength:1,components:1};case wt:case xt:case Et:return{byteLength:2,components:1};case Tt:case Rt:return{byteLength:2,components:4};case St:case Mt:case At:return{byteLength:4,components:1};case Ct:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${t}.`)}(r);switch(i){case It:case Ot:return t*e;case Lt:return t*e*2;case Nt:case Ft:return t*e/n.components*n.byteLength;case zt:case Gt:return t*e*2/n.components*n.byteLength;case kt:return t*e*3/n.components*n.byteLength;case Bt:case jt:return t*e*4/n.components*n.byteLength;case Vt:case Ht:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Wt:case Xt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case Yt:case Kt:return Math.max(t,16)*Math.max(e,8)/4;case qt:case Zt:return Math.max(t,8)*Math.max(e,8)/2;case $t:case Qt:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*8;case Jt:case te:return Math.floor((t+3)/4)*Math.floor((e+3)/4)*16;case ee:return Math.floor((t+4)/5)*Math.floor((e+3)/4)*16;case ie:return Math.floor((t+4)/5)*Math.floor((e+4)/5)*16;case re:return Math.floor((t+5)/6)*Math.floor((e+4)/5)*16;case ne:return Math.floor((t+5)/6)*Math.floor((e+5)/6)*16;case se:return Math.floor((t+7)/8)*Math.floor((e+4)/5)*16;case oe:return Math.floor((t+7)/8)*Math.floor((e+5)/6)*16;case ae:return Math.floor((t+7)/8)*Math.floor((e+7)/8)*16;case he:return Math.floor((t+9)/10)*Math.floor((e+4)/5)*16;case le:return Math.floor((t+9)/10)*Math.floor((e+5)/6)*16;case ue:return Math.floor((t+9)/10)*Math.floor((e+7)/8)*16;case ce:return Math.floor((t+9)/10)*Math.floor((e+9)/10)*16;case de:return Math.floor((t+11)/12)*Math.floor((e+9)/10)*16;case fe:return Math.floor((t+11)/12)*Math.floor((e+11)/12)*16;case pe:case me:case ge:return Math.ceil(t/4)*Math.ceil(e/4)*16;case ve:case ye:return Math.ceil(t/4)*Math.ceil(e/4)*8;case be:case _e:return Math.ceil(t/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${i} format.`)}"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:n}})),"undefined"!=typeof window&&(window.__THREE__?r.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=n)},4934:(t,e,i)=>{var r=i(3209);t.exports=y,y.simpleSieve=g,y.fermatTest=v;var n=i(9404),s=new n(24),o=new(i(2244)),a=new n(1),h=new n(2),l=new n(5),u=(new n(16),new n(8),new n(10)),c=new n(3),d=(new n(7),new n(11)),f=new n(4),p=(new n(12),null);function m(){if(null!==p)return p;var t=[];t[0]=2;for(var e=1,i=3;i<1048576;i+=2){for(var r=Math.ceil(Math.sqrt(i)),n=0;n<e&&t[n]<=r&&i%t[n]!==0;n++);e!==n&&t[n]<=r||(t[e++]=i)}return p=t,t}function g(t){for(var e=m(),i=0;i<e.length;i++)if(0===t.modn(e[i]))return 0===t.cmpn(e[i]);return!0}function v(t){var e=n.mont(t);return 0===h.toRed(e).redPow(t.subn(1)).fromRed().cmpn(1)}function y(t,e){if(t<16)return new n(2===e||5===e?[140,123]:[140,39]);var i,p;for(e=new n(e);;){for(i=new n(r(Math.ceil(t/8)));i.bitLength()>t;)i.ishrn(1);if(i.isEven()&&i.iadd(a),i.testn(1)||i.iadd(h),e.cmp(h)){if(!e.cmp(l))for(;i.mod(u).cmp(c);)i.iadd(f)}else for(;i.mod(s).cmp(d);)i.iadd(f);if(g(p=i.shrn(1))&&g(i)&&v(p)&&v(i)&&o.test(p)&&o.test(i))return i}}},4977:(t,e,i)=>{var r=i(5606),n=i(470);t.exports=n.satisfies(r.version,"^6.12.0 || >=8.0.0")},4985:(t,e,i)=>{"use strict";i.d(e,{l:()=>s});var r=i(9636),n=i(5815);class s extends n.mc{constructor(){super(...arguments),this.canBundle=!0,this.allowChildren=!1,this._roundPixels=0,this._lastUsed=-1,this._bounds=new r.c(0,1,0,0),this._boundsDirty=!0}get bounds(){return this._boundsDirty?(this.updateBounds(),this._boundsDirty=!1,this._bounds):this._bounds}get roundPixels(){return!!this._roundPixels}set roundPixels(t){this._roundPixels=t?1:0}containsPoint(t){const e=this.bounds,{x:i,y:r}=t;return i>=e.minX&&i<=e.maxX&&r>=e.minY&&r<=e.maxY}onViewUpdate(){if(this._didViewChangeTick++,this._boundsDirty=!0,this.didViewUpdate)return;this.didViewUpdate=!0;const t=this.renderGroup||this.parentRenderGroup;t&&t.onChildViewUpdate(this)}destroy(t){super.destroy(t),this._bounds=null}collectRenderablesSimple(t,e,i){const{renderPipes:r,renderableGC:n}=e;r.blendMode.setBlendMode(this,this.groupBlendMode,t),r[this.renderPipeId].addRenderable(this,t),n.addRenderable(this),this.didViewUpdate=!1;const s=this.children,o=s.length;for(let r=0;r<o;r++)s[r].collectRenderables(t,e,i)}}},5037:(t,e,i)=>{var r;function n(t){this.rand=t}if(t.exports=function(t){return r||(r=new n(null)),r.generate(t)},t.exports.Rand=n,n.prototype.generate=function(t){return this._rand(t)},n.prototype._rand=function(t){if(this.rand.getBytes)return this.rand.getBytes(t);for(var e=new Uint8Array(t),i=0;i<e.length;i++)e[i]=this.rand.getByte();return e},"object"==typeof self)self.crypto&&self.crypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.crypto.getRandomValues(e),e}:self.msCrypto&&self.msCrypto.getRandomValues?n.prototype._rand=function(t){var e=new Uint8Array(t);return self.msCrypto.getRandomValues(e),e}:"object"==typeof window&&(n.prototype._rand=function(){throw new Error("Not implemented yet")});else try{var s=i(3776);if("function"!=typeof s.randomBytes)throw new Error("Not supported");n.prototype._rand=function(t){return s.randomBytes(t)}}catch(t){}},5060:(t,e,i)=>{"use strict";i.d(e,{u:()=>h});var r=i(949),n=i(1132),s=i(8392),o=i(4670);const a=class t extends s.V{constructor(...e){let i=e[0]??{};i instanceof Float32Array&&((0,o.t6)(o.lj,"use new MeshGeometry({ positions, uvs, indices }) instead"),i={positions:i,uvs:e[1],indices:e[2]}),i={...t.defaultOptions,...i};const s=i.positions||new Float32Array([0,0,1,0,1,1,0,1]);let a=i.uvs;a||(a=i.positions?new Float32Array(s.length):new Float32Array([0,0,1,0,1,1,0,1]));const h=i.indices||new Uint32Array([0,1,2,0,2,3]),l=i.shrinkBuffersToFit;super({attributes:{aPosition:{buffer:new r.h({data:s,label:"attribute-mesh-positions",shrinkToFit:l,usage:n.S.VERTEX|n.S.COPY_DST}),format:"float32x2",stride:8,offset:0},aUV:{buffer:new r.h({data:a,label:"attribute-mesh-uvs",shrinkToFit:l,usage:n.S.VERTEX|n.S.COPY_DST}),format:"float32x2",stride:8,offset:0}},indexBuffer:new r.h({data:h,label:"index-mesh-buffer",shrinkToFit:l,usage:n.S.INDEX|n.S.COPY_DST}),topology:i.topology}),this.batchMode="auto"}get positions(){return this.attributes.aPosition.buffer.data}set positions(t){this.attributes.aPosition.buffer.data=t}get uvs(){return this.attributes.aUV.buffer.data}set uvs(t){this.attributes.aUV.buffer.data=t}get indices(){return this.indexBuffer.data}set indices(t){this.indexBuffer.data=t}};a.defaultOptions={topology:"triangle-list",shrinkBuffersToFit:!1};let h=a},5062:(t,e,i)=>{"use strict";i.d(e,{o:()=>tt});var r=i(4922),n=i(161),s=i(7367),o=i(9520),a=i(9008);var h=/\s/;var l=/^\s+/;const u=function(t){return t?t.slice(0,function(t){for(var e=t.length;e--&&h.test(t.charAt(e)););return e}(t)+1).replace(l,""):t};var c=i(3149),d=i(1882),f=/^[-+]0x[0-9a-f]+$/i,p=/^0b[01]+$/i,m=/^0o[0-7]+$/i,g=parseInt;var v=1/0;const y=function(t){return t?(t=function(t){if("number"==typeof t)return t;if((0,d.A)(t))return NaN;if((0,c.A)(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=(0,c.A)(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=u(t);var i=p.test(t);return i||m.test(t)?g(t.slice(2),i?2:8):f.test(t)?NaN:+t}(t))===v||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0};var b=4294967295,_=Math.min;const x=function(t,e){if((t=function(t){var e=y(t),i=e%1;return e==e?i?e-i:e:0}(t))<1||t>9007199254740991)return[];var i,r=b,n=_(t,b);e="function"==typeof(i=e)?i:a.A,t-=b;for(var s=(0,o.A)(n,e);++r<t;)e(r);return s};class w{particleType;gPointPos=[];gPointCol=[];gPointOpacity=[];gUV=[];gIndices=[];gSpriteIndex=[];gridAmount=1;constructor(t){this.particleType=t}setSpriteIndex(t,e){x(4,i=>this.gSpriteIndex[t+i]=e)}clearParticleMeshDataArrays(){this.gPointPos.splice(0),this.gPointCol.splice(0),this.gPointOpacity.splice(0),this.gUV.splice(0),this.gIndices.splice(0),this.gSpriteIndex.splice(0)}fillParticleDataArrays(t,e){this.clearParticleMeshDataArrays();const i="2D"===e?t=>{this.gIndices.push(4*t+0,4*t+1,4*t+2),this.gIndices.push(4*t+0,4*t+2,4*t+3),this.gPointPos.push(-1,-1),this.gPointPos.push(1,-1),this.gPointPos.push(1,1),this.gPointPos.push(-1,1),this.gUV.push(0,1),this.gUV.push(1,1),this.gUV.push(1,0),this.gUV.push(0,0)}:t=>{this.gIndices.push(4*t+0,4*t+1,4*t+2),this.gIndices.push(4*t+0,4*t+2,4*t+3),this.gIndices.push(4*t+2,4*t+1,4*t+0),this.gIndices.push(4*t+3,4*t+2,4*t+0),this.gPointPos.push(-1,-1,0),this.gPointPos.push(1,-1,0),this.gPointPos.push(1,1,0),this.gPointPos.push(-1,1,0),this.gUV.push(0,1),this.gUV.push(1,1),this.gUV.push(1,0),this.gUV.push(0,0)};for(let e=0;e<t;e++)x(4,()=>{this.gPointCol.push(0,0,0),this.gPointOpacity.push(0),this.gSpriteIndex.push(1)}),i(e)}calcColors(t,e){const i=12*t;this.gPointCol[i]=e.x,this.gPointCol[i+1]=e.y,this.gPointCol[i+2]=e.z,this.gPointCol[i+3]=e.x,this.gPointCol[i+4]=e.y,this.gPointCol[i+5]=e.z,this.gPointCol[i+6]=e.x,this.gPointCol[i+7]=e.y,this.gPointCol[i+8]=e.z,this.gPointCol[i+9]=e.x,this.gPointCol[i+10]=e.y,this.gPointCol[i+11]=e.z}setSpriteOffset(t){const e=t-Math.floor(t/this.gridAmount)*t,i=this.gSpriteIndex.length/4;this.gSpriteIndex=[];let r=0;for(let t=0;t<i;t++)r%=this.gridAmount,x(4,()=>this.gSpriteIndex.push(r)),r+=e}}var M=i(9452);class S extends w{scene;texture=new r.gPd;pMesh=new r.eaF;pGeometry;pMaterial;vertBuffer;colorBuffer;opacityBuffer;spriteBuffer;constructor(t){super(s.M.Three),this.scene=t,this.pGeometry=new r.LoY,this.pMaterial=new r.BKk({uniforms:{uTexture:{value:this.texture},uRow:{value:1},uColumn:{value:1}},vertexShader:"precision mediump float;\n\nattribute vec3 aPosition;\nattribute float aOpacity;\nattribute vec3 aColor;\nattribute vec2 aUvs;\nattribute float aSpriteIndex;\n\nvarying vec2 vUvs;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vIndex;\n\nvoid main() {\n    vUvs = aUvs;\n    vColor = aColor;\n    vIndex = aSpriteIndex;\n    vOpacity = aOpacity;\n\n    gl_Position = projectionMatrix *  modelViewMatrix * vec4( aPosition, 1.0 );\n}",fragmentShader:"precision mediump float;\n\nuniform sampler2D uTexture;\nuniform float uRow;\nuniform float uColumn;\n        \nvarying vec3 vColor;\nvarying vec2 vUvs;\nvarying float vOpacity;\nvarying float vIndex;\n\nvoid main() {\n    float currentRow = floor(vIndex/uColumn);\n    float currentColumn = floor(vIndex + 1.0) - (uColumn * currentRow);\n    float UVRow = vUvs.y/uRow - 1.0 / uRow + ( currentRow + 1.0)/uRow;\n    float UVColumn = vUvs.x/uColumn - 1.0/uColumn + currentColumn/uColumn;\n    vec2 myUV = vec2( UVColumn , 1.0 - UVRow);\n\n    vec4 tex = texture2D(uTexture, myUV) * vOpacity; \n    gl_FragColor = vec4(tex.x * vColor.x * tex.w, tex.y  *vColor.y* tex.w , tex.z * vColor.z* tex.w,  tex.w * vOpacity);\n\n}",transparent:!0,premultipliedAlpha:!0,blending:r.bCz,blendEquation:r.gO9}),this.pGeometry.setAttribute("aPosition",new r.qtW(this.gPointPos,3)),this.pGeometry.setAttribute("aColor",new r.qtW(this.gPointCol,3)),this.pGeometry.setAttribute("aOpacity",new r.qtW(this.gPointOpacity,1)),this.pGeometry.setAttribute("aUvs",new r.qtW(this.gUV,2)),this.pGeometry.setAttribute("aSpriteIndex",new r.qtW(this.gSpriteIndex,1)),this.pGeometry.setIndex(this.gIndices),this.vertBuffer=this.pGeometry.getAttribute("aPosition"),this.colorBuffer=this.pGeometry.getAttribute("aColor"),this.opacityBuffer=this.pGeometry.getAttribute("aOpacity"),this.spriteBuffer=this.pGeometry.getAttribute("aSpriteIndex"),this.pMesh=new r.eaF(this.pGeometry,this.pMaterial)}updateSpriteAnimation(){throw new Error("Method not implemented.")}init(t){this.createParticles(t),this.scene.add(this.pMesh)}dispose(){this.vertBuffer=void 0,this.colorBuffer=void 0,this.opacityBuffer=void 0,this.spriteBuffer=void 0,this.scene.remove(this.pMesh),this.clearParticleMeshDataArrays(),n.TP.disposeObject3D(this.pMesh),this.pMaterial=void 0,this.pGeometry=void 0,this.pMesh=void 0}setPosition(t,e,i){this.pMesh.position.set(t??this.pMesh.position.x,e??this.pMesh.position.y,i??this.pMesh.position.z)}async setTexture(t){if(""!=t){const e=await M.L.loadAsync(t);this.pMaterial.uniforms.uTexture.value=e,this.pMaterial.needsUpdate=!0}}setRow(t){this.pMaterial.uniforms.uRow.value=t}setColumn(t){this.pMaterial.uniforms.uColumn.value=t}setGridAmount(t){this.gridAmount=Math.min(t,this.pMaterial.uniforms.uRow.value*this.pMaterial.uniforms.uColumn.value)}materialBlendData={1:{blendSrc:r.hdd,blendDst:r.OuU},2:{blendSrc:r.hdd,blendDst:r.qad},3:{blendSrc:r.wn6,blendDst:r.OuU},4:{blendSrc:r.aEY,blendDst:r.hdd},5:{blendSrc:r.wn6,blendDst:r.hdd}};setBlendMode(t){if(!this.materialBlendData[t])return;const e=this.materialBlendData[t];this.pMaterial.blendSrc=e.blendSrc,this.pMaterial.blendDst=e.blendDst,this.pMaterial.needsUpdate=!0}createParticles(t){this.fillParticleDataArrays(t,"3D"),this.pGeometry.setAttribute("aPosition",new r.qtW(this.gPointPos,3)),this.pGeometry.setAttribute("aColor",new r.qtW(this.gPointCol,3)),this.pGeometry.setAttribute("aOpacity",new r.qtW(this.gPointOpacity,1)),this.pGeometry.setAttribute("aUvs",new r.qtW(this.gUV,2)),this.pGeometry.setAttribute("aSpriteIndex",new r.qtW(this.gSpriteIndex,1)),this.pGeometry.setIndex(this.gIndices),this.vertBuffer=this.pGeometry.getAttribute("aPosition"),this.colorBuffer=this.pGeometry.getAttribute("aColor"),this.opacityBuffer=this.pGeometry.getAttribute("aOpacity"),this.spriteBuffer=this.pGeometry.getAttribute("aSpriteIndex")}clearParticles(){this.scene.remove(this.pMesh),this.clearParticleMeshDataArrays()}calcOpacity(t,e){const i=e+.17*Math.sin(e*Math.PI);this.gPointOpacity[t]=i,this.gPointOpacity[t+1]=i,this.gPointOpacity[t+2]=i,this.gPointOpacity[t+3]=i}calcPoints(t,e,i,n){const s=new r.kn4(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1),o=new r.kn4(Math.cos(i.z),-Math.sin(i.z),0,0,Math.sin(i.z),Math.cos(i.z),0,0,0,0,1,0,0,0,0,1),a=new r.kn4(n.x,0,0,0,0,n.y,0,0,0,0,n.z,0,0,0,0,1),h=(new r.kn4).multiplyMatrices(s,o);h.multiplyMatrices(h,a);const l=new r.IUQ(-1,-1,0,1).applyMatrix4(h),u=new r.IUQ(1,-1,0,1).applyMatrix4(h),c=new r.IUQ(1,1,0,1).applyMatrix4(h),d=new r.IUQ(-1,1,0,1).applyMatrix4(h),f=12*t;this.gPointPos[f]=l.x,this.gPointPos[f+1]=l.y,this.gPointPos[f+2]=l.z,this.gPointPos[f+3]=u.x,this.gPointPos[f+4]=u.y,this.gPointPos[f+5]=u.z,this.gPointPos[f+6]=c.x,this.gPointPos[f+7]=c.y,this.gPointPos[f+8]=c.z,this.gPointPos[f+9]=d.x,this.gPointPos[f+10]=d.y,this.gPointPos[f+11]=d.z}update(){this.pGeometry&&(this.vertBuffer&&(this.vertBuffer.array=new Float32Array(this.gPointPos),this.vertBuffer.needsUpdate=!0),this.colorBuffer&&(this.colorBuffer.array=new Float32Array(this.gPointCol),this.colorBuffer.needsUpdate=!0),this.opacityBuffer&&(this.opacityBuffer.array=new Float32Array(this.gPointOpacity),this.opacityBuffer.needsUpdate=!0),this.spriteBuffer&&(this.spriteBuffer.array=new Float32Array(this.gSpriteIndex),this.spriteBuffer.needsUpdate=!0))}}var A=i(4897),E=i(9572);class T extends w{container;shader;pGeometry;vertBuffer;colorBuffer;opacityBuffer;uvBuffer;indexBuffer;spriteBuffer;pMesh;constructor(t){super(s.M.Pixi),this.container=t,this.shader=A.Mtr.from({gl:{vertex:"precision mediump float;\n\nattribute float aOpacity;\nattribute vec2 aPosition;\nattribute vec3 aColor;\nattribute vec2 aUvs;\nattribute float aSpriteIndex;\n\nuniform mat3 uProjectionMatrix;\nuniform mat3 uWorldTransformMatrix;\nuniform mat3 uTransformMatrix;\n\nvarying vec2 vUvs;\nvarying vec3 vColor;\nvarying float vOpacity;\nvarying float vIndex;\n\nvoid main() {\n    vOpacity = aOpacity;\n    vUvs = aUvs;\n    vColor = aColor;\n    vIndex = aSpriteIndex;\n\n    mat3 mvp = uProjectionMatrix * uWorldTransformMatrix * uTransformMatrix;\n    gl_Position = vec4((mvp * vec3(aPosition, 1.0)).xy, 0.0, 1.0);\n}",fragment:"precision mediump float;\n\nuniform sampler2D uTexture;\nuniform float uRow;\nuniform float uColumn;\n        \nvarying vec3 vColor;\nvarying vec2 vUvs;\nvarying float vOpacity;\nvarying float vIndex;\n        \nvoid main() {\n    float currentRow = floor(vIndex/uColumn);\n    float currentColumn = floor(vIndex + 1.0) - (uColumn * currentRow);\n    float UVRow = vUvs.y/uRow - 1.0 / uRow + ( currentRow + 1.0)/uRow;\n    float UVColumn = vUvs.x/uColumn - 1.0/uColumn + currentColumn/uColumn;\n    vec2 myUV = vec2( UVColumn , UVRow);\n\n    vec4 tex = texture2D(uTexture, myUV) * vOpacity; \n    vec4 tex2 = tex * 0.5 + 0.5; \n    gl_FragColor = vec4(tex.x * vColor.x * tex2.x, tex.y  *vColor.y * tex2.y , tex.z * vColor.z * tex2.z, tex2.w * tex.w );\n}\n"},resources:{shaderUniforms:{uRow:{type:"f32",value:1},uColumn:{type:"f32",value:1}},uTexture:A.gPd.WHITE.source}}),this.pGeometry=new A.V23({attributes:{aPosition:{buffer:[],size:2},aColor:{buffer:[],size:3},aUvs:{buffer:[],size:2},aOpacity:{buffer:[],size:1},aSpriteIndex:{buffer:[],size:1}},indexBuffer:[]}),this.vertBuffer=this.pGeometry.getBuffer("aPosition"),this.colorBuffer=this.pGeometry.getBuffer("aColor"),this.opacityBuffer=this.pGeometry.getBuffer("aOpacity"),this.uvBuffer=this.pGeometry.getBuffer("aUvs"),this.spriteBuffer=this.pGeometry.getBuffer("aSpriteIndex"),this.indexBuffer=this.pGeometry.getIndex(),this.pMesh=new A.eaF({geometry:this.pGeometry,shader:this.shader})}updateSpriteAnimation(){throw new Error("Method not implemented.")}async init(t){this.createParticles(t),this.pMesh.scale.set(1),this.container.addChild(this.pMesh)}dispose(){this.pMesh?.parent?.removeChild(this.pMesh),this.shader=void 0,this.pGeometry=void 0,this.pMesh?.shader&&(this.pMesh.shader.resources.uTexture=A.gPd.EMPTY),this.pMesh?.removeChildren(),this.pMesh=void 0,this.vertBuffer=void 0,this.colorBuffer=void 0,this.opacityBuffer=void 0,this.uvBuffer=void 0,this.indexBuffer=void 0,this.spriteBuffer=void 0,this.clearParticleMeshDataArrays()}setPosition(t,e){this.pMesh.position.x=t??this.pMesh.position.x,this.pMesh.position.y=e??this.pMesh.position.y}async setTexture(t){if(""!=t){const e=await E.j.loadAsync(t);this.shader.resources.uTexture=e.source}}setRow(t){this.shader.resources.shaderUniforms.uniforms.uRow=t}setColumn(t){this.shader.resources.shaderUniforms.uniforms.uColumn=t}setGridAmount(t){this.gridAmount=Math.min(t,this.shader.resources.shaderUniforms.uniforms.uRow*this.shader.resources.shaderUniforms.uniforms.uColumn)}blendModeRecord={1:"normal",2:"add",3:"multiply",4:"screen",5:"overlay"};setBlendMode(t){this.pMesh.blendMode=this.blendModeRecord[t]??this.pMesh.blendMode}createParticles(t){this.fillParticleDataArrays(t,"2D"),this.vertBuffer.data=new Float32Array(this.gPointPos),this.vertBuffer.update(),this.colorBuffer.data=new Float32Array(this.gPointCol),this.colorBuffer.update(),this.uvBuffer.data=new Float32Array(this.gUV),this.uvBuffer.update(),this.indexBuffer.data=new Int16Array(this.gIndices),this.indexBuffer.update()}clearParticles(){this.pMesh?.parent?.removeChild(this.pMesh),this.clearParticleMeshDataArrays()}calcOpacity(t,e){x(4,i=>this.gPointOpacity[t+i]=e)}calcPoints(t,e,i,r){const n=new A.uqu(1,0,0,1,e.x,e.y),s=new A.uqu(Math.cos(i.z),Math.sin(i.z),-Math.sin(i.z),Math.cos(i.z),0,0),o=new A.uqu(r.x,0,0,r.y,0,0),a=(new A.uqu).append(n).append(s).append(o),h=a.apply(new A.bRX(-1,-1)),l=a.apply(new A.bRX(1,-1)),u=a.apply(new A.bRX(1,1)),c=a.apply(new A.bRX(-1,1)),d=8*t;this.gPointPos[d]=h.x,this.gPointPos[d+1]=-h.y,this.gPointPos[d+2]=l.x,this.gPointPos[d+3]=-l.y,this.gPointPos[d+4]=u.x,this.gPointPos[d+5]=-u.y,this.gPointPos[d+6]=c.x,this.gPointPos[d+7]=-c.y}update(){this.pGeometry&&(this.vertBuffer&&(this.vertBuffer.data=new Float32Array(this.gPointPos),this.vertBuffer.update()),this.colorBuffer&&(this.colorBuffer.data=new Float32Array(this.gPointCol),this.colorBuffer.update()),this.opacityBuffer&&(this.opacityBuffer.data=new Float32Array(this.gPointOpacity),this.opacityBuffer.update()),this.spriteBuffer&&(this.spriteBuffer.data=new Float32Array(this.gSpriteIndex),this.spriteBuffer.update()))}}var R=i(5820),P=i(8278),C=i(7122),I=Math.ceil,k=Math.max;var B=i(6832);const O=function(t,e,i){return i&&"number"!=typeof i&&(0,B.A)(t,e,i)&&(e=i=void 0),t=y(t),void 0===e?(e=t,t=0):e=y(e),function(t,e,i,r){for(var n=-1,s=k(I((e-t)/(i||1)),0),o=Array(s);s--;)o[r?s:++n]=t,t+=i;return o}(t,e,i=void 0===i?t<e?1:-1:y(i),void 0)};let L=0;function U(){const t=1e4*Math.sin(L++);return t-Math.floor(t)}function D(t,e,i){L=t;const r=new Array(3+i);for(let t=0;t<r.length;++t)r[t]=O(0,e);for(let t=0;t<e;++t)r[1][t]=e-t-1;for(let t=0;t<e;++t)r[2][t%2==0?Math.floor(t/2):e-1-Math.floor(t/2)]=t;for(let t=0;t<e;++t)r[3][t]=t%2==0?Math.floor(t/2):e-1-Math.floor(t/2);for(let t=4;t<i+3;++t)for(let i=0;i<e;++i){const n=Math.floor(U()*e),s=r[t][i];r[t][i]=r[t][n],r[t][n]=s}return r}var N,F,z,G,j,V,H=i(4781);class W{sps;flip=!0;canPlay=!1;canLoop=!1;emitting=!0;count=5;minLifetime=2;maxLifetime=3;seedLifetime=0;burstTime=3e3;time=0;timeSprite=0;zDepth=1e3;delay=0;outDelay=2;diedParticles=[];playMode;mode=H.K.Burst;pLife=[];pLifetime=[];shapeSeed=0;pShape=[];pShapePosition=[];pPosition=[];pPosOffset=[];pLastPosition={x:0,y:0,z:0};pUpdatePosition={x:0,y:0,z:0};pRotation=[];pScale=[];pScaleOverride=[];pColor=[];pOpacity=[];pSprite=[];pTimePercentage=[];seedFlip=!0;totalOpacity=1;seed=0;seedArray=[];seedArray1=[];seedArray2=[];posXSeed=0;posXBeziers=[];posXTimes=[];posXValues=[];posXCurves=[];posYSeed=0;posYBeziers=[];posYTimes=[];posYValues=[];posYCurves=[];rotSeed=0;rotBeziers=[];rotTimes=[];rotValues=[];rotCurves=[];scaleSeed=0;scaleBeziers=[];scaleTimes=[];scaleValues=[];scaleCurves=[];scaleXSeed=0;scaleXBeziers=[];scaleXTimes=[];scaleXValues=[];scaleXCurves=[];scaleYSeed=0;scaleYBeziers=[];scaleYTimes=[];scaleYValues=[];scaleYCurves=[];anglesSeed=0;anglesBeziers=[];anglesTimes=[];anglesValues=[];anglesCurves=[];distanceSeed=0;distanceBeziers=[];distanceTimes=[];distanceValues=[];distanceCurves=[];opacitySeed=0;opacityBeziers=[];opacityTimes=[];opacityValues=[];opacityCurves=[];colorBeziers=[];colorTimes=[];colorValues=[];colorCurves=[];minAngle=0;maxAngle=360;seedAngle=0;minSpeed=100;maxSpeed=100;seedSpeed=0;minAcceleration=0;maxAcceleration=0;seedAcceleration=0;minSpeedX=20;maxSpeedX=20;seedSpeedX=0;minSpeedY=100;maxSpeedY=200;seedSpeedY=0;minAccelerationX=0;maxAccelerationX=0;seedAccelerationX=0;minAccelerationY=-100;maxAccelerationY=-100;seedAccelerationY=0;minRotSpeed=0;maxRotSpeed=0;seedRotSpeed=0;blendMode=1;spriteFps=30;spriteType=1;spriteOffset=1;spriteAmount=1;counterAnimationFrame=0;constructor(t){this.sps=t}init(){0==this.seed?(this.seedArray=D(Math.floor(1e3*Math.random()),this.count,7),this.seedArray1=D(Math.floor(1e3*Math.random()),this.count,7),this.seedArray2=D(Math.floor(1e3*Math.random()),this.count,7)):this.seedArray=D(this.seed,this.count,7);for(let t=0;t<this.count;t++)this.pPosOffset.push({x:0,y:0,z:0}),this.pShapePosition.push({x:0,y:0,z:0}),this.pPosition.push({x:0,y:0,z:0}),this.pRotation.push({x:0,y:0,z:0}),this.pScale.push({x:0,y:0,z:0}),this.pScaleOverride.push({x:0,y:0,z:0}),this.sps.pms.calcPoints(12*t,this.pPosition[t],this.pRotation[t],this.pScale[t]),this.pColor.push({x:0,y:0,z:0}),this.pOpacity.push(0),this.pLife.push(0),this.pLifetime.push(0),this.pTimePercentage.push(0),this.pSprite.push(0),this.calcLifetime(t)}reset(){for(let t=0;t<this.count;t++)this.pPosOffset[t].x=this.pUpdatePosition.x,this.pPosOffset[t].y=this.pUpdatePosition.y,this.pPosOffset[t].z=this.pUpdatePosition.z}dispose(){this.pLifetime.splice(0),this.pPosOffset.splice(0),this.pLife.splice(0),this.pShapePosition.splice(0),this.pShape.splice(0),this.pPosition.splice(0),this.pRotation.splice(0),this.pScale.splice(0),this.pColor.splice(0),this.pOpacity.splice(0),this.pTimePercentage.splice(0),this.pSprite.splice(0),this.pRotation.splice(0),this.pScale.splice(0),this.pColor.splice(0),this.pOpacity.splice(0),this.pTimePercentage.splice(0),this.pSprite.splice(0),this.seedArray.forEach(t=>t.splice(0)),this.seedArray.splice(0),this.seedArray1.splice(0),this.seedArray1.forEach(t=>t.splice(0)),this.seedArray2.splice(0),this.seedArray2.forEach(t=>t.splice(0)),this.posXBeziers.splice(0),this.posXTimes.splice(0),this.posXValues.splice(0),this.posXCurves.forEach(t=>t.dispose()),this.posXCurves.splice(0),this.posYBeziers.splice(0),this.posYTimes.splice(0),this.posYValues.splice(0),this.posYCurves.forEach(t=>t.dispose()),this.posYCurves.splice(0),this.rotBeziers.splice(0),this.rotTimes.splice(0),this.rotValues.splice(0),this.rotCurves.forEach(t=>t.dispose()),this.rotCurves.splice(0),this.scaleBeziers.splice(0),this.scaleTimes.splice(0),this.scaleValues.splice(0),this.scaleCurves.forEach(t=>t.dispose()),this.scaleCurves.splice(0),this.anglesBeziers.splice(0),this.anglesTimes.splice(0),this.anglesValues.splice(0),this.anglesCurves.forEach(t=>t.dispose()),this.anglesCurves.splice(0),this.distanceBeziers.splice(0),this.distanceTimes.splice(0),this.distanceValues.splice(0),this.distanceCurves.forEach(t=>t.dispose()),this.distanceCurves.splice(0),this.opacityBeziers.splice(0),this.opacityTimes.splice(0),this.opacityValues.splice(0),this.opacityCurves.forEach(t=>t.dispose()),this.opacityCurves.splice(0),this.colorBeziers.splice(0),this.colorTimes.splice(0),this.colorValues.splice(0),this.colorCurves.forEach(t=>t.dispose()),this.colorCurves.splice(0)}calcLifetime(t){const e=(this.maxLifetime-this.minLifetime)/(this.count-1)*this.seedArray[this.seedLifetime][t]+this.minLifetime;this.pLifetime[t]=e}setCount(t){this.count=t,this.pLife.splice(0),this.pLifetime.splice(0),this.seedArray.splice(0),this.pPosOffset.splice(0),this.pPosition.splice(0),this.pRotation.splice(0),this.pScale.splice(0),this.pColor.splice(0),this.pOpacity.splice(0),this.sps.pms.clearParticles(),this.sps.init(),this.sps.pms.setSpriteOffset(this.spriteOffset),0!=this.pShape.length&&this.sps.createShapePoints(this.pShape)}calcRandomSeeds(t){if(0!==this.seed)return;const e=this.pLife[t]/this.pLifetime[t]*100;this.playMode==H.e.Forward?e<this.pTimePercentage[t]&&this.setRandomSeeds(t):this.playMode==H.e.Reversed?e>this.pTimePercentage[t]&&this.setRandomSeeds(t):(this.playMode,H.e.PingPong),this.pTimePercentage[t]=e}setRandomSeeds(t){if(t+1==this.count&&(this.seedFlip?(this.seedFlip=!1,this.seedArray1=D(Math.floor(1e3*Math.random()),this.count,7)):(this.seedFlip=!0,this.seedArray2=D(Math.floor(1e3*Math.random()),this.count,7))),this.seedFlip)for(let e=0;e<this.seedArray.length;e++)this.seedArray[e][t]=this.seedArray1[e][t];else for(let e=0;e<this.seedArray.length;e++)this.seedArray[e][t]=this.seedArray2[e][t]}}function X(t,e){return x(e,e=>{const i=new R.v;return i.setHandles(t[4*e],t[4*e+1],t[4*e+2],t[4*e+3]),i})}!function(t){t.Title="Title",t.Shape="Shape"}(N||(N={})),function(t){t.PlayMode="Play Mode",t.Mode="Mode"}(F||(F={})),function(t){t.Amount="Amount",t.Seed="Seed",t.Delay="Delay",t.BurstTime="Burst Time",t.SpriteType="Sprite Type",t.BlendMode="Blend Mode",t.SpriteRow="Sprite Row",t.SpriteColumn="Sprite Column",t.SpriteAmount="Sprite Amount",t.SpriteOffset="Sprite Offset",t.SpriteFps="Sprite fps"}(z||(z={})),function(t){t.Lifetime="Lifetime",t.Angle="Angle",t.Speed="Speed",t.Acceleration="Acceleration",t.SpeedX="Speed X",t.SpeedY="Speed Y",t.AccelerationX="Acceleration X",t.AccelerationY="Acceleration Y",t.RotationSpeed="Rotation Speed"}(G||(G={})),function(t){t.PositionX="Position X",t.PositionY="Position Y",t.Rotation="Rotation",t.Scale="Scale",t.ScaleX="Scale X",t.ScaleY="Scale Y",t.Angles="Angles",t.Distance="Distance",t.Opacity="Opacity",t.Color="Color"}(j||(j={})),function(t){t.Texture="Texture"}(V||(V={}));class q{sps;constructor(t){this.sps=t}}var Y=i(8592);const Z={[V.Texture]:class extends q{applyParam(t){return this.sps.pms.setTexture(t.texture)}},[j.PositionX]:class extends q{applyParam(t){this.sps.model.posXSeed=t.seed??0,this.sps.model.posXBeziers=t.beziers??[],this.sps.model.posXTimes=t.times??[],this.sps.model.posXValues=t.values,this.sps.model.posXCurves=X(this.sps.model.posXBeziers,this.sps.model.posXTimes.length)}},[j.PositionY]:class extends q{applyParam(t){this.sps.model.posYSeed=t.seed??0,this.sps.model.posYBeziers=t.beziers??[],this.sps.model.posYTimes=t.times??[],this.sps.model.posYValues=t.values,this.sps.model.posYCurves=X(this.sps.model.posYBeziers,this.sps.model.posYTimes.length)}},[j.Rotation]:class extends q{applyParam(t){this.sps.model.rotSeed=t.seed??0,this.sps.model.rotBeziers=t.beziers??[],this.sps.model.rotTimes=t.times??[],this.sps.model.rotValues=t.values,this.sps.model.rotCurves=X(this.sps.model.rotBeziers,this.sps.model.rotTimes.length)}},[j.Scale]:class extends q{applyParam(t){this.sps.model.scaleSeed=t.seed??0,this.sps.model.scaleBeziers=t.beziers??[],this.sps.model.scaleTimes=t.times??[],this.sps.model.scaleValues=t.values,this.sps.model.scaleCurves=X(this.sps.model.scaleBeziers,this.sps.model.scaleTimes.length)}},[j.ScaleX]:class extends q{applyParam(t){this.sps.model.scaleXSeed=t.seed??0,this.sps.model.scaleXBeziers=t.beziers??[],this.sps.model.scaleXTimes=t.times??[],this.sps.model.scaleXValues=t.values,this.sps.model.scaleXCurves=X(this.sps.model.scaleXBeziers,this.sps.model.scaleXTimes.length)}},[j.ScaleY]:class extends q{applyParam(t){this.sps.model.scaleYSeed=t.seed??0,this.sps.model.scaleYBeziers=t.beziers??[],this.sps.model.scaleYTimes=t.times??[],this.sps.model.scaleYValues=t.values,this.sps.model.scaleYCurves=X(this.sps.model.scaleYBeziers,this.sps.model.scaleYTimes.length)}},[j.Angles]:class extends q{applyParam(t){this.sps.model.anglesSeed=t.seed??0,this.sps.model.anglesBeziers=t.beziers??[],this.sps.model.anglesTimes=t.times??[],this.sps.model.anglesValues=t.values,this.sps.model.anglesCurves=X(this.sps.model.anglesBeziers,this.sps.model.anglesTimes.length)}},[j.Distance]:class extends q{applyParam(t){this.sps.model.distanceSeed=t.seed??0,this.sps.model.distanceBeziers=t.beziers??[],this.sps.model.distanceTimes=t.times??[],this.sps.model.distanceValues=t.values,this.sps.model.distanceCurves=X(this.sps.model.distanceBeziers,this.sps.model.distanceTimes.length)}},[j.Opacity]:class extends q{applyParam(t){this.sps.model.opacitySeed=t.seed??0,this.sps.model.opacityBeziers=t.beziers??[],this.sps.model.opacityTimes=t.times??[],this.sps.model.opacityValues=t.values,this.sps.model.opacityCurves=X(this.sps.model.opacityBeziers,this.sps.model.opacityTimes.length)}},[j.Color]:class extends q{applyParam(t){this.sps.model.colorBeziers=t.beziers??[],this.sps.model.colorTimes=t.times??[],this.sps.model.colorValues=t.values,this.sps.model.colorCurves=X(this.sps.model.colorBeziers,this.sps.model.colorTimes.length)}},[G.Lifetime]:class extends q{applyParam(t){this.sps.model.minLifetime=t.values[0],this.sps.model.maxLifetime=t.values[1],this.sps.model.seedLifetime=t.seed,x(this.sps.model.count,t=>this.sps.model.calcLifetime(t))}},[G.Angle]:class extends q{applyParam(t){this.sps.model.minAngle=t.values[0],this.sps.model.maxAngle=t.values[1],this.sps.model.seedAngle=t.seed}},[G.Speed]:class extends q{applyParam(t){this.sps.model.minSpeed=t.values[0],this.sps.model.maxSpeed=t.values[1],this.sps.model.seedSpeed=t.seed}},[G.Acceleration]:class extends q{applyParam(t){this.sps.model.minAcceleration=t.values[0],this.sps.model.maxAcceleration=t.values[1],this.sps.model.seedAcceleration=t.seed}},[G.SpeedX]:class extends q{applyParam(t){this.sps.model.minSpeedX=t.values[0],this.sps.model.maxSpeedX=t.values[1],this.sps.model.seedSpeedX=t.seed}},[G.SpeedY]:class extends q{applyParam(t){this.sps.model.minSpeedY=t.values[0],this.sps.model.maxSpeedY=t.values[1],this.sps.model.seedSpeedY=t.seed}},[G.AccelerationX]:class extends q{applyParam(t){this.sps.model.minAccelerationX=t.values[0],this.sps.model.maxAccelerationX=t.values[1],this.sps.model.seedAccelerationX=t.seed}},[G.AccelerationY]:class extends q{applyParam(t){this.sps.model.minAccelerationY=t.values[0],this.sps.model.maxAccelerationY=t.values[1],this.sps.model.seedAccelerationY=t.seed}},[G.RotationSpeed]:class extends q{applyParam(t){this.sps.model.minRotSpeed=t.values[0],this.sps.model.maxRotSpeed=t.values[1],this.sps.model.seedRotSpeed=t.seed}},[z.Amount]:class extends q{applyParam(t){this.sps.model.setCount(t.values[0])}},[z.Seed]:class extends q{applyParam(t){this.sps.model.seed=t.values[0],this.sps.model.setCount(this.sps.model.count)}},[z.Delay]:class extends q{applyParam(t){this.sps.model.delay=t.values[0]}},[z.BurstTime]:class extends q{applyParam(t){this.sps.model.burstTime=t.values[0]}},[z.SpriteType]:class extends q{applyParam(t){this.sps.model.spriteType=t.values[0]}},[z.BlendMode]:class extends q{applyParam(t){this.sps.model.blendMode=t.values[0],this.sps.pms.setBlendMode(this.sps.model.blendMode)}},[z.SpriteRow]:class extends q{applyParam(t){this.sps.pms.setRow(t.values[0])}},[z.SpriteColumn]:class extends q{applyParam(t){this.sps.pms.setColumn(t.values[0])}},[z.SpriteAmount]:class extends q{applyParam(t){this.sps.model.spriteAmount=t.values[0],this.sps.pms.setGridAmount(this.sps.model.spriteAmount)}},[z.SpriteOffset]:class extends q{applyParam(t){this.sps.model.spriteOffset=t.values[0],this.sps.pms.setSpriteOffset(this.sps.model.spriteOffset)}},[z.SpriteFps]:class extends q{applyParam(t){this.sps.model.spriteFps=t.values[0]}},[F.PlayMode]:class extends q{applyParam(t){this.sps.model.playMode=t.values[0]}},[F.Mode]:class extends q{applyParam(t){this.sps.model.mode=t.values[0]}},[N.Title]:class extends q{applyParam(){}},[N.Shape]:class extends q{applyParam(t){this.sps.model.shapeSeed=t.seed,0!=t.values.length&&(""!==t.values[0]?(this.sps.model.pShape=t.values,this.sps.createShapePoints(this.sps.model.pShape)):(this.sps.model.pShape=[],this.sps.clearShapePoints()))}}};class K{singleParticleSystem;paramSetters;constructor(t){this.singleParticleSystem=t,this.paramSetters=Object.keys(Z).map(t=>({name:t,setter:new Z[t](this.singleParticleSystem)}))}async setParameter(t){await Promise.all(t.map(t=>{const e=this.paramSetters.find(e=>e.name===t.name);if(!e)return P.Nt.error(C.M,`param setter not found: ${t.name}`),Promise.resolve();const i=e.setter.applyParam((0,Y.A)(t));return i instanceof Promise?i:Promise.resolve()}))}}class ${sps;framecounter=0;spawncounter=0;percentage=0;wait=!1;oldPosX=0;oldPosY=0;oldPosZ=0;constructor(t){this.sps=t}get model(){return this.sps.model}get pms(){return this.sps.pms}update(t){const e=this.model.maxLifetime>this.model.minLifetime?this.model.maxLifetime:this.model.minLifetime;this.sps.timeCalculator.calcGlobalTime(t,this.model.mode,this.model.playMode,e);for(let t=0;t<this.model.count;t++)if(this.model.mode!==H.K.Burst){if(this.model.mode===H.K.Loop){const i=this.model.pLife[t];this.model.pLife[t]=this.model.time-e/this.model.count*t,this.model.pLife[t]<=0&&(this.model.pLife[t]=this.model.pLife[t]+e),this.model.pLife[t]<i&&(this.model.diedParticles.push(t),this.model.emitting?(this.model.pScaleOverride[t].x=1,this.model.pScaleOverride[t].y=1,this.model.pScaleOverride[t].z=1):(this.model.pScaleOverride[t].x=0,this.model.pScaleOverride[t].y=0,this.model.pScaleOverride[t].z=0));continue}}else this.model.pLife[t]=this.model.time-this.model.burstTime/1e3/this.model.count*t,this.model.pScaleOverride[t].x=1,this.model.pScaleOverride[t].y=1,this.model.pScaleOverride[t].z=1;this.calcSpawnPos(t),this.particleDied(t);for(let t=0;t<this.model.count;t++)this.model.pLife[t]>=0&&this.model.pLife[t]<=this.model.pLifetime[t]?(this.model.pPosition[t].z=t/this.model.zDepth,this.model.calcRandomSeeds(t),this.calcPosition(t),this.calcDirectionalPosition(t),this.calcRotation(t),this.calcScale(t),this.calcDirectionalSpeed(t),this.calcRotSpeed(t),this.calcSpeed(t),this.calcOpacity(t),this.calcColor(t),this.calcSprite(t),this.pms.calcPoints(t,this.model.pPosition[t],this.model.pRotation[t],this.model.pScale[t]),this.pms.calcColors(t,this.model.pColor[t]),this.pms.calcOpacity(4*t,this.model.pOpacity[t]),this.pms.setSpriteIndex(4*t,this.model.pSprite[t])):this.model.pScale.length>t&&(this.model.pScale[t].x=0,this.model.pScale[t].y=0,this.model.pScale[t].z=0,this.pms.calcPoints(t,this.model.pPosition[t],this.model.pRotation[t],this.model.pScale[t]))}calcPosition(t){let e=0;e=this.calcValueWithSeeds(t,this.model.posXValues,this.model.posXTimes,this.model.posXCurves,this.model.seedArray,this.model.posXSeed),this.model.pPosition[t].x=e+this.model.pShapePosition[t].x+this.model.pPosOffset[t].x;let i=0;i=this.calcValueWithSeeds(t,this.model.posYValues,this.model.posYTimes,this.model.posYCurves,this.model.seedArray,this.model.posYSeed),this.model.pPosition[t].y=i-this.model.pShapePosition[t].y+this.model.pPosOffset[t].y}calcDirectionalPosition(t){let e=0;e=this.calcValueWithSeeds(t,this.model.anglesValues,this.model.anglesTimes,this.model.anglesCurves,this.model.seedArray,this.model.anglesSeed);let i=0;i=this.calcValueWithSeeds(t,this.model.distanceValues,this.model.distanceTimes,this.model.distanceCurves,this.model.seedArray,this.model.distanceSeed),this.model.pPosition[t].x=this.model.pPosition[t].x+Math.sin((0,P.eh)(e))*i,this.model.pPosition[t].y=this.model.pPosition[t].y+Math.cos((0,P.eh)(e))*i}calcRotation(t){let e=0;e=this.calcValueWithSeeds(t,this.model.rotValues,this.model.rotTimes,this.model.rotCurves,this.model.seedArray,this.model.rotSeed),this.model.pRotation[t].z=-Math.PI*e/180}calcScale(t){let e=0;e=this.calcValueWithSeeds(t,this.model.scaleValues,this.model.scaleTimes,this.model.scaleCurves,this.model.seedArray,this.model.scaleSeed),this.model.pScale[t].x=e*this.model.pScaleOverride[t].x,this.model.pScale[t].y=e*this.model.pScaleOverride[t].y,this.model.pScale[t].z=e*this.model.pScaleOverride[t].z}calcDirectionalSpeed(t){const e=(this.model.maxAngle-this.model.minAngle)/(this.model.count-1)*this.model.seedArray[this.model.seedAngle][t]+this.model.minAngle,i=(this.model.maxSpeed-this.model.minSpeed)/(this.model.count-1)*this.model.seedArray[this.model.seedSpeed][t]+this.model.minSpeed,r=(this.model.maxAcceleration-this.model.minAcceleration)/(this.model.count-1)*this.model.seedArray[this.model.seedAcceleration][t]+this.model.minAcceleration;this.model.pPosition[t].x=this.model.pPosition[t].x+Math.sin(e*Math.PI/180)*i*this.model.pLife[t]+Math.sin(e*Math.PI/180)*r*this.model.pLife[t]*this.model.pLife[t],this.model.pPosition[t].y=this.model.pPosition[t].y+Math.cos(e*Math.PI/180)*i*this.model.pLife[t]+Math.cos(e*Math.PI/180)*r*this.model.pLife[t]*this.model.pLife[t]}calcSpeed(t){const e=(this.model.maxSpeedX-this.model.minSpeedX)/(this.model.count-1)*this.model.seedArray[this.model.seedSpeedX][t]+this.model.minSpeedX,i=(this.model.maxSpeedY-this.model.minSpeedY)/(this.model.count-1)*this.model.seedArray[this.model.seedSpeedY][t]+this.model.minSpeedY,r=(this.model.maxAccelerationX-this.model.minAccelerationX)/(this.model.count-1)*this.model.seedArray[this.model.seedAccelerationX][t]+this.model.minAccelerationX,n=(this.model.maxAccelerationY-this.model.minAccelerationY)/(this.model.count-1)*this.model.seedArray[this.model.seedAccelerationY][t]+this.model.minAccelerationY;this.model.pPosition[t].x=this.model.pPosition[t].x+e*this.model.pLife[t]+r*this.model.pLife[t]*this.model.pLife[t],this.model.pPosition[t].y=this.model.pPosition[t].y+i*this.model.pLife[t]+n*this.model.pLife[t]*this.model.pLife[t]}calcRotSpeed(t){const e=(this.model.maxRotSpeed-this.model.minRotSpeed)/(this.model.count-1)*this.model.seedArray[this.model.seedRotSpeed][t]+this.model.minRotSpeed;this.model.pRotation[t].z=this.model.pRotation[t].z+e*this.model.pLife[t]*-Math.PI/180}calcOpacity(t){let e=0;e=this.calcValueWithSeeds(t,this.model.opacityValues,this.model.opacityTimes,this.model.opacityCurves,this.model.seedArray,this.model.opacitySeed),this.model.pOpacity[t]=e*this.model.totalOpacity}calcColor(t){if(this.model.colorTimes.length>1){const e=this.model.pLife[t]/this.model.pLifetime[t]*100,i=this.model.colorTimes.findIndex(t=>t>e)-1;if(i<0)this.model.pColor[t].x=this.model.colorValues[3*(this.model.colorTimes.length-1)],this.model.pColor[t].y=this.model.colorValues[3*(this.model.colorTimes.length-1)+1],this.model.pColor[t].z=this.model.colorValues[3*(this.model.colorTimes.length-1)+2];else{const r=100*(e-this.model.colorTimes[i])/(this.model.colorTimes[i+1]-this.model.colorTimes[i]);if(null!=this.model.colorCurves[i]){const e=this.model.colorCurves[i].getYValue(r)/100,n=this.model.colorValues[3*i],s=this.model.colorValues[3*(i+1)],o=this.model.colorValues[3*i+1],a=this.model.colorValues[3*(i+1)+1],h=this.model.colorValues[3*i+2],l=this.model.colorValues[3*(i+1)+2];this.model.pColor[t].x=(s-n)*e+n,this.model.pColor[t].y=(a-o)*e+o,this.model.pColor[t].z=(l-h)*e+h}}}else this.model.pColor[t].x=this.model.colorValues[0],this.model.pColor[t].y=this.model.colorValues[1],this.model.pColor[t].z=this.model.colorValues[2]}calcSprite(t){if(this.model.canPlay)if(2===this.model.spriteType){if(this.model.mode===H.K.Burst){const e=this.model.pLife[t]*this.model.spriteFps%this.model.spriteAmount;this.model.pSprite[t]=e,this.model.pSprite[t+1]=e,this.model.pSprite[t+2]=e,this.model.pSprite[t+3]=e}else if(this.model.mode===H.K.Loop){const e=(this.model.timeSprite*this.model.spriteFps+t*this.model.spriteOffset)%this.model.spriteAmount;this.model.pSprite[t]=e,this.model.pSprite[t+1]=e,this.model.pSprite[t+2]=e,this.model.pSprite[t+3]=e}}else{const e=t*this.model.spriteOffset%this.model.spriteAmount;this.model.pSprite[t]=e,this.model.pSprite[t+1]=e,this.model.pSprite[t+2]=e,this.model.pSprite[t+3]=e}}calcValueWithSeeds(t,e,i,r,n,s){let o=0;if(i.length>1){const a=this.model.pLife[t]/this.model.pLifetime[t]*100,h=i.findIndex(t=>t>a)-1;if(h<0)o=(e[2*(i.length-1)+1]-e[2*(i.length-1)])/(this.model.count-1)*n[s][t]+e[2*(i.length-1)];else{const l=(e[2*h+1]-e[2*h])/(this.model.count-1)*n[s][t]+e[2*h],u=(e[2*(h+1)+1]-e[2*(h+1)])/(this.model.count-1)*n[s][t]+e[2*(h+1)],c=100*(a-i[h])/(i[h+1]-i[h]);null!=r[h]&&(o=(u-l)*(r[h].getYValue(c)/100)+l)}}else 1===i.length&&(o=(e[1]-e[0])/(this.model.count-1)*n[s][t]+e[0]);return o}particleDied(t){if(0!=this.model.diedParticles.length)if(this.model.diedParticles.length>1){const t=this.model.pUpdatePosition.x-this.model.pLastPosition.x,e=this.model.pUpdatePosition.y-this.model.pLastPosition.y,i=this.model.pUpdatePosition.z-this.model.pLastPosition.z;for(let r=0;r<this.model.diedParticles.length;r++)this.model.pPosOffset[this.model.diedParticles[r]].x=this.model.pLastPosition.x+t/this.model.diedParticles.length*r,this.model.pPosOffset[this.model.diedParticles[r]].y=this.model.pLastPosition.y+e/this.model.diedParticles.length*r,this.model.pPosOffset[this.model.diedParticles[r]].z=this.model.pLastPosition.z+i/this.model.diedParticles.length*r}else this.model.pPosOffset[this.model.diedParticles[0]].x=this.model.pUpdatePosition.x,this.model.pPosOffset[this.model.diedParticles[0]].y=this.model.pUpdatePosition.y,this.model.pPosOffset[this.model.diedParticles[0]].z=this.model.pUpdatePosition.z;this.model.pLastPosition.x=this.model.pUpdatePosition.x,this.model.pLastPosition.y=this.model.pUpdatePosition.y,this.model.pLastPosition.z=this.model.pUpdatePosition.z,this.model.diedParticles.splice(0)}particleDied2(t){if(0!=this.model.diedParticles.length){const t=this.model.pLastPosition.x-this.oldPosX,e=this.model.pLastPosition.y-this.oldPosY,i=this.model.pLastPosition.z-this.oldPosZ;if(0==this.wait){if(this.model.diedParticles.length>1)for(let r=0;r<this.model.diedParticles.length;r++)this.model.emitting?(this.model.pScaleOverride[this.model.diedParticles[r]].x=1,this.model.pScaleOverride[this.model.diedParticles[r]].y=1,this.model.pScaleOverride[this.model.diedParticles[r]].z=1):(this.model.pScaleOverride[this.model.diedParticles[r]].x=0,this.model.pScaleOverride[this.model.diedParticles[r]].y=0,this.model.pScaleOverride[this.model.diedParticles[r]].z=0),this.model.pPosOffset[this.model.diedParticles[r]].x=this.model.pLastPosition.x-t/this.model.diedParticles.length*r,this.model.pPosOffset[this.model.diedParticles[r]].y=this.model.pLastPosition.y-e/this.model.diedParticles.length*r,this.model.pPosOffset[this.model.diedParticles[r]].z=this.model.pLastPosition.z-i/this.model.diedParticles.length*r;else this.model.emitting?(this.model.pScaleOverride[this.model.diedParticles[0]].x=1,this.model.pScaleOverride[this.model.diedParticles[0]].y=1,this.model.pScaleOverride[this.model.diedParticles[0]].z=1):(this.model.pScaleOverride[this.model.diedParticles[0]].x=0,this.model.pScaleOverride[this.model.diedParticles[0]].y=0,this.model.pScaleOverride[this.model.diedParticles[0]].z=0),this.model.pPosOffset[this.model.diedParticles[0]].x=this.model.pLastPosition.x,this.model.pPosOffset[this.model.diedParticles[0]].y=this.model.pLastPosition.y,this.model.pPosOffset[this.model.diedParticles[0]].z=this.model.pLastPosition.z,this.model.pUpdatePosition.x;this.oldPosX=this.model.pLastPosition.x,this.oldPosY=this.model.pLastPosition.y,this.oldPosZ=this.model.pLastPosition.z,this.model.diedParticles.splice(0)}else for(let t=0;t<this.model.diedParticles.length;t++)this.model.pPosOffset[this.model.diedParticles[t]].y=this.model.pLastPosition.y-e/this.model.diedParticles.length*t,this.model.pScaleOverride[this.model.diedParticles[t]].x=0,this.model.pScaleOverride[this.model.diedParticles[t]].y=0,this.model.pScaleOverride[this.model.diedParticles[t]].z=0}}calcSpawnPos(t){this.spawncounter=this.model.maxLifetime/this.model.count,this.framecounter=t+this.framecounter;const e=Math.floor(this.framecounter/this.spawncounter);if(e>=1){this.wait=!1,this.percentage=this.spawncounter/this.framecounter,this.percentage=1-this.percentage,this.framecounter=this.framecounter-this.spawncounter*e;let t=(this.model.pUpdatePosition.x-this.model.pLastPosition.x)*this.percentage,i=(this.model.pUpdatePosition.y-this.model.pLastPosition.y)*this.percentage,r=(this.model.pUpdatePosition.z-this.model.pLastPosition.z)*this.percentage;this.model.pLastPosition.x=this.model.pUpdatePosition.x-t,this.model.pLastPosition.y=this.model.pUpdatePosition.y-i,this.model.pLastPosition.z=this.model.pUpdatePosition.z-r}else this.wait=!0}}class Q{sps;constructor(t){this.sps=t}get model(){return this.sps.model}calcGlobalTime(t,e,i,r){this.model.canPlay&&this.calcGlobalTimeModeHandler[e][i](t,r)}calcGlobalTimeModeHandler={[H.K.Burst]:{[H.e.Forward]:this.calcGlobalTimeBurstForward.bind(this),[H.e.Reversed]:this.calcGlobalTimeBurstReverse.bind(this),[H.e.PingPong]:this.calcGlobalTimeBurstPingPong.bind(this)},[H.K.Loop]:{[H.e.Forward]:this.calcGlobalTimeLoopForward.bind(this),[H.e.Reversed]:this.calcGlobalTimeLoopReverse.bind(this),[H.e.PingPong]:this.calcGlobalTimeLoopPingPong.bind(this)}};calcGlobalTimeBurstForward(t,e){this.model.time=this.model.time+t,this.model.time>e+this.model.outDelay+this.model.burstTime/1e3&&(this.model.canLoop||(this.model.canPlay=!1),this.model.time=-this.model.delay/1e3-1e-4,this.sps.onComplete?.(),0===this.model.seed&&(this.model.seedArray=D(Math.floor(1e3*Math.random()),this.model.count,7)))}calcGlobalTimeBurstReverse(t,e){this.model.time=this.model.time-t,this.model.time<0&&(this.model.canLoop||(this.model.canPlay=!1),this.model.time=e+this.model.delay/1e3+this.model.burstTime/1e3,this.sps.onComplete?.(),0==this.model.seed&&(this.model.seedArray=D(Math.floor(1e3*Math.random()),this.model.count,7)))}calcGlobalTimeBurstPingPong(t,e){this.model.flip?(this.model.time=this.model.time+t,this.model.time>e+this.model.burstTime/1e3&&(this.model.time=e+this.model.burstTime/1e3,this.model.flip=!1)):(this.model.time=this.model.time-t,this.model.time<0&&(this.model.time=0,this.model.flip=!0))}calcGlobalTimeLoopForward(t,e){this.model.time=this.model.time+t,this.model.timeSprite=this.model.timeSprite+t,this.model.time>e&&(this.model.time=this.model.time%e)}calcGlobalTimeLoopReverse(t,e){this.model.time=this.model.time-t,this.model.timeSprite=this.model.timeSprite+t,this.model.time<0&&(this.model.time=e)}calcGlobalTimeLoopPingPong(t,e){this.model.flip?(this.model.time=this.model.time+t,this.model.timeSprite=this.model.timeSprite+t,this.model.time>e&&(this.model.time=e,this.model.flip=!1)):(this.model.time=this.model.time-t,this.model.timeSprite=this.model.timeSprite+t,this.model.time<0&&(this.model.time=0,this.model.flip=!0))}calcGlobalTimeBurstAndLoopForward(t,e){this.model.time=this.model.time+t,this.model.time>e&&(this.model.time=this.model.time%e)}calcGlobalTimeBurstAndLoopReverse(t,e){this.model.time=this.model.time-t,this.model.time<0&&(this.model.time=this.model.time%e)}calcGlobalTimeBurstAndLoopPingPong(t,e){this.model.flip?(this.model.time=this.model.time+t,this.model.time>e&&(this.model.time=e,this.model.flip=!1)):(this.model.time=this.model.time-t,this.model.time<0&&(this.model.time=0,this.model.flip=!0))}}class J{pms;model=new W(this);paramSetterHandler=new K(this);updater=new $(this);timeCalculator=new Q(this);onComplete;get currentTime(){return this.model.time}typeConstructors={[s.M.Pixi]:{cnstr:T,tester:t=>t instanceof A.mcf},[s.M.Three]:{cnstr:S,tester:t=>t instanceof r.B69}};constructor(t,e){if(e)this.pms=new this.typeConstructors[e].cnstr(t);else{let e;const i=Object.values(this.typeConstructors);for(const r of i)if(r.tester(t)){e=new r.cnstr(t);break}e||P.Nt.errorThrow(C.M,"could not distinguish container type"),this.pms=e}}init(){this.model.init(),this.pms.init(this.model.count)}dispose(){this.model.dispose(),this.pms?.dispose()}play(){this.model.emitting=!0,this.model.canPlay=!0,this.model.canLoop=!0,this.onComplete=void 0}playOnce(t){this.model.canPlay=!0,this.model.canLoop=!1,this.onComplete=t}pause(){this.model.canPlay=!1}loop(t){this.model.canLoop=t,this.onComplete=void 0}reset(){this.model.time=-1e-4-this.model.delay/1e3,this.model.reset()}stop(){this.model.emitting=!1}setOutDelay(t){this.model.outDelay=t}setZDepth(t){this.model.zDepth=t}update(t){this.updater.update(t),this.pms.update()}setPosition(t,e,i){this.pms.setPosition(t,e,i)}updatePosition(t,e,i){this.model.pUpdatePosition.x=t,this.model.pUpdatePosition.y=e,this.model.pUpdatePosition.z=i}setOpacity(t){this.model.totalOpacity=t}setParameters(t){return this.setParameter(t[t.length-1])}setTexture(t){return this.pms.setTexture(t)}setParameter(t){return this.paramSetterHandler?.setParameter(t??[])??Promise.resolve()}clearShapePoints(){for(let t=0;t<this.model.count;t++)this.model.pShapePosition[t].x=0,this.model.pShapePosition[t].y=0}createShapePoints(t){let e=0,i=[];const r=[],n=[];t.forEach(t=>{i=t.split(" ");const s=[];i.forEach(t=>{t.split(/(?:c|m|z|,)+/).forEach(t=>{""!==t&&s.push(parseFloat(t))})});const o=(s.length/2-1)/3,a=[];let h=-960,l=-540;for(let t=0;t<o;t++){h+=s[6*t],l+=s[6*t+1],a.push({p1x:h,p1y:l,p2x:h+s[6*t+2],p2y:l+s[6*t+3],p3x:h+s[6*t+4],p3y:l+s[6*t+5],p4x:h+s[6*t+6],p4y:l+s[6*t+7]});const i=new R.v;i.setPoints(a[t].p1x,a[t].p1y,a[t].p4x,a[t].p4y),i.setHandles(a[t].p2x,a[t].p2y,a[t].p3x,a[t].p3y),e+=i.getCurveLength(),r.push(i),n.push(i.getCurveLength())}});const s=e/this.model.count;for(let t=0;t<this.model.count;t++){const e=this.model.seedArray[this.model.shapeSeed][t]*s;let i=n[0],o=0;for(let t=0;t<r.length;t++)e>i&&(i+=n[t+1],o++);const a=e-i+n[o],h=r[o].getPointAtLength(a);this.model.pShapePosition[t].x=h[0],this.model.pShapePosition[t].y=h[1]}}}class tt{scene;options;particleSystem=[];posX=0;posY=0;posZ=0;opacity=1;_totalTime=0;_disposed=!1;_loop=!0;arrayLifeTime=[];constructor(t,e){this.scene=t,this.options=e}get disposed(){return this._disposed}get looping(){return this._loop}get totalTime(){return this._totalTime}get currentTime(){return this.particleSystem[0].currentTime}update(t){this._disposed||this.particleSystem.forEach(e=>e.update(t))}dispose(){this._disposed?this.logAlreadyDisposed():(this._disposed=!0,this.particleSystem.forEach(t=>t.dispose()),this.arrayLifeTime.splice(0))}play(){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach(t=>t.play())}playOnce(t){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach((e,i)=>e.playOnce(0===i?t:void 0))}pause(){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach(t=>t.pause())}stop(){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach(t=>t.stop())}reset(){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach(t=>t.reset())}loop(t){this._disposed?this.logAlreadyDisposed():(this._loop=t,this.particleSystem.forEach(e=>e.loop(t)))}setPosition(t,e,i){this._disposed?this.logAlreadyDisposed():(this.posX=t,this.posY=e,this.posZ=i,this.particleSystem.forEach((t,e)=>t.setPosition(this.posX,this.posY,this.posZ+e)))}setSpawnPosition(t,e,i){this.particleSystem.forEach(r=>r.updatePosition(t,e,i))}setZDepth(t){this._disposed?this.logAlreadyDisposed():this.particleSystem.forEach(e=>e.setZDepth(t))}setOpacity(t){this._disposed?this.logAlreadyDisposed():(this.opacity=t,this.particleSystem.forEach(e=>e.setOpacity(t)))}setCount(t){if(this._disposed)this.logAlreadyDisposed();else for(let e=0;e<this.particleSystem.length;e++)for(let i=0;i<t.length;i++)if(t[e][i].name===z.Amount){const r=t[e][i];this.particleSystem[e].model.setCount(r.values[0])}}async setTexture(t){await Promise.all(this.particleSystem.map(e=>e.setTexture(t)))}async setParameters(t){if(this._disposed)return void this.logAlreadyDisposed();t.length!=this.particleSystem.length&&t.forEach(()=>{if(t.length>this.particleSystem.length){const t=new J(this.scene,this.options?.forcedType);t.init(),this.particleSystem.push(t)}t.length<this.particleSystem.length&&this.particleSystem.pop()?.dispose();const e=this.calcLongestLifetime(t);this._totalTime=e,this.particleSystem.forEach((t,e)=>{t.setOutDelay(this._totalTime-this.arrayLifeTime[e]),t.reset()})}),await Promise.all(this.particleSystem.map(async(e,i)=>{await e.setParameter(t[i]),e.setPosition(this.posX,this.posY,this.posZ+i),e.setOpacity(this.opacity)}));const e=this.calcLongestLifetime(t);this._totalTime!=e&&(this._totalTime=e,this.particleSystem.forEach(t=>t.reset())),this.particleSystem.forEach((t,e)=>t.setOutDelay(this._totalTime-this.arrayLifeTime[e]))}calcLongestLifetime(t){if(this._disposed)return this.logAlreadyDisposed(),0;let e=0;return this.arrayLifeTime=[],t.forEach(t=>{let i=0,r=0,n=0,s=0;t.forEach(t=>{t.name===z.Delay?i=t.values[0]:t.name===z.BurstTime?n=t.values[0]:t.name===F.Mode?s=t.values[0]:t.name===G.Lifetime&&(r=t.values[0]>t.values[1]?t.values[0]:t.values[1])});const o=s===H.K.Burst?i/1e3+r+n/1e3:i/1e3+r;e<o&&(e=o),this.arrayLifeTime.push(o)}),e}logAlreadyDisposed(){P.Nt.warning("ParticleSystem","The system has already been disposed",this)}}},5099:(t,e,i)=>{"use strict";i.d(e,{W:()=>r});var r=(t=>(t[t.WEBGL=1]="WEBGL",t[t.WEBGPU=2]="WEBGPU",t[t.BOTH=3]="BOTH",t))(r||{})},5101:(t,e,i)=>{"use strict";i.d(e,{b:()=>r});class r{constructor(t=0,e=0){this.x=0,this.y=0,this.x=t,this.y=e}clone(){return new r(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,e=t){return this.x=t,this.y=e,this}toString(){return`[pixi.js/math:Point x=${this.x} y=${this.y}]`}static get shared(){return n.x=0,n.y=0,n}}const n=new r},5122:t=>{t.exports=function(t){for(var e,i=t.length;i--;){if(255!==(e=t.readUInt8(i))){e++,t.writeUInt8(e,i);break}t.writeUInt8(0,i)}}},5157:t=>{t.exports=function(){throw new Error("Readable.from is not available in the browser")}},5175:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var r=i(2383),n=i(3098);const s=function(t){return(0,n.A)(t)&&"[object Arguments]"==(0,r.A)(t)};var o=Object.prototype,a=o.hasOwnProperty,h=o.propertyIsEnumerable;const l=s(function(){return arguments}())?s:function(t){return(0,n.A)(t)&&a.call(t,"callee")&&!h.call(t,"callee")}},5232:(t,e,i)=>{var r=i(8287).Buffer;t.exports=function(t){return"string"==typeof t?t:"number"==typeof t||r.isBuffer(t)?t.toString():JSON.stringify(t)}},5242:(t,e,i)=>{"use strict";t.exports=s;var r=i(1816),n=Object.create(i(5622));function s(t){if(!(this instanceof s))return new s(t);r.call(this,t)}n.inherits=i(6698),n.inherits(s,r),s.prototype._transform=function(t,e,i){i(null,t)}},5248:(t,e,i)=>{"use strict";const r=i(4083),{stdout:n,stderr:s}=i(2747),{stringReplaceAll:o,stringEncaseCRLFWithFirstIndex:a}=i(4058),{isArray:h}=Array,l=["ansi","ansi","ansi256","ansi16m"],u=Object.create(null);class c{constructor(t){return d(t)}}const d=t=>{const e={};return((t,e={})=>{if(e.level&&!(Number.isInteger(e.level)&&e.level>=0&&e.level<=3))throw new Error("The `level` option should be an integer from 0 to 3");const i=n?n.level:0;t.level=void 0===e.level?i:e.level})(e,t),e.template=(...t)=>_(e.template,...t),Object.setPrototypeOf(e,f.prototype),Object.setPrototypeOf(e.template,e),e.template.constructor=()=>{throw new Error("`chalk.constructor()` is deprecated. Use `new chalk.Instance()` instead.")},e.template.Instance=c,e.template};function f(t){return d(t)}for(const[t,e]of Object.entries(r))u[t]={get(){const i=v(this,g(e.open,e.close,this._styler),this._isEmpty);return Object.defineProperty(this,t,{value:i}),i}};u.visible={get(){const t=v(this,this._styler,!0);return Object.defineProperty(this,"visible",{value:t}),t}};const p=["rgb","hex","keyword","hsl","hsv","hwb","ansi","ansi256"];for(const t of p)u[t]={get(){const{level:e}=this;return function(...i){const n=g(r.color[l[e]][t](...i),r.color.close,this._styler);return v(this,n,this._isEmpty)}}};for(const t of p)u["bg"+t[0].toUpperCase()+t.slice(1)]={get(){const{level:e}=this;return function(...i){const n=g(r.bgColor[l[e]][t](...i),r.bgColor.close,this._styler);return v(this,n,this._isEmpty)}}};const m=Object.defineProperties(()=>{},{...u,level:{enumerable:!0,get(){return this._generator.level},set(t){this._generator.level=t}}}),g=(t,e,i)=>{let r,n;return void 0===i?(r=t,n=e):(r=i.openAll+t,n=e+i.closeAll),{open:t,close:e,openAll:r,closeAll:n,parent:i}},v=(t,e,i)=>{const r=(...t)=>h(t[0])&&h(t[0].raw)?y(r,_(r,...t)):y(r,1===t.length?""+t[0]:t.join(" "));return Object.setPrototypeOf(r,m),r._generator=t,r._styler=e,r._isEmpty=i,r},y=(t,e)=>{if(t.level<=0||!e)return t._isEmpty?"":e;let i=t._styler;if(void 0===i)return e;const{openAll:r,closeAll:n}=i;if(-1!==e.indexOf(""))for(;void 0!==i;)e=o(e,i.close,i.open),i=i.parent;const s=e.indexOf("\n");return-1!==s&&(e=a(e,n,r,s)),r+e+n};let b;const _=(t,...e)=>{const[r]=e;if(!h(r)||!h(r.raw))return e.join(" ");const n=e.slice(1),s=[r.raw[0]];for(let t=1;t<r.length;t++)s.push(String(n[t-1]).replace(/[{}\\]/g,"\\$&"),String(r.raw[t]));return void 0===b&&(b=i(2991)),b(t,s.join(""))};Object.defineProperties(f.prototype,u);const x=f();x.supportsColor=n,x.stderr=f({level:s?s.level:0}),x.stderr.supportsColor=s,t.exports=x},5254:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=9007199254740991}},5264:(t,e,i)=>{var r=i(2861).Buffer;function n(t,e,i){for(var r,n,o=-1,a=0;++o<8;)r=e&1<<7-o?128:0,a+=(128&(n=t._cipher.encryptBlock(t._prev)[0]^r))>>o%8,t._prev=s(t._prev,i?r:n);return a}function s(t,e){var i=t.length,n=-1,s=r.allocUnsafe(t.length);for(t=r.concat([t,r.from([e])]);++n<i;)s[n]=t[n]<<1|t[n+1]>>7;return s}e.encrypt=function(t,e,i){for(var s=e.length,o=r.allocUnsafe(s),a=-1;++a<s;)o[a]=n(t,e[a],i);return o}},5279:(t,e,i)=>{"use strict";var r=i(3349),n=i(6698),s=i(2808),o=i(2211);function a(t,e){r.equal(e.length,24,"Invalid key length");var i=e.slice(0,8),n=e.slice(8,16),s=e.slice(16,24);this.ciphers="encrypt"===t?[o.create({type:"encrypt",key:i}),o.create({type:"decrypt",key:n}),o.create({type:"encrypt",key:s})]:[o.create({type:"decrypt",key:s}),o.create({type:"encrypt",key:n}),o.create({type:"decrypt",key:i})]}function h(t){s.call(this,t);var e=new a(this.type,this.options.key);this._edeState=e}n(h,s),t.exports=h,h.create=function(t){return new h(t)},h.prototype._update=function(t,e,i,r){var n=this._edeState;n.ciphers[0]._update(t,e,i,r),n.ciphers[1]._update(i,r,i,r),n.ciphers[2]._update(i,r,i,r)},h.prototype._pad=o.prototype._pad,h.prototype._unpad=o.prototype._unpad},5291:(t,e,i)=>{"use strict";var r=i(6048).F.ERR_INVALID_OPT_VALUE;t.exports={getHighWaterMark:function(t,e,i,n){var s=function(t,e,i){return null!=t.highWaterMark?t.highWaterMark:e?t[i]:null}(e,n,i);if(null!=s){if(!isFinite(s)||Math.floor(s)!==s||s<0)throw new r(n?i:"highWaterMark",s);return Math.floor(s)}return t.objectMode?16:16384}}},5337:(t,e,i)=>{"use strict";i.d(e,{J:()=>B});var r=i(888),n=i(133),s=i(1460);function o(t,e){const i=t.byteLength/8|0,r=new Float64Array(t,0,i);new Float64Array(e,0,i).set(r);const n=t.byteLength-8*i;if(n>0){const r=new Uint8Array(t,8*i,n);new Uint8Array(e,8*i,n).set(r)}}var a=i(8639),h=i(6563);class l{constructor(){this.ids=Object.create(null),this.textures=[],this.count=0}clear(){for(let t=0;t<this.count;t++){const e=this.textures[t];this.textures[t]=null,this.ids[e.uid]=null}this.count=0}}class u{constructor(){this.renderPipeId="batch",this.action="startBatch",this.start=0,this.size=0,this.textures=new l,this.blendMode="normal",this.topology="triangle-strip",this.canBundle=!0}destroy(){this.textures=null,this.gpuBindGroup=null,this.bindGroup=null,this.batcher=null}}const c=[];let d=0;function f(){return d>0?c[--d]:new u}function p(t){c[d++]=t}let m=0;const g=class t{constructor(e={}){this.uid=(0,n.L)("batcher"),this.dirty=!0,this.batchIndex=0,this.batches=[],this._elements=[],t.defaultOptions.maxTextures=t.defaultOptions.maxTextures??(0,h.a)(),e={...t.defaultOptions,...e};const{maxTextures:i,attributesInitialSize:r,indicesInitialSize:o}=e;this.attributeBuffer=new s.u(4*r),this.indexBuffer=new Uint16Array(o),this.maxTextures=i}begin(){this.elementSize=0,this.elementStart=0,this.indexSize=0,this.attributeSize=0;for(let t=0;t<this.batchIndex;t++)p(this.batches[t]);this.batchIndex=0,this._batchIndexStart=0,this._batchIndexSize=0,this.dirty=!0}add(t){this._elements[this.elementSize++]=t,t._indexStart=this.indexSize,t._attributeStart=this.attributeSize,t._batcher=this,this.indexSize+=t.indexSize,this.attributeSize+=t.attributeSize*this.vertexSize}checkAndUpdateTexture(t,e){const i=t._batch.textures.ids[e._source.uid];return!(!i&&0!==i||(t._textureId=i,t.texture=e,0))}updateElement(t){this.dirty=!0;const e=this.attributeBuffer;t.packAsQuad?this.packQuadAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId):this.packAttributes(t,e.float32View,e.uint32View,t._attributeStart,t._textureId)}break(t){const e=this._elements;if(!e[this.elementStart])return;let i=f(),r=i.textures;r.clear();const n=e[this.elementStart];let s=(0,a.i)(n.blendMode,n.texture._source),o=n.topology;4*this.attributeSize>this.attributeBuffer.size&&this._resizeAttributeBuffer(4*this.attributeSize),this.indexSize>this.indexBuffer.length&&this._resizeIndexBuffer(this.indexSize);const h=this.attributeBuffer.float32View,l=this.attributeBuffer.uint32View,u=this.indexBuffer;let c=this._batchIndexSize,d=this._batchIndexStart,p="startBatch";const g=this.maxTextures;for(let n=this.elementStart;n<this.elementSize;++n){const v=e[n];e[n]=null;const y=v.texture._source,b=(0,a.i)(v.blendMode,y),_=s!==b||o!==v.topology;y._batchTick!==m||_?(y._batchTick=m,(r.count>=g||_)&&(this._finishBatch(i,d,c-d,r,s,o,t,p),p="renderBatch",d=c,s=b,o=v.topology,i=f(),r=i.textures,r.clear(),++m),v._textureId=y._textureBindLocation=r.count,r.ids[y.uid]=r.count,r.textures[r.count++]=y,v._batch=i,c+=v.indexSize,v.packAsQuad?(this.packQuadAttributes(v,h,l,v._attributeStart,v._textureId),this.packQuadIndex(u,v._indexStart,v._attributeStart/this.vertexSize)):(this.packAttributes(v,h,l,v._attributeStart,v._textureId),this.packIndex(v,u,v._indexStart,v._attributeStart/this.vertexSize))):(v._textureId=y._textureBindLocation,c+=v.indexSize,v.packAsQuad?(this.packQuadAttributes(v,h,l,v._attributeStart,v._textureId),this.packQuadIndex(u,v._indexStart,v._attributeStart/this.vertexSize)):(this.packAttributes(v,h,l,v._attributeStart,v._textureId),this.packIndex(v,u,v._indexStart,v._attributeStart/this.vertexSize)),v._batch=i)}r.count>0&&(this._finishBatch(i,d,c-d,r,s,o,t,p),d=c,++m),this.elementStart=this.elementSize,this._batchIndexStart=d,this._batchIndexSize=c}_finishBatch(t,e,i,r,n,s,o,a){t.gpuBindGroup=null,t.bindGroup=null,t.action=a,t.batcher=this,t.textures=r,t.blendMode=n,t.topology=s,t.start=e,t.size=i,++m,this.batches[this.batchIndex++]=t,o.add(t)}finish(t){this.break(t)}ensureAttributeBuffer(t){4*t<=this.attributeBuffer.size||this._resizeAttributeBuffer(4*t)}ensureIndexBuffer(t){t<=this.indexBuffer.length||this._resizeIndexBuffer(t)}_resizeAttributeBuffer(t){const e=Math.max(t,2*this.attributeBuffer.size),i=new s.u(e);o(this.attributeBuffer.rawBinaryData,i.rawBinaryData),this.attributeBuffer=i}_resizeIndexBuffer(t){const e=this.indexBuffer;let i=Math.max(t,1.5*e.length);i+=i%2;const r=i>65535?new Uint32Array(i):new Uint16Array(i);if(r.BYTES_PER_ELEMENT!==e.BYTES_PER_ELEMENT)for(let t=0;t<e.length;t++)r[t]=e[t];else o(e.buffer,r.buffer);this.indexBuffer=r}packQuadIndex(t,e,i){t[e]=i+0,t[e+1]=i+1,t[e+2]=i+2,t[e+3]=i+0,t[e+4]=i+2,t[e+5]=i+3}packIndex(t,e,i,r){const n=t.indices,s=t.indexSize,o=t.indexOffset,a=t.attributeOffset;for(let t=0;t<s;t++)e[i++]=r+n[t+o]-a}destroy(){for(let t=0;t<this.batches.length;t++)p(this.batches[t]);this.batches=null;for(let t=0;t<this._elements.length;t++)this._elements[t]._batch=null;this._elements=null,this.indexBuffer=null,this.attributeBuffer.destroy(),this.attributeBuffer=null}};g.defaultOptions={maxTextures:null,attributesInitialSize:4,indicesInitialSize:6};let v=g;var y=i(949),b=i(1132),_=i(8392);const x=new Float32Array(1),w=new Uint32Array(1);class M extends _.V{constructor(){const t=new y.h({data:x,label:"attribute-batch-buffer",usage:b.S.VERTEX|b.S.COPY_DST,shrinkToFit:!1});super({attributes:{aPosition:{buffer:t,format:"float32x2",stride:24,offset:0},aUV:{buffer:t,format:"float32x2",stride:24,offset:8},aColor:{buffer:t,format:"unorm8x4",stride:24,offset:16},aTextureIdAndRound:{buffer:t,format:"uint16x2",stride:24,offset:20}},indexBuffer:new y.h({data:w,label:"index-batch-buffer",usage:b.S.INDEX|b.S.COPY_DST,shrinkToFit:!1})})}}var S=i(5611),A=i(6840),E=i(4e3),T=i(6665),R=i(6040),P=i(8475);class C extends P.M{constructor(t){super({glProgram:(0,S.I)({name:"batch",bits:[A.a,(0,E.P)(t),T.m]}),gpuProgram:(0,S.v)({name:"batch",bits:[A.F,(0,E._)(t),T.b]}),resources:{batchSamplers:(0,R.n)(t)}})}}let I=null;const k=class t extends v{constructor(){super(...arguments),this.geometry=new M,this.shader=I||(I=new C(this.maxTextures)),this.name=t.extension.name,this.vertexSize=6}packAttributes(t,e,i,r,n){const s=n<<16|65535&t.roundPixels,o=t.transform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,d=o.ty,{positions:f,uvs:p}=t,m=t.color,g=t.attributeOffset,v=g+t.attributeSize;for(let t=g;t<v;t++){const n=2*t,o=f[n],g=f[n+1];e[r++]=a*o+l*g+c,e[r++]=u*g+h*o+d,e[r++]=p[n],e[r++]=p[n+1],i[r++]=m,i[r++]=s}}packQuadAttributes(t,e,i,r,n){const s=t.texture,o=t.transform,a=o.a,h=o.b,l=o.c,u=o.d,c=o.tx,d=o.ty,f=t.bounds,p=f.maxX,m=f.minX,g=f.maxY,v=f.minY,y=s.uvs,b=t.color,_=n<<16|65535&t.roundPixels;e[r+0]=a*m+l*v+c,e[r+1]=u*v+h*m+d,e[r+2]=y.x0,e[r+3]=y.y0,i[r+4]=b,i[r+5]=_,e[r+6]=a*p+l*v+c,e[r+7]=u*v+h*p+d,e[r+8]=y.x1,e[r+9]=y.y1,i[r+10]=b,i[r+11]=_,e[r+12]=a*p+l*g+c,e[r+13]=u*g+h*p+d,e[r+14]=y.x2,e[r+15]=y.y2,i[r+16]=b,i[r+17]=_,e[r+18]=a*m+l*g+c,e[r+19]=u*g+h*m+d,e[r+20]=y.x3,e[r+21]=y.y3,i[r+22]=b,i[r+23]=_}};k.extension={type:[r.Ag.Batcher],name:"default"};let B=k},5340:()=>{},5345:t=>{"use strict";t.exports=URIError},5353:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=/^(?:0|[1-9]\d*)$/;const n=function(t,e){var i=typeof t;return!!(e=null==e?9007199254740991:e)&&("number"==i||"symbol"!=i&&r.test(t))&&t>-1&&t%1==0&&t<e}},5359:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(3507),s=i(7332),o=i(6729).ec,a=i(6162),h=i(8170),l=i(4589);function u(t,e,i,s){if((t=r.from(t.toArray())).length<e.byteLength()){var o=r.alloc(e.byteLength()-t.length);t=r.concat([o,t])}var a=i.length,h=function(t,e){t=(t=c(t,e)).mod(e);var i=r.from(t.toArray());if(i.length<e.byteLength()){var n=r.alloc(e.byteLength()-i.length);i=r.concat([n,i])}return i}(i,e),l=r.alloc(a);l.fill(1);var u=r.alloc(a);return u=n(s,u).update(l).update(r.from([0])).update(t).update(h).digest(),l=n(s,u).update(l).digest(),{k:u=n(s,u).update(l).update(r.from([1])).update(t).update(h).digest(),v:l=n(s,u).update(l).digest()}}function c(t,e){var i=new a(t),r=(t.length<<3)-e.bitLength();return r>0&&i.ishrn(r),i}function d(t,e,i){var s,o;do{for(s=r.alloc(0);8*s.length<t.bitLength();)e.v=n(i,e.k).update(e.v).digest(),s=r.concat([s,e.v]);o=c(s,t),e.k=n(i,e.k).update(e.v).update(r.from([0])).digest(),e.v=n(i,e.k).update(e.v).digest()}while(-1!==o.cmp(t));return o}function f(t,e,i,r){return t.toRed(a.mont(i)).redPow(e).fromRed().mod(r)}t.exports=function(t,e,i,n,p){var m=h(e);if(m.curve){if("ecdsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");return function(t,e){var i=l[e.curve.join(".")];if(!i)throw new Error("unknown curve "+e.curve.join("."));var n=new o(i).keyFromPrivate(e.privateKey).sign(t);return r.from(n.toDER())}(t,m)}if("dsa"===m.type){if("dsa"!==n)throw new Error("wrong private key type");return function(t,e,i){for(var n,s=e.params.priv_key,o=e.params.p,h=e.params.q,l=e.params.g,p=new a(0),m=c(t,h).mod(h),g=!1,v=u(s,h,t,i);!1===g;)p=f(l,n=d(h,v,i),o,h),0===(g=n.invm(h).imul(m.add(s.mul(p))).mod(h)).cmpn(0)&&(g=!1,p=new a(0));return function(t,e){t=t.toArray(),e=e.toArray(),128&t[0]&&(t=[0].concat(t)),128&e[0]&&(e=[0].concat(e));var i=[48,t.length+e.length+4,2,t.length];return i=i.concat(t,[2,e.length],e),r.from(i)}(p,g)}(t,m,i)}if("rsa"!==n&&"ecdsa/rsa"!==n)throw new Error("wrong private key type");if(void 0!==e.padding&&1!==e.padding)throw new Error("illegal or unsupported padding mode");t=r.concat([p,t]);for(var g=m.modulus.byteLength(),v=[0,1];t.length+v.length+1<g;)v.push(255);v.push(0);for(var y=-1;++y<t.length;)v.push(t[y]);return s(v,m)},t.exports.getKey=u,t.exports.makeKey=d},5377:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(4634),s=i(4372),o=ArrayBuffer.isView||function(t){try{return s(t),!0}catch(t){return!1}},a="undefined"!=typeof Uint8Array,h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array,l=h&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);t.exports=function(t,e){if(t instanceof r)return t;if("string"==typeof t)return r.from(t,e);if(h&&o(t)){if(0===t.byteLength)return r.alloc(0);if(l){var i=r.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}var s=t instanceof Uint8Array?t:new Uint8Array(t.buffer,t.byteOffset,t.byteLength),u=r.from(s);if(u.length===t.byteLength)return u}if(a&&t instanceof Uint8Array)return r.from(t);var c=n(t);if(c)for(var d=0;d<t.length;d+=1){var f=t[d];if("number"!=typeof f||f<0||f>255||~~f!==f)throw new RangeError("Array items must be numbers in the range 0-255.")}if(c||r.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return r.from(t);throw new TypeError('The "data" argument must be a string, an Array, a Buffer, a Uint8Array, or a DataView.')}},5380:(t,e,i)=>{var r=i(8287).Buffer,n=i(4934),s=i(3241),o=i(4910),a={binary:!0,hex:!0,base64:!0};e.DiffieHellmanGroup=e.createDiffieHellmanGroup=e.getDiffieHellman=function(t){var e=new r(s[t].prime,"hex"),i=new r(s[t].gen,"hex");return new o(e,i)},e.createDiffieHellman=e.DiffieHellman=function t(e,i,s,h){return r.isBuffer(i)||void 0===a[i]?t(e,"binary",i,s):(i=i||"binary",h=h||"binary",s=s||new r([2]),r.isBuffer(s)||(s=new r(s,h)),"number"==typeof e?new o(n(e,s),s,!0):(r.isBuffer(e)||(e=new r(e,i)),new o(e,s,!0)))}},5382:(t,e,i)=>{"use strict";var r=i(5606),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=u;var s=i(5412),o=i(6708);i(6698)(u,s);for(var a=n(o.prototype),h=0;h<a.length;h++){var l=a[h];u.prototype[l]||(u.prototype[l]=o.prototype[l])}function u(t){if(!(this instanceof u))return new u(t);s.call(this,t),o.call(this,t),this.allowHalfOpen=!0,t&&(!1===t.readable&&(this.readable=!1),!1===t.writable&&(this.writable=!1),!1===t.allowHalfOpen&&(this.allowHalfOpen=!1,this.once("end",c)))}function c(){this._writableState.ended||r.nextTick(d,this)}function d(t){t.end()}Object.defineProperty(u.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(u.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(u.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(u.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}})},5412:(t,e,i)=>{"use strict";var r,n=i(5606);t.exports=A,A.ReadableState=S,i(7007).EventEmitter;var s,o=function(t,e){return t.listeners(e).length},a=i(345),h=i(8287).Buffer,l=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},u=i(9838);s=u&&u.debuglog?u.debuglog("stream"):function(){};var c,d,f,p=i(2726),m=i(5896),g=i(5291).getHighWaterMark,v=i(6048).F,y=v.ERR_INVALID_ARG_TYPE,b=v.ERR_STREAM_PUSH_AFTER_EOF,_=v.ERR_METHOD_NOT_IMPLEMENTED,x=v.ERR_STREAM_UNSHIFT_AFTER_END_EVENT;i(6698)(A,a);var w=m.errorOrDestroy,M=["error","close","destroy","pause","resume"];function S(t,e,n){r=r||i(5382),t=t||{},"boolean"!=typeof n&&(n=e instanceof r),this.objectMode=!!t.objectMode,n&&(this.objectMode=this.objectMode||!!t.readableObjectMode),this.highWaterMark=g(this,t,"readableHighWaterMark",n),this.buffer=new p,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.paused=!0,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.destroyed=!1,this.defaultEncoding=t.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,t.encoding&&(c||(c=i(3141).I),this.decoder=new c(t.encoding),this.encoding=t.encoding)}function A(t){if(r=r||i(5382),!(this instanceof A))return new A(t);var e=this instanceof r;this._readableState=new S(t,this,e),this.readable=!0,t&&("function"==typeof t.read&&(this._read=t.read),"function"==typeof t.destroy&&(this._destroy=t.destroy)),a.call(this)}function E(t,e,i,r,n){s("readableAddChunk",e);var o,a=t._readableState;if(null===e)a.reading=!1,function(t,e){if(s("onEofChunk"),!e.ended){if(e.decoder){var i=e.decoder.end();i&&i.length&&(e.buffer.push(i),e.length+=e.objectMode?1:i.length)}e.ended=!0,e.sync?C(t):(e.needReadable=!1,e.emittedReadable||(e.emittedReadable=!0,I(t)))}}(t,a);else if(n||(o=function(t,e){var i,r;return r=e,h.isBuffer(r)||r instanceof l||"string"==typeof e||void 0===e||t.objectMode||(i=new y("chunk",["string","Buffer","Uint8Array"],e)),i}(a,e)),o)w(t,o);else if(a.objectMode||e&&e.length>0)if("string"==typeof e||a.objectMode||Object.getPrototypeOf(e)===h.prototype||(e=function(t){return h.from(t)}(e)),r)a.endEmitted?w(t,new x):T(t,a,e,!0);else if(a.ended)w(t,new b);else{if(a.destroyed)return!1;a.reading=!1,a.decoder&&!i?(e=a.decoder.write(e),a.objectMode||0!==e.length?T(t,a,e,!1):k(t,a)):T(t,a,e,!1)}else r||(a.reading=!1,k(t,a));return!a.ended&&(a.length<a.highWaterMark||0===a.length)}function T(t,e,i,r){e.flowing&&0===e.length&&!e.sync?(e.awaitDrain=0,t.emit("data",i)):(e.length+=e.objectMode?1:i.length,r?e.buffer.unshift(i):e.buffer.push(i),e.needReadable&&C(t)),k(t,e)}Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(t){this._readableState&&(this._readableState.destroyed=t)}}),A.prototype.destroy=m.destroy,A.prototype._undestroy=m.undestroy,A.prototype._destroy=function(t,e){e(t)},A.prototype.push=function(t,e){var i,r=this._readableState;return r.objectMode?i=!0:"string"==typeof t&&((e=e||r.defaultEncoding)!==r.encoding&&(t=h.from(t,e),e=""),i=!0),E(this,t,e,!1,i)},A.prototype.unshift=function(t){return E(this,t,null,!0,!1)},A.prototype.isPaused=function(){return!1===this._readableState.flowing},A.prototype.setEncoding=function(t){c||(c=i(3141).I);var e=new c(t);this._readableState.decoder=e,this._readableState.encoding=this._readableState.decoder.encoding;for(var r=this._readableState.buffer.head,n="";null!==r;)n+=e.write(r.data),r=r.next;return this._readableState.buffer.clear(),""!==n&&this._readableState.buffer.push(n),this._readableState.length=n.length,this};var R=1073741824;function P(t,e){return t<=0||0===e.length&&e.ended?0:e.objectMode?1:t!=t?e.flowing&&e.length?e.buffer.head.data.length:e.length:(t>e.highWaterMark&&(e.highWaterMark=function(t){return t>=R?t=R:(t--,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t++),t}(t)),t<=e.length?t:e.ended?e.length:(e.needReadable=!0,0))}function C(t){var e=t._readableState;s("emitReadable",e.needReadable,e.emittedReadable),e.needReadable=!1,e.emittedReadable||(s("emitReadable",e.flowing),e.emittedReadable=!0,n.nextTick(I,t))}function I(t){var e=t._readableState;s("emitReadable_",e.destroyed,e.length,e.ended),e.destroyed||!e.length&&!e.ended||(t.emit("readable"),e.emittedReadable=!1),e.needReadable=!e.flowing&&!e.ended&&e.length<=e.highWaterMark,D(t)}function k(t,e){e.readingMore||(e.readingMore=!0,n.nextTick(B,t,e))}function B(t,e){for(;!e.reading&&!e.ended&&(e.length<e.highWaterMark||e.flowing&&0===e.length);){var i=e.length;if(s("maybeReadMore read 0"),t.read(0),i===e.length)break}e.readingMore=!1}function O(t){var e=t._readableState;e.readableListening=t.listenerCount("readable")>0,e.resumeScheduled&&!e.paused?e.flowing=!0:t.listenerCount("data")>0&&t.resume()}function L(t){s("readable nexttick read 0"),t.read(0)}function U(t,e){s("resume",e.reading),e.reading||t.read(0),e.resumeScheduled=!1,t.emit("resume"),D(t),e.flowing&&!e.reading&&t.read(0)}function D(t){var e=t._readableState;for(s("flow",e.flowing);e.flowing&&null!==t.read(););}function N(t,e){return 0===e.length?null:(e.objectMode?i=e.buffer.shift():!t||t>=e.length?(i=e.decoder?e.buffer.join(""):1===e.buffer.length?e.buffer.first():e.buffer.concat(e.length),e.buffer.clear()):i=e.buffer.consume(t,e.decoder),i);var i}function F(t){var e=t._readableState;s("endReadable",e.endEmitted),e.endEmitted||(e.ended=!0,n.nextTick(z,e,t))}function z(t,e){if(s("endReadableNT",t.endEmitted,t.length),!t.endEmitted&&0===t.length&&(t.endEmitted=!0,e.readable=!1,e.emit("end"),t.autoDestroy)){var i=e._writableState;(!i||i.autoDestroy&&i.finished)&&e.destroy()}}function G(t,e){for(var i=0,r=t.length;i<r;i++)if(t[i]===e)return i;return-1}A.prototype.read=function(t){s("read",t),t=parseInt(t,10);var e=this._readableState,i=t;if(0!==t&&(e.emittedReadable=!1),0===t&&e.needReadable&&((0!==e.highWaterMark?e.length>=e.highWaterMark:e.length>0)||e.ended))return s("read: emitReadable",e.length,e.ended),0===e.length&&e.ended?F(this):C(this),null;if(0===(t=P(t,e))&&e.ended)return 0===e.length&&F(this),null;var r,n=e.needReadable;return s("need readable",n),(0===e.length||e.length-t<e.highWaterMark)&&s("length less than watermark",n=!0),e.ended||e.reading?s("reading or ended",n=!1):n&&(s("do read"),e.reading=!0,e.sync=!0,0===e.length&&(e.needReadable=!0),this._read(e.highWaterMark),e.sync=!1,e.reading||(t=P(i,e))),null===(r=t>0?N(t,e):null)?(e.needReadable=e.length<=e.highWaterMark,t=0):(e.length-=t,e.awaitDrain=0),0===e.length&&(e.ended||(e.needReadable=!0),i!==t&&e.ended&&F(this)),null!==r&&this.emit("data",r),r},A.prototype._read=function(t){w(this,new _("_read()"))},A.prototype.pipe=function(t,e){var i=this,r=this._readableState;switch(r.pipesCount){case 0:r.pipes=t;break;case 1:r.pipes=[r.pipes,t];break;default:r.pipes.push(t)}r.pipesCount+=1,s("pipe count=%d opts=%j",r.pipesCount,e);var a=e&&!1===e.end||t===n.stdout||t===n.stderr?m:h;function h(){s("onend"),t.end()}r.endEmitted?n.nextTick(a):i.once("end",a),t.on("unpipe",function e(n,o){s("onunpipe"),n===i&&o&&!1===o.hasUnpiped&&(o.hasUnpiped=!0,s("cleanup"),t.removeListener("close",f),t.removeListener("finish",p),t.removeListener("drain",l),t.removeListener("error",d),t.removeListener("unpipe",e),i.removeListener("end",h),i.removeListener("end",m),i.removeListener("data",c),u=!0,!r.awaitDrain||t._writableState&&!t._writableState.needDrain||l())});var l=function(t){return function(){var e=t._readableState;s("pipeOnDrain",e.awaitDrain),e.awaitDrain&&e.awaitDrain--,0===e.awaitDrain&&o(t,"data")&&(e.flowing=!0,D(t))}}(i);t.on("drain",l);var u=!1;function c(e){s("ondata");var n=t.write(e);s("dest.write",n),!1===n&&((1===r.pipesCount&&r.pipes===t||r.pipesCount>1&&-1!==G(r.pipes,t))&&!u&&(s("false write response, pause",r.awaitDrain),r.awaitDrain++),i.pause())}function d(e){s("onerror",e),m(),t.removeListener("error",d),0===o(t,"error")&&w(t,e)}function f(){t.removeListener("finish",p),m()}function p(){s("onfinish"),t.removeListener("close",f),m()}function m(){s("unpipe"),i.unpipe(t)}return i.on("data",c),function(t,e,i){if("function"==typeof t.prependListener)return t.prependListener(e,i);t._events&&t._events[e]?Array.isArray(t._events[e])?t._events[e].unshift(i):t._events[e]=[i,t._events[e]]:t.on(e,i)}(t,"error",d),t.once("close",f),t.once("finish",p),t.emit("pipe",i),r.flowing||(s("pipe resume"),i.resume()),t},A.prototype.unpipe=function(t){var e=this._readableState,i={hasUnpiped:!1};if(0===e.pipesCount)return this;if(1===e.pipesCount)return t&&t!==e.pipes||(t||(t=e.pipes),e.pipes=null,e.pipesCount=0,e.flowing=!1,t&&t.emit("unpipe",this,i)),this;if(!t){var r=e.pipes,n=e.pipesCount;e.pipes=null,e.pipesCount=0,e.flowing=!1;for(var s=0;s<n;s++)r[s].emit("unpipe",this,{hasUnpiped:!1});return this}var o=G(e.pipes,t);return-1===o||(e.pipes.splice(o,1),e.pipesCount-=1,1===e.pipesCount&&(e.pipes=e.pipes[0]),t.emit("unpipe",this,i)),this},A.prototype.on=function(t,e){var i=a.prototype.on.call(this,t,e),r=this._readableState;return"data"===t?(r.readableListening=this.listenerCount("readable")>0,!1!==r.flowing&&this.resume()):"readable"===t&&(r.endEmitted||r.readableListening||(r.readableListening=r.needReadable=!0,r.flowing=!1,r.emittedReadable=!1,s("on readable",r.length,r.reading),r.length?C(this):r.reading||n.nextTick(L,this))),i},A.prototype.addListener=A.prototype.on,A.prototype.removeListener=function(t,e){var i=a.prototype.removeListener.call(this,t,e);return"readable"===t&&n.nextTick(O,this),i},A.prototype.removeAllListeners=function(t){var e=a.prototype.removeAllListeners.apply(this,arguments);return"readable"!==t&&void 0!==t||n.nextTick(O,this),e},A.prototype.resume=function(){var t=this._readableState;return t.flowing||(s("resume"),t.flowing=!t.readableListening,function(t,e){e.resumeScheduled||(e.resumeScheduled=!0,n.nextTick(U,t,e))}(this,t)),t.paused=!1,this},A.prototype.pause=function(){return s("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(s("pause"),this._readableState.flowing=!1,this.emit("pause")),this._readableState.paused=!0,this},A.prototype.wrap=function(t){var e=this,i=this._readableState,r=!1;for(var n in t.on("end",function(){if(s("wrapped end"),i.decoder&&!i.ended){var t=i.decoder.end();t&&t.length&&e.push(t)}e.push(null)}),t.on("data",function(n){s("wrapped data"),i.decoder&&(n=i.decoder.write(n)),i.objectMode&&null==n||(i.objectMode||n&&n.length)&&(e.push(n)||(r=!0,t.pause()))}),t)void 0===this[n]&&"function"==typeof t[n]&&(this[n]=function(e){return function(){return t[e].apply(t,arguments)}}(n));for(var o=0;o<M.length;o++)t.on(M[o],this.emit.bind(this,M[o]));return this._read=function(e){s("wrapped _read",e),r&&(r=!1,t.resume())},this},"function"==typeof Symbol&&(A.prototype[Symbol.asyncIterator]=function(){return void 0===d&&(d=i(2955)),d(this)}),Object.defineProperty(A.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),Object.defineProperty(A.prototype,"readableBuffer",{enumerable:!1,get:function(){return this._readableState&&this._readableState.buffer}}),Object.defineProperty(A.prototype,"readableFlowing",{enumerable:!1,get:function(){return this._readableState.flowing},set:function(t){this._readableState&&(this._readableState.flowing=t)}}),A._fromList=N,Object.defineProperty(A.prototype,"readableLength",{enumerable:!1,get:function(){return this._readableState.length}}),"function"==typeof Symbol&&(A.from=function(t,e){return void 0===f&&(f=i(5157)),f(A,t,e)})},5567:(t,e,i)=>{t.exports=i(7007).EventEmitter},5571:(t,e,i)=>{"use strict";i.d(e,{X:()=>s});const r=Object.create(null),n=Object.create(null);function s(t,e){let i=n[t];return void 0===i&&(void 0===r[e]&&(r[e]=1),n[t]=i=r[e]++),i}},5579:t=>{"use strict";t.exports=JSON.parse('{"2.16.840.1.101.3.4.1.1":"aes-128-ecb","2.16.840.1.101.3.4.1.2":"aes-128-cbc","2.16.840.1.101.3.4.1.3":"aes-128-ofb","2.16.840.1.101.3.4.1.4":"aes-128-cfb","2.16.840.1.101.3.4.1.21":"aes-192-ecb","2.16.840.1.101.3.4.1.22":"aes-192-cbc","2.16.840.1.101.3.4.1.23":"aes-192-ofb","2.16.840.1.101.3.4.1.24":"aes-192-cfb","2.16.840.1.101.3.4.1.41":"aes-256-ecb","2.16.840.1.101.3.4.1.42":"aes-256-cbc","2.16.840.1.101.3.4.1.43":"aes-256-ofb","2.16.840.1.101.3.4.1.44":"aes-256-cfb"}')},5606:t=>{var e,i,r=t.exports={};function n(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(t){if(e===setTimeout)return setTimeout(t,0);if((e===n||!e)&&setTimeout)return e=setTimeout,setTimeout(t,0);try{return e(t,0)}catch(i){try{return e.call(null,t,0)}catch(i){return e.call(this,t,0)}}}!function(){try{e="function"==typeof setTimeout?setTimeout:n}catch(t){e=n}try{i="function"==typeof clearTimeout?clearTimeout:s}catch(t){i=s}}();var a,h=[],l=!1,u=-1;function c(){l&&a&&(l=!1,a.length?h=a.concat(h):u=-1,h.length&&d())}function d(){if(!l){var t=o(c);l=!0;for(var e=h.length;e;){for(a=h,h=[];++u<e;)a&&a[u].run();u=-1,e=h.length}a=null,l=!1,function(t){if(i===clearTimeout)return clearTimeout(t);if((i===s||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(t);try{return i(t)}catch(e){try{return i.call(null,t)}catch(e){return i.call(this,t)}}}(t)}}function f(t,e){this.fun=t,this.array=e}function p(){}r.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)e[i-1]=arguments[i];h.push(new f(t,e)),1!==h.length||l||o(d)},f.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=p,r.addListener=p,r.once=p,r.off=p,r.removeListener=p,r.removeAllListeners=p,r.emit=p,r.prependListener=p,r.prependOnceListener=p,r.listeners=function(t){return[]},r.binding=function(t){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(t){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},5611:(t,e,i)=>{"use strict";i.d(e,{I:()=>E,v:()=>A});var r=i(9113),n=i(3012),s=i(268);function o(t,e,i){if(t)for(const r in t){const n=e[r.toLocaleLowerCase()];if(n){let e=t[r];"header"===r&&(e=e.replace(/@in\s+[^;]+;\s*/g,"").replace(/@out\s+[^;]+;\s*/g,"")),i&&n.push(`//----${i}----//`),n.push(e)}else(0,s.R)(`${r} placement hook does not exist in shader`)}}const a=/\{\{(.*?)\}\}/g;function h(t){const e={};return(t.match(a)?.map(t=>t.replace(/[{()}]/g,""))??[]).forEach(t=>{e[t]=[]}),e}function l(t,e){let i;const r=/@in\s+([^;]+);/g;for(;null!==(i=r.exec(t));)e.push(i[1])}function u(t,e,i=!1){const r=[];l(e,r),t.forEach(t=>{t.header&&l(t.header,r)});const n=r;i&&n.sort();const s=n.map((t,e)=>`       @location(${e}) ${t},`).join("\n");let o=e.replace(/@in\s+[^;]+;\s*/g,"");return o=o.replace("{{in}}",`\n${s}\n`),o}function c(t,e){let i;const r=/@out\s+([^;]+);/g;for(;null!==(i=r.exec(t));)e.push(i[1])}function d(t,e){let i=t;for(const t in e){const r=e[t];i=r.join("\n").length?i.replace(`{{${t}}}`,`//-----${t} START-----//\n${r.join("\n")}\n//----${t} FINISH----//`):i.replace(`{{${t}}}`,"")}return i}const f=Object.create(null),p=new Map;let m=0;function g({template:t,bits:e}){const i=v(t,e);return f[i]||(f[i]=y(t.vertex,t.fragment,e)),f[i]}function v(t,e){return e.map(t=>(p.has(t)||p.set(t,m++),p.get(t))).sort((t,e)=>t-e).join("-")+t.vertex+t.fragment}function y(t,e,i){const r=h(t),n=h(e);return i.forEach(t=>{o(t.vertex,r,t.name),o(t.fragment,n,t.name)}),{vertex:d(t,r),fragment:d(e,n)}}const b="\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n        \n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n       \n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n",_="\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n   \n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n        \n        {{start}}\n\n        var outColor:vec4<f32>;\n      \n        {{main}}\n        \n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n",x="\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n        \n        {{start}}\n        \n        vColor = vec4(1.);\n        \n        {{main}}\n        \n        vUV = uv;\n        \n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n",w="\n   \n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n        \n        {{start}}\n\n        vec4 outColor;\n      \n        {{main}}\n        \n        finalColor = outColor * vColor;\n        \n        {{end}}\n    }\n",M={name:"global-uniforms-bit",vertex:{header:"\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        "}},S={name:"global-uniforms-bit",vertex:{header:"\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        "}};function A({bits:t,name:e}){const i=function({template:t,bits:e}){const i=v(t,e);if(f[i])return f[i];const{vertex:r,fragment:n}=function(t,e){const i=e.map(t=>t.vertex).filter(t=>!!t),r=e.map(t=>t.fragment).filter(t=>!!t);let n=u(i,t.vertex,!0);return n=function(t,e){const i=[];c(e,i),t.forEach(t=>{t.header&&c(t.header,i)});let r=0;const n=i.sort().map(t=>t.indexOf("builtin")>-1?t:`@location(${r++}) ${t}`).join(",\n"),s=i.sort().map(t=>{return`       var ${e=t,e.replace(/@.*?\s+/g,"")};`;var e}).join("\n"),o=`return VSOutput(\n            ${i.sort().map(t=>` ${function(t){const e=/\b(\w+)\s*:/g.exec(t);return e?e[1]:""}(t)}`).join(",\n")});`;let a=e.replace(/@out\s+[^;]+;\s*/g,"");return a=a.replace("{{struct}}",`\n${n}\n`),a=a.replace("{{start}}",`\n${s}\n`),a=a.replace("{{return}}",`\n${o}\n`),a}(i,n),{vertex:n,fragment:u(r,t.fragment,!0)}}(t,e);return f[i]=y(r,n,e),f[i]}({template:{fragment:_,vertex:b},bits:[M,...t]});return n.B.from({name:e,vertex:{source:i.vertex,entryPoint:"main"},fragment:{source:i.fragment,entryPoint:"main"}})}function E({bits:t,name:e}){return new r.M({name:e,...g({template:{vertex:x,fragment:w},bits:[S,...t]})})}},5622:(t,e,i)=>{function r(t){return Object.prototype.toString.call(t)}e.isArray=function(t){return Array.isArray?Array.isArray(t):"[object Array]"===r(t)},e.isBoolean=function(t){return"boolean"==typeof t},e.isNull=function(t){return null===t},e.isNullOrUndefined=function(t){return null==t},e.isNumber=function(t){return"number"==typeof t},e.isString=function(t){return"string"==typeof t},e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=function(t){return void 0===t},e.isRegExp=function(t){return"[object RegExp]"===r(t)},e.isObject=function(t){return"object"==typeof t&&null!==t},e.isDate=function(t){return"[object Date]"===r(t)},e.isError=function(t){return"[object Error]"===r(t)||t instanceof Error},e.isFunction=function(t){return"function"==typeof t},e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i(8287).Buffer.isBuffer},5644:(t,e,i)=>{"use strict";i.d(e,{M2:()=>r.M}),i(9572),i(9452),i(5062);var r=i(7367);i(4781)},5647:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=(0,i(367).A)(Object.getPrototypeOf,Object)},5659:(t,e,i)=>{const r=i(8156),n={};for(const t of Object.keys(r))n[r[t]]=t;const s={rgb:{channels:3,labels:"rgb"},hsl:{channels:3,labels:"hsl"},hsv:{channels:3,labels:"hsv"},hwb:{channels:3,labels:"hwb"},cmyk:{channels:4,labels:"cmyk"},xyz:{channels:3,labels:"xyz"},lab:{channels:3,labels:"lab"},lch:{channels:3,labels:"lch"},hex:{channels:1,labels:["hex"]},keyword:{channels:1,labels:["keyword"]},ansi16:{channels:1,labels:["ansi16"]},ansi256:{channels:1,labels:["ansi256"]},hcg:{channels:3,labels:["h","c","g"]},apple:{channels:3,labels:["r16","g16","b16"]},gray:{channels:1,labels:["gray"]}};t.exports=s;for(const t of Object.keys(s)){if(!("channels"in s[t]))throw new Error("missing channels property: "+t);if(!("labels"in s[t]))throw new Error("missing channel labels property: "+t);if(s[t].labels.length!==s[t].channels)throw new Error("channel and label counts mismatch: "+t);const{channels:e,labels:i}=s[t];delete s[t].channels,delete s[t].labels,Object.defineProperty(s[t],"channels",{value:e}),Object.defineProperty(s[t],"labels",{value:i})}function o(t,e){return(t[0]-e[0])**2+(t[1]-e[1])**2+(t[2]-e[2])**2}s.rgb.hsl=function(t){const e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.min(e,i,r),s=Math.max(e,i,r),o=s-n;let a,h;s===n?a=0:e===s?a=(i-r)/o:i===s?a=2+(r-e)/o:r===s&&(a=4+(e-i)/o),a=Math.min(60*a,360),a<0&&(a+=360);const l=(n+s)/2;return h=s===n?0:l<=.5?o/(s+n):o/(2-s-n),[a,100*h,100*l]},s.rgb.hsv=function(t){let e,i,r,n,s;const o=t[0]/255,a=t[1]/255,h=t[2]/255,l=Math.max(o,a,h),u=l-Math.min(o,a,h),c=function(t){return(l-t)/6/u+.5};return 0===u?(n=0,s=0):(s=u/l,e=c(o),i=c(a),r=c(h),o===l?n=r-i:a===l?n=1/3+e-r:h===l&&(n=2/3+i-e),n<0?n+=1:n>1&&(n-=1)),[360*n,100*s,100*l]},s.rgb.hwb=function(t){const e=t[0],i=t[1];let r=t[2];const n=s.rgb.hsl(t)[0],o=1/255*Math.min(e,Math.min(i,r));return r=1-1/255*Math.max(e,Math.max(i,r)),[n,100*o,100*r]},s.rgb.cmyk=function(t){const e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.min(1-e,1-i,1-r);return[100*((1-e-n)/(1-n)||0),100*((1-i-n)/(1-n)||0),100*((1-r-n)/(1-n)||0),100*n]},s.rgb.keyword=function(t){const e=n[t];if(e)return e;let i,s=1/0;for(const e of Object.keys(r)){const n=o(t,r[e]);n<s&&(s=n,i=e)}return i},s.keyword.rgb=function(t){return r[t]},s.rgb.xyz=function(t){let e=t[0]/255,i=t[1]/255,r=t[2]/255;return e=e>.04045?((e+.055)/1.055)**2.4:e/12.92,i=i>.04045?((i+.055)/1.055)**2.4:i/12.92,r=r>.04045?((r+.055)/1.055)**2.4:r/12.92,[100*(.4124*e+.3576*i+.1805*r),100*(.2126*e+.7152*i+.0722*r),100*(.0193*e+.1192*i+.9505*r)]},s.rgb.lab=function(t){const e=s.rgb.xyz(t);let i=e[0],r=e[1],n=e[2];return i/=95.047,r/=100,n/=108.883,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,n=n>.008856?n**(1/3):7.787*n+16/116,[116*r-16,500*(i-r),200*(r-n)]},s.hsl.rgb=function(t){const e=t[0]/360,i=t[1]/100,r=t[2]/100;let n,s,o;if(0===i)return o=255*r,[o,o,o];n=r<.5?r*(1+i):r+i-r*i;const a=2*r-n,h=[0,0,0];for(let t=0;t<3;t++)s=e+1/3*-(t-1),s<0&&s++,s>1&&s--,o=6*s<1?a+6*(n-a)*s:2*s<1?n:3*s<2?a+(n-a)*(2/3-s)*6:a,h[t]=255*o;return h},s.hsl.hsv=function(t){const e=t[0];let i=t[1]/100,r=t[2]/100,n=i;const s=Math.max(r,.01);return r*=2,i*=r<=1?r:2-r,n*=s<=1?s:2-s,[e,100*(0===r?2*n/(s+n):2*i/(r+i)),(r+i)/2*100]},s.hsv.rgb=function(t){const e=t[0]/60,i=t[1]/100;let r=t[2]/100;const n=Math.floor(e)%6,s=e-Math.floor(e),o=255*r*(1-i),a=255*r*(1-i*s),h=255*r*(1-i*(1-s));switch(r*=255,n){case 0:return[r,h,o];case 1:return[a,r,o];case 2:return[o,r,h];case 3:return[o,a,r];case 4:return[h,o,r];case 5:return[r,o,a]}},s.hsv.hsl=function(t){const e=t[0],i=t[1]/100,r=t[2]/100,n=Math.max(r,.01);let s,o;o=(2-i)*r;const a=(2-i)*n;return s=i*n,s/=a<=1?a:2-a,s=s||0,o/=2,[e,100*s,100*o]},s.hwb.rgb=function(t){const e=t[0]/360;let i=t[1]/100,r=t[2]/100;const n=i+r;let s;n>1&&(i/=n,r/=n);const o=Math.floor(6*e),a=1-r;s=6*e-o,1&o&&(s=1-s);const h=i+s*(a-i);let l,u,c;switch(o){default:case 6:case 0:l=a,u=h,c=i;break;case 1:l=h,u=a,c=i;break;case 2:l=i,u=a,c=h;break;case 3:l=i,u=h,c=a;break;case 4:l=h,u=i,c=a;break;case 5:l=a,u=i,c=h}return[255*l,255*u,255*c]},s.cmyk.rgb=function(t){const e=t[0]/100,i=t[1]/100,r=t[2]/100,n=t[3]/100;return[255*(1-Math.min(1,e*(1-n)+n)),255*(1-Math.min(1,i*(1-n)+n)),255*(1-Math.min(1,r*(1-n)+n))]},s.xyz.rgb=function(t){const e=t[0]/100,i=t[1]/100,r=t[2]/100;let n,s,o;return n=3.2406*e+-1.5372*i+-.4986*r,s=-.9689*e+1.8758*i+.0415*r,o=.0557*e+-.204*i+1.057*r,n=n>.0031308?1.055*n**(1/2.4)-.055:12.92*n,s=s>.0031308?1.055*s**(1/2.4)-.055:12.92*s,o=o>.0031308?1.055*o**(1/2.4)-.055:12.92*o,n=Math.min(Math.max(0,n),1),s=Math.min(Math.max(0,s),1),o=Math.min(Math.max(0,o),1),[255*n,255*s,255*o]},s.xyz.lab=function(t){let e=t[0],i=t[1],r=t[2];return e/=95.047,i/=100,r/=108.883,e=e>.008856?e**(1/3):7.787*e+16/116,i=i>.008856?i**(1/3):7.787*i+16/116,r=r>.008856?r**(1/3):7.787*r+16/116,[116*i-16,500*(e-i),200*(i-r)]},s.lab.xyz=function(t){let e,i,r;i=(t[0]+16)/116,e=t[1]/500+i,r=i-t[2]/200;const n=i**3,s=e**3,o=r**3;return i=n>.008856?n:(i-16/116)/7.787,e=s>.008856?s:(e-16/116)/7.787,r=o>.008856?o:(r-16/116)/7.787,e*=95.047,i*=100,r*=108.883,[e,i,r]},s.lab.lch=function(t){const e=t[0],i=t[1],r=t[2];let n;return n=360*Math.atan2(r,i)/2/Math.PI,n<0&&(n+=360),[e,Math.sqrt(i*i+r*r),n]},s.lch.lab=function(t){const e=t[0],i=t[1],r=t[2]/360*2*Math.PI;return[e,i*Math.cos(r),i*Math.sin(r)]},s.rgb.ansi16=function(t,e=null){const[i,r,n]=t;let o=null===e?s.rgb.hsv(t)[2]:e;if(o=Math.round(o/50),0===o)return 30;let a=30+(Math.round(n/255)<<2|Math.round(r/255)<<1|Math.round(i/255));return 2===o&&(a+=60),a},s.hsv.ansi16=function(t){return s.rgb.ansi16(s.hsv.rgb(t),t[2])},s.rgb.ansi256=function(t){const e=t[0],i=t[1],r=t[2];return e===i&&i===r?e<8?16:e>248?231:Math.round((e-8)/247*24)+232:16+36*Math.round(e/255*5)+6*Math.round(i/255*5)+Math.round(r/255*5)},s.ansi16.rgb=function(t){let e=t%10;if(0===e||7===e)return t>50&&(e+=3.5),e=e/10.5*255,[e,e,e];const i=.5*(1+~~(t>50));return[(1&e)*i*255,(e>>1&1)*i*255,(e>>2&1)*i*255]},s.ansi256.rgb=function(t){if(t>=232){const e=10*(t-232)+8;return[e,e,e]}let e;return t-=16,[Math.floor(t/36)/5*255,Math.floor((e=t%36)/6)/5*255,e%6/5*255]},s.rgb.hex=function(t){const e=(((255&Math.round(t[0]))<<16)+((255&Math.round(t[1]))<<8)+(255&Math.round(t[2]))).toString(16).toUpperCase();return"000000".substring(e.length)+e},s.hex.rgb=function(t){const e=t.toString(16).match(/[a-f0-9]{6}|[a-f0-9]{3}/i);if(!e)return[0,0,0];let i=e[0];3===e[0].length&&(i=i.split("").map(t=>t+t).join(""));const r=parseInt(i,16);return[r>>16&255,r>>8&255,255&r]},s.rgb.hcg=function(t){const e=t[0]/255,i=t[1]/255,r=t[2]/255,n=Math.max(Math.max(e,i),r),s=Math.min(Math.min(e,i),r),o=n-s;let a,h;return a=o<1?s/(1-o):0,h=o<=0?0:n===e?(i-r)/o%6:n===i?2+(r-e)/o:4+(e-i)/o,h/=6,h%=1,[360*h,100*o,100*a]},s.hsl.hcg=function(t){const e=t[1]/100,i=t[2]/100,r=i<.5?2*e*i:2*e*(1-i);let n=0;return r<1&&(n=(i-.5*r)/(1-r)),[t[0],100*r,100*n]},s.hsv.hcg=function(t){const e=t[1]/100,i=t[2]/100,r=e*i;let n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],100*r,100*n]},s.hcg.rgb=function(t){const e=t[0]/360,i=t[1]/100,r=t[2]/100;if(0===i)return[255*r,255*r,255*r];const n=[0,0,0],s=e%1*6,o=s%1,a=1-o;let h=0;switch(Math.floor(s)){case 0:n[0]=1,n[1]=o,n[2]=0;break;case 1:n[0]=a,n[1]=1,n[2]=0;break;case 2:n[0]=0,n[1]=1,n[2]=o;break;case 3:n[0]=0,n[1]=a,n[2]=1;break;case 4:n[0]=o,n[1]=0,n[2]=1;break;default:n[0]=1,n[1]=0,n[2]=a}return h=(1-i)*r,[255*(i*n[0]+h),255*(i*n[1]+h),255*(i*n[2]+h)]},s.hcg.hsv=function(t){const e=t[1]/100,i=e+t[2]/100*(1-e);let r=0;return i>0&&(r=e/i),[t[0],100*r,100*i]},s.hcg.hsl=function(t){const e=t[1]/100,i=t[2]/100*(1-e)+.5*e;let r=0;return i>0&&i<.5?r=e/(2*i):i>=.5&&i<1&&(r=e/(2*(1-i))),[t[0],100*r,100*i]},s.hcg.hwb=function(t){const e=t[1]/100,i=e+t[2]/100*(1-e);return[t[0],100*(i-e),100*(1-i)]},s.hwb.hcg=function(t){const e=t[1]/100,i=1-t[2]/100,r=i-e;let n=0;return r<1&&(n=(i-r)/(1-r)),[t[0],100*r,100*n]},s.apple.rgb=function(t){return[t[0]/65535*255,t[1]/65535*255,t[2]/65535*255]},s.rgb.apple=function(t){return[t[0]/255*65535,t[1]/255*65535,t[2]/255*65535]},s.gray.rgb=function(t){return[t[0]/100*255,t[0]/100*255,t[0]/100*255]},s.gray.hsl=function(t){return[0,0,t[0]]},s.gray.hsv=s.gray.hsl,s.gray.hwb=function(t){return[0,100,t[0]]},s.gray.cmyk=function(t){return[0,0,0,t[0]]},s.gray.lab=function(t){return[t[0],0,0]},s.gray.hex=function(t){const e=255&Math.round(t[0]/100*255),i=((e<<16)+(e<<8)+e).toString(16).toUpperCase();return"000000".substring(i.length)+i},s.rgb.gray=function(t){return[(t[0]+t[1]+t[2])/3/255*100]}},5680:(t,e,i)=>{"use strict";var r=i(5767);t.exports=function(t){return!!r(t)}},5715:(t,e,i)=>{"use strict";t.exports=i(2951)},5747:(t,e,i)=>{var r=i(3387),n=i(7599);e.ALGORITHMS=["HS256","HS384","HS512","RS256","RS384","RS512","PS256","PS384","PS512","ES256","ES384","ES512"],e.sign=r.sign,e.verify=n.verify,e.decode=n.decode,e.isValid=n.isValid,e.createSign=function(t){return new r(t)},e.createVerify=function(t){return new n(t)}},5767:(t,e,i)=>{"use strict";var r=i(2682),n=i(9209),s=i(487),o=i(6556),a=i(5795),h=i(3628),l=o("Object.prototype.toString"),u=i(9092)(),c="undefined"==typeof globalThis?i.g:globalThis,d=n(),f=o("String.prototype.slice"),p=o("Array.prototype.indexOf",!0)||function(t,e){for(var i=0;i<t.length;i+=1)if(t[i]===e)return i;return-1},m={__proto__:null};r(d,u&&a&&h?function(t){var e=new c[t];if(Symbol.toStringTag in e&&h){var i=h(e),r=a(i,Symbol.toStringTag);if(!r&&i){var n=h(i);r=a(n,Symbol.toStringTag)}m["$"+t]=s(r.get)}}:function(t){var e=new c[t],i=e.slice||e.set;i&&(m["$"+t]=s(i))}),t.exports=function(t){if(!t||"object"!=typeof t)return!1;if(!u){var e=f(l(t),8,-1);return p(d,e)>-1?e:"Object"===e&&function(t){var e=!1;return r(m,function(i,r){if(!e)try{i(t),e=f(r,1)}catch(t){}}),e}(t)}return a?function(t){var e=!1;return r(m,function(i,r){if(!e)try{"$"+i(t)===r&&(e=f(r,1))}catch(t){}}),e}(t):null}},5795:(t,e,i)=>{"use strict";var r=i(6549);if(r)try{r([],"length")}catch(t){r=null}t.exports=r},5799:(t,e,i)=>{var r=i(530),n=i(2356),s=i(2861).Buffer,o=i(650),a=i(6168),h=i(462),l=i(8078);function u(t,e,i){a.call(this),this._cache=new d,this._cipher=new h.AES(e),this._prev=s.from(i),this._mode=t,this._autopadding=!0}i(6698)(u,a),u.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get();)i=this._mode.encrypt(this,e),r.push(i);return s.concat(r)};var c=s.alloc(16,16);function d(){this.cache=s.allocUnsafe(0)}function f(t,e,i){var a=r[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof e&&(e=s.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);if("string"==typeof i&&(i=s.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);return"stream"===a.type?new o(a.module,e,i):"auth"===a.type?new n(a.module,e,i):new u(a.module,e,i)}u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return t=this._mode.encrypt(this,t),this._cipher.scrub(),t;if(!t.equals(c))throw this._cipher.scrub(),new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},d.prototype.add=function(t){this.cache=s.concat([this.cache,t])},d.prototype.get=function(){if(this.cache.length>15){var t=this.cache.slice(0,16);return this.cache=this.cache.slice(16),t}return null},d.prototype.flush=function(){for(var t=16-this.cache.length,e=s.allocUnsafe(t),i=-1;++i<t;)e.writeUInt8(t,i);return s.concat([this.cache,e])},e.createCipheriv=f,e.createCipher=function(t,e){var i=r[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var n=l(e,!1,i.key,i.iv);return f(t,n.key,n.iv)}},5811:(t,e,i)=>{"use strict";i.d(e,{k:()=>l});var r=i(133),n=i(5571);const s=["f32","i32","vec2<f32>","vec3<f32>","vec4<f32>","mat2x2<f32>","mat3x3<f32>","mat4x4<f32>","mat3x2<f32>","mat4x2<f32>","mat2x3<f32>","mat4x3<f32>","mat2x4<f32>","mat3x4<f32>","vec2<i32>","vec3<i32>","vec4<i32>"],o=s.reduce((t,e)=>(t[e]=!0,t),{});function a(t,e){switch(t){case"f32":return 0;case"vec2<f32>":return new Float32Array(2*e);case"vec3<f32>":return new Float32Array(3*e);case"vec4<f32>":return new Float32Array(4*e);case"mat2x2<f32>":return new Float32Array([1,0,0,1]);case"mat3x3<f32>":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4x4<f32>":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const h=class t{constructor(e,i){this._touched=0,this.uid=(0,r.L)("uniform"),this._resourceType="uniformGroup",this._resourceId=(0,r.L)("resource"),this.isUniformGroup=!0,this._dirtyId=0,this.destroyed=!1,i={...t.defaultOptions,...i},this.uniformStructures=e;const h={};for(const t in e){const i=e[t];if(i.name=t,i.size=i.size??1,!o[i.type])throw new Error(`Uniform type ${i.type} is not supported. Supported uniform types are: ${s.join(", ")}`);i.value??(i.value=a(i.type,i.size)),h[t]=i.value}this.uniforms=h,this._dirtyId=1,this.ubo=i.ubo,this.isStatic=i.isStatic,this._signature=(0,n.X)(Object.keys(h).map(t=>`${t}-${e[t].type}`).join("-"),"uniform-group")}update(){this._dirtyId++}};h.defaultOptions={ubo:!1,isStatic:!1};let l=h},5815:(t,e,i)=>{"use strict";i.d(e,{mc:()=>X,u:()=>H,ig:()=>V,fR:()=>W});var r=i(4486),n=i(2577),s=i(9313),o=i(1652),a=i(2812),h=i(133),l=i(4670),u=i(8218);const c={get isCachedAsTexture(){return!!this.renderGroup?.isCachedAsTexture},cacheAsTexture(t){"boolean"==typeof t&&!1===t?this.disableRenderGroup():(this.enableRenderGroup(),this.renderGroup.enableCacheAsTexture(!0===t?{}:t))},updateCacheTexture(){this.renderGroup?.updateCacheTexture()},get cacheAsBitmap(){return this.isCachedAsTexture},set cacheAsBitmap(t){(0,l.t6)("v8.6.0","cacheAsBitmap is deprecated, use cacheAsTexture instead."),this.cacheAsTexture(t)}};var d=i(9903);const f={allowChildren:!0,removeChildren(t=0,e){const i=e??this.children.length,r=i-t,n=[];if(r>0&&r<=i){for(let e=i-1;e>=t;e--){const t=this.children[e];t&&(n.push(t),t.parent=null)}(0,d.d)(this.children,t,i);const e=this.renderGroup||this.parentRenderGroup;e&&e.removeChildren(n);for(let t=0;t<n.length;++t)this.emit("childRemoved",n[t],this,t),n[t].emit("removed",this);return n}if(0===r&&0===this.children.length)return n;throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},removeChildAt(t){const e=this.getChildAt(t);return this.removeChild(e)},getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]},setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);this.getChildIndex(t),this.addChildAt(t,e)},getChildIndex(t){const e=this.children.indexOf(t);if(-1===e)throw new Error("The supplied Container must be a child of the caller");return e},addChildAt(t,e){this.allowChildren||(0,l.t6)(l.lj,"addChildAt: Only Containers will be allowed to add children in v8.0.0");const{children:i}=this;if(e<0||e>i.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${i.length}`);if(t.parent){const i=t.parent.children.indexOf(t);if(t.parent===this&&i===e)return t;-1!==i&&t.parent.children.splice(i,1)}e===i.length?i.push(t):i.splice(e,0,t),t.parent=this,t.didChange=!0,t._updateFlags=15;const r=this.renderGroup||this.parentRenderGroup;return r&&r.addChild(t),this.sortableChildren&&(this.sortDirty=!0),this.emit("childAdded",t,this,e),t.emit("added",this),t},swapChildren(t,e){if(t===e)return;const i=this.getChildIndex(t),r=this.getChildIndex(e);this.children[i]=e,this.children[r]=t;const n=this.renderGroup||this.parentRenderGroup;n&&(n.structureDidChange=!0),this._didContainerChangeTick++},removeFromParent(){this.parent?.removeChild(this)},reparentChild(...t){return 1===t.length?this.reparentChildAt(t[0],this.children.length):(t.forEach(t=>this.reparentChildAt(t,this.children.length)),t[0])},reparentChildAt(t,e){if(t.parent===this)return this.setChildIndex(t,e),t;const i=t.worldTransform.clone();t.removeFromParent(),this.addChildAt(t,e);const r=this.worldTransform.clone();return r.invert(),i.prepend(r),t.setFromMatrix(i),t}},p={collectRenderables(t,e,i){this.parentRenderLayer&&this.parentRenderLayer!==i||this.globalDisplayStatus<7||!this.includeInBuild||(this.sortableChildren&&this.sortChildren(),this.isSimple?this.collectRenderablesSimple(t,e,i):this.renderGroup?e.renderPipes.renderGroup.addRenderGroup(this.renderGroup,t):this.collectRenderablesWithEffects(t,e,i))},collectRenderablesSimple(t,e,i){const r=this.children,n=r.length;for(let s=0;s<n;s++)r[s].collectRenderables(t,e,i)},collectRenderablesWithEffects(t,e,i){const{renderPipes:r}=e;for(let e=0;e<this.effects.length;e++){const i=this.effects[e];r[i.pipe].push(i,this,t)}this.collectRenderablesSimple(t,e,i);for(let e=this.effects.length-1;e>=0;e--){const i=this.effects[e];r[i.pipe].pop(i,this,t)}}};var m=i(9049),g=i(888);const v=new class{constructor(){this._effectClasses=[],this._tests=[],this._initialized=!1}init(){this._initialized||(this._initialized=!0,this._effectClasses.forEach(t=>{this.add({test:t.test,maskClass:t})}))}add(t){this._tests.push(t)}getMaskEffect(t){this._initialized||this.init();for(let e=0;e<this._tests.length;e++){const i=this._tests[e];if(i.test(t))return u.Z.get(i.maskClass,t)}return t}returnMaskEffect(t){u.Z.return(t)}};g.XO.handleByList(g.Ag.MaskEffect,v._effectClasses);const y={_maskEffect:null,_maskOptions:{inverse:!1},_filterEffect:null,effects:[],_markStructureAsChanged(){const t=this.renderGroup||this.parentRenderGroup;t&&(t.structureDidChange=!0)},addEffect(t){-1===this.effects.indexOf(t)&&(this.effects.push(t),this.effects.sort((t,e)=>t.priority-e.priority),this._markStructureAsChanged(),this._updateIsSimple())},removeEffect(t){const e=this.effects.indexOf(t);-1!==e&&(this.effects.splice(e,1),this._markStructureAsChanged(),this._updateIsSimple())},set mask(t){const e=this._maskEffect;e?.mask!==t&&(e&&(this.removeEffect(e),v.returnMaskEffect(e),this._maskEffect=null),null!=t&&(this._maskEffect=v.getMaskEffect(t),this.addEffect(this._maskEffect)))},setMask(t){this._maskOptions={...this._maskOptions,...t},t.mask&&(this.mask=t.mask),this._markStructureAsChanged()},get mask(){return this._maskEffect?.mask},set filters(t){!Array.isArray(t)&&t&&(t=[t]);const e=this._filterEffect||(this._filterEffect=new m.a),i=t?.length>0,r=i!==e.filters?.length>0;t=Array.isArray(t)?t.slice(0):t,e.filters=Object.freeze(t),r&&(i?this.addEffect(e):(this.removeEffect(e),e.filters=t??null))},get filters(){return this._filterEffect?.filters},set filterArea(t){this._filterEffect||(this._filterEffect=new m.a),this._filterEffect.filterArea=t},get filterArea(){return this._filterEffect?.filterArea}},b={label:null,get name(){return(0,l.t6)(l.lj,"Container.name property has been removed, use Container.label instead"),this.label},set name(t){(0,l.t6)(l.lj,"Container.name property has been removed, use Container.label instead"),this.label=t},getChildByName(t,e=!1){return this.getChildByLabel(t,e)},getChildByLabel(t,e=!1){const i=this.children;for(let e=0;e<i.length;e++){const r=i[e];if(r.label===t||t instanceof RegExp&&t.test(r.label))return r}if(e)for(let e=0;e<i.length;e++){const r=i[e].getChildByLabel(t,!0);if(r)return r}return null},getChildrenByLabel(t,e=!1,i=[]){const r=this.children;for(let e=0;e<r.length;e++){const n=r[e];(n.label===t||t instanceof RegExp&&t.test(n.label))&&i.push(n)}if(e)for(let e=0;e<r.length;e++)r[e].getChildrenByLabel(t,!0,i);return i}};var _=i(9636),x=i(2208);const w=new s.u,M={getFastGlobalBounds(t,e){e||(e=new _.c),e.clear(),this._getGlobalBoundsRecursive(!!t,e,this.parentRenderLayer),e.isValid||e.set(0,0,0,0);const i=this.renderGroup||this.parentRenderGroup;return e.applyMatrix(i.worldTransform),e},_getGlobalBoundsRecursive(t,e,i){let r=e;if(t&&this.parentRenderLayer!==i)return;if(7!==this.localDisplayStatus||!this.measurable)return;const n=!!this.effects.length;if((this.renderGroup||n)&&(r=x.o.get().clear()),this.boundsArea)e.addRect(this.boundsArea,this.worldTransform);else{if(this.renderPipeId){const t=this.bounds;r.addFrame(t.minX,t.minY,t.maxX,t.maxY,this.groupTransform)}const e=this.children;for(let n=0;n<e.length;n++)e[n]._getGlobalBoundsRecursive(t,r,i)}if(n){let t=!1;const i=this.renderGroup||this.parentRenderGroup;for(let e=0;e<this.effects.length;e++)this.effects[e].addBounds&&(t||(t=!0,r.applyMatrix(i.worldTransform)),this.effects[e].addBounds(r,!0));t&&(r.applyMatrix(i.worldTransform.copyTo(w).invert()),e.addBounds(r,this.relativeGroupTransform)),e.addBounds(r),x.o.return(r)}else this.renderGroup&&(e.addBounds(r,this.relativeGroupTransform),x.o.return(r))}};var S=i(9443),A=i(753);function E(t){return((255&t)<<16)+(65280&t)+(t>>16&255)}const T={getGlobalAlpha(t){if(t)return this.renderGroup?this.renderGroup.worldAlpha:this.parentRenderGroup?this.parentRenderGroup.worldAlpha*this.alpha:this.alpha;let e=this.alpha,i=this.parent;for(;i;)e*=i.alpha,i=i.parent;return e},getGlobalTransform(t,e){if(e)return t.copyFrom(this.worldTransform);this.updateLocalTransform();const i=(0,S.Ek)(this,x.u.get().identity());return t.appendFrom(this.localTransform,i),x.u.return(i),t},getGlobalTint(t){if(t)return this.renderGroup?E(this.renderGroup.worldColor):this.parentRenderGroup?E((0,A.j)(this.localColor,this.parentRenderGroup.worldColor)):this.tint;let e=this.localColor,i=this.parent;for(;i;)e=(0,A.j)(e,i.localColor),i=i.parent;return E(e)}};var R=i(7269);function P(t,e){const i=t.children;for(let t=0;t<i.length;t++){const r=i[t],n=r.uid,s=(65535&r._didViewChangeTick)<<16|65535&r._didContainerChangeTick,o=e.index;e.data[o]===n&&e.data[o+1]===s||(e.data[e.index]=n,e.data[e.index+1]=s,e.didChange=!0),e.index=o+2,r.children.length&&P(r,e)}return e.didChange}const C=new s.u,I={_localBoundsCacheId:-1,_localBoundsCacheData:null,_setWidth(t,e){const i=Math.sign(this.scale.x)||1;this.scale.x=0!==e?t/e*i:i},_setHeight(t,e){const i=Math.sign(this.scale.y)||1;this.scale.y=0!==e?t/e*i:i},getLocalBounds(){this._localBoundsCacheData||(this._localBoundsCacheData={data:[],index:1,didChange:!1,localBounds:new _.c});const t=this._localBoundsCacheData;return t.index=1,t.didChange=!1,t.data[0]!==this._didViewChangeTick&&(t.didChange=!0,t.data[0]=this._didViewChangeTick),P(this,t),t.didChange&&(0,R.n)(this,t.localBounds,C),t.localBounds},getBounds(t,e){return(0,S.fB)(this,t,e||new _.c)}},k={_onRender:null,set onRender(t){const e=this.renderGroup||this.parentRenderGroup;if(!t)return this._onRender&&e?.removeOnRender(this),void(this._onRender=null);this._onRender||e?.addOnRender(this),this._onRender=t},get onRender(){return this._onRender}},B={_zIndex:0,sortDirty:!1,sortableChildren:!1,get zIndex(){return this._zIndex},set zIndex(t){this._zIndex!==t&&(this._zIndex=t,this.depthOfChildModified())},depthOfChildModified(){this.parent&&(this.parent.sortableChildren=!0,this.parent.sortDirty=!0),this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0)},sortChildren(){this.sortDirty&&(this.sortDirty=!1,this.children.sort(O))}};function O(t,e){return t._zIndex-e._zIndex}var L=i(5101);const U={getGlobalPosition(t=new L.b,e=!1){return this.parent?this.parent.toGlobal(this._position,t,e):(t.x=this._position.x,t.y=this._position.y),t},toGlobal(t,e,i=!1){const r=this.getGlobalTransform(x.u.get(),i);return e=r.apply(t,e),x.u.return(r),e},toLocal(t,e,i,r){e&&(t=e.toGlobal(t,i,r));const n=this.getGlobalTransform(x.u.get(),r);return i=n.applyInverse(t,i),x.u.return(n),i}};var D=i(848),N=i(2437);class F{constructor(){this.renderPipeId="renderGroup",this.root=null,this.canBundle=!1,this.renderGroupParent=null,this.renderGroupChildren=[],this.worldTransform=new s.u,this.worldColorAlpha=4294967295,this.worldColor=16777215,this.worldAlpha=1,this.childrenToUpdate=Object.create(null),this.updateTick=0,this.gcTick=0,this.childrenRenderablesToUpdate={list:[],index:0},this.structureDidChange=!0,this.instructionSet=new D.L,this._onRenderContainers=[],this.textureNeedsUpdate=!0,this.isCachedAsTexture=!1,this._matrixDirty=7}init(t){this.root=t,t._onRender&&this.addOnRender(t),t.didChange=!0;const e=t.children;for(let t=0;t<e.length;t++){const i=e[t];i._updateFlags=15,this.addChild(i)}}enableCacheAsTexture(t={}){this.textureOptions=t,this.isCachedAsTexture=!0,this.textureNeedsUpdate=!0}disableCacheAsTexture(){this.isCachedAsTexture=!1,this.texture&&(N.W.returnTexture(this.texture),this.texture=null)}updateCacheTexture(){this.textureNeedsUpdate=!0}reset(){this.renderGroupChildren.length=0;for(const t in this.childrenToUpdate){const e=this.childrenToUpdate[t];e.list.fill(null),e.index=0}this.childrenRenderablesToUpdate.index=0,this.childrenRenderablesToUpdate.list.fill(null),this.root=null,this.updateTick=0,this.structureDidChange=!0,this._onRenderContainers.length=0,this.renderGroupParent=null,this.disableCacheAsTexture()}get localTransform(){return this.root.localTransform}addRenderGroupChild(t){t.renderGroupParent&&t.renderGroupParent._removeRenderGroupChild(t),t.renderGroupParent=this,this.renderGroupChildren.push(t)}_removeRenderGroupChild(t){const e=this.renderGroupChildren.indexOf(t);e>-1&&this.renderGroupChildren.splice(e,1),t.renderGroupParent=null}addChild(t){if(this.structureDidChange=!0,t.parentRenderGroup=this,t.updateTick=-1,t.parent===this.root?t.relativeRenderGroupDepth=1:t.relativeRenderGroupDepth=t.parent.relativeRenderGroupDepth+1,t.didChange=!0,this.onChildUpdate(t),t.renderGroup)return void this.addRenderGroupChild(t.renderGroup);t._onRender&&this.addOnRender(t);const e=t.children;for(let t=0;t<e.length;t++)this.addChild(e[t])}removeChild(t){if(this.structureDidChange=!0,t._onRender&&(t.renderGroup||this.removeOnRender(t)),t.parentRenderGroup=null,t.renderGroup)return void this._removeRenderGroupChild(t.renderGroup);const e=t.children;for(let t=0;t<e.length;t++)this.removeChild(e[t])}removeChildren(t){for(let e=0;e<t.length;e++)this.removeChild(t[e])}onChildUpdate(t){let e=this.childrenToUpdate[t.relativeRenderGroupDepth];e||(e=this.childrenToUpdate[t.relativeRenderGroupDepth]={index:0,list:[]}),e.list[e.index++]=t}updateRenderable(t){t.globalDisplayStatus<7||(this.instructionSet.renderPipes[t.renderPipeId].updateRenderable(t),t.didViewUpdate=!1)}onChildViewUpdate(t){this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++]=t}get isRenderable(){return 7===this.root.localDisplayStatus&&this.worldAlpha>0}addOnRender(t){this._onRenderContainers.push(t)}removeOnRender(t){this._onRenderContainers.splice(this._onRenderContainers.indexOf(t),1)}runOnRender(t){for(let e=0;e<this._onRenderContainers.length;e++)this._onRenderContainers[e]._onRender(t)}destroy(){this.disableCacheAsTexture(),this.renderGroupParent=null,this.root=null,this.childrenRenderablesToUpdate=null,this.childrenToUpdate=null,this.renderGroupChildren=null,this._onRenderContainers=null,this.instructionSet=null}getChildren(t=[]){const e=this.root.children;for(let i=0;i<e.length;i++)this._getChildren(e[i],t);return t}_getChildren(t,e=[]){if(e.push(t),t.renderGroup)return e;const i=t.children;for(let t=0;t<i.length;t++)this._getChildren(i[t],e);return e}invalidateMatrices(){this._matrixDirty=7}get inverseWorldTransform(){return 1&this._matrixDirty?(this._matrixDirty&=-2,this._inverseWorldTransform||(this._inverseWorldTransform=new s.u),this._inverseWorldTransform.copyFrom(this.worldTransform).invert()):this._inverseWorldTransform}get textureOffsetInverseTransform(){return 2&this._matrixDirty?(this._matrixDirty&=-3,this._textureOffsetInverseTransform||(this._textureOffsetInverseTransform=new s.u),this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(-this._textureBounds.x,-this._textureBounds.y)):this._textureOffsetInverseTransform}get inverseParentTextureTransform(){if(!(4&this._matrixDirty))return this._inverseParentTextureTransform;this._matrixDirty&=-5;const t=this._parentCacheAsTextureRenderGroup;return t?(this._inverseParentTextureTransform||(this._inverseParentTextureTransform=new s.u),this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(t.inverseWorldTransform).translate(-t._textureBounds.x,-t._textureBounds.y)):this.worldTransform}get cacheToLocalTransform(){return this._parentCacheAsTextureRenderGroup?this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform:null}}const z=new a.o(null),G=new a.o(null),j=new a.o(null,1,1),V=1,H=2,W=4;class X extends r.A{constructor(t={}){super(),this.uid=(0,h.L)("renderable"),this._updateFlags=15,this.renderGroup=null,this.parentRenderGroup=null,this.parentRenderGroupIndex=0,this.didChange=!1,this.didViewUpdate=!1,this.relativeRenderGroupDepth=0,this.children=[],this.parent=null,this.includeInBuild=!0,this.measurable=!0,this.isSimple=!0,this.updateTick=-1,this.localTransform=new s.u,this.relativeGroupTransform=new s.u,this.groupTransform=this.relativeGroupTransform,this.destroyed=!1,this._position=new a.o(this,0,0),this._scale=j,this._pivot=G,this._skew=z,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._rotation=0,this.localColor=16777215,this.localAlpha=1,this.groupAlpha=1,this.groupColor=16777215,this.groupColorAlpha=4294967295,this.localBlendMode="inherit",this.groupBlendMode="normal",this.localDisplayStatus=7,this.globalDisplayStatus=7,this._didContainerChangeTick=0,this._didViewChangeTick=0,this._didLocalTransformChangeId=-1,this.effects=[],function(t,e,i={}){for(const r in e)i[r]||void 0===e[r]||(t[r]=e[r])}(this,t,{children:!0,parent:!0,effects:!0}),t.children?.forEach(t=>this.addChild(t)),t.parent?.addChild(this)}static mixin(t){Object.defineProperties(X.prototype,Object.getOwnPropertyDescriptors(t))}set _didChangeId(t){this._didViewChangeTick=t>>12&4095,this._didContainerChangeTick=4095&t}get _didChangeId(){return 4095&this._didContainerChangeTick|(4095&this._didViewChangeTick)<<12}addChild(...t){if(this.allowChildren||(0,l.t6)(l.lj,"addChild: Only Containers will be allowed to add children in v8.0.0"),t.length>1){for(let e=0;e<t.length;e++)this.addChild(t[e]);return t[0]}const e=t[0],i=this.renderGroup||this.parentRenderGroup;return e.parent===this?(this.children.splice(this.children.indexOf(e),1),this.children.push(e),i&&(i.structureDidChange=!0),e):(e.parent&&e.parent.removeChild(e),this.children.push(e),this.sortableChildren&&(this.sortDirty=!0),e.parent=this,e.didChange=!0,e._updateFlags=15,i&&i.addChild(e),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this),this._didViewChangeTick++,0!==e._zIndex&&e.depthOfChildModified(),e)}removeChild(...t){if(t.length>1){for(let e=0;e<t.length;e++)this.removeChild(t[e]);return t[0]}const e=t[0],i=this.children.indexOf(e);return i>-1&&(this._didViewChangeTick++,this.children.splice(i,1),this.renderGroup?this.renderGroup.removeChild(e):this.parentRenderGroup&&this.parentRenderGroup.removeChild(e),e.parentRenderLayer&&e.parentRenderLayer.detach(e),e.parent=null,this.emit("childRemoved",e,this,i),e.emit("removed",this)),e}_onUpdate(t){t&&t===this._skew&&this._updateSkew(),this._didContainerChangeTick++,this.didChange||(this.didChange=!0,this.parentRenderGroup&&this.parentRenderGroup.onChildUpdate(this))}set isRenderGroup(t){!!this.renderGroup!==t&&(t?this.enableRenderGroup():this.disableRenderGroup())}get isRenderGroup(){return!!this.renderGroup}enableRenderGroup(){if(this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),this.renderGroup=u.Z.get(F,this),this.groupTransform=s.u.IDENTITY,t?.addChild(this),this._updateIsSimple()}disableRenderGroup(){if(!this.renderGroup)return;const t=this.parentRenderGroup;t?.removeChild(this),u.Z.return(this.renderGroup),this.renderGroup=null,this.groupTransform=this.relativeGroupTransform,t?.addChild(this),this._updateIsSimple()}_updateIsSimple(){this.isSimple=!this.renderGroup&&0===this.effects.length}get worldTransform(){return this._worldTransform||(this._worldTransform=new s.u),this.renderGroup?this._worldTransform.copyFrom(this.renderGroup.worldTransform):this.parentRenderGroup&&this._worldTransform.appendFrom(this.relativeGroupTransform,this.parentRenderGroup.worldTransform),this._worldTransform}get x(){return this._position.x}set x(t){this._position.x=t}get y(){return this._position.y}set y(t){this._position.y=t}get position(){return this._position}set position(t){this._position.copyFrom(t)}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this._onUpdate(this._skew))}get angle(){return this.rotation*o.bO}set angle(t){this.rotation=t*o.Td}get pivot(){return this._pivot===G&&(this._pivot=new a.o(this,0,0)),this._pivot}set pivot(t){this._pivot===G&&(this._pivot=new a.o(this,0,0)),"number"==typeof t?this._pivot.set(t):this._pivot.copyFrom(t)}get skew(){return this._skew===z&&(this._skew=new a.o(this,0,0)),this._skew}set skew(t){this._skew===z&&(this._skew=new a.o(this,0,0)),this._skew.copyFrom(t)}get scale(){return this._scale===j&&(this._scale=new a.o(this,1,1)),this._scale}set scale(t){this._scale===j&&(this._scale=new a.o(this,0,0)),"number"==typeof t?this._scale.set(t):this._scale.copyFrom(t)}get width(){return Math.abs(this.scale.x*this.getLocalBounds().width)}set width(t){const e=this.getLocalBounds().width;this._setWidth(t,e)}get height(){return Math.abs(this.scale.y*this.getLocalBounds().height)}set height(t){const e=this.getLocalBounds().height;this._setHeight(t,e)}getSize(t){t||(t={});const e=this.getLocalBounds();return t.width=Math.abs(this.scale.x*e.width),t.height=Math.abs(this.scale.y*e.height),t}setSize(t,e){const i=this.getLocalBounds();"object"==typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,i.width),void 0!==e&&this._setHeight(e,i.height)}_updateSkew(){const t=this._rotation,e=this._skew;this._cx=Math.cos(t+e._y),this._sx=Math.sin(t+e._y),this._cy=-Math.sin(t-e._x),this._sy=Math.cos(t-e._x)}updateTransform(t){return this.position.set("number"==typeof t.x?t.x:this.position.x,"number"==typeof t.y?t.y:this.position.y),this.scale.set("number"==typeof t.scaleX?t.scaleX||1:this.scale.x,"number"==typeof t.scaleY?t.scaleY||1:this.scale.y),this.rotation="number"==typeof t.rotation?t.rotation:this.rotation,this.skew.set("number"==typeof t.skewX?t.skewX:this.skew.x,"number"==typeof t.skewY?t.skewY:this.skew.y),this.pivot.set("number"==typeof t.pivotX?t.pivotX:this.pivot.x,"number"==typeof t.pivotY?t.pivotY:this.pivot.y),this}setFromMatrix(t){t.decompose(this)}updateLocalTransform(){const t=this._didContainerChangeTick;if(this._didLocalTransformChangeId===t)return;this._didLocalTransformChangeId=t;const e=this.localTransform,i=this._scale,r=this._pivot,n=this._position,s=i._x,o=i._y,a=r._x,h=r._y;e.a=this._cx*s,e.b=this._sx*s,e.c=this._cy*o,e.d=this._sy*o,e.tx=n._x-(a*e.a+h*e.c),e.ty=n._y-(a*e.b+h*e.d)}set alpha(t){t!==this.localAlpha&&(this.localAlpha=t,this._updateFlags|=V,this._onUpdate())}get alpha(){return this.localAlpha}set tint(t){const e=n.Q.shared.setValue(t??16777215).toBgrNumber();e!==this.localColor&&(this.localColor=e,this._updateFlags|=V,this._onUpdate())}get tint(){return E(this.localColor)}set blendMode(t){this.localBlendMode!==t&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=H,this.localBlendMode=t,this._onUpdate())}get blendMode(){return this.localBlendMode}get visible(){return!!(2&this.localDisplayStatus)}set visible(t){const e=t?2:0;(2&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=W,this.localDisplayStatus^=2,this._onUpdate())}get culled(){return!(4&this.localDisplayStatus)}set culled(t){const e=t?0:4;(4&this.localDisplayStatus)!==e&&(this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._updateFlags|=W,this.localDisplayStatus^=4,this._onUpdate())}get renderable(){return!!(1&this.localDisplayStatus)}set renderable(t){const e=t?1:0;(1&this.localDisplayStatus)!==e&&(this._updateFlags|=W,this.localDisplayStatus^=1,this.parentRenderGroup&&(this.parentRenderGroup.structureDidChange=!0),this._onUpdate())}get isRenderable(){return 7===this.localDisplayStatus&&this.groupAlpha>0}destroy(t=!1){if(this.destroyed)return;let e;if(this.destroyed=!0,this.children.length&&(e=this.removeChildren(0,this.children.length)),this.removeFromParent(),this.parent=null,this._maskEffect=null,this._filterEffect=null,this.effects=null,this._position=null,this._scale=null,this._pivot=null,this._skew=null,this.emit("destroyed",this),this.removeAllListeners(),("boolean"==typeof t?t:t?.children)&&e)for(let i=0;i<e.length;++i)e[i].destroy(t);this.renderGroup?.destroy(),this.renderGroup=null}}X.mixin(f),X.mixin(M),X.mixin(U),X.mixin(k),X.mixin(I),X.mixin(y),X.mixin(b),X.mixin(B),X.mixin({cullArea:null,cullable:!1,cullableChildren:!0}),X.mixin(c),X.mixin(T),X.mixin(p)},5820:(t,e,i)=>{"use strict";i.d(e,{v:()=>r});class r{curveX0=0;curveY0=0;curveX1=50;curveY1=0;curveX2=50;curveY2=100;curveX3=100;curveY3=100;iterations=20;splineVertices=[];constructor(){this.calcSpline()}dispose(){this.splineVertices.forEach(t=>t.splice(0)),this.splineVertices.splice(0)}calcSpline(){this.splineVertices=[];for(let t=0;t<this.iterations+1;t++){const e=1/this.iterations*t,i=(1-e)*(1-e)*(1-e)*this.curveX0+(1-e)*(1-e)*3*e*this.curveX1+3*(1-e)*e*e*this.curveX2+e*e*e*this.curveX3,r=(1-e)*(1-e)*(1-e)*this.curveY0+(1-e)*(1-e)*3*e*this.curveY1+3*(1-e)*e*e*this.curveY2+e*e*e*this.curveY3;this.splineVertices.push([i,r])}}getCurvePoints(){return this.splineVertices}getYValue(t){let e=0;if(0==t)return this.curveY0;for(;t>this.splineVertices[e][0];)e++;const i=this.splineVertices[e-1][0],r=this.splineVertices[e-1][1],n=this.splineVertices[e][0];return(this.splineVertices[e][1]-r)/((n-i)/(t-i))+r}setPoints(t,e,i,r){this.curveX0=t,this.curveY0=e,this.curveX3=i,this.curveY3=r,this.calcSpline()}setHandles(t,e,i,r){this.curveX1=t,this.curveY1=e,this.curveX2=i,this.curveY2=r,this.calcSpline()}getCurveLength(){let t=0;for(let e=0;e<this.iterations;e++){const i=this.splineVertices[e+1][0]-this.splineVertices[e][0],r=this.splineVertices[e+1][1]-this.splineVertices[e][1];t+=Math.sqrt(i*i+r*r)}return t}getPointAtLength(t){let e=0,i=0;const r=t/this.getCurveLength();return e=(1-r)*(1-r)*(1-r)*this.curveX0+(1-r)*(1-r)*3*r*this.curveX1+3*(1-r)*r*r*this.curveX2+r*r*r*this.curveX3,i=(1-r)*(1-r)*(1-r)*this.curveY0+(1-r)*(1-r)*3*r*this.curveY1+3*(1-r)*r*r*this.curveY2+r*r*r*this.curveY3,[e,i]}}},5880:t=>{"use strict";t.exports=Math.pow},5892:(t,e,i)=>{var r=i(2861).Buffer,n=r.alloc(16,0);function s(t){var e=r.allocUnsafe(16);return e.writeUInt32BE(t[0]>>>0,0),e.writeUInt32BE(t[1]>>>0,4),e.writeUInt32BE(t[2]>>>0,8),e.writeUInt32BE(t[3]>>>0,12),e}function o(t){this.h=t,this.state=r.alloc(16,0),this.cache=r.allocUnsafe(0)}o.prototype.ghash=function(t){for(var e=-1;++e<t.length;)this.state[e]^=t[e];this._multiply()},o.prototype._multiply=function(){for(var t,e,i,r=[(t=this.h).readUInt32BE(0),t.readUInt32BE(4),t.readUInt32BE(8),t.readUInt32BE(12)],n=[0,0,0,0],o=-1;++o<128;){for(!!(this.state[~~(o/8)]&1<<7-o%8)&&(n[0]^=r[0],n[1]^=r[1],n[2]^=r[2],n[3]^=r[3]),i=!!(1&r[3]),e=3;e>0;e--)r[e]=r[e]>>>1|(1&r[e-1])<<31;r[0]=r[0]>>>1,i&&(r[0]=r[0]^225<<24)}this.state=s(n)},o.prototype.update=function(t){var e;for(this.cache=r.concat([this.cache,t]);this.cache.length>=16;)e=this.cache.slice(0,16),this.cache=this.cache.slice(16),this.ghash(e)},o.prototype.final=function(t,e){return this.cache.length&&this.ghash(r.concat([this.cache,n],16)),this.ghash(s([0,t,0,e])),this.state},t.exports=o},5896:(t,e,i)=>{"use strict";var r=i(5606);function n(t,e){o(t,e),s(t)}function s(t){t._writableState&&!t._writableState.emitClose||t._readableState&&!t._readableState.emitClose||t.emit("close")}function o(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,a=this._readableState&&this._readableState.destroyed,h=this._writableState&&this._writableState.destroyed;return a||h?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(o,this,t)):r.nextTick(o,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?i._writableState?i._writableState.errorEmitted?r.nextTick(s,i):(i._writableState.errorEmitted=!0,r.nextTick(n,i,t)):r.nextTick(n,i,t):e?(r.nextTick(s,i),e(t)):r.nextTick(s,i)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)},errorOrDestroy:function(t,e){var i=t._readableState,r=t._writableState;i&&i.autoDestroy||r&&r.autoDestroy?t.destroy(e):t.emit("error",e)}}},5931:t=>{var e=Object.prototype.toString,i=Array.isArray;t.exports=function(t){return"string"==typeof t||!i(t)&&function(t){return!!t&&"object"==typeof t}(t)&&"[object String]"==e.call(t)}},5979:(t,e,i)=>{"use strict";i.d(e,{G:()=>n});var r=i(4922);class n{canvas;context;texture;constructor(t,e){const i=document.createElement("canvas");i.width=t,i.height=e,this.canvas=i;const n=i.getContext("2d");this.context=n,null!=this.context&&(this.context.font="15px Helvetica");const s=new r.gPd(i);this.texture=s}setFont(t){null!=this.context&&(this.context.font=t)}drawBackground(t){null!=this.context&&(this.context.fillStyle=t,this.context.fillRect(0,0,this.canvas.width,this.canvas.height))}drawBox(t,e,i){null!=this.context&&(this.context.fillStyle=i,this.context.fillRect(t,e,this.canvas.width,2))}componentToHex(t){const e=t.toString(16);return 1==e.length?"0"+e:e}drawColor(t,e,i){null!=this.context&&(this.context.fillStyle="rgb("+(255*t).toString()+","+(255*e).toString()+","+(255*i).toString()+")",this.context.fillRect(200,4,52,22))}drawText(t,e,i,r){if(null!=this.context){let n=25;const s=this.context.measureText(t);"seed"==e&&(n=10),"center"==e&&(n=(this.canvas.width-s.width)/2),"right"==e&&(n=this.canvas.width-s.width-10),"mid"==e&&(n=this.canvas.width/10*7-s.width),this.context.fillStyle=r,this.context.fillText(t,n,i),this.texture.needsUpdate=!0}}}},6011:(t,e,i)=>{"use strict";var r=i(8287).Buffer,n=i(6698),s=i(1147),o=new Array(16),a=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],h=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],l=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],u=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11],c=[0,1518500249,1859775393,2400959708,2840853838],d=[1352829926,1548603684,1836072691,2053994217,0];function f(){s.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520}function p(t,e){return t<<e|t>>>32-e}function m(t,e,i,r,n,s,o,a){return p(t+(e^i^r)+s+o|0,a)+n|0}function g(t,e,i,r,n,s,o,a){return p(t+(e&i|~e&r)+s+o|0,a)+n|0}function v(t,e,i,r,n,s,o,a){return p(t+((e|~i)^r)+s+o|0,a)+n|0}function y(t,e,i,r,n,s,o,a){return p(t+(e&r|i&~r)+s+o|0,a)+n|0}function b(t,e,i,r,n,s,o,a){return p(t+(e^(i|~r))+s+o|0,a)+n|0}n(f,s),f.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);for(var i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,f=0|this._e,_=0|this._a,x=0|this._b,w=0|this._c,M=0|this._d,S=0|this._e,A=0;A<80;A+=1){var E,T;A<16?(E=m(i,r,n,s,f,t[a[A]],c[0],l[A]),T=b(_,x,w,M,S,t[h[A]],d[0],u[A])):A<32?(E=g(i,r,n,s,f,t[a[A]],c[1],l[A]),T=y(_,x,w,M,S,t[h[A]],d[1],u[A])):A<48?(E=v(i,r,n,s,f,t[a[A]],c[2],l[A]),T=v(_,x,w,M,S,t[h[A]],d[2],u[A])):A<64?(E=y(i,r,n,s,f,t[a[A]],c[3],l[A]),T=g(_,x,w,M,S,t[h[A]],d[3],u[A])):(E=b(i,r,n,s,f,t[a[A]],c[4],l[A]),T=m(_,x,w,M,S,t[h[A]],d[4],u[A])),i=f,f=s,s=p(n,10),n=r,r=E,_=S,S=M,M=p(w,10),w=x,x=T}var R=this._b+n+M|0;this._b=this._c+s+S|0,this._c=this._d+f+_|0,this._d=this._e+i+x|0,this._e=this._a+r+w|0,this._a=R},f.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=r.alloc?r.alloc(20):new r(20);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t.writeInt32LE(this._e,16),t},t.exports=f},6040:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});var r=i(5811);const n={};function s(t){let e=n[t];if(e)return e;const i=new Int32Array(t);for(let e=0;e<t;e++)i[e]=e;return e=n[t]=new r.k({uTextures:{value:i,type:"i32",size:t}},{isStatic:!0}),e}},6048:t=>{"use strict";var e={};function i(t,i,r){r||(r=Error);var n=function(t){var e,r;function n(e,r,n){return t.call(this,function(t,e,r){return"string"==typeof i?i:i(t,e,r)}(e,r,n))||this}return r=t,(e=n).prototype=Object.create(r.prototype),e.prototype.constructor=e,e.__proto__=r,n}(r);n.prototype.name=r.name,n.prototype.code=t,e[t]=n}function r(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map(function(t){return String(t)}),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}i("ERR_INVALID_OPT_VALUE",function(t,e){return'The value "'+e+'" is invalid for option "'+t+'"'},TypeError),i("ERR_INVALID_ARG_TYPE",function(t,e,i){var n,s,o,a,h;if("string"==typeof e&&(s="not ",e.substr(0,4)===s)?(n="must not be",e=e.replace(/^not /,"")):n="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-9,i)===e}(t," argument"))o="The ".concat(t," ").concat(n," ").concat(r(e,"type"));else{var l=("number"!=typeof h&&(h=0),h+1>(a=t).length||-1===a.indexOf(".",h)?"argument":"property");o='The "'.concat(t,'" ').concat(l," ").concat(n," ").concat(r(e,"type"))}return o+". Received type ".concat(typeof i)},TypeError),i("ERR_STREAM_PUSH_AFTER_EOF","stream.push() after EOF"),i("ERR_METHOD_NOT_IMPLEMENTED",function(t){return"The "+t+" method is not implemented"}),i("ERR_STREAM_PREMATURE_CLOSE","Premature close"),i("ERR_STREAM_DESTROYED",function(t){return"Cannot call "+t+" after a stream was destroyed"}),i("ERR_MULTIPLE_CALLBACK","Callback called multiple times"),i("ERR_STREAM_CANNOT_PIPE","Cannot pipe, not readable"),i("ERR_STREAM_WRITE_AFTER_END","write after end"),i("ERR_STREAM_NULL_VALUES","May not write null values to stream",TypeError),i("ERR_UNKNOWN_ENCODING",function(t){return"Unknown encoding: "+t},TypeError),i("ERR_STREAM_UNSHIFT_AFTER_END_EVENT","stream.unshift() after end event"),t.exports.F=e},6111:t=>{var e=1/0,i=9007199254740991,r=/^\s+|\s+$/g,n=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,a=/^(?:0|[1-9]\d*)$/,h=parseInt;function l(t){return t!=t}var u,c,d=Object.prototype,f=d.hasOwnProperty,p=d.toString,m=d.propertyIsEnumerable,g=(u=Object.keys,c=Object,function(t){return u(c(t))}),v=Math.max;function y(t,e){return!!(e=null==e?i:e)&&("number"==typeof t||a.test(t))&&t>-1&&t%1==0&&t<e}var b=Array.isArray;function _(t){return null!=t&&function(t){return"number"==typeof t&&t>-1&&t%1==0&&t<=i}(t.length)&&!function(t){var e=x(t)?p.call(t):"";return"[object Function]"==e||"[object GeneratorFunction]"==e}(t)}function x(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}function w(t){return!!t&&"object"==typeof t}t.exports=function(t,i,a,u){var c;t=_(t)?t:(c=t)?function(t,e){return function(t,e){for(var i=-1,r=t?t.length:0,n=Array(r);++i<r;)n[i]=e(t[i]);return n}(e,function(e){return t[e]})}(c,function(t){return _(t)?function(t,e){var i=b(t)||function(t){return function(t){return w(t)&&_(t)}(t)&&f.call(t,"callee")&&(!m.call(t,"callee")||"[object Arguments]"==p.call(t))}(t)?function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}(t.length,String):[],r=i.length,n=!!r;for(var s in t)!e&&!f.call(t,s)||n&&("length"==s||y(s,r))||i.push(s);return i}(t):function(t){if(i=(e=t)&&e.constructor,e!==("function"==typeof i&&i.prototype||d))return g(t);var e,i,r=[];for(var n in Object(t))f.call(t,n)&&"constructor"!=n&&r.push(n);return r}(t)}(c)):[],a=a&&!u?function(t){var i=function(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||w(t)&&"[object Symbol]"==p.call(t)}(t))return NaN;if(x(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=x(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(r,"");var i=s.test(t);return i||o.test(t)?h(t.slice(2),i?2:8):n.test(t)?NaN:+t}(t))===e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),a=i%1;return i==i?a?i-a:i:0}(a):0;var M=t.length;return a<0&&(a=v(M+a,0)),function(t){return"string"==typeof t||!b(t)&&w(t)&&"[object String]"==p.call(t)}(t)?a<=M&&t.indexOf(i,a)>-1:!!M&&function(t,e,i){if(e!=e)return function(t,e,i){for(var r=t.length,n=i+-1;++n<r;)if(e(t[n],n,t))return n;return-1}(t,l,i);for(var r=i-1,n=t.length;++r<n;)if(t[r]===e)return r;return-1}(t,i,a)>-1}},6139:(t,e,i)=>{"use strict";i.d(e,{$:()=>h});var r=i(888),n=i(7309),s=i(6858),o=i(1285);const a=class t extends o.v{constructor(e){super(e),this.isReady=!1,this.uploadMethodId="video",e={...t.defaultOptions,...e},this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=!1!==e.autoPlay,this.alphaMode=e.alphaMode??"premultiply-alpha-on-upload",this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onCanPlayThrough=this._onCanPlayThrough.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),!1!==e.autoLoad&&this.load()}updateFrame(){if(!this.destroyed){if(this._updateFPS){const t=n.R.shared.elapsedMS*this.resource.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t)}(!this._updateFPS||this._msToNextUpdate<=0)&&(this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0),this.isValid&&this.update()}}_videoFrameRequestCallback(){this.updateFrame(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback)}get isValid(){return!!this.resource.videoWidth&&!!this.resource.videoHeight}async load(){if(this._load)return this._load;const t=this.resource,e=this.options;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart),t.addEventListener("pause",this._onPlayStop),t.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._mediaReady():(e.preload||t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlayThrough),t.addEventListener("error",this._onError,!0)),this.alphaMode=await(0,s.C)(),this._load=new Promise((i,r)=>{this.isValid?i(this):(this._resolve=i,this._reject=r,void 0!==e.preloadTimeoutMs&&(this._preloadTimeout=setTimeout(()=>{this._onError(new ErrorEvent(`Preload exceeded timeout of ${e.preloadTimeoutMs}ms`))})),t.load())}),this._load}_onError(t){this.resource.removeEventListener("error",this._onError,!0),this.emit("error",t),this._reject&&(this._reject(t),this._reject=null,this._resolve=null)}_isSourcePlaying(){const t=this.resource;return!t.paused&&!t.ended}_isSourceReady(){return this.resource.readyState>2}_onPlayStart(){this.isValid||this._mediaReady(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0)}_onCanPlay(){this.resource.removeEventListener("canplay",this._onCanPlay),this._mediaReady()}_onCanPlayThrough(){this.resource.removeEventListener("canplaythrough",this._onCanPlay),this._preloadTimeout&&(clearTimeout(this._preloadTimeout),this._preloadTimeout=void 0),this._mediaReady()}_mediaReady(){const t=this.resource;this.isValid&&(this.isReady=!0,this.resize(t.videoWidth,t.videoHeight)),this._msToNextUpdate=0,this.updateFrame(),this._msToNextUpdate=0,this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.resource.play()}destroy(){this._configureAutoUpdate();const t=this.resource;t&&(t.removeEventListener("play",this._onPlayStart),t.removeEventListener("pause",this._onPlayStop),t.removeEventListener("seeked",this._onSeeked),t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlayThrough),t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.destroy()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.resource.requestVideoFrameCallback?(this._isConnectedToTicker&&(n.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),null===this._videoFrameRequestCallbackHandle&&(this._videoFrameRequestCallbackHandle=this.resource.requestVideoFrameCallback(this._videoFrameRequestCallback))):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(n.R.shared.add(this.updateFrame,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(null!==this._videoFrameRequestCallbackHandle&&(this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(n.R.shared.remove(this.updateFrame,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(t){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement}};a.extension=r.Ag.TextureSource,a.defaultOptions={...o.v.defaultOptions,autoLoad:!0,autoPlay:!0,updateFPS:0,crossorigin:!0,loop:!1,muted:!0,playsinline:!0,preload:!1},a.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let h=a},6162:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(8664).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function l(t,e,i,n){for(var s=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var l=t.charCodeAt(h)-48;s*=n,o=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&o<n,"Invalid character"),s+=o}return s}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,u=i;u<a;u+=r)h=l(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=l(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){u(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(t){s.prototype.inspect=c}else s.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<r;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var p=l-f|0;u+=(o=(n=0|t.words[p])*(s=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i._strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),i=0!==s||o!==this.length-1?d[6-h.length]+h+i:h+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=f[t],u=p[t];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var m=c.modrn(u).toString(t);i=(c=c.idivn(u)).isZero()?m+i:d[l-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===s?(i<t.length&&(t[i++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===s?(i>=0&&(t[i--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],v=8191&g,y=g>>>13,b=0|o[3],_=8191&b,x=b>>>13,w=0|o[4],M=8191&w,S=w>>>13,A=0|o[5],E=8191&A,T=A>>>13,R=0|o[6],P=8191&R,C=R>>>13,I=0|o[7],k=8191&I,B=I>>>13,O=0|o[8],L=8191&O,U=O>>>13,D=0|o[9],N=8191&D,F=D>>>13,z=0|a[0],G=8191&z,j=z>>>13,V=0|a[1],H=8191&V,W=V>>>13,X=0|a[2],q=8191&X,Y=X>>>13,Z=0|a[3],K=8191&Z,$=Z>>>13,Q=0|a[4],J=8191&Q,tt=Q>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(l+(r=Math.imul(c,G))|0)+((8191&(n=(n=Math.imul(c,j))+Math.imul(d,G)|0))<<13)|0;l=((s=Math.imul(d,j))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,G),n=(n=Math.imul(p,j))+Math.imul(m,G)|0,s=Math.imul(m,j);var vt=(l+(r=r+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,G),n=(n=Math.imul(v,j))+Math.imul(y,G)|0,s=Math.imul(y,j),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(m,H)|0,s=s+Math.imul(m,W)|0;var yt=(l+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(d,q)|0))<<13)|0;l=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,G),n=(n=Math.imul(_,j))+Math.imul(x,G)|0,s=Math.imul(x,j),r=r+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,W)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,Y)|0;var bt=(l+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,$)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,G),n=(n=Math.imul(M,j))+Math.imul(S,G)|0,s=Math.imul(S,j),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,W)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,W)|0,r=r+Math.imul(v,q)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(y,q)|0,s=s+Math.imul(y,Y)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var _t=(l+(r=r+Math.imul(c,J)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(d,J)|0))<<13)|0;l=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,G),n=(n=Math.imul(E,j))+Math.imul(T,G)|0,s=Math.imul(T,j),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,W)|0,r=r+Math.imul(_,q)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,Y)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(y,K)|0,s=s+Math.imul(y,$)|0,r=r+Math.imul(p,J)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,tt)|0;var xt=(l+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,it)|0))<<13)|0;l=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(P,G),n=(n=Math.imul(P,j))+Math.imul(C,G)|0,s=Math.imul(C,j),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,W)|0)+Math.imul(T,H)|0,s=s+Math.imul(T,W)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(S,q)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,$)|0,r=r+Math.imul(v,J)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var wt=(l+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(d,st)|0))<<13)|0;l=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(k,G),n=(n=Math.imul(k,j))+Math.imul(B,G)|0,s=Math.imul(B,j),r=r+Math.imul(P,H)|0,n=(n=n+Math.imul(P,W)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,W)|0,r=r+Math.imul(E,q)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,Y)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,$)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(y,it)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var Mt=(l+(r=r+Math.imul(c,ht)|0)|0)+((8191&(n=(n=n+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((s=s+Math.imul(d,lt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(L,G),n=(n=Math.imul(L,j))+Math.imul(U,G)|0,s=Math.imul(U,j),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(B,H)|0,s=s+Math.imul(B,W)|0,r=r+Math.imul(P,q)|0,n=(n=n+Math.imul(P,Y)|0)+Math.imul(C,q)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(x,it)|0,s=s+Math.imul(x,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(m,ht)|0,s=s+Math.imul(m,lt)|0;var St=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(N,G),n=(n=Math.imul(N,j))+Math.imul(F,G)|0,s=Math.imul(F,j),r=r+Math.imul(L,H)|0,n=(n=n+Math.imul(L,W)|0)+Math.imul(U,H)|0,s=s+Math.imul(U,W)|0,r=r+Math.imul(k,q)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(B,q)|0,s=s+Math.imul(B,Y)|0,r=r+Math.imul(P,K)|0,n=(n=n+Math.imul(P,$)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,$)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,r=r+Math.imul(v,ht)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,ht)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,dt)|0;var At=(l+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(d,pt)|0))<<13)|0;l=((s=s+Math.imul(d,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,H),n=(n=Math.imul(N,W))+Math.imul(F,H)|0,s=Math.imul(F,W),r=r+Math.imul(L,q)|0,n=(n=n+Math.imul(L,Y)|0)+Math.imul(U,q)|0,s=s+Math.imul(U,Y)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(B,K)|0,s=s+Math.imul(B,$)|0,r=r+Math.imul(P,J)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(C,J)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(_,ht)|0,n=(n=n+Math.imul(_,lt)|0)+Math.imul(x,ht)|0,s=s+Math.imul(x,lt)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,dt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,dt)|0;var Et=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(N,q),n=(n=Math.imul(N,Y))+Math.imul(F,q)|0,s=Math.imul(F,Y),r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,$)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(B,J)|0,s=s+Math.imul(B,tt)|0,r=r+Math.imul(P,it)|0,n=(n=n+Math.imul(P,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(M,ht)|0,n=(n=n+Math.imul(M,lt)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,lt)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,dt)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,dt)|0;var Tt=(l+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((s=s+Math.imul(y,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(N,K),n=(n=Math.imul(N,$))+Math.imul(F,K)|0,s=Math.imul(F,$),r=r+Math.imul(L,J)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(U,J)|0,s=s+Math.imul(U,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(B,it)|0,s=s+Math.imul(B,rt)|0,r=r+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(T,ht)|0,s=s+Math.imul(T,lt)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,dt)|0)+Math.imul(S,ct)|0,s=s+Math.imul(S,dt)|0;var Rt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(x,pt)|0))<<13)|0;l=((s=s+Math.imul(x,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,J),n=(n=Math.imul(N,tt))+Math.imul(F,J)|0,s=Math.imul(F,tt),r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(U,it)|0,s=s+Math.imul(U,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(B,st)|0,s=s+Math.imul(B,ot)|0,r=r+Math.imul(P,ht)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,lt)|0,r=r+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,dt)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,pt)|0))<<13)|0;l=((s=s+Math.imul(S,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(N,it),n=(n=Math.imul(N,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,r=r+Math.imul(k,ht)|0,n=(n=n+Math.imul(k,lt)|0)+Math.imul(B,ht)|0,s=s+Math.imul(B,lt)|0,r=r+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,dt)|0)+Math.imul(C,ct)|0,s=s+Math.imul(C,dt)|0;var Ct=(l+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,st),n=(n=Math.imul(N,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(L,ht)|0,n=(n=n+Math.imul(L,lt)|0)+Math.imul(U,ht)|0,s=s+Math.imul(U,lt)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,dt)|0)+Math.imul(B,ct)|0,s=s+Math.imul(B,dt)|0;var It=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,mt)|0)+Math.imul(C,pt)|0))<<13)|0;l=((s=s+Math.imul(C,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(N,ht),n=(n=Math.imul(N,lt))+Math.imul(F,ht)|0,s=Math.imul(F,lt),r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,dt)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,dt)|0;var kt=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(B,pt)|0))<<13)|0;l=((s=s+Math.imul(B,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,ct),n=(n=Math.imul(N,dt))+Math.imul(F,ct)|0,s=Math.imul(F,dt);var Bt=(l+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(U,pt)|0))<<13)|0;l=((s=s+Math.imul(U,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(l+(r=Math.imul(N,pt))|0)+((8191&(n=(n=Math.imul(N,mt))+Math.imul(F,pt)|0))<<13)|0;return l=((s=Math.imul(F,mt))+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,h[0]=gt,h[1]=vt,h[2]=yt,h[3]=bt,h[4]=_t,h[5]=xt,h[6]=wt,h[7]=Mt,h[8]=St,h[9]=At,h[10]=Et,h[11]=Tt,h[12]=Rt,h[13]=Pt,h[14]=Ct,h[15]=It,h[16]=kt,h[17]=Bt,h[18]=Ot,0!==l&&(h[19]=l,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=h;l++){var u=s-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i._strip()}function y(t,e,i){return v(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(g=m),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?m(this,t,e):i<1024?v(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},b.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var c=h,d=l,f=0;f<o;f++){var p=i[u+f],m=r[u+f],g=i[u+f+o],v=r[u+f+o],y=c*g-d*v;v=c*v+d*g,g=y,i[u+f]=p+g,r[u+f]=m+v,i[u+f+o]=p-g,r[u+f+o]=m-v,f!==a&&(y=h*c-l*d,d=h*d+l*c,c=y)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(!(-8192&s))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,s,a,h,r,n),this.transform(l,s,u,c,r,n);for(var f=0;f<r;f++){var p=a[f]*u[f]-h[f]*c[f];h[f]=a[f]*c[f]+h[f]*u[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),y(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var s=(0|this.words[n])*t,o=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[n]=67108863&o}return 0!==i&&(this.words[n]=i,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var c=0|this.words[l];this.words[l]=u<<26-s|c>>>s,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,h);0===u.negative&&(r=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,n=0,s=this.length-1;s>=0;s--)n=(i*n+(0|this.words[s]))%t;return e?-n:n},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*i;this.words[n]=s/t|0,i=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var u=i.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0===(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(l)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,u=1;0===(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;0===(i.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new E(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},n(w,x),w.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(M,x),n(S,x),n(A,x),A.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new M;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return _[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},E.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var v=this.pow(c,new s(1).iushln(p-g-1));d=d.redMul(v),c=v.redSqr(),f=f.redMul(c),p=g}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4===++a||0===r&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new T(t)},n(T,E),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},6166:(t,e,i)=>{"use strict";var r=i(7426),n=i(3349);function s(){this.pending=null,this.pendingTotal=0,this.blockSize=this.constructor.blockSize,this.outSize=this.constructor.outSize,this.hmacStrength=this.constructor.hmacStrength,this.padLength=this.constructor.padLength/8,this.endian="big",this._delta8=this.blockSize/8,this._delta32=this.blockSize/32}e.BlockHash=s,s.prototype.update=function(t,e){if(t=r.toArray(t,e),this.pending?this.pending=this.pending.concat(t):this.pending=t,this.pendingTotal+=t.length,this.pending.length>=this._delta8){var i=(t=this.pending).length%this._delta8;this.pending=t.slice(t.length-i,t.length),0===this.pending.length&&(this.pending=null),t=r.join32(t,0,t.length-i,this.endian);for(var n=0;n<t.length;n+=this._delta32)this._update(t,n,n+this._delta32)}return this},s.prototype.digest=function(t){return this.update(this._pad()),n(null===this.pending),this._digest(t)},s.prototype._pad=function(){var t=this.pendingTotal,e=this._delta8,i=e-(t+this.padLength)%e,r=new Array(i+this.padLength);r[0]=128;for(var n=1;n<i;n++)r[n]=0;if(t<<=3,"big"===this.endian){for(var s=8;s<this.padLength;s++)r[n++]=0;r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=t>>>24&255,r[n++]=t>>>16&255,r[n++]=t>>>8&255,r[n++]=255&t}else for(r[n++]=255&t,r[n++]=t>>>8&255,r[n++]=t>>>16&255,r[n++]=t>>>24&255,r[n++]=0,r[n++]=0,r[n++]=0,r[n++]=0,s=8;s<this.padLength;s++)r[n++]=0;return r}},6168:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(8310).Transform,s=i(3141).I;function o(t){n.call(this),this.hashMode="string"==typeof t,this.hashMode?this[t]=this._finalOrDigest:this.final=this._finalOrDigest,this._final&&(this.__final=this._final,this._final=null),this._decoder=null,this._encoding=null}i(6698)(o,n);var a="undefined"!=typeof Uint8Array,h="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array&&ArrayBuffer.isView&&(r.prototype instanceof Uint8Array||r.TYPED_ARRAY_SUPPORT);o.prototype.update=function(t,e,i){var n=function(t,e){if(t instanceof r)return t;if("string"==typeof t)return r.from(t,e);if(h&&ArrayBuffer.isView(t)){if(0===t.byteLength)return r.alloc(0);var i=r.from(t.buffer,t.byteOffset,t.byteLength);if(i.byteLength===t.byteLength)return i}if(a&&t instanceof Uint8Array)return r.from(t);if(r.isBuffer(t)&&t.constructor&&"function"==typeof t.constructor.isBuffer&&t.constructor.isBuffer(t))return r.from(t);throw new TypeError('The "data" argument must be of type string or an instance of Buffer, TypedArray, or DataView.')}(t,e),s=this._update(n);return this.hashMode?this:(i&&(s=this._toString(s,i)),s)},o.prototype.setAutoPadding=function(){},o.prototype.getAuthTag=function(){throw new Error("trying to get auth tag in unsupported state")},o.prototype.setAuthTag=function(){throw new Error("trying to set auth tag in unsupported state")},o.prototype.setAAD=function(){throw new Error("trying to set aad in unsupported state")},o.prototype._transform=function(t,e,i){var r;try{this.hashMode?this._update(t):this.push(this._update(t))}catch(t){r=t}finally{i(r)}},o.prototype._flush=function(t){var e;try{this.push(this.__final())}catch(t){e=t}t(e)},o.prototype._finalOrDigest=function(t){var e=this.__final()||r.alloc(0);return t&&(e=this._toString(e,t,!0)),e},o.prototype._toString=function(t,e,i){if(this._decoder||(this._decoder=new s(e),this._encoding=e),this._encoding!==e)throw new Error("cant switch encodings");var r=this._decoder.write(t);return i&&(r+=this._decoder.end()),r},t.exports=o},6171:(t,e,i)=>{var r=i(2356),n=i(2861).Buffer,s=i(530),o=i(650),a=i(6168),h=i(462),l=i(8078);function u(t,e,i){a.call(this),this._cache=new c,this._last=void 0,this._cipher=new h.AES(e),this._prev=n.from(i),this._mode=t,this._autopadding=!0}function c(){this.cache=n.allocUnsafe(0)}function d(t,e,i){var a=s[t.toLowerCase()];if(!a)throw new TypeError("invalid suite type");if("string"==typeof i&&(i=n.from(i)),"GCM"!==a.mode&&i.length!==a.iv)throw new TypeError("invalid iv length "+i.length);if("string"==typeof e&&(e=n.from(e)),e.length!==a.key/8)throw new TypeError("invalid key length "+e.length);return"stream"===a.type?new o(a.module,e,i,!0):"auth"===a.type?new r(a.module,e,i,!0):new u(a.module,e,i)}i(6698)(u,a),u.prototype._update=function(t){var e,i;this._cache.add(t);for(var r=[];e=this._cache.get(this._autopadding);)i=this._mode.decrypt(this,e),r.push(i);return n.concat(r)},u.prototype._final=function(){var t=this._cache.flush();if(this._autopadding)return function(t){var e=t[15];if(e<1||e>16)throw new Error("unable to decrypt data");for(var i=-1;++i<e;)if(t[i+(16-e)]!==e)throw new Error("unable to decrypt data");if(16!==e)return t.slice(0,16-e)}(this._mode.decrypt(this,t));if(t)throw new Error("data not multiple of block length")},u.prototype.setAutoPadding=function(t){return this._autopadding=!!t,this},c.prototype.add=function(t){this.cache=n.concat([this.cache,t])},c.prototype.get=function(t){var e;if(t){if(this.cache.length>16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e}else if(this.cache.length>=16)return e=this.cache.slice(0,16),this.cache=this.cache.slice(16),e;return null},c.prototype.flush=function(){if(this.cache.length)return this.cache},e.createDecipher=function(t,e){var i=s[t.toLowerCase()];if(!i)throw new TypeError("invalid suite type");var r=l(e,!1,i.key,i.iv);return d(t,r.key,r.iv)},e.createDecipheriv=d},6188:t=>{"use strict";t.exports=Math.max},6211:(t,e,i)=>{"use strict";var r=i(2786);function n(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var i=1732584193,r=-271733879,n=-1732584194,s=271733878,c=0;c<t.length;c+=16){var d=i,f=r,p=n,m=s;i=o(i,r,n,s,t[c+0],7,-680876936),s=o(s,i,r,n,t[c+1],12,-389564586),n=o(n,s,i,r,t[c+2],17,606105819),r=o(r,n,s,i,t[c+3],22,-1044525330),i=o(i,r,n,s,t[c+4],7,-176418897),s=o(s,i,r,n,t[c+5],12,1200080426),n=o(n,s,i,r,t[c+6],17,-1473231341),r=o(r,n,s,i,t[c+7],22,-45705983),i=o(i,r,n,s,t[c+8],7,1770035416),s=o(s,i,r,n,t[c+9],12,-1958414417),n=o(n,s,i,r,t[c+10],17,-42063),r=o(r,n,s,i,t[c+11],22,-1990404162),i=o(i,r,n,s,t[c+12],7,1804603682),s=o(s,i,r,n,t[c+13],12,-40341101),n=o(n,s,i,r,t[c+14],17,-1502002290),i=a(i,r=o(r,n,s,i,t[c+15],22,1236535329),n,s,t[c+1],5,-165796510),s=a(s,i,r,n,t[c+6],9,-1069501632),n=a(n,s,i,r,t[c+11],14,643717713),r=a(r,n,s,i,t[c+0],20,-373897302),i=a(i,r,n,s,t[c+5],5,-701558691),s=a(s,i,r,n,t[c+10],9,38016083),n=a(n,s,i,r,t[c+15],14,-660478335),r=a(r,n,s,i,t[c+4],20,-405537848),i=a(i,r,n,s,t[c+9],5,568446438),s=a(s,i,r,n,t[c+14],9,-1019803690),n=a(n,s,i,r,t[c+3],14,-187363961),r=a(r,n,s,i,t[c+8],20,1163531501),i=a(i,r,n,s,t[c+13],5,-1444681467),s=a(s,i,r,n,t[c+2],9,-51403784),n=a(n,s,i,r,t[c+7],14,1735328473),i=h(i,r=a(r,n,s,i,t[c+12],20,-1926607734),n,s,t[c+5],4,-378558),s=h(s,i,r,n,t[c+8],11,-2022574463),n=h(n,s,i,r,t[c+11],16,1839030562),r=h(r,n,s,i,t[c+14],23,-35309556),i=h(i,r,n,s,t[c+1],4,-1530992060),s=h(s,i,r,n,t[c+4],11,1272893353),n=h(n,s,i,r,t[c+7],16,-155497632),r=h(r,n,s,i,t[c+10],23,-1094730640),i=h(i,r,n,s,t[c+13],4,681279174),s=h(s,i,r,n,t[c+0],11,-358537222),n=h(n,s,i,r,t[c+3],16,-722521979),r=h(r,n,s,i,t[c+6],23,76029189),i=h(i,r,n,s,t[c+9],4,-640364487),s=h(s,i,r,n,t[c+12],11,-421815835),n=h(n,s,i,r,t[c+15],16,530742520),i=l(i,r=h(r,n,s,i,t[c+2],23,-995338651),n,s,t[c+0],6,-198630844),s=l(s,i,r,n,t[c+7],10,1126891415),n=l(n,s,i,r,t[c+14],15,-1416354905),r=l(r,n,s,i,t[c+5],21,-57434055),i=l(i,r,n,s,t[c+12],6,1700485571),s=l(s,i,r,n,t[c+3],10,-1894986606),n=l(n,s,i,r,t[c+10],15,-1051523),r=l(r,n,s,i,t[c+1],21,-2054922799),i=l(i,r,n,s,t[c+8],6,1873313359),s=l(s,i,r,n,t[c+15],10,-30611744),n=l(n,s,i,r,t[c+6],15,-1560198380),r=l(r,n,s,i,t[c+13],21,1309151649),i=l(i,r,n,s,t[c+4],6,-145523070),s=l(s,i,r,n,t[c+11],10,-1120210379),n=l(n,s,i,r,t[c+2],15,718787259),r=l(r,n,s,i,t[c+9],21,-343485551),i=u(i,d),r=u(r,f),n=u(n,p),s=u(s,m)}return[i,r,n,s]}function s(t,e,i,r,n,s){return u((o=u(u(e,t),u(r,s)))<<(a=n)|o>>>32-a,i);var o,a}function o(t,e,i,r,n,o,a){return s(e&i|~e&r,t,e,n,o,a)}function a(t,e,i,r,n,o,a){return s(e&r|i&~r,t,e,n,o,a)}function h(t,e,i,r,n,o,a){return s(e^i^r,t,e,n,o,a)}function l(t,e,i,r,n,o,a){return s(i^(e|~r),t,e,n,o,a)}function u(t,e){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}t.exports=function(t){return r(t,n)}},6225:(t,e,i)=>{"use strict";var r=i(7426).rotr32;function n(t,e,i){return t&e^~t&i}function s(t,e,i){return t&e^t&i^e&i}function o(t,e,i){return t^e^i}e.ft_1=function(t,e,i,r){return 0===t?n(e,i,r):1===t||3===t?o(e,i,r):2===t?s(e,i,r):void 0},e.ch32=n,e.maj32=s,e.p32=o,e.s0_256=function(t){return r(t,2)^r(t,13)^r(t,22)},e.s1_256=function(t){return r(t,6)^r(t,11)^r(t,25)},e.g0_256=function(t){return r(t,7)^r(t,18)^t>>>3},e.g1_256=function(t){return r(t,17)^r(t,19)^t>>>10}},6229:(t,e,i)=>{"use strict";e.sha1=i(3917),e.sha224=i(7714),e.sha256=i(2287),e.sha384=i(1911),e.sha512=i(7766)},6238:(t,e,i)=>{"use strict";var r=i(6048).F.ERR_STREAM_PREMATURE_CLOSE;function n(){}t.exports=function t(e,i,s){if("function"==typeof i)return t(e,null,i);i||(i={}),s=function(t){var e=!1;return function(){if(!e){e=!0;for(var i=arguments.length,r=new Array(i),n=0;n<i;n++)r[n]=arguments[n];t.apply(this,r)}}}(s||n);var o=i.readable||!1!==i.readable&&e.readable,a=i.writable||!1!==i.writable&&e.writable,h=function(){e.writable||u()},l=e._writableState&&e._writableState.finished,u=function(){a=!1,l=!0,o||s.call(e)},c=e._readableState&&e._readableState.endEmitted,d=function(){o=!1,c=!0,a||s.call(e)},f=function(t){s.call(e,t)},p=function(){var t;return o&&!c?(e._readableState&&e._readableState.ended||(t=new r),s.call(e,t)):a&&!l?(e._writableState&&e._writableState.ended||(t=new r),s.call(e,t)):void 0},m=function(){e.req.on("finish",u)};return function(t){return t.setHeader&&"function"==typeof t.abort}(e)?(e.on("complete",u),e.on("abort",p),e.req?m():e.on("request",m)):a&&!e._writableState&&(e.on("end",h),e.on("close",h)),e.on("end",d),e.on("finish",u),!1!==i.error&&e.on("error",f),e.on("close",p),function(){e.removeListener("complete",u),e.removeListener("abort",p),e.removeListener("request",m),e.req&&e.req.removeListener("finish",u),e.removeListener("end",h),e.removeListener("close",h),e.removeListener("finish",u),e.removeListener("end",d),e.removeListener("error",f),e.removeListener("close",p)}}},6248:(t,e,i)=>{"use strict";var r=i(3225),n=Object.keys||function(t){var e=[];for(var i in t)e.push(i);return e};t.exports=c;var s=Object.create(i(5622));s.inherits=i(6698);var o=i(206),a=i(7314);s.inherits(c,o);for(var h=n(a.prototype),l=0;l<h.length;l++){var u=h[l];c.prototype[u]||(c.prototype[u]=a.prototype[u])}function c(t){if(!(this instanceof c))return new c(t);o.call(this,t),a.call(this,t),t&&!1===t.readable&&(this.readable=!1),t&&!1===t.writable&&(this.writable=!1),this.allowHalfOpen=!0,t&&!1===t.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",d)}function d(){this.allowHalfOpen||this._writableState.ended||r.nextTick(f,this)}function f(t){t.end()}Object.defineProperty(c.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(c.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(t){void 0!==this._readableState&&void 0!==this._writableState&&(this._readableState.destroyed=t,this._writableState.destroyed=t)}}),c.prototype._destroy=function(t,e){this.push(null),this.end(),r.nextTick(e,t)}},6278:(t,e,i)=>{"use strict";var r=i(3225);function n(t,e){t.emit("error",e)}t.exports={destroy:function(t,e){var i=this,s=this._readableState&&this._readableState.destroyed,o=this._writableState&&this._writableState.destroyed;return s||o?(e?e(t):t&&(this._writableState?this._writableState.errorEmitted||(this._writableState.errorEmitted=!0,r.nextTick(n,this,t)):r.nextTick(n,this,t)),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(t||null,function(t){!e&&t?i._writableState?i._writableState.errorEmitted||(i._writableState.errorEmitted=!0,r.nextTick(n,i,t)):r.nextTick(n,i,t):e&&e(t)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finalCalled=!1,this._writableState.prefinished=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},6383:(t,e,i)=>{var r=i(2861).Buffer,n=i(295);function s(t,e,i){var s=e.length,o=n(e,t._cache);return t._cache=t._cache.slice(s),t._prev=r.concat([t._prev,i?e:o]),o}e.encrypt=function(t,e,i){for(var n,o=r.allocUnsafe(0);e.length;){if(0===t._cache.length&&(t._cache=t._cipher.encryptBlock(t._prev),t._prev=r.allocUnsafe(0)),!(t._cache.length<=e.length)){o=r.concat([o,s(t,e,i)]);break}n=t._cache.length,o=r.concat([o,s(t,e.slice(0,n),i)]),e=e.slice(n)}return o}},6413:(t,e,i)=>{"use strict";var r=i(7568),n=r.define("Time",function(){this.choice({utcTime:this.utctime(),generalTime:this.gentime()})}),s=r.define("AttributeTypeValue",function(){this.seq().obj(this.key("type").objid(),this.key("value").any())}),o=r.define("AlgorithmIdentifier",function(){this.seq().obj(this.key("algorithm").objid(),this.key("parameters").optional(),this.key("curve").objid().optional())}),a=r.define("SubjectPublicKeyInfo",function(){this.seq().obj(this.key("algorithm").use(o),this.key("subjectPublicKey").bitstr())}),h=r.define("RelativeDistinguishedName",function(){this.setof(s)}),l=r.define("RDNSequence",function(){this.seqof(h)}),u=r.define("Name",function(){this.choice({rdnSequence:this.use(l)})}),c=r.define("Validity",function(){this.seq().obj(this.key("notBefore").use(n),this.key("notAfter").use(n))}),d=r.define("Extension",function(){this.seq().obj(this.key("extnID").objid(),this.key("critical").bool().def(!1),this.key("extnValue").octstr())}),f=r.define("TBSCertificate",function(){this.seq().obj(this.key("version").explicit(0).int().optional(),this.key("serialNumber").int(),this.key("signature").use(o),this.key("issuer").use(u),this.key("validity").use(c),this.key("subject").use(u),this.key("subjectPublicKeyInfo").use(a),this.key("issuerUniqueID").implicit(1).bitstr().optional(),this.key("subjectUniqueID").implicit(2).bitstr().optional(),this.key("extensions").explicit(3).seqof(d).optional())}),p=r.define("X509Certificate",function(){this.seq().obj(this.key("tbsCertificate").use(f),this.key("signatureAlgorithm").use(o),this.key("signatureValue").bitstr())});t.exports=p},6427:(t,e,i)=>{"use strict";var r=i(8393).Buffer,n=r.isEncoding||function(t){switch((t=""+t)&&t.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function s(t){var e;switch(this.encoding=function(t){var e=function(t){if(!t)return"utf8";for(var e;;)switch(t){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return t;default:if(e)return;t=(""+t).toLowerCase(),e=!0}}(t);if("string"!=typeof e&&(r.isEncoding===n||!n(t)))throw new Error("Unknown encoding: "+t);return e||t}(t),this.encoding){case"utf16le":this.text=h,this.end=l,e=4;break;case"utf8":this.fillLast=a,e=4;break;case"base64":this.text=u,this.end=c,e=3;break;default:return this.write=d,void(this.end=f)}this.lastNeed=0,this.lastTotal=0,this.lastChar=r.allocUnsafe(e)}function o(t){return t<=127?0:t>>5==6?2:t>>4==14?3:t>>3==30?4:t>>6==2?-1:-2}function a(t){var e=this.lastTotal-this.lastNeed,i=function(t,e){if(128!=(192&e[0]))return t.lastNeed=0,"";if(t.lastNeed>1&&e.length>1){if(128!=(192&e[1]))return t.lastNeed=1,"";if(t.lastNeed>2&&e.length>2&&128!=(192&e[2]))return t.lastNeed=2,""}}(this,t);return void 0!==i?i:this.lastNeed<=t.length?(t.copy(this.lastChar,e,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):(t.copy(this.lastChar,e,0,t.length),void(this.lastNeed-=t.length))}function h(t,e){if((t.length-e)%2==0){var i=t.toString("utf16le",e);if(i){var r=i.charCodeAt(i.length-1);if(r>=55296&&r<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1],i.slice(0,-1)}return i}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=t[t.length-1],t.toString("utf16le",e,t.length-1)}function l(t){var e=t&&t.length?this.write(t):"";if(this.lastNeed){var i=this.lastTotal-this.lastNeed;return e+this.lastChar.toString("utf16le",0,i)}return e}function u(t,e){var i=(t.length-e)%3;return 0===i?t.toString("base64",e):(this.lastNeed=3-i,this.lastTotal=3,1===i?this.lastChar[0]=t[t.length-1]:(this.lastChar[0]=t[t.length-2],this.lastChar[1]=t[t.length-1]),t.toString("base64",e,t.length-i))}function c(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+this.lastChar.toString("base64",0,3-this.lastNeed):e}function d(t){return t.toString(this.encoding)}function f(t){return t&&t.length?this.write(t):""}e.I=s,s.prototype.write=function(t){if(0===t.length)return"";var e,i;if(this.lastNeed){if(void 0===(e=this.fillLast(t)))return"";i=this.lastNeed,this.lastNeed=0}else i=0;return i<t.length?e?e+this.text(t,i):this.text(t,i):e||""},s.prototype.end=function(t){var e=t&&t.length?this.write(t):"";return this.lastNeed?e+"":e},s.prototype.text=function(t,e){var i=function(t,e,i){var r=e.length-1;if(r<i)return 0;var n=o(e[r]);return n>=0?(n>0&&(t.lastNeed=n-1),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(t.lastNeed=n-2),n):--r<i||-2===n?0:(n=o(e[r]))>=0?(n>0&&(2===n?n=0:t.lastNeed=n-3),n):0}(this,t,e);if(!this.lastNeed)return t.toString("utf8",e);this.lastTotal=i;var r=t.length-(i-this.lastNeed);return t.copy(this.lastChar,0,r),t.toString("utf8",e,r)},s.prototype.fillLast=function(t){if(this.lastNeed<=t.length)return t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);t.copy(this.lastChar,this.lastTotal-this.lastNeed,0,t.length),this.lastNeed-=t.length}},6489:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(3153),n=Object.prototype.propertyIsEnumerable,s=Object.getOwnPropertySymbols;const o=s?function(t){return null==t?[]:(t=Object(t),function(t,e){for(var i=-1,r=null==t?0:t.length,n=0,s=[];++i<r;){var o=t[i];e(o,i,t)&&(s[n++]=o)}return s}(s(t),function(e){return n.call(t,e)}))}:r.A},6549:t=>{"use strict";t.exports=Object.getOwnPropertyDescriptor},6556:(t,e,i)=>{"use strict";var r=i(453),n=i(3126),s=n([r("%String.prototype.indexOf%")]);t.exports=function(t,e){var i=r(t,!!e);return"function"==typeof i&&s(t,".prototype.")>-1?n([i]):i}},6557:(t,e,i)=>{"use strict";var r=i(1979),n=i(888),s=i(1285),o=i(4492);const a=[];function h(t={}){const e=t&&t.resource,i=e?t.resource:t,r=e?t:{resource:t};for(let t=0;t<a.length;t++){const e=a[t];if(e.test(i))return new e(r)}throw new Error(`Could not find a source type for resource: ${r.resource}`)}n.XO.handleByList(n.Ag.TextureSource,a),o.g.from=function(t,e=!1){return"string"==typeof t?r.l.get(t):t instanceof s.v?new o.g({source:t}):function(t={},e=!1){const i=t&&t.resource,n=i?t.resource:t,s=i?t:{resource:t};if(!e&&r.l.has(n))return r.l.get(n);const a=new o.g({source:h(s)});return a.on("destroy",()=>{r.l.has(n)&&r.l.remove(n)}),e||r.l.set(n,a),a}(t,e)},s.v.from=h},6563:(t,e,i)=>{"use strict";i.d(e,{a:()=>a});var r=i(3804);const n=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n");function s(t){let e="";for(let i=0;i<t;++i)i>0&&(e+="\nelse "),i<t-1&&(e+=`if(test == ${i}.0){}`);return e}let o=null;function a(){if(o)return o;const t=(0,r.W)();return o=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),o=function(t,e){if(0===t)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=e.createShader(e.FRAGMENT_SHADER);try{for(;;){const r=n.replace(/%forloop%/gi,s(t));if(e.shaderSource(i,r),e.compileShader(i),e.getShaderParameter(i,e.COMPILE_STATUS))break;t=t/2|0}}finally{e.deleteShader(i)}return t}(o,t),t.getExtension("WEBGL_lose_context")?.loseContext(),o}},6567:(t,e,i)=>{"use strict";var r=i(7426),n=i(3349);function s(t,e,i){if(!(this instanceof s))return new s(t,e,i);this.Hash=t,this.blockSize=t.blockSize/8,this.outSize=t.outSize/8,this.inner=null,this.outer=null,this._init(r.toArray(e,i))}t.exports=s,s.prototype._init=function(t){t.length>this.blockSize&&(t=(new this.Hash).update(t).digest()),n(t.length<=this.blockSize);for(var e=t.length;e<this.blockSize;e++)t.push(0);for(e=0;e<t.length;e++)t[e]^=54;for(this.inner=(new this.Hash).update(t),e=0;e<t.length;e++)t[e]^=106;this.outer=(new this.Hash).update(t)},s.prototype.update=function(t,e){return this.inner.update(t,e),this},s.prototype.digest=function(t){return this.outer.update(this.inner.digest()),this.outer.digest(t)}},6570:t=>{"use strict";function e(t,e,r){r=r||2;var s,o,a,h,c,d,p,m=e&&e.length,g=m?e[0]*r:t.length,v=i(t,0,g,r,!0),y=[];if(!v||v.next===v.prev)return y;if(m&&(v=function(t,e,r,n){var s,o,a,h=[];for(s=0,o=e.length;s<o;s++)(a=i(t,e[s]*n,s<o-1?e[s+1]*n:t.length,n,!1))===a.next&&(a.steiner=!0),h.push(f(a));for(h.sort(l),s=0;s<h.length;s++)r=u(h[s],r);return r}(t,e,v,r)),t.length>80*r){s=a=t[0],o=h=t[1];for(var b=r;b<g;b+=r)(c=t[b])<s&&(s=c),(d=t[b+1])<o&&(o=d),c>a&&(a=c),d>h&&(h=d);p=0!==(p=Math.max(a-s,h-o))?32767/p:0}return n(v,y,r,s,o,p,0),y}function i(t,e,i,r,n){var s,o;if(n===E(t,e,i,r)>0)for(s=e;s<i;s+=r)o=M(s,t[s],t[s+1],o);else for(s=i-r;s>=e;s-=r)o=M(s,t[s],t[s+1],o);return o&&v(o,o.next)&&(S(o),o=o.next),o}function r(t,e){if(!t)return t;e||(e=t);var i,r=t;do{if(i=!1,r.steiner||!v(r,r.next)&&0!==g(r.prev,r,r.next))r=r.next;else{if(S(r),(r=e=r.prev)===r.next)break;i=!0}}while(i||r!==e);return e}function n(t,e,i,l,u,c,f){if(t){!f&&c&&function(t,e,i,r){var n=t;do{0===n.z&&(n.z=d(n.x,n.y,e,i,r)),n.prevZ=n.prev,n.nextZ=n.next,n=n.next}while(n!==t);n.prevZ.nextZ=null,n.prevZ=null,function(t){var e,i,r,n,s,o,a,h,l=1;do{for(i=t,t=null,s=null,o=0;i;){for(o++,r=i,a=0,e=0;e<l&&(a++,r=r.nextZ);e++);for(h=l;a>0||h>0&&r;)0!==a&&(0===h||!r||i.z<=r.z)?(n=i,i=i.nextZ,a--):(n=r,r=r.nextZ,h--),s?s.nextZ=n:t=n,n.prevZ=s,s=n;i=r}s.nextZ=null,l*=2}while(o>1)}(n)}(t,l,u,c);for(var p,m,g=t;t.prev!==t.next;)if(p=t.prev,m=t.next,c?o(t,l,u,c):s(t))e.push(p.i/i|0),e.push(t.i/i|0),e.push(m.i/i|0),S(t),t=m.next,g=m.next;else if((t=m)===g){f?1===f?n(t=a(r(t),e,i),e,i,l,u,c,2):2===f&&h(t,e,i,l,u,c):n(r(t),e,i,l,u,c,1);break}}}function s(t){var e=t.prev,i=t,r=t.next;if(g(e,i,r)>=0)return!1;for(var n=e.x,s=i.x,o=r.x,a=e.y,h=i.y,l=r.y,u=n<s?n<o?n:o:s<o?s:o,c=a<h?a<l?a:l:h<l?h:l,d=n>s?n>o?n:o:s>o?s:o,f=a>h?a>l?a:l:h>l?h:l,m=r.next;m!==e;){if(m.x>=u&&m.x<=d&&m.y>=c&&m.y<=f&&p(n,a,s,h,o,l,m.x,m.y)&&g(m.prev,m,m.next)>=0)return!1;m=m.next}return!0}function o(t,e,i,r){var n=t.prev,s=t,o=t.next;if(g(n,s,o)>=0)return!1;for(var a=n.x,h=s.x,l=o.x,u=n.y,c=s.y,f=o.y,m=a<h?a<l?a:l:h<l?h:l,v=u<c?u<f?u:f:c<f?c:f,y=a>h?a>l?a:l:h>l?h:l,b=u>c?u>f?u:f:c>f?c:f,_=d(m,v,e,i,r),x=d(y,b,e,i,r),w=t.prevZ,M=t.nextZ;w&&w.z>=_&&M&&M.z<=x;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==n&&w!==o&&p(a,u,h,c,l,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;if(w=w.prevZ,M.x>=m&&M.x<=y&&M.y>=v&&M.y<=b&&M!==n&&M!==o&&p(a,u,h,c,l,f,M.x,M.y)&&g(M.prev,M,M.next)>=0)return!1;M=M.nextZ}for(;w&&w.z>=_;){if(w.x>=m&&w.x<=y&&w.y>=v&&w.y<=b&&w!==n&&w!==o&&p(a,u,h,c,l,f,w.x,w.y)&&g(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;M&&M.z<=x;){if(M.x>=m&&M.x<=y&&M.y>=v&&M.y<=b&&M!==n&&M!==o&&p(a,u,h,c,l,f,M.x,M.y)&&g(M.prev,M,M.next)>=0)return!1;M=M.nextZ}return!0}function a(t,e,i){var n=t;do{var s=n.prev,o=n.next.next;!v(s,o)&&y(s,n,n.next,o)&&x(s,o)&&x(o,s)&&(e.push(s.i/i|0),e.push(n.i/i|0),e.push(o.i/i|0),S(n),S(n.next),n=t=o),n=n.next}while(n!==t);return r(n)}function h(t,e,i,s,o,a){var h=t;do{for(var l=h.next.next;l!==h.prev;){if(h.i!==l.i&&m(h,l)){var u=w(h,l);return h=r(h,h.next),u=r(u,u.next),n(h,e,i,s,o,a,0),void n(u,e,i,s,o,a,0)}l=l.next}h=h.next}while(h!==t)}function l(t,e){return t.x-e.x}function u(t,e){var i=function(t,e){var i,r=e,n=t.x,s=t.y,o=-1/0;do{if(s<=r.y&&s>=r.next.y&&r.next.y!==r.y){var a=r.x+(s-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(a<=n&&a>o&&(o=a,i=r.x<r.next.x?r:r.next,a===n))return i}r=r.next}while(r!==e);if(!i)return null;var h,l=i,u=i.x,d=i.y,f=1/0;r=i;do{n>=r.x&&r.x>=u&&n!==r.x&&p(s<d?n:o,s,u,d,s<d?o:n,s,r.x,r.y)&&(h=Math.abs(s-r.y)/(n-r.x),x(r,t)&&(h<f||h===f&&(r.x>i.x||r.x===i.x&&c(i,r)))&&(i=r,f=h)),r=r.next}while(r!==l);return i}(t,e);if(!i)return e;var n=w(i,t);return r(n,n.next),r(i,i.next)}function c(t,e){return g(t.prev,t,e.prev)<0&&g(e.next,t,t.next)<0}function d(t,e,i,r,n){return(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-i)*n|0)|t<<8))|t<<4))|t<<2))|t<<1))|(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-r)*n|0)|e<<8))|e<<4))|e<<2))|e<<1))<<1}function f(t){var e=t,i=t;do{(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next}while(e!==t);return i}function p(t,e,i,r,n,s,o,a){return(n-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(r-a)>=(i-o)*(e-a)&&(i-o)*(s-a)>=(n-o)*(r-a)}function m(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&y(i,i.next,t,e))return!0;i=i.next}while(i!==t);return!1}(t,e)&&(x(t,e)&&x(e,t)&&function(t,e){var i=t,r=!1,n=(t.x+e.x)/2,s=(t.y+e.y)/2;do{i.y>s!=i.next.y>s&&i.next.y!==i.y&&n<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next}while(i!==t);return r}(t,e)&&(g(t.prev,t,e.prev)||g(t,e.prev,e))||v(t,e)&&g(t.prev,t,t.next)>0&&g(e.prev,e,e.next)>0)}function g(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function v(t,e){return t.x===e.x&&t.y===e.y}function y(t,e,i,r){var n=_(g(t,e,i)),s=_(g(t,e,r)),o=_(g(i,r,t)),a=_(g(i,r,e));return n!==s&&o!==a||!(0!==n||!b(t,i,e))||!(0!==s||!b(t,r,e))||!(0!==o||!b(i,t,r))||!(0!==a||!b(i,e,r))}function b(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function _(t){return t>0?1:t<0?-1:0}function x(t,e){return g(t.prev,t,t.next)<0?g(t,e,t.next)>=0&&g(t,t.prev,e)>=0:g(t,e,t.prev)<0||g(t,t.next,e)<0}function w(t,e){var i=new A(t.i,t.x,t.y),r=new A(e.i,e.x,e.y),n=t.next,s=e.prev;return t.next=e,e.prev=t,i.next=n,n.prev=i,r.next=i,i.prev=r,s.next=r,r.prev=s,r}function M(t,e,i,r){var n=new A(t,e,i);return r?(n.next=r.next,n.prev=r,r.next.prev=n,r.next=n):(n.prev=n,n.next=n),n}function S(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function A(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function E(t,e,i,r){for(var n=0,s=e,o=i-r;s<i;s+=r)n+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return n}t.exports=e,t.exports.default=e,e.deviation=function(t,e,i,r){var n=e&&e.length,s=n?e[0]*i:t.length,o=Math.abs(E(t,0,s,i));if(n)for(var a=0,h=e.length;a<h;a++){var l=e[a]*i,u=a<h-1?e[a+1]*i:t.length;o-=Math.abs(E(t,l,u,i))}var c=0;for(a=0;a<r.length;a+=3){var d=r[a]*i,f=r[a+1]*i,p=r[a+2]*i;c+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},e.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,n=0;n<t.length;n++){for(var s=0;s<t[n].length;s++)for(var o=0;o<e;o++)i.vertices.push(t[n][s][o]);n>0&&(r+=t[n-1].length,i.holes.push(r))}return i}},6576:(t,e,i)=>{"use strict";var r=i(9394),n=i(8452);t.exports=function(){var t=r();return n(Object,{is:t},{is:function(){return Object.is!==t}}),t}},6578:t=>{"use strict";t.exports=["Float16Array","Float32Array","Float64Array","Int8Array","Int16Array","Int32Array","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","BigInt64Array","BigUint64Array"]},6585:t=>{var e=1e3,i=60*e,r=60*i,n=24*r,s=7*n;function o(t,e,i,r){var n=e>=1.5*i;return Math.round(t/i)+" "+r+(n?"s":"")}t.exports=function(t,a){a=a||{};var h,l,u=typeof t;if("string"===u&&t.length>0)return function(t){if(!((t=String(t)).length>100)){var o=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(t);if(o){var a=parseFloat(o[1]);switch((o[2]||"ms").toLowerCase()){case"years":case"year":case"yrs":case"yr":case"y":return 315576e5*a;case"weeks":case"week":case"w":return a*s;case"days":case"day":case"d":return a*n;case"hours":case"hour":case"hrs":case"hr":case"h":return a*r;case"minutes":case"minute":case"mins":case"min":case"m":return a*i;case"seconds":case"second":case"secs":case"sec":case"s":return a*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return a;default:return}}}}(t);if("number"===u&&isFinite(t))return a.long?(h=t,(l=Math.abs(h))>=n?o(h,l,n,"day"):l>=r?o(h,l,r,"hour"):l>=i?o(h,l,i,"minute"):l>=e?o(h,l,e,"second"):h+" ms"):function(t){var s=Math.abs(t);return s>=n?Math.round(t/n)+"d":s>=r?Math.round(t/r)+"h":s>=i?Math.round(t/i)+"m":s>=e?Math.round(t/e)+"s":t+"ms"}(t);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(t))}},6642:(t,e,i)=>{"use strict";var r=i(3003);t.exports=function(){return Number.isNaN&&Number.isNaN(NaN)&&!Number.isNaN("a")?Number.isNaN:r}},6661:(t,e,i)=>{"use strict";var r=i(7011),n=r.assert,s=r.parseBytes,o=r.cachedProperty;function a(t,e){this.eddsa=t,this._secret=s(e.secret),t.isPoint(e.pub)?this._pub=e.pub:this._pubBytes=s(e.pub)}a.fromPublic=function(t,e){return e instanceof a?e:new a(t,{pub:e})},a.fromSecret=function(t,e){return e instanceof a?e:new a(t,{secret:e})},a.prototype.secret=function(){return this._secret},o(a,"pubBytes",function(){return this.eddsa.encodePoint(this.pub())}),o(a,"pub",function(){return this._pubBytes?this.eddsa.decodePoint(this._pubBytes):this.eddsa.g.mul(this.priv())}),o(a,"privBytes",function(){var t=this.eddsa,e=this.hash(),i=t.encodingLength-1,r=e.slice(0,t.encodingLength);return r[0]&=248,r[i]&=127,r[i]|=64,r}),o(a,"priv",function(){return this.eddsa.decodeInt(this.privBytes())}),o(a,"hash",function(){return this.eddsa.hash().update(this.secret()).digest()}),o(a,"messagePrefix",function(){return this.hash().slice(this.eddsa.encodingLength)}),a.prototype.sign=function(t){return n(this._secret,"KeyPair can only verify"),this.eddsa.sign(t,this)},a.prototype.verify=function(t,e){return this.eddsa.verify(t,e,this)},a.prototype.getSecret=function(t){return n(this._secret,"KeyPair is public only"),r.encode(this.secret(),t)},a.prototype.getPublic=function(t){return r.encode(this.pubBytes(),t)},t.exports=a},6665:(t,e,i)=>{"use strict";i.d(e,{b:()=>r,m:()=>n});const r={name:"round-pixels-bit",vertex:{header:"\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32> \n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}},n={name:"round-pixels-bit",vertex:{header:"   \n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {       \n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        "}}},6677:(t,e,i)=>{"use strict";var r=i(9404),n=i(7011),s=n.getNAF,o=n.getJSF,a=n.assert;function h(t,e){this.type=t,this.p=new r(e.p,16),this.red=e.prime?r.red(e.prime):r.mont(this.p),this.zero=new r(0).toRed(this.red),this.one=new r(1).toRed(this.red),this.two=new r(2).toRed(this.red),this.n=e.n&&new r(e.n,16),this.g=e.g&&this.pointFromJSON(e.g,e.gRed),this._wnafT1=new Array(4),this._wnafT2=new Array(4),this._wnafT3=new Array(4),this._wnafT4=new Array(4),this._bitLength=this.n?this.n.bitLength():0;var i=this.n&&this.p.div(this.n);!i||i.cmpn(100)>0?this.redN=null:(this._maxwellTrick=!0,this.redN=this.n.toRed(this.red))}function l(t,e){this.curve=t,this.type=e,this.precomputed=null}t.exports=h,h.prototype.point=function(){throw new Error("Not implemented")},h.prototype.validate=function(){throw new Error("Not implemented")},h.prototype._fixedNafMul=function(t,e){a(t.precomputed);var i=t._getDoubles(),r=s(e,1,this._bitLength),n=(1<<i.step+1)-(i.step%2==0?2:1);n/=3;var o,h,l=[];for(o=0;o<r.length;o+=i.step){h=0;for(var u=o+i.step-1;u>=o;u--)h=(h<<1)+r[u];l.push(h)}for(var c=this.jpoint(null,null,null),d=this.jpoint(null,null,null),f=n;f>0;f--){for(o=0;o<l.length;o++)(h=l[o])===f?d=d.mixedAdd(i.points[o]):h===-f&&(d=d.mixedAdd(i.points[o].neg()));c=c.add(d)}return c.toP()},h.prototype._wnafMul=function(t,e){var i=4,r=t._getNAFPoints(i);i=r.wnd;for(var n=r.points,o=s(e,i,this._bitLength),h=this.jpoint(null,null,null),l=o.length-1;l>=0;l--){for(var u=0;l>=0&&0===o[l];l--)u++;if(l>=0&&u++,h=h.dblp(u),l<0)break;var c=o[l];a(0!==c),h="affine"===t.type?c>0?h.mixedAdd(n[c-1>>1]):h.mixedAdd(n[-c-1>>1].neg()):c>0?h.add(n[c-1>>1]):h.add(n[-c-1>>1].neg())}return"affine"===t.type?h.toP():h},h.prototype._wnafMulAdd=function(t,e,i,r,n){var a,h,l,u=this._wnafT1,c=this._wnafT2,d=this._wnafT3,f=0;for(a=0;a<r;a++){var p=(l=e[a])._getNAFPoints(t);u[a]=p.wnd,c[a]=p.points}for(a=r-1;a>=1;a-=2){var m=a-1,g=a;if(1===u[m]&&1===u[g]){var v=[e[m],null,null,e[g]];0===e[m].y.cmp(e[g].y)?(v[1]=e[m].add(e[g]),v[2]=e[m].toJ().mixedAdd(e[g].neg())):0===e[m].y.cmp(e[g].y.redNeg())?(v[1]=e[m].toJ().mixedAdd(e[g]),v[2]=e[m].add(e[g].neg())):(v[1]=e[m].toJ().mixedAdd(e[g]),v[2]=e[m].toJ().mixedAdd(e[g].neg()));var y=[-3,-1,-5,-7,0,7,5,1,3],b=o(i[m],i[g]);for(f=Math.max(b[0].length,f),d[m]=new Array(f),d[g]=new Array(f),h=0;h<f;h++){var _=0|b[0][h],x=0|b[1][h];d[m][h]=y[3*(_+1)+(x+1)],d[g][h]=0,c[m]=v}}else d[m]=s(i[m],u[m],this._bitLength),d[g]=s(i[g],u[g],this._bitLength),f=Math.max(d[m].length,f),f=Math.max(d[g].length,f)}var w=this.jpoint(null,null,null),M=this._wnafT4;for(a=f;a>=0;a--){for(var S=0;a>=0;){var A=!0;for(h=0;h<r;h++)M[h]=0|d[h][a],0!==M[h]&&(A=!1);if(!A)break;S++,a--}if(a>=0&&S++,w=w.dblp(S),a<0)break;for(h=0;h<r;h++){var E=M[h];0!==E&&(E>0?l=c[h][E-1>>1]:E<0&&(l=c[h][-E-1>>1].neg()),w="affine"===l.type?w.mixedAdd(l):w.add(l))}}for(a=0;a<r;a++)c[a]=null;return n?w:w.toP()},h.BasePoint=l,l.prototype.eq=function(){throw new Error("Not implemented")},l.prototype.validate=function(){return this.curve.validate(this)},h.prototype.decodePoint=function(t,e){t=n.toArray(t,e);var i=this.p.byteLength();if((4===t[0]||6===t[0]||7===t[0])&&t.length-1==2*i)return 6===t[0]?a(t[t.length-1]%2==0):7===t[0]&&a(t[t.length-1]%2==1),this.point(t.slice(1,1+i),t.slice(1+i,1+2*i));if((2===t[0]||3===t[0])&&t.length-1===i)return this.pointFromX(t.slice(1,1+i),3===t[0]);throw new Error("Unknown point format")},l.prototype.encodeCompressed=function(t){return this.encode(t,!0)},l.prototype._encode=function(t){var e=this.curve.p.byteLength(),i=this.getX().toArray("be",e);return t?[this.getY().isEven()?2:3].concat(i):[4].concat(i,this.getY().toArray("be",e))},l.prototype.encode=function(t,e){return n.encode(this._encode(e),t)},l.prototype.precompute=function(t){if(this.precomputed)return this;var e={doubles:null,naf:null,beta:null};return e.naf=this._getNAFPoints(8),e.doubles=this._getDoubles(4,t),e.beta=this._getBeta(),this.precomputed=e,this},l.prototype._hasDoubles=function(t){if(!this.precomputed)return!1;var e=this.precomputed.doubles;return!!e&&e.points.length>=Math.ceil((t.bitLength()+1)/e.step)},l.prototype._getDoubles=function(t,e){if(this.precomputed&&this.precomputed.doubles)return this.precomputed.doubles;for(var i=[this],r=this,n=0;n<e;n+=t){for(var s=0;s<t;s++)r=r.dbl();i.push(r)}return{step:t,points:i}},l.prototype._getNAFPoints=function(t){if(this.precomputed&&this.precomputed.naf)return this.precomputed.naf;for(var e=[this],i=(1<<t)-1,r=1===i?null:this.dbl(),n=1;n<i;n++)e[n]=e[n-1].add(r);return{wnd:t,points:e}},l.prototype._getBeta=function(){return null},l.prototype.dblp=function(t){for(var e=this,i=0;i<t;i++)e=e.dbl();return e}},6698:t=>{"function"==typeof Object.create?t.exports=function(t,e){e&&(t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}))}:t.exports=function(t,e){if(e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}}},6708:(t,e,i)=>{"use strict";var r,n=i(5606);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(undefined),i=i.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=A,A.WritableState=S;var o,a={deprecate:i(4643)},h=i(345),l=i(8287).Buffer,u=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},c=i(5896),d=i(5291).getHighWaterMark,f=i(6048).F,p=f.ERR_INVALID_ARG_TYPE,m=f.ERR_METHOD_NOT_IMPLEMENTED,g=f.ERR_MULTIPLE_CALLBACK,v=f.ERR_STREAM_CANNOT_PIPE,y=f.ERR_STREAM_DESTROYED,b=f.ERR_STREAM_NULL_VALUES,_=f.ERR_STREAM_WRITE_AFTER_END,x=f.ERR_UNKNOWN_ENCODING,w=c.errorOrDestroy;function M(){}function S(t,e,o){r=r||i(5382),t=t||{},"boolean"!=typeof o&&(o=e instanceof r),this.objectMode=!!t.objectMode,o&&(this.objectMode=this.objectMode||!!t.writableObjectMode),this.highWaterMark=d(this,t,"writableHighWaterMark",o),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var a=!1===t.decodeStrings;this.decodeStrings=!a,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,s=i.writecb;if("function"!=typeof s)throw new g;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,s){--e.pendingcb,i?(n.nextTick(s,r),n.nextTick(I,t,e),t._writableState.errorEmitted=!0,w(t,r)):(s(r),t._writableState.errorEmitted=!0,w(t,r),I(t,e))}(t,i,r,e,s);else{var o=P(i)||t.destroyed;o||i.corked||i.bufferProcessing||!i.bufferedRequest||R(t,i),r?n.nextTick(T,t,i,o,s):T(t,i,o,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.emitClose=!1!==t.emitClose,this.autoDestroy=!!t.autoDestroy,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function A(t){var e=this instanceof(r=r||i(5382));if(!e&&!o.call(A,this))return new A(t);this._writableState=new S(t,this,e),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),h.call(this)}function E(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,e.destroyed?e.onwrite(new y("write")):i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function T(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),I(t,e)}function R(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=i;for(var a=0,h=!0;i;)n[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;n.allBuffers=h,E(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,u=i.encoding,c=i.callback;if(E(t,e,!1,e.objectMode?1:l.length,l,u,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function P(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function C(t,e){t._final(function(i){e.pendingcb--,i&&w(t,i),e.prefinished=!0,t.emit("prefinish"),I(t,e)})}function I(t,e){var i=P(e);if(i&&(function(t,e){e.prefinished||e.finalCalled||("function"!=typeof t._final||e.destroyed?(e.prefinished=!0,t.emit("prefinish")):(e.pendingcb++,e.finalCalled=!0,n.nextTick(C,t,e)))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"),e.autoDestroy))){var r=t._readableState;(!r||r.autoDestroy&&r.endEmitted)&&t.destroy()}return i}i(6698)(A,h),S.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(S.prototype,"buffer",{get:a.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(o=Function.prototype[Symbol.hasInstance],Object.defineProperty(A,Symbol.hasInstance,{value:function(t){return!!o.call(this,t)||this===A&&t&&t._writableState instanceof S}})):o=function(t){return t instanceof this},A.prototype.pipe=function(){w(this,new v)},A.prototype.write=function(t,e,i){var r,s=this._writableState,o=!1,a=!s.objectMode&&(r=t,l.isBuffer(r)||r instanceof u);return a&&!l.isBuffer(t)&&(t=function(t){return l.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=M),s.ending?function(t,e){var i=new _;w(t,i),n.nextTick(e,i)}(this,i):(a||function(t,e,i,r){var s;return null===i?s=new b:"string"==typeof i||e.objectMode||(s=new p("chunk",["string","Buffer"],i)),!s||(w(t,s),n.nextTick(r,s),!1)}(this,s,t,i))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=l.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var u=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},u?u.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else E(t,e,!1,a,r,n,s);return h}(this,s,a,t,e,i)),o},A.prototype.cork=function(){this._writableState.corked++},A.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||R(this,t))},A.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new x(t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(A.prototype,"writableBuffer",{enumerable:!1,get:function(){return this._writableState&&this._writableState.getBuffer()}}),Object.defineProperty(A.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),A.prototype._write=function(t,e,i){i(new m("_write()"))},A.prototype._writev=null,A.prototype.end=function(t,e,i){var r=this._writableState;return"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,i){e.ending=!0,I(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,r,i),this},Object.defineProperty(A.prototype,"writableLength",{enumerable:!1,get:function(){return this._writableState.length}}),Object.defineProperty(A.prototype,"destroyed",{enumerable:!1,get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),A.prototype.destroy=c.destroy,A.prototype._undestroy=c.undestroy,A.prototype._destroy=function(t,e){e(t)}},6710:(t,e,i)=>{"use strict";var r=i(6698),n=i(4107),s=i(392),o=i(2861).Buffer,a=new Array(64);function h(){this.init(),this._w=a,s.call(this,64,56)}r(h,n),h.prototype.init=function(){return this._a=3238371032,this._b=914150663,this._c=812702999,this._d=4144912697,this._e=4290775857,this._f=1750603025,this._g=1694076839,this._h=3204075428,this},h.prototype._hash=function(){var t=o.allocUnsafe(28);return t.writeInt32BE(this._a,0),t.writeInt32BE(this._b,4),t.writeInt32BE(this._c,8),t.writeInt32BE(this._d,12),t.writeInt32BE(this._e,16),t.writeInt32BE(this._f,20),t.writeInt32BE(this._g,24),t},t.exports=h},6729:(t,e,i)=>{"use strict";var r=e;r.version=i(1636).rE,r.utils=i(7011),r.rand=i(5037),r.curve=i(894),r.curves=i(480),r.ec=i(7447),r.eddsa=i(8650)},6737:(t,e,i)=>{(e=t.exports=i(206)).Stream=e,e.Readable=e,e.Writable=i(7314),e.Duplex=i(6248),e.Transform=i(1816),e.PassThrough=i(5242)},6743:(t,e,i)=>{"use strict";var r=i(9353);t.exports=Function.prototype.bind||r},6763:(t,e,i)=>{var r=i(537),n=i(4148);function s(){return(new Date).getTime()}var o,a=Array.prototype.slice,h={};o=void 0!==i.g&&i.g.console?i.g.console:"undefined"!=typeof window&&window.console?window.console:{};for(var l=[[function(){},"log"],[function(){o.log.apply(o,arguments)},"info"],[function(){o.log.apply(o,arguments)},"warn"],[function(){o.warn.apply(o,arguments)},"error"],[function(t){h[t]=s()},"time"],[function(t){var e=h[t];if(!e)throw new Error("No such label: "+t);delete h[t];var i=s()-e;o.log(t+": "+i+"ms")},"timeEnd"],[function(){var t=new Error;t.name="Trace",t.message=r.format.apply(null,arguments),o.error(t.stack)},"trace"],[function(t){o.log(r.inspect(t)+"\n")},"dir"],[function(t){if(!t){var e=a.call(arguments,1);n.ok(!1,r.format.apply(null,e))}},"assert"]],u=0;u<l.length;u++){var c=l[u],d=c[0],f=c[1];o[f]||(o[f]=d)}t.exports=o},6784:(t,e,i)=>{"use strict";var r=i(7426),n=i(6166),s=r.rotl32,o=r.sum32,a=r.sum32_3,h=r.sum32_4,l=n.BlockHash;function u(){if(!(this instanceof u))return new u;l.call(this),this.h=[1732584193,4023233417,2562383102,271733878,3285377520],this.endian="little"}function c(t,e,i,r){return t<=15?e^i^r:t<=31?e&i|~e&r:t<=47?(e|~i)^r:t<=63?e&r|i&~r:e^(i|~r)}function d(t){return t<=15?0:t<=31?1518500249:t<=47?1859775393:t<=63?2400959708:2840853838}function f(t){return t<=15?1352829926:t<=31?1548603684:t<=47?1836072691:t<=63?2053994217:0}r.inherits(u,l),e.ripemd160=u,u.blockSize=512,u.outSize=160,u.hmacStrength=192,u.padLength=64,u.prototype._update=function(t,e){for(var i=this.h[0],r=this.h[1],n=this.h[2],l=this.h[3],u=this.h[4],y=i,b=r,_=n,x=l,w=u,M=0;M<80;M++){var S=o(s(h(i,c(M,r,n,l),t[p[M]+e],d(M)),g[M]),u);i=u,u=l,l=s(n,10),n=r,r=S,S=o(s(h(y,c(79-M,b,_,x),t[m[M]+e],f(M)),v[M]),w),y=w,w=x,x=s(_,10),_=b,b=S}S=a(this.h[1],n,x),this.h[1]=a(this.h[2],l,w),this.h[2]=a(this.h[3],u,y),this.h[3]=a(this.h[4],i,b),this.h[4]=a(this.h[0],r,_),this.h[0]=S},u.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"little"):r.split32(this.h,"little")};var p=[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8,3,10,14,4,9,15,8,1,2,7,0,6,13,11,5,12,1,9,11,10,0,8,12,4,13,3,7,15,14,5,6,2,4,0,5,9,7,12,2,10,14,1,3,8,11,6,15,13],m=[5,14,7,0,9,2,11,4,13,6,15,8,1,10,3,12,6,11,3,7,0,13,5,10,14,15,8,12,4,9,1,2,15,5,1,3,7,14,6,9,11,8,12,2,10,0,4,13,8,6,4,1,3,11,15,0,5,12,2,13,9,7,10,14,12,15,10,4,1,5,8,7,6,2,13,14,0,3,9,11],g=[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8,7,6,8,13,11,9,7,15,7,12,15,9,11,7,13,12,11,13,6,7,14,9,13,15,14,8,13,6,5,12,7,5,11,12,14,15,14,15,9,8,9,14,5,6,8,6,5,12,9,15,5,11,6,8,13,12,5,12,13,14,11,8,5,6],v=[8,9,9,11,13,15,15,5,7,7,8,11,14,14,12,6,9,13,15,7,12,8,9,11,7,7,12,7,6,15,13,11,9,7,15,11,8,6,6,14,12,13,5,14,13,13,7,5,15,5,8,11,14,14,6,14,6,9,12,9,12,5,15,8,8,5,12,9,12,5,14,6,8,13,6,5,15,13,11,11]},6832:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var r=i(6984),n=i(8446),s=i(5353),o=i(3149);const a=function(t,e,i){if(!(0,o.A)(i))return!1;var a=typeof e;return!!("number"==a?(0,n.A)(i)&&(0,s.A)(e,i.length):"string"==a&&e in i)&&(0,r.A)(i[e],t)}},6840:(t,e,i)=>{"use strict";i.d(e,{F:()=>r,a:()=>n});const r={name:"color-bit",vertex:{header:"\n            @in aColor: vec4<f32>;\n        ",main:"\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        "}},n={name:"color-bit",vertex:{header:"\n            in vec4 aColor;\n        ",main:"\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        "}}},6843:(t,e,i)=>{var r=i(8287).Buffer,n=i(295);function s(t){return t._prev=t._cipher.encryptBlock(t._prev),t._prev}e.encrypt=function(t,e){for(;t._cache.length<e.length;)t._cache=r.concat([t._cache,s(t)]);var i=t._cache.slice(0,e.length);return t._cache=t._cache.slice(e.length),n(e,i)}},6844:(t,e,i)=>{"use strict";i.d(e,{k:()=>h});var r=i(2812),n=i(4492),s=i(2048),o=i(4670),a=i(4985);class h extends a.l{constructor(t=n.g.EMPTY){t instanceof n.g&&(t={texture:t});const{texture:e=n.g.EMPTY,anchor:i,roundPixels:s,width:o,height:a,...h}=t;super({label:"Sprite",...h}),this.renderPipeId="sprite",this.batched=!0,this._visualBounds={minX:0,maxX:1,minY:0,maxY:0},this._anchor=new r.o({_onUpdate:()=>{this.onViewUpdate()}}),i?this.anchor=i:e.defaultAnchor&&(this.anchor=e.defaultAnchor),this.texture=e,this.allowChildren=!1,this.roundPixels=s??!1,void 0!==o&&(this.width=o),void 0!==a&&(this.height=a)}static from(t,e=!1){return t instanceof n.g?new h(t):new h(n.g.from(t,e))}set texture(t){t||(t=n.g.EMPTY);const e=this._texture;e!==t&&(e&&e.dynamic&&e.off("update",this.onViewUpdate,this),t.dynamic&&t.on("update",this.onViewUpdate,this),this._texture=t,this._width&&this._setWidth(this._width,this._texture.orig.width),this._height&&this._setHeight(this._height,this._texture.orig.height),this.onViewUpdate())}get texture(){return this._texture}get visualBounds(){return(0,s.y)(this._visualBounds,this._anchor,this._texture),this._visualBounds}get sourceBounds(){return(0,o.t6)("8.6.1","Sprite.sourceBounds is deprecated, use visualBounds instead."),this.visualBounds}updateBounds(){const t=this._anchor,e=this._texture,i=this._bounds,{width:r,height:n}=e.orig;i.minX=-t._x*r,i.maxX=i.minX+r,i.minY=-t._y*n,i.maxY=i.minY+n}destroy(t=!1){if(super.destroy(t),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._texture.destroy(e)}this._texture=null,this._visualBounds=null,this._bounds=null,this._anchor=null}get anchor(){return this._anchor}set anchor(t){"number"==typeof t?this._anchor.set(t):this._anchor.copyFrom(t)}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this._setWidth(t,this._texture.orig.width),this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this._setHeight(t,this._texture.orig.height),this._height=t}getSize(t){return t||(t={}),t.width=Math.abs(this.scale.x)*this._texture.orig.width,t.height=Math.abs(this.scale.y)*this._texture.orig.height,t}setSize(t,e){"object"==typeof t?(e=t.height??t.width,t=t.width):e??(e=t),void 0!==t&&this._setWidth(t,this._texture.orig.width),void 0!==e&&this._setHeight(e,this._texture.orig.height)}}},6858:(t,e,i)=>{"use strict";let r;async function n(){return r??(r=(async()=>{const t=document.createElement("canvas").getContext("webgl");if(!t)return"premultiply-alpha-on-upload";const e=await new Promise(t=>{const e=document.createElement("video");e.onloadeddata=()=>t(e),e.onerror=()=>t(null),e.autoplay=!1,e.crossOrigin="anonymous",e.preload="auto",e.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",e.load()});if(!e)return"premultiply-alpha-on-upload";const i=t.createTexture();t.bindTexture(t.TEXTURE_2D,i);const r=t.createFramebuffer();t.bindFramebuffer(t.FRAMEBUFFER,r),t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,i,0),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,t.NONE),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,t.RGBA,t.UNSIGNED_BYTE,e);const n=new Uint8Array(4);return t.readPixels(0,0,1,1,t.RGBA,t.UNSIGNED_BYTE,n),t.deleteFramebuffer(r),t.deleteTexture(i),t.getExtension("WEBGL_lose_context")?.loseContext(),n[0]<=n[3]?"premultiplied-alpha":"premultiply-alpha-on-upload"})()),r}i.d(e,{C:()=>n})},6880:function(t){t.exports=function(t){var e={};function i(r){if(e[r])return e[r].exports;var n=e[r]={i:r,l:!1,exports:{}};return t[r].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=t,i.c=e,i.d=function(t,e,r){i.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},i.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},i.t=function(t,e){if(1&e&&(t=i(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(i.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)i.d(r,n,function(e){return t[e]}.bind(null,n));return r},i.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return i.d(e,"a",e),e},i.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},i.p="",i(i.s=90)}({17:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r=i(18),n=function(){function t(){}return t.getFirstMatch=function(t,e){var i=e.match(t);return i&&i.length>0&&i[1]||""},t.getSecondMatch=function(t,e){var i=e.match(t);return i&&i.length>1&&i[2]||""},t.matchAndReturnConst=function(t,e,i){if(t.test(e))return i},t.getWindowsVersionName=function(t){switch(t){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}},t.getMacOSVersionName=function(t){var e=t.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),10===e[0])switch(e[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}},t.getAndroidVersionName=function(t){var e=t.split(".").splice(0,2).map(function(t){return parseInt(t,10)||0});if(e.push(0),!(1===e[0]&&e[1]<5))return 1===e[0]&&e[1]<6?"Cupcake":1===e[0]&&e[1]>=6?"Donut":2===e[0]&&e[1]<2?"Eclair":2===e[0]&&2===e[1]?"Froyo":2===e[0]&&e[1]>2?"Gingerbread":3===e[0]?"Honeycomb":4===e[0]&&e[1]<1?"Ice Cream Sandwich":4===e[0]&&e[1]<4?"Jelly Bean":4===e[0]&&e[1]>=4?"KitKat":5===e[0]?"Lollipop":6===e[0]?"Marshmallow":7===e[0]?"Nougat":8===e[0]?"Oreo":9===e[0]?"Pie":void 0},t.getVersionPrecision=function(t){return t.split(".").length},t.compareVersions=function(e,i,r){void 0===r&&(r=!1);var n=t.getVersionPrecision(e),s=t.getVersionPrecision(i),o=Math.max(n,s),a=0,h=t.map([e,i],function(e){var i=o-t.getVersionPrecision(e),r=e+new Array(i+1).join(".0");return t.map(r.split("."),function(t){return new Array(20-t.length).join("0")+t}).reverse()});for(r&&(a=o-Math.min(n,s)),o-=1;o>=a;){if(h[0][o]>h[1][o])return 1;if(h[0][o]===h[1][o]){if(o===a)return 0;o-=1}else if(h[0][o]<h[1][o])return-1}},t.map=function(t,e){var i,r=[];if(Array.prototype.map)return Array.prototype.map.call(t,e);for(i=0;i<t.length;i+=1)r.push(e(t[i]));return r},t.find=function(t,e){var i,r;if(Array.prototype.find)return Array.prototype.find.call(t,e);for(i=0,r=t.length;i<r;i+=1){var n=t[i];if(e(n,i))return n}},t.assign=function(t){for(var e,i,r=t,n=arguments.length,s=new Array(n>1?n-1:0),o=1;o<n;o++)s[o-1]=arguments[o];if(Object.assign)return Object.assign.apply(Object,[t].concat(s));var a=function(){var t=s[e];"object"==typeof t&&null!==t&&Object.keys(t).forEach(function(e){r[e]=t[e]})};for(e=0,i=s.length;e<i;e+=1)a();return t},t.getBrowserAlias=function(t){return r.BROWSER_ALIASES_MAP[t]},t.getBrowserTypeByAlias=function(t){return r.BROWSER_MAP[t]||""},t}();e.default=n,t.exports=e.default},18:function(t,e,i){"use strict";e.__esModule=!0,e.ENGINE_MAP=e.OS_MAP=e.PLATFORMS_MAP=e.BROWSER_MAP=e.BROWSER_ALIASES_MAP=void 0,e.BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},e.BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},e.PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},e.OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},e.ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"}},90:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(91))&&r.__esModule?r:{default:r},s=i(18);function o(t,e){for(var i=0;i<e.length;i++){var r=e[i];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var a=function(){function t(){}var e,i;return t.getParser=function(t,e){if(void 0===e&&(e=!1),"string"!=typeof t)throw new Error("UserAgent should be a string");return new n.default(t,e)},t.parse=function(t){return new n.default(t).getResult()},e=t,i=[{key:"BROWSER_MAP",get:function(){return s.BROWSER_MAP}},{key:"ENGINE_MAP",get:function(){return s.ENGINE_MAP}},{key:"OS_MAP",get:function(){return s.OS_MAP}},{key:"PLATFORMS_MAP",get:function(){return s.PLATFORMS_MAP}}],null&&o(e.prototype,null),i&&o(e,i),t}();e.default=a,t.exports=e.default},91:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r=h(i(92)),n=h(i(93)),s=h(i(94)),o=h(i(95)),a=h(i(17));function h(t){return t&&t.__esModule?t:{default:t}}var l=function(){function t(t,e){if(void 0===e&&(e=!1),null==t||""===t)throw new Error("UserAgent parameter can't be empty");this._ua=t,this.parsedResult={},!0!==e&&this.parse()}var e=t.prototype;return e.getUA=function(){return this._ua},e.test=function(t){return t.test(this._ua)},e.parseBrowser=function(){var t=this;this.parsedResult.browser={};var e=a.default.find(r.default,function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some(function(e){return t.test(e)});throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser},e.getBrowser=function(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()},e.getBrowserName=function(t){return t?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""},e.getBrowserVersion=function(){return this.getBrowser().version},e.getOS=function(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()},e.parseOS=function(){var t=this;this.parsedResult.os={};var e=a.default.find(n.default,function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some(function(e){return t.test(e)});throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os},e.getOSName=function(t){var e=this.getOS().name;return t?String(e).toLowerCase()||"":e||""},e.getOSVersion=function(){return this.getOS().version},e.getPlatform=function(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()},e.getPlatformType=function(t){void 0===t&&(t=!1);var e=this.getPlatform().type;return t?String(e).toLowerCase()||"":e||""},e.parsePlatform=function(){var t=this;this.parsedResult.platform={};var e=a.default.find(s.default,function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some(function(e){return t.test(e)});throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform},e.getEngine=function(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()},e.getEngineName=function(t){return t?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""},e.parseEngine=function(){var t=this;this.parsedResult.engine={};var e=a.default.find(o.default,function(e){if("function"==typeof e.test)return e.test(t);if(e.test instanceof Array)return e.test.some(function(e){return t.test(e)});throw new Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine},e.parse=function(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this},e.getResult=function(){return a.default.assign({},this.parsedResult)},e.satisfies=function(t){var e=this,i={},r=0,n={},s=0;if(Object.keys(t).forEach(function(e){var o=t[e];"string"==typeof o?(n[e]=o,s+=1):"object"==typeof o&&(i[e]=o,r+=1)}),r>0){var o=Object.keys(i),h=a.default.find(o,function(t){return e.isOS(t)});if(h){var l=this.satisfies(i[h]);if(void 0!==l)return l}var u=a.default.find(o,function(t){return e.isPlatform(t)});if(u){var c=this.satisfies(i[u]);if(void 0!==c)return c}}if(s>0){var d=Object.keys(n),f=a.default.find(d,function(t){return e.isBrowser(t,!0)});if(void 0!==f)return this.compareVersion(n[f])}},e.isBrowser=function(t,e){void 0===e&&(e=!1);var i=this.getBrowserName().toLowerCase(),r=t.toLowerCase(),n=a.default.getBrowserTypeByAlias(r);return e&&n&&(r=n.toLowerCase()),r===i},e.compareVersion=function(t){var e=[0],i=t,r=!1,n=this.getBrowserVersion();if("string"==typeof n)return">"===t[0]||"<"===t[0]?(i=t.substr(1),"="===t[1]?(r=!0,i=t.substr(2)):e=[],">"===t[0]?e.push(1):e.push(-1)):"="===t[0]?i=t.substr(1):"~"===t[0]&&(r=!0,i=t.substr(1)),e.indexOf(a.default.compareVersions(n,i,r))>-1},e.isOS=function(t){return this.getOSName(!0)===String(t).toLowerCase()},e.isPlatform=function(t){return this.getPlatformType(!0)===String(t).toLowerCase()},e.isEngine=function(t){return this.getEngineName(!0)===String(t).toLowerCase()},e.is=function(t,e){return void 0===e&&(e=!1),this.isBrowser(t,e)||this.isOS(t)||this.isPlatform(t)},e.some=function(t){var e=this;return void 0===t&&(t=[]),t.some(function(t){return e.is(t)})},t}();e.default=l,t.exports=e.default},92:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=/version\/(\d+(\.?_?\d+)+)/i,o=[{test:[/googlebot/i],describe:function(t){var e={name:"Googlebot"},i=n.default.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/opera/i],describe:function(t){var e={name:"Opera"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opr\/|opios/i],describe:function(t){var e={name:"Opera"},i=n.default.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/SamsungBrowser/i],describe:function(t){var e={name:"Samsung Internet for Android"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Whale/i],describe:function(t){var e={name:"NAVER Whale Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MZBrowser/i],describe:function(t){var e={name:"MZ Browser"},i=n.default.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/focus/i],describe:function(t){var e={name:"Focus"},i=n.default.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/swing/i],describe:function(t){var e={name:"Swing"},i=n.default.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/coast/i],describe:function(t){var e={name:"Opera Coast"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe:function(t){var e={name:"Opera Touch"},i=n.default.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/yabrowser/i],describe:function(t){var e={name:"Yandex Browser"},i=n.default.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/ucbrowser/i],describe:function(t){var e={name:"UC Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/Maxthon|mxios/i],describe:function(t){var e={name:"Maxthon"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/epiphany/i],describe:function(t){var e={name:"Epiphany"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/puffin/i],describe:function(t){var e={name:"Puffin"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sleipnir/i],describe:function(t){var e={name:"Sleipnir"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/k-meleon/i],describe:function(t){var e={name:"K-Meleon"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/micromessenger/i],describe:function(t){var e={name:"WeChat"},i=n.default.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qqbrowser/i],describe:function(t){var e={name:/qqbrowserlite/i.test(t)?"QQ Browser Lite":"QQ Browser"},i=n.default.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/msie|trident/i],describe:function(t){var e={name:"Internet Explorer"},i=n.default.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/\sedg\//i],describe:function(t){var e={name:"Microsoft Edge"},i=n.default.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/edg([ea]|ios)/i],describe:function(t){var e={name:"Microsoft Edge"},i=n.default.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/vivaldi/i],describe:function(t){var e={name:"Vivaldi"},i=n.default.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/seamonkey/i],describe:function(t){var e={name:"SeaMonkey"},i=n.default.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/sailfish/i],describe:function(t){var e={name:"Sailfish"},i=n.default.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,t);return i&&(e.version=i),e}},{test:[/silk/i],describe:function(t){var e={name:"Amazon Silk"},i=n.default.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/phantom/i],describe:function(t){var e={name:"PhantomJS"},i=n.default.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/slimerjs/i],describe:function(t){var e={name:"SlimerJS"},i=n.default.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e={name:"BlackBerry"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e={name:"WebOS Browser"},i=n.default.getFirstMatch(s,t)||n.default.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/bada/i],describe:function(t){var e={name:"Bada"},i=n.default.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/tizen/i],describe:function(t){var e={name:"Tizen"},i=n.default.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/qupzilla/i],describe:function(t){var e={name:"QupZilla"},i=n.default.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/firefox|iceweasel|fxios/i],describe:function(t){var e={name:"Firefox"},i=n.default.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/electron/i],describe:function(t){var e={name:"Electron"},i=n.default.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/MiuiBrowser/i],describe:function(t){var e={name:"Miui"},i=n.default.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/chromium/i],describe:function(t){var e={name:"Chromium"},i=n.default.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,t)||n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/chrome|crios|crmo/i],describe:function(t){var e={name:"Chrome"},i=n.default.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/GSA/i],describe:function(t){var e={name:"Google Search"},i=n.default.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e={name:"Android Browser"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/playstation 4/i],describe:function(t){var e={name:"PlayStation 4"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/safari|applewebkit/i],describe:function(t){var e={name:"Safari"},i=n.default.getFirstMatch(s,t);return i&&(e.version=i),e}},{test:[/.*/i],describe:function(t){var e=-1!==t.search("\\(")?/^(.*)\/(.*)[ \t]\((.*)/:/^(.*)\/(.*) /;return{name:n.default.getFirstMatch(e,t),version:n.default.getSecondMatch(e,t)}}}];e.default=o,t.exports=e.default},93:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:[/Roku\/DVP/],describe:function(t){var e=n.default.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,t);return{name:s.OS_MAP.Roku,version:e}}},{test:[/windows phone/i],describe:function(t){var e=n.default.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.WindowsPhone,version:e}}},{test:[/windows /i],describe:function(t){var e=n.default.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,t),i=n.default.getWindowsVersionName(e);return{name:s.OS_MAP.Windows,version:e,versionName:i}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(t){var e={name:s.OS_MAP.iOS},i=n.default.getSecondMatch(/(Version\/)(\d[\d.]+)/,t);return i&&(e.version=i),e}},{test:[/macintosh/i],describe:function(t){var e=n.default.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,t).replace(/[_\s]/g,"."),i=n.default.getMacOSVersionName(e),r={name:s.OS_MAP.MacOS,version:e};return i&&(r.versionName=i),r}},{test:[/(ipod|iphone|ipad)/i],describe:function(t){var e=n.default.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,t).replace(/[_\s]/g,".");return{name:s.OS_MAP.iOS,version:e}}},{test:function(t){var e=!t.test(/like android/i),i=t.test(/android/i);return e&&i},describe:function(t){var e=n.default.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,t),i=n.default.getAndroidVersionName(e),r={name:s.OS_MAP.Android,version:e};return i&&(r.versionName=i),r}},{test:[/(web|hpw)[o0]s/i],describe:function(t){var e=n.default.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,t),i={name:s.OS_MAP.WebOS};return e&&e.length&&(i.version=e),i}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe:function(t){var e=n.default.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,t)||n.default.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,t)||n.default.getFirstMatch(/\bbb(\d+)/i,t);return{name:s.OS_MAP.BlackBerry,version:e}}},{test:[/bada/i],describe:function(t){var e=n.default.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Bada,version:e}}},{test:[/tizen/i],describe:function(t){var e=n.default.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.Tizen,version:e}}},{test:[/linux/i],describe:function(){return{name:s.OS_MAP.Linux}}},{test:[/CrOS/],describe:function(){return{name:s.OS_MAP.ChromeOS}}},{test:[/PlayStation 4/],describe:function(t){var e=n.default.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,t);return{name:s.OS_MAP.PlayStation4,version:e}}}];e.default=o,t.exports=e.default},94:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:[/googlebot/i],describe:function(){return{type:"bot",vendor:"Google"}}},{test:[/huawei/i],describe:function(t){var e=n.default.getFirstMatch(/(can-l01)/i,t)&&"Nova",i={type:s.PLATFORMS_MAP.mobile,vendor:"Huawei"};return e&&(i.model=e),i}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Nexus"}}},{test:[/ipad/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"}}},{test:[/kftt build/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"}}},{test:[/silk/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet,vendor:"Amazon"}}},{test:[/tablet(?! pc)/i],describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){var e=t.test(/ipod|iphone/i),i=t.test(/like (ipod|iphone)/i);return e&&!i},describe:function(t){var e=n.default.getFirstMatch(/(ipod|iphone)/i,t);return{type:s.PLATFORMS_MAP.mobile,vendor:"Apple",model:e}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Nexus"}}},{test:[/[^-]mobi/i],describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"blackberry"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"BlackBerry"}}},{test:function(t){return"bada"===t.getBrowserName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"windows phone"===t.getBrowserName()},describe:function(){return{type:s.PLATFORMS_MAP.mobile,vendor:"Microsoft"}}},{test:function(t){var e=Number(String(t.getOSVersion()).split(".")[0]);return"android"===t.getOSName(!0)&&e>=3},describe:function(){return{type:s.PLATFORMS_MAP.tablet}}},{test:function(t){return"android"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.mobile}}},{test:function(t){return"macos"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop,vendor:"Apple"}}},{test:function(t){return"windows"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"linux"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.desktop}}},{test:function(t){return"playstation 4"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}},{test:function(t){return"roku"===t.getOSName(!0)},describe:function(){return{type:s.PLATFORMS_MAP.tv}}}];e.default=o,t.exports=e.default},95:function(t,e,i){"use strict";e.__esModule=!0,e.default=void 0;var r,n=(r=i(17))&&r.__esModule?r:{default:r},s=i(18),o=[{test:function(t){return"microsoft edge"===t.getBrowserName(!0)},describe:function(t){if(/\sedg\//i.test(t))return{name:s.ENGINE_MAP.Blink};var e=n.default.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,t);return{name:s.ENGINE_MAP.EdgeHTML,version:e}}},{test:[/trident/i],describe:function(t){var e={name:s.ENGINE_MAP.Trident},i=n.default.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){return t.test(/presto/i)},describe:function(t){var e={name:s.ENGINE_MAP.Presto},i=n.default.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:function(t){var e=t.test(/gecko/i),i=t.test(/like gecko/i);return e&&!i},describe:function(t){var e={name:s.ENGINE_MAP.Gecko},i=n.default.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}},{test:[/(apple)?webkit\/537\.36/i],describe:function(){return{name:s.ENGINE_MAP.Blink}}},{test:[/(apple)?webkit/i],describe:function(t){var e={name:s.ENGINE_MAP.WebKit},i=n.default.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,t);return i&&(e.version=i),e}}];e.default=o,t.exports=e.default}})},6897:(t,e,i)=>{"use strict";var r=i(453),n=i(41),s=i(592)(),o=i(5795),a=i(9675),h=r("%Math.floor%");t.exports=function(t,e){if("function"!=typeof t)throw new a("`fn` is not a function");if("number"!=typeof e||e<0||e>4294967295||h(e)!==e)throw new a("`length` must be a positive 32-bit integer");var i=arguments.length>2&&!!arguments[2],r=!0,l=!0;if("length"in t&&o){var u=o(t,"length");u&&!u.configurable&&(r=!1),u&&!u.writable&&(l=!1)}return(r||l||!i)&&(s?n(t,"length",e,!0,!0):n(t,"length",e)),t}},6912:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t,e){for(var i=-1,r=e.length,n=t.length;++i<r;)t[n+i]=e[i];return t}},6954:(t,e,i)=>{"use strict";i.d(e,{G:()=>o});var r=i(9313),n=i(4676);const s=new r.u;class o{constructor(){this.packAsQuad=!1,this.batcherName="default",this.topology="triangle-list",this.applyTransform=!0,this.roundPixels=0,this._batcher=null,this._batch=null}get uvs(){return this.geometryData.uvs}get positions(){return this.geometryData.vertices}get indices(){return this.geometryData.indices}get blendMode(){return this.applyTransform?this.renderable.groupBlendMode:"normal"}get color(){const t=this.baseColor,e=t>>16|65280&t|(255&t)<<16,i=this.renderable;return i?(0,n.u)(e,i.groupColor)+(this.alpha*i.groupAlpha*255<<24):e+(255*this.alpha<<24)}get transform(){return this.renderable?.groupTransform||s}copyTo(t){t.indexOffset=this.indexOffset,t.indexSize=this.indexSize,t.attributeOffset=this.attributeOffset,t.attributeSize=this.attributeSize,t.baseColor=this.baseColor,t.alpha=this.alpha,t.texture=this.texture,t.geometryData=this.geometryData,t.topology=this.topology}reset(){this.applyTransform=!0,this.renderable=null,this.topology="triangle-list"}}},6970:(t,e,i)=>{"use strict";i.d(e,{T:()=>r});var r=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))(r||{})},6975:(t,e,i)=>{var r=i(2861).Buffer;function n(t,e,i){var n=t._cipher.encryptBlock(t._prev)[0]^e;return t._prev=r.concat([t._prev.slice(1),r.from([i?e:n])]),n}e.encrypt=function(t,e,i){for(var s=e.length,o=r.allocUnsafe(s),a=-1;++a<s;)o[a]=n(t,e[a],i);return o}},6983:(t,e,i)=>{"use strict";var r=i(5606);function n(){throw new Error("secure random number generation not supported by this browser\nuse chrome, FireFox or Internet Explorer 11")}var s=i(2861),o=i(3209),a=s.Buffer,h=s.kMaxLength,l=i.g.crypto||i.g.msCrypto,u=Math.pow(2,32)-1;function c(t,e){if("number"!=typeof t||t!=t)throw new TypeError("offset must be a number");if(t>u||t<0)throw new TypeError("offset must be a uint32");if(t>h||t>e)throw new RangeError("offset out of range")}function d(t,e,i){if("number"!=typeof t||t!=t)throw new TypeError("size must be a number");if(t>u||t<0)throw new TypeError("size must be a uint32");if(t+e>i||t>h)throw new RangeError("buffer too small")}function f(t,e,i,n){if(r.browser){var s=t.buffer,a=new Uint8Array(s,e,i);return l.getRandomValues(a),n?void r.nextTick(function(){n(null,t)}):t}if(!n)return o(i).copy(t,e),t;o(i,function(i,r){if(i)return n(i);r.copy(t,e),n(null,t)})}l&&l.getRandomValues||!r.browser?(e.randomFill=function(t,e,r,n){if(!(a.isBuffer(t)||t instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');if("function"==typeof e)n=e,e=0,r=t.length;else if("function"==typeof r)n=r,r=t.length-e;else if("function"!=typeof n)throw new TypeError('"cb" argument must be a function');return c(e,t.length),d(r,e,t.length),f(t,e,r,n)},e.randomFillSync=function(t,e,r){if(void 0===e&&(e=0),!(a.isBuffer(t)||t instanceof i.g.Uint8Array))throw new TypeError('"buf" argument must be a Buffer or Uint8Array');return c(e,t.length),void 0===r&&(r=t.length-e),d(r,e,t.length),f(t,e,r)}):(e.randomFill=n,e.randomFillSync=n)},6984:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t,e){return t===e||t!=t&&e!=e}},7007:(t,e,i)=>{"use strict";var r,n=i(6763),s="object"==typeof Reflect?Reflect:null,o=s&&"function"==typeof s.apply?s.apply:function(t,e,i){return Function.prototype.apply.call(t,e,i)};r=s&&"function"==typeof s.ownKeys?s.ownKeys:Object.getOwnPropertySymbols?function(t){return Object.getOwnPropertyNames(t).concat(Object.getOwnPropertySymbols(t))}:function(t){return Object.getOwnPropertyNames(t)};var a=Number.isNaN||function(t){return t!=t};function h(){h.init.call(this)}t.exports=h,t.exports.once=function(t,e){return new Promise(function(i,r){function n(i){t.removeListener(e,s),r(i)}function s(){"function"==typeof t.removeListener&&t.removeListener("error",n),i([].slice.call(arguments))}y(t,e,s,{once:!0}),"error"!==e&&function(t,e){"function"==typeof t.on&&y(t,"error",e,{once:!0})}(t,n)})},h.EventEmitter=h,h.prototype._events=void 0,h.prototype._eventsCount=0,h.prototype._maxListeners=void 0;var l=10;function u(t){if("function"!=typeof t)throw new TypeError('The "listener" argument must be of type Function. Received type '+typeof t)}function c(t){return void 0===t._maxListeners?h.defaultMaxListeners:t._maxListeners}function d(t,e,i,r){var s,o,a,h;if(u(i),void 0===(o=t._events)?(o=t._events=Object.create(null),t._eventsCount=0):(void 0!==o.newListener&&(t.emit("newListener",e,i.listener?i.listener:i),o=t._events),a=o[e]),void 0===a)a=o[e]=i,++t._eventsCount;else if("function"==typeof a?a=o[e]=r?[i,a]:[a,i]:r?a.unshift(i):a.push(i),(s=c(t))>0&&a.length>s&&!a.warned){a.warned=!0;var l=new Error("Possible EventEmitter memory leak detected. "+a.length+" "+String(e)+" listeners added. Use emitter.setMaxListeners() to increase limit");l.name="MaxListenersExceededWarning",l.emitter=t,l.type=e,l.count=a.length,h=l,n&&n.warn&&n.warn(h)}return t}function f(){if(!this.fired)return this.target.removeListener(this.type,this.wrapFn),this.fired=!0,0===arguments.length?this.listener.call(this.target):this.listener.apply(this.target,arguments)}function p(t,e,i){var r={fired:!1,wrapFn:void 0,target:t,type:e,listener:i},n=f.bind(r);return n.listener=i,r.wrapFn=n,n}function m(t,e,i){var r=t._events;if(void 0===r)return[];var n=r[e];return void 0===n?[]:"function"==typeof n?i?[n.listener||n]:[n]:i?function(t){for(var e=new Array(t.length),i=0;i<e.length;++i)e[i]=t[i].listener||t[i];return e}(n):v(n,n.length)}function g(t){var e=this._events;if(void 0!==e){var i=e[t];if("function"==typeof i)return 1;if(void 0!==i)return i.length}return 0}function v(t,e){for(var i=new Array(e),r=0;r<e;++r)i[r]=t[r];return i}function y(t,e,i,r){if("function"==typeof t.on)r.once?t.once(e,i):t.on(e,i);else{if("function"!=typeof t.addEventListener)throw new TypeError('The "emitter" argument must be of type EventEmitter. Received type '+typeof t);t.addEventListener(e,function n(s){r.once&&t.removeEventListener(e,n),i(s)})}}Object.defineProperty(h,"defaultMaxListeners",{enumerable:!0,get:function(){return l},set:function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "defaultMaxListeners" is out of range. It must be a non-negative number. Received '+t+".");l=t}}),h.init=function(){void 0!==this._events&&this._events!==Object.getPrototypeOf(this)._events||(this._events=Object.create(null),this._eventsCount=0),this._maxListeners=this._maxListeners||void 0},h.prototype.setMaxListeners=function(t){if("number"!=typeof t||t<0||a(t))throw new RangeError('The value of "n" is out of range. It must be a non-negative number. Received '+t+".");return this._maxListeners=t,this},h.prototype.getMaxListeners=function(){return c(this)},h.prototype.emit=function(t){for(var e=[],i=1;i<arguments.length;i++)e.push(arguments[i]);var r="error"===t,n=this._events;if(void 0!==n)r=r&&void 0===n.error;else if(!r)return!1;if(r){var s;if(e.length>0&&(s=e[0]),s instanceof Error)throw s;var a=new Error("Unhandled error."+(s?" ("+s.message+")":""));throw a.context=s,a}var h=n[t];if(void 0===h)return!1;if("function"==typeof h)o(h,this,e);else{var l=h.length,u=v(h,l);for(i=0;i<l;++i)o(u[i],this,e)}return!0},h.prototype.addListener=function(t,e){return d(this,t,e,!1)},h.prototype.on=h.prototype.addListener,h.prototype.prependListener=function(t,e){return d(this,t,e,!0)},h.prototype.once=function(t,e){return u(e),this.on(t,p(this,t,e)),this},h.prototype.prependOnceListener=function(t,e){return u(e),this.prependListener(t,p(this,t,e)),this},h.prototype.removeListener=function(t,e){var i,r,n,s,o;if(u(e),void 0===(r=this._events))return this;if(void 0===(i=r[t]))return this;if(i===e||i.listener===e)0===--this._eventsCount?this._events=Object.create(null):(delete r[t],r.removeListener&&this.emit("removeListener",t,i.listener||e));else if("function"!=typeof i){for(n=-1,s=i.length-1;s>=0;s--)if(i[s]===e||i[s].listener===e){o=i[s].listener,n=s;break}if(n<0)return this;0===n?i.shift():function(t,e){for(;e+1<t.length;e++)t[e]=t[e+1];t.pop()}(i,n),1===i.length&&(r[t]=i[0]),void 0!==r.removeListener&&this.emit("removeListener",t,o||e)}return this},h.prototype.off=h.prototype.removeListener,h.prototype.removeAllListeners=function(t){var e,i,r;if(void 0===(i=this._events))return this;if(void 0===i.removeListener)return 0===arguments.length?(this._events=Object.create(null),this._eventsCount=0):void 0!==i[t]&&(0===--this._eventsCount?this._events=Object.create(null):delete i[t]),this;if(0===arguments.length){var n,s=Object.keys(i);for(r=0;r<s.length;++r)"removeListener"!==(n=s[r])&&this.removeAllListeners(n);return this.removeAllListeners("removeListener"),this._events=Object.create(null),this._eventsCount=0,this}if("function"==typeof(e=i[t]))this.removeListener(t,e);else if(void 0!==e)for(r=e.length-1;r>=0;r--)this.removeListener(t,e[r]);return this},h.prototype.listeners=function(t){return m(this,t,!0)},h.prototype.rawListeners=function(t){return m(this,t,!1)},h.listenerCount=function(t,e){return"function"==typeof t.listenerCount?t.listenerCount(e):g.call(t,e)},h.prototype.listenerCount=g,h.prototype.eventNames=function(){return this._eventsCount>0?r(this._events):[]}},7011:(t,e,i)=>{"use strict";var r=e,n=i(9404),s=i(3349),o=i(4367);r.assert=s,r.toArray=o.toArray,r.zero2=o.zero2,r.toHex=o.toHex,r.encode=o.encode,r.getNAF=function(t,e,i){var r,n=new Array(Math.max(t.bitLength(),i)+1);for(r=0;r<n.length;r+=1)n[r]=0;var s=1<<e+1,o=t.clone();for(r=0;r<n.length;r++){var a,h=o.andln(s-1);o.isOdd()?(a=h>(s>>1)-1?(s>>1)-h:h,o.isubn(a)):a=0,n[r]=a,o.iushrn(1)}return n},r.getJSF=function(t,e){var i=[[],[]];t=t.clone(),e=e.clone();for(var r,n=0,s=0;t.cmpn(-n)>0||e.cmpn(-s)>0;){var o,a,h=t.andln(3)+n&3,l=e.andln(3)+s&3;3===h&&(h=-1),3===l&&(l=-1),o=1&h?3!=(r=t.andln(7)+n&7)&&5!==r||2!==l?h:-h:0,i[0].push(o),a=1&l?3!=(r=e.andln(7)+s&7)&&5!==r||2!==h?l:-l:0,i[1].push(a),2*n===o+1&&(n=1-n),2*s===a+1&&(s=1-s),t.iushrn(1),e.iushrn(1)}return i},r.cachedProperty=function(t,e,i){var r="_"+e;t.prototype[e]=function(){return void 0!==this[r]?this[r]:this[r]=i.call(this)}},r.parseBytes=function(t){return"string"==typeof t?r.toArray(t,"hex"):t},r.intFromLE=function(t){return new n(t,"hex","le")}},7083:t=>{var e=1/0,i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,a=Object.prototype.toString;function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=function(t){return function(t,l){var u;if("function"!=typeof l)throw new TypeError("Expected a function");return t=function(t){var l=function(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==a.call(t)}(t))return NaN;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var l=n.test(t);return l||s.test(t)?o(t.slice(2),l?2:8):r.test(t)?NaN:+t}(t))===e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),u=l%1;return l==l?u?l-u:l:0}(t),function(){return--t>0&&(u=l.apply(this,arguments)),t<=1&&(l=void 0),u}}(2,t)}},7108:(t,e,i)=>{"use strict";var r=i(6698),n=i(8276),s=i(6011),o=i(2802),a=i(6168);function h(t){a.call(this,"digest"),this._hash=t}r(h,a),h.prototype._update=function(t){this._hash.update(t)},h.prototype._final=function(){return this._hash.digest()},t.exports=function(t){return"md5"===(t=t.toLowerCase())?new n:"rmd160"===t||"ripemd160"===t?new s:new h(o(t))}},7119:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect&&Reflect.apply},7122:(t,e,i)=>{"use strict";i.d(e,{M:()=>r});const r="ParticleSystem"},7168:(t,e,i)=>{e.publicEncrypt=i(8902),e.privateDecrypt=i(7362),e.privateEncrypt=function(t,i){return e.publicEncrypt(t,i,!0)},e.publicDecrypt=function(t,i){return e.privateDecrypt(t,i,!0)}},7176:(t,e,i)=>{"use strict";var r,n=i(3126),s=i(5795);try{r=[].__proto__===Array.prototype}catch(t){if(!t||"object"!=typeof t||!("code"in t)||"ERR_PROTO_ACCESS"!==t.code)throw t}var o=!!r&&s&&s(Object.prototype,"__proto__"),a=Object,h=a.getPrototypeOf;t.exports=o&&"function"==typeof o.get?n([o.get]):"function"==typeof h&&function(t){return h(null==t?t:a(t))}},7227:(t,e,i)=>{var r=i(6698),n=i(9673).Reporter,s=i(8287).Buffer;function o(t,e){n.call(this,e),s.isBuffer(t)?(this.base=t,this.offset=0,this.length=t.length):this.error("Input not Buffer")}function a(t,e){if(Array.isArray(t))this.length=0,this.value=t.map(function(t){return t instanceof a||(t=new a(t,e)),this.length+=t.length,t},this);else if("number"==typeof t){if(!(0<=t&&t<=255))return e.error("non-byte EncoderBuffer value");this.value=t,this.length=1}else if("string"==typeof t)this.value=t,this.length=s.byteLength(t);else{if(!s.isBuffer(t))return e.error("Unsupported type: "+typeof t);this.value=t,this.length=t.length}}r(o,n),e.t=o,o.prototype.save=function(){return{offset:this.offset,reporter:n.prototype.save.call(this)}},o.prototype.restore=function(t){var e=new o(this.base);return e.offset=t.offset,e.length=this.offset,this.offset=t.offset,n.prototype.restore.call(this,t.reporter),e},o.prototype.isEmpty=function(){return this.offset===this.length},o.prototype.readUInt8=function(t){return this.offset+1<=this.length?this.base.readUInt8(this.offset++,!0):this.error(t||"DecoderBuffer overrun")},o.prototype.skip=function(t,e){if(!(this.offset+t<=this.length))return this.error(e||"DecoderBuffer overrun");var i=new o(this.base);return i._reporterState=this._reporterState,i.offset=this.offset,i.length=this.offset+t,this.offset+=t,i},o.prototype.raw=function(t){return this.base.slice(t?t.offset:this.offset,this.length)},e.d=a,a.prototype.join=function(t,e){return t||(t=new s(this.length)),e||(e=0),0===this.length||(Array.isArray(this.value)?this.value.forEach(function(i){i.join(t,e),e+=i.length}):("number"==typeof this.value?t[e]=this.value:"string"==typeof this.value?t.write(this.value,e):s.isBuffer(this.value)&&this.value.copy(t,e),e+=this.length)),t}},7244:(t,e,i)=>{"use strict";var r=i(9092)(),n=i(6556)("Object.prototype.toString"),s=function(t){return!(r&&t&&"object"==typeof t&&Symbol.toStringTag in t)&&"[object Arguments]"===n(t)},o=function(t){return!!s(t)||null!==t&&"object"==typeof t&&"length"in t&&"number"==typeof t.length&&t.length>=0&&"[object Array]"!==n(t)&&"callee"in t&&"[object Function]"===n(t.callee)},a=function(){return s(arguments)}();s.isLegacyArguments=o,t.exports=a?s:o},7260:(t,e,i)=>{var r=i(5747);t.exports=function(t,e){e=e||{};var i=r.decode(t,e);if(!i)return null;var n=i.payload;if("string"==typeof n)try{var s=JSON.parse(n);null!==s&&"object"==typeof s&&(n=s)}catch(t){}return!0===e.complete?{header:i.header,payload:n,signature:i.signature}:n}},7269:(t,e,i)=>{"use strict";i.d(e,{n:()=>s});var r=i(9313),n=i(2208);function s(t,e,i){return e.clear(),i||(i=r.u.IDENTITY),o(t,e,i,t,!0),e.isValid||e.set(0,0,0,0),e}function o(t,e,i,s,a){let h;if(a)h=n.u.get(),h=i.copyTo(h);else{if(!t.visible||!t.measurable)return;t.updateLocalTransform();const e=t.localTransform;h=n.u.get(),h.appendFrom(e,i)}const l=e,u=!!t.effects.length;if(u&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,h);else{t.renderPipeId&&(e.matrix=h,e.addBounds(t.bounds));const i=t.children;for(let t=0;t<i.length;t++)o(i[t],e,h,s,!1)}if(u){for(let i=0;i<t.effects.length;i++)t.effects[i].addLocalBounds?.(e,s);l.addBounds(e,r.u.IDENTITY),n.o.return(e)}n.u.return(h)}},7271:(t,e,i)=>{"use strict";i.d(e,{A:()=>n});var r=Object.prototype;const n=function(t){var e=t&&t.constructor;return t===("function"==typeof e&&e.prototype||r)}},7276:(t,e,i)=>{"use strict";i.d(e,{_:()=>u});var r=i(2577),n=i(1761),s=i(9313),o=i(8293),a=i(4492),h=i(133);const l=class t{constructor(t,e,i,r){this.uid=(0,h.L)("fillGradient"),this.type="linear",this.gradientStops=[],this._styleKey=null,this.x0=t,this.y0=e,this.x1=i,this.y1=r}addColorStop(t,e){return this.gradientStops.push({offset:t,color:r.Q.shared.setValue(e).toHexa()}),this._styleKey=null,this}buildLinearGradient(){if(this.texture)return;const e=t.defaultTextureSize,{gradientStops:i}=this,r=n.e.get().createCanvas();r.width=e,r.height=e;const h=r.getContext("2d"),l=h.createLinearGradient(0,0,t.defaultTextureSize,1);for(let t=0;t<i.length;t++){const e=i[t];l.addColorStop(e.offset,e.color)}h.fillStyle=l,h.fillRect(0,0,e,e),this.texture=new a.g({source:new o.b({resource:r,addressModeU:"clamp-to-edge",addressModeV:"repeat"})});const{x0:u,y0:c,x1:d,y1:f}=this,p=new s.u,m=d-u,g=f-c,v=Math.sqrt(m*m+g*g),y=Math.atan2(g,m);p.translate(-u,-c),p.scale(1/e,1/e),p.rotate(-y),p.scale(256/v,1),this.transform=p,this._styleKey=null}get styleKey(){if(this._styleKey)return this._styleKey;const t=this.gradientStops.map(t=>`${t.offset}-${t.color}`).join("-"),e=this.texture.uid,i=this.transform.toArray().join("-");return`fill-gradient-${this.uid}-${t}-${e}-${i}-${this.x0}-${this.y0}-${this.x1}-${this.y1}`}};l.defaultTextureSize=256;let u=l},7309:(t,e,i)=>{"use strict";i.d(e,{R:()=>o});var r=i(4458);class n{constructor(t,e=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this._fn=t,this._context=e,this.priority=i,this._once=r}match(t,e=null){return this._fn===t&&this._context===e}emit(t){this._fn&&(this._context?this._fn.call(this._context,t):this._fn(t));const e=this.next;return this._once&&this.destroy(!0),this._destroyed&&(this.next=null),e}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this._fn=null,this._context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const e=this.next;return this.next=t?null:e,this.previous=null,e}}const s=class t{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new n(null,null,1/0),this.deltaMS=1/t.targetFPMS,this.elapsedMS=1/t.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&null===this._requestId&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,i=r.d.NORMAL){return this._addListener(new n(t,e,i))}addOnce(t,e,i=r.d.NORMAL){return this._addListener(new n(t,e,i,!0))}_addListener(t){let e=this._head.next,i=this._head;if(e){for(;e;){if(t.priority>e.priority){t.connect(i);break}i=e,e=e.next}t.previous||t.connect(i)}else t.connect(i);return this._startIfPossible(),this}remove(t,e){let i=this._head.next;for(;i;)i=i.match(t,e)?i.destroy():i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let i;if(e>this.lastTime){if(i=this.elapsedMS=e-this.lastTime,i>this._maxElapsedMS&&(i=this._maxElapsedMS),i*=this.speed,this._minElapsedMS){const t=e-this._lastFrame|0;if(t<this._minElapsedMS)return;this._lastFrame=e-t%this._minElapsedMS}this.deltaMS=i,this.deltaTime=this.deltaMS*t.targetFPMS;const r=this._head;let n=r.next;for(;n;)n=n.emit(this);r.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const i=Math.min(this.maxFPS,e),r=Math.min(Math.max(0,i)/1e3,t.targetFPMS);this._maxElapsedMS=1/r}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(0===t)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!t._shared){const e=t._shared=new t;e.autoStart=!0,e._protected=!0}return t._shared}static get system(){if(!t._system){const e=t._system=new t;e.autoStart=!0,e._protected=!0}return t._system}};s.targetFPMS=.06;let o=s},7314:(t,e,i)=>{"use strict";var r=i(5606),n=i(3225);function s(t){var e=this;this.next=null,this.entry=null,this.finish=function(){!function(t,e){var i=t.entry;for(t.entry=null;i;){var r=i.callback;e.pendingcb--,r(undefined),i=i.next}e.corkedRequestsFree.next=t}(e,t)}}t.exports=v;var o,a=!r.browser&&["v0.10","v0.9."].indexOf(r.version.slice(0,5))>-1?setImmediate:n.nextTick;v.WritableState=g;var h=Object.create(i(5622));h.inherits=i(6698);var l,u={deprecate:i(4643)},c=i(5567),d=i(4116).Buffer,f=(void 0!==i.g?i.g:"undefined"!=typeof window?window:"undefined"!=typeof self?self:{}).Uint8Array||function(){},p=i(6278);function m(){}function g(t,e){o=o||i(6248),t=t||{};var r=e instanceof o;this.objectMode=!!t.objectMode,r&&(this.objectMode=this.objectMode||!!t.writableObjectMode);var h=t.highWaterMark,l=t.writableHighWaterMark,u=this.objectMode?16:16384;this.highWaterMark=h||0===h?h:r&&(l||0===l)?l:u,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var c=!1===t.decodeStrings;this.decodeStrings=!c,this.defaultEncoding=t.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(t){!function(t,e){var i=t._writableState,r=i.sync,s=i.writecb;if(function(t){t.writing=!1,t.writecb=null,t.length-=t.writelen,t.writelen=0}(i),e)!function(t,e,i,r,s){--e.pendingcb,i?(n.nextTick(s,r),n.nextTick(M,t,e),t._writableState.errorEmitted=!0,t.emit("error",r)):(s(r),t._writableState.errorEmitted=!0,t.emit("error",r),M(t,e))}(t,i,r,e,s);else{var o=x(i);o||i.corked||i.bufferProcessing||!i.bufferedRequest||_(t,i),r?a(b,t,i,o,s):b(t,i,o,s)}}(e,t)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new s(this)}function v(t){if(o=o||i(6248),!(l.call(v,this)||this instanceof o))return new v(t);this._writableState=new g(t,this),this.writable=!0,t&&("function"==typeof t.write&&(this._write=t.write),"function"==typeof t.writev&&(this._writev=t.writev),"function"==typeof t.destroy&&(this._destroy=t.destroy),"function"==typeof t.final&&(this._final=t.final)),c.call(this)}function y(t,e,i,r,n,s,o){e.writelen=r,e.writecb=o,e.writing=!0,e.sync=!0,i?t._writev(n,e.onwrite):t._write(n,s,e.onwrite),e.sync=!1}function b(t,e,i,r){i||function(t,e){0===e.length&&e.needDrain&&(e.needDrain=!1,t.emit("drain"))}(t,e),e.pendingcb--,r(),M(t,e)}function _(t,e){e.bufferProcessing=!0;var i=e.bufferedRequest;if(t._writev&&i&&i.next){var r=e.bufferedRequestCount,n=new Array(r),o=e.corkedRequestsFree;o.entry=i;for(var a=0,h=!0;i;)n[a]=i,i.isBuf||(h=!1),i=i.next,a+=1;n.allBuffers=h,y(t,e,!0,e.length,n,"",o.finish),e.pendingcb++,e.lastBufferedRequest=null,o.next?(e.corkedRequestsFree=o.next,o.next=null):e.corkedRequestsFree=new s(e),e.bufferedRequestCount=0}else{for(;i;){var l=i.chunk,u=i.encoding,c=i.callback;if(y(t,e,!1,e.objectMode?1:l.length,l,u,c),i=i.next,e.bufferedRequestCount--,e.writing)break}null===i&&(e.lastBufferedRequest=null)}e.bufferedRequest=i,e.bufferProcessing=!1}function x(t){return t.ending&&0===t.length&&null===t.bufferedRequest&&!t.finished&&!t.writing}function w(t,e){t._final(function(i){e.pendingcb--,i&&t.emit("error",i),e.prefinished=!0,t.emit("prefinish"),M(t,e)})}function M(t,e){var i=x(e);return i&&(function(t,e){e.prefinished||e.finalCalled||("function"==typeof t._final?(e.pendingcb++,e.finalCalled=!0,n.nextTick(w,t,e)):(e.prefinished=!0,t.emit("prefinish")))}(t,e),0===e.pendingcb&&(e.finished=!0,t.emit("finish"))),i}h.inherits(v,c),g.prototype.getBuffer=function(){for(var t=this.bufferedRequest,e=[];t;)e.push(t),t=t.next;return e},function(){try{Object.defineProperty(g.prototype,"buffer",{get:u.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(t){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(l=Function.prototype[Symbol.hasInstance],Object.defineProperty(v,Symbol.hasInstance,{value:function(t){return!!l.call(this,t)||this===v&&t&&t._writableState instanceof g}})):l=function(t){return t instanceof this},v.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},v.prototype.write=function(t,e,i){var r,s=this._writableState,o=!1,a=!s.objectMode&&(r=t,d.isBuffer(r)||r instanceof f);return a&&!d.isBuffer(t)&&(t=function(t){return d.from(t)}(t)),"function"==typeof e&&(i=e,e=null),a?e="buffer":e||(e=s.defaultEncoding),"function"!=typeof i&&(i=m),s.ended?function(t,e){var i=new Error("write after end");t.emit("error",i),n.nextTick(e,i)}(this,i):(a||function(t,e,i,r){var s=!0,o=!1;return null===i?o=new TypeError("May not write null values to stream"):"string"==typeof i||void 0===i||e.objectMode||(o=new TypeError("Invalid non-string/buffer chunk")),o&&(t.emit("error",o),n.nextTick(r,o),s=!1),s}(this,s,t,i))&&(s.pendingcb++,o=function(t,e,i,r,n,s){if(!i){var o=function(t,e,i){return t.objectMode||!1===t.decodeStrings||"string"!=typeof e||(e=d.from(e,i)),e}(e,r,n);r!==o&&(i=!0,n="buffer",r=o)}var a=e.objectMode?1:r.length;e.length+=a;var h=e.length<e.highWaterMark;if(h||(e.needDrain=!0),e.writing||e.corked){var l=e.lastBufferedRequest;e.lastBufferedRequest={chunk:r,encoding:n,isBuf:i,callback:s,next:null},l?l.next=e.lastBufferedRequest:e.bufferedRequest=e.lastBufferedRequest,e.bufferedRequestCount+=1}else y(t,e,!1,a,r,n,s);return h}(this,s,a,t,e,i)),o},v.prototype.cork=function(){this._writableState.corked++},v.prototype.uncork=function(){var t=this._writableState;t.corked&&(t.corked--,t.writing||t.corked||t.bufferProcessing||!t.bufferedRequest||_(this,t))},v.prototype.setDefaultEncoding=function(t){if("string"==typeof t&&(t=t.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((t+"").toLowerCase())>-1))throw new TypeError("Unknown encoding: "+t);return this._writableState.defaultEncoding=t,this},Object.defineProperty(v.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),v.prototype._write=function(t,e,i){i(new Error("_write() is not implemented"))},v.prototype._writev=null,v.prototype.end=function(t,e,i){var r=this._writableState;"function"==typeof t?(i=t,t=null,e=null):"function"==typeof e&&(i=e,e=null),null!=t&&this.write(t,e),r.corked&&(r.corked=1,this.uncork()),r.ending||function(t,e,i){e.ending=!0,M(t,e),i&&(e.finished?n.nextTick(i):t.once("finish",i)),e.ended=!0,t.writable=!1}(this,r,i)},Object.defineProperty(v.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(t){this._writableState&&(this._writableState.destroyed=t)}}),v.prototype.destroy=p.destroy,v.prototype._undestroy=p.undestroy,v.prototype._destroy=function(t,e){this.end(),e(t)}},7332:(t,e,i)=>{"use strict";var r=i(8893),n=i(3209),s=i(2861).Buffer;function o(t){var e,i=t.modulus.byteLength();do{e=new r(n(i))}while(e.cmp(t.modulus)>=0||!e.umod(t.prime1)||!e.umod(t.prime2));return e}function a(t,e){var i=function(t){var e=o(t);return{blinder:e.toRed(r.mont(t.modulus)).redPow(new r(t.publicExponent)).fromRed(),unblinder:e.invm(t.modulus)}}(e),n=e.modulus.byteLength(),a=new r(t).mul(i.blinder).umod(e.modulus),h=a.toRed(r.mont(e.prime1)),l=a.toRed(r.mont(e.prime2)),u=e.coefficient,c=e.prime1,d=e.prime2,f=h.redPow(e.exponent1).fromRed(),p=l.redPow(e.exponent2).fromRed(),m=f.isub(p).imul(u).umod(c).imul(d);return p.iadd(m).imul(i.unblinder).umod(e.modulus).toArrayLike(s,"be",n)}a.getr=o,t.exports=a},7362:(t,e,i)=>{var r=i(8170),n=i(8206),s=i(2061),o=i(9404),a=i(7332),h=i(7108),l=i(9247),u=i(2861).Buffer;t.exports=function(t,e,i){var c;c=t.padding?t.padding:i?1:4;var d,f=r(t),p=f.modulus.byteLength();if(e.length>p||new o(e).cmp(f.modulus)>=0)throw new Error("decryption error");d=i?l(new o(e),f):a(e,f);var m=u.alloc(p-d.length);if(d=u.concat([m,d],p),4===c)return function(t,e){var i=t.modulus.byteLength(),r=h("sha1").update(u.alloc(0)).digest(),o=r.length;if(0!==e[0])throw new Error("decryption error");var a=e.slice(1,o+1),l=e.slice(o+1),c=s(a,n(l,o)),d=s(l,n(c,i-o-1));if(function(t,e){t=u.from(t),e=u.from(e);var i=0,r=t.length;t.length!==e.length&&(i++,r=Math.min(t.length,e.length));for(var n=-1;++n<r;)i+=t[n]^e[n];return i}(r,d.slice(0,o)))throw new Error("decryption error");for(var f=o;0===d[f];)f++;if(1!==d[f++])throw new Error("decryption error");return d.slice(f)}(f,d);if(1===c)return function(t,e,i){for(var r=e.slice(0,2),n=2,s=0;0!==e[n++];)if(n>=e.length){s++;break}var o=e.slice(2,n-1);if(("0002"!==r.toString("hex")&&!i||"0001"!==r.toString("hex")&&i)&&s++,o.length<8&&s++,s)throw new Error("decryption error");return e.slice(n)}(0,d,i);if(3===c)return d;throw new Error("unknown padding")}},7363:(t,e,i)=>{var r=i(7568),n=i(6698);function s(t,e){this.name=t,this.body=e,this.decoders={},this.encoders={}}e.define=function(t,e){return new s(t,e)},s.prototype._createNamed=function(t){var e;try{e=i(8961).runInThisContext("(function "+this.name+"(entity) {\n  this._initNamed(entity);\n})")}catch(t){e=function(t){this._initNamed(t)}}return n(e,t),e.prototype._initNamed=function(e){t.call(this,e)},new e(this)},s.prototype._getDecoder=function(t){return t=t||"der",this.decoders.hasOwnProperty(t)||(this.decoders[t]=this._createNamed(r.decoders[t])),this.decoders[t]},s.prototype.decode=function(t,e,i){return this._getDecoder(e).decode(t,i)},s.prototype._getEncoder=function(t){return t=t||"der",this.encoders.hasOwnProperty(t)||(this.encoders[t]=this._createNamed(r.encoders[t])),this.encoders[t]},s.prototype.encode=function(t,e,i){return this._getEncoder(e).encode(t,i)}},7367:(t,e,i)=>{"use strict";var r;i.d(e,{M:()=>r}),function(t){t.Pixi="pixi",t.Three="three"}(r||(r={}))},7422:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(423),n=i(4453),s=i(8446);const o=function(t){return(0,s.A)(t)?(0,r.A)(t):(0,n.A)(t)}},7426:(t,e,i)=>{"use strict";var r=i(3349),n=i(6698);function s(t,e){return 55296==(64512&t.charCodeAt(e))&&!(e<0||e+1>=t.length)&&56320==(64512&t.charCodeAt(e+1))}function o(t){return(t>>>24|t>>>8&65280|t<<8&16711680|(255&t)<<24)>>>0}function a(t){return 1===t.length?"0"+t:t}function h(t){return 7===t.length?"0"+t:6===t.length?"00"+t:5===t.length?"000"+t:4===t.length?"0000"+t:3===t.length?"00000"+t:2===t.length?"000000"+t:1===t.length?"0000000"+t:t}e.inherits=n,e.toArray=function(t,e){if(Array.isArray(t))return t.slice();if(!t)return[];var i=[];if("string"==typeof t)if(e){if("hex"===e)for((t=t.replace(/[^a-z0-9]+/gi,"")).length%2!=0&&(t="0"+t),n=0;n<t.length;n+=2)i.push(parseInt(t[n]+t[n+1],16))}else for(var r=0,n=0;n<t.length;n++){var o=t.charCodeAt(n);o<128?i[r++]=o:o<2048?(i[r++]=o>>6|192,i[r++]=63&o|128):s(t,n)?(o=65536+((1023&o)<<10)+(1023&t.charCodeAt(++n)),i[r++]=o>>18|240,i[r++]=o>>12&63|128,i[r++]=o>>6&63|128,i[r++]=63&o|128):(i[r++]=o>>12|224,i[r++]=o>>6&63|128,i[r++]=63&o|128)}else for(n=0;n<t.length;n++)i[n]=0|t[n];return i},e.toHex=function(t){for(var e="",i=0;i<t.length;i++)e+=a(t[i].toString(16));return e},e.htonl=o,e.toHex32=function(t,e){for(var i="",r=0;r<t.length;r++){var n=t[r];"little"===e&&(n=o(n)),i+=h(n.toString(16))}return i},e.zero2=a,e.zero8=h,e.join32=function(t,e,i,n){var s=i-e;r(s%4==0);for(var o=new Array(s/4),a=0,h=e;a<o.length;a++,h+=4){var l;l="big"===n?t[h]<<24|t[h+1]<<16|t[h+2]<<8|t[h+3]:t[h+3]<<24|t[h+2]<<16|t[h+1]<<8|t[h],o[a]=l>>>0}return o},e.split32=function(t,e){for(var i=new Array(4*t.length),r=0,n=0;r<t.length;r++,n+=4){var s=t[r];"big"===e?(i[n]=s>>>24,i[n+1]=s>>>16&255,i[n+2]=s>>>8&255,i[n+3]=255&s):(i[n+3]=s>>>24,i[n+2]=s>>>16&255,i[n+1]=s>>>8&255,i[n]=255&s)}return i},e.rotr32=function(t,e){return t>>>e|t<<32-e},e.rotl32=function(t,e){return t<<e|t>>>32-e},e.sum32=function(t,e){return t+e>>>0},e.sum32_3=function(t,e,i){return t+e+i>>>0},e.sum32_4=function(t,e,i,r){return t+e+i+r>>>0},e.sum32_5=function(t,e,i,r,n){return t+e+i+r+n>>>0},e.sum64=function(t,e,i,r){var n=t[e],s=r+t[e+1]>>>0,o=(s<r?1:0)+i+n;t[e]=o>>>0,t[e+1]=s},e.sum64_hi=function(t,e,i,r){return(e+r>>>0<e?1:0)+t+i>>>0},e.sum64_lo=function(t,e,i,r){return e+r>>>0},e.sum64_4_hi=function(t,e,i,r,n,s,o,a){var h=0,l=e;return h+=(l=l+r>>>0)<e?1:0,h+=(l=l+s>>>0)<s?1:0,t+i+n+o+(h+=(l=l+a>>>0)<a?1:0)>>>0},e.sum64_4_lo=function(t,e,i,r,n,s,o,a){return e+r+s+a>>>0},e.sum64_5_hi=function(t,e,i,r,n,s,o,a,h,l){var u=0,c=e;return u+=(c=c+r>>>0)<e?1:0,u+=(c=c+s>>>0)<s?1:0,u+=(c=c+a>>>0)<a?1:0,t+i+n+o+h+(u+=(c=c+l>>>0)<l?1:0)>>>0},e.sum64_5_lo=function(t,e,i,r,n,s,o,a,h,l){return e+r+s+a+l>>>0},e.rotr64_hi=function(t,e,i){return(e<<32-i|t>>>i)>>>0},e.rotr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0},e.shr64_hi=function(t,e,i){return t>>>i},e.shr64_lo=function(t,e,i){return(t<<32-i|e>>>i)>>>0}},7447:(t,e,i)=>{"use strict";var r=i(9404),n=i(2723),s=i(7011),o=i(480),a=i(5037),h=s.assert,l=i(8819),u=i(8545);function c(t){if(!(this instanceof c))return new c(t);"string"==typeof t&&(h(Object.prototype.hasOwnProperty.call(o,t),"Unknown curve "+t),t=o[t]),t instanceof o.PresetCurve&&(t={curve:t}),this.curve=t.curve.curve,this.n=this.curve.n,this.nh=this.n.ushrn(1),this.g=this.curve.g,this.g=t.curve.g,this.g.precompute(t.curve.n.bitLength()+1),this.hash=t.hash||t.curve.hash}t.exports=c,c.prototype.keyPair=function(t){return new l(this,t)},c.prototype.keyFromPrivate=function(t,e){return l.fromPrivate(this,t,e)},c.prototype.keyFromPublic=function(t,e){return l.fromPublic(this,t,e)},c.prototype.genKeyPair=function(t){t||(t={});for(var e=new n({hash:this.hash,pers:t.pers,persEnc:t.persEnc||"utf8",entropy:t.entropy||a(this.hash.hmacStrength),entropyEnc:t.entropy&&t.entropyEnc||"utf8",nonce:this.n.toArray()}),i=this.n.byteLength(),s=this.n.sub(new r(2));;){var o=new r(e.generate(i));if(!(o.cmp(s)>0))return o.iaddn(1),this.keyFromPrivate(o)}},c.prototype._truncateToN=function(t,e,i){var n;if(r.isBN(t)||"number"==typeof t)n=(t=new r(t,16)).byteLength();else if("object"==typeof t)n=t.length,t=new r(t,16);else{var s=t.toString();n=s.length+1>>>1,t=new r(s,16)}"number"!=typeof i&&(i=8*n);var o=i-this.n.bitLength();return o>0&&(t=t.ushrn(o)),!e&&t.cmp(this.n)>=0?t.sub(this.n):t},c.prototype.sign=function(t,e,i,s){if("object"==typeof i&&(s=i,i=null),s||(s={}),"string"!=typeof t&&"number"!=typeof t&&!r.isBN(t)){h("object"==typeof t&&t&&"number"==typeof t.length,"Expected message to be an array-like, a hex string, or a BN instance"),h(t.length>>>0===t.length);for(var o=0;o<t.length;o++)h((255&t[o])===t[o])}e=this.keyFromPrivate(e,i),t=this._truncateToN(t,!1,s.msgBitLength),h(!t.isNeg(),"Can not sign a negative message");var a=this.n.byteLength(),l=e.getPrivate().toArray("be",a),c=t.toArray("be",a);h(new r(c).eq(t),"Can not sign message");for(var d=new n({hash:this.hash,entropy:l,nonce:c,pers:s.pers,persEnc:s.persEnc||"utf8"}),f=this.n.sub(new r(1)),p=0;;p++){var m=s.k?s.k(p):new r(d.generate(this.n.byteLength()));if(!((m=this._truncateToN(m,!0)).cmpn(1)<=0||m.cmp(f)>=0)){var g=this.g.mul(m);if(!g.isInfinity()){var v=g.getX(),y=v.umod(this.n);if(0!==y.cmpn(0)){var b=m.invm(this.n).mul(y.mul(e.getPrivate()).iadd(t));if(0!==(b=b.umod(this.n)).cmpn(0)){var _=(g.getY().isOdd()?1:0)|(0!==v.cmp(y)?2:0);return s.canonical&&b.cmp(this.nh)>0&&(b=this.n.sub(b),_^=1),new u({r:y,s:b,recoveryParam:_})}}}}}},c.prototype.verify=function(t,e,i,r,n){n||(n={}),t=this._truncateToN(t,!1,n.msgBitLength),i=this.keyFromPublic(i,r);var s=(e=new u(e,"hex")).r,o=e.s;if(s.cmpn(1)<0||s.cmp(this.n)>=0)return!1;if(o.cmpn(1)<0||o.cmp(this.n)>=0)return!1;var a,h=o.invm(this.n),l=h.mul(t).umod(this.n),c=h.mul(s).umod(this.n);return this.curve._maxwellTrick?!(a=this.g.jmulAdd(l,i.getPublic(),c)).isInfinity()&&a.eqXToP(s):!(a=this.g.mulAdd(l,i.getPublic(),c)).isInfinity()&&0===a.getX().umod(this.n).cmp(s)},c.prototype.recoverPubKey=function(t,e,i,n){h((3&i)===i,"The recovery param is more than two bits"),e=new u(e,n);var s=this.n,o=new r(t),a=e.r,l=e.s,c=1&i,d=i>>1;if(a.cmp(this.curve.p.umod(this.curve.n))>=0&&d)throw new Error("Unable to find sencond key candinate");a=d?this.curve.pointFromX(a.add(this.curve.n),c):this.curve.pointFromX(a,c);var f=e.r.invm(s),p=s.sub(o).mul(f).umod(s),m=l.mul(f).umod(s);return this.g.mulAdd(p,a,m)},c.prototype.getKeyRecoveryParam=function(t,e,i,r){if(null!==(e=new u(e,r)).recoveryParam)return e.recoveryParam;for(var n=0;n<4;n++){var s;try{s=this.recoverPubKey(t,e,n)}catch(t){continue}if(s.eq(i))return n}throw new Error("Unable to find valid recovery factor")}},7526:(t,e)=>{"use strict";e.byteLength=function(t){var e=a(t),i=e[0],r=e[1];return 3*(i+r)/4-r},e.toByteArray=function(t){var e,i,s=a(t),o=s[0],h=s[1],l=new n(function(t,e,i){return 3*(e+i)/4-i}(0,o,h)),u=0,c=h>0?o-4:o;for(i=0;i<c;i+=4)e=r[t.charCodeAt(i)]<<18|r[t.charCodeAt(i+1)]<<12|r[t.charCodeAt(i+2)]<<6|r[t.charCodeAt(i+3)],l[u++]=e>>16&255,l[u++]=e>>8&255,l[u++]=255&e;return 2===h&&(e=r[t.charCodeAt(i)]<<2|r[t.charCodeAt(i+1)]>>4,l[u++]=255&e),1===h&&(e=r[t.charCodeAt(i)]<<10|r[t.charCodeAt(i+1)]<<4|r[t.charCodeAt(i+2)]>>2,l[u++]=e>>8&255,l[u++]=255&e),l},e.fromByteArray=function(t){for(var e,r=t.length,n=r%3,s=[],o=16383,a=0,h=r-n;a<h;a+=o)s.push(l(t,a,a+o>h?h:a+o));return 1===n?(e=t[r-1],s.push(i[e>>2]+i[e<<4&63]+"==")):2===n&&(e=(t[r-2]<<8)+t[r-1],s.push(i[e>>10]+i[e>>4&63]+i[e<<2&63]+"=")),s.join("")};for(var i=[],r=[],n="undefined"!=typeof Uint8Array?Uint8Array:Array,s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",o=0;o<64;++o)i[o]=s[o],r[s.charCodeAt(o)]=o;function a(t){var e=t.length;if(e%4>0)throw new Error("Invalid string. Length must be a multiple of 4");var i=t.indexOf("=");return-1===i&&(i=e),[i,i===e?0:4-i%4]}function h(t){return i[t>>18&63]+i[t>>12&63]+i[t>>6&63]+i[63&t]}function l(t,e,i){for(var r,n=[],s=e;s<i;s+=3)r=(t[s]<<16&16711680)+(t[s+1]<<8&65280)+(255&t[s+2]),n.push(h(r));return n.join("")}r["-".charCodeAt(0)]=62,r["_".charCodeAt(0)]=63},7547:(t,e,i)=>{"use strict";i.d(e,{U:()=>s});const r={normal:0,add:1,multiply:2,screen:3,overlay:4,erase:5,"normal-npm":6,"add-npm":7,"screen-npm":8,min:9,max:10},n=class t{constructor(){this.data=0,this.blendMode="normal",this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(1&this.data)}set blend(t){!!(1&this.data)!==t&&(this.data^=1)}get offsets(){return!!(2&this.data)}set offsets(t){!!(2&this.data)!==t&&(this.data^=2)}set cullMode(t){"none"!==t?(this.culling=!0,this.clockwiseFrontFace="front"===t):this.culling=!1}get cullMode(){return this.culling?this.clockwiseFrontFace?"front":"back":"none"}get culling(){return!!(4&this.data)}set culling(t){!!(4&this.data)!==t&&(this.data^=4)}get depthTest(){return!!(8&this.data)}set depthTest(t){!!(8&this.data)!==t&&(this.data^=8)}get depthMask(){return!!(32&this.data)}set depthMask(t){!!(32&this.data)!==t&&(this.data^=32)}get clockwiseFrontFace(){return!!(16&this.data)}set clockwiseFrontFace(t){!!(16&this.data)!==t&&(this.data^=16)}get blendMode(){return this._blendMode}set blendMode(t){this.blend="none"!==t,this._blendMode=t,this._blendModeId=r[t]||0}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new t;return e.depthTest=!1,e.blend=!0,e}};n.default2d=n.for2d();let s=n},7568:(t,e,i)=>{var r=e;r.bignum=i(9404),r.define=i(7363).define,r.base=i(9673),r.constants=i(2153),r.decoders=i(2853),r.encoders=i(4669)},7599:(t,e,i)=>{var r=i(2861).Buffer,n=i(8948),s=i(8789),o=i(8310),a=i(5232),h=i(537),l=/^[a-zA-Z0-9\-_]+?\.[a-zA-Z0-9\-_]+?\.([a-zA-Z0-9\-_]+)?$/;function u(t){var e=t.split(".",1)[0];return function(t){if(function(t){return"[object Object]"===Object.prototype.toString.call(t)}(t))return t;try{return JSON.parse(t)}catch(t){return}}(r.from(e,"base64").toString("binary"))}function c(t){return t.split(".")[2]}function d(t){return l.test(t)&&!!u(t)}function f(t,e,i){if(!e){var r=new Error("Missing algorithm parameter for jws.verify");throw r.code="MISSING_ALGORITHM",r}var n=c(t=a(t)),o=function(t){return t.split(".",2).join(".")}(t);return s(e).verify(o,n,i)}function p(t,e){if(e=e||{},!d(t=a(t)))return null;var i=u(t);if(!i)return null;var n=function(t,e){e=e||"utf8";var i=t.split(".")[1];return r.from(i,"base64").toString(e)}(t);return("JWT"===i.typ||e.json)&&(n=JSON.parse(n,e.encoding)),{header:i,payload:n,signature:c(t)}}function m(t){var e=(t=t||{}).secret||t.publicKey||t.key,i=new n(e);this.readable=!0,this.algorithm=t.algorithm,this.encoding=t.encoding,this.secret=this.publicKey=this.key=i,this.signature=new n(t.signature),this.secret.once("close",function(){!this.signature.writable&&this.readable&&this.verify()}.bind(this)),this.signature.once("close",function(){!this.secret.writable&&this.readable&&this.verify()}.bind(this))}h.inherits(m,o),m.prototype.verify=function(){try{var t=f(this.signature.buffer,this.algorithm,this.key.buffer),e=p(this.signature.buffer,this.encoding);return this.emit("done",t,e),this.emit("data",t),this.emit("end"),this.readable=!1,t}catch(t){this.readable=!1,this.emit("error",t),this.emit("close")}},m.decode=p,m.isValid=d,m.verify=f,t.exports=m},7608:(t,e,i)=>{"use strict";i.d(e,{N:()=>s});var r=i(1761),n=i(9939);const s=new class{constructor(t){this._canvasPool=Object.create(null),this.canvasOptions=t||{},this.enableFullScreen=!1}_createCanvasAndContext(t,e){const i=r.e.get().createCanvas();i.width=t,i.height=e;const n=i.getContext("2d");return{canvas:i,context:n}}getOptimalCanvasAndContext(t,e,i=1){t=Math.ceil(t*i-1e-6),e=Math.ceil(e*i-1e-6);const r=((t=(0,n.U5)(t))<<17)+((e=(0,n.U5)(e))<<1);this._canvasPool[r]||(this._canvasPool[r]=[]);let s=this._canvasPool[r].pop();return s||(s=this._createCanvasAndContext(t,e)),s}returnCanvasAndContext(t){const e=t.canvas,{width:i,height:r}=e,n=(i<<17)+(r<<1);t.context.clearRect(0,0,i,r),this._canvasPool[n].push(t)}clear(){this._canvasPool={}}}},7626:(t,e)=>{"use strict";e.readUInt32BE=function(t,e){return(t[0+e]<<24|t[1+e]<<16|t[2+e]<<8|t[3+e])>>>0},e.writeUInt32BE=function(t,e,i){t[0+i]=e>>>24,t[1+i]=e>>>16&255,t[2+i]=e>>>8&255,t[3+i]=255&e},e.ip=function(t,e,i,r){for(var n=0,s=0,o=6;o>=0;o-=2){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>>a+o&1}for(o=6;o>=0;o-=2){for(a=1;a<=25;a+=8)s<<=1,s|=e>>>a+o&1;for(a=1;a<=25;a+=8)s<<=1,s|=t>>>a+o&1}i[r+0]=n>>>0,i[r+1]=s>>>0},e.rip=function(t,e,i,r){for(var n=0,s=0,o=0;o<4;o++)for(var a=24;a>=0;a-=8)n<<=1,n|=e>>>a+o&1,n<<=1,n|=t>>>a+o&1;for(o=4;o<8;o++)for(a=24;a>=0;a-=8)s<<=1,s|=e>>>a+o&1,s<<=1,s|=t>>>a+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},e.pc1=function(t,e,i,r){for(var n=0,s=0,o=7;o>=5;o--){for(var a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;for(a=0;a<=24;a+=8)n<<=1,n|=t>>a+o&1}for(a=0;a<=24;a+=8)n<<=1,n|=e>>a+o&1;for(o=1;o<=3;o++){for(a=0;a<=24;a+=8)s<<=1,s|=e>>a+o&1;for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1}for(a=0;a<=24;a+=8)s<<=1,s|=t>>a+o&1;i[r+0]=n>>>0,i[r+1]=s>>>0},e.r28shl=function(t,e){return t<<e&268435455|t>>>28-e};var i=[14,11,17,4,27,23,25,0,13,22,7,18,5,9,16,24,2,20,12,21,1,8,15,26,15,4,25,19,9,1,26,16,5,11,23,8,12,7,17,0,22,3,10,14,6,20,27,24];e.pc2=function(t,e,r,n){for(var s=0,o=0,a=i.length>>>1,h=0;h<a;h++)s<<=1,s|=t>>>i[h]&1;for(h=a;h<i.length;h++)o<<=1,o|=e>>>i[h]&1;r[n+0]=s>>>0,r[n+1]=o>>>0},e.expand=function(t,e,i){var r=0,n=0;r=(1&t)<<5|t>>>27;for(var s=23;s>=15;s-=4)r<<=6,r|=t>>>s&63;for(s=11;s>=3;s-=4)n|=t>>>s&63,n<<=6;n|=(31&t)<<1|t>>>31,e[i+0]=r>>>0,e[i+1]=n>>>0};var r=[14,0,4,15,13,7,1,4,2,14,15,2,11,13,8,1,3,10,10,6,6,12,12,11,5,9,9,5,0,3,7,8,4,15,1,12,14,8,8,2,13,4,6,9,2,1,11,7,15,5,12,11,9,3,7,14,3,10,10,0,5,6,0,13,15,3,1,13,8,4,14,7,6,15,11,2,3,8,4,14,9,12,7,0,2,1,13,10,12,6,0,9,5,11,10,5,0,13,14,8,7,10,11,1,10,3,4,15,13,4,1,2,5,11,8,6,12,7,6,12,9,0,3,5,2,14,15,9,10,13,0,7,9,0,14,9,6,3,3,4,15,6,5,10,1,2,13,8,12,5,7,14,11,12,4,11,2,15,8,1,13,1,6,10,4,13,9,0,8,6,15,9,3,8,0,7,11,4,1,15,2,14,12,3,5,11,10,5,14,2,7,12,7,13,13,8,14,11,3,5,0,6,6,15,9,0,10,3,1,4,2,7,8,2,5,12,11,1,12,10,4,14,15,9,10,3,6,15,9,0,0,6,12,10,11,1,7,13,13,8,15,9,1,4,3,5,14,11,5,12,2,7,8,2,4,14,2,14,12,11,4,2,1,12,7,4,10,7,11,13,6,1,8,5,5,0,3,15,15,10,13,3,0,9,14,8,9,6,4,11,2,8,1,12,11,7,10,1,13,14,7,2,8,13,15,6,9,15,12,0,5,9,6,10,3,4,0,5,14,3,12,10,1,15,10,4,15,2,9,7,2,12,6,9,8,5,0,6,13,1,3,13,4,14,14,0,7,11,5,3,11,8,9,4,14,3,15,2,5,12,2,9,8,5,12,15,3,10,7,11,0,14,4,1,10,7,1,6,13,0,11,8,6,13,4,13,11,0,2,11,14,7,15,4,0,9,8,1,13,10,3,14,12,3,9,5,7,12,5,2,10,15,6,8,1,6,1,6,4,11,11,13,13,8,12,1,3,4,7,10,14,7,10,9,15,5,6,0,8,15,0,14,5,2,9,3,2,12,13,1,2,15,8,13,4,8,6,10,15,3,11,7,1,4,10,12,9,5,3,6,14,11,5,0,0,14,12,9,7,2,7,2,11,1,4,14,1,7,9,4,12,10,14,8,2,13,0,15,6,12,10,9,13,0,15,3,3,5,5,6,8,11];e.substitute=function(t,e){for(var i=0,n=0;n<4;n++)i<<=4,i|=r[64*n+(t>>>18-6*n&63)];for(n=0;n<4;n++)i<<=4,i|=r[256+64*n+(e>>>18-6*n&63)];return i>>>0};var n=[16,25,12,11,3,20,4,15,31,17,9,6,27,14,1,22,30,24,8,18,0,5,29,23,13,19,2,26,10,21,28,7];e.permute=function(t){for(var e=0,i=0;i<n.length;i++)e<<=1,e|=t>>>n[i]&1;return e>>>0},e.padSplit=function(t,e,i){for(var r=t.toString(2);r.length<e;)r="0"+r;for(var n=[],s=0;s<e;s+=i)n.push(r.slice(s,s+i));return n.join(" ")}},7651:(t,e,i)=>{var r=i(8287).Buffer,n=i(855),s=i(4977),o=i(5747),a=i(6111),h=i(7914),l=i(8928),u=i(3639),c=i(9001),d=i(5931),f=i(7083),p=["RS256","RS384","RS512","ES256","ES384","ES512","HS256","HS384","HS512","none"];s&&p.splice(3,0,"PS256","PS384","PS512");var m={expiresIn:{isValid:function(t){return l(t)||d(t)&&t},message:'"expiresIn" should be a number of seconds or string representing a timespan'},notBefore:{isValid:function(t){return l(t)||d(t)&&t},message:'"notBefore" should be a number of seconds or string representing a timespan'},audience:{isValid:function(t){return d(t)||Array.isArray(t)},message:'"audience" must be a string or array'},algorithm:{isValid:a.bind(null,p),message:'"algorithm" must be a valid string enum value'},header:{isValid:c,message:'"header" must be an object'},encoding:{isValid:d,message:'"encoding" must be a string'},issuer:{isValid:d,message:'"issuer" must be a string'},subject:{isValid:d,message:'"subject" must be a string'},jwtid:{isValid:d,message:'"jwtid" must be a string'},noTimestamp:{isValid:h,message:'"noTimestamp" must be a boolean'},keyid:{isValid:d,message:'"keyid" must be a string'},mutatePayload:{isValid:h,message:'"mutatePayload" must be a boolean'}},g={iat:{isValid:u,message:'"iat" should be a number of seconds'},exp:{isValid:u,message:'"exp" should be a number of seconds'},nbf:{isValid:u,message:'"nbf" should be a number of seconds'}};function v(t,e,i,r){if(!c(i))throw new Error('Expected "'+r+'" to be a plain object.');Object.keys(i).forEach(function(n){var s=t[n];if(s){if(!s.isValid(i[n]))throw new Error(s.message)}else if(!e)throw new Error('"'+n+'" is not allowed in "'+r+'"')})}var y={audience:"aud",issuer:"iss",subject:"sub",jwtid:"jti"},b=["expiresIn","notBefore","noTimestamp","audience","issuer","subject","jwtid"];t.exports=function(t,e,i,s){"function"==typeof i?(s=i,i={}):i=i||{};var a="object"==typeof t&&!r.isBuffer(t),h=Object.assign({alg:i.algorithm||"HS256",typ:a?"JWT":void 0,kid:i.keyid},i.header);function l(t){if(s)return s(t);throw t}if(!e&&"none"!==i.algorithm)return l(new Error("secretOrPrivateKey must have a value"));if(void 0===t)return l(new Error("payload is required"));if(a){try{!function(t){v(g,!0,t,"payload")}(t)}catch(t){return l(t)}i.mutatePayload||(t=Object.assign({},t))}else{var u=b.filter(function(t){return void 0!==i[t]});if(u.length>0)return l(new Error("invalid "+u.join(",")+" option for "+typeof t+" payload"))}if(void 0!==t.exp&&void 0!==i.expiresIn)return l(new Error('Bad "options.expiresIn" option the payload already has an "exp" property.'));if(void 0!==t.nbf&&void 0!==i.notBefore)return l(new Error('Bad "options.notBefore" option the payload already has an "nbf" property.'));try{!function(t){v(m,!1,t,"options")}(i)}catch(t){return l(t)}var c=t.iat||Math.floor(Date.now()/1e3);if(i.noTimestamp?delete t.iat:a&&(t.iat=c),void 0!==i.notBefore){try{t.nbf=n(i.notBefore,c)}catch(t){return l(t)}if(void 0===t.nbf)return l(new Error('"notBefore" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}if(void 0!==i.expiresIn&&"object"==typeof t){try{t.exp=n(i.expiresIn,c)}catch(t){return l(t)}if(void 0===t.exp)return l(new Error('"expiresIn" should be a number of seconds or string representing a timespan eg: "1d", "20h", 60'))}Object.keys(y).forEach(function(e){var r=y[e];if(void 0!==i[e]){if(void 0!==t[r])return l(new Error('Bad "options.'+e+'" option. The payload already has an "'+r+'" property.'));t[r]=i[e]}});var d=i.encoding||"utf8";if("function"!=typeof s)return o.sign({header:h,payload:t,secret:e,encoding:d});s=s&&f(s),o.createSign({header:h,privateKey:e,payload:t,encoding:d}).once("error",s).once("done",function(t){s(null,t)})}},7653:(t,e,i)=>{"use strict";var r=i(8452),n=i(487),s=i(9211),o=i(9394),a=i(6576),h=n(o(),Object);r(h,{getPolyfill:o,implementation:s,shim:a}),t.exports=h},7691:(t,e,i)=>{"use strict";i.d(e,{w:()=>h});var r=i(4897),n=i(5062),s=i(4922),o=i(5644),a=i(6763);class h{renderer=new r.JeP;app=new r.mcf;trueSize=!0;background;foreground;logo;root=new r.mcf;particles;clock=new s.zD7;async init(){const t=window.innerHeight,e=window.innerWidth/2;await this.renderer.init(),this.renderer.resize(e,t),this.root.x=e/2,this.root.y=t/2,this.root.sortableChildren=!0,this.root.interactive=!0,this.app.addChild(this.root),await r.sP.load(["bg.jpg","fg.png","pixiLogo.png"]),this.background=r.kxk.from("bg.jpg"),this.background.anchor.set(.5),this.background.label="background",this.root.addChild(this.background),this.foreground=r.kxk.from("fg.png"),this.foreground.anchor.set(.5),this.foreground.zIndex=10,this.logo=r.kxk.from("pixiLogo.png"),this.logo.anchor.set(.5,.5),this.logo.position.set(e-64,32),this.logo.scale.set(.5,.5),this.logo.label="logo",this.root.addChild(this.logo),this.particles=new n.o(this.root,{forcedType:o.M2.Pixi})}event(t){"w"==t.key&&(this.trueSize?this.trueSize=!1:this.trueSize=!0,this.windowResize()),"p"==t.key&&this.particles.pause(),"r"==t.key&&this.particles.reset(),"q"==t.key&&this.particles.play(),"s"==t.key&&this.particles.stop()}detach(t){this.renderer.view.canvas instanceof HTMLCanvasElement?t.removeChild(this.renderer.view.canvas):a.error("renderer.view is not an HTMLCanvasElement")}add(t){this.renderer.view.canvas instanceof HTMLCanvasElement?t.appendChild(this.renderer.view.canvas):a.error("renderer.view is not an HTMLCanvasElement")}setBackground(t){t.onload=()=>{const e=new r.bEs({resource:t}),i=new r.gPd(e);this.background.texture=i,this.background.interactive=!0,this.background.scale.set(1920/t.naturalWidth,1080/t.naturalHeight)}}setForeground(t){t.onload=()=>{const e=new r.bEs({resource:t}),i=new r.gPd(e);this.foreground.texture=i,this.foreground.interactive=!0,this.foreground.scale.set(1920/t.naturalWidth,1080/t.naturalHeight)}}setParticlePosition(t,e){this.particles.setPosition(t,e,0)}updateParticlesPosition(t,e){const i=window.innerHeight,r=window.innerWidth/2;if(this.particles)if(this.trueSize)this.particles.setSpawnPosition(t-r/2,i/2-e,0);else{const n=1/r*1920;this.particles.setSpawnPosition((t-r/2)*n,(i/2-e)*n,0)}}setParticles(t){this.particles.setParameters(t)}setTexture(t){this.particles.setTexture(t)}stop(){this.particles.stop()}reset(){this.particles.reset()}play(){this.particles.play()}playOnce(){this.particles.playOnce()}windowResize(){const t=window.innerHeight,e=window.innerWidth/2;this.trueSize?(this.renderer.resize(e,t),this.root.position.set(e/2,t/2),this.root.scale.set(1,1),this.logo.x=e/2-64,this.logo.y=-t/2+32):(this.renderer.resize(e,t),this.root.position.set(e/2,t/2),this.root.scale.set(e/1920,e/1920),this.logo.x=-1e4,this.logo.y=-1e4)}animate(){const t=this.clock.getDelta();this.particles?.update(t),this.renderer.render({container:this.app,clear:!0,clearColor:0})}}},7714:(t,e,i)=>{"use strict";var r=i(7426),n=i(2287);function s(){if(!(this instanceof s))return new s;n.call(this),this.h=[3238371032,914150663,812702999,4144912697,4290775857,1750603025,1694076839,3204075428]}r.inherits(s,n),t.exports=s,s.blockSize=512,s.outSize=224,s.hmacStrength=192,s.padLength=64,s.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h.slice(0,7),"big"):r.split32(this.h.slice(0,7),"big")}},7758:(t,e,i)=>{"use strict";var r,n=i(6048).F,s=n.ERR_MISSING_ARGS,o=n.ERR_STREAM_DESTROYED;function a(t){if(t)throw t}function h(t){t()}function l(t,e){return t.pipe(e)}t.exports=function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];var u,c=function(t){return t.length?"function"!=typeof t[t.length-1]?a:t.pop():a}(e);if(Array.isArray(e[0])&&(e=e[0]),e.length<2)throw new s("streams");var d=e.map(function(t,n){var s=n<e.length-1;return function(t,e,n,s){s=function(t){var e=!1;return function(){e||(e=!0,t.apply(void 0,arguments))}}(s);var a=!1;t.on("close",function(){a=!0}),void 0===r&&(r=i(6238)),r(t,{readable:e,writable:n},function(t){if(t)return s(t);a=!0,s()});var h=!1;return function(e){if(!a&&!h)return h=!0,function(t){return t.setHeader&&"function"==typeof t.abort}(t)?t.abort():"function"==typeof t.destroy?t.destroy():void s(e||new o("pipe"))}}(t,s,n>0,function(t){u||(u=t),t&&d.forEach(h),s||(d.forEach(h),c(u))})});return e.reduce(l)}},7766:(t,e,i)=>{"use strict";var r=i(7426),n=i(6166),s=i(3349),o=r.rotr64_hi,a=r.rotr64_lo,h=r.shr64_hi,l=r.shr64_lo,u=r.sum64,c=r.sum64_hi,d=r.sum64_lo,f=r.sum64_4_hi,p=r.sum64_4_lo,m=r.sum64_5_hi,g=r.sum64_5_lo,v=n.BlockHash,y=[1116352408,3609767458,1899447441,602891725,3049323471,3964484399,3921009573,2173295548,961987163,4081628472,1508970993,3053834265,2453635748,2937671579,2870763221,3664609560,3624381080,2734883394,310598401,1164996542,607225278,1323610764,1426881987,3590304994,1925078388,4068182383,2162078206,991336113,2614888103,633803317,3248222580,3479774868,3835390401,2666613458,4022224774,944711139,264347078,2341262773,604807628,2007800933,770255983,1495990901,1249150122,1856431235,1555081692,3175218132,1996064986,2198950837,2554220882,3999719339,2821834349,766784016,2952996808,2566594879,3210313671,3203337956,3336571891,1034457026,3584528711,2466948901,113926993,3758326383,338241895,168717936,666307205,1188179964,773529912,1546045734,1294757372,1522805485,1396182291,2643833823,1695183700,2343527390,1986661051,1014477480,2177026350,1206759142,2456956037,344077627,2730485921,1290863460,2820302411,3158454273,3259730800,3505952657,3345764771,106217008,3516065817,3606008344,3600352804,1432725776,4094571909,1467031594,275423344,851169720,430227734,3100823752,506948616,1363258195,659060556,3750685593,883997877,3785050280,958139571,3318307427,1322822218,3812723403,1537002063,2003034995,1747873779,3602036899,1955562222,1575990012,2024104815,1125592928,2227730452,2716904306,2361852424,442776044,2428436474,593698344,2756734187,3733110249,3204031479,2999351573,3329325298,3815920427,3391569614,3928383900,3515267271,566280711,3940187606,3454069534,4118630271,4000239992,116418474,1914138554,174292421,2731055270,289380356,3203993006,460393269,320620315,685471733,587496836,852142971,1086792851,1017036298,365543100,1126000580,2618297676,1288033470,3409855158,1501505948,4234509866,1607167915,987167468,1816402316,1246189591];function b(){if(!(this instanceof b))return new b;v.call(this),this.h=[1779033703,4089235720,3144134277,2227873595,1013904242,4271175723,2773480762,1595750129,1359893119,2917565137,2600822924,725511199,528734635,4215389547,1541459225,327033209],this.k=y,this.W=new Array(160)}function _(t,e,i,r,n){var s=t&i^~t&n;return s<0&&(s+=4294967296),s}function x(t,e,i,r,n,s){var o=e&r^~e&s;return o<0&&(o+=4294967296),o}function w(t,e,i,r,n){var s=t&i^t&n^i&n;return s<0&&(s+=4294967296),s}function M(t,e,i,r,n,s){var o=e&r^e&s^r&s;return o<0&&(o+=4294967296),o}function S(t,e){var i=o(t,e,28)^o(e,t,2)^o(e,t,7);return i<0&&(i+=4294967296),i}function A(t,e){var i=a(t,e,28)^a(e,t,2)^a(e,t,7);return i<0&&(i+=4294967296),i}function E(t,e){var i=o(t,e,14)^o(t,e,18)^o(e,t,9);return i<0&&(i+=4294967296),i}function T(t,e){var i=a(t,e,14)^a(t,e,18)^a(e,t,9);return i<0&&(i+=4294967296),i}function R(t,e){var i=o(t,e,1)^o(t,e,8)^h(t,e,7);return i<0&&(i+=4294967296),i}function P(t,e){var i=a(t,e,1)^a(t,e,8)^l(t,e,7);return i<0&&(i+=4294967296),i}function C(t,e){var i=o(t,e,19)^o(e,t,29)^h(t,e,6);return i<0&&(i+=4294967296),i}function I(t,e){var i=a(t,e,19)^a(e,t,29)^l(t,e,6);return i<0&&(i+=4294967296),i}r.inherits(b,v),t.exports=b,b.blockSize=1024,b.outSize=512,b.hmacStrength=192,b.padLength=128,b.prototype._prepareBlock=function(t,e){for(var i=this.W,r=0;r<32;r++)i[r]=t[e+r];for(;r<i.length;r+=2){var n=C(i[r-4],i[r-3]),s=I(i[r-4],i[r-3]),o=i[r-14],a=i[r-13],h=R(i[r-30],i[r-29]),l=P(i[r-30],i[r-29]),u=i[r-32],c=i[r-31];i[r]=f(n,s,o,a,h,l,u,c),i[r+1]=p(n,s,o,a,h,l,u,c)}},b.prototype._update=function(t,e){this._prepareBlock(t,e);var i=this.W,r=this.h[0],n=this.h[1],o=this.h[2],a=this.h[3],h=this.h[4],l=this.h[5],f=this.h[6],p=this.h[7],v=this.h[8],y=this.h[9],b=this.h[10],R=this.h[11],P=this.h[12],C=this.h[13],I=this.h[14],k=this.h[15];s(this.k.length===i.length);for(var B=0;B<i.length;B+=2){var O=I,L=k,U=E(v,y),D=T(v,y),N=_(v,0,b,0,P),F=x(0,y,0,R,0,C),z=this.k[B],G=this.k[B+1],j=i[B],V=i[B+1],H=m(O,L,U,D,N,F,z,G,j,V),W=g(O,L,U,D,N,F,z,G,j,V);O=S(r,n),L=A(r,n),U=w(r,0,o,0,h),D=M(0,n,0,a,0,l);var X=c(O,L,U,D),q=d(O,L,U,D);I=P,k=C,P=b,C=R,b=v,R=y,v=c(f,p,H,W),y=d(p,p,H,W),f=h,p=l,h=o,l=a,o=r,a=n,r=c(H,W,X,q),n=d(H,W,X,q)}u(this.h,0,r,n),u(this.h,2,o,a),u(this.h,4,h,l),u(this.h,6,f,p),u(this.h,8,v,y),u(this.h,10,b,R),u(this.h,12,P,C),u(this.h,14,I,k)},b.prototype._digest=function(t){return"hex"===t?r.toHex32(this.h,"big"):r.split32(this.h,"big")}},7790:()=>{},7816:(t,e,i)=>{"use strict";var r=i(6698),n=i(392),s=i(2861).Buffer,o=[1518500249,1859775393,-1894007588,-899497514],a=new Array(80);function h(){this.init(),this._w=a,n.call(this,64,56)}function l(t){return t<<5|t>>>27}function u(t){return t<<30|t>>>2}function c(t,e,i,r){return 0===t?e&i|~e&r:2===t?e&i|e&r|i&r:e^i^r}r(h,n),h.prototype.init=function(){return this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878,this._e=3285377520,this},h.prototype._update=function(t){for(var e=this._w,i=0|this._a,r=0|this._b,n=0|this._c,s=0|this._d,a=0|this._e,h=0;h<16;++h)e[h]=t.readInt32BE(4*h);for(;h<80;++h)e[h]=e[h-3]^e[h-8]^e[h-14]^e[h-16];for(var d=0;d<80;++d){var f=~~(d/20),p=l(i)+c(f,r,n,s)+a+e[d]+o[f]|0;a=s,s=n,n=u(r),r=i,i=p}this._a=i+this._a|0,this._b=r+this._b|0,this._c=n+this._c|0,this._d=s+this._d|0,this._e=a+this._e|0},h.prototype._hash=function(){var t=s.allocUnsafe(20);return t.writeInt32BE(0|this._a,0),t.writeInt32BE(0|this._b,4),t.writeInt32BE(0|this._c,8),t.writeInt32BE(0|this._d,12),t.writeInt32BE(0|this._e,16),t},t.exports=h},7901:(t,e,i)=>{"use strict";i.d(e,{K:()=>X});var r,n=i(4922),s=i(9437),o=i(161);class a{position;scene;cornerTRGeo;cornerTLGeo;cornerBRGeo;cornerBLGeo;rectTopGeo;rectMidGeo;rectBotGeo;cornerTR;cornerTL;cornerBR;cornerBL;rectTop;rectMid;rectBot;bordercornerTRGeo;bordercornerTLGeo;bordercornerBRGeo;bordercornerBLGeo;borderrectTopGeo;borderrectMidGeo;borderrectBotGeo;bordercornerTR;bordercornerTL;bordercornerBR;bordercornerBL;borderrectTop;borderrectMid;borderrectBot;bgColor;borderColor;topBgColor;bgMaterial;topBgMaterial;borderMaterial;cornerRadius=10;bordertickness=2;width=236;height=32;minimizeHeight=32;constructor(t,e,i){this.height=i*this.height,this.position=t,this.scene=e,this.bgColor=new n.Q1f(.2,.2,.2),this.topBgColor=new n.Q1f(.5,.5,.5),this.borderColor=new n.Q1f(.5,.5,.5),this.bgMaterial=new n.V9B({color:this.bgColor}),this.topBgMaterial=new n.V9B({color:this.topBgColor}),this.borderMaterial=new n.V9B({color:this.borderColor}),this.cornerTLGeo=new n.tcD(this.cornerRadius,16),this.cornerTRGeo=new n.tcD(this.cornerRadius,16),this.cornerBLGeo=new n.tcD(this.cornerRadius,16),this.cornerBRGeo=new n.tcD(this.cornerRadius,16),this.rectTopGeo=new n.bdM(this.width,2*this.cornerRadius),this.rectMidGeo=new n.bdM(this.width+2*this.cornerRadius,this.height),this.rectBotGeo=new n.bdM(this.width,2*this.cornerRadius),this.cornerTR=new n.eaF(this.cornerTLGeo,this.topBgMaterial),this.cornerTL=new n.eaF(this.cornerTRGeo,this.topBgMaterial),this.cornerBR=new n.eaF(this.cornerBLGeo,this.bgMaterial),this.cornerBL=new n.eaF(this.cornerBRGeo,this.bgMaterial),this.rectTop=new n.eaF(this.rectTopGeo,this.topBgMaterial),this.rectMid=new n.eaF(this.rectMidGeo,this.bgMaterial),this.rectBot=new n.eaF(this.rectBotGeo,this.bgMaterial),this.cornerTR.name="frame",this.cornerTL.name="frame",this.cornerBR.name="frame",this.cornerBL.name="frame",this.rectTop.name="frame",this.rectMid.name="frame",this.rectBot.name="frame",this.scene.add(this.cornerTR),this.scene.add(this.cornerTL),this.scene.add(this.cornerBR),this.scene.add(this.cornerBL),this.scene.add(this.rectTop),this.scene.add(this.rectMid),this.scene.add(this.rectBot),this.bordercornerTLGeo=new n.tcD(this.cornerRadius+this.bordertickness,16),this.bordercornerTRGeo=new n.tcD(this.cornerRadius+this.bordertickness,16),this.bordercornerBLGeo=new n.tcD(this.cornerRadius+this.bordertickness,16),this.bordercornerBRGeo=new n.tcD(this.cornerRadius+this.bordertickness,16),this.borderrectTopGeo=new n.bdM(this.width,2*(this.cornerRadius+this.bordertickness)),this.borderrectMidGeo=new n.bdM(this.width+2*(this.cornerRadius+this.bordertickness),this.height),this.borderrectBotGeo=new n.bdM(this.width,2*(this.cornerRadius+this.bordertickness)),this.bordercornerTR=new n.eaF(this.bordercornerTLGeo,this.borderMaterial),this.bordercornerTL=new n.eaF(this.bordercornerTRGeo,this.borderMaterial),this.bordercornerBR=new n.eaF(this.bordercornerBLGeo,this.borderMaterial),this.bordercornerBL=new n.eaF(this.bordercornerBRGeo,this.borderMaterial),this.borderrectTop=new n.eaF(this.borderrectTopGeo,this.borderMaterial),this.borderrectMid=new n.eaF(this.borderrectMidGeo,this.borderMaterial),this.borderrectBot=new n.eaF(this.borderrectBotGeo,this.borderMaterial),this.bordercornerTR.name="border een",this.bordercornerTL.name="border twee",this.bordercornerBR.name="border drie",this.bordercornerBL.name="border vier",this.borderrectTop.name="border vijf",this.borderrectMid.name="border zes",this.borderrectBot.name="border zeven",this.scene.add(this.bordercornerTR),this.scene.add(this.bordercornerTL),this.scene.add(this.bordercornerBR),this.scene.add(this.bordercornerBL),this.scene.add(this.borderrectTop),this.scene.add(this.borderrectMid),this.scene.add(this.borderrectBot),this.maximize()}setPosition(t){this.position=t,this.maximize()}dispose(){this.scene.remove(this.bordercornerTR),this.scene.remove(this.bordercornerTL),this.scene.remove(this.bordercornerBR),this.scene.remove(this.bordercornerBL),this.scene.remove(this.borderrectTop),this.scene.remove(this.borderrectMid),this.scene.remove(this.borderrectBot),this.scene.remove(this.cornerTR),this.scene.remove(this.cornerTL),this.scene.remove(this.cornerBR),this.scene.remove(this.cornerBL),this.scene.remove(this.rectTop),this.scene.remove(this.rectMid),this.scene.remove(this.rectBot),this.bgColor=void 0,this.topBgColor=void 0,this.borderColor=void 0,this.bgMaterial=void 0,this.topBgMaterial=void 0,this.borderMaterial=void 0,o.TP.disposeObject3D(this.bordercornerTR),o.TP.disposeObject3D(this.bordercornerTL),o.TP.disposeObject3D(this.bordercornerBR),o.TP.disposeObject3D(this.bordercornerBL),o.TP.disposeObject3D(this.borderrectTop),o.TP.disposeObject3D(this.borderrectMid),o.TP.disposeObject3D(this.borderrectBot),o.TP.disposeObject3D(this.cornerTR),o.TP.disposeObject3D(this.cornerTL),o.TP.disposeObject3D(this.cornerBR),o.TP.disposeObject3D(this.cornerBL),o.TP.disposeObject3D(this.rectTop),o.TP.disposeObject3D(this.rectMid),o.TP.disposeObject3D(this.rectBot),this.cornerTLGeo=void 0,this.cornerTRGeo=void 0,this.cornerBLGeo=void 0,this.cornerBRGeo=void 0,this.rectTopGeo=void 0,this.rectMidGeo=void 0,this.rectBotGeo=void 0,this.cornerTR=void 0,this.cornerTL=void 0,this.cornerBR=void 0,this.cornerBL=void 0,this.rectTop=void 0,this.rectMid=void 0,this.rectBot=void 0,this.bordercornerTLGeo=void 0,this.bordercornerTRGeo=void 0,this.bordercornerBLGeo=void 0,this.bordercornerBRGeo=void 0,this.borderrectTopGeo=void 0,this.borderrectMidGeo=void 0,this.borderrectBotGeo=void 0,this.bordercornerTR=void 0,this.bordercornerTL=void 0,this.bordercornerBR=void 0,this.bordercornerBL=void 0,this.borderrectTop=void 0,this.borderrectMid=void 0,this.borderrectBot=void 0}maximize(){this.cornerTR.position.set(this.position.x+this.width/2,this.position.y,10),this.cornerTL.position.set(this.position.x-this.width/2,this.position.y,10),this.cornerBR.position.set(this.position.x+this.width/2,this.position.y-this.height,10),this.cornerBL.position.set(this.position.x-this.width/2,this.position.y-this.height,10),this.rectTop.position.set(this.position.x,this.position.y,10),this.rectMid.position.set(this.position.x,this.position.y-this.height/2,10),this.rectBot.position.set(this.position.x,this.position.y-this.height,10),this.bordercornerTR.position.set(this.position.x+this.width/2,this.position.y,0),this.bordercornerTL.position.set(this.position.x-this.width/2,this.position.y,0),this.bordercornerBR.position.set(this.position.x+this.width/2,this.position.y-this.height,0),this.bordercornerBL.position.set(this.position.x-this.width/2,this.position.y-this.height,0),this.borderrectTop.position.set(this.position.x,this.position.y,0),this.borderrectMid.position.set(this.position.x,this.position.y-this.height/2,0),this.borderrectBot.position.set(this.position.x,this.position.y-this.height,0)}minimize(){this.cornerTR.position.set(this.position.x+this.width/2,this.position.y,0),this.cornerTL.position.set(this.position.x-this.width/2,this.position.y,0),this.cornerBR.position.set(this.position.x+this.width/2,this.position.y-this.minimizeHeight,0),this.cornerBL.position.set(this.position.x-this.width/2,this.position.y-this.minimizeHeight,0),this.rectTop.position.set(this.position.x,this.position.y,0),this.rectMid.position.set(this.position.x,this.position.y-this.minimizeHeight/2,0),this.rectBot.position.set(this.position.x,this.position.y-this.minimizeHeight,0),this.bordercornerTR.position.set(this.position.x+this.width/2,this.position.y,0),this.bordercornerTL.position.set(this.position.x-this.width/2,this.position.y,0),this.bordercornerBR.position.set(this.position.x+this.width/2,this.position.y-this.height,0),this.bordercornerBL.position.set(this.position.x-this.width/2,this.position.y-this.height,0),this.borderrectTop.position.set(this.position.x,this.position.y,0),this.borderrectMid.position.set(this.position.x,this.position.y-this.height/2,0),this.borderrectBot.position.set(this.position.x,this.position.y-this.height,0)}}!function(t){t.Title="title",t.Number="number",t.List="list",t.Shape="shape",t.MinMax="minMax",t.MinMaxOptions="minMaxOptions",t.Color="color",t.Label="label",t.Texture="texture",t.Button="button",t.Path="path",t.Checkbox="checkbox",t.Move="move"}(r||(r={}));const h={type:r.Title,name:"Title",values:[0],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},l=[h,{type:r.Number,name:"Amount",values:[10],min:2,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.List,name:"Play Mode",values:[1],min:1,max:3,seed:0,list:["Forward","Reversed","PingPong"],times:[],beziers:[],texture:"",buttonsize:1},{name:"Mode",type:r.List,values:[1],min:1,max:3,seed:0,list:["Burst","Loop"],times:[],beziers:[],texture:"",buttonsize:1},{name:"Burst Time",type:r.Number,values:[3e3],min:0,max:1e4,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{name:"Seed",type:r.Number,values:[666],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{name:"Delay",type:r.Number,values:[0],min:0,max:1e4,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{name:"Lifetime",type:r.MinMax,values:[4,4],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Label,name:"Origin",values:[0],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Shape,name:"Shape",values:[],min:-9999,max:9999,seed:1,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Position X",values:[-100,100],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Position Y",values:[0,0],min:-9999,max:9999,seed:4,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Rotation",values:[0,0],min:-9999,max:9999,seed:3,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Scale",values:[100,100],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Scale X",values:[100,100],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Scale Y",values:[100,100],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Angles",values:[-60,60],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Distance",values:[200,200],min:-9999,max:9999,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.Label,name:"Speeds",values:[0],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Angle",values:[0,0],min:-9999,max:9999,seed:3,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Speed",values:[0,0],min:-9999,max:9999,seed:6,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Acceleration",values:[0,0],min:-9999,max:9999,seed:6,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Speed X",values:[0,0],min:-9999,max:9999,seed:5,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Speed Y",values:[0,0],min:-9999,max:9999,seed:6,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Acceleration X",values:[0,0],min:-9999,max:9999,seed:3,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Acceleration Y",values:[0,0],min:-9999,max:9999,seed:3,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMax,name:"Rotation Speed",values:[0,0],min:-9999,max:9999,seed:3,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Label,name:"Material",values:[0],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.MinMaxOptions,name:"Opacity",values:[1,1],min:0,max:1,seed:3,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.List,name:"Blend Mode",values:[1],min:1,max:4,seed:0,list:["Normal","Add","Multiply","Screen"],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Color,name:"Color",values:[1,1,1],min:0,max:1,seed:0,list:[],times:[0],beziers:[],texture:"",buttonsize:1},{type:r.Texture,name:"Texture",values:[0],min:0,max:1,seed:0,list:[],times:[],beziers:[],texture:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAIAAAACACAYAAADDPmHLAAAACXBIWXMAABcSAAAXEgFnn9JSAAAKKWlUWHRYTUw6Y29tLmFkb2JlLnhtcAAAAAAAPD94cGFja2V0IGJlZ2luPSLvu78iIGlkPSJXNU0wTXBDZWhpSHpyZVN6TlRjemtjOWQiPz4gPHg6eG1wbWV0YSB4bWxuczp4PSJhZG9iZTpuczptZXRhLyIgeDp4bXB0az0iQWRvYmUgWE1QIENvcmUgNi4wLWMwMDYgNzkuMTY0NjQ4LCAyMDIxLzAxLzEyLTE1OjUyOjI5ICAgICAgICAiPiA8cmRmOlJERiB4bWxuczpyZGY9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkvMDIvMjItcmRmLXN5bnRheC1ucyMiPiA8cmRmOkRlc2NyaXB0aW9uIHJkZjphYm91dD0iIiB4bWxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RFdnQ9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZUV2ZW50IyIgeG1sbnM6c3RSZWY9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cGhvdG9zaG9wPSJodHRwOi8vbnMuYWRvYmUuY29tL3Bob3Rvc2hvcC8xLjAvIiB4bWxuczp4bXA9Imh0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC8iIHhtbG5zOnRpZmY9Imh0dHA6Ly9ucy5hZG9iZS5jb20vdGlmZi8xLjAvIiB4bWxuczpleGlmPSJodHRwOi8vbnMuYWRvYmUuY29tL2V4aWYvMS4wLyIgeG1wTU06RG9jdW1lbnRJRD0iYWRvYmU6ZG9jaWQ6cGhvdG9zaG9wOjc4ZTE4OGU0LTI4NzQtZDA0NC1iYTMzLWU0YWNkN2JkMDE2OCIgeG1wTU06SW5zdGFuY2VJRD0ieG1wLmlpZDphNjY4NTM0Yy00ZTUzLWMzNGUtODM3Yy1kMmI2YzBmMTEwZmIiIHhtcE1NOk9yaWdpbmFsRG9jdW1lbnRJRD0iMzU4MTBBNkQxMkIwQ0RGREJGOTlCMjI2RjY0QTNGMEUiIGRjOmZvcm1hdD0iaW1hZ2UvcG5nIiBwaG90b3Nob3A6Q29sb3JNb2RlPSIzIiBwaG90b3Nob3A6SUNDUHJvZmlsZT0ic1JHQiBJRUM2MTk2Ni0yLjEiIHhtcDpDcmVhdGVEYXRlPSIyMDIxLTAzLTEyVDE5OjQ5OjE5KzAxOjAwIiB4bXA6TW9kaWZ5RGF0ZT0iMjAyMS0wMy0xN1QxMzo0OTozNiswMTowMCIgeG1wOk1ldGFkYXRhRGF0ZT0iMjAyMS0wMy0xN1QxMzo0OTozNiswMTowMCIgdGlmZjpJbWFnZVdpZHRoPSIzNDUiIHRpZmY6SW1hZ2VMZW5ndGg9IjM0NSIgdGlmZjpQaG90b21ldHJpY0ludGVycHJldGF0aW9uPSIyIiB0aWZmOlNhbXBsZXNQZXJQaXhlbD0iMyIgdGlmZjpYUmVzb2x1dGlvbj0iMTUwLzEiIHRpZmY6WVJlc29sdXRpb249IjE1MC8xIiB0aWZmOlJlc29sdXRpb25Vbml0PSIyIiBleGlmOkV4aWZWZXJzaW9uPSIwMjMxIiBleGlmOkNvbG9yU3BhY2U9IjY1NTM1IiBleGlmOlBpeGVsWERpbWVuc2lvbj0iMzQ1IiBleGlmOlBpeGVsWURpbWVuc2lvbj0iMzQ1Ij4gPHhtcE1NOkhpc3Rvcnk+IDxyZGY6U2VxPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0ic2F2ZWQiIHN0RXZ0Omluc3RhbmNlSUQ9InhtcC5paWQ6OTM0OTZiMDQtMGViZS0yNjQzLWEyNzQtZTAwNGJkODk4YWM2IiBzdEV2dDp3aGVuPSIyMDIxLTAzLTEyVDIwOjIyOjExKzAxOjAwIiBzdEV2dDpzb2Z0d2FyZUFnZW50PSJBZG9iZSBQaG90b3Nob3AgMjIuMiAoV2luZG93cykiIHN0RXZ0OmNoYW5nZWQ9Ii8iLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249ImNvbnZlcnRlZCIgc3RFdnQ6cGFyYW1ldGVycz0iZnJvbSBpbWFnZS9qcGVnIHRvIGltYWdlL3BuZyIvPiA8cmRmOmxpIHN0RXZ0OmFjdGlvbj0iZGVyaXZlZCIgc3RFdnQ6cGFyYW1ldGVycz0iY29udmVydGVkIGZyb20gaW1hZ2UvanBlZyB0byBpbWFnZS9wbmciLz4gPHJkZjpsaSBzdEV2dDphY3Rpb249InNhdmVkIiBzdEV2dDppbnN0YW5jZUlEPSJ4bXAuaWlkOjJhZWQ4MjhlLWZmZGQtMTU0ZS05NjZiLTVmYmU1NThiMjEyNCIgc3RFdnQ6d2hlbj0iMjAyMS0wMy0xMlQyMDoyMjoxMSswMTowMCIgc3RFdnQ6c29mdHdhcmVBZ2VudD0iQWRvYmUgUGhvdG9zaG9wIDIyLjIgKFdpbmRvd3MpIiBzdEV2dDpjaGFuZ2VkPSIvIi8+IDxyZGY6bGkgc3RFdnQ6YWN0aW9uPSJzYXZlZCIgc3RFdnQ6aW5zdGFuY2VJRD0ieG1wLmlpZDphNjY4NTM0Yy00ZTUzLWMzNGUtODM3Yy1kMmI2YzBmMTEwZmIiIHN0RXZ0OndoZW49IjIwMjEtMDMtMTdUMTM6NDk6MzYrMDE6MDAiIHN0RXZ0OnNvZnR3YXJlQWdlbnQ9IkFkb2JlIFBob3Rvc2hvcCAyMi4yIChXaW5kb3dzKSIgc3RFdnQ6Y2hhbmdlZD0iLyIvPiA8L3JkZjpTZXE+IDwveG1wTU06SGlzdG9yeT4gPHhtcE1NOkRlcml2ZWRGcm9tIHN0UmVmOmluc3RhbmNlSUQ9InhtcC5paWQ6OTM0OTZiMDQtMGViZS0yNjQzLWEyNzQtZTAwNGJkODk4YWM2IiBzdFJlZjpkb2N1bWVudElEPSIzNTgxMEE2RDEyQjBDREZEQkY5OUIyMjZGNjRBM0YwRSIgc3RSZWY6b3JpZ2luYWxEb2N1bWVudElEPSIzNTgxMEE2RDEyQjBDREZEQkY5OUIyMjZGNjRBM0YwRSIvPiA8dGlmZjpCaXRzUGVyU2FtcGxlPiA8cmRmOlNlcT4gPHJkZjpsaT44PC9yZGY6bGk+IDxyZGY6bGk+ODwvcmRmOmxpPiA8cmRmOmxpPjg8L3JkZjpsaT4gPC9yZGY6U2VxPiA8L3RpZmY6Qml0c1BlclNhbXBsZT4gPC9yZGY6RGVzY3JpcHRpb24+IDwvcmRmOlJERj4gPC94OnhtcG1ldGE+IDw/eHBhY2tldCBlbmQ9InIiPz5ZPTNUAAASBElEQVR4nO2dyY8cVx3HPz0z7Zmxx+Pd8cTGcSAkgFgTIOLAGnYJDrkhDggOXBB/DTcO3JDgAEiIRYgEKQgRFkFYQggQIITgxNt4vM3W09Mcfu+r96vX1dvYcXXX669Uqq7qV0vX7/t+63vVjU6nQ8ZohHW2D2Gu6huoGA33OUsSzFR9AxWiQZEAWWJKgLyfQdY/voP9/lky1gQ5EwBM8E0yfg7Z/vCAGcwRnmqATDFH5pHQlAAwz1QDZAtpgCkBMsUs0yggWzSIJqBZ8b1UhtwJ0MQIMFvxvVSGnAkAsA/Yz9QEZIldIgGyfQ7Z/nAsFSwCZJsLyJkAMxgBFpiagCwhAiwyJUCWkAk4zDQMzBJtYAk4w5QA2eII8EZME2SJ3AlwDLgfSwZlidwJsACsMNUA2WIBOB7WWSJ3AixjIeCBqm+kKuROgP1hfazSu6gQOROgQXT+jld5I1UiZwLMEFX/wSpvpErUjQCjzPaZBw6Fz1MTUAM0GI0AC0QNsDLEecv2TzzqRACPYYSjQhBYPWCUXMAMoxNuLFEnAjTcWlO++mEZSwUDHKW3H9ChOHM4FX7D7Zs41IUAZcIfJJATGAn0+fAerjXVAGOEtCcOEsxBogk4znCOoJ7XxPd8oU4E6GDj/BrE8f79Jn0cI5aBD1DMBaS93F9jhqhlZojmYSKJUBcCSPheQJr42aRcOCeTba8BvJ1P0Sj5Xn7CxD3PibvhAUgdNgmr7HcuJdtHStqkr42RZvHnm8ieL9SNAFLJ6csfUqFBt9NXlgvw6l3zCD0JpHmEXSYMdRwOLaFJ+F5NN7ChYNCd/z/tPkuQ3umTT+GJ1EnWE4c6aYD0lW/eUfOOoZCaAO8DiCw6Z3qeBjUQPkw+AbxAIKp/HxFIdfuQrQmcSs51kiIpdonaQg7lLEWHM33JVOpzjH2uYBIJkIZ3EoR3AL3tbhLfA6Tfe4QYBajtSaJf4OP8ZrimzuOvtYORwZsGfZ8KfSyf9ST5AJrIsUnskS2KD1uC82Zgjm5nbZnugaCLxMygNx+z4boikTTLblhmMU3RCZ933WdpkKkGuAPQgz+OPeAWJjSp5RQ+GmhiQhThj9MdBSwD97htmRd/rATpnURdY5Eo8GW6hT6WvsIkEQBi7z+L9eANoknw8H4AmAD9iyBW6C7+zAP3uW0/d1BmoIMJuU3UNruh7UbYvjcc57UQTAlw25A6vxi234H1uu2Stql/oBdBiCgrJW3BhAfRcVwIi3+JhATZJpKvFa7xLmyc4RpRG4w1qiZAWlYdBD38/wC3gE9glbydsH8WE4ZX1XL+5jFhztEdAQgiQMO1PxTWEqhsv3IKLcypfByrKfzL3Y/ajy2qJgAUQ6deRRjd5w6xJz4HrAIfA94Q9rUx9Ss17WsCGgBylN4EUDJoFjMRByg6g9tEjdIK93M/8KVw7t9S7viNpfqH6gngQzcJysfsZcRQ7+sAv8D8gk8BjxBDMzlsvr0SQUfoPQRMzmETywn4dwd4714q/zHgK+H774d76VV86oVRteAdRdUEgGLMLpu6zy1N18573QuYUH4G3AQ+jAnkGOaQyQmUrZY9P04kgJw63cMZ4Fxovx/r1RKoHMmbWM7gi8CXw718G9NG+4hEKev1ZYL221kSQPBE8NpAhFAcvhjWUvFrwK+wXvlB4OOYWlaSRpBTd5pYB9hN1ieAhzC7v0iRhC3MBDwMfBVT+zeAbwAvu3vu5fz50Upa+3qFyH1XSTAuiSCFVWlSx9fddzGhansLs9MbwPOYYN+NCfAB4KfA3ykSagl4PeYH6Bq+tx4A3gK8immSrbC/g2mEDwGfwbTEK8B3gWeJCaBNinmJtMeXqXkfrvok1l3BuBAAoipOCzfyCaQN2m7/LHFY1+8w5+7h0P6zwJ+Bf4djljGSvJ2Y8/flY+Fh4BomlKuYoM9i5uXdGDEuYsJ/gpgk8mlhocyRlYnAbVcWKYwTAWSP9VnrDtGp20fsRfL05zGBXgX+gNnx14V9HwdeAi5hgjuFaYg0T+AF9WZMq1wJ53wrFt8/FPZvAz8HfhSOWyQ6hdC/x3v/QEubKQG6kDpnEMMvn/nTw53DBHEZ+DVGgEPE7J5UdBMjCMnxHvdivfl6uP4ZzHe4Ea7xNPAdYB3TKiJh6thpLUG3KPoH6vmVhojjTgCvHhuYjZUWWAifpVqXwnIByxGcw0K+o5igFl27fmhiUcJKuPYCJuwFzJz8ADML92BE8X6J7l12fRfTGDIPvte36TY/dx3jTAD1Hj1g7dd3PlxsEDNyDUx9v4q9/+dQaKN5gBJMvwhI4d9mWJYx7fITzJzcG/YvuvMp5GyHe1av33bbEnqldt9jXAkgSPAtooNVFiotYmr4QFgOYb22Q+zx6eyeFD5hpLZzmPe/BfwT8wlkWq6H9jvh/raIBNh2+3aI2szb/rHAMATwY9+HvXE/ckbw4Zy2vTB9BOBH4kC3yvQPUQ94FhM6mLO3hPXSHawHq32vKWNpMkZZvznM/q9jUcRNTAscDudvUxT8VrL24wfSUUT+Weia2k6znr3gzc/IWmUYAvTLaKUX1I/bTbb992kPUBsJ2Dt/vqgC0aZuE4UNMXN3L5YDWCH6AMOmZsucONy9HMF6/xxGglUsKtCglJ1wT1sUC0aKWMqSPV64aUcYtdPtSavslQDpPt28er7StenQ6bIfltrDQT9kH5YAWsYyd6ewnnkWKwqdxTz/IxQnie4lw6Z7OYwRSxNN9mEVyfNhuYqRYZhzpRBJ0tyA/77fM/F+kT/XUIRojNGfR+/DhHaQ2NuOYWnbk5igV4gTOQ+6pZ9wPSFHRfpwwYSzHpZLGBFeDst/MedzNXx3EStbjy32SoBeNko2U1k6jajZj9nkw5gAj2GCU4h2DOvFJ0NbFWJu5wWO8vRvhwDQba4GQc7fKvA/jBSXsfD0CtGHWMUyjiKTzIkPGXtBNQTfzmtfrwHKzFn8QUMSwM+G8ZMjfaGmgfXWN2HZswcxVXwGE/qdKjzJR1CdYDfZFiHlGKYOFtyeOdD5NSB0L2hjUcQaRoLrGDFuhn2Xw+d1zAHdCO1uEP2ibWKYukMx3yAi+ZAUSpzEUcJAX73ygleZVTX0DWxUzDqmFg+5ZTksh7FwzQ/UHOU+vKPkhe/9Cy/81KYOi17H+euUEc77PGXX07iEI0Pexxb2TF8A/gY8g5keyeGWu6YPOf26FKOYAD+u3n/Wj9a+NsZKfafvF4mDLGQS9mOEWMEya/dgWuQoRpiDod0oL3Hy4Rb0FkKvY9OsXurRCzPsTZN47GA9W73/CmYermO9/ZpbroblGpaJVB4CillTX+IeGBYOQ4BBXuhrASV1DmHa4jRW478PcwaPYb3nRFiGfc3bIH+gTNC7WA9sMpq2kq2/jPXQG5jdv44J8CXML7iECXUjtLs5wjVuG+MUBYyCJqY5jhPJcRYL1e7HcgBH6Z4SNogAZVnGMnu/jgnzIubonQ+fr4T1K5gtv0J09NKcxl5QVr72KPN3+uJ2CFCmGQapxDSkSs+V2na1VXIpTedq5G6TqBHOAO8BHsVqAcvsLZrw6rOFhXcvAH8Ky0uY4F/BhDwq/CwjKPfa0/0ioU+WqQzdcscMnR28nVTwIOGnvSltnwqb5LN34uYoOqDzxHBRQ72WwudNTO1ewrSCv96w4aB3oNrhXM9iztdfMIdMHvkB4oAQ73mrx6dZv9RBLXsuHj7aUWHMp5KVZdQ1RkoEDZsJHOZkw2QMe+3XdjqLxme3NCrIRx7+xQ8aI3gTs7MiigZqDgrb0ogC4hAvDQlfDd+dxghwK7TZCNfVgJE016/fouuk4waHSWT5TuLzL2XPcmi1vtdU8O0g1SJl5sBHGH6ouB8trOM7RCFI4PuxtPBi2C9zobx8mQfvk1u6doeY698leuNtzDGUWhbZ9HtUBNpxx/ZTxYNSvWX7RulwPTEO5eDU9vm5AD755P/qvUVxBpDU6g1sUOf7MX9gnVjAWQvtDtLfDKjYNENMtqxh0chJ4I9h3xJxlI83TYIIpe/vhBN4xzEOBIBugeuzH0Kth6jSa1px3MGqgR8B3kacIHIeE+A6JvwH6P8vYR3Me7+FCXgGcwA3sQjjCPBXigkXn5FUCly/Q/eMazM2oVfVBPA2Pk01ezWt3uPtoezgHHGC6EeBT2PqeQsT5JOYT3AflnCaxwZ49sIVzNFTvv4wFlLewIjzXmIRSH88Ld8hFayfUg7FUUNjQYKqCQBR+J4McpR8VssLXWq1SUyDPg58MuxbxQaHPonZ7VOYBvgXJqh+BHg+HHsDi/GvYVrjwXDsCvDO8N1VjFAqPPnyszdtfhxASupKUTUBGiWfUzUpEqTbTeIonPcCn8fU8z8wwf8QU9unMEfwAqYVljEtoehA6WsJ7hlsePkBTPjnsfz7c0Tf4jRmZp7GvH8/JNyHeGkUo+v5t5Z4R/iua4WqCQDdxRMo9v40PNNIXcXa57BpWieApzDhP40J+B5i5W0WE+hzYX2i5Lrb2MjfS+GaW+G6LYwYF7Ak0+sxAlzEzAXheqrC+UEoaeLL5zbS/P1dxzgQoJMsUO4oSf1LIG3MPn8BE+b3sPH6LxFHDYlICttWMSFfCMf4yIPw/X+xXr2fOOBTiajnsSTT+zACPEqs9e9i5kClWa8FfKmaZH+lvsCdqtHvFV7wvqLVL9ctH2AJ+BwWmn0T+Bpm45eIJNG5NTy7hdnul8P50vcLXQJexPyKdaKvofV+4vDwJzDV/0jYr3v32UCtpRl8tnAsHMGqNcCwIZF3DjU8/DGsl38di80hRgSaQewfukbqXsF6uT+37LCKOfOhvRJLygkoAbUO/Ca0/QBmFp4imowUXs17TeAH0FaCqjXAsPCaYhabwLkP+BZR+HqPn588qjh8AxOaMnSvuHN7gVzGcgatcMwmMRewQBz7L1K8CPw4bL+NOAVt2N9SuRaYFAJAdATPYQ/uJ5i9hzhrWN68z5VvuEXTvc+78/r3CLxKzARuEid2pOlrEXEGMxu/xMzAWXfdXtU9f44y/+euYpIIAKbytzBP/nrY59OsvpLYIdpfCVXtvAnwCaf/hbXMhX8RpQiosFGaYR7zGX4fzn+UotDL6h1jg0kjwDamvvVOvtSHSQd/yPvfDMeKIErwpMdIo0gDaKSu2vkBGWmJVmMGNFW8kbQdS1TtBI4KP/mi10P1gyY0QrZFMbewitn7Q8Qy8TbxHYQSrMY2evi8RMcdLxLsUqw1jK3wYfI0gC8WScX7FKt36Lzql0BFgGsYCSBqhZsYKSCGfqoptN1+H5EI8j90b9t0+w1jiUnTAD516oXg060+m6ie7ytyYHn+q+GznsE60SwomyeSpdfyw7nSTGaZZz+2BJg0DdCrV6WFFvV4n4BJz3Mx2bdK1Aq+F4sEIpC0UJn3PlHCh8kjgJA+eN/7lfkrewOHt8dXKWIN0wxqJydSwvck89fy6euJw6QSoAze+x+myHIp2V5z7SVMmZHUhPjrTTQmzQfoBd8j5ZDJI/fwvTQ1AZeT7XRIV9l3E4+6EEBQ71d04B23VEVfoBijX3DfeW2S5hXSNhONupiAtPf3msuH23eZYl5h1X1OEzh+GFq/auXEoQ4awHv+XkBe/Zc5a9eIdX8oOoW9ZgXXotd71EUDaNDHKKXVa5jjJ6Q+gJD2/MoKN68F6kIAGF0wmr0Llu270KdtGhKOSraxRR1MwDDDycqwQ9QAaxS1Qb/r1MoM1EUD7KWuvo2NAIL+8/KV+PHXqg0J6kSAUdEi9npN9OyHtMZfC9TBBOwVbWKvX6W3BijTKrUhQF00wF5xy61b/RrWFbkTQMWf1b6taozcCSC1nxaGskHuBJAJSEvD2SB3Amxio4uvD2pYV+ROgC1smti1QQ3ritwJsIPNEZhqgEyxic34vTKoYV0xJYC9D2Ct4vuoDLkTYAfLAZRNAMkCUwJYKDgW7+upArkTYAubEFKL2v5ekDsBNP9vqgEyRZviDODskDsBpAHSSR/ZYEqA+BaQLJE7AVqYBpg6gZlC/wdUq3F+oyB3AvgZP1kidwLoHQK1mu41CnIngN4h5F8BkxVyJUDZfMIskSsBoPhnU5W9rr1q5EqAfu8NyAq5EgC6XyyVJXKeGaQZv9lGAMDE/nfwFHcI/wfIn77K89UlKwAAAABJRU5ErkJggg==",buttonsize:4},{type:r.List,name:"Sprite Type",values:[1],min:1,max:2,seed:3,list:["Fixed","Animated"],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Number,name:"Sprite Row",values:[1],min:1,max:100,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Number,name:"Sprite Column",values:[1],min:1,max:100,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Number,name:"Sprite Amount",values:[1],min:1,max:100,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Number,name:"Sprite Offset",values:[0],min:0,max:100,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},{type:r.Number,name:"Sprite fps",values:[30],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1}],u={type:r.Number,name:"Position X",values:[0],min:-9999,max:9999,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},c={type:r.Number,name:"Position Y",values:[0],min:-9999,max:9999,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},d={type:r.Number,name:"Path Speed",values:[3],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1},f=[h,u,c,{type:r.Path,name:"Path",values:[],min:-9999,max:9999,seed:1,list:[],times:[0],beziers:[],texture:"",buttonsize:1},d,{type:r.Checkbox,name:"Use Path",values:[1],min:0,max:1,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1}];var p=i(5979);class m{values=[0];oldValues=[0];valueString="0";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values=[],this.values.push(this.parameters.values[0]),this.oldValues[0]=this.values[0],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values[0]=t.values[0],this.oldValues[0]=this.values[0])}),this.setNonActive()}getValues(){return{name:this.name,values:this.values}}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.valueString=this.values[0].toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.valueString+=e.key),"."!=e.key||this.valueString.includes(".")||(this.valueString+=e.key),"Backspace"==e.key&&(this.valueString=this.valueString.slice(0,-1)),"-"==e.key&&""==this.valueString&&(this.valueString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.valueString=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.valueString=this.values[0].toString()),this.values[0]=Number(this.valueString),this.setActive(t,0,0))}setActive(t,e,i){return t==this.mesh.name&&(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawText(this.valueString,"right",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.valueString=this.values[0].toString(),this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.valueString,"right",21,this.colorText)}}class g{scene;mesh;geo;mat;canvasTexture;parameters;position;yposOffset=0;isMouseUp=!1;colorBg="#505050";colorText="#dddddd";constructor(t,e,i,r,s,o){this.scene=i,this.yposOffset=e,this.position=r,this.parameters=o[t],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}checkForChanges(){return!1}setValue(t){}getValues(){}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}mouseEvent(t,e,i,r){}keyboardEvent(t,e){}setActive(t,e,i){return!1}setNonActive(){this.canvasTexture.setFont("17px Helvetica"),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText)}}class v{values=[0];valueString="";oldvalueString="";scene;mesh;geo;mat;canvasTexture;parameters;position;yposOffset=0;valueChanged=!1;isMouseUp=!1;colorBg="#808080";colorText="#ffffff";colorLit="#dd5500";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.valueString=s,this.oldvalueString=this.valueString,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}hide(){this.mesh.scale.set(1,1,1)}show(){this.mesh.scale.set(1,1,1)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.valueString=t.values[0],this.oldvalueString=this.valueString)}),this.setNonActive()}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}getValues(){return{name:this.name,values:[this.valueString]}}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}mouseEvent(t,e,i,r){}keyboardEvent(t,e){t==this.mesh.name&&(this.valueString.length<25&&(e.keyCode>=65&&e.keyCode<=90&&(this.valueString+=e.key),e.key>="0"&&e.key<="9"&&(this.valueString+=e.key)," "!=e.key&&"_"!=e.key&&"-"!=e.key||(this.valueString+="_"),"."!=e.key||this.valueString.includes(".")||(this.valueString+=e.key)),"Backspace"==e.key&&(this.valueString=this.valueString.slice(0,-1)),this.setActive(t,0,0))}getType(){return"Title"}setActive(t,e,i){return t==this.mesh.name&&(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.valueString,"center",23,this.colorText),!0)}setNonActive(){this.oldvalueString!=this.valueString&&(this.valueChanged=!0,this.oldvalueString=this.valueString),this.canvasTexture.setFont("21px Helvetica"),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.valueString,"center",23,this.colorText)}}class y{values=[0,0];oldValues=[0,0];oldSelected="";seed=0;oldSeed=0;value1String="";value2String="";seedString="";parameters;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;seedmesh;seedgeo;seedmat;seedcanvasTexture;value1mesh;value1geo;value1mat;value1canvasTexture;value2mesh;value2geo;value2mat;value2canvasTexture;valueChanged=!1;selectedChanged=!1;isMouseUp=!1;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.name=o[t].name,this.scene=i,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values=[],this.oldValues=[],this.parameters.values.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.seed=this.parameters.seed,this.oldSeed=this.seed,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.seedcanvasTexture=new p.G(20,32),this.seedgeo=new n.bdM(20,32),this.seedmat=new n.V9B({map:this.seedcanvasTexture.texture}),this.seedmesh=new n.eaF(this.seedgeo,this.seedmat),this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.seedmesh.scale.set(1,1,1),this.seedmesh.name=s+"_knop_"+t.toString()+"_seed",i.add(this.seedmesh),this.value1canvasTexture=new p.G(60,32),this.value1geo=new n.bdM(60,32),this.value1mat=new n.V9B({map:this.value1canvasTexture.texture}),this.value1mesh=new n.eaF(this.value1geo,this.value1mat),this.value1mesh.position.x=this.position.x+43,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value1mesh.scale.set(1,1,1),this.value1mesh.name=s+"_knop_"+t.toString()+"_value1",i.add(this.value1mesh),this.value2canvasTexture=new p.G(60,32),this.value2geo=new n.bdM(60,32),this.value2mat=new n.V9B({map:this.value2canvasTexture.texture}),this.value2mesh=new n.eaF(this.value2geo,this.value2mat),this.value2mesh.position.x=this.position.x+98,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1,this.value2mesh.scale.set(1,1,1),this.value2mesh.name=s+"_knop_"+t.toString()+"_value2",i.add(this.value2mesh),this.setNonActive()}dispose(){this.values.splice(0),this.oldValues.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.seedmesh),o.TP.disposeObject3D(this.seedmesh),this.seedgeo=void 0,this.seedmat=void 0,this.seedcanvasTexture=void 0,this.scene.remove(this.value1mesh),o.TP.disposeObject3D(this.value1mesh),this.value1geo=void 0,this.value1mat=void 0,this.value1canvasTexture=void 0,this.scene.remove(this.value2mesh),o.TP.disposeObject3D(this.value2mesh),this.value2geo=void 0,this.value2mat=void 0,this.value2canvasTexture=void 0,this.scene=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.value1mesh.position.x=this.position.x+43,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value2mesh.position.x=this.position.x+98,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,this.selectedChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values=[],this.oldValues=[],t.values?.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.seed=t.seed,this.oldSeed=this.seed)}),this.setNonActive()}getValues(){return{name:this.name,values:this.values,seed:this.seed}}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}hide(){this.mesh.scale.set(0,0,0),this.seedmesh.scale.set(0,0,0),this.value1mesh?.scale.set(0,0,0),this.value2mesh?.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.seedmesh.scale.set(1,1,1),this.value1mesh?.scale.set(1,1,1),this.value2mesh?.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max),this.values[1]<this.parameters.min&&(this.values[1]=this.parameters.min),this.values[1]>this.parameters.max&&(this.values[1]=this.parameters.max),this.seed<0&&(this.seed=0),this.seed>9&&(this.seed=9)}mouseEvent(t,e,i,r){t==this.seedmesh.name&&0==this.isMouseUp&&(this.seed+=e,this.checkMinMax(),this.seedString=this.seed.toString(),this.setActive(t,0,0)),t==this.value1mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.value1String=this.values[0].toString(),this.setActive(t,0,0)),t==this.value2mesh.name&&0==this.isMouseUp&&(this.values[1]+=e,this.checkMinMax(),this.value2String=this.values[1].toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t===this.seedmesh.name&&(e.key>="0"&&e.key<="9"&&(this.seedString=e.key),this.seed=Number(this.seedString),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.seed=this.seed-1,this.checkMinMax(),this.seedString=this.seed.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.seed=this.seed+1,this.checkMinMax(),this.seedString=this.seed.toString()),this.setActive(t,0,0)),t==this.value1mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value1String+=e.key),"."!=e.key||this.value1String.includes(".")||(this.value1String+=e.key),"Backspace"==e.key&&(this.value1String=this.value1String.slice(0,-1)),"-"==e.key&&""===this.value1String&&(this.value1String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.value1String=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.value1String=this.values[0].toString()),this.values[0]=Number(this.value1String),this.setActive(t,0,0)),t==this.value2mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value2String+=e.key),"."!=e.key||this.value2String.includes(".")||(this.value2String+=e.key),"Backspace"==e.key&&(this.value2String=this.value2String.slice(0,-1)),"-"==e.key&&""===this.value2String&&(this.value2String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[1]=this.values[1]-1,this.checkMinMax(),this.value2String=this.values[1].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[1]=this.values[1]+1,this.checkMinMax(),this.value2String=this.values[1].toString()),this.values[1]=Number(this.value2String),this.setActive(t,0,0))}checkValueChanged(){this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.oldValues[1]!=this.values[1]&&(this.valueChanged=!0,this.oldValues[1]=this.values[1]),this.oldSeed!=this.seed&&(this.valueChanged=!0,this.oldSeed=this.seed)}setActive(t,e,i){return t!=this.seedmesh.name&&t!=this.value1mesh.name&&t!=this.value2mesh.name||this.oldSelected!=this.seedmesh.name&&this.oldSelected!=this.value1mesh.name&&this.oldSelected!=this.value2mesh.name||this.oldSelected!=t&&this.checkValueChanged(),this.oldSelected=t,t==this.seedmesh.name?(this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorLit),this.seedcanvasTexture.drawText(this.seedString.toString(),"center",21,this.colorTextLit),!0):t==this.value1mesh.name?(this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorLit),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorTextLit),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText),!0):t==this.value2mesh.name&&(this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorLit),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorTextLit),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText),!0)}setNonActive(){this.checkMinMax(),this.seedString=this.seed.toString(),this.value1String=this.values[0].toString(),this.value2String=this.values[1].toString(),this.checkValueChanged(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText)}}class b{values=[0];oldValues=[0];valueString="0";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.name=o[t].name,this.scene=i,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values[0]=this.parameters.values[0],this.oldValues[0]=this.values[0],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}dispose(){this.values.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach((e,i)=>{if(e.name==this.name){const e=t[i];this.values[0]=e.values[0],this.oldValues[0]=this.values[0]}}),this.setNonActive()}getValues(){return{name:this.name,values:this.values}}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<1&&(this.values[0]=1),this.values[0]>this.parameters.list.length&&(this.values[0]=this.parameters.list.length)}mouseEvent(t,e){t==this.mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.valueString=this.parameters.list[this.values[0]-1],this.setActive(t,0,0))}keyboardEvent(t,e){t==this.mesh.name&&("ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1),this.checkMinMax(),this.valueString=this.parameters.list[this.values[0]-1],this.setActive(t,0,0))}setActive(t,e,i){return t==this.mesh.name&&(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawText(this.valueString,"right",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.valueString=this.parameters.list[this.values[0]-1],this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.valueString,"right",21,this.colorText)}}const _="\n        attribute vec3 customColor;\n        varying vec3 vColor;\n\n        void main() {\n            vColor = customColor;\n\n            vec4 mvPosition = modelViewMatrix * vec4( position, 1.0 );\n            gl_Position = projectionMatrix * mvPosition;\n        }",x="\n        varying vec3 vColor;\n\n        void main() {\n            gl_FragColor = vec4(vColor.x,  vColor.y ,  vColor.z ,1.0);\n        }";class w{id=0;hueValue=180;saturationValue=100;brigthnessValue=50;colorValue="hsl(180, 10%, 50%)";position;pointerHueGeo;pointerHueVertices;pointerHueMesh;whiteMaterial;bgMaterial;pointerSatGeo;pointerSatMesh;pointerSatInnerGeo;pointerSatInnerMesh;pointerSatInnerMaterial;satGeo;satVertices;satPointColor;satMaterial;satMesh;satBgGeo;satBgMesh;hueCanvas;hueContext;hueTexture;hueMaterial;hueMesh;textTextureHSL;textTextureRGB;textGeo;textMaterial;textMaterialRGB;textMesh;textMeshRGB;colorBg="#333333";colorText="#aaaaaa";scene;constructor(t,e,i,r){this.scene=t,this.position=i,this.position.x+=280,this.id=r,this.whiteMaterial=new n.V9B({color:16777215}),this.bgMaterial=new n.V9B({color:3355443}),this.pointerHueGeo=new n.LoY,this.pointerHueVertices=new Float32Array([0,130,1,8,145,1,-8,145,1]),this.pointerHueGeo.setAttribute("position",new n.THS(this.pointerHueVertices,3)),this.pointerHueMesh=new n.eaF(this.pointerHueGeo,this.whiteMaterial),this.pointerHueMesh.position.set(this.position.x,this.position.y,this.position.z+30),this.pointerHueMesh.rotation.z=this.hueValue,t.add(this.pointerHueMesh),this.pointerSatGeo=new n.tcD(10,16),this.pointerSatMesh=new n.eaF(this.pointerSatGeo,this.whiteMaterial),this.pointerSatMesh.position.set(this.position.x,this.position.y,this.position.z+31),t.add(this.pointerSatMesh),this.pointerSatInnerGeo=new n.tcD(8,16),this.pointerSatInnerMaterial=new n.V9B({color:16777215}),this.pointerSatInnerMesh=new n.eaF(this.pointerSatInnerGeo,this.pointerSatInnerMaterial),this.pointerSatInnerMesh.position.set(this.position.x,this.position.y,this.position.z+32),t.add(this.pointerSatInnerMesh),this.satGeo=new n.LoY,this.satVertices=new Float32Array([-50,-86.7,1,100,0,1,-50,86.7,1]),this.satPointColor=[0,0,0,0,1,0,1,1,1],this.satGeo.setAttribute("position",new n.THS(this.satVertices,3)),this.satGeo.setAttribute("uv",new n.qtW([0,.21,.5,.5,0,.79],2)),this.satGeo.setAttribute("customColor",new n.qtW(this.satPointColor,3)),this.satMaterial=new n.BKk({vertexShader:_,fragmentShader:x}),this.satMesh=new n.eaF(this.satGeo,this.satMaterial),this.satMesh.position.set(this.position.x,this.position.y,this.position.z+29),this.satMesh.name=e+"_Sat_Handle",t.add(this.satMesh),this.textTextureHSL=new p.G(200,200),this.textTextureRGB=new p.G(200,200),this.textGeo=new n.bdM(200,200),this.textMaterial=new n.V9B({map:this.textTextureHSL.texture}),this.textMesh=new n.eaF(this.textGeo,this.textMaterial),this.textMesh.position.x=0,this.textMesh.position.y=0,this.textMesh.position.z=20,this.textMaterialRGB=new n.V9B({map:this.textTextureRGB.texture}),this.textMeshRGB=new n.eaF(this.textGeo,this.textMaterialRGB),this.textMeshRGB.position.x=0,this.textMeshRGB.position.y=0,this.textMeshRGB.position.z=21,t.add(this.textMesh),t.add(this.textMeshRGB),this.hueCanvas=document.createElement("canvas"),this.hueCanvas.width=512,this.hueCanvas.height=512;const s=this.hueCanvas.getContext("2d");if(null==s)throw new Error("colorpicker temp type error");this.hueContext=s;const o=this.hueCanvas.width/2,a=this.hueCanvas.height/2,h=o,l=a;for(let t=0;t<360;t+=.1){const e=t*(2*Math.PI)/360;this.hueContext.strokeStyle="hsla("+t.toString()+", 100%, 50%, 1.0)",this.hueContext.beginPath(),this.hueContext.moveTo(o,a),this.hueContext.lineTo(o+h*Math.cos(e),a+l*Math.sin(e)),this.hueContext.stroke()}this.hueTexture=new n.gPd(this.hueCanvas),this.hueTexture.minFilter=n.hxR,this.hueTexture.needsUpdate=!0;const u=new n.tcD(130,360);this.hueMaterial=new n.V9B({color:16777215,map:this.hueTexture}),this.hueMesh=new n.eaF(u,this.hueMaterial),this.hueMesh.rotation.z=2*Math.PI*90/360,this.hueMesh.position.z=11,this.hueMesh.position.set(this.position.x,this.position.y,this.position.z+28),this.hueMesh.name=e+"_Hue_Handle",t.add(this.hueMesh),this.satBgGeo=new n.tcD(105,360),this.satBgMesh=new n.eaF(this.satBgGeo,this.bgMaterial),this.satBgMesh.position.set(this.position.x,this.position.y,this.position.z+29),t.add(this.satBgMesh),this.setColor(0,.5,.5)}dispose(){this.position=void 0,this.scene.remove(this.pointerHueMesh),o.TP.disposeObject3D(this.pointerHueMesh),this.pointerHueGeo=void 0,this.pointerHueVertices=void 0,this.whiteMaterial=void 0,this.bgMaterial=void 0,this.scene.remove(this.pointerSatMesh),o.TP.disposeObject3D(this.pointerSatMesh),this.pointerSatGeo=void 0,this.pointerSatInnerGeo=void 0,this.scene.remove(this.pointerSatInnerMesh),o.TP.disposeObject3D(this.pointerSatInnerMesh),this.pointerSatInnerMaterial=void 0,this.satGeo=void 0,this.satVertices=void 0,this.satPointColor?.splice(0),this.satMaterial=void 0,this.scene.remove(this.satMesh),o.TP.disposeObject3D(this.satMesh),this.satBgGeo=void 0,this.scene.remove(this.satBgMesh),o.TP.disposeObject3D(this.satBgMesh),this.hueCanvas=void 0,this.hueContext=void 0,this.hueTexture=void 0,this.hueMaterial=void 0,this.scene.remove(this.hueMesh),o.TP.disposeObject3D(this.hueMesh)}setPosition(t,e,i){this.position.x=t+300,this.position.y=e,this.position.z=i,this.updatepos()}setColor(t,e,i){this.rgb2hsl(t,e,i),this.updateColor()}rgb2hsl(t,e,i){const r=Math.max(t,e,i),n=Math.min(t,e,i),s=(r+n)/2;let o=0,a=0;if(r==n)o=0,a=0;else{const h=r-n;switch(a=h/(1-Math.abs(2*s-1)),r){case t:o=(e-i)/h,o=(e-i)/h%6,o=(e-i)/h+(e<i?6:0);break;case e:o=(i-t)/h+2;break;case i:o=(t-e)/h+4}}this.hueValue=Math.round(60*o),this.saturationValue=Math.round(100*a),this.brigthnessValue=Math.round(100*s)}hslToRgb(t,e,i){if(i/=100,0==(e/=100)){const t=Math.round(255*i);return{r:t,g:t,b:t}}const r=(1-Math.abs(2*i-1))*e,n=t/60,s=r*(1-Math.abs(n%2-1));let o=0,a=0,h=0;n>=0&&n<1?(o=r,a=s,h=0):n<2?(o=s,a=r,h=0):n<3?(o=0,a=r,h=s):n<4?(o=0,a=s,h=r):n<5?(o=s,a=0,h=r):(o=r,a=0,h=s);const l=i-r/2;return{r:Math.round(255*(o+l)),g:Math.round(255*(a+l)),b:Math.round(255*(h+l))}}getColor(){return[this.pointerSatInnerMaterial.color.r,this.pointerSatInnerMaterial.color.g,this.pointerSatInnerMaterial.color.b]}updateColor(){const t=this.hslToRgb(this.hueValue,this.saturationValue,this.brigthnessValue);this.pointerSatInnerMaterial.color.r=t.r/255,this.pointerSatInnerMaterial.color.g=t.g/255,this.pointerSatInnerMaterial.color.b=t.b/255,this.pointerHueMesh.rotation.z=-this.hueValue/180*Math.PI;const e=this.hslToRgb(this.hueValue,100,50),i=(new n.Q1f).setRGB(e.r/255,e.g/255,e.b/255);this.satPointColor=[0,0,0,i.r,i.g,i.b,1,1,1],this.satGeo.setAttribute("customColor",new n.qtW(this.satPointColor,3)),this.updatepos(),this.textTextureHSL.drawBackground(this.colorBg),this.textTextureRGB.drawBackground(this.colorBg);const r="RGB : "+t.r+"  "+t.g+"  "+t.b;this.colorValue="HSL : "+Math.round(this.hueValue).toString()+"  "+this.saturationValue.toString()+"%  "+this.brigthnessValue.toString()+"%",this.textTextureHSL.drawText(this.colorValue,"left",21,this.colorText),this.textTextureRGB.drawText(r,"left",21,this.colorText)}setHue(t,e){const i=t-this.position.x,r=e-this.position.y;this.hueValue=i>=0?r>=0?180*Math.atan(i/r)/Math.PI:180+180*Math.atan(i/r)/Math.PI:r>=0?360+180*Math.atan(i/r)/Math.PI:180+180*Math.atan(i/r)/Math.PI,this.hueValue<0&&(this.hueValue=0),this.hueValue>360&&(this.hueValue=360),this.updateColor()}setSat(t,e){let i=2*(t-this.position.x+50)/3;if(i=Math.round(i),i<0&&(i=0),i>100&&(i=100),this.saturationValue=i,i>=100)this.brigthnessValue=50;else{const t=100*(e-this.position.y)/86.7;this.brigthnessValue=Math.round(t/2)+50,i+t>100&&(this.brigthnessValue=Math.round((100-i)/2)+50),t-i<-100&&(this.brigthnessValue=Math.round(i/2)),this.brigthnessValue<0&&(this.brigthnessValue=0),this.brigthnessValue>100&&(this.brigthnessValue=100)}this.updatepos(),this.updateColor()}hide(){this.satMesh.scale.set(0,0,0),this.hueMesh.scale.set(0,0,0),this.satBgMesh.scale.set(0,0,0),this.pointerHueMesh.scale.set(0,0,0),this.pointerSatInnerMesh.scale.set(0,0,0),this.pointerSatMesh.scale.set(0,0,0),this.textMesh.scale.set(0,0,0),this.textMeshRGB.scale.set(0,0,0),this.updatepos()}show(){this.satMesh.scale.set(1,1,1),this.hueMesh.scale.set(1,1,1),this.satBgMesh.scale.set(1,1,1),this.pointerHueMesh.scale.set(1,1,1),this.pointerSatInnerMesh.scale.set(1,1,1),this.pointerSatMesh.scale.set(1,1,1),this.textMesh.scale.set(1,1,1),this.textMeshRGB.scale.set(1,1,1),this.updatepos()}updatepos(){this.satMesh.position.x=this.position.x,this.satMesh.position.y=this.position.y,this.hueMesh.position.x=this.position.x,this.hueMesh.position.y=this.position.y,this.satBgMesh.position.x=this.position.x,this.satBgMesh.position.y=this.position.y,this.pointerHueMesh.position.x=this.position.x,this.pointerHueMesh.position.y=this.position.y,this.pointerSatMesh.position.x=this.position.x+3*this.saturationValue/2-50;const t=86.7*(2*this.brigthnessValue-100)/100;this.pointerSatMesh.position.y=this.position.y+t,this.pointerSatInnerMesh.position.x=this.pointerSatMesh.position.x,this.pointerSatInnerMesh.position.y=this.pointerSatMesh.position.y,this.textMesh.position.x=this.position.x,this.textMesh.position.y=this.position.y+110,this.textMeshRGB.position.x=this.position.x,this.textMeshRGB.position.y=this.position.y+80}}class M{index=0;scene;position;yPosOffset=0;addMesh;addgeo;addmat;removeMesh;removegeo;removemat;bordermesh;bordergeo;bordermat;linemesh;linegeo;linemat;plus1mesh;plus1geo;plus1mat;plus2mesh;plus2geo;plus2mat;valueChanged=!1;isMouseUp=!1;colorBg="#777777";colorText="#AAAAAA";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s){this.name=s,this.scene=e,this.position=i,this.yPosOffset=r,this.index=t+1,this.addgeo=new n.bdM(30,30),this.addmat=new n.V9B({color:this.colorBg}),this.addMesh=new n.eaF(this.addgeo,this.addmat),this.addMesh.position.x=this.position.x+43+320,this.addMesh.position.y=this.yPosOffset+this.position.y,this.addMesh.position.z=20+this.position.z+1,this.addMesh.scale.set(1,1,1),this.addMesh.name=s+"_knop"+t.toString()+"_add",this.scene.add(this.addMesh),this.removegeo=new n.bdM(30,30),this.removemat=new n.V9B({color:this.colorBg}),this.removeMesh=new n.eaF(this.removegeo,this.removemat),this.removeMesh.position.x=this.position.x+98+320,this.removeMesh.position.y=this.yPosOffset+this.position.y,this.removeMesh.position.z=20+this.position.z+1,this.removeMesh.scale.set(1,1,1),this.removeMesh.name=s+"_knop"+t.toString()+"_remove",this.scene.add(this.removeMesh),this.bordergeo=new n.bdM(66,34),this.bordermat=new n.V9B({color:"#aaaaaa"}),this.bordermesh=new n.eaF(this.bordergeo,this.bordermat),this.bordermesh.position.x=this.position.x+98+320,this.bordermesh.position.y=this.yPosOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.bordermesh.scale.set(1,1,1),this.scene.add(this.bordermesh),this.linegeo=new n.bdM(14,3),this.linemat=new n.V9B({color:this.colorText}),this.linemesh=new n.eaF(this.linegeo,this.linemat),this.linemesh.position.x=this.position.x-20,this.linemesh.position.y=this.yPosOffset+this.position.y,this.linemesh.position.z=10+this.position.z+1,this.linemesh.scale.set(1,1,1),this.scene.add(this.linemesh),this.plus1geo=new n.bdM(14,3),this.plus1mat=new n.V9B({color:this.colorText}),this.plus1mesh=new n.eaF(this.plus1geo,this.plus1mat),this.plus1mesh.position.x=this.position.x-20,this.plus1mesh.position.y=this.yPosOffset+this.position.y,this.plus1mesh.position.z=10+this.position.z+1,this.plus1mesh.scale.set(1,1,1),this.scene.add(this.plus1mesh),this.plus2geo=new n.bdM(3,14),this.plus2mat=new n.V9B({color:this.colorText}),this.plus2mesh=new n.eaF(this.plus2geo,this.plus2mat),this.plus2mesh.position.x=this.position.x-20,this.plus2mesh.position.y=this.yPosOffset+this.position.y,this.plus2mesh.position.z=10+this.position.z+1,this.plus2mesh.scale.set(1,1,1),this.scene.add(this.plus2mesh),this.setNonActive()}dispose(){this.position=void 0,this.scene.remove(this.addMesh),o.TP.disposeObject3D(this.addMesh),this.addgeo=void 0,this.addmat=void 0,this.scene.remove(this.removeMesh),o.TP.disposeObject3D(this.removeMesh),this.removegeo=void 0,this.removemat=void 0,this.scene.remove(this.bordermesh),o.TP.disposeObject3D(this.bordermesh),this.bordergeo=void 0,this.bordermat=void 0,this.scene.remove(this.linemesh),o.TP.disposeObject3D(this.linemesh),this.linegeo=void 0,this.linemat=void 0,this.scene.remove(this.plus1mesh),o.TP.disposeObject3D(this.plus1mesh),this.plus1geo=void 0,this.plus1mat=void 0,this.scene.remove(this.plus2mesh),o.TP.disposeObject3D(this.plus2mesh),this.plus2geo=void 0,this.plus2mat=void 0,this.scene=void 0}setPosition(t,e){this.position=t;const i=320*e+223;this.addMesh.position.x=this.position.x+16+i,this.addMesh.position.y=this.yPosOffset+this.position.y,this.addMesh.position.z=11+this.position.z+1,this.removeMesh.position.x=this.position.x-16+i,this.removeMesh.position.y=this.yPosOffset+this.position.y,this.removeMesh.position.z=11+this.position.z+1,this.bordermesh.position.x=this.position.x+i,this.bordermesh.position.y=this.yPosOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.linemesh.position.x=this.position.x+i-16,this.linemesh.position.y=this.yPosOffset+this.position.y,this.linemesh.position.z=12+this.position.z+1,this.plus1mesh.position.x=this.position.x+i+16,this.plus1mesh.position.y=this.yPosOffset+this.position.y,this.plus1mesh.position.z=13+this.position.z+1,this.plus2mesh.position.x=this.position.x+i+16,this.plus2mesh.position.y=this.yPosOffset+this.position.y,this.plus2mesh.position.z=13+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}getValues(){}setValue(t,e,i){}dropFile(t){}setTexture(t,e){}hide(){this.addMesh?.scale.set(0,0,0),this.removeMesh?.scale.set(0,0,0)}show(){this.addMesh?.scale.set(1,1,1),this.removeMesh?.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}mouseEvent(t,e,i,r){this.addMesh.name,this.removeMesh.name}keyboardEvent(t,e){}setActive(t,e,i){}setNonActive(){}}class S{values=[];beziers=[];times=100;index=0;timesString="";scene;mesh;geo;mat;canvasTexture;bordermesh;bordergeo;bordermat;linemesh;linegeo;linemat;graphmesh;graphgeo;graphmat;position;yposOffset=0;valueChanged=!1;isMouseUp=!1;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";parameters;constructor(t,e,i,r,s,o,a,h,l){this.name=s,this.scene=e,this.position=i,this.yposOffset=r,this.index=t+1,this.parameters=l,this.values[0]=o[3*this.index],this.values[1]=o[3*this.index+1],this.values[2]=o[3*this.index+2],this.beziers[0]=a[4*(this.index-1)],this.beziers[1]=a[4*(this.index-1)+1],this.beziers[2]=a[4*(this.index-1)+2],this.beziers[3]=a[4*(this.index-1)+3],this.times=h[this.index],this.canvasTexture=new p.G(256,30),this.geo=new n.bdM(256,30),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x+300,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_extra_"+t.toString(),this.scene.add(this.mesh),this.bordergeo=new n.bdM(260,34),this.bordermat=new n.V9B({color:"#aaaaaa"}),this.bordermesh=new n.eaF(this.bordergeo,this.bordermat),this.bordermesh.position.x=this.position.x+98+320,this.bordermesh.position.y=this.yposOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.bordermesh.scale.set(1,1,1),this.scene.add(this.bordermesh),this.linegeo=new n.bdM(62,2),this.linemat=new n.V9B({color:"#aaaaaa"}),this.linemesh=new n.eaF(this.linegeo,this.linemat),this.linemesh.position.x=this.position.x-20,this.linemesh.position.y=this.yposOffset+this.position.y,this.linemesh.position.z=10+this.position.z+1,this.linemesh.scale.set(1,1,1),this.scene.add(this.linemesh),this.graphgeo=new n.bdM(16,16),this.graphmat=new n.V9B({color:"#aaaaaa"}),this.graphmesh=new n.eaF(this.graphgeo,this.graphmat),this.graphmesh.position.x=this.position.x-20,this.graphmesh.position.y=this.yposOffset+this.position.y,this.graphmesh.position.z=10+this.position.z+1,this.graphmesh.rotation.z=45*Math.PI/180,this.graphmesh.scale.set(1,1,1),this.graphmesh.name=s+"graph_"+t.toString(),this.scene.add(this.graphmesh),this.setNonActive()}dispose(){this.values.splice(0),this.beziers.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.bordermesh),o.TP.disposeObject3D(this.bordermesh),this.bordergeo=void 0,this.bordermat=void 0,this.scene.remove(this.linemesh),o.TP.disposeObject3D(this.linemesh),this.linegeo=void 0,this.linemat=void 0,this.scene.remove(this.graphmesh),o.TP.disposeObject3D(this.graphmesh),this.graphgeo=void 0,this.graphmat=void 0,this.scene=void 0}setPosition(t){this.position=t;const e=320*this.index;this.mesh.position.x=this.position.x+e,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.bordermesh.position.x=this.position.x+e,this.bordermesh.position.y=this.yposOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.linemesh.position.x=this.position.x+e-160,this.linemesh.position.y=this.yposOffset+this.position.y,this.linemesh.position.z=10+this.position.z+1,this.graphmesh.position.x=this.position.x+e-160,this.graphmesh.position.y=this.yposOffset+this.position.y,this.graphmesh.position.z=10+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}getValues(){return{name:this.name,values:this.values,beziers:this.beziers,times:[this.times]}}setValue(t,e,i){this.values[0]=t[3*this.index],this.values[1]=t[3*this.index+1],this.values[2]=t[3*this.index+2],this.beziers[0]=e[4*(this.index-1)],this.beziers[1]=e[4*(this.index-1)+1],this.beziers[2]=e[4*(this.index-1)+2],this.beziers[3]=e[4*(this.index-1)+3],this.times=i[this.index],this.setNonActive()}dropFile(t){}setTexture(t,e){}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max),this.values[1]<this.parameters.min&&(this.values[1]=this.parameters.min),this.values[1]>this.parameters.max&&(this.values[1]=this.parameters.max),this.times<0&&(this.times=0),this.times>100&&(this.times=100)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.times+=e,this.checkMinMax(),this.timesString=this.times.toString(),this.setActive())}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.timesString+=e.key),"."!=e.key||this.timesString.includes(".")||(this.timesString+=e.key),"Backspace"==e.key&&(this.timesString=this.timesString.slice(0,-1)),"-"==e.key&&""==this.timesString&&(this.timesString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.times=this.times-1,this.checkMinMax(),this.timesString=this.times.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.times=this.times+1,this.checkMinMax(),this.timesString=this.times.toString()),this.times=Number(this.timesString),this.setActive())}checkButtonHit(t){return t==this.mesh.name}checkBezierHit(t){return t==this.graphmesh.name}setActive(){this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.timesString+" %","left",21,this.colorTextLit),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2])}setNonActive(){this.checkMinMax(),this.timesString=this.times.toString(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.timesString+" %","left",21,this.colorText),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2])}}var A=i(5820);class E{id=0;handle1value=[10,0];handle2value=[50,100];offset=1e4;offsetZ=50;position;whitemat;greymat;curve;curvepoints=[];curvepointsvectors;curveGeometry;line;handle1linepoints=[];handle1linegeo;handle1line;handle1linepoint1;handle1linepoint2;handle2linepoints=[];handle2linegeo;handle2line;handle2linepoint1;handle2linepoint2;bgplanegeo;bgplane;bgframegeo;bgframe;handlegeo;handle1;handle2;scene;constructor(t,e){this.offset=1e4,this.scene=t,this.position=e,this.handle1value=[10,0],this.handle2value=[50,100],this.whitemat=new n.V9B({color:16777215}),this.greymat=new n.V9B({color:7829367}),this.curve=new A.v,this.curvepoints=[],this.curvepointsvectors=[],this.curve.setHandles(this.handle1value[0],this.handle1value[1],this.handle2value[0],this.handle2value[1]),this.calccurvepoints(),this.curveGeometry=(new n.LoY).setFromPoints(this.curvepointsvectors),this.line=new n.N1A(this.curveGeometry,this.whitemat),this.line.position.z=12+this.offsetZ,this.scene.add(this.line),this.handle1linepoints=[0,0,0,2*this.handle1value[0],2*this.handle1value[1],0],this.handle1linepoint1=new n.Pq0(this.handle1linepoints[0],this.handle1linepoints[1],this.handle1linepoints[2]),this.handle1linepoint2=new n.Pq0(this.handle1linepoints[3],this.handle1linepoints[4],this.handle1linepoints[5]),this.handle1linegeo=(new n.LoY).setFromPoints([this.handle1linepoint1,this.handle1linepoint2]),this.handle1line=new n.N1A(this.handle1linegeo,this.greymat),this.handle1line.position.z=11+this.offsetZ,this.scene.add(this.handle1line),this.handle2linepoints=[200,200,0,2*this.handle2value[0],2*this.handle2value[1],0],this.handle2linepoint1=new n.Pq0(this.handle2linepoints[0],this.handle2linepoints[1],this.handle2linepoints[2]),this.handle2linepoint2=new n.Pq0(this.handle2linepoints[3],this.handle2linepoints[4],this.handle2linepoints[5]),this.handle2linegeo=(new n.LoY).setFromPoints([this.handle2linepoint1,this.handle2linepoint2]),this.handle2line=new n.N1A(this.handle2linegeo,this.greymat),this.handle2line.position.z=11+this.offsetZ,this.scene.add(this.handle2line),this.bgplanegeo=new n.bdM(256,256),this.bgplane=new n.eaF(this.bgplanegeo,new n.V9B({color:3355443})),this.bgplane.position.z=10+this.offsetZ,this.bgplane.name="CurveEditor_BG",this.scene.add(this.bgplane),this.bgframegeo=new n.bdM(260,260),this.bgframe=new n.eaF(this.bgframegeo,new n.V9B({color:7829367})),this.bgframe.position.z=9+this.offsetZ,this.bgframe.name="CurveEditor_BG",this.scene.add(this.bgframe),this.handlegeo=new n.tcD(8,16),this.handle1=new n.eaF(this.handlegeo,this.whitemat),this.handle1.position.z=12+this.offsetZ,this.handle1.name=this.id.toString()+"Handle1",this.scene.add(this.handle1),this.handle2=new n.eaF(this.handlegeo,this.whitemat),this.handle2.position.z=12+this.offsetZ,this.handle2.name=this.id.toString()+"Handle2",this.scene.add(this.handle2),this.setPosition(this.position.x,this.position.y,this.position.z)}dispose(){this.position=void 0,this.handle1value.splice(0),this.handle2value.splice(0),this.whitemat.dispose(),this.greymat.dispose(),this.curve.dispose(),this.curvepoints.splice(0),this.curvepointsvectors?.splice(0),this.line=void 0,this.scene.remove(this.line),this.curveGeometry.dispose(),this.handle1linepoints.splice(0),this.handle1linepoint1=void 0,this.handle1linepoint2=void 0,this.handle1linegeo=void 0,this.handle1line=void 0,this.scene.remove(this.handle1line),this.handle2linepoints.splice(0),this.handle2linepoint1=void 0,this.handle2linepoint2=void 0,this.handle2linegeo=void 0,this.handle2line=void 0,this.scene.remove(this.handle2line),this.bgplanegeo=void 0,this.bgplane=void 0,this.scene.remove(this.bgplane),this.bgframegeo=void 0,this.bgframe=void 0,this.scene.remove(this.bgframe),this.handlegeo=void 0,this.handle1=void 0,this.scene.remove(this.handle1),this.handle2=void 0,this.scene.remove(this.handle2)}getHandles(){return[this.handle1value[0],this.handle1value[1],this.handle2value[0],this.handle2value[1]]}setHandle1(t,e){const i=t-this.handle1.position.x,r=e-this.handle1.position.y;this.handle1value[0]=Math.max(Math.min(this.handle1value[0]+i/2,100),0),this.handle1value[1]=Math.max(Math.min(this.handle1value[1]+r/2,100),0),this.handle1linepoints=[0,0,0,2*this.handle1value[0],2*this.handle1value[1],0],this.curve.setHandles(this.handle1value[0],this.handle1value[1],this.handle2value[0],this.handle2value[1]),this.calccurvepoints(),this.setPosition(this.position.x,this.position.y,this.position.z)}setHandle2(t,e){const i=t-this.handle2.position.x,r=e-this.handle2.position.y;this.handle2value[0]=Math.max(Math.min(this.handle2value[0]+i/2,100),0),this.handle2value[1]=Math.max(Math.min(this.handle2value[1]+r/2,100),0),this.handle2linepoints=[200,200,0,2*this.handle2value[0],2*this.handle2value[1],0],this.curve.setHandles(this.handle1value[0],this.handle1value[1],this.handle2value[0],this.handle2value[1]),this.calccurvepoints(),this.setPosition(this.position.x,this.position.y,this.position.z)}setHandles(t,e,i,r){this.handle1value[0]=t,this.handle1value[1]=e,this.handle1linepoints=[0,0,0,2*this.handle1value[0],2*this.handle1value[1],0],this.handle2value[0]=i,this.handle2value[1]=r,this.handle2linepoints=[200,200,0,2*this.handle2value[0],2*this.handle2value[1],0],this.curve.setHandles(t,e,i,r),this.calccurvepoints(),this.setPosition(this.position.x,this.position.y,this.position.z)}calccurvepoints(){this.curvepoints=[],this.curve.getCurvePoints().forEach(t=>{this.curvepoints.push(2*t[0],2*t[1],0),this.curvepointsvectors.push(new n.Pq0(2*t[0],2*t[1],0))})}hide(){this.offset=1e6,this.setPosition(this.position.x,this.position.y,this.position.z)}show(){this.offset=0,this.setPosition(this.position.x,this.position.y,this.position.z)}setPosition(t,e,i){this.position.x=t,this.position.y=e,this.position.z=i,this.handle1.position.x=this.position.x+28+2*this.handle1value[0],this.handle1.position.y=this.offset+this.position.y+28+2*this.handle1value[1],this.handle2.position.x=this.position.x+28+2*this.handle2value[0],this.handle2.position.y=this.offset+this.position.y+28+2*this.handle2value[1],this.bgplane.position.x=this.position.x+128,this.bgplane.position.y=this.offset+this.position.y+128,this.bgframe.position.x=this.position.x+128,this.bgframe.position.y=this.offset+this.position.y+128,this.line.position.x=this.position.x+28,this.line.position.y=this.offset+this.position.y+28,this.handle1line.position.x=this.position.x+28,this.handle1line.position.y=this.offset+this.position.y+28,this.handle2line.position.x=this.position.x+28,this.handle2line.position.y=this.offset+this.position.y+28,this.curveGeometry.setAttribute("position",new n.qtW(this.curvepoints,3)),this.handle1linegeo.setAttribute("position",new n.qtW(this.handle1linepoints,3)),this.handle2linegeo.setAttribute("position",new n.qtW(this.handle2linepoints,3))}}class T{values=[0,0,0];oldValues=[0,0,0];beziers=[];oldBeziers=[];times=[];oldTimes=[];parameters;yposOffset=0;selectedExtension=0;colorpickerActive=!1;bezierActive=!1;selectedBezier=-1;scene;mesh;geo;mat;canvasTexture;position;colorPicker;buttonExtension=[];addRemoveButton;curveEditor;isMouseUp=!0;valueChanged=!1;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";emittername="";index=0;constructor(t,e,i,r,s,o){this.name=o[t].name,this.emittername=s,this.scene=i,this.yposOffset=e,this.position=new n.Pq0(r.x,r.y+e,r.z),this.parameters=o[t],this.index=t,this.values=[],this.oldValues=[],this.parameters.values.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.beziers=[],this.oldBeziers=[],this.parameters.beziers.forEach(t=>{this.beziers.push(t),this.oldBeziers.push(t)}),this.times=[],this.oldTimes=[],this.parameters.times.forEach(t=>{this.times.push(t),this.oldTimes.push(t)}),this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=this.position.z+20,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.colorPicker=new w(i,s+"_knop_"+t.toString(),this.position,1),this.addRemoveButton=new M(this.index,this.scene,this.position,this.yposOffset,this.emittername),this.curveEditor=new E(this.scene,this.position),this.curveEditor.show(),this.setNonActive()}dispose(){this.buttonExtension?.forEach(t=>t.dispose()),this.colorPicker.dispose(),this.addRemoveButton.dispose(),this.curveEditor.dispose(),this.values.splice(0),this.oldValues.splice(0),this.beziers.splice(0),this.oldBeziers.splice(0),this.times.splice(0),this.oldTimes.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=this.position.z+20,this.buttonExtension?.forEach(e=>{null!=e&&e.setPosition(t)}),this.colorPicker.setPosition(this.position.x,this.yposOffset+this.position.y,this.position.z),this.addRemoveButton.setPosition(this.position,this.buttonExtension.length),this.curveEditor?.setPosition(this.position.x,this.yposOffset+this.position.y,this.position.z)}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach((e,i)=>{if(e.name==this.name){const e=t[i];this.values=[],this.oldValues=[],e.values.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.beziers=[],this.oldBeziers=[],e.beziers.forEach(t=>{this.beziers.push(t),this.oldBeziers.push(t)}),this.times=[],this.oldTimes=[],e.times.forEach(t=>{this.times.push(t),this.oldTimes.push(t)})}});for(let t=0;t<this.values.length/3-1;t++)this.buttonExtension?.push(new S(t,this.scene,this.position,this.yposOffset,this.emittername+"_knop_"+this.index.toString(),this.values,this.beziers,this.times,this.parameters));this.setPosition(this.position),this.setNonActive()}getValues(){const t=[];return t.push(this.values[0]),t.push(this.values[1]),t.push(this.values[2]),this.values=[],this.values.push(t[0]),this.values.push(t[1]),this.values.push(t[2]),this.beziers=[],this.times=[0],this.buttonExtension?.forEach(t=>{const e=t.getValues();this.values.push(e.values[0]),this.values.push(e.values[1]),this.values.push(e.values[2]),this.beziers.push(e.beziers[0]),this.beziers.push(e.beziers[1]),this.beziers.push(e.beziers[2]),this.beziers.push(e.beziers[3]),this.times.push(e.times[0])}),{name:this.name,values:this.values,beziers:this.beziers,times:this.times,seed:0}}hide(){this.mesh.scale.set(0,0,0),this.colorPicker.hide()}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){}mouseEvent(t,e,i,r){if(this.buttonExtension?.forEach(n=>{0==this.isMouseUp&&null!=n&&n.mouseEvent(t,e,i,r)}),(t==this.colorPicker.hueMesh.name||t==this.colorPicker.satMesh.name)&&0==this.isMouseUp&&this.selectedExtension>-1){if(this.colorPicker.show(),this.colorPicker.setPosition(this.position.x+320*this.selectedExtension,this.yposOffset+this.position.y,this.position.z),t==this.colorPicker.hueMesh.name&&this.colorPicker.setHue(i,r),t==this.colorPicker.satMesh.name&&this.colorPicker.setSat(i,r),this.selectedExtension>0){const t=this.colorPicker.getColor();this.values[3*this.selectedExtension+0]=t[0],this.values[3*this.selectedExtension+1]=t[1],this.values[3*this.selectedExtension+2]=t[2],this.buttonExtension[this.selectedExtension-1].setValue(this.values,this.beziers,this.times),this.buttonExtension[this.selectedExtension-1].setActive()}if(0==this.selectedExtension){const t=this.colorPicker.getColor();this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2])}}if((t==this.curveEditor.handle1.name||t==this.curveEditor.handle2.name)&&0==this.isMouseUp&&this.selectedBezier>=0&&(this.curveEditor.show(),this.curveEditor.setPosition(this.position.x+320*this.selectedBezier+32,this.yposOffset+this.position.y-130,this.position.z),this.curveEditor.setHandles(this.beziers[4*this.selectedBezier+0],this.beziers[4*this.selectedBezier+1],this.beziers[4*this.selectedBezier+2],this.beziers[4*this.selectedBezier+3]),t==this.curveEditor.handle1.name&&this.curveEditor?.setHandle1(i,r),t==this.curveEditor.handle2.name&&this.curveEditor?.setHandle2(i,r),this.selectedBezier>=0)){const t=this.curveEditor?.getHandles();null!=t&&(this.beziers[4*this.selectedBezier+0]=t[0],this.beziers[4*this.selectedBezier+1]=t[1],this.beziers[4*this.selectedBezier+2]=t[2],this.beziers[4*this.selectedBezier+3]=t[3]),this.buttonExtension[this.selectedBezier].setValue(this.values,this.beziers,this.times)}}keyboardEvent(t,e){this.buttonExtension?.forEach(i=>{null!=i&&i.keyboardEvent(t,e)})}checkValuesChanged(){for(let t=0;t<this.values.length;t++)this.values[t]!=this.oldValues[t]&&(this.oldValues[t]=this.values[t],this.valueChanged=!0);for(let t=0;t<this.beziers.length;t++)this.beziers[t]!=this.oldBeziers[t]&&(this.oldBeziers[t]=this.beziers[t],this.valueChanged=!0);for(let t=0;t<this.times.length;t++)this.times[t]!=this.oldTimes[t]&&(this.oldTimes[t]=this.times[t],this.valueChanged=!0)}setActive(t,e,i){if(this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2]),this.buttonExtension?.forEach(t=>{null!=t&&t.setNonActive()}),null!=this.addRemoveButton.addMesh&&t==this.addRemoveButton.addMesh.name){const t=[];this.values.forEach(e=>{t.push(e)}),this.values=t,this.values.push(1),this.values.push(0),this.values.push(0);const e=[];this.beziers.forEach(t=>{e.push(t)}),this.beziers=e,this.beziers.push(40),this.beziers.push(0),this.beziers.push(60),this.beziers.push(100),this.times.push(100),this.buttonExtension?.push(new S(this.buttonExtension?.length,this.scene,this.position,this.yposOffset,this.emittername+"_knop_"+this.index.toString(),this.values,this.beziers,this.times,this.parameters)),this.setPosition(this.position),this.setNonActive(),this.valueChanged=!0}null!=this.addRemoveButton.removeMesh&&t==this.addRemoveButton.removeMesh.name&&null!=this.buttonExtension[this.buttonExtension.length-1]&&(this.values.length>=3*this.buttonExtension.length+3&&(this.values.pop(),this.values.pop(),this.values.pop(),this.beziers.pop(),this.beziers.pop(),this.beziers.pop(),this.beziers.pop(),this.times.pop()),this.buttonExtension[this.buttonExtension.length-1].dispose(),this.buttonExtension?.pop(),this.setPosition(this.position),this.setNonActive(),this.valueChanged=!0),this.colorpickerActive=!1,t!=this.colorPicker.hueMesh.name&&t!=this.colorPicker.satMesh.name||(this.colorpickerActive=!0,this.colorPicker.show());let r=!1;if(0==this.colorpickerActive){this.selectedExtension=-1;for(let e=0;e<this.buttonExtension.length;e++)null!=this.buttonExtension[e]&&this.buttonExtension[e].checkButtonHit(t)&&(this.selectedExtension=e+1,r=!0);t==this.mesh.name&&(this.selectedExtension=0)}if(this.selectedExtension>-1){if(this.colorPicker.show(),this.colorPicker.setPosition(this.position.x+320*this.selectedExtension,this.yposOffset+this.position.y,this.position.z),this.colorPicker.setColor(this.values[3*this.selectedExtension+0],this.values[3*this.selectedExtension+1],this.values[3*this.selectedExtension+2]),t==this.colorPicker.hueMesh.name&&this.colorPicker.setHue(e,i),t==this.colorPicker.satMesh.name&&this.colorPicker.setSat(e,i),this.selectedExtension>0){const t=this.colorPicker.getColor();this.values[3*this.selectedExtension+0]=t[0],this.values[3*this.selectedExtension+1]=t[1],this.values[3*this.selectedExtension+2]=t[2],this.buttonExtension[this.selectedExtension-1].setValue(this.values,this.beziers,this.times),this.buttonExtension[this.selectedExtension-1].setActive()}if(0==this.selectedExtension){const t=this.colorPicker.getColor();this.values[0]=t[0],this.values[1]=t[1],this.values[2]=t[2],this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2])}return!0}if(this.bezierActive=!1,t!=this.curveEditor?.handle1.name&&t!=this.curveEditor?.handle2.name||(this.bezierActive=!0,this.curveEditor.show()),0==this.bezierActive){this.selectedBezier=-1;for(let e=0;e<this.buttonExtension.length;e++)null!=this.buttonExtension[e]&&this.buttonExtension[e].checkBezierHit(t)&&(this.selectedBezier=e,r=!0)}if(this.selectedBezier>=0){if(this.curveEditor.show(),this.curveEditor.setPosition(this.position.x+320*this.selectedBezier+32,this.yposOffset+this.position.y-130,this.position.z),this.curveEditor.setHandles(this.beziers[4*this.selectedBezier+0],this.beziers[4*this.selectedBezier+1],this.beziers[4*this.selectedBezier+2],this.beziers[4*this.selectedBezier+3]),t==this.curveEditor.handle1.name&&this.curveEditor?.setHandle1(e,i),t==this.curveEditor.handle2.name&&this.curveEditor?.setHandle2(e,i),this.selectedBezier>=0){const t=this.curveEditor.getHandles();null!=t&&(this.beziers[4*this.selectedBezier+0]=t[0],this.beziers[4*this.selectedBezier+1]=t[1],this.beziers[4*this.selectedBezier+2]=t[2],this.beziers[4*this.selectedBezier+3]=t[3]),this.buttonExtension[this.selectedBezier].setValue(this.values,this.beziers,this.times)}return!0}return!!r}setNonActive(){this.checkMinMax(),this.checkValuesChanged(),this.colorPicker.hide(),this.curveEditor?.hide(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawColor(this.values[0],this.values[1],this.values[2]),this.buttonExtension?.forEach(t=>{null!=t&&t.setNonActive()})}}class R{values=[0];valueString="empty";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;textureMesh;textureGeo;textureMat;canvasTexture;position;yposOffset=0;textureString="";texture;image;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values[0]=this.parameters.values[0],this.valueString=this.values[0].toString(),this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.image=document.createElement("img"),this.image.src=this.parameters.texture,this.textureString=this.parameters.texture,this.texture=new n.gPd(this.image),this.texture.minFilter=n.hxR,this.textureGeo=new n.bdM(120,120),this.textureMat=new n.V9B({map:this.texture,transparent:!0}),this.textureMesh=new n.eaF(this.textureGeo,this.textureMat),this.textureMesh.position.x=this.position.x,this.textureMesh.position.y=this.yposOffset+this.position.y+16+64,this.textureMesh.position.z=21+this.position.z,this.textureMesh.name=s+"_knop_"+t.toString()+"_texture",i.add(this.textureMesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.scene.remove(this.textureMesh),o.TP.disposeObject3D(this.textureMesh),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.image=void 0,this.texture=void 0,this.textureGeo=void 0,this.textureMat=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.textureMesh.position.x=this.position.x+64,this.textureMesh.position.y=this.yposOffset+this.position.y+16-64,this.textureMesh.position.z=21+this.position.z}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.textureString=t.texture,this.image.src=t.texture,this.texture.image=this.image,this.texture.needsUpdate=!0,null!=this.texture&&(this.textureMat.map=this.texture),this.textureMat.needsUpdate=!0)}),this.setNonActive()}setTexture(t,e){this.texture=void 0,t==this.textureMesh.name&&(this.textureString=e,this.image.src=e,this.texture=new n.gPd(this.image),this.texture.minFilter=n.hxR,this.texture.image=this.image,this.texture.needsUpdate=!0,null!=this.texture&&(this.textureMat.map=this.texture),this.textureMat.needsUpdate=!0)}getValues(){return{name:this.name,texture:this.textureString}}hide(){this.mesh.scale.set(0,0,0),this.textureMesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.textureMesh.scale.set(1,1,1)}dropFile(t){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max)}mouseEvent(t,e,i,r){this.mesh.name}keyboardEvent(t,e){this.mesh.name}setActive(t,e,i){return this.mesh.name,t==this.textureMesh.name&&async function(t){const e=await fetch(t),i=await e.blob(),r=URL.createObjectURL(i),n=document.createElement("a");n.href=r,n.download="image",document.body.appendChild(n),n.click(),document.body.removeChild(n)}(this.image.src),!1}setNonActive(){this.checkMinMax(),this.valueString=this.values[0].toString(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText)}}class P{values=[""];valueString="";filename="";oldSelected="";parameters;isMouseUp=!0;valueChanged=!1;seed=0;oldSeed=0;seedString="";seedmesh;seedgeo;seedmat;seedcanvasTexture;scene;mesh;geo;mat;textureMesh;canvasTexture;position;yposOffset=0;shapeArray=[""];colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.seed=this.parameters.seed,this.oldSeed=this.seed,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString()+"_shape",i.add(this.mesh),this.seedcanvasTexture=new p.G(20,32),this.seedgeo=new n.bdM(20,32),this.seedmat=new n.V9B({map:this.seedcanvasTexture.texture}),this.seedmesh=new n.eaF(this.seedgeo,this.seedmat),this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.seedmesh.scale.set(1,1,1),this.seedmesh.name=s+"_knop_"+t.toString()+"_seed",i.add(this.seedmesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.seedmesh),o.TP.disposeObject3D(this.seedmesh),this.seedgeo=void 0,this.seedmat=void 0,this.seedcanvasTexture=void 0,this.scene=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.shapeArray=t.values,this.filename=t.filename,this.seed=t.seed,this.oldSeed=this.seed)}),this.setNonActive()}saveSvg(t,e){t.setAttribute("xmlns","http://www.w3.org/2000/svg");const i=t.outerHTML,r=new Blob(['<?xml version="1.0" standalone="no"?>\r\n',i],{type:"image/svg+xml;charset=utf-8"}),n=URL.createObjectURL(r),s=document.createElement("a");s.href=n,s.download=e,document.body.appendChild(s),s.click(),document.body.removeChild(s)}getValues(){return{name:this.name,values:this.shapeArray,filename:this.filename,seed:this.seed}}hide(){this.mesh.scale.set(0,0,0),this.seedmesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.seedmesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){t==this.mesh.name&&(this.filename=e,this.shapeArray=i),this.setNonActive()}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.seed<0&&(this.seed=0),this.seed>9&&(this.seed=9)}mouseEvent(t,e,i,r){t==this.seedmesh.name&&0==this.isMouseUp&&(this.seed+=e,this.checkMinMax(),this.seedString=this.seed.toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.seedmesh.name&&(e.key>="0"&&e.key<="9"&&(this.seedString=e.key),this.seed=Number(this.seedString),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.seed=this.seed-1,this.checkMinMax(),this.seedString=this.seed.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.seed=this.seed+1,this.checkMinMax(),this.seedString=this.seed.toString()),this.setActive(t,0,0))}checkValueChanged(){this.oldSeed!=this.seed&&(this.valueChanged=!0,this.oldSeed=this.seed)}setActive(t,e,i){return t==this.mesh.name&&(this.filename="",this.shapeArray=[""]),t==this.seedmesh.name&&this.oldSelected==this.seedmesh.name&&this.oldSelected!=t&&this.checkValueChanged(),this.oldSelected=t,this.seedString=this.seed.toString(),t==this.seedmesh.name&&(this.seedcanvasTexture.drawBackground(this.colorLit),""==this.seedString?this.seedcanvasTexture.drawText("empty","center",21,this.colorTextLit):this.seedcanvasTexture.drawText(this.seedString.toString(),"center",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.seed??=0,this.seedString=this.seed.toString(),this.checkValueChanged(),this.valueString=this.values[0].toString(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.filename,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText)}}class C{values=[0];oldValues=[0];valueString="0";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values=[],this.values.push(this.parameters.values[0]),this.oldValues[0]=this.values[0],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values[0]=t.values[0],this.oldValues[0]=this.values[0])}),this.setNonActive()}getValues(){return{name:this.name,values:this.values}}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.valueString=this.values[0].toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.valueString+=e.key),"."!=e.key||this.valueString.includes(".")||(this.valueString+=e.key),"Backspace"==e.key&&(this.valueString=this.valueString.slice(0,-1)),"-"==e.key&&""==this.valueString&&(this.valueString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.valueString=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.valueString=this.values[0].toString()),this.values[0]=Number(this.valueString),this.setActive(t,0,0))}setActive(t,e,i){return t==this.mesh.name&&(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawText(this.valueString,"right",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.valueString=this.values[0].toString(),this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.valueString,"right",21,this.colorText)}}class I{values=[];oldValues=[];beziers=[];times=100;oldTimes=100;index=0;value1String="";value2String="";timesString="";scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;value1mesh;value1geo;value1mat;value1canvasTexture;value2mesh;value2geo;value2mat;value2canvasTexture;bordermesh;bordergeo;bordermat;linemesh;linegeo;linemat;graphmesh;graphgeo;graphmat;valueChanged=!1;isMouseUp=!1;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";parameters;constructor(t,e,i,r,s,o,a,h,l){this.name=s,this.scene=e,this.position=i,this.yposOffset=r,this.index=t+1,this.parameters=l,this.values[0]=o[2*this.index],this.values[1]=o[2*this.index+1],this.beziers[0]=a[4*(this.index-1)],this.beziers[1]=a[4*(this.index-1)+1],this.beziers[2]=a[4*(this.index-1)+2],this.beziers[3]=a[4*(this.index-1)+3],this.times=h[this.index],this.canvasTexture=new p.G(256,30),this.geo=new n.bdM(256,30),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x+300,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_extra_"+t.toString(),this.scene.add(this.mesh),this.value1canvasTexture=new p.G(60,30),this.value1geo=new n.bdM(60,30),this.value1mat=new n.V9B({map:this.value1canvasTexture.texture}),this.value1mesh=new n.eaF(this.value1geo,this.value1mat),this.value1mesh.position.x=this.position.x+43+320,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value1mesh.scale.set(1,1,1),this.value1mesh.name=s+"_extra1_"+t.toString(),this.scene.add(this.value1mesh),this.value2canvasTexture=new p.G(60,30),this.value2geo=new n.bdM(60,30),this.value2mat=new n.V9B({map:this.value2canvasTexture.texture}),this.value2mesh=new n.eaF(this.value2geo,this.value2mat),this.value2mesh.position.x=this.position.x+98+320,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1,this.value2mesh.scale.set(1,1,1),this.value2mesh.name=s+"_extra2_"+t.toString(),this.scene.add(this.value2mesh),this.bordergeo=new n.bdM(260,34),this.bordermat=new n.V9B({color:"#aaaaaa"}),this.bordermesh=new n.eaF(this.bordergeo,this.bordermat),this.bordermesh.position.x=this.position.x+98+320,this.bordermesh.position.y=this.yposOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.bordermesh.scale.set(1,1,1),this.scene.add(this.bordermesh),this.linegeo=new n.bdM(62,2),this.linemat=new n.V9B({color:"#aaaaaa"}),this.linemesh=new n.eaF(this.linegeo,this.linemat),this.linemesh.position.x=this.position.x-20,this.linemesh.position.y=this.yposOffset+this.position.y,this.linemesh.position.z=10+this.position.z+1,this.linemesh.scale.set(1,1,1),this.scene.add(this.linemesh),this.graphgeo=new n.bdM(16,16),this.graphmat=new n.V9B({color:"#aaaaaa"}),this.graphmesh=new n.eaF(this.graphgeo,this.graphmat),this.graphmesh.position.x=this.position.x-20,this.graphmesh.position.y=this.yposOffset+this.position.y,this.graphmesh.position.z=10+this.position.z+1,this.graphmesh.rotation.z=45*Math.PI/180,this.graphmesh.scale.set(1,1,1),this.graphmesh.name=s+"graph_"+t.toString(),this.scene.add(this.graphmesh),this.setNonActive()}dispose(){this.values.splice(0),this.beziers.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.value1mesh),o.TP.disposeObject3D(this.value1mesh),this.value1geo=void 0,this.value1mat=void 0,this.value1canvasTexture=void 0,this.scene.remove(this.value2mesh),o.TP.disposeObject3D(this.value2mesh),this.value2geo=void 0,this.value2mat=void 0,this.value2canvasTexture=void 0,this.scene.remove(this.bordermesh),o.TP.disposeObject3D(this.bordermesh),this.bordergeo=void 0,this.bordermat=void 0,this.scene.remove(this.linemesh),o.TP.disposeObject3D(this.linemesh),this.linegeo=void 0,this.linemat=void 0,this.scene.remove(this.graphmesh),o.TP.disposeObject3D(this.graphmesh),this.graphgeo=void 0,this.graphmat=void 0,this.scene=void 0}setPosition(t){this.position=t;const e=320*this.index;this.mesh.position.x=this.position.x+e,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.value1mesh.position.x=this.position.x+43+e,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value2mesh.position.x=this.position.x+98+e,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1,this.bordermesh.position.x=this.position.x+e,this.bordermesh.position.y=this.yposOffset+this.position.y,this.bordermesh.position.z=10+this.position.z+1,this.linemesh.position.x=this.position.x+e-160,this.linemesh.position.y=this.yposOffset+this.position.y,this.linemesh.position.z=10+this.position.z+1,this.graphmesh.position.x=this.position.x+e-160,this.graphmesh.position.y=this.yposOffset+this.position.y,this.graphmesh.position.z=10+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}getValues(){return{name:this.name,values:this.values,beziers:this.beziers,times:[this.times]}}setValue(t,e,i){this.values[0]=t[2*this.index],this.values[1]=t[2*this.index+1],this.beziers[0]=e[4*(this.index-1)],this.beziers[1]=e[4*(this.index-1)+1],this.beziers[2]=e[4*(this.index-1)+2],this.beziers[3]=e[4*(this.index-1)+3],this.times=i[this.index],this.setNonActive()}dropFile(t){}setTexture(t,e){}hide(){this.mesh.scale.set(0,0,0),this.value1mesh?.scale.set(0,0,0),this.value2mesh?.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.value1mesh?.scale.set(1,1,1),this.value2mesh?.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkBezierHit(t){return t==this.graphmesh.name}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max),this.values[1]<this.parameters.min&&(this.values[1]=this.parameters.min),this.values[1]>this.parameters.max&&(this.values[1]=this.parameters.max),this.times<0&&(this.times=0),this.times>100&&(this.times=100)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.times+=e,this.checkMinMax(),this.timesString=this.times.toString(),this.setActive(t,0,0)),t==this.value1mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.value1String=this.values[0].toString(),this.setActive(t,0,0)),t==this.value2mesh.name&&0==this.isMouseUp&&(this.values[1]+=e,this.checkMinMax(),this.value2String=this.values[1].toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.timesString+=e.key),"."!=e.key||this.timesString.includes(".")||(this.timesString+=e.key),"Backspace"==e.key&&(this.timesString=this.timesString.slice(0,-1)),"-"==e.key&&""===this.timesString&&(this.timesString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.times=this.times-1,this.checkMinMax(),this.timesString=this.times.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.times=this.times+1,this.checkMinMax(),this.timesString=this.times.toString()),this.times=Number(this.timesString),this.setActive(t,0,0)),t==this.value1mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value1String+=e.key),"."!=e.key||this.value1String.includes(".")||(this.value1String+=e.key),"Backspace"==e.key&&(this.value1String=this.value1String.slice(0,-1)),"-"==e.key&&""===this.value1String&&(this.value1String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.value1String=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.value1String=this.values[0].toString()),this.values[0]=Number(this.value1String),this.setActive(t,0,0)),t==this.value2mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value2String+=e.key),"."!=e.key||this.value2String.includes(".")||(this.value2String+=e.key),"Backspace"==e.key&&(this.value2String=this.value2String.slice(0,-1)),"-"==e.key&&""===this.value2String&&(this.value2String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[1]=this.values[1]-1,this.checkMinMax(),this.value2String=this.values[1].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[1]=this.values[1]+1,this.checkMinMax(),this.value2String=this.values[1].toString()),this.values[1]=Number(this.value2String),this.setActive(t,0,0))}setActive(t,e,i){return this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.timesString+" %","left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),t==this.mesh.name?(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.timesString+" %","left",21,this.colorTextLit),!0):t==this.value1mesh.name?(this.value1canvasTexture.drawBackground(this.colorLit),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorTextLit),!0):t==this.value2mesh.name&&(this.value2canvasTexture.drawBackground(this.colorLit),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.timesString=this.times.toString(),this.value1String=this.values[0].toString(),this.value2String=this.values[1].toString(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.timesString+" %","left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText)}}class k{values=[0,0];oldValues=[0,0];beziers=[];oldBeziers=[];times=[];oldTimes=[];seed=0;oldSeed=0;value1String="";value2String="";seedString="";oldSelected="";parameters;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;bezierActive=!1;selectedBezier=-1;seedmesh;seedgeo;seedmat;seedcanvasTexture;value1mesh;value1geo;value1mat;value1canvasTexture;value2mesh;value2geo;value2mat;value2canvasTexture;buttonExtension=[];addRemoveButton;curveEditor;valueChanged=!1;isMouseUp=!1;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";emittername="";index=0;constructor(t,e,i,r,s,o){this.name=o[t].name,this.emittername=s,this.scene=i,this.yposOffset=e,this.position=r,this.parameters=o[t],this.index=t,this.values=[],this.oldValues=[],this.parameters.values.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.beziers=[],this.oldBeziers=[],this.parameters.beziers.forEach(t=>{this.beziers.push(t),this.oldBeziers.push(t)}),this.times=[],this.oldTimes=[],this.parameters.times.forEach(t=>{this.times.push(t),this.oldTimes.push(t)}),this.seed=this.parameters.seed,this.oldSeed=this.seed,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=this.emittername+"_knop_"+t.toString(),this.scene.add(this.mesh),this.seedcanvasTexture=new p.G(20,32),this.seedgeo=new n.bdM(20,32),this.seedmat=new n.V9B({map:this.seedcanvasTexture.texture}),this.seedmesh=new n.eaF(this.seedgeo,this.seedmat),this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.seedmesh.scale.set(1,1,1),this.seedmesh.name=this.emittername+"_knop_"+t.toString()+"_seed",this.scene.add(this.seedmesh),this.value1canvasTexture=new p.G(60,32),this.value1geo=new n.bdM(60,32),this.value1mat=new n.V9B({map:this.value1canvasTexture.texture}),this.value1mesh=new n.eaF(this.value1geo,this.value1mat),this.value1mesh.position.x=this.position.x+43,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value1mesh.scale.set(1,1,1),this.value1mesh.name=this.emittername+"_knop_"+t.toString()+"_value1",this.scene.add(this.value1mesh),this.value2canvasTexture=new p.G(60,32),this.value2geo=new n.bdM(60,32),this.value2mat=new n.V9B({map:this.value2canvasTexture.texture}),this.value2mesh=new n.eaF(this.value2geo,this.value2mat),this.value2mesh.position.x=this.position.x+98,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1,this.value2mesh.scale.set(1,1,1),this.value2mesh.name=this.emittername+"_knop_"+t.toString()+"_value2",this.scene.add(this.value2mesh),this.addRemoveButton=new M(this.index,this.scene,this.position,this.yposOffset,this.emittername),this.curveEditor=new E(this.scene,this.position),this.curveEditor.show(),this.setNonActive()}dispose(){this.buttonExtension?.forEach(t=>t.dispose()),this.buttonExtension?.splice(0),this.addRemoveButton?.dispose(),this.curveEditor.dispose(),this.values.splice(0),this.oldValues.splice(0),this.beziers.splice(0),this.oldBeziers.splice(0),this.times.splice(0),this.oldTimes.splice(0),this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.seedmesh),o.TP.disposeObject3D(this.seedmesh),this.seedgeo=void 0,this.seedmat=void 0,this.seedcanvasTexture=void 0,this.scene.remove(this.value1mesh),o.TP.disposeObject3D(this.value1mesh),this.value1geo=void 0,this.value1mat=void 0,this.value1canvasTexture=void 0,this.scene.remove(this.value2mesh),o.TP.disposeObject3D(this.value2mesh),this.value2geo=void 0,this.value2mat=void 0,this.value2canvasTexture=void 0,this.scene=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.value1mesh.position.x=this.position.x+43,this.value1mesh.position.y=this.yposOffset+this.position.y,this.value1mesh.position.z=20+this.position.z+1,this.value2mesh.position.x=this.position.x+98,this.value2mesh.position.y=this.yposOffset+this.position.y,this.value2mesh.position.z=20+this.position.z+1,this.buttonExtension?.forEach(e=>{null!=e&&e.setPosition(t)}),this.addRemoveButton.setPosition(this.position,this.buttonExtension.length),this.curveEditor?.setPosition(this.position.x,this.yposOffset+this.position.y,this.position.z)}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values=[],this.oldValues=[],t.values?.forEach(t=>{this.values.push(t),this.oldValues.push(t)}),this.beziers=[],this.oldBeziers=[],t.beziers?.forEach(t=>{this.beziers.push(t),this.oldBeziers.push(t)}),this.times=[],this.oldTimes=[],t.times?.forEach(t=>{this.times.push(t),this.oldTimes.push(t)}),this.seed=t.seed,this.oldSeed=this.seed)});for(let t=0;t<this.values.length/2-1;t++)this.buttonExtension?.push(new I(t,this.scene,this.position,this.yposOffset,this.emittername+"_knop_"+this.index.toString(),this.values,this.beziers,this.times,this.parameters));this.setPosition(this.position),this.setNonActive()}getValues(){const t=[];return t.push(this.values[0]),t.push(this.values[1]),this.values=[],this.values.push(t[0]),this.values.push(t[1]),this.beziers=[],this.times=[0],this.buttonExtension?.forEach(t=>{const e=t.getValues();this.values.push(e.values[0]),this.values.push(e.values[1]),this.beziers.push(e.beziers[0]),this.beziers.push(e.beziers[1]),this.beziers.push(e.beziers[2]),this.beziers.push(e.beziers[3]),this.times.push(e.times[0])}),{name:this.name,values:this.values,beziers:this.beziers,times:this.times,seed:this.seed}}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}hide(){this.mesh.scale.set(0,0,0),this.seedmesh.scale.set(0,0,0),this.value1mesh?.scale.set(0,0,0),this.value2mesh?.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.seedmesh.scale.set(1,1,1),this.value1mesh?.scale.set(1,1,1),this.value2mesh?.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max),this.values[1]<this.parameters.min&&(this.values[1]=this.parameters.min),this.values[1]>this.parameters.max&&(this.values[1]=this.parameters.max),this.seed<0&&(this.seed=0),this.seed>9&&(this.seed=9)}mouseEvent(t,e,i,r){if(this.buttonExtension?.forEach(n=>{0==this.isMouseUp&&null!=n&&n.mouseEvent(t,e,i,r)}),t==this.seedmesh.name&&0==this.isMouseUp&&(this.seed+=e,this.checkMinMax(),this.seedString=this.seed.toString(),this.setActive(t,0,0)),t==this.value1mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.value1String=this.values[0].toString(),this.setActive(t,0,0)),t==this.value2mesh.name&&0==this.isMouseUp&&(this.values[1]+=e,this.checkMinMax(),this.value2String=this.values[1].toString(),this.setActive(t,0,0)),(t==this.curveEditor.handle1.name||t==this.curveEditor.handle2.name)&&0==this.isMouseUp&&this.selectedBezier>=0&&(this.curveEditor.show(),this.curveEditor.setPosition(this.position.x+320*this.selectedBezier+32,this.yposOffset+this.position.y-130,this.position.z),this.curveEditor.setHandles(this.beziers[4*this.selectedBezier+0],this.beziers[4*this.selectedBezier+1],this.beziers[4*this.selectedBezier+2],this.beziers[4*this.selectedBezier+3]),t==this.curveEditor.handle1.name&&this.curveEditor?.setHandle1(i,r),t==this.curveEditor.handle2.name&&this.curveEditor?.setHandle2(i,r),this.selectedBezier>=0)){const t=this.curveEditor?.getHandles();null!=t&&(this.beziers[4*this.selectedBezier+0]=t[0],this.beziers[4*this.selectedBezier+1]=t[1],this.beziers[4*this.selectedBezier+2]=t[2],this.beziers[4*this.selectedBezier+3]=t[3]),this.buttonExtension[this.selectedBezier].setValue(this.values,this.beziers,this.times)}}keyboardEvent(t,e){this.buttonExtension?.forEach(i=>{null!=i&&i.keyboardEvent(t,e)}),t==this.seedmesh.name&&(e.key>="0"&&e.key<="9"&&(this.seedString=e.key),this.seed=Number(this.seedString),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.seed=this.seed-1,this.checkMinMax(),this.seedString=this.seed.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.seed=this.seed+1,this.checkMinMax(),this.seedString=this.seed.toString()),this.setActive(t,0,0)),t==this.value1mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value1String+=e.key),"."!=e.key||this.value1String.includes(".")||(this.value1String+=e.key),"Backspace"==e.key&&(this.value1String=this.value1String.slice(0,-1)),"-"==e.key&&""===this.value1String&&(this.value1String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.value1String=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.value1String=this.values[0].toString()),this.values[0]=Number(this.value1String),this.setActive(t,0,0)),t==this.value2mesh.name&&(e.key>="0"&&e.key<="9"&&(this.value2String+=e.key),"."!=e.key||this.value2String.includes(".")||(this.value2String+=e.key),"Backspace"==e.key&&(this.value2String=this.value2String.slice(0,-1)),"-"==e.key&&""===this.value2String&&(this.value2String="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[1]=this.values[1]-1,this.checkMinMax(),this.value2String=this.values[1].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[1]=this.values[1]+1,this.checkMinMax(),this.value2String=this.values[1].toString()),this.values[1]=Number(this.value2String),this.setActive(t,0,0))}checkValueChanged(){for(let t=0;t<this.values.length;t++)this.oldValues[t]!=this.values[t]&&(this.valueChanged=!0,this.oldValues[t]=this.values[t]);for(let t=0;t<this.beziers.length;t++)this.beziers[t]!=this.oldBeziers[t]&&(this.oldBeziers[t]=this.beziers[t],this.valueChanged=!0);for(let t=0;t<this.times.length;t++)this.oldTimes[t]!=this.times[t]&&(this.valueChanged=!0,this.oldTimes[t]=this.times[t]);this.oldSeed!=this.seed&&(this.valueChanged=!0,this.oldSeed=this.seed)}setActive(t,e,i){if(this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText),t!=this.seedmesh.name&&t!=this.value1mesh.name&&t!=this.value2mesh.name||this.oldSelected!=this.seedmesh.name&&this.oldSelected!=this.value1mesh.name&&this.oldSelected!=this.value2mesh.name||this.oldSelected!=t&&this.checkValueChanged(),this.oldSelected=t,null!=this.addRemoveButton.addMesh&&t==this.addRemoveButton.addMesh.name){const t=[];this.values.forEach(e=>{t.push(e)}),this.values=t,this.values.push(0),this.values.push(100);const e=[];this.beziers.forEach(t=>{e.push(t)}),this.beziers=e,this.beziers.push(50),this.beziers.push(50),this.beziers.push(50),this.beziers.push(50),this.times.push(100),this.buttonExtension?.push(new I(this.buttonExtension?.length,this.scene,this.position,this.yposOffset,this.emittername+"_knop_"+this.index.toString(),this.values,this.beziers,this.times,this.parameters)),this.setPosition(this.position),this.setNonActive(),this.valueChanged=!0}null!=this.addRemoveButton.removeMesh&&t==this.addRemoveButton.removeMesh.name&&null!=this.buttonExtension[this.buttonExtension.length-1]&&(this.values.length>=2*this.buttonExtension.length+2&&(this.values.pop(),this.values.pop(),this.beziers.pop(),this.beziers.pop(),this.beziers.pop(),this.beziers.pop(),this.times.pop()),this.buttonExtension[this.buttonExtension.length-1].dispose(),this.buttonExtension?.pop(),this.setPosition(this.position),this.setNonActive(),this.valueChanged=!0);let r=!1;if(this.buttonExtension?.forEach(n=>{null!=n&&n.setActive(t,e,i)&&(r=!0)}),t==this.seedmesh.name)return this.seedcanvasTexture.drawBackground(this.colorLit),this.seedcanvasTexture.drawText(this.seedString.toString(),"center",21,this.colorTextLit),!0;if(t==this.value1mesh.name)return this.value1canvasTexture.drawBackground(this.colorLit),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorTextLit),!0;if(t==this.value2mesh.name)return this.value2canvasTexture.drawBackground(this.colorLit),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorTextLit),!0;if(this.bezierActive=!1,t!=this.curveEditor?.handle1.name&&t!=this.curveEditor?.handle2.name||(this.bezierActive=!0,this.curveEditor.show()),0==this.bezierActive){this.selectedBezier=-1;for(let e=0;e<this.buttonExtension.length;e++)null!=this.buttonExtension[e]&&this.buttonExtension[e].checkBezierHit(t)&&(this.selectedBezier=e,r=!0)}if(this.selectedBezier>=0){if(this.curveEditor.show(),this.curveEditor.setPosition(this.position.x+320*this.selectedBezier+32,this.yposOffset+this.position.y-130,this.position.z),this.curveEditor.setHandles(this.beziers[4*this.selectedBezier+0],this.beziers[4*this.selectedBezier+1],this.beziers[4*this.selectedBezier+2],this.beziers[4*this.selectedBezier+3]),t==this.curveEditor.handle1.name&&this.curveEditor?.setHandle1(e,i),t==this.curveEditor.handle2.name&&this.curveEditor?.setHandle2(e,i),this.selectedBezier>=0){const t=this.curveEditor.getHandles();null!=t&&(this.beziers[4*this.selectedBezier+0]=t[0],this.beziers[4*this.selectedBezier+1]=t[1],this.beziers[4*this.selectedBezier+2]=t[2],this.beziers[4*this.selectedBezier+3]=t[3]),this.buttonExtension[this.selectedBezier].setValue(this.values,this.beziers,this.times)}return!0}return!!r}setNonActive(){this.curveEditor?.hide(),this.checkMinMax(),this.seedString=this.seed.toString(),this.value1String=this.values[0].toString(),this.value2String=this.values[1].toString(),this.checkValueChanged(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.value1canvasTexture.drawBackground(this.colorBg),this.value1canvasTexture.drawText(this.value1String,"right",21,this.colorText),this.value2canvasTexture.drawBackground(this.colorBg),this.value2canvasTexture.drawText(this.value2String,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText(this.seedString,"center",21,this.colorText),this.buttonExtension?.forEach(t=>{null!=t&&t.setNonActive()})}}class B{frame;position;buttonArray=[];name="";constructor(t,e){this.name=e,this.position=new n.Pq0(0,500,0);let i=0;for(let e=0;e<l.length;e++){const n=32*-i-16;l[e].type==r.Number?this.buttonArray.push(new m(e,n,t,this.position,this.name,l)):l[e].type==r.Label?this.buttonArray.push(new g(e,n,t,this.position,this.name,l)):l[e].type==r.Move?this.buttonArray.push(new C(e,n,t,this.position,this.name,l)):l[e].type==r.Title?this.buttonArray.push(new v(e,n,t,this.position,this.name,l)):l[e].type==r.MinMax?this.buttonArray.push(new y(e,n,t,this.position,this.name,l)):l[e].type==r.MinMaxOptions?this.buttonArray.push(new k(e,n,t,this.position,this.name,l)):l[e].type==r.List?this.buttonArray.push(new b(e,n,t,this.position,this.name,l)):l[e].type==r.Color?this.buttonArray.push(new T(e,n,t,this.position,this.name,l)):l[e].type==r.Texture?this.buttonArray.push(new R(e,n,t,this.position,this.name,l)):l[e].type==r.Shape&&this.buttonArray.push(new P(e,n,t,this.position,this.name,l)),i+=l[e].buttonsize}this.frame=new a(this.position,t,i)}historyNeedsUpdate(){for(const t of this.buttonArray)if(t.checkForChanges())return!0;return!1}setPosition(t){this.position=t,this.frame.setPosition(this.position),this.buttonArray.forEach(t=>{t.setPosition(this.position)})}hitButton(t,e,i){this.buttonArray.forEach(r=>{0==r.setActive(t,e,i)&&r.setNonActive()})}setValues(t){this.buttonArray.forEach(e=>{e.setValue(t)})}getValues(){const t=[];return this.buttonArray.forEach(e=>{const i=e.getValues();null!=i&&"Move"!=i.name&&t.push(i)}),t}setTexture(t,e){this.buttonArray.forEach(i=>{i.setTexture(t,e)})}setShape(t,e,i){this.buttonArray.forEach(r=>{r.setShape(t,e,i)})}mouseUp(){this.buttonArray.forEach(t=>{t.mouseUp()})}mouseDown(){this.buttonArray.forEach(t=>{t.mouseDown()})}mouseEvent(t,e,i,r){this.buttonArray.forEach(n=>{n.mouseEvent(t,e,i,r)})}keyboardEvent(t,e){this.buttonArray.forEach(i=>{i.keyboardEvent(t,e)}),"Enter"==e.key&&this.buttonArray.forEach(t=>{t.setNonActive()})}minimize(){this.buttonArray.forEach(t=>{t.hide()}),this.frame.minimize()}maximize(){this.buttonArray.forEach(t=>{t.show()}),this.frame.maximize()}dispose(){this.buttonArray.forEach(t=>{t.dispose()}),this.frame.dispose()}}class O{scene;mesh;geo;mat;canvasTexture;parameters;position;yposOffset=0;isMouseUp=!1;colorBg="#505050";colorText="#dddddd";name="";dir="";constructor(t,e,i,r,s,o){this.dir=o[t].dir,this.scene=i,this.yposOffset=e,this.position=r,this.parameters=o[t],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.scale.set(1,1,1),this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}checkForChanges(){return!1}setValue(t){}getValues(){}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}mouseEvent(t,e,i,r){}keyboardEvent(t,e){}getType(){return"Label"}setActive(t,e,i){return t==this.mesh.name?this.dir:"false"}setNonActive(){this.canvasTexture.setFont("17px Helvetica"),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText)}}var L=i(6763);class U{values=[0];oldValues=[0];valueString="0";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";dir="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values=[],this.values.push(this.parameters.values[0]),this.oldValues[0]=this.values[0],this.dir=this.parameters.dir+"/"+this.parameters.name,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values[0]=t.values[0],this.oldValues[0]=this.values[0])}),this.setNonActive()}getValues(){return{name:this.name,values:this.values}}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.valueString=this.values[0].toString(),this.setActive(t,0,0),L.log("true"))}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.valueString+=e.key),"."!=e.key||this.valueString.includes(".")||(this.valueString+=e.key),"Backspace"==e.key&&(this.valueString=this.valueString.slice(0,-1)),"-"==e.key&&""==this.valueString&&(this.valueString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.valueString=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.valueString=this.values[0].toString()),this.values[0]=Number(this.valueString),this.setActive(t,0,0))}getType(){return"Button"}setActive(t,e,i){return t==this.mesh.name?(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.dir):"false"}setNonActive(){this.checkMinMax(),this.valueString=this.values[0].toString(),this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText)}}var D=i(6763);class N{scene;frame;prefabList=[];position;buttonArray=[];name="";defaultFoldersOpen=0;dataPrefabs=[];constructor(t,e,i){this.prefabList=[],this.scene=t,this.name=i,this.position=e}setPosition(t){this.position=t,this.frame.setPosition(this.position)}async setList(){await this.loadprefabs(),this.createFrame()}deleteFrame(){this.buttonArray.forEach(t=>{null!=t&&t.dispose()}),this.buttonArray=[],null!=this.frame&&this.frame.dispose()}createFrame(){let t=0;for(let e=0;e<this.prefabList.length;e++){const i=32*-t-16;1==this.prefabList[e].values[0]&&(this.prefabList[e].type==r.Button?this.buttonArray.push(new U(e,i,this.scene,this.position,this.name,this.prefabList)):this.prefabList[e].type==r.Title?this.buttonArray.push(new v(e,i,this.scene,this.position,this.name,l)):this.prefabList[e].type==r.Label&&this.buttonArray.push(new O(e,i,this.scene,this.position,this.name,this.prefabList)),t+=this.prefabList[e].buttonsize)}this.frame=new a(this.position,this.scene,t)}async loadprefabs(){this.prefabList=[];try{const t=await fetch("http://localhost:3002/prefabs");this.dataPrefabs=await t.json();const e={type:r.Title,dir:"",name:"Prefabs",values:[1],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1};this.prefabList.push(e);let i="";this.dataPrefabs.forEach(t=>{const e=t;if(i!=e.project){i=e.project;const t={type:r.Label,dir:e.project,name:e.project,values:[1],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1};this.prefabList.push(t)}const n={type:r.Button,dir:e.project,name:e.prefab,values:[this.defaultFoldersOpen],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1};this.prefabList.push(n)})}catch(t){D.log("this error :"),D.log(t);const e={type:r.Title,dir:"",name:"NO ASSETS FOUND",values:[1],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1};this.prefabList.push(e);const i={type:r.Label,dir:"No Assets Found",name:"No Assets Found",values:[1],min:0,max:1e3,seed:0,list:[],times:[],beziers:[],texture:"",buttonsize:1};this.prefabList.push(i)}}hitButton(t,e,i){let r="false";return this.buttonArray.forEach(n=>{n.setNonActive();const s=n.getType(),o=n.setActive(t,e,i);"false"==o?n.setNonActive():(0!=o&&("Button"==s&&(r=o),"Label"==s&&(r=o,this.setFolders(r),r="false")),1==o&&(r="false"))}),this.setFolders("test"),this.deleteFrame(),this.createFrame(),r}setFolders(t){this.prefabList.forEach(e=>{e.dir==t&&e.name!=t&&(1==e.values[0]?e.values[0]=0:0==e.values[0]&&(e.values[0]=1))})}mouseUp(){this.buttonArray.forEach(t=>{t.mouseUp()})}mouseDown(){this.buttonArray.forEach(t=>{t.mouseDown()})}mouseEvent(t,e,i,r){this.buttonArray.forEach(n=>{n.mouseEvent(t,e,i,r)})}keyboardEvent(t,e){this.buttonArray.forEach(i=>{i.keyboardEvent(t,e)}),"Enter"==e.key&&this.buttonArray.forEach(t=>{t.setNonActive()})}}class F{values=[""];valueString="";filename="";oldSelected="";parameters;isMouseUp=!0;valueChanged=!1;seed=0;oldSeed=0;seedString="";seedmesh;seedgeo;seedmat;seedcanvasTexture;scene;mesh;geo;mat;textureMesh;canvasTexture;position;yposOffset=0;shapeArray=[""];colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.seed=this.parameters.seed,this.oldSeed=this.seed,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString()+"_shape",i.add(this.mesh),this.seedcanvasTexture=new p.G(20,32),this.seedgeo=new n.bdM(20,32),this.seedmat=new n.V9B({map:this.seedcanvasTexture.texture}),this.seedmesh=new n.eaF(this.seedgeo,this.seedmat),this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1,this.seedmesh.scale.set(1,1,1),this.seedmesh.name=s+"_knop_"+t.toString()+"_seed",i.add(this.seedmesh),this.setNonActive()}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0,this.scene.remove(this.seedmesh),o.TP.disposeObject3D(this.seedmesh),this.seedgeo=void 0,this.seedmat=void 0,this.seedcanvasTexture=void 0,this.scene=void 0}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.seedmesh.position.x=this.position.x-118,this.seedmesh.position.y=this.yposOffset+this.position.y,this.seedmesh.position.z=20+this.position.z+1}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.shapeArray=t.values,this.filename=t.filename,this.seed=t.seed,this.oldSeed=this.seed)}),this.setNonActive()}getValues(){return{name:this.name,values:this.shapeArray,filename:this.filename,seed:this.seed}}hide(){this.mesh.scale.set(0,0,0),this.seedmesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1),this.seedmesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){t==this.mesh.name&&(this.filename=e,this.shapeArray=i),this.setNonActive()}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.seed<0&&(this.seed=0),this.seed>9&&(this.seed=9)}mouseEvent(t,e,i,r){t==this.seedmesh.name&&0==this.isMouseUp&&(this.seed+=e,this.checkMinMax(),this.seedString=this.seed.toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.seedmesh.name&&(e.key>="0"&&e.key<="9"&&(this.seedString=e.key),this.seed=Number(this.seedString),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.seed=this.seed-1,this.checkMinMax(),this.seedString=this.seed.toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.seed=this.seed+1,this.checkMinMax(),this.seedString=this.seed.toString()),this.setActive(t,0,0))}checkValueChanged(){this.oldSeed!=this.seed&&(this.valueChanged=!0,this.oldSeed=this.seed)}setActive(t,e,i){return t==this.mesh.name&&(this.filename="",this.shapeArray=[""]),t==this.seedmesh.name&&this.oldSelected==this.seedmesh.name&&this.oldSelected!=t&&this.checkValueChanged(),this.oldSelected=t,this.seedString=this.seed.toString(),t==this.seedmesh.name&&(this.seedcanvasTexture.drawBackground(this.colorLit),""==this.seedString?this.seedcanvasTexture.drawText("empty","center",21,this.colorTextLit):this.seedcanvasTexture.drawText(this.seedString.toString(),"center",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.seed??=0,this.seedString=this.seed.toString(),this.checkValueChanged(),this.valueString=this.values[0].toString(),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.filename,"right",21,this.colorText),this.seedcanvasTexture.drawBackground(this.colorBg),this.seedcanvasTexture.drawText("","center",21,this.colorText)}}class z{values=[0];oldValues=[0];valueString="0";parameters;isMouseUp=!0;valueChanged=!1;scene;mesh;geo;mat;canvasTexture;position;yposOffset=0;colorBg="#333333";colorText="#aaaaaa";colorLit="#dd5500";colorTextLit="#ffffff";name="";constructor(t,e,i,r,s,o){this.scene=i,this.name=o[t].name,this.yposOffset=e,this.position=r,this.parameters=o[t],this.values=[],this.values.push(this.parameters.values[0]),this.oldValues[0]=this.values[0],this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z,this.mesh.name=s+"_knop_"+t.toString(),i.add(this.mesh),this.setNonActive()}setPosition(t){this.position=t,this.mesh.position.x=this.position.x,this.mesh.position.y=this.yposOffset+this.position.y,this.mesh.position.z=20+this.position.z}dispose(){this.scene.remove(this.mesh),o.TP.disposeObject3D(this.mesh),this.values.splice(0),this.canvasTexture=void 0,this.scene=void 0,this.geo=void 0,this.mat=void 0,this.position=void 0}checkForChanges(){return!!this.valueChanged&&(this.valueChanged=!1,!0)}setValue(t){t.forEach(t=>{t.name==this.name&&(this.values[0]=t.values[0],this.oldValues[0]=this.values[0])}),this.setNonActive()}getValues(){return{name:this.name,values:this.values}}hide(){this.mesh.scale.set(0,0,0)}show(){this.mesh.scale.set(1,1,1)}dropFile(t){}setTexture(t,e){}setShape(t,e,i){}mouseUp(){this.isMouseUp=!0}mouseDown(){this.isMouseUp=!1}checkMinMax(){this.values[0]<this.parameters.min&&(this.values[0]=this.parameters.min),this.values[0]>this.parameters.max&&(this.values[0]=this.parameters.max)}mouseEvent(t,e,i,r){t==this.mesh.name&&0==this.isMouseUp&&(this.values[0]+=e,this.checkMinMax(),this.valueString=this.values[0].toString(),this.setActive(t,0,0))}keyboardEvent(t,e){t==this.mesh.name&&(e.key>="0"&&e.key<="9"&&(this.valueString+=e.key),"."!=e.key||this.valueString.includes(".")||(this.valueString+=e.key),"Backspace"==e.key&&(this.valueString=this.valueString.slice(0,-1)),"-"==e.key&&""===this.valueString&&(this.valueString="-"),"ArrowLeft"!=e.key&&"ArrowDown"!=e.key||(this.values[0]=this.values[0]-1,this.checkMinMax(),this.valueString=this.values[0].toString()),"ArrowRight"!=e.key&&"ArrowUp"!=e.key||(this.values[0]=this.values[0]+1,this.checkMinMax(),this.valueString=this.values[0].toString()),this.values[0]=Number(this.valueString),this.setActive(t,0,0))}setActive(t,e,i){return t==this.mesh.name&&(this.canvasTexture.drawBackground(this.colorLit),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorTextLit),this.canvasTexture.drawText(this.valueString,"right",21,this.colorTextLit),!0)}setNonActive(){this.checkMinMax(),this.valueString=this.values[0].toString(),this.oldValues[0]!=this.values[0]&&(this.valueChanged=!0,this.oldValues[0]=this.values[0]),this.canvasTexture.drawBackground(this.colorBg),this.canvasTexture.drawText(this.parameters.name,"left",21,this.colorText),this.canvasTexture.drawText(this.valueString,"right",21,this.colorText)}}var G=i(6763);class j{frame;position;buttonArray=[];name="";totalLength=0;bezierArrayLengths=[];bezierArray=[];constructor(t,e,i){this.name=i,this.position=e;let n=0;for(let e=0;e<f.length;e++){const i=32*-n-16;f[e].type==r.Number?this.buttonArray.push(new m(e,i,t,this.position,this.name,f)):f[e].type==r.Label?this.buttonArray.push(new g(e,i,t,this.position,this.name,f)):f[e].type==r.Title?this.buttonArray.push(new v(e,i,t,this.position,this.name,f)):f[e].type==r.MinMax?this.buttonArray.push(new y(e,i,t,this.position,this.name,f)):f[e].type==r.MinMaxOptions?this.buttonArray.push(new k(e,i,t,this.position,this.name,f)):f[e].type==r.List?this.buttonArray.push(new b(e,i,t,this.position,this.name,f)):f[e].type==r.Color?this.buttonArray.push(new T(e,i,t,this.position,this.name,f)):f[e].type==r.Texture?this.buttonArray.push(new R(e,i,t,this.position,this.name,f)):f[e].type==r.Path?this.buttonArray.push(new F(e,i,t,this.position,this.name,f)):f[e].type==r.Shape?this.buttonArray.push(new P(e,i,t,this.position,this.name,f)):f[e].type==r.Checkbox&&this.buttonArray.push(new z(e,i,t,this.position,this.name,f)),n+=f[e].buttonsize}this.frame=new a(this.position,t,n)}historyNeedsUpdate(){for(const t of this.buttonArray)if(t.checkForChanges())return!0;return!1}createShapePoints(t){this.totalLength=0;let e=[];return this.bezierArray=[],this.bezierArrayLengths=[],t.forEach(t=>{e=t.split(" ");const i=[];e.forEach(t=>{t.split(/(?:c|m|z|,)+/).forEach(t=>{""!==t&&i.push(parseFloat(t))})});const r=(i.length/2-1)/3,n=[];let s=-960,o=-540;for(let t=0;t<r;t++){s+=i[6*t],o+=i[6*t+1],n.push({p1x:s,p1y:o,p2x:s+i[6*t+2],p2y:o+i[6*t+3],p3x:s+i[6*t+4],p3y:o+i[6*t+5],p4x:s+i[6*t+6],p4y:o+i[6*t+7]});const e=new A.v;e.setPoints(n[t].p1x,n[t].p1y,n[t].p4x,n[t].p4y),e.setHandles(n[t].p2x,n[t].p2y,n[t].p3x,n[t].p3y),this.totalLength=this.totalLength+e.getCurveLength(),this.bezierArray.push(e),this.bezierArrayLengths.push(e.getCurveLength())}}),G.log(this.bezierArrayLengths),G.log("Total Length = "+this.totalLength),0}getPosAtPercentage(t){const e=t*this.totalLength;let i=0,r=0;for(let t=0;t<this.bezierArrayLengths.length;t++)i<e&&(i+=this.bezierArrayLengths[t],r=t);return null!=this.bezierArray[r]?this.bezierArray[r].getPointAtLength(this.bezierArrayLengths[r]-(i-e)):[0,0]}setPosition(t){this.position=t,this.frame.setPosition(this.position),this.buttonArray.forEach(t=>{t.setPosition(this.position)})}hitButton(t,e,i){this.buttonArray.forEach(r=>{0==r.setActive(t,e,i)&&r.setNonActive()})}setValues(t){this.buttonArray.forEach(e=>{e.setValue(t)})}getValues(){const t=[];return this.buttonArray.forEach(e=>{const i=e.getValues();null!=i&&t.push(i)}),t}setTexture(t,e){this.buttonArray.forEach(i=>{i.setTexture(t,e)})}setShape(t,e,i){this.buttonArray.forEach(r=>{r.setShape(t,e,i)}),null!=i[0]&&i[0]}mouseUp(){this.buttonArray.forEach(t=>{t.mouseUp()})}mouseDown(){this.buttonArray.forEach(t=>{t.mouseDown()})}mouseEvent(t,e,i,r){this.buttonArray.forEach(n=>{n.mouseEvent(t,e,i,r)})}keyboardEvent(t,e){this.buttonArray.forEach(i=>{i.keyboardEvent(t,e)}),"Enter"==e.key&&this.buttonArray.forEach(t=>{t.setNonActive()})}minimize(){this.buttonArray.forEach(t=>{t.hide()}),this.frame.minimize()}maximize(){this.buttonArray.forEach(t=>{t.show()}),this.frame.maximize()}dispose(){this.buttonArray.forEach(t=>{t.dispose()}),this.frame.dispose()}}class V{scene;mesh;plusmesh;geo;mat;position;bordermesh;bordergeo;bordermat;plus1mesh;plus1geo;plus1mat;minmesh;plus2mesh;plus2geo;plus2mat;colorBg="#777777";colorText="#aaaaaa";colorBorder="#aaaaaa";constructor(t,e){this.scene=t,this.position=e,this.geo=new n.bdM(30,30),this.mat=new n.V9B({color:this.colorBg}),this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=this.position.x+16,this.mesh.position.y=this.position.y,this.mesh.position.z=10+this.position.z,this.mesh.name="AddEmittor",t.add(this.mesh),this.plusmesh=new n.eaF(this.geo,this.mat),this.plusmesh.position.x=this.position.x-16,this.plusmesh.position.y=this.position.y,this.plusmesh.position.z=10+this.position.z,this.plusmesh.name="RemoveEmittor",t.add(this.plusmesh),this.bordergeo=new n.bdM(66,34),this.bordermat=new n.V9B({color:this.colorBorder}),this.bordermesh=new n.eaF(this.bordergeo,this.bordermat),this.bordermesh.position.x=this.position.x,this.bordermesh.position.y=this.position.y,this.bordermesh.position.z=9+this.position.z,this.bordermesh.name="AddRemoveEmittor",t.add(this.bordermesh),this.plus1geo=new n.bdM(14,3),this.plus1mat=new n.V9B({color:this.colorText}),this.plus1mesh=new n.eaF(this.plus1geo,this.plus1mat),this.plus1mesh.position.x=this.position.x+16,this.plus1mesh.position.y=this.position.y,this.plus1mesh.position.z=10+this.position.z+1,this.plus1mesh.scale.set(1,1,1),this.scene.add(this.plus1mesh),this.minmesh=new n.eaF(this.plus1geo,this.plus1mat),this.minmesh.position.x=this.position.x-16,this.minmesh.position.y=this.position.y,this.minmesh.position.z=10+this.position.z+1,this.scene.add(this.minmesh),this.plus2geo=new n.bdM(3,14),this.plus2mat=new n.V9B({color:this.colorText}),this.plus2mesh=new n.eaF(this.plus2geo,this.plus2mat),this.plus2mesh.position.x=this.position.x+16,this.plus2mesh.position.y=this.position.y,this.plus2mesh.position.z=10+this.position.z+1,this.plus2mesh.scale.set(1,1,1),this.scene.add(this.plus2mesh)}setPosition(t){this.mesh.position.y=t,this.minmesh.position.y=t,this.plusmesh.position.y=t,this.bordermesh.position.y=t,this.plus1mesh.position.y=t,this.plus2mesh.position.y=t}}var H=i(6763);class W{scene;camera;mesh;geo;mat;canvasTexture;position;constructor(t,e){H.log("Particle Editor Version: "+"2.2.6".toString()),this.scene=t,this.camera=e,this.canvasTexture=new p.G(256,32),this.geo=new n.bdM(256,32),this.mat=new n.V9B({map:this.canvasTexture.texture}),this.mat.transparent=!0,this.mat.blending=n.EZo,this.mesh=new n.eaF(this.geo,this.mat),this.mesh.position.x=e.position.x+window.innerWidth/4-128,this.mesh.position.y=e.position.y+window.innerHeight/2-16,this.mesh.position.z=60,this.canvasTexture.drawBackground("#000000"),this.canvasTexture.drawText("2.2.6".toString(),"right",21,"#ffffff"),this.scene.add(this.mesh)}setPosition(t){this.mesh.position.x=t.position.x+window.innerWidth/4-128,this.mesh.position.y=t.position.y+window.innerHeight/2-16}}class X{scene;renderer;camera;version;emitterArray=[];prefab;editorSettings;addRemoveButton;raycaster;selected="";movePlaneGeo;moveMaterial;movePlane;movePosX=0;movePosY=0;distance=1e3;constructor(){this.scene=new n.Z58,this.renderer=new s.JeP({antialias:!0,alpha:!0}),this.renderer.outputColorSpace=n.Zr2,this.renderer.autoClear=!1;const t=window.innerHeight,e=window.innerWidth/2;this.camera=new n.qUd(-e/2,e/2,t/2,-t/2,1,1e4),this.camera.position.set(-100,-600,100),this.renderer.setSize(e,t),this.version=new W(this.scene,this.camera),this.movePlaneGeo=new n.bdM(2e4,2e4),this.moveMaterial=new n.V9B({color:4473924}),this.movePlane=new n.eaF(this.movePlaneGeo,this.moveMaterial),this.movePlane.name="move",this.movePlane.position.set(200,-600,0),this.scene.add(this.movePlane),this.emitterArray.push(new B(this.scene,"Emitter_"+(this.emitterArray.length+1).toString())),this.emitterArray[0].setPosition(new n.Pq0(0,0,0)),this.raycaster=new n.tBo,this.emitterArray[0].minimize(),this.emitterArray[0].maximize(),this.prefab=new N(this.scene,new n.Pq0(-400,-400,0),"Prefabs"),this.editorSettings=new j(this.scene,new n.Pq0(-400,0,0),"Settings (WIP)"),this.addRemoveButton=new V(this.scene,new n.Pq0(0,-1400*this.emitterArray.length,0))}add(t){t.appendChild(this.renderer.domElement)}setPrefabList(){this.prefab.setList()}historyNeedsUpdate(){for(const t of this.emitterArray)if(t.historyNeedsUpdate())return!0;return!1}mouseDown(t){this.movePosX=t.clientX,this.movePosY=t.clientY;const e=(t.clientX-window.innerWidth/2)/window.innerWidth*4-1,i=-t.clientY/this.renderer.domElement.clientHeight*2+1;this.raycaster.setFromCamera(new n.I9Y(e,i),this.camera);const r=this.raycaster.intersectObjects(this.scene.children);this.selected="",this.distance=1e3,r.forEach(t=>{t.distance<this.distance&&""!=t.object.name&&(this.selected=t.object.name,this.distance=t.distance)})}setValues(t){this.selected="",this.emitterArray.forEach(t=>t.dispose()),this.emitterArray=[];for(let e=0;e<t.length;e++)this.emitterArray.push(new B(this.scene,"Emitter_"+(this.emitterArray.length+1).toString())),this.emitterArray[e].setPosition(new n.Pq0(0,-1500*(this.emitterArray.length-1),0)),this.emitterArray[e].setValues(t[e]);this.setAddRemoveButtonPos()}getValues(){const t=[];return this.emitterArray.forEach(e=>t.push(e.getValues())),t}getEditorSettings(){const t=[];return t.push(this.editorSettings.getValues()),t}getPathPosition(t){return this.editorSettings.getPosAtPercentage(t)}setTexture(t){this.emitterArray.forEach(e=>e.setTexture(this.selected,t))}setShape(t,e){this.emitterArray.forEach(i=>i.setShape(this.selected,t,e)),this.editorSettings.setShape(this.selected,t,e)}mouseUp(t){"move"==this.selected?this.selected="":(this.emitterArray.forEach(t=>t.mouseUp()),this.editorSettings.mouseUp())}keyboardEvent(t){this.emitterArray.forEach(e=>e.keyboardEvent(this.selected,t)),this.editorSettings.keyboardEvent(this.selected,t)}hitButton(t){let e="";const i=t.clientX-window.innerWidth/2-window.innerWidth/4+this.camera.position.x,r=t.clientY-window.innerHeight/2-this.camera.position.y;this.emitterArray.forEach(t=>{t.hitButton(this.selected,i,-r),t.mouseDown()});const s=this.prefab.hitButton(this.selected,i,-r);if("false"!=s&&(e=s),this.editorSettings.hitButton(this.selected,i,-r),this.editorSettings.mouseDown(),"AddEmittor"==this.selected){const t=-1500*this.emitterArray.length;this.emitterArray.push(new B(this.scene,"Emitter_"+(this.emitterArray.length+1).toString())),this.emitterArray[this.emitterArray.length-1].setPosition(new n.Pq0(0,t,0)),this.setAddRemoveButtonPos()}return"RemoveEmittor"==this.selected&&this.emitterArray.length>1&&(this.emitterArray.length,this.emitterArray[this.emitterArray.length-1].dispose(),this.emitterArray.pop(),this.setAddRemoveButtonPos()),e}setAddRemoveButtonPos(){const t=this.emitterArray.length;this.addRemoveButton.setPosition(-1500*t+100)}mouseMove(t){if("move"==this.selected)this.camera.position.x+=this.movePosX-t.clientX,this.movePlane.position.x=this.camera.position.x,this.movePosX=t.clientX,this.camera.position.y-=this.movePosY-t.clientY,this.movePlane.position.y=this.camera.position.y,this.movePosY=t.clientY,this.version.setPosition(this.camera);else{const e=t.clientX-window.innerWidth/2-window.innerWidth/4+this.camera.position.x,i=t.clientY-window.innerHeight/2-this.camera.position.y,r=t.clientX-this.movePosX;this.emitterArray.forEach(t=>t.mouseEvent(this.selected,r,e,-i)),this.editorSettings.mouseEvent(this.selected,r,e,-i),this.movePosX=t.clientX}this.update()}windowResize(){const t=window.innerHeight,e=window.innerWidth/2;this.renderer.setSize(e,t),this.camera.left=-e/2,this.camera.right=e/2,this.camera.top=t/2,this.camera.bottom=-t/2,this.camera.updateProjectionMatrix(),this.version.setPosition(this.camera),this.update()}update(){this.renderer.clear(),this.renderer.render(this.scene,this.camera)}}},7914:t=>{var e=Object.prototype.toString;t.exports=function(t){return!0===t||!1===t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Boolean]"==e.call(t)}},7952:(t,e,i)=>{var r=e;r.utils=i(7426),r.common=i(6166),r.sha=i(6229),r.ripemd=i(6784),r.hmac=i(6567),r.sha1=r.sha.sha1,r.sha256=r.sha.sha256,r.sha224=r.sha.sha224,r.sha384=r.sha.sha384,r.sha512=r.sha.sha512,r.ripemd160=r.ripemd.ripemd160},8002:t=>{"use strict";t.exports=Math.min},8011:(t,e,i)=>{"use strict";i.d(e,{V:()=>s});var r=i(2577);const n=["align","breakWords","cssOverrides","fontVariant","fontWeight","leading","letterSpacing","lineHeight","padding","textBaseline","trim","whiteSpace","wordWrap","wordWrapWidth","fontFamily","fontStyle","fontSize"];function s(t){const e=[];let i=0;for(let r=0;r<n.length;r++){const s=`_${n[r]}`;e[i++]=t[s]}return i=o(t._fill,e,i),i=function(t,e,i){return t?(i=o(t,e,i),e[i++]=t.width,e[i++]=t.alignment,e[i++]=t.cap,e[i++]=t.join,e[i++]=t.miterLimit,i):i}(t._stroke,e,i),i=function(t,e,i){return t?(e[i++]=t.alpha,e[i++]=t.angle,e[i++]=t.blur,e[i++]=t.distance,e[i++]=r.Q.shared.setValue(t.color).toNumber(),i):i}(t.dropShadow,e,i),e.join("-")}function o(t,e,i){return t?(e[i++]=t.color,e[i++]=t.alpha,e[i++]=t.fill?.styleKey,i):i}},8068:t=>{"use strict";t.exports=SyntaxError},8075:(t,e,i)=>{"use strict";var r=i(453),n=i(487),s=n(r("String.prototype.indexOf"));t.exports=function(t,e){var i=r(t,!!e);return"function"==typeof i&&s(t,".prototype.")>-1?n(i):i}},8078:(t,e,i)=>{var r=i(2861).Buffer,n=i(8276);t.exports=function(t,e,i,s){if(r.isBuffer(t)||(t=r.from(t,"binary")),e&&(r.isBuffer(e)||(e=r.from(e,"binary")),8!==e.length))throw new RangeError("salt should be Buffer with 8 byte length");for(var o=i/8,a=r.alloc(o),h=r.alloc(s||0),l=r.alloc(0);o>0||s>0;){var u=new n;u.update(l),u.update(t),e&&u.update(e),l=u.digest();var c=0;if(o>0){var d=a.length-o;c=Math.min(o,l.length),l.copy(a,d,0,c),o-=c}if(c<l.length&&s>0){var f=h.length-s,p=Math.min(s,l.length-c);l.copy(h,f,c,c+p),s-=p}}return l.fill(0),{key:a,iv:h}}},8133:t=>{t.exports=function(t){var n=[];return t.replace(i,function(t,i,s){var o=i.toLowerCase();for(s=function(t){var e=t.match(r);return e?e.map(Number):[]}(s),"m"==o&&s.length>2&&(n.push([i].concat(s.splice(0,2))),o="l",i="m"==i?"l":"L");;){if(s.length==e[o])return s.unshift(i),n.push(s);if(s.length<e[o])throw new Error("malformed path data");n.push([i].concat(s.splice(0,e[o])))}}),n};var e={a:7,c:6,h:1,l:2,m:2,q:4,s:4,t:2,v:1,z:0},i=/([astvzqmhlc])([^astvzqmhlc]*)/gi,r=/-?[0-9]*\.?[0-9]+(?:e[-+]?\d+)?/gi},8156:t=>{"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},8170:(t,e,i)=>{"use strict";var r=i(1137),n=i(5579),s=i(4101),o=i(1241),a=i(8396),h=i(2861).Buffer;function l(t){var e;"object"!=typeof t||h.isBuffer(t)||(e=t.passphrase,t=t.key),"string"==typeof t&&(t=h.from(t));var i,l,u=s(t,e),c=u.tag,d=u.data;switch(c){case"CERTIFICATE":l=r.certificate.decode(d,"der").tbsCertificate.subjectPublicKeyInfo;case"PUBLIC KEY":switch(l||(l=r.PublicKey.decode(d,"der")),i=l.algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPublicKey.decode(l.subjectPublicKey.data,"der");case"1.2.840.10045.2.1":return l.subjectPrivateKey=l.subjectPublicKey,{type:"ec",data:l};case"1.2.840.10040.4.1":return l.algorithm.params.pub_key=r.DSAparam.decode(l.subjectPublicKey.data,"der"),{type:"dsa",data:l.algorithm.params};default:throw new Error("unknown key id "+i)}case"ENCRYPTED PRIVATE KEY":d=function(t,e){var i=t.algorithm.decrypt.kde.kdeparams.salt,r=parseInt(t.algorithm.decrypt.kde.kdeparams.iters.toString(),10),s=n[t.algorithm.decrypt.cipher.algo.join(".")],l=t.algorithm.decrypt.cipher.iv,u=t.subjectPrivateKey,c=parseInt(s.split("-")[1],10)/8,d=a.pbkdf2Sync(e,i,r,c,"sha1"),f=o.createDecipheriv(s,d,l),p=[];return p.push(f.update(u)),p.push(f.final()),h.concat(p)}(d=r.EncryptedPrivateKey.decode(d,"der"),e);case"PRIVATE KEY":switch(i=(l=r.PrivateKey.decode(d,"der")).algorithm.algorithm.join(".")){case"1.2.840.113549.1.1.1":return r.RSAPrivateKey.decode(l.subjectPrivateKey,"der");case"1.2.840.10045.2.1":return{curve:l.algorithm.curve,privateKey:r.ECPrivateKey.decode(l.subjectPrivateKey,"der").privateKey};case"1.2.840.10040.4.1":return l.algorithm.params.priv_key=r.DSAparam.decode(l.subjectPrivateKey,"der"),{type:"dsa",params:l.algorithm.params};default:throw new Error("unknown key id "+i)}case"RSA PUBLIC KEY":return r.RSAPublicKey.decode(d,"der");case"RSA PRIVATE KEY":return r.RSAPrivateKey.decode(d,"der");case"DSA PRIVATE KEY":return{type:"dsa",params:r.DSAPrivateKey.decode(d,"der")};case"EC PRIVATE KEY":return{curve:(d=r.ECPrivateKey.decode(d,"der")).parameters.value,privateKey:d.privateKey};default:throw new Error("unknown key type "+c)}}l.signature=r.signature,t.exports=l},8184:(t,e,i)=>{"use strict";var r,n=i(6556),s=i(9721)(/^\s*(?:function)?\*/),o=i(9092)(),a=i(3628),h=n("Object.prototype.toString"),l=n("Function.prototype.toString");t.exports=function(t){if("function"!=typeof t)return!1;if(s(l(t)))return!0;if(!o)return"[object GeneratorFunction]"===h(t);if(!a)return!1;if(void 0===r){var e=function(){if(!o)return!1;try{return Function("return function*() {}")()}catch(t){}}();r=!!e&&a(e)}return a(t)===r}},8206:(t,e,i)=>{var r=i(7108),n=i(2861).Buffer;function s(t){var e=n.allocUnsafe(4);return e.writeUInt32BE(t,0),e}t.exports=function(t,e){for(var i,o=n.alloc(0),a=0;o.length<e;)i=s(a++),o=n.concat([o,r("sha1").update(t).update(i).digest()]);return o.slice(0,e)}},8218:(t,e,i)=>{"use strict";i.d(e,{Z:()=>n});var r=i(8425);const n=new class{constructor(){this._poolsByClass=new Map}prepopulate(t,e){this.getPool(t).prepopulate(e)}get(t,e){return this.getPool(t).get(e)}return(t){this.getPool(t.constructor).return(t)}getPool(t){return this._poolsByClass.has(t)||this._poolsByClass.set(t,new r.b(t)),this._poolsByClass.get(t)}stats(){const t={};return this._poolsByClass.forEach(e=>{const i=t[e._classType.name]?e._classType.name+e._classType.ID:e._classType.name;t[i]={free:e.totalFree,used:e.totalUsed,size:e.totalSize}}),t}}},8276:(t,e,i)=>{"use strict";var r=i(6698),n=i(3726),s=i(2861).Buffer,o=new Array(16);function a(){n.call(this,64),this._a=1732584193,this._b=4023233417,this._c=2562383102,this._d=271733878}function h(t,e){return t<<e|t>>>32-e}function l(t,e,i,r,n,s,o){return h(t+(e&i|~e&r)+n+s|0,o)+e|0}function u(t,e,i,r,n,s,o){return h(t+(e&r|i&~r)+n+s|0,o)+e|0}function c(t,e,i,r,n,s,o){return h(t+(e^i^r)+n+s|0,o)+e|0}function d(t,e,i,r,n,s,o){return h(t+(i^(e|~r))+n+s|0,o)+e|0}r(a,n),a.prototype._update=function(){for(var t=o,e=0;e<16;++e)t[e]=this._block.readInt32LE(4*e);var i=this._a,r=this._b,n=this._c,s=this._d;i=l(i,r,n,s,t[0],3614090360,7),s=l(s,i,r,n,t[1],3905402710,12),n=l(n,s,i,r,t[2],606105819,17),r=l(r,n,s,i,t[3],3250441966,22),i=l(i,r,n,s,t[4],4118548399,7),s=l(s,i,r,n,t[5],1200080426,12),n=l(n,s,i,r,t[6],2821735955,17),r=l(r,n,s,i,t[7],4249261313,22),i=l(i,r,n,s,t[8],1770035416,7),s=l(s,i,r,n,t[9],2336552879,12),n=l(n,s,i,r,t[10],4294925233,17),r=l(r,n,s,i,t[11],2304563134,22),i=l(i,r,n,s,t[12],1804603682,7),s=l(s,i,r,n,t[13],4254626195,12),n=l(n,s,i,r,t[14],2792965006,17),i=u(i,r=l(r,n,s,i,t[15],1236535329,22),n,s,t[1],4129170786,5),s=u(s,i,r,n,t[6],3225465664,9),n=u(n,s,i,r,t[11],643717713,14),r=u(r,n,s,i,t[0],3921069994,20),i=u(i,r,n,s,t[5],3593408605,5),s=u(s,i,r,n,t[10],38016083,9),n=u(n,s,i,r,t[15],3634488961,14),r=u(r,n,s,i,t[4],3889429448,20),i=u(i,r,n,s,t[9],568446438,5),s=u(s,i,r,n,t[14],3275163606,9),n=u(n,s,i,r,t[3],4107603335,14),r=u(r,n,s,i,t[8],1163531501,20),i=u(i,r,n,s,t[13],2850285829,5),s=u(s,i,r,n,t[2],4243563512,9),n=u(n,s,i,r,t[7],1735328473,14),i=c(i,r=u(r,n,s,i,t[12],2368359562,20),n,s,t[5],4294588738,4),s=c(s,i,r,n,t[8],2272392833,11),n=c(n,s,i,r,t[11],1839030562,16),r=c(r,n,s,i,t[14],4259657740,23),i=c(i,r,n,s,t[1],2763975236,4),s=c(s,i,r,n,t[4],1272893353,11),n=c(n,s,i,r,t[7],4139469664,16),r=c(r,n,s,i,t[10],3200236656,23),i=c(i,r,n,s,t[13],681279174,4),s=c(s,i,r,n,t[0],3936430074,11),n=c(n,s,i,r,t[3],3572445317,16),r=c(r,n,s,i,t[6],76029189,23),i=c(i,r,n,s,t[9],3654602809,4),s=c(s,i,r,n,t[12],3873151461,11),n=c(n,s,i,r,t[15],530742520,16),i=d(i,r=c(r,n,s,i,t[2],3299628645,23),n,s,t[0],4096336452,6),s=d(s,i,r,n,t[7],1126891415,10),n=d(n,s,i,r,t[14],2878612391,15),r=d(r,n,s,i,t[5],4237533241,21),i=d(i,r,n,s,t[12],1700485571,6),s=d(s,i,r,n,t[3],2399980690,10),n=d(n,s,i,r,t[10],4293915773,15),r=d(r,n,s,i,t[1],2240044497,21),i=d(i,r,n,s,t[8],1873313359,6),s=d(s,i,r,n,t[15],4264355552,10),n=d(n,s,i,r,t[6],2734768916,15),r=d(r,n,s,i,t[13],1309151649,21),i=d(i,r,n,s,t[4],4149444226,6),s=d(s,i,r,n,t[11],3174756917,10),n=d(n,s,i,r,t[2],718787259,15),r=d(r,n,s,i,t[9],3951481745,21),this._a=this._a+i|0,this._b=this._b+r|0,this._c=this._c+n|0,this._d=this._d+s|0},a.prototype._digest=function(){this._block[this._blockOffset++]=128,this._blockOffset>56&&(this._block.fill(0,this._blockOffset,64),this._update(),this._blockOffset=0),this._block.fill(0,this._blockOffset,56),this._block.writeUInt32LE(this._length[0],56),this._block.writeUInt32LE(this._length[1],60),this._update();var t=s.allocUnsafe(16);return t.writeInt32LE(this._a,0),t.writeInt32LE(this._b,4),t.writeInt32LE(this._c,8),t.writeInt32LE(this._d,12),t},t.exports=a},8278:(t,e,i)=>{"use strict";i.d(e,{bn:()=>fi,eh:()=>Y,Nt:()=>b});const r=function(){};var n,s=i(8592),o=i(6763);class a{type;loggerConfig;wimiLoggerConfigOverwrite={};wimiLogger;logFunc=r.bind(this);traceFunc=t=>{o.trace(t)};origLoggerConfig;constructor(t,e,i){this.wimiLogger=e,this.type=t,this.loggerConfig=i,this.origLoggerConfig=(0,s.A)(i)}log(t,e,...i){this.loggerConfig.enableLog&&this.showLogCategory(t)&&this.logToConsole(t,e,i)}setConfigDefault(){this.wimiLoggerConfigOverwrite.showAll=void 0,this.wimiLoggerConfigOverwrite.shownCategories=void 0,this.wimiLoggerConfigOverwrite.traceLog=void 0}setLoggerConfigDefault(){this.loggerConfig.chalkConfig=(0,s.A)(this.origLoggerConfig.chalkConfig),this.loggerConfig.enableLog=this.origLoggerConfig.enableLog}setChalkDefault(){this.loggerConfig.chalkConfig=(0,s.A)(this.origLoggerConfig.chalkConfig)}getLoggerText(t,e,i){let r=`${this.loggerConfig.chalkConfig.type?this.loggerConfig.chalkConfig.type(`${this.type.toUpperCase()}`):`${this.type.toUpperCase()}`} `;const n=this.loggerConfig.chalkConfig.message?this.loggerConfig.chalkConfig.message(e):e;if(t.length>0){const e=this.wimiLogger.getCategoryChalk(t);r+=`${e?e(t):t} > ${n}`}else r+=`${n}`;return i&&(r+="|"),r}showLogCategory(t){return!!this.showAll||this.shownCategories.includes(t)}logToConsole(t,e,i){const r=this.getLoggerText(t,e,i.length>0);i.unshift(r),this.logFunc(i),this.traceLog&&this.traceFunc(r)}get traceLog(){return this.wimiLoggerConfigOverwrite.traceLog??this.wimiLogger.config.traceLog}get showAll(){return this.wimiLoggerConfigOverwrite.showAll??this.wimiLogger.config.showAll}get shownCategories(){return this.wimiLoggerConfigOverwrite.shownCategories??this.wimiLogger.config.shownCategories}}!function(t){t.Error="error",t.Warning="warning",t.Info="info"}(n||(n={}));var h=i(5248),l=i(6763);const u={enableLog:!0,chalkConfig:{type:h.bgHex("#eed202").hex("#000000").bold}};class c extends a{constructor(t){super(n.Warning,t,(0,s.A)(u)),this.logFunc=t=>{l.warn(...t)}}}class d extends Error{constructor(t){const e=new.target.prototype;super(t),Object.setPrototypeOf(this,e)}}var f=i(6763);const p={enableLog:!0,logOnThrow:!1,logOnReject:!1,chalkConfig:{type:h.bgHex("#ff0000").hex("#000000").bold}};class m extends a{constructor(t){super(n.Error,t,(0,s.A)(p)),this.logFunc=t=>{f.error(...t)}}logAndReject(t,e,i,...r){const n=this.getLoggerText(e,i,r.length>0);this.loggerConfig.logOnReject&&this.logErrorToConsole(n,r),t(new d(n))}logAndRejectCustom(t,e,i,...r){const n=this.getLoggerText(e,i.message,r.length>0);i.message=n,this.loggerConfig.logOnReject&&this.logErrorToConsole(n,r),t(i)}logAndThrow(t,e,...i){const r=this.getLoggerText(t,e,i.length>0);throw this.loggerConfig.logOnThrow&&this.logErrorToConsole(r,i),new d(r)}logAndThrowCustom(t,e,...i){const r=this.getLoggerText(t,e.message,i.length>0);throw e.message=r,this.loggerConfig.logOnThrow&&this.logErrorToConsole(r,i),e}logErrorToConsole(t,e=[]){this.loggerConfig.enableLog&&(e.unshift(t),this.logFunc(e))}}var g=i(6763);const v={enableLog:!0,chalkConfig:{type:h.bgHex("#1e90ff").hex("#000000").bold}};class y extends a{constructor(t){super(n.Info,t,(0,s.A)(v)),this.logFunc=t=>{g.log(...t)}}}const b=new class{config={shownCategories:[],showAll:!0,traceLog:!1};chalkConfig={category:{},defaultCategory:h.underline};getCategoryChalk(t){return this.chalkConfig.category[t]?this.chalkConfig.category[t]:this.chalkConfig.defaultCategory}setConfigDefault(t=!1){this.config.showAll=!0,this.config.shownCategories=[],this.config.traceLog=!1,t&&this.setChalkConfigDefault()}setChalkConfigDefault(){this.chalkConfig.category={},this.chalkConfig.defaultCategory=h.underline}_infoInstance=new y(this);get infoInstance(){return this._infoInstance}_warningInstance=new c(this);get warningInstance(){return this._warningInstance}_errorInstance=new m(this);get errorInstance(){return this._errorInstance}info(t,e,...i){this._infoInstance.log(t,e,...i)}warning(t,e,...i){this._warningInstance.log(t,e,...i)}error(t,e,...i){this._errorInstance.log(t,e,...i)}errorThrow(t,e,...i){return this._errorInstance.logAndThrow(t,e,...i)}errorThrowCustom(t,e,...i){return this._errorInstance.logAndThrowCustom(t,e,...i)}errorReject(t,e,i,...r){return this._errorInstance.logAndReject(t,e,i,...r)}errorRejectCustom(t,e,i,...r){return this._errorInstance.logAndRejectCustom(t,e,i,...r)}};var _,x;(x=_||(_={})).Game="game",x.AssetLoader="asset-loader",x.UserInterface="user-interface",x.Popups="user-interface-popups",x.Hotkeys="user-interface-hotkeys",x.InfoPages="user-interface-infoPages",x.SessionSelect="user-interface-sessionSelect",x.Utils="utils",x.Animator="utils-animator",x.CookieHandler="utils-cookieHandler",x.TickEventHandler="utils-tickEventHandler",x.GesturePixi="utils-gesturePixi",x.GradualUpdate="utils-gradualUpdate",x.Gui="utils-gui",x.Helpers="utils-helpers",x.InfoExtractor="utils-infoExtractor",x.JWT="utils-jwt",x.KeyboardHandler="utils-keyboardHandler",x.PlatformDefiner="utils-platformDefiner",x.QuerablePromise="utils-querablePromise",x.Raf="utils-raf",x.SecureParseData="utils-secureParseData",x.ServiceRunner="utils-serviceRunner",x.AnimationUpdater="utils-animationUpdater",x.WhateverPool="whateverPool",x.ValidatedJson="validatedJson",x.Hud="hud",x.Stridi="stridi",x.ConfigHandler="configHandler",x.FileTrackerPlugin="fileTrackerPlugin",x.GameLoader="gameLoader",x.ManifestPlugin="manifestPlugin",x.SocketClusterClient="socketClusterClient",x.WGPLoader="wgpLoader",x.TypedEvents="typed-events",x.GameBase="gameBase",x.GameBaseSessionSelect="gameBase-sessionSelect",new class{tickEventHandler;tickEventId="tickEventAnimationUpdater";_events=[];eventIdCounter=0;reset(){this.tickEventHandler&&this.removeTickEventFunction(),this.tickEventHandler=void 0,this._events.splice(0),this.eventIdCounter=0}getEventId(){const t=this.eventIdCounter;return this.eventIdCounter++,t}init(t){this.tickEventHandler||(this.tickEventHandler=t)}addAnimationUpdate(t,e){if(!this.checkInit())return!1;if(-1!==this.getEventIndex(t))return!1;const i={id:t,event:e};return 0===this._events.length&&this.addTickEventFunction(),this._events.push(i),!0}removeAnimationUpdate(t){if(!this.checkInit())return!1;const e=this.getEventIndex(t);return-1!==e&&(this._events.splice(e,1),0===this._events.length&&this.removeTickEventFunction(),!0)}get events(){return this._events}addTickEventFunction(){this.tickEventHandler.addEvent(this.tickEventId,this.updateEvents.bind(this),!0)}removeTickEventFunction(){this.tickEventHandler.removeEvent(this.tickEventId)}updateEvents(t){this._events.forEach(e=>e.event(t))}checkInit(){return!!this.tickEventHandler||(b.warning(_.AnimationUpdater,"Unable to use AnimationUpdater before init."),!1)}getEventIndex(t){return this._events.findIndex(e=>e.id===t)}};var w,M=i(6880);!function(t){t.WindowsPhone="Windows Phone",t.Windows="Windows",t.MacOS="macOS",t.IOS="iOS",t.WebOS="WebOS",t.BlackBerry="BlackBerry",t.Tizen="Tizen",t.Linux="Linux",t.ChromeOS="Chrome OS",t.PlayStation4="PlayStation 4",t.Android="Android",t.SomethingElse="Something Else"}(w||(w={})),Object.values(w);const S=Object.values(w);var A,E;(E=A||(A={})).Tablet="tablet",E.Mobile="mobile",E.Desktop="desktop",E.TV="tv",E.SomethingElse="Something Else";const T=Object.values(A);var R;!function(t){t.InternetExplorer="Internet Explorer",t.MicrosoftEdge="Microsoft Edge",t.Firefox="Firefox",t.Chromium="Chromium",t.Chrome="Chrome",t.AndroidBrowser="Android Browser",t.Safari="Safari",t.SomethingElse="Something Else"}(R||(R={}));const P=Object.values(R);class C{static getDeviceType(){const t=C.getParser().getPlatformType(!0);return T.includes(t)?t:A.SomethingElse}static getDeviceDetails(){return C.getParser().getPlatform()}static isTouchDevice(){return window.navigator.maxTouchPoints>0}static isMultiTouchDevice(){return window.navigator.maxTouchPoints>1}static seemsDesktopOnIOSHandheld(){const t=window.navigator;return!/iPad|iPhone|iPod/.test(t.userAgent)&&"MacIntel"===t.platform&&C.isMultiTouchDevice()}static seemsDesktopOnAndroidHandheld(){const t=window.navigator;return!t.userAgent.includes("Android")&&t.userAgent.includes("X11; Linux x86_64")&&C.isMultiTouchDevice()}static isDevice(t){return this.getDeviceType()===t}static isMobile(){return this.isDevice(A.Mobile)}static isDesktop(){return this.isDevice(A.Desktop)}static isTablet(){return this.isDevice(A.Tablet)}static isTv(){return this.isDevice(A.TV)}static getOSType(){const t=C.getParser().getOSName();return S.includes(t)?t:w.SomethingElse}static getOSVersion(){return C.getParser().getOSVersion()}static isOS(t){return this.getOSType()===t}static isOSAndroid(){return this.isOS(w.Android)}static isOSWindows(){return this.isOS(w.Windows)}static isOSIOS(){return this.isOS(w.IOS)}static isOSMac(){return this.isOS(w.IOS)}static getBrowserType(){const t=this.getParser().getBrowserName();return P.includes(t)?t:R.SomethingElse}static isBrowser(t){return this.getBrowserType()===t}static isBrowserChrome(){return this.isBrowser(R.Chrome)}static isBrowserFireFox(){return this.isBrowser(R.Firefox)}static isBrowserIE(){return this.isBrowser(R.InternetExplorer)}static isBrowserEdge(){return this.isBrowser(R.MicrosoftEdge)}static isBrowserSafari(){return this.isBrowser(R.Safari)}static getBrowserVersion(){return C.getParser().getBrowserVersion()}static getParser(){return M.getParser(window.navigator.userAgent)}}var I,k,B,O,L,U,D,N,F,z,G,j,V,H,W;function X(){const t=window;return window.devicePixelRatio?t.devicePixelRatio:window.screen&&t.screen.deviceXDPI&&t.screen.logicalXDPI?t.screen.deviceXDPI/t.screen.logicalXDPI:1}function q(){const t=X();let e=2;return C.isMobile()?e=1.5:(C.isTablet()||C.seemsDesktopOnAndroidHandheld()||C.seemsDesktopOnIOSHandheld())&&(e=1.25),Math.min(Math.max(t,1),e)}function Y(t){return t/180*Math.PI}(k=I||(I={})).Mobile="mobile",k.Desktop="desktop",Object.values(I),(O=B||(B={})).HD="highDefinition",O.SD="smallDefinition",Object.values(B),(U=L||(L={})).Mouse="mouse",U.Touch="touch",Object.values(L),(N=D||(D={})).Portrait="portrait",N.Landscape="landscape",Object.values(D),(z=F||(F={})).Small="small",z.Medium="medium",z.Large="large",Object.values(F),function(t){t.LandscapePrimary="landscape-primary",t.LandscapeSecondary="landscape-secondary",t.PortraitPrimary="portrait-primary",t.PortraitSecondary="portrait-secondary"}(G||(G={})),Object.values(G),G.LandscapePrimary,D.Landscape,G.LandscapeSecondary,D.Landscape,G.PortraitPrimary,D.Portrait,G.PortraitSecondary,D.Portrait,function(t){t[t.DTMode=0]="DTMode",t[t.CountMode=1]="CountMode"}(j||(j={})),new class{filterStrength=20;_mode=j.CountMode;frameTime=0;count=0;drawCallBack=r.bind(this);interVal;get mode(){return this._mode}set mode(t){this._mode!==t&&(this._mode=t,this.frameTime=0,this.count=0)}loop(t=0){this.mode===j.DTMode?this.frameTime+=(t-this.frameTime)/this.filterStrength:this.count++}setDrawCallBack(t){if(this.interVal&&clearInterval(this.interVal),t)return this.drawCallBack=t,void(this.interVal=setInterval(this.intervalFunc.bind(this),1e3));this.drawCallBack=r.bind(void 0)}intervalFunc(){this._mode===j.CountMode?(this.drawCallBack(this.count),this.count=0):this.drawCallBack(1/this.frameTime)}},new class{_result;getResult(){return this._result?(0,s.A)(this._result):b.errorThrow(_.InfoExtractor,'unable to get result, use "constructResult" to create the results')}constructResult(){this._result=this.get()}asString(){return JSON.stringify(this.getResult())}get(){const t=this.webglSupportDetails(),e=window;return{deviceVendor:C.getDeviceDetails().vendor?C.getDeviceDetails().vendor:"unknown",deviceModel:C.getDeviceDetails().model?C.getDeviceDetails().model:"unknown",deviceType:C.getDeviceType(),browser:C.getBrowserType(),browserVersion:C.getBrowserVersion(),os:C.getOSType(),osVersion:C.getOSVersion(),resolution:window.innerWidth.toString()+" x "+window.innerHeight.toString(),DPRGame:q().toString(),DPRDevice:X().toString(),webGLAvailable:t.supported,webGLMaxVersion:t.version,buildMode:this.getBuildMode(),gameSlug:e.WGP_GAMESLUG?e.WGP_GAMESLUG:"unknown",gameVersion:e.WGP_GAMEVERSION?e.WGP_GAMEVERSION:"unknown",WGPLoaderVersion:e.WGPL_VERSION?e.WGPL_VERSION:"unknown",userAgent:window.navigator.userAgent,language:window.navigator.language,maxTouchPoints:window.navigator.maxTouchPoints.toString(),cookiesEnabled:window.navigator.cookieEnabled.toString(),usedGraphicsCard:this.getGraphicsCardData()}}getBuildMode(){try{return"develop"}catch{return"unknown"}}webglSupportDetails(){try{const t={supported:"unknown",version:"unknown"},e=this.isWebgl1Supported(),i=this.isWebgl2Supported(),r=!(!window.WebGLRenderingContext||!e&&!i);return t.supported=r.toString(),r?(i?t.version="webgl2":e&&(t.version="webgl1"),t):t}catch(t){return{supported:"unknown",version:"unknown"}}}isWebgl1Supported(){return this.isWebglXSupported("webgl")}isWebgl2Supported(){return this.isWebglXSupported("webgl2")}isWebglXSupported(t){return!!document.createElement("canvas").getContext(t)}getGraphicsCardData(){let t=null;const e=document.createElement("canvas");try{t=e.getContext("webgl")??e.getContext("experimental-webgl")}catch(t){return{vendor:"no vendor found",renderer:"no renderer found"}}if(t){const e=t.getExtension("WEBGL_debug_renderer_info");if(e)return{vendor:t.getParameter(e.UNMASKED_VENDOR_WEBGL),renderer:t.getParameter(e.UNMASKED_RENDERER_WEBGL)}}return{vendor:"no vendor found",renderer:"no renderer found"}}},i(4040),function(t){t[t.Escape=0]="Escape",t[t.F1=1]="F1",t[t.F2=2]="F2",t[t.F3=3]="F3",t[t.F4=4]="F4",t[t.F5=5]="F5",t[t.F6=6]="F6",t[t.F7=7]="F7",t[t.F8=8]="F8",t[t.F9=9]="F9",t[t.F10=10]="F10",t[t.F11=11]="F11",t[t.F12=12]="F12",t[t.F13=13]="F13",t[t.F14=14]="F14",t[t.F15=15]="F15",t[t.F16=16]="F16",t[t.F17=17]="F17",t[t.F18=18]="F18",t[t.F19=19]="F19",t[t.F20=20]="F20",t[t.F21=21]="F21",t[t.F22=22]="F22",t[t.F23=23]="F23",t[t.F24=24]="F24",t[t.Num0=25]="Num0",t[t.Num1=26]="Num1",t[t.Num2=27]="Num2",t[t.Num3=28]="Num3",t[t.Num4=29]="Num4",t[t.Num5=30]="Num5",t[t.Num6=31]="Num6",t[t.Num7=32]="Num7",t[t.Num8=33]="Num8",t[t.Num9=34]="Num9",t[t.Backspace=35]="Backspace",t[t.Tab=36]="Tab",t[t.Q=37]="Q",t[t.W=38]="W",t[t.E=39]="E",t[t.R=40]="R",t[t.T=41]="T",t[t.Y=42]="Y",t[t.U=43]="U",t[t.I=44]="I",t[t.O=45]="O",t[t.P=46]="P",t[t.CapsLock=47]="CapsLock",t[t.A=48]="A",t[t.S=49]="S",t[t.D=50]="D",t[t.F=51]="F",t[t.G=52]="G",t[t.H=53]="H",t[t.J=54]="J",t[t.K=55]="K",t[t.L=56]="L",t[t.ShiftLeft=57]="ShiftLeft",t[t.Z=58]="Z",t[t.X=59]="X",t[t.C=60]="C",t[t.V=61]="V",t[t.B=62]="B",t[t.N=63]="N",t[t.M=64]="M",t[t.ShiftRight=65]="ShiftRight",t[t.ControlLeft=66]="ControlLeft",t[t.MetaLeft=67]="MetaLeft",t[t.AltLeft=68]="AltLeft",t[t.Space=69]="Space",t[t.AltRight=70]="AltRight",t[t.ContextMenu=71]="ContextMenu",t[t.ControlRight=72]="ControlRight",t[t.Enter=73]="Enter",t[t.Pause=74]="Pause",t[t.Left=75]="Left",t[t.Up=76]="Up",t[t.Right=77]="Right",t[t.Down=78]="Down",t[t.Numpad0=79]="Numpad0",t[t.Numpad1=80]="Numpad1",t[t.Numpad2=81]="Numpad2",t[t.Numpad3=82]="Numpad3",t[t.Numpad4=83]="Numpad4",t[t.Numpad5=84]="Numpad5",t[t.Numpad6=85]="Numpad6",t[t.Numpad7=86]="Numpad7",t[t.Numpad8=87]="Numpad8",t[t.Numpad9=88]="Numpad9",t[t.NumpadAdd=89]="NumpadAdd",t[t.NumpadSubtract=90]="NumpadSubtract",t[t.NumpadEnter=91]="NumpadEnter"}(V||(V={})),V.Escape,V.F1,V.F2,V.F3,V.F4,V.F5,V.F6,V.F7,V.F8,V.F9,V.F10,V.F11,V.F12,V.F13,V.F14,V.F15,V.F16,V.F17,V.F18,V.F19,V.F20,V.F21,V.F22,V.F23,V.F24,V.Num0,V.Num1,V.Num2,V.Num3,V.Num4,V.Num5,V.Num6,V.Num7,V.Num8,V.Num9,V.Backspace,V.Tab,V.Q,V.W,V.E,V.R,V.T,V.Y,V.U,V.I,V.O,V.P,V.CapsLock,V.A,V.S,V.D,V.F,V.G,V.H,V.J,V.K,V.L,V.ShiftLeft,V.Z,V.X,V.C,V.V,V.B,V.N,V.M,V.ShiftRight,V.ControlLeft,V.MetaLeft,V.AltLeft,V.Space,V.AltRight,V.ContextMenu,V.ControlRight,V.Enter,V.Pause,V.Left,V.Up,V.Right,V.Down,V.Numpad0,V.Numpad1,V.Numpad2,V.Numpad3,V.Numpad4,V.Numpad5,V.Numpad6,V.Numpad7,V.Numpad8,V.Numpad9,V.NumpadAdd,V.NumpadSubtract,V.NumpadEnter,(W=H||(H={})).Keydown="keydown",W.Keypress="keypress",W.Keyup="keyup",i(4741);const Z=Symbol("keys"),K=Symbol("optional"),$=Symbol("default"),Q=Symbol("custom"),J=Symbol("validator"),tt=function(t,e){for(var i=-1,r=null==t?0:t.length,n=Array(r);++i<r;)n[i]=e(t[i],i,t);return n};var et=i(2080),it=i(2050);function rt(t){var e=-1,i=null==t?0:t.length;for(this.__data__=new it.A;++e<i;)this.add(t[e])}rt.prototype.add=rt.prototype.push=function(t){return this.__data__.set(t,"__lodash_hash_undefined__"),this},rt.prototype.has=function(t){return this.__data__.has(t)};const nt=rt,st=function(t,e){for(var i=-1,r=null==t?0:t.length;++i<r;)if(e(t[i],i,t))return!0;return!1},ot=function(t,e,i,r,n,s){var o=1&i,a=t.length,h=e.length;if(a!=h&&!(o&&h>a))return!1;var l=s.get(t),u=s.get(e);if(l&&u)return l==e&&u==t;var c=-1,d=!0,f=2&i?new nt:void 0;for(s.set(t,e),s.set(e,t);++c<a;){var p=t[c],m=e[c];if(r)var g=o?r(m,p,c,e,t,s):r(p,m,c,t,e,s);if(void 0!==g){if(g)continue;d=!1;break}if(f){if(!st(e,function(t,e){if(o=e,!f.has(o)&&(p===t||n(p,t,i,r,s)))return f.push(e);var o})){d=!1;break}}else if(p!==m&&!n(p,m,i,r,s)){d=!1;break}}return s.delete(t),s.delete(e),d};var at=i(241),ht=i(3988),lt=i(6984);const ut=function(t){var e=-1,i=Array(t.size);return t.forEach(function(t,r){i[++e]=[r,t]}),i},ct=function(t){var e=-1,i=Array(t.size);return t.forEach(function(t){i[++e]=t}),i};var dt=at.A?at.A.prototype:void 0,ft=dt?dt.valueOf:void 0;var pt=i(9042),mt=Object.prototype.hasOwnProperty;var gt=i(2434),vt=i(2049),yt=i(1200),bt=i(4749),_t="[object Arguments]",xt="[object Array]",wt="[object Object]",Mt=Object.prototype.hasOwnProperty;const St=function(t,e,i,r,n,s){var o=(0,vt.A)(t),a=(0,vt.A)(e),h=o?xt:(0,gt.A)(t),l=a?xt:(0,gt.A)(e),u=(h=h==_t?wt:h)==wt,c=(l=l==_t?wt:l)==wt,d=h==l;if(d&&(0,yt.A)(t)){if(!(0,yt.A)(e))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new et.A),o||(0,bt.A)(t)?ot(t,e,i,r,n,s):function(t,e,i,r,n,s,o){switch(i){case"[object DataView]":if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case"[object ArrayBuffer]":return!(t.byteLength!=e.byteLength||!s(new ht.A(t),new ht.A(e)));case"[object Boolean]":case"[object Date]":case"[object Number]":return(0,lt.A)(+t,+e);case"[object Error]":return t.name==e.name&&t.message==e.message;case"[object RegExp]":case"[object String]":return t==e+"";case"[object Map]":var a=ut;case"[object Set]":var h=1&r;if(a||(a=ct),t.size!=e.size&&!h)return!1;var l=o.get(t);if(l)return l==e;r|=2,o.set(t,e);var u=ot(a(t),a(e),r,n,s,o);return o.delete(t),u;case"[object Symbol]":if(ft)return ft.call(t)==ft.call(e)}return!1}(t,e,h,i,r,n,s);if(!(1&i)){var f=u&&Mt.call(t,"__wrapped__"),p=c&&Mt.call(e,"__wrapped__");if(f||p){var m=f?t.value():t,g=p?e.value():e;return s||(s=new et.A),n(m,g,i,r,s)}}return!!d&&(s||(s=new et.A),function(t,e,i,r,n,s){var o=1&i,a=(0,pt.A)(t),h=a.length;if(h!=(0,pt.A)(e).length&&!o)return!1;for(var l=h;l--;){var u=a[l];if(!(o?u in e:mt.call(e,u)))return!1}var c=s.get(t),d=s.get(e);if(c&&d)return c==e&&d==t;var f=!0;s.set(t,e),s.set(e,t);for(var p=o;++l<h;){var m=t[u=a[l]],g=e[u];if(r)var v=o?r(g,m,u,e,t,s):r(m,g,u,t,e,s);if(!(void 0===v?m===g||n(m,g,i,r,s):v)){f=!1;break}p||(p="constructor"==u)}if(f&&!p){var y=t.constructor,b=e.constructor;y==b||!("constructor"in t)||!("constructor"in e)||"function"==typeof y&&y instanceof y&&"function"==typeof b&&b instanceof b||(f=!1)}return s.delete(t),s.delete(e),f}(t,e,i,r,n,s))};var At=i(3098);const Et=function t(e,i,r,n,s){return e===i||(null==e||null==i||!(0,At.A)(e)&&!(0,At.A)(i)?e!=e&&i!=i:St(e,i,r,n,t,s))};var Tt=i(3149);const Rt=function(t){return t==t&&!(0,Tt.A)(t)};var Pt=i(7422);const Ct=function(t,e){return function(i){return null!=i&&i[t]===e&&(void 0!==e||t in Object(i))}},It=function(t){var e=function(t){for(var e=(0,Pt.A)(t),i=e.length;i--;){var r=e[i],n=t[r];e[i]=[r,n,Rt(n)]}return e}(t);return 1==e.length&&e[0][2]?Ct(e[0][0],e[0][1]):function(i){return i===t||function(t,e,i,r){var n=i.length,s=n,o=!r;if(null==t)return!s;for(t=Object(t);n--;){var a=i[n];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++n<s;){var h=(a=i[n])[0],l=t[h],u=a[1];if(o&&a[2]){if(void 0===l&&!(h in t))return!1}else{var c=new et.A;if(r)var d=r(l,u,h,t,e,c);if(!(void 0===d?Et(u,l,3,r,c):d))return!1}}return!0}(i,t,e)}};var kt=i(1882),Bt=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ot=/^\w*$/;const Lt=function(t,e){if((0,vt.A)(t))return!1;var i=typeof t;return!("number"!=i&&"symbol"!=i&&"boolean"!=i&&null!=t&&!(0,kt.A)(t))||Ot.test(t)||!Bt.test(t)||null!=e&&t in Object(e)};function Ut(t,e){if("function"!=typeof t||null!=e&&"function"!=typeof e)throw new TypeError("Expected a function");var i=function(){var r=arguments,n=e?e.apply(this,r):r[0],s=i.cache;if(s.has(n))return s.get(n);var o=t.apply(this,r);return i.cache=s.set(n,o)||s,o};return i.cache=new(Ut.Cache||it.A),i}Ut.Cache=it.A;var Dt=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Nt=/\\(\\)?/g;const Ft=(zt=Ut(function(t){var e=[];return 46===t.charCodeAt(0)&&e.push(""),t.replace(Dt,function(t,i,r,n){e.push(r?n.replace(Nt,"$1"):i||t)}),e},function(t){return 500===Gt.size&&Gt.clear(),t}),Gt=zt.cache,zt);var zt,Gt,jt=at.A?at.A.prototype:void 0,Vt=jt?jt.toString:void 0;const Ht=function t(e){if("string"==typeof e)return e;if((0,vt.A)(e))return tt(e,t)+"";if((0,kt.A)(e))return Vt?Vt.call(e):"";var i=e+"";return"0"==i&&1/e==-1/0?"-0":i},Wt=function(t){return null==t?"":Ht(t)},Xt=function(t,e){return(0,vt.A)(t)?t:Lt(t,e)?[t]:Ft(Wt(t))},qt=function(t){if("string"==typeof t||(0,kt.A)(t))return t;var e=t+"";return"0"==e&&1/t==-1/0?"-0":e},Yt=function(t,e){for(var i=0,r=(e=Xt(e,t)).length;null!=t&&i<r;)t=t[qt(e[i++])];return i&&i==r?t:void 0},Zt=function(t,e){return null!=t&&e in Object(t)};var Kt=i(5175),$t=i(5353),Qt=i(5254);const Jt=function(t,e){return null!=t&&function(t,e,i){for(var r=-1,n=(e=Xt(e,t)).length,s=!1;++r<n;){var o=qt(e[r]);if(!(s=null!=t&&i(t,o)))break;t=t[o]}return s||++r!=n?s:!!(n=null==t?0:t.length)&&(0,Qt.A)(n)&&(0,$t.A)(o,n)&&((0,vt.A)(t)||(0,Kt.A)(t))}(t,e,Zt)},te=function(t,e){return Lt(t)&&Rt(e)?Ct(qt(t),e):function(i){var r=function(t,e,i){var r=null==t?void 0:Yt(t,e);return void 0===r?i:r}(i,t);return void 0===r&&r===e?Jt(i,t):Et(e,r,3)}};var ee=i(9008);const ie=function(t){return Lt(t)?(e=qt(t),function(t){return null==t?void 0:t[e]}):function(t){return function(e){return Yt(e,t)}}(t);var e},re=function(t,e,i){for(var r=-1,n=Object(t),s=i(t),o=s.length;o--;){var a=s[++r];if(!1===e(n[a],a,n))break}return t};var ne=i(8446);const se=(oe=function(t,e){return t&&re(t,e,Pt.A)},function(t,e){if(null==t)return t;if(!(0,ne.A)(t))return oe(t,e);for(var i=t.length,r=-1,n=Object(t);++r<i&&!1!==e(n[r],r,n););return t});var oe;const ae=function(t,e){var i=-1,r=(0,ne.A)(t)?Array(t.length):[];return se(t,function(t,n,s){r[++i]=e(t,n,s)}),r},he=function(t,e){return((0,vt.A)(t)?tt:ae)(t,"function"==typeof(i=e)?i:null==i?ee.A:"object"==typeof i?(0,vt.A)(i)?te(i[0],i[1]):It(i):ie(i));var i};function le(...t){const e=he(t,t=>Reflect.metadata(t.symbol,t.value));return(t,i)=>{!function(t,e){let i;i=Reflect.hasMetadata(Z,t,t.constructor.name)?Reflect.getMetadata(Z,t,t.constructor.name):[],i.includes(e)||(i.push(e),Reflect.defineMetadata(Z,i,t,t.constructor.name))}(t,i),e.forEach(e=>e(t,i))}}function ue(t,e){return Reflect.getMetadata(Q,t,e)}function ce(t){return le({symbol:K,value:!0},{symbol:$,value:t})}function de(){return le({symbol:K,value:!1})}var fe=i(4453),pe=i(7271),me=Object.prototype.hasOwnProperty;var ge=i(2528);const ve=function(t,e,i){(void 0!==i&&!(0,lt.A)(t[e],i)||void 0===i&&!(e in t))&&(0,ge.A)(t,e,i)};var ye=i(154),be=i(1801),_e=i(9759),xe=i(407);var we=i(9610),Me=i(2383),Se=i(5647),Ae=Function.prototype,Ee=Object.prototype,Te=Ae.toString,Re=Ee.hasOwnProperty,Pe=Te.call(Object);const Ce=function(t,e){if(("constructor"!==e||"function"!=typeof t[e])&&"__proto__"!=e)return t[e]};var Ie=i(2031),ke=i(9999);const Be=function(t,e,i,r,n,s,o){var a,h=Ce(t,i),l=Ce(e,i),u=o.get(l);if(u)ve(t,i,u);else{var c=s?s(h,l,i+"",t,e,o):void 0,d=void 0===c;if(d){var f=(0,vt.A)(l),p=!f&&(0,yt.A)(l),m=!f&&!p&&(0,bt.A)(l);c=l,f||p||m?(0,vt.A)(h)?c=h:(a=h,(0,At.A)(a)&&(0,ne.A)(a)?c=(0,_e.A)(h):p?(d=!1,c=(0,ye.A)(l,!0)):m?(d=!1,c=(0,be.A)(l,!0)):c=[]):function(t){if(!(0,At.A)(t)||"[object Object]"!=(0,Me.A)(t))return!1;var e=(0,Se.A)(t);if(null===e)return!0;var i=Re.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&Te.call(i)==Pe}(l)||(0,Kt.A)(l)?(c=h,(0,Kt.A)(h)?c=function(t){return(0,Ie.A)(t,(0,ke.A)(t))}(h):(0,Tt.A)(h)&&!(0,we.A)(h)||(c=(0,xe.A)(l))):d=!1}d&&(o.set(l,c),n(c,l,r,s,o),o.delete(l)),ve(t,i,c)}},Oe=function t(e,i,r,n,s){e!==i&&re(i,function(o,a){if(s||(s=new et.A),(0,Tt.A)(o))Be(e,i,a,r,t,n,s);else{var h=n?n(Ce(e,a),o,a+"",e,i,s):void 0;void 0===h&&(h=o),ve(e,a,h)}},ke.A)};var Le=Math.max;const Ue=function(t,e,i){return e=Le(void 0===e?t.length-1:e,0),function(){for(var r=arguments,n=-1,s=Le(r.length-e,0),o=Array(s);++n<s;)o[n]=r[e+n];n=-1;for(var a=Array(e+1);++n<e;)a[n]=r[n];return a[e]=i(o),function(t,e,i){switch(i.length){case 0:return t.call(e);case 1:return t.call(e,i[0]);case 2:return t.call(e,i[0],i[1]);case 3:return t.call(e,i[0],i[1],i[2])}return t.apply(e,i)}(t,this,a)}};var De=i(4171);const Ne=De.A?function(t,e){return(0,De.A)(t,"toString",{configurable:!0,enumerable:!1,value:(i=e,function(){return i}),writable:!0});var i}:ee.A;var Fe=Date.now;const ze=(Ge=Ne,je=0,Ve=0,function(){var t=Fe(),e=16-(t-Ve);if(Ve=t,e>0){if(++je>=800)return arguments[0]}else je=0;return Ge.apply(void 0,arguments)});var Ge,je,Ve;var He=i(6832);var We,Xe=(We=function(t,e,i){Oe(t,e,i)},function(t,e){return ze(Ue(t,e,ee.A),t+"")}(function(t,e){var i=-1,r=e.length,n=r>1?e[r-1]:void 0,s=r>2?e[2]:void 0;for(n=We.length>3&&"function"==typeof n?(r--,n):void 0,s&&(0,He.A)(e[0],e[1],s)&&(n=r<3?void 0:n,r=1),t=Object(t);++i<r;){var o=e[i];o&&We(t,o,i,n)}return t}));const qe=Xe;var Ye=i(6912),Ze=at.A?at.A.isConcatSpreadable:void 0;const Ke=function(t){return(0,vt.A)(t)||(0,Kt.A)(t)||!!(Ze&&t&&t[Ze])},$e=function t(e,i,r,n,s){var o=-1,a=e.length;for(r||(r=Ke),s||(s=[]);++o<a;){var h=e[o];i>0&&r(h)?i>1?t(h,i-1,r,n,s):(0,Ye.A)(s,h):n||(s[s.length]=h)}return s};class Qe{json;constructor(t){(function(t){if(null==t)return!0;if((0,ne.A)(t)&&((0,vt.A)(t)||"string"==typeof t||"function"==typeof t.splice||(0,yt.A)(t)||(0,bt.A)(t)||(0,Kt.A)(t)))return!t.length;var e=(0,gt.A)(t);if("[object Map]"==e||"[object Set]"==e)return!t.size;if((0,pe.A)(t))return!(0,fe.A)(t).length;for(var i in t)if(me.call(t,i))return!1;return!0})(t)&&(t={}),this.json=t}validate(){return function(t){const e=[];for(;t=t.__proto__;){const i=Reflect.getMetadata(Z,t,t.constructor.name);i&&e.push(i)}return $e(he(e,i),1);var i}(this).forEach(t=>{const e=this.json[t];if(void 0!==e)return void this.set(t,e,{checkCustom:!0});if(void 0!==this.get(t))return;const i=Reflect.getMetadata($,this,t);if(void 0!==i)return void this.set(t,i);const r=ue(this,t);if(r){const i=r(this,t,e);if(i)return void this.set(t,i)}var n;(function(t,e){const i=Reflect.getMetadata(K,t,e);return!0===i||void 0===i})(this,t)||(n=t,!1===Reflect.getMetadata(K,this,n)&&b.errorThrow(_.ValidatedJson,`${this.constructor.name}.${t} is required, ${JSON.stringify(this.json)}`))}),this}get(t){return this[t]}set(t,e,i){if((i=qe({checkCustom:!1,checkValidator:!0},i)).checkCustom){const i=ue(this,t);e=(void 0===i?void 0:i(this,t,e))??e}const r=(n=t,Reflect.getMetadata(J,this,n));var n;i.checkValidator&&r&&(r(this,t,e)||b.errorThrow(_.ValidatedJson,`validator ${this.constructor.name}.${t} has failed, ${JSON.stringify(this.json)}`)),this[t]=e}}function Je(t,e,i,r){var n,s=arguments.length,o=s<3?e:null===r?r=Object.getOwnPropertyDescriptor(e,i):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)o=Reflect.decorate(t,e,i,r);else for(var a=t.length-1;a>=0;a--)(n=t[a])&&(o=(s<3?n(o):s>3?n(e,i,o):n(e,i))||o);return s>3&&o&&Object.defineProperty(e,i,o),o}Object.create,Object.create,"function"==typeof SuppressedError&&SuppressedError;class ti extends Qe{poolId;createElement}Je([de()],ti.prototype,"poolId",void 0),Je([de()],ti.prototype,"createElement",void 0);class ei extends Qe{initialSize;maxSize}Je([ce(10)],ei.prototype,"initialSize",void 0),Je([ce(-1)],ei.prototype,"maxSize",void 0);class ii extends Qe{name;throwOnUnableToAdd;throwOnUnableToRemove;throwOnUnableToFetch}Je([ce("")],ii.prototype,"name",void 0),Je([ce(!1)],ii.prototype,"throwOnUnableToAdd",void 0),Je([ce(!1)],ii.prototype,"throwOnUnableToRemove",void 0),Je([ce(!1)],ii.prototype,"throwOnUnableToFetch",void 0);var ri=i(2851);const ni=function(t,e,i,r){if(!(0,Tt.A)(t))return t;for(var n=-1,s=(e=Xt(e,t)).length,o=s-1,a=t;null!=a&&++n<s;){var h=qt(e[n]),l=i;if("__proto__"===h||"constructor"===h||"prototype"===h)return t;if(n!=o){var u=a[h];void 0===(l=r?r(u,h,a):void 0)&&(l=(0,Tt.A)(u)?u:(0,$t.A)(e[n+1])?[]:{})}(0,ri.A)(a,h,l),a=a[h]}return t},si=function(t,e){return function(t,e,i){for(var r=-1,n=e.length,s={};++r<n;){var o=e[r],a=Yt(t,o);i(a,o)&&ni(s,Xt(o,t),a)}return s}(t,e,function(e,i){return Jt(t,i)})},oi=function(t){return null!=t&&t.length?$e(t,1):[]},ai=function(t){return ze(Ue(t,void 0,oi),t+"")}(function(t,e){return null==t?{}:si(t,e)}),hi={func:(t,e)=>{let i=(.01*Math.floor(t)).toFixed(2);return e.shorten&&(i=Number.parseFloat(i).toString()),`${e.addSign?" ":""}${i}`},description:{currency:"EUR",country:"BE",language:"nl"}},li={func:(t,e)=>{let i=(.01*Math.floor(t)).toFixed(2);return e.shorten&&(i=Number.parseFloat(i).toString()),`${e.addSign?"R$":""}${i}`},description:{currency:"BRL",country:"BR",language:"pt"}};class ui extends Qe{shorten;addSign}Je([ce(!1)],ui.prototype,"shorten",void 0),Je([ce(!0)],ui.prototype,"addSign",void 0);const ci="currencyFormatter";new class{knownFormatters=[hi,li];checkKeysList=[["currency","language","country"],["currency","language"],["currency"]];_currentFormatter=hi;get formatValue(){return(t,e)=>{const i=new ui(e??{}).validate();return this._currentFormatter.func(t,i)}}addFormatter(t,e){e=qe({overwrite:!1,errorOnFound:!1},e??{});const i=this.knownFormatters.findIndex(e=>e.description.currency===t.description.currency&&e.description.language===t.description.language&&e.description.country===t.description.country);return i>=0?(e.errorOnFound&&b.errorThrow(ci,`currency formatter already exists for ${JSON.stringify(t.description)}`),!!e.overwrite&&(this.knownFormatters[i]=t,!0)):(this.knownFormatters.push(t),!0)}hasFormatter(t,e=!0){return!!this.getFormatter(t,e)}getFormatter(t,e=!0){return e?this.knownFormatters.find(e=>e.description.currency===t.currency&&e.description.language===t.language&&e.description.country===t.country):this.knownFormatters.find(e=>!(t.currency&&e.description.currency!==t.currency||t.language&&e.description.language!==t.language||t.country&&e.description.country!==t.country))}set jwt(t){this.formatDescription=function(t){const e=t.locale.split("_");return{currency:t.currency,country:e[1],language:e[0]}}(t)}get formatDescription(){return this._currentFormatter.description}set formatDescription(t){const e=this.findFormatterElement(t);e?this._currentFormatter=e:(b.warning(ci,`no formatter found for ${JSON.stringify(t)}, resulting in fallback`),this._currentFormatter=hi)}findFormatterElement(t,e=!1){for(let i=0;i<this.checkKeysList.length;i++){const r=this.checkKeysList[i],n=ai(t,r);if(r.length!=(0,Pt.A)(n).length)continue;const s=this.getFormatter(n,e);if(s)return b.info(ci,`formatter found for ${JSON.stringify(Pt.A)}`),s}}findFormatter(t,e=!1){return this.findFormatterElement(t,e)}};class di extends Qe{showMilliseconds;showSeconds;showMinutes;showHours;showDays;showWeeks;showLargestValues;includeZeroes}Je([ce(!0)],di.prototype,"showMilliseconds",void 0),Je([ce(!0)],di.prototype,"showSeconds",void 0),Je([ce(!0)],di.prototype,"showMinutes",void 0),Je([ce(!0)],di.prototype,"showHours",void 0),Je([ce(!0)],di.prototype,"showDays",void 0),Je([ce(!0)],di.prototype,"showWeeks",void 0),Je([ce(6)],di.prototype,"showLargestValues",void 0),Je([ce(!0)],di.prototype,"includeZeroes",void 0),new class{formatRemaining(t,e){const i=new di(e??{}).validate(),r=[];i.showWeeks&&r.push(this.calculateWeeks.bind(this)),i.showDays&&r.push(this.calculateDays.bind(this)),i.showHours&&r.push(this.calculateHours.bind(this)),i.showMinutes&&r.push(this.calculateMinutes.bind(this)),i.showSeconds&&r.push(this.calculateSeconds.bind(this)),i.showMilliseconds&&r.push(this.calculateMilliSeconds.bind(this));const n=[];let s=i.showLargestValues;return r.forEach(e=>{const{amount:r,remaining:o,formatted:a}=e(t);t=o,(i.includeZeroes||r>0)&&s>0&&(n.push(a),s--)}),{formatted:n.join(" "),remaining:t}}milliSecondsIn={second:1e3,minute:6e4,hour:36e5,day:864e5,week:6048e5};calculateWeeks(t){return this.calculateTimeInSlot(t,this.milliSecondsIn.week,t=>`${t.toString()}W`)}calculateDays(t){return this.calculateTimeInSlot(t,this.milliSecondsIn.day,t=>`${t.toString()}D`)}calculateHours(t){return this.calculateTimeInSlot(t,this.milliSecondsIn.hour,t=>`${t.toString()}H`)}calculateMinutes(t){return this.calculateTimeInSlot(t,this.milliSecondsIn.minute,t=>`${t.toString()}M`)}calculateSeconds(t){return this.calculateTimeInSlot(t,this.milliSecondsIn.second,t=>`${t.toString()}s`)}calculateMilliSeconds(t){return this.calculateTimeInSlot(t,1,t=>`${t.toString()}ms`)}calculateTimeInSlot(t,e,i){const r=Math.floor(t/e);return{amount:r,remaining:t-r*e,formatted:i(r)}}};class fi{promise;_reject;_resolve;constructor(){this.promise=new Promise((t,e)=>{this._reject=e,this._resolve=t})}get reject(){return this._reject}get resolve(){return this._resolve}}var pi,mi;(mi=pi||(pi={})).FIFO="FIFO",mi.LIFO="LIFO";const gi={queueDirection:pi.FIFO,queueLimit:5,name:"queue",stopOnFail:!1,autoStart:!0};class vi extends Qe{queueLimit;name;queueDirection;stopOnFail;autoStart}Je([ce(gi.queueLimit)],vi.prototype,"queueLimit",void 0),Je([ce(gi.name)],vi.prototype,"name",void 0),Je([ce(gi.queueDirection)],vi.prototype,"queueDirection",void 0),Je([ce(gi.stopOnFail)],vi.prototype,"stopOnFail",void 0),Je([ce(gi.autoStart)],vi.prototype,"autoStart",void 0)},8285:()=>{},8287:(t,e,i)=>{"use strict";var r=i(6763);const n=i(7526),s=i(251),o="function"==typeof Symbol&&"function"==typeof Symbol.for?Symbol.for("nodejs.util.inspect.custom"):null;e.Buffer=l,e.SlowBuffer=function(t){return+t!=t&&(t=0),l.alloc(+t)},e.INSPECT_MAX_BYTES=50;const a=2147483647;function h(t){if(t>a)throw new RangeError('The value "'+t+'" is invalid for option "size"');const e=new Uint8Array(t);return Object.setPrototypeOf(e,l.prototype),e}function l(t,e,i){if("number"==typeof t){if("string"==typeof e)throw new TypeError('The "string" argument must be of type string. Received type number');return d(t)}return u(t,e,i)}function u(t,e,i){if("string"==typeof t)return function(t,e){if("string"==typeof e&&""!==e||(e="utf8"),!l.isEncoding(e))throw new TypeError("Unknown encoding: "+e);const i=0|g(t,e);let r=h(i);const n=r.write(t,e);return n!==i&&(r=r.slice(0,n)),r}(t,e);if(ArrayBuffer.isView(t))return function(t){if(K(t,Uint8Array)){const e=new Uint8Array(t);return p(e.buffer,e.byteOffset,e.byteLength)}return f(t)}(t);if(null==t)throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t);if(K(t,ArrayBuffer)||t&&K(t.buffer,ArrayBuffer))return p(t,e,i);if("undefined"!=typeof SharedArrayBuffer&&(K(t,SharedArrayBuffer)||t&&K(t.buffer,SharedArrayBuffer)))return p(t,e,i);if("number"==typeof t)throw new TypeError('The "value" argument must not be of type number. Received type number');const r=t.valueOf&&t.valueOf();if(null!=r&&r!==t)return l.from(r,e,i);const n=function(t){if(l.isBuffer(t)){const e=0|m(t.length),i=h(e);return 0===i.length||t.copy(i,0,0,e),i}return void 0!==t.length?"number"!=typeof t.length||$(t.length)?h(0):f(t):"Buffer"===t.type&&Array.isArray(t.data)?f(t.data):void 0}(t);if(n)return n;if("undefined"!=typeof Symbol&&null!=Symbol.toPrimitive&&"function"==typeof t[Symbol.toPrimitive])return l.from(t[Symbol.toPrimitive]("string"),e,i);throw new TypeError("The first argument must be one of type string, Buffer, ArrayBuffer, Array, or Array-like Object. Received type "+typeof t)}function c(t){if("number"!=typeof t)throw new TypeError('"size" argument must be of type number');if(t<0)throw new RangeError('The value "'+t+'" is invalid for option "size"')}function d(t){return c(t),h(t<0?0:0|m(t))}function f(t){const e=t.length<0?0:0|m(t.length),i=h(e);for(let r=0;r<e;r+=1)i[r]=255&t[r];return i}function p(t,e,i){if(e<0||t.byteLength<e)throw new RangeError('"offset" is outside of buffer bounds');if(t.byteLength<e+(i||0))throw new RangeError('"length" is outside of buffer bounds');let r;return r=void 0===e&&void 0===i?new Uint8Array(t):void 0===i?new Uint8Array(t,e):new Uint8Array(t,e,i),Object.setPrototypeOf(r,l.prototype),r}function m(t){if(t>=a)throw new RangeError("Attempt to allocate Buffer larger than maximum size: 0x"+a.toString(16)+" bytes");return 0|t}function g(t,e){if(l.isBuffer(t))return t.length;if(ArrayBuffer.isView(t)||K(t,ArrayBuffer))return t.byteLength;if("string"!=typeof t)throw new TypeError('The "string" argument must be one of type string, Buffer, or ArrayBuffer. Received type '+typeof t);const i=t.length,r=arguments.length>2&&!0===arguments[2];if(!r&&0===i)return 0;let n=!1;for(;;)switch(e){case"ascii":case"latin1":case"binary":return i;case"utf8":case"utf-8":return q(t).length;case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return 2*i;case"hex":return i>>>1;case"base64":return Y(t).length;default:if(n)return r?-1:q(t).length;e=(""+e).toLowerCase(),n=!0}}function v(t,e,i){let r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return"";if((void 0===i||i>this.length)&&(i=this.length),i<=0)return"";if((i>>>=0)<=(e>>>=0))return"";for(t||(t="utf8");;)switch(t){case"hex":return I(this,e,i);case"utf8":case"utf-8":return T(this,e,i);case"ascii":return P(this,e,i);case"latin1":case"binary":return C(this,e,i);case"base64":return E(this,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return k(this,e,i);default:if(r)throw new TypeError("Unknown encoding: "+t);t=(t+"").toLowerCase(),r=!0}}function y(t,e,i){const r=t[e];t[e]=t[i],t[i]=r}function b(t,e,i,r,n){if(0===t.length)return-1;if("string"==typeof i?(r=i,i=0):i>2147483647?i=2147483647:i<-2147483648&&(i=-2147483648),$(i=+i)&&(i=n?0:t.length-1),i<0&&(i=t.length+i),i>=t.length){if(n)return-1;i=t.length-1}else if(i<0){if(!n)return-1;i=0}if("string"==typeof e&&(e=l.from(e,r)),l.isBuffer(e))return 0===e.length?-1:_(t,e,i,r,n);if("number"==typeof e)return e&=255,"function"==typeof Uint8Array.prototype.indexOf?n?Uint8Array.prototype.indexOf.call(t,e,i):Uint8Array.prototype.lastIndexOf.call(t,e,i):_(t,[e],i,r,n);throw new TypeError("val must be string, number or Buffer")}function _(t,e,i,r,n){let s,o=1,a=t.length,h=e.length;if(void 0!==r&&("ucs2"===(r=String(r).toLowerCase())||"ucs-2"===r||"utf16le"===r||"utf-16le"===r)){if(t.length<2||e.length<2)return-1;o=2,a/=2,h/=2,i/=2}function l(t,e){return 1===o?t[e]:t.readUInt16BE(e*o)}if(n){let r=-1;for(s=i;s<a;s++)if(l(t,s)===l(e,-1===r?0:s-r)){if(-1===r&&(r=s),s-r+1===h)return r*o}else-1!==r&&(s-=s-r),r=-1}else for(i+h>a&&(i=a-h),s=i;s>=0;s--){let i=!0;for(let r=0;r<h;r++)if(l(t,s+r)!==l(e,r)){i=!1;break}if(i)return s}return-1}function x(t,e,i,r){i=Number(i)||0;const n=t.length-i;r?(r=Number(r))>n&&(r=n):r=n;const s=e.length;let o;for(r>s/2&&(r=s/2),o=0;o<r;++o){const r=parseInt(e.substr(2*o,2),16);if($(r))return o;t[i+o]=r}return o}function w(t,e,i,r){return Z(q(e,t.length-i),t,i,r)}function M(t,e,i,r){return Z(function(t){const e=[];for(let i=0;i<t.length;++i)e.push(255&t.charCodeAt(i));return e}(e),t,i,r)}function S(t,e,i,r){return Z(Y(e),t,i,r)}function A(t,e,i,r){return Z(function(t,e){let i,r,n;const s=[];for(let o=0;o<t.length&&!((e-=2)<0);++o)i=t.charCodeAt(o),r=i>>8,n=i%256,s.push(n),s.push(r);return s}(e,t.length-i),t,i,r)}function E(t,e,i){return 0===e&&i===t.length?n.fromByteArray(t):n.fromByteArray(t.slice(e,i))}function T(t,e,i){i=Math.min(t.length,i);const r=[];let n=e;for(;n<i;){const e=t[n];let s=null,o=e>239?4:e>223?3:e>191?2:1;if(n+o<=i){let i,r,a,h;switch(o){case 1:e<128&&(s=e);break;case 2:i=t[n+1],128==(192&i)&&(h=(31&e)<<6|63&i,h>127&&(s=h));break;case 3:i=t[n+1],r=t[n+2],128==(192&i)&&128==(192&r)&&(h=(15&e)<<12|(63&i)<<6|63&r,h>2047&&(h<55296||h>57343)&&(s=h));break;case 4:i=t[n+1],r=t[n+2],a=t[n+3],128==(192&i)&&128==(192&r)&&128==(192&a)&&(h=(15&e)<<18|(63&i)<<12|(63&r)<<6|63&a,h>65535&&h<1114112&&(s=h))}}null===s?(s=65533,o=1):s>65535&&(s-=65536,r.push(s>>>10&1023|55296),s=56320|1023&s),r.push(s),n+=o}return function(t){const e=t.length;if(e<=R)return String.fromCharCode.apply(String,t);let i="",r=0;for(;r<e;)i+=String.fromCharCode.apply(String,t.slice(r,r+=R));return i}(r)}e.kMaxLength=a,l.TYPED_ARRAY_SUPPORT=function(){try{const t=new Uint8Array(1),e={foo:function(){return 42}};return Object.setPrototypeOf(e,Uint8Array.prototype),Object.setPrototypeOf(t,e),42===t.foo()}catch(t){return!1}}(),l.TYPED_ARRAY_SUPPORT||void 0===r||"function"!=typeof r.error||r.error("This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support."),Object.defineProperty(l.prototype,"parent",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.buffer}}),Object.defineProperty(l.prototype,"offset",{enumerable:!0,get:function(){if(l.isBuffer(this))return this.byteOffset}}),l.poolSize=8192,l.from=function(t,e,i){return u(t,e,i)},Object.setPrototypeOf(l.prototype,Uint8Array.prototype),Object.setPrototypeOf(l,Uint8Array),l.alloc=function(t,e,i){return function(t,e,i){return c(t),t<=0?h(t):void 0!==e?"string"==typeof i?h(t).fill(e,i):h(t).fill(e):h(t)}(t,e,i)},l.allocUnsafe=function(t){return d(t)},l.allocUnsafeSlow=function(t){return d(t)},l.isBuffer=function(t){return null!=t&&!0===t._isBuffer&&t!==l.prototype},l.compare=function(t,e){if(K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),K(e,Uint8Array)&&(e=l.from(e,e.offset,e.byteLength)),!l.isBuffer(t)||!l.isBuffer(e))throw new TypeError('The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array');if(t===e)return 0;let i=t.length,r=e.length;for(let n=0,s=Math.min(i,r);n<s;++n)if(t[n]!==e[n]){i=t[n],r=e[n];break}return i<r?-1:r<i?1:0},l.isEncoding=function(t){switch(String(t).toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"latin1":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return!0;default:return!1}},l.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('"list" argument must be an Array of Buffers');if(0===t.length)return l.alloc(0);let i;if(void 0===e)for(e=0,i=0;i<t.length;++i)e+=t[i].length;const r=l.allocUnsafe(e);let n=0;for(i=0;i<t.length;++i){let e=t[i];if(K(e,Uint8Array))n+e.length>r.length?(l.isBuffer(e)||(e=l.from(e)),e.copy(r,n)):Uint8Array.prototype.set.call(r,e,n);else{if(!l.isBuffer(e))throw new TypeError('"list" argument must be an Array of Buffers');e.copy(r,n)}n+=e.length}return r},l.byteLength=g,l.prototype._isBuffer=!0,l.prototype.swap16=function(){const t=this.length;if(t%2!=0)throw new RangeError("Buffer size must be a multiple of 16-bits");for(let e=0;e<t;e+=2)y(this,e,e+1);return this},l.prototype.swap32=function(){const t=this.length;if(t%4!=0)throw new RangeError("Buffer size must be a multiple of 32-bits");for(let e=0;e<t;e+=4)y(this,e,e+3),y(this,e+1,e+2);return this},l.prototype.swap64=function(){const t=this.length;if(t%8!=0)throw new RangeError("Buffer size must be a multiple of 64-bits");for(let e=0;e<t;e+=8)y(this,e,e+7),y(this,e+1,e+6),y(this,e+2,e+5),y(this,e+3,e+4);return this},l.prototype.toString=function(){const t=this.length;return 0===t?"":0===arguments.length?T(this,0,t):v.apply(this,arguments)},l.prototype.toLocaleString=l.prototype.toString,l.prototype.equals=function(t){if(!l.isBuffer(t))throw new TypeError("Argument must be a Buffer");return this===t||0===l.compare(this,t)},l.prototype.inspect=function(){let t="";const i=e.INSPECT_MAX_BYTES;return t=this.toString("hex",0,i).replace(/(.{2})/g,"$1 ").trim(),this.length>i&&(t+=" ... "),"<Buffer "+t+">"},o&&(l.prototype[o]=l.prototype.inspect),l.prototype.compare=function(t,e,i,r,n){if(K(t,Uint8Array)&&(t=l.from(t,t.offset,t.byteLength)),!l.isBuffer(t))throw new TypeError('The "target" argument must be one of type Buffer or Uint8Array. Received type '+typeof t);if(void 0===e&&(e=0),void 0===i&&(i=t?t.length:0),void 0===r&&(r=0),void 0===n&&(n=this.length),e<0||i>t.length||r<0||n>this.length)throw new RangeError("out of range index");if(r>=n&&e>=i)return 0;if(r>=n)return-1;if(e>=i)return 1;if(this===t)return 0;let s=(n>>>=0)-(r>>>=0),o=(i>>>=0)-(e>>>=0);const a=Math.min(s,o),h=this.slice(r,n),u=t.slice(e,i);for(let t=0;t<a;++t)if(h[t]!==u[t]){s=h[t],o=u[t];break}return s<o?-1:o<s?1:0},l.prototype.includes=function(t,e,i){return-1!==this.indexOf(t,e,i)},l.prototype.indexOf=function(t,e,i){return b(this,t,e,i,!0)},l.prototype.lastIndexOf=function(t,e,i){return b(this,t,e,i,!1)},l.prototype.write=function(t,e,i,r){if(void 0===e)r="utf8",i=this.length,e=0;else if(void 0===i&&"string"==typeof e)r=e,i=this.length,e=0;else{if(!isFinite(e))throw new Error("Buffer.write(string, encoding, offset[, length]) is no longer supported");e>>>=0,isFinite(i)?(i>>>=0,void 0===r&&(r="utf8")):(r=i,i=void 0)}const n=this.length-e;if((void 0===i||i>n)&&(i=n),t.length>0&&(i<0||e<0)||e>this.length)throw new RangeError("Attempt to write outside buffer bounds");r||(r="utf8");let s=!1;for(;;)switch(r){case"hex":return x(this,t,e,i);case"utf8":case"utf-8":return w(this,t,e,i);case"ascii":case"latin1":case"binary":return M(this,t,e,i);case"base64":return S(this,t,e,i);case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return A(this,t,e,i);default:if(s)throw new TypeError("Unknown encoding: "+r);r=(""+r).toLowerCase(),s=!0}},l.prototype.toJSON=function(){return{type:"Buffer",data:Array.prototype.slice.call(this._arr||this,0)}};const R=4096;function P(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(127&t[n]);return r}function C(t,e,i){let r="";i=Math.min(t.length,i);for(let n=e;n<i;++n)r+=String.fromCharCode(t[n]);return r}function I(t,e,i){const r=t.length;(!e||e<0)&&(e=0),(!i||i<0||i>r)&&(i=r);let n="";for(let r=e;r<i;++r)n+=Q[t[r]];return n}function k(t,e,i){const r=t.slice(e,i);let n="";for(let t=0;t<r.length-1;t+=2)n+=String.fromCharCode(r[t]+256*r[t+1]);return n}function B(t,e,i){if(t%1!=0||t<0)throw new RangeError("offset is not uint");if(t+e>i)throw new RangeError("Trying to access beyond buffer length")}function O(t,e,i,r,n,s){if(!l.isBuffer(t))throw new TypeError('"buffer" argument must be a Buffer instance');if(e>n||e<s)throw new RangeError('"value" argument is out of bounds');if(i+r>t.length)throw new RangeError("Index out of range")}function L(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s,s>>=8,t[i++]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,o>>=8,t[i++]=o,i}function U(t,e,i,r,n){V(e,r,n,t,i,7);let s=Number(e&BigInt(4294967295));t[i+7]=s,s>>=8,t[i+6]=s,s>>=8,t[i+5]=s,s>>=8,t[i+4]=s;let o=Number(e>>BigInt(32)&BigInt(4294967295));return t[i+3]=o,o>>=8,t[i+2]=o,o>>=8,t[i+1]=o,o>>=8,t[i]=o,i+8}function D(t,e,i,r,n,s){if(i+r>t.length)throw new RangeError("Index out of range");if(i<0)throw new RangeError("Index out of range")}function N(t,e,i,r,n){return e=+e,i>>>=0,n||D(t,0,i,4),s.write(t,e,i,r,23,4),i+4}function F(t,e,i,r,n){return e=+e,i>>>=0,n||D(t,0,i,8),s.write(t,e,i,r,52,8),i+8}l.prototype.slice=function(t,e){const i=this.length;(t=~~t)<0?(t+=i)<0&&(t=0):t>i&&(t=i),(e=void 0===e?i:~~e)<0?(e+=i)<0&&(e=0):e>i&&(e=i),e<t&&(e=t);const r=this.subarray(t,e);return Object.setPrototypeOf(r,l.prototype),r},l.prototype.readUintLE=l.prototype.readUIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return r},l.prototype.readUintBE=l.prototype.readUIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let r=this[t+--e],n=1;for(;e>0&&(n*=256);)r+=this[t+--e]*n;return r},l.prototype.readUint8=l.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},l.prototype.readUint16LE=l.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},l.prototype.readUint16BE=l.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},l.prototype.readUint32LE=l.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},l.prototype.readUint32BE=l.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},l.prototype.readBigUInt64LE=J(function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||W(t,this.length-8);const r=e+256*this[++t]+65536*this[++t]+this[++t]*2**24,n=this[++t]+256*this[++t]+65536*this[++t]+i*2**24;return BigInt(r)+(BigInt(n)<<BigInt(32))}),l.prototype.readBigUInt64BE=J(function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||W(t,this.length-8);const r=e*2**24+65536*this[++t]+256*this[++t]+this[++t],n=this[++t]*2**24+65536*this[++t]+256*this[++t]+i;return(BigInt(r)<<BigInt(32))+BigInt(n)}),l.prototype.readIntLE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let r=this[t],n=1,s=0;for(;++s<e&&(n*=256);)r+=this[t+s]*n;return n*=128,r>=n&&(r-=Math.pow(2,8*e)),r},l.prototype.readIntBE=function(t,e,i){t>>>=0,e>>>=0,i||B(t,e,this.length);let r=e,n=1,s=this[t+--r];for(;r>0&&(n*=256);)s+=this[t+--r]*n;return n*=128,s>=n&&(s-=Math.pow(2,8*e)),s},l.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},l.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t]|this[t+1]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);const i=this[t+1]|this[t]<<8;return 32768&i?4294901760|i:i},l.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},l.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},l.prototype.readBigInt64LE=J(function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||W(t,this.length-8);const r=this[t+4]+256*this[t+5]+65536*this[t+6]+(i<<24);return(BigInt(r)<<BigInt(32))+BigInt(e+256*this[++t]+65536*this[++t]+this[++t]*2**24)}),l.prototype.readBigInt64BE=J(function(t){H(t>>>=0,"offset");const e=this[t],i=this[t+7];void 0!==e&&void 0!==i||W(t,this.length-8);const r=(e<<24)+65536*this[++t]+256*this[++t]+this[++t];return(BigInt(r)<<BigInt(32))+BigInt(this[++t]*2**24+65536*this[++t]+256*this[++t]+i)}),l.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),s.read(this,t,!0,23,4)},l.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),s.read(this,t,!1,23,4)},l.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),s.read(this,t,!0,52,8)},l.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),s.read(this,t,!1,52,8)},l.prototype.writeUintLE=l.prototype.writeUIntLE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||O(this,t,e,i,Math.pow(2,8*i)-1,0);let n=1,s=0;for(this[e]=255&t;++s<i&&(n*=256);)this[e+s]=t/n&255;return e+i},l.prototype.writeUintBE=l.prototype.writeUIntBE=function(t,e,i,r){t=+t,e>>>=0,i>>>=0,r||O(this,t,e,i,Math.pow(2,8*i)-1,0);let n=i-1,s=1;for(this[e+n]=255&t;--n>=0&&(s*=256);)this[e+n]=t/s&255;return e+i},l.prototype.writeUint8=l.prototype.writeUInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,255,0),this[e]=255&t,e+1},l.prototype.writeUint16LE=l.prototype.writeUInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeUint16BE=l.prototype.writeUInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeUint32LE=l.prototype.writeUInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},l.prototype.writeUint32BE=l.prototype.writeUInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigUInt64LE=J(function(t,e=0){return L(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeBigUInt64BE=J(function(t,e=0){return U(this,t,e,BigInt(0),BigInt("0xffffffffffffffff"))}),l.prototype.writeIntLE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}let n=0,s=1,o=0;for(this[e]=255&t;++n<i&&(s*=256);)t<0&&0===o&&0!==this[e+n-1]&&(o=1),this[e+n]=(t/s|0)-o&255;return e+i},l.prototype.writeIntBE=function(t,e,i,r){if(t=+t,e>>>=0,!r){const r=Math.pow(2,8*i-1);O(this,t,e,i,r-1,-r)}let n=i-1,s=1,o=0;for(this[e+n]=255&t;--n>=0&&(s*=256);)t<0&&0===o&&0!==this[e+n+1]&&(o=1),this[e+n]=(t/s|0)-o&255;return e+i},l.prototype.writeInt8=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},l.prototype.writeInt16LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},l.prototype.writeInt16BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},l.prototype.writeInt32LE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},l.prototype.writeInt32BE=function(t,e,i){return t=+t,e>>>=0,i||O(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},l.prototype.writeBigInt64LE=J(function(t,e=0){return L(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeBigInt64BE=J(function(t,e=0){return U(this,t,e,-BigInt("0x8000000000000000"),BigInt("0x7fffffffffffffff"))}),l.prototype.writeFloatLE=function(t,e,i){return N(this,t,e,!0,i)},l.prototype.writeFloatBE=function(t,e,i){return N(this,t,e,!1,i)},l.prototype.writeDoubleLE=function(t,e,i){return F(this,t,e,!0,i)},l.prototype.writeDoubleBE=function(t,e,i){return F(this,t,e,!1,i)},l.prototype.copy=function(t,e,i,r){if(!l.isBuffer(t))throw new TypeError("argument should be a Buffer");if(i||(i=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<i&&(r=i),r===i)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError("targetStart out of bounds");if(i<0||i>=this.length)throw new RangeError("Index out of range");if(r<0)throw new RangeError("sourceEnd out of bounds");r>this.length&&(r=this.length),t.length-e<r-i&&(r=t.length-e+i);const n=r-i;return this===t&&"function"==typeof Uint8Array.prototype.copyWithin?this.copyWithin(e,i,r):Uint8Array.prototype.set.call(t,this.subarray(i,r),e),n},l.prototype.fill=function(t,e,i,r){if("string"==typeof t){if("string"==typeof e?(r=e,e=0,i=this.length):"string"==typeof i&&(r=i,i=this.length),void 0!==r&&"string"!=typeof r)throw new TypeError("encoding must be a string");if("string"==typeof r&&!l.isEncoding(r))throw new TypeError("Unknown encoding: "+r);if(1===t.length){const e=t.charCodeAt(0);("utf8"===r&&e<128||"latin1"===r)&&(t=e)}}else"number"==typeof t?t&=255:"boolean"==typeof t&&(t=Number(t));if(e<0||this.length<e||this.length<i)throw new RangeError("Out of range index");if(i<=e)return this;let n;if(e>>>=0,i=void 0===i?this.length:i>>>0,t||(t=0),"number"==typeof t)for(n=e;n<i;++n)this[n]=t;else{const s=l.isBuffer(t)?t:l.from(t,r),o=s.length;if(0===o)throw new TypeError('The value "'+t+'" is invalid for argument "value"');for(n=0;n<i-e;++n)this[n+e]=s[n%o]}return this};const z={};function G(t,e,i){z[t]=class extends i{constructor(){super(),Object.defineProperty(this,"message",{value:e.apply(this,arguments),writable:!0,configurable:!0}),this.name=`${this.name} [${t}]`,this.stack,delete this.name}get code(){return t}set code(t){Object.defineProperty(this,"code",{configurable:!0,enumerable:!0,value:t,writable:!0})}toString(){return`${this.name} [${t}]: ${this.message}`}}}function j(t){let e="",i=t.length;const r="-"===t[0]?1:0;for(;i>=r+4;i-=3)e=`_${t.slice(i-3,i)}${e}`;return`${t.slice(0,i)}${e}`}function V(t,e,i,r,n,s){if(t>i||t<e){const r="bigint"==typeof e?"n":"";let n;throw n=s>3?0===e||e===BigInt(0)?`>= 0${r} and < 2${r} ** ${8*(s+1)}${r}`:`>= -(2${r} ** ${8*(s+1)-1}${r}) and < 2 ** ${8*(s+1)-1}${r}`:`>= ${e}${r} and <= ${i}${r}`,new z.ERR_OUT_OF_RANGE("value",n,t)}!function(t,e,i){H(e,"offset"),void 0!==t[e]&&void 0!==t[e+i]||W(e,t.length-(i+1))}(r,n,s)}function H(t,e){if("number"!=typeof t)throw new z.ERR_INVALID_ARG_TYPE(e,"number",t)}function W(t,e,i){if(Math.floor(t)!==t)throw H(t,i),new z.ERR_OUT_OF_RANGE(i||"offset","an integer",t);if(e<0)throw new z.ERR_BUFFER_OUT_OF_BOUNDS;throw new z.ERR_OUT_OF_RANGE(i||"offset",`>= ${i?1:0} and <= ${e}`,t)}G("ERR_BUFFER_OUT_OF_BOUNDS",function(t){return t?`${t} is outside of buffer bounds`:"Attempt to access memory outside buffer bounds"},RangeError),G("ERR_INVALID_ARG_TYPE",function(t,e){return`The "${t}" argument must be of type number. Received type ${typeof e}`},TypeError),G("ERR_OUT_OF_RANGE",function(t,e,i){let r=`The value of "${t}" is out of range.`,n=i;return Number.isInteger(i)&&Math.abs(i)>2**32?n=j(String(i)):"bigint"==typeof i&&(n=String(i),(i>BigInt(2)**BigInt(32)||i<-(BigInt(2)**BigInt(32)))&&(n=j(n)),n+="n"),r+=` It must be ${e}. Received ${n}`,r},RangeError);const X=/[^+/0-9A-Za-z-_]/g;function q(t,e){let i;e=e||1/0;const r=t.length;let n=null;const s=[];for(let o=0;o<r;++o){if(i=t.charCodeAt(o),i>55295&&i<57344){if(!n){if(i>56319){(e-=3)>-1&&s.push(239,191,189);continue}if(o+1===r){(e-=3)>-1&&s.push(239,191,189);continue}n=i;continue}if(i<56320){(e-=3)>-1&&s.push(239,191,189),n=i;continue}i=65536+(n-55296<<10|i-56320)}else n&&(e-=3)>-1&&s.push(239,191,189);if(n=null,i<128){if((e-=1)<0)break;s.push(i)}else if(i<2048){if((e-=2)<0)break;s.push(i>>6|192,63&i|128)}else if(i<65536){if((e-=3)<0)break;s.push(i>>12|224,i>>6&63|128,63&i|128)}else{if(!(i<1114112))throw new Error("Invalid code point");if((e-=4)<0)break;s.push(i>>18|240,i>>12&63|128,i>>6&63|128,63&i|128)}}return s}function Y(t){return n.toByteArray(function(t){if((t=(t=t.split("=")[0]).trim().replace(X,"")).length<2)return"";for(;t.length%4!=0;)t+="=";return t}(t))}function Z(t,e,i,r){let n;for(n=0;n<r&&!(n+i>=e.length||n>=t.length);++n)e[n+i]=t[n];return n}function K(t,e){return t instanceof e||null!=t&&null!=t.constructor&&null!=t.constructor.name&&t.constructor.name===e.name}function $(t){return t!=t}const Q=function(){const t="0123456789abcdef",e=new Array(256);for(let i=0;i<16;++i){const r=16*i;for(let n=0;n<16;++n)e[r+n]=t[i]+t[n]}return e}();function J(t){return"undefined"==typeof BigInt?tt:t}function tt(){throw new Error("BigInt not supported")}},8291:(t,e,i)=>{"use strict";i.d(e,{x:()=>d});var r=i(4486),n=i(2577),s=i(4670),o=i(7276),a=i(2806),h=i(4835),l=i(990),u=i(8011);const c=class t extends r.A{constructor(e={}){super(),function(t){const e=t;if("boolean"==typeof e.dropShadow&&e.dropShadow){const i=d.defaultDropShadow;t.dropShadow={alpha:e.dropShadowAlpha??i.alpha,angle:e.dropShadowAngle??i.angle,blur:e.dropShadowBlur??i.blur,color:e.dropShadowColor??i.color,distance:e.dropShadowDistance??i.distance}}if(void 0!==e.strokeThickness){(0,s.t6)(s.lj,"strokeThickness is now a part of stroke");const i=e.stroke;let r={};if(n.Q.isColorLike(i))r.color=i;else if(i instanceof o._||i instanceof a.m)r.fill=i;else{if(!Object.hasOwnProperty.call(i,"color")&&!Object.hasOwnProperty.call(i,"fill"))throw new Error("Invalid stroke value.");r=i}t.stroke={...r,width:e.strokeThickness}}if(Array.isArray(e.fillGradientStops)){let i;(0,s.t6)(s.lj,"gradient fill is now a fill pattern: `new FillGradient(...)`"),null==t.fontSize?t.fontSize=d.defaultTextStyle.fontSize:i="string"==typeof t.fontSize?parseInt(t.fontSize,10):t.fontSize;const r=new o._(0,0,0,1.7*i),a=e.fillGradientStops.map(t=>n.Q.shared.setValue(t).toNumber());a.forEach((t,e)=>{const i=e/(a.length-1);r.addColorStop(i,t)}),t.fill={fill:r}}}(e);const i={...t.defaultTextStyle,...e};for(const t in i)this[t]=i[t];this.update()}get align(){return this._align}set align(t){this._align=t,this.update()}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords=t,this.update()}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow=null!==e&&"object"==typeof e?this._createProxy({...t.defaultDropShadow,...e}):e?this._createProxy({...t.defaultDropShadow}):null,this.update()}get fontFamily(){return this._fontFamily}set fontFamily(t){this._fontFamily=t,this.update()}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize="string"==typeof t?parseInt(t,10):t,this.update()}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle=t.toLowerCase(),this.update()}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant=t,this.update()}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight=t,this.update()}get leading(){return this._leading}set leading(t){this._leading=t,this.update()}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing=t,this.update()}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight=t,this.update()}get padding(){return this._padding}set padding(t){this._padding=t,this.update()}get trim(){return this._trim}set trim(t){this._trim=t,this.update()}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline=t,this.update()}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace=t,this.update()}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap=t,this.update()}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth=t,this.update()}get fill(){return this._originalFill}set fill(t){t!==this._originalFill&&(this._originalFill=t,this._isFillStyle(t)&&(this._originalFill=this._createProxy({...h.T.defaultFillStyle,...t},()=>{this._fill=(0,l.w)({...this._originalFill},h.T.defaultFillStyle)})),this._fill=(0,l.w)(0===t?"black":t,h.T.defaultFillStyle),this.update())}get stroke(){return this._originalStroke}set stroke(t){t!==this._originalStroke&&(this._originalStroke=t,this._isFillStyle(t)&&(this._originalStroke=this._createProxy({...h.T.defaultStrokeStyle,...t},()=>{this._stroke=(0,l.T)({...this._originalStroke},h.T.defaultStrokeStyle)})),this._stroke=(0,l.T)(t,h.T.defaultStrokeStyle),this.update())}_generateKey(){return this._styleKey=(0,u.V)(this),this._styleKey}update(){this._styleKey=null,this.emit("update",this)}reset(){const e=t.defaultTextStyle;for(const t in e)this[t]=e[t]}get styleKey(){return this._styleKey||this._generateKey()}clone(){return new t({align:this.align,breakWords:this.breakWords,dropShadow:this._dropShadow?{...this._dropShadow}:null,fill:this._fill,fontFamily:this.fontFamily,fontSize:this.fontSize,fontStyle:this.fontStyle,fontVariant:this.fontVariant,fontWeight:this.fontWeight,leading:this.leading,letterSpacing:this.letterSpacing,lineHeight:this.lineHeight,padding:this.padding,stroke:this._stroke,textBaseline:this.textBaseline,whiteSpace:this.whiteSpace,wordWrap:this.wordWrap,wordWrapWidth:this.wordWrapWidth})}destroy(t=!1){if(this.removeAllListeners(),"boolean"==typeof t?t:t?.texture){const e="boolean"==typeof t?t:t?.textureSource;this._fill?.texture&&this._fill.texture.destroy(e),this._originalFill?.texture&&this._originalFill.texture.destroy(e),this._stroke?.texture&&this._stroke.texture.destroy(e),this._originalStroke?.texture&&this._originalStroke.texture.destroy(e)}this._fill=null,this._stroke=null,this.dropShadow=null,this._originalStroke=null,this._originalFill=null}_createProxy(t,e){return new Proxy(t,{set:(t,i,r)=>(t[i]=r,e?.(i,r),this.update(),!0)})}_isFillStyle(t){return null!==(t??null)&&!(n.Q.isColorLike(t)||t instanceof o._||t instanceof a.m)}};c.defaultDropShadow={alpha:1,angle:Math.PI/6,blur:0,color:"black",distance:5},c.defaultTextStyle={align:"left",breakWords:!1,dropShadow:null,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,padding:0,stroke:null,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let d=c},8293:(t,e,i)=>{"use strict";i.d(e,{b:()=>a});var r=i(1761),n=i(888),s=i(268),o=i(1285);class a extends o.v{constructor(t){if(t.resource&&globalThis.HTMLImageElement&&t.resource instanceof HTMLImageElement){const e=r.e.get().createCanvas(t.resource.width,t.resource.height);e.getContext("2d").drawImage(t.resource,0,0,t.resource.width,t.resource.height),t.resource=e,(0,s.R)("ImageSource: Image element passed, converting to canvas. Use CanvasSource instead.")}super(t),this.uploadMethodId="image",this.autoGarbageCollect=!0}static test(t){return globalThis.HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||globalThis.VideoFrame&&t instanceof VideoFrame}}a.extension=n.Ag.TextureSource},8306:(t,e,i)=>{"use strict";i.d(e,{m:()=>n});const r={uint8x2:{size:2,stride:2,normalised:!1},uint8x4:{size:4,stride:4,normalised:!1},sint8x2:{size:2,stride:2,normalised:!1},sint8x4:{size:4,stride:4,normalised:!1},unorm8x2:{size:2,stride:2,normalised:!0},unorm8x4:{size:4,stride:4,normalised:!0},snorm8x2:{size:2,stride:2,normalised:!0},snorm8x4:{size:4,stride:4,normalised:!0},uint16x2:{size:2,stride:4,normalised:!1},uint16x4:{size:4,stride:8,normalised:!1},sint16x2:{size:2,stride:4,normalised:!1},sint16x4:{size:4,stride:8,normalised:!1},unorm16x2:{size:2,stride:4,normalised:!0},unorm16x4:{size:4,stride:8,normalised:!0},snorm16x2:{size:2,stride:4,normalised:!0},snorm16x4:{size:4,stride:8,normalised:!0},float16x2:{size:2,stride:4,normalised:!1},float16x4:{size:4,stride:8,normalised:!1},float32:{size:1,stride:4,normalised:!1},float32x2:{size:2,stride:8,normalised:!1},float32x3:{size:3,stride:12,normalised:!1},float32x4:{size:4,stride:16,normalised:!1},uint32:{size:1,stride:4,normalised:!1},uint32x2:{size:2,stride:8,normalised:!1},uint32x3:{size:3,stride:12,normalised:!1},uint32x4:{size:4,stride:16,normalised:!1},sint32:{size:1,stride:4,normalised:!1},sint32x2:{size:2,stride:8,normalised:!1},sint32x3:{size:3,stride:12,normalised:!1},sint32x4:{size:4,stride:16,normalised:!1}};function n(t){return r[t]??r.float32}},8310:(t,e,i)=>{t.exports=n;var r=i(7007).EventEmitter;function n(){r.call(this)}i(6698)(n,r),n.Readable=i(5412),n.Writable=i(6708),n.Duplex=i(5382),n.Transform=i(4610),n.PassThrough=i(3600),n.finished=i(6238),n.pipeline=i(7758),n.Stream=n,n.prototype.pipe=function(t,e){var i=this;function n(e){t.writable&&!1===t.write(e)&&i.pause&&i.pause()}function s(){i.readable&&i.resume&&i.resume()}i.on("data",n),t.on("drain",s),t._isStdio||e&&!1===e.end||(i.on("end",a),i.on("close",h));var o=!1;function a(){o||(o=!0,t.end())}function h(){o||(o=!0,"function"==typeof t.destroy&&t.destroy())}function l(t){if(u(),0===r.listenerCount(this,"error"))throw t}function u(){i.removeListener("data",n),t.removeListener("drain",s),i.removeListener("end",a),i.removeListener("close",h),i.removeListener("error",l),t.removeListener("error",l),i.removeListener("end",u),i.removeListener("close",u),t.removeListener("close",u)}return i.on("error",l),t.on("error",l),i.on("end",u),i.on("close",u),t.on("close",u),t.emit("pipe",i),t}},8335:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(8562),n=i(1917);const s=(0,r.A)(n.A,"Map")},8392:(t,e,i)=>{"use strict";i.d(e,{V:()=>l});var r=i(4486),n=i(9636),s=i(133),o=i(949),a=i(1132);function h(t,e){if(!(t instanceof o.h)){let i=e?a.S.INDEX:a.S.VERTEX;t instanceof Array&&(e?(t=new Uint32Array(t),i=a.S.INDEX|a.S.COPY_DST):(t=new Float32Array(t),i=a.S.VERTEX|a.S.COPY_DST)),t=new o.h({data:t,label:e?"index-mesh-buffer":"vertex-mesh-buffer",usage:i})}return t}class l extends r.A{constructor(t={}){super(),this.uid=(0,s.L)("geometry"),this._layoutKey=0,this.instanceCount=1,this._bounds=new n.c,this._boundsDirty=!0;const{attributes:e,indexBuffer:i,topology:r}=t;if(this.buffers=[],this.attributes={},e)for(const t in e)this.addAttribute(t,e[t]);this.instanceCount=t.instanceCount??1,i&&this.addIndex(i),this.topology=r||"triangle-list"}onBufferUpdate(){this._boundsDirty=!0,this.emit("update",this)}getAttribute(t){return this.attributes[t]}getIndex(){return this.indexBuffer}getBuffer(t){return this.getAttribute(t).buffer}getSize(){for(const t in this.attributes){const e=this.attributes[t];return e.buffer.data.length/(e.stride/4||e.size)}return 0}addAttribute(t,e){const i=function(t){return(t instanceof o.h||Array.isArray(t)||t.BYTES_PER_ELEMENT)&&(t={buffer:t}),t.buffer=h(t.buffer,!1),t}(e);-1===this.buffers.indexOf(i.buffer)&&(this.buffers.push(i.buffer),i.buffer.on("update",this.onBufferUpdate,this),i.buffer.on("change",this.onBufferUpdate,this)),this.attributes[t]=i}addIndex(t){this.indexBuffer=h(t,!0),this.buffers.push(this.indexBuffer)}get bounds(){return this._boundsDirty?(this._boundsDirty=!1,function(t,e,i){const r=t.getAttribute("aPosition");if(!r)return i.minX=0,i.minY=0,i.maxX=0,i.maxY=0,i;const n=r.buffer.data;let s=1/0,o=1/0,a=-1/0,h=-1/0;const l=n.BYTES_PER_ELEMENT,u=(r.offset||0)/l,c=(r.stride||8)/l;for(let t=u;t<n.length;t+=c){const e=n[t],i=n[t+1];e>a&&(a=e),i>h&&(h=i),e<s&&(s=e),i<o&&(o=i)}return i.minX=s,i.minY=o,i.maxX=a,i.maxY=h,i}(this,0,this._bounds)):this._bounds}destroy(t=!1){this.emit("destroy",this),this.removeAllListeners(),t&&this.buffers.forEach(t=>t.destroy()),this.attributes=null,this.buffers=null,this.indexBuffer=null,this._bounds=null}}},8393:(t,e,i)=>{var r=i(8287),n=r.Buffer;function s(t,e){for(var i in t)e[i]=t[i]}function o(t,e,i){return n(t,e,i)}n.from&&n.alloc&&n.allocUnsafe&&n.allocUnsafeSlow?t.exports=r:(s(r,e),e.Buffer=o),s(n,o),o.from=function(t,e,i){if("number"==typeof t)throw new TypeError("Argument must not be a number");return n(t,e,i)},o.alloc=function(t,e,i){if("number"!=typeof t)throw new TypeError("Argument must be a number");var r=n(t);return void 0!==e?"string"==typeof i?r.fill(e,i):r.fill(e):r.fill(0),r},o.allocUnsafe=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return n(t)},o.allocUnsafeSlow=function(t){if("number"!=typeof t)throw new TypeError("Argument must be a number");return r.SlowBuffer(t)}},8396:(t,e,i)=>{"use strict";e.pbkdf2=i(3832),e.pbkdf2Sync=i(1352)},8399:(t,e,i)=>{(e=t.exports=i(5412)).Stream=e,e.Readable=e,e.Writable=i(6708),e.Duplex=i(5382),e.Transform=i(4610),e.PassThrough=i(3600),e.finished=i(6238),e.pipeline=i(7758)},8403:(t,e,i)=>{"use strict";var r=i(1189),n=i(1333)(),s=i(6556),o=i(9612),a=s("Array.prototype.push"),h=s("Object.prototype.propertyIsEnumerable"),l=n?o.getOwnPropertySymbols:null;t.exports=function(t,e){if(null==t)throw new TypeError("target must be an object");var i=o(t);if(1===arguments.length)return i;for(var s=1;s<arguments.length;++s){var u=o(arguments[s]),c=r(u),d=n&&(o.getOwnPropertySymbols||l);if(d)for(var f=d(u),p=0;p<f.length;++p){var m=f[p];h(u,m)&&a(c,m)}for(var g=0;g<c.length;++g){var v=c[g];if(h(u,v)){var y=u[v];i[v]=y}}}return i}},8422:(t,e,i)=>{"use strict";i.d(e,{K:()=>r});class r{constructor(){this.batcherName="default",this.topology="triangle-list",this.attributeSize=4,this.indexSize=6,this.packAsQuad=!0,this.roundPixels=0,this._attributeStart=0,this._batcher=null,this._batch=null}get blendMode(){return this.renderable.groupBlendMode}get color(){return this.renderable.groupColorAlpha}reset(){this.renderable=null,this.texture=null,this._batcher=null,this._batch=null,this.bounds=null}}},8425:(t,e,i)=>{"use strict";i.d(e,{b:()=>r});class r{constructor(t,e){this._pool=[],this._count=0,this._index=0,this._classType=t,e&&this.prepopulate(e)}prepopulate(t){for(let e=0;e<t;e++)this._pool[this._index++]=new this._classType;this._count+=t}get(t){let e;return e=this._index>0?this._pool[--this._index]:new this._classType,e.init?.(t),e}return(t){t.reset?.(),this._pool[this._index++]=t}get totalSize(){return this._count}get totalFree(){return this._index}get totalUsed(){return this._count-this._index}clear(){this._pool.length=0,this._index=0}}},8446:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(9610),n=i(5254);const s=function(t){return null!=t&&(0,n.A)(t.length)&&!(0,r.A)(t)}},8452:(t,e,i)=>{"use strict";var r=i(1189),n="function"==typeof Symbol&&"symbol"==typeof Symbol("foo"),s=Object.prototype.toString,o=Array.prototype.concat,a=i(41),h=i(592)(),l=function(t,e,i,r){if(e in t)if(!0===r){if(t[e]===i)return}else if("function"!=typeof(n=r)||"[object Function]"!==s.call(n)||!r())return;var n;h?a(t,e,i,!0):a(t,e,i)},u=function(t,e){var i=arguments.length>2?arguments[2]:{},s=r(e);n&&(s=o.call(s,Object.getOwnPropertySymbols(e)));for(var a=0;a<s.length;a+=1)l(t,s[a],e[s[a]],i[s[a]])};u.supportsDescriptors=!!h,t.exports=u},8475:(t,e,i)=>{"use strict";i.d(e,{M:()=>u});var r=i(4486),n=i(9113),s=i(3513),o=i(3012),a=i(5099),h=i(5811),l=i(133);class u extends r.A{constructor(t){super(),this.uid=(0,l.L)("shader"),this._uniformBindMap=Object.create(null),this._ownedBindGroups=[];let{gpuProgram:e,glProgram:i,groups:r,resources:n,compatibleRenderers:o,groupMap:u}=t;this.gpuProgram=e,this.glProgram=i,void 0===o&&(o=0,e&&(o|=a.W.WEBGPU),i&&(o|=a.W.WEBGL)),this.compatibleRenderers=o;const c={};if(n||r||(n={}),n&&r)throw new Error("[Shader] Cannot have both resources and groups");if(!e&&r&&!u)throw new Error("[Shader] No group map or WebGPU shader provided - consider using resources instead.");if(!e&&r&&u)for(const t in u)for(const e in u[t]){const i=u[t][e];c[i]={group:t,binding:e,name:i}}else if(e&&r&&!u){const t=e.structsAndGroups.groups;u={},t.forEach(t=>{u[t.group]=u[t.group]||{},u[t.group][t.binding]=t.name,c[t.name]=t})}else if(n){r={},u={},e&&e.structsAndGroups.groups.forEach(t=>{u[t.group]=u[t.group]||{},u[t.group][t.binding]=t.name,c[t.name]=t});let t=0;for(const e in n)c[e]||(r[99]||(r[99]=new s.T,this._ownedBindGroups.push(r[99])),c[e]={group:99,binding:t,name:e},u[99]=u[99]||{},u[99][t]=e,t++);for(const t in n){const e=t;let i=n[t];i.source||i._resourceType||(i=new h.k(i));const o=c[e];o&&(r[o.group]||(r[o.group]=new s.T,this._ownedBindGroups.push(r[o.group])),r[o.group].setResource(i,o.binding))}}this.groups=r,this._uniformBindMap=u,this.resources=this._buildResourceAccessor(r,c)}addResource(t,e,i){var r,n;(r=this._uniformBindMap)[e]||(r[e]={}),(n=this._uniformBindMap[e])[i]||(n[i]=t),this.groups[e]||(this.groups[e]=new s.T,this._ownedBindGroups.push(this.groups[e]))}_buildResourceAccessor(t,e){const i={};for(const r in e){const n=e[r];Object.defineProperty(i,n.name,{get:()=>t[n.group].getResource(n.binding),set(e){t[n.group].setResource(e,n.binding)}})}return i}destroy(t=!1){this.emit("destroy",this),t&&(this.gpuProgram?.destroy(),this.glProgram?.destroy()),this.gpuProgram=null,this.glProgram=null,this.removeAllListeners(),this._uniformBindMap=null,this._ownedBindGroups.forEach(t=>{t.destroy()}),this._ownedBindGroups=null,this.resources=null,this.groups=null}static from(t){const{gpu:e,gl:i,...r}=t;let s,a;return e&&(s=o.B.from(e)),i&&(a=n.M.from(i)),new u({gpuProgram:s,glProgram:a,...r})}}},8480:(t,e,i)=>{"use strict";var r=i(888),n=i(6844),s=i(9636),o=i(9443);const a=new s.c;function h(t,e,i){const r=a;t.measurable=!0,(0,o.fB)(t,i,r),e.addBoundsMask(r),t.measurable=!1}var l=i(7269),u=i(2208),c=i(268);function d(t,e,i){const r=u.o.get();t.measurable=!0;const n=u.u.get().identity(),s=f(t,i,n);(0,l.n)(t,r,s),t.measurable=!1,e.addBoundsMask(r),u.u.return(n),u.o.return(r)}function f(t,e,i){return t?(t!==e&&(f(t.parent,e,i),t.updateLocalTransform(),i.append(t.localTransform)),i):((0,c.R)("Mask bounds, renderable is not inside the root container"),i)}class p{constructor(t){this.priority=0,this.inverse=!1,this.pipe="alphaMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.renderMaskToTexture=!(t instanceof n.k),this.mask.renderable=this.renderMaskToTexture,this.mask.includeInBuild=!this.renderMaskToTexture,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask=null}addBounds(t,e){this.inverse||h(this.mask,t,e)}addLocalBounds(t,e){d(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof n.k}}p.extension=r.Ag.MaskEffect;class m{constructor(t){this.priority=0,this.pipe="colorMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t}destroy(){}static test(t){return"number"==typeof t}}m.extension=r.Ag.MaskEffect;var g=i(5815);class v{constructor(t){this.priority=0,this.pipe="stencilMask",t?.mask&&this.init(t.mask)}init(t){this.mask=t,this.mask.includeInBuild=!1,this.mask.measurable=!1}reset(){this.mask.measurable=!0,this.mask.includeInBuild=!0,this.mask=null}addBounds(t,e){h(this.mask,t,e)}addLocalBounds(t,e){d(this.mask,t,e)}containsPoint(t,e){return e(this.mask,t)}destroy(){this.reset()}static test(t){return t instanceof g.mc}}v.extension=r.Ag.MaskEffect;var y=i(4195),b=i(4884),_=i(8293),x=i(6139);i(6557),r.XO.add(p,m,v,x.$,_.b,b.q,y.P)},8507:(t,e,i)=>{const r=i(5659);function n(t,e){return function(i){return e(t(i))}}function s(t,e){const i=[e[t].parent,t];let s=r[e[t].parent][t],o=e[t].parent;for(;e[o].parent;)i.unshift(e[o].parent),s=n(r[e[o].parent][o],s),o=e[o].parent;return s.conversion=i,s}t.exports=function(t){const e=function(t){const e=function(){const t={},e=Object.keys(r);for(let i=e.length,r=0;r<i;r++)t[e[r]]={distance:-1,parent:null};return t}(),i=[t];for(e[t].distance=0;i.length;){const t=i.pop(),n=Object.keys(r[t]);for(let r=n.length,s=0;s<r;s++){const r=n[s],o=e[r];-1===o.distance&&(o.distance=e[t].distance+1,o.parent=t,i.unshift(r))}}return e}(t),i={},n=Object.keys(e);for(let t=n.length,r=0;r<t;r++){const t=n[r];null!==e[t].parent&&(i[t]=s(t,e))}return i}},8545:(t,e,i)=>{"use strict";var r=i(9404),n=i(7011),s=n.assert;function o(t,e){if(t instanceof o)return t;this._importDER(t,e)||(s(t.r&&t.s,"Signature without r or s"),this.r=new r(t.r,16),this.s=new r(t.s,16),void 0===t.recoveryParam?this.recoveryParam=null:this.recoveryParam=t.recoveryParam)}function a(){this.place=0}function h(t,e){var i=t[e.place++];if(!(128&i))return i;var r=15&i;if(0===r||r>4)return!1;if(0===t[e.place])return!1;for(var n=0,s=0,o=e.place;s<r;s++,o++)n<<=8,n|=t[o],n>>>=0;return!(n<=127)&&(e.place=o,n)}function l(t){for(var e=0,i=t.length-1;!t[e]&&!(128&t[e+1])&&e<i;)e++;return 0===e?t:t.slice(e)}function u(t,e){if(e<128)t.push(e);else{var i=1+(Math.log(e)/Math.LN2>>>3);for(t.push(128|i);--i;)t.push(e>>>(i<<3)&255);t.push(e)}}t.exports=o,o.prototype._importDER=function(t,e){t=n.toArray(t,e);var i=new a;if(48!==t[i.place++])return!1;var s=h(t,i);if(!1===s)return!1;if(s+i.place!==t.length)return!1;if(2!==t[i.place++])return!1;var o=h(t,i);if(!1===o)return!1;if(128&t[i.place])return!1;var l=t.slice(i.place,o+i.place);if(i.place+=o,2!==t[i.place++])return!1;var u=h(t,i);if(!1===u)return!1;if(t.length!==u+i.place)return!1;if(128&t[i.place])return!1;var c=t.slice(i.place,u+i.place);if(0===l[0]){if(!(128&l[1]))return!1;l=l.slice(1)}if(0===c[0]){if(!(128&c[1]))return!1;c=c.slice(1)}return this.r=new r(l),this.s=new r(c),this.recoveryParam=null,!0},o.prototype.toDER=function(t){var e=this.r.toArray(),i=this.s.toArray();for(128&e[0]&&(e=[0].concat(e)),128&i[0]&&(i=[0].concat(i)),e=l(e),i=l(i);!(i[0]||128&i[1]);)i=i.slice(1);var r=[2];u(r,e.length),(r=r.concat(e)).push(2),u(r,i.length);var s=r.concat(i),o=[48];return u(o,s.length),o=o.concat(s),n.encode(o,t)}},8562:(t,e,i)=>{"use strict";i.d(e,{A:()=>g});var r=i(9610);const n=i(1917).A["__core-js_shared__"];var s,o=(s=/[^.]+$/.exec(n&&n.keys&&n.keys.IE_PROTO||""))?"Symbol(src)_1."+s:"";var a=i(3149),h=i(1121),l=/^\[object .+?Constructor\]$/,u=Function.prototype,c=Object.prototype,d=u.toString,f=c.hasOwnProperty,p=RegExp("^"+d.call(f).replace(/[\\^$.*+?()[\]{}|]/g,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");const m=function(t){return!(!(0,a.A)(t)||(e=t,o&&o in e))&&((0,r.A)(t)?p:l).test((0,h.A)(t));var e},g=function(t,e){var i=function(t,e){return null==t?void 0:t[e]}(t,e);return m(i)?i:void 0}},8592:(t,e,i)=>{"use strict";i.d(e,{A:()=>V});var r=i(2080);var n=i(2851),s=i(2031),o=i(7422);var a=i(9999);var h=i(154),l=i(9759),u=i(6489);var c=i(6912),d=i(5647),f=i(3153);const p=Object.getOwnPropertySymbols?function(t){for(var e=[];t;)(0,c.A)(e,(0,u.A)(t)),t=(0,d.A)(t);return e}:f.A;var m=i(9042),g=i(3831);const v=function(t){return(0,g.A)(t,a.A,p)};var y=i(2434),b=Object.prototype.hasOwnProperty;var _=i(565);var x=/\w*$/;var w=i(241),M=w.A?w.A.prototype:void 0,S=M?M.valueOf:void 0;var A=i(1801);const E=function(t,e,i){var r,n,s,o=t.constructor;switch(e){case"[object ArrayBuffer]":return(0,_.A)(t);case"[object Boolean]":case"[object Date]":return new o(+t);case"[object DataView]":return function(t,e){var i=e?(0,_.A)(t.buffer):t.buffer;return new t.constructor(i,t.byteOffset,t.byteLength)}(t,i);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return(0,A.A)(t,i);case"[object Map]":case"[object Set]":return new o;case"[object Number]":case"[object String]":return new o(t);case"[object RegExp]":return(s=new(n=t).constructor(n.source,x.exec(n))).lastIndex=n.lastIndex,s;case"[object Symbol]":return r=t,S?Object(S.call(r)):{}}};var T=i(407),R=i(2049),P=i(1200),C=i(3098);var I=i(2789),k=i(4841),B=k.A&&k.A.isMap;const O=B?(0,I.A)(B):function(t){return(0,C.A)(t)&&"[object Map]"==(0,y.A)(t)};var L=i(3149);var U=k.A&&k.A.isSet;const D=U?(0,I.A)(U):function(t){return(0,C.A)(t)&&"[object Set]"==(0,y.A)(t)};var N="[object Arguments]",F="[object Function]",z="[object Object]",G={};G[N]=G["[object Array]"]=G["[object ArrayBuffer]"]=G["[object DataView]"]=G["[object Boolean]"]=G["[object Date]"]=G["[object Float32Array]"]=G["[object Float64Array]"]=G["[object Int8Array]"]=G["[object Int16Array]"]=G["[object Int32Array]"]=G["[object Map]"]=G["[object Number]"]=G[z]=G["[object RegExp]"]=G["[object Set]"]=G["[object String]"]=G["[object Symbol]"]=G["[object Uint8Array]"]=G["[object Uint8ClampedArray]"]=G["[object Uint16Array]"]=G["[object Uint32Array]"]=!0,G["[object Error]"]=G[F]=G["[object WeakMap]"]=!1;const j=function t(e,i,c,d,f,g){var _,x=1&i,w=2&i,M=4&i;if(c&&(_=f?c(e,d,f,g):c(e)),void 0!==_)return _;if(!(0,L.A)(e))return e;var S=(0,R.A)(e);if(S){if(_=function(t){var e=t.length,i=new t.constructor(e);return e&&"string"==typeof t[0]&&b.call(t,"index")&&(i.index=t.index,i.input=t.input),i}(e),!x)return(0,l.A)(e,_)}else{var A=(0,y.A)(e),C=A==F||"[object GeneratorFunction]"==A;if((0,P.A)(e))return(0,h.A)(e,x);if(A==z||A==N||C&&!f){if(_=w||C?{}:(0,T.A)(e),!x)return w?function(t,e){return(0,s.A)(t,p(t),e)}(e,function(t,e){return t&&(0,s.A)(e,(0,a.A)(e),t)}(_,e)):function(t,e){return(0,s.A)(t,(0,u.A)(t),e)}(e,function(t,e){return t&&(0,s.A)(e,(0,o.A)(e),t)}(_,e))}else{if(!G[A])return f?e:{};_=E(e,A,x)}}g||(g=new r.A);var I=g.get(e);if(I)return I;g.set(e,_),D(e)?e.forEach(function(r){_.add(t(r,i,c,r,e,g))}):O(e)&&e.forEach(function(r,n){_.set(n,t(r,i,c,n,e,g))});var k=M?w?v:m.A:w?a.A:o.A,B=S?void 0:k(e);return function(t,e){for(var i=-1,r=null==t?0:t.length;++i<r&&!1!==e(t[i],i,t););}(B||e,function(r,s){B&&(r=e[s=r]),(0,n.A)(_,s,t(r,i,c,s,e,g))}),_},V=function(t){return j(t,5)}},8639:(t,e,i)=>{"use strict";i.d(e,{i:()=>n});var r=i(1957);function n(t,e){return"no-premultiply-alpha"===e.alphaMode&&r.Q[t]||t}},8648:t=>{"use strict";t.exports="undefined"!=typeof Reflect&&Reflect.getPrototypeOf||null},8650:(t,e,i)=>{"use strict";var r=i(7952),n=i(480),s=i(7011),o=s.assert,a=s.parseBytes,h=i(6661),l=i(220);function u(t){if(o("ed25519"===t,"only tested with ed25519 so far"),!(this instanceof u))return new u(t);t=n[t].curve,this.curve=t,this.g=t.g,this.g.precompute(t.n.bitLength()+1),this.pointClass=t.point().constructor,this.encodingLength=Math.ceil(t.n.bitLength()/8),this.hash=r.sha512}t.exports=u,u.prototype.sign=function(t,e){t=a(t);var i=this.keyFromSecret(e),r=this.hashInt(i.messagePrefix(),t),n=this.g.mul(r),s=this.encodePoint(n),o=this.hashInt(s,i.pubBytes(),t).mul(i.priv()),h=r.add(o).umod(this.curve.n);return this.makeSignature({R:n,S:h,Rencoded:s})},u.prototype.verify=function(t,e,i){if(t=a(t),(e=this.makeSignature(e)).S().gte(e.eddsa.curve.n)||e.S().isNeg())return!1;var r=this.keyFromPublic(i),n=this.hashInt(e.Rencoded(),r.pubBytes(),t),s=this.g.mul(e.S());return e.R().add(r.pub().mul(n)).eq(s)},u.prototype.hashInt=function(){for(var t=this.hash(),e=0;e<arguments.length;e++)t.update(arguments[e]);return s.intFromLE(t.digest()).umod(this.curve.n)},u.prototype.keyFromPublic=function(t){return h.fromPublic(this,t)},u.prototype.keyFromSecret=function(t){return h.fromSecret(this,t)},u.prototype.makeSignature=function(t){return t instanceof l?t:new l(this,t)},u.prototype.encodePoint=function(t){var e=t.getY().toArray("le",this.encodingLength);return e[this.encodingLength-1]|=t.getX().isOdd()?128:0,e},u.prototype.decodePoint=function(t){var e=(t=s.parseBytes(t)).length-1,i=t.slice(0,e).concat(-129&t[e]),r=!!(128&t[e]),n=s.intFromLE(i);return this.curve.pointFromY(n,r)},u.prototype.encodeInt=function(t){return t.toArray("le",this.encodingLength)},u.prototype.decodeInt=function(t){return s.intFromLE(t)},u.prototype.isPoint=function(t){return t instanceof this.pointClass}},8664:()=>{},8789:(t,e,i)=>{var r,n=i(2861).Buffer,s=i(1565),o=i(9629),a=i(537),h="secret must be a string or buffer",l="key must be a string or a buffer",u="function"==typeof s.createPublicKey;function c(t){if(!n.isBuffer(t)&&"string"!=typeof t){if(!u)throw m(l);if("object"!=typeof t)throw m(l);if("string"!=typeof t.type)throw m(l);if("string"!=typeof t.asymmetricKeyType)throw m(l);if("function"!=typeof t.export)throw m(l)}}function d(t){if(!n.isBuffer(t)&&"string"!=typeof t&&"object"!=typeof t)throw m("key must be a string, a buffer or an object")}function f(t){return t.replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")}function p(t){var e=4-(t=t.toString()).length%4;if(4!==e)for(var i=0;i<e;++i)t+="=";return t.replace(/\-/g,"+").replace(/_/g,"/")}function m(t){var e=[].slice.call(arguments,1),i=a.format.bind(a,t).apply(null,e);return new TypeError(i)}function g(t){var e;return e=t,n.isBuffer(e)||"string"==typeof e||(t=JSON.stringify(t)),t}function v(t){return function(e,i){!function(t){if(!n.isBuffer(t)){if("string"==typeof t)return t;if(!u)throw m(h);if("object"!=typeof t)throw m(h);if("secret"!==t.type)throw m(h);if("function"!=typeof t.export)throw m(h)}}(i),e=g(e);var r=s.createHmac("sha"+t,i);return f((r.update(e),r.digest("base64")))}}u&&(l+=" or a KeyObject",h+="or a KeyObject");var y="timingSafeEqual"in s?function(t,e){return t.byteLength===e.byteLength&&s.timingSafeEqual(t,e)}:function(t,e){return r||(r=i(1045)),r(t,e)};function b(t){return function(e,i,r){var s=v(t)(e,r);return y(n.from(i),n.from(s))}}function _(t){return function(e,i){d(i),e=g(e);var r=s.createSign("RSA-SHA"+t);return f((r.update(e),r.sign(i,"base64")))}}function x(t){return function(e,i,r){c(r),e=g(e),i=p(i);var n=s.createVerify("RSA-SHA"+t);return n.update(e),n.verify(r,i,"base64")}}function w(t){return function(e,i){d(i),e=g(e);var r=s.createSign("RSA-SHA"+t);return f((r.update(e),r.sign({key:i,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},"base64")))}}function M(t){return function(e,i,r){c(r),e=g(e),i=p(i);var n=s.createVerify("RSA-SHA"+t);return n.update(e),n.verify({key:r,padding:s.constants.RSA_PKCS1_PSS_PADDING,saltLength:s.constants.RSA_PSS_SALTLEN_DIGEST},i,"base64")}}function S(t){var e=_(t);return function(){var i=e.apply(null,arguments);return o.derToJose(i,"ES"+t)}}function A(t){var e=x(t);return function(i,r,n){return r=o.joseToDer(r,"ES"+t).toString("base64"),e(i,r,n)}}function E(){return function(){return""}}function T(){return function(t,e){return""===e}}t.exports=function(t){var e={hs:v,rs:_,ps:w,es:S,none:E},i={hs:b,rs:x,ps:M,es:A,none:T},r=t.match(/^(RS|PS|ES|HS)(256|384|512)$|^(none)$/i);if(!r)throw m('"%s" is not a valid algorithm.\n  Supported algorithms are:\n  "HS256", "HS384", "HS512", "RS256", "RS384", "RS512", "PS256", "PS384", "PS512", "ES256", "ES384", "ES512" and "none".',t);var n=(r[1]||r[3]).toLowerCase(),s=r[2];return{sign:e[n](s),verify:i[n](s)}}},8819:(t,e,i)=>{"use strict";var r=i(9404),n=i(7011).assert;function s(t,e){this.ec=t,this.priv=null,this.pub=null,e.priv&&this._importPrivate(e.priv,e.privEnc),e.pub&&this._importPublic(e.pub,e.pubEnc)}t.exports=s,s.fromPublic=function(t,e,i){return e instanceof s?e:new s(t,{pub:e,pubEnc:i})},s.fromPrivate=function(t,e,i){return e instanceof s?e:new s(t,{priv:e,privEnc:i})},s.prototype.validate=function(){var t=this.getPublic();return t.isInfinity()?{result:!1,reason:"Invalid public key"}:t.validate()?t.mul(this.ec.curve.n).isInfinity()?{result:!0,reason:null}:{result:!1,reason:"Public key * N != O"}:{result:!1,reason:"Public key is not a point"}},s.prototype.getPublic=function(t,e){return"string"==typeof t&&(e=t,t=null),this.pub||(this.pub=this.ec.g.mul(this.priv)),e?this.pub.encode(e,t):this.pub},s.prototype.getPrivate=function(t){return"hex"===t?this.priv.toString(16,2):this.priv},s.prototype._importPrivate=function(t,e){this.priv=new r(t,e||16),this.priv=this.priv.umod(this.ec.curve.n)},s.prototype._importPublic=function(t,e){if(t.x||t.y)return"mont"===this.ec.curve.type?n(t.x,"Need x coordinate"):"short"!==this.ec.curve.type&&"edwards"!==this.ec.curve.type||n(t.x&&t.y,"Need both x and y coordinate"),void(this.pub=this.ec.curve.point(t.x,t.y));this.pub=this.ec.curve.decodePoint(t,e)},s.prototype.derive=function(t){return t.validate()||n(t.validate(),"public point not validated"),t.mul(this.priv).getX()},s.prototype.sign=function(t,e,i){return this.ec.sign(t,this,e,i)},s.prototype.verify=function(t,e,i){return this.ec.verify(t,e,this,void 0,i)},s.prototype.inspect=function(){return"<Key priv: "+(this.priv&&this.priv.toString(16,2))+" pub: "+(this.pub&&this.pub.inspect())+" >"}},8875:(t,e,i)=>{"use strict";var r;if(!Object.keys){var n=Object.prototype.hasOwnProperty,s=Object.prototype.toString,o=i(1093),a=Object.prototype.propertyIsEnumerable,h=!a.call({toString:null},"toString"),l=a.call(function(){},"prototype"),u=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],c=function(t){var e=t.constructor;return e&&e.prototype===t},d={$applicationCache:!0,$console:!0,$external:!0,$frame:!0,$frameElement:!0,$frames:!0,$innerHeight:!0,$innerWidth:!0,$onmozfullscreenchange:!0,$onmozfullscreenerror:!0,$outerHeight:!0,$outerWidth:!0,$pageXOffset:!0,$pageYOffset:!0,$parent:!0,$scrollLeft:!0,$scrollTop:!0,$scrollX:!0,$scrollY:!0,$self:!0,$webkitIndexedDB:!0,$webkitStorageInfo:!0,$window:!0},f=function(){if("undefined"==typeof window)return!1;for(var t in window)try{if(!d["$"+t]&&n.call(window,t)&&null!==window[t]&&"object"==typeof window[t])try{c(window[t])}catch(t){return!0}}catch(t){return!0}return!1}();r=function(t){var e=null!==t&&"object"==typeof t,i="[object Function]"===s.call(t),r=o(t),a=e&&"[object String]"===s.call(t),d=[];if(!e&&!i&&!r)throw new TypeError("Object.keys called on a non-object");var p=l&&i;if(a&&t.length>0&&!n.call(t,0))for(var m=0;m<t.length;++m)d.push(String(m));if(r&&t.length>0)for(var g=0;g<t.length;++g)d.push(String(g));else for(var v in t)p&&"prototype"===v||!n.call(t,v)||d.push(String(v));if(h)for(var y=function(t){if("undefined"==typeof window||!f)return c(t);try{return c(t)}catch(t){return!1}}(t),b=0;b<u.length;++b)y&&"constructor"===u[b]||!n.call(t,u[b])||d.push(u[b]);return d}}t.exports=r},8893:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(8285).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=48&&i<=57?i-48:i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:void r(!1,"Invalid character in "+t)}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function l(t,e,i,n){for(var s=0,o=0,a=Math.min(t.length,i),h=e;h<a;h++){var l=t.charCodeAt(h)-48;s*=n,o=l>=49?l-49+10:l>=17?l-17+10:l,r(l>=0&&o<n,"Invalid character"),s+=o}return s}function u(t,e){t.words=e.words,t.length=e.length,t.negative=e.negative,t.red=e.red}if(s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this._strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this._strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,u=i;u<a;u+=r)h=l(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=l(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this._strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype._move=function(t){u(t,this)},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype._strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},"undefined"!=typeof Symbol&&"function"==typeof Symbol.for)try{s.prototype[Symbol.for("nodejs.util.inspect.custom")]=c}catch(t){s.prototype.inspect=c}else s.prototype.inspect=c;function c(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"}var d=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],f=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],p=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function m(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<r;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var p=l-f|0;u+=(o=(n=0|t.words[p])*(s=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i._strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),i=0!==s||o!==this.length-1?d[6-h.length]+h+i:h+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=f[t],u=p[t];i="";var c=this.clone();for(c.negative=0;!c.isZero();){var m=c.modrn(u).toString(t);i=(c=c.idivn(u)).isZero()?m+i:d[l-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16,2)},o&&(s.prototype.toBuffer=function(t,e){return this.toArrayLike(o,t,e)}),s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){this._strip();var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0");var o=function(t,e){return t.allocUnsafe?t.allocUnsafe(e):new t(e)}(t,s);return this["_toArrayLike"+("le"===e?"LE":"BE")](o,n),o},s.prototype._toArrayLikeLE=function(t,e){for(var i=0,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i++]=255&o,i<t.length&&(t[i++]=o>>8&255),i<t.length&&(t[i++]=o>>16&255),6===s?(i<t.length&&(t[i++]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i<t.length)for(t[i++]=r;i<t.length;)t[i++]=0},s.prototype._toArrayLikeBE=function(t,e){for(var i=t.length-1,r=0,n=0,s=0;n<this.length;n++){var o=this.words[n]<<s|r;t[i--]=255&o,i>=0&&(t[i--]=o>>8&255),i>=0&&(t[i--]=o>>16&255),6===s?(i>=0&&(t[i--]=o>>24&255),r=0,s=0):(r=o>>>24,s+=2)}if(i>=0)for(t[i--]=r;i>=0;)t[i--]=0},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this._strip()},s.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this._strip()},s.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this._strip()},s.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this._strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this._strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this._strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var g=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],v=8191&g,y=g>>>13,b=0|o[3],_=8191&b,x=b>>>13,w=0|o[4],M=8191&w,S=w>>>13,A=0|o[5],E=8191&A,T=A>>>13,R=0|o[6],P=8191&R,C=R>>>13,I=0|o[7],k=8191&I,B=I>>>13,O=0|o[8],L=8191&O,U=O>>>13,D=0|o[9],N=8191&D,F=D>>>13,z=0|a[0],G=8191&z,j=z>>>13,V=0|a[1],H=8191&V,W=V>>>13,X=0|a[2],q=8191&X,Y=X>>>13,Z=0|a[3],K=8191&Z,$=Z>>>13,Q=0|a[4],J=8191&Q,tt=Q>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(l+(r=Math.imul(c,G))|0)+((8191&(n=(n=Math.imul(c,j))+Math.imul(d,G)|0))<<13)|0;l=((s=Math.imul(d,j))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,G),n=(n=Math.imul(p,j))+Math.imul(m,G)|0,s=Math.imul(m,j);var vt=(l+(r=r+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,G),n=(n=Math.imul(v,j))+Math.imul(y,G)|0,s=Math.imul(y,j),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(m,H)|0,s=s+Math.imul(m,W)|0;var yt=(l+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(d,q)|0))<<13)|0;l=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,G),n=(n=Math.imul(_,j))+Math.imul(x,G)|0,s=Math.imul(x,j),r=r+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,W)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,Y)|0;var bt=(l+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,$)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,G),n=(n=Math.imul(M,j))+Math.imul(S,G)|0,s=Math.imul(S,j),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,W)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,W)|0,r=r+Math.imul(v,q)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(y,q)|0,s=s+Math.imul(y,Y)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var _t=(l+(r=r+Math.imul(c,J)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(d,J)|0))<<13)|0;l=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,G),n=(n=Math.imul(E,j))+Math.imul(T,G)|0,s=Math.imul(T,j),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,W)|0,r=r+Math.imul(_,q)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,Y)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(y,K)|0,s=s+Math.imul(y,$)|0,r=r+Math.imul(p,J)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,tt)|0;var xt=(l+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,it)|0))<<13)|0;l=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(P,G),n=(n=Math.imul(P,j))+Math.imul(C,G)|0,s=Math.imul(C,j),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,W)|0)+Math.imul(T,H)|0,s=s+Math.imul(T,W)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(S,q)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,$)|0,r=r+Math.imul(v,J)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var wt=(l+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(d,st)|0))<<13)|0;l=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(k,G),n=(n=Math.imul(k,j))+Math.imul(B,G)|0,s=Math.imul(B,j),r=r+Math.imul(P,H)|0,n=(n=n+Math.imul(P,W)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,W)|0,r=r+Math.imul(E,q)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,Y)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,$)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(y,it)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var Mt=(l+(r=r+Math.imul(c,ht)|0)|0)+((8191&(n=(n=n+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((s=s+Math.imul(d,lt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(L,G),n=(n=Math.imul(L,j))+Math.imul(U,G)|0,s=Math.imul(U,j),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(B,H)|0,s=s+Math.imul(B,W)|0,r=r+Math.imul(P,q)|0,n=(n=n+Math.imul(P,Y)|0)+Math.imul(C,q)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(x,it)|0,s=s+Math.imul(x,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(m,ht)|0,s=s+Math.imul(m,lt)|0;var St=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(N,G),n=(n=Math.imul(N,j))+Math.imul(F,G)|0,s=Math.imul(F,j),r=r+Math.imul(L,H)|0,n=(n=n+Math.imul(L,W)|0)+Math.imul(U,H)|0,s=s+Math.imul(U,W)|0,r=r+Math.imul(k,q)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(B,q)|0,s=s+Math.imul(B,Y)|0,r=r+Math.imul(P,K)|0,n=(n=n+Math.imul(P,$)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,$)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,r=r+Math.imul(v,ht)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,ht)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,dt)|0;var At=(l+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(d,pt)|0))<<13)|0;l=((s=s+Math.imul(d,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,H),n=(n=Math.imul(N,W))+Math.imul(F,H)|0,s=Math.imul(F,W),r=r+Math.imul(L,q)|0,n=(n=n+Math.imul(L,Y)|0)+Math.imul(U,q)|0,s=s+Math.imul(U,Y)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(B,K)|0,s=s+Math.imul(B,$)|0,r=r+Math.imul(P,J)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(C,J)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(_,ht)|0,n=(n=n+Math.imul(_,lt)|0)+Math.imul(x,ht)|0,s=s+Math.imul(x,lt)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,dt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,dt)|0;var Et=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(N,q),n=(n=Math.imul(N,Y))+Math.imul(F,q)|0,s=Math.imul(F,Y),r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,$)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(B,J)|0,s=s+Math.imul(B,tt)|0,r=r+Math.imul(P,it)|0,n=(n=n+Math.imul(P,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(M,ht)|0,n=(n=n+Math.imul(M,lt)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,lt)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,dt)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,dt)|0;var Tt=(l+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((s=s+Math.imul(y,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(N,K),n=(n=Math.imul(N,$))+Math.imul(F,K)|0,s=Math.imul(F,$),r=r+Math.imul(L,J)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(U,J)|0,s=s+Math.imul(U,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(B,it)|0,s=s+Math.imul(B,rt)|0,r=r+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(T,ht)|0,s=s+Math.imul(T,lt)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,dt)|0)+Math.imul(S,ct)|0,s=s+Math.imul(S,dt)|0;var Rt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(x,pt)|0))<<13)|0;l=((s=s+Math.imul(x,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,J),n=(n=Math.imul(N,tt))+Math.imul(F,J)|0,s=Math.imul(F,tt),r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(U,it)|0,s=s+Math.imul(U,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(B,st)|0,s=s+Math.imul(B,ot)|0,r=r+Math.imul(P,ht)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,lt)|0,r=r+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,dt)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,pt)|0))<<13)|0;l=((s=s+Math.imul(S,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(N,it),n=(n=Math.imul(N,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,r=r+Math.imul(k,ht)|0,n=(n=n+Math.imul(k,lt)|0)+Math.imul(B,ht)|0,s=s+Math.imul(B,lt)|0,r=r+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,dt)|0)+Math.imul(C,ct)|0,s=s+Math.imul(C,dt)|0;var Ct=(l+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,st),n=(n=Math.imul(N,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(L,ht)|0,n=(n=n+Math.imul(L,lt)|0)+Math.imul(U,ht)|0,s=s+Math.imul(U,lt)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,dt)|0)+Math.imul(B,ct)|0,s=s+Math.imul(B,dt)|0;var It=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,mt)|0)+Math.imul(C,pt)|0))<<13)|0;l=((s=s+Math.imul(C,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(N,ht),n=(n=Math.imul(N,lt))+Math.imul(F,ht)|0,s=Math.imul(F,lt),r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,dt)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,dt)|0;var kt=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(B,pt)|0))<<13)|0;l=((s=s+Math.imul(B,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,ct),n=(n=Math.imul(N,dt))+Math.imul(F,ct)|0,s=Math.imul(F,dt);var Bt=(l+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(U,pt)|0))<<13)|0;l=((s=s+Math.imul(U,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(l+(r=Math.imul(N,pt))|0)+((8191&(n=(n=Math.imul(N,mt))+Math.imul(F,pt)|0))<<13)|0;return l=((s=Math.imul(F,mt))+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,h[0]=gt,h[1]=vt,h[2]=yt,h[3]=bt,h[4]=_t,h[5]=xt,h[6]=wt,h[7]=Mt,h[8]=St,h[9]=At,h[10]=Et,h[11]=Tt,h[12]=Rt,h[13]=Pt,h[14]=Ct,h[15]=It,h[16]=kt,h[17]=Bt,h[18]=Ot,0!==l&&(h[19]=l,i.length++),i};function v(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=h;l++){var u=s-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i._strip()}function y(t,e,i){return v(t,e,i)}function b(t,e){this.x=t,this.y=e}Math.imul||(g=m),s.prototype.mulTo=function(t,e){var i=this.length+t.length;return 10===this.length&&10===t.length?g(this,t,e):i<63?m(this,t,e):i<1024?v(this,t,e):y(this,t,e)},b.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},b.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},b.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},b.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var c=h,d=l,f=0;f<o;f++){var p=i[u+f],m=r[u+f],g=i[u+f+o],v=r[u+f+o],y=c*g-d*v;v=c*v+d*g,g=y,i[u+f]=p+g,r[u+f]=m+v,i[u+f+o]=p-g,r[u+f+o]=m-v,f!==a&&(y=h*c-l*d,d=h*d+l*c,c=y)}},b.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},b.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},b.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},b.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(!(-8192&s))},b.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},b.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,s,a,h,r,n),this.transform(l,s,u,c,r,n);for(var f=0;f<r;f++){var p=a[f]*u[f]-h[f]*c[f];h[f]=a[f]*c[f]+h[f]*u[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i._strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),y(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){var e=t<0;e&&(t=-t),r("number"==typeof t),r(t<67108864);for(var i=0,n=0;n<this.length;n++){var s=(0|this.words[n])*t,o=(67108863&s)+(67108863&i);i>>=26,i+=s/67108864|0,i+=o>>>26,this.words[n]=67108863&o}return 0!==i&&(this.words[n]=i,this.length++),this.length=0===t?1:this.length,e?this.ineg():this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=t.words[r]>>>n&1}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this._strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var c=0|this.words[l];this.words[l]=u<<26-s|c>>>s,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this._strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this._strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<=t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this._strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this._strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this._strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,h);0===u.negative&&(r=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a._strip(),r._strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modrn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modrn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modrn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=(1<<26)%t,n=0,s=this.length-1;s>=0;s--)n=(i*n+(0|this.words[s]))%t;return e?-n:n},s.prototype.modn=function(t){return this.modrn(t)},s.prototype.idivn=function(t){var e=t<0;e&&(t=-t),r(t<=67108863);for(var i=0,n=this.length-1;n>=0;n--){var s=(0|this.words[n])+67108864*i;this.words[n]=s/t|0,i=s%t}return this._strip(),e?this.ineg():this},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var u=i.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0===(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(l)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,u=1;0===(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;0===(i.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this._strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new E(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var _={k256:null,p224:null,p192:null,p25519:null};function x(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function w(){x.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function M(){x.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function S(){x.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function A(){x.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function E(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function T(t){E.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}x.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},x.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},x.prototype.split=function(t,e){t.iushrn(this.n,0,e)},x.prototype.imulK=function(t){return t.imul(this.k)},n(w,x),w.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},w.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(M,x),n(S,x),n(A,x),A.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(_[t])return _[t];var e;if("k256"===t)e=new w;else if("p224"===t)e=new M;else if("p192"===t)e=new S;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new A}return _[t]=e,e},E.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},E.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},E.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):(u(t,t.umod(this.m)._forceRed(this)),t)},E.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},E.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},E.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},E.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},E.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},E.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},E.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},E.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},E.prototype.isqr=function(t){return this.imul(t,t.clone())},E.prototype.sqr=function(t){return this.mul(t,t)},E.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var v=this.pow(c,new s(1).iushln(p-g-1));d=d.redMul(v),c=v.redSqr(),f=f.redMul(c),p=g}return d},E.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},E.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4===++a||0===r&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},E.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},E.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new T(t)},n(T,E),T.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},T.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},T.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},T.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},T.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},8902:(t,e,i)=>{var r=i(8170),n=i(3209),s=i(7108),o=i(8206),a=i(2061),h=i(9404),l=i(9247),u=i(7332),c=i(2861).Buffer;t.exports=function(t,e,i){var d;d=t.padding?t.padding:i?1:4;var f,p=r(t);if(4===d)f=function(t,e){var i=t.modulus.byteLength(),r=e.length,l=s("sha1").update(c.alloc(0)).digest(),u=l.length,d=2*u;if(r>i-d-2)throw new Error("message too long");var f=c.alloc(i-r-d-2),p=i-u-1,m=n(u),g=a(c.concat([l,f,c.alloc(1,1),e],p),o(m,p)),v=a(m,o(g,u));return new h(c.concat([c.alloc(1),v,g],i))}(p,e);else if(1===d)f=function(t,e,i){var r,s=e.length,o=t.modulus.byteLength();if(s>o-11)throw new Error("message too long");return r=i?c.alloc(o-s-3,255):function(t){for(var e,i=c.allocUnsafe(t),r=0,s=n(2*t),o=0;r<t;)o===s.length&&(s=n(2*t),o=0),(e=s[o++])&&(i[r++]=e);return i}(o-s-3),new h(c.concat([c.from([0,i?1:2]),r,c.alloc(1),e],o))}(p,e,i);else{if(3!==d)throw new Error("unknown padding");if((f=new h(e)).cmp(p.modulus)>=0)throw new Error("data too long for modulus")}return i?u(f,p):l(f,p)}},8903:(t,e,i)=>{var r=i(6698),n=i(8287).Buffer,s=i(2010);function o(t){s.call(this,t),this.enc="pem"}r(o,s),t.exports=o,o.prototype.decode=function(t,e){for(var i=t.toString().split(/[\r\n]+/g),r=e.label.toUpperCase(),o=/^-----(BEGIN|END) ([^-]+)-----$/,a=-1,h=-1,l=0;l<i.length;l++){var u=i[l].match(o);if(null!==u&&u[2]===r){if(-1!==a){if("END"!==u[1])break;h=l;break}if("BEGIN"!==u[1])break;a=l}}if(-1===a||-1===h)throw new Error("PEM section not found for: "+r);var c=i.slice(a+1,h).join("");c.replace(/[^a-z0-9\+\/=]+/gi,"");var d=new n(c,"base64");return s.prototype.decode.call(this,d,e)}},8928:t=>{var e=1/0,i=/^\s+|\s+$/g,r=/^[-+]0x[0-9a-f]+$/i,n=/^0b[01]+$/i,s=/^0o[0-7]+$/i,o=parseInt,a=Object.prototype.toString;function h(t){var e=typeof t;return!!t&&("object"==e||"function"==e)}t.exports=function(t){return"number"==typeof t&&t==function(t){var l=function(t){return t?(t=function(t){if("number"==typeof t)return t;if(function(t){return"symbol"==typeof t||function(t){return!!t&&"object"==typeof t}(t)&&"[object Symbol]"==a.call(t)}(t))return NaN;if(h(t)){var e="function"==typeof t.valueOf?t.valueOf():t;t=h(e)?e+"":e}if("string"!=typeof t)return 0===t?t:+t;t=t.replace(i,"");var l=n.test(t);return l||s.test(t)?o(t.slice(2),l?2:8):r.test(t)?NaN:+t}(t))===e||t===-1/0?17976931348623157e292*(t<0?-1:1):t==t?t:0:0===t?t:0}(t),u=l%1;return l==l?u?l-u:l:0}(t)}},8948:(t,e,i)=>{var r=i(5606),n=i(2861).Buffer,s=i(8310);function o(t){if(this.buffer=null,this.writable=!0,this.readable=!0,!t)return this.buffer=n.alloc(0),this;if("function"==typeof t.pipe)return this.buffer=n.alloc(0),t.pipe(this),this;if(t.length||"object"==typeof t)return this.buffer=t,this.writable=!1,r.nextTick(function(){this.emit("end",t),this.readable=!1,this.emit("close")}.bind(this)),this;throw new TypeError("Unexpected data type ("+typeof t+")")}i(537).inherits(o,s),o.prototype.write=function(t){this.buffer=n.concat([this.buffer,n.from(t)]),this.emit("data",t)},o.prototype.end=function(t){t&&this.write(t),this.emit("end",t),this.emit("close"),this.writable=!1,this.readable=!1},t.exports=o},8961:(__unused_webpack_module,exports)=>{var indexOf=function(t,e){if(t.indexOf)return t.indexOf(e);for(var i=0;i<t.length;i++)if(t[i]===e)return i;return-1},Object_keys=function(t){if(Object.keys)return Object.keys(t);var e=[];for(var i in t)e.push(i);return e},forEach=function(t,e){if(t.forEach)return t.forEach(e);for(var i=0;i<t.length;i++)e(t[i],i,t)},defineProp=function(){try{return Object.defineProperty({},"_",{}),function(t,e,i){Object.defineProperty(t,e,{writable:!0,enumerable:!1,configurable:!0,value:i})}}catch(t){return function(t,e,i){t[e]=i}}}(),globals=["Array","Boolean","Date","Error","EvalError","Function","Infinity","JSON","Math","NaN","Number","Object","RangeError","ReferenceError","RegExp","String","SyntaxError","TypeError","URIError","decodeURI","decodeURIComponent","encodeURI","encodeURIComponent","escape","eval","isFinite","isNaN","parseFloat","parseInt","undefined","unescape"];function Context(){}Context.prototype={};var Script=exports.Script=function(t){if(!(this instanceof Script))return new Script(t);this.code=t};Script.prototype.runInContext=function(t){if(!(t instanceof Context))throw new TypeError("needs a 'context' argument.");var e=document.createElement("iframe");e.style||(e.style={}),e.style.display="none",document.body.appendChild(e);var i=e.contentWindow,r=i.eval,n=i.execScript;!r&&n&&(n.call(i,"null"),r=i.eval),forEach(Object_keys(t),function(e){i[e]=t[e]}),forEach(globals,function(e){t[e]&&(i[e]=t[e])});var s=Object_keys(i),o=r.call(i,this.code);return forEach(Object_keys(i),function(e){(e in t||-1===indexOf(s,e))&&(t[e]=i[e])}),forEach(globals,function(e){e in t||defineProp(t,e,i[e])}),document.body.removeChild(e),o},Script.prototype.runInThisContext=function(){return eval(this.code)},Script.prototype.runInNewContext=function(t){var e=Script.createContext(t),i=this.runInContext(e);return t&&forEach(Object_keys(e),function(i){t[i]=e[i]}),i},forEach(Object_keys(Script.prototype),function(t){exports[t]=Script[t]=function(e){var i=Script(e);return i[t].apply(i,[].slice.call(arguments,1))}}),exports.isContext=function(t){return t instanceof Context},exports.createScript=function(t){return exports.Script(t)},exports.createContext=Script.createContext=function(t){var e=new Context;return"object"==typeof t&&forEach(Object_keys(t),function(i){e[i]=t[i]}),e}},8968:t=>{"use strict";t.exports=Math.floor},8980:(t,e,i)=>{var r=i(1741),n=function(t,e){r.call(this,t),this.name="TokenExpiredError",this.expiredAt=e};(n.prototype=Object.create(r.prototype)).constructor=n,t.exports=n},9001:t=>{var e,i,r=Function.prototype,n=Object.prototype,s=r.toString,o=n.hasOwnProperty,a=s.call(Object),h=n.toString,l=(e=Object.getPrototypeOf,i=Object,function(t){return e(i(t))});t.exports=function(t){if(!function(t){return!!t&&"object"==typeof t}(t)||"[object Object]"!=h.call(t)||function(t){var e=!1;if(null!=t&&"function"!=typeof t.toString)try{e=!!(t+"")}catch(t){}return e}(t))return!1;var e=l(t);if(null===e)return!0;var i=o.call(e,"constructor")&&e.constructor;return"function"==typeof i&&i instanceof i&&s.call(i)==a}},9008:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t){return t}},9010:(t,e,i)=>{"use strict";var r=i(888),n=i(6970),s=i(1173),o=i(2233),a=i(4492),h=i(2927),l=i(9252);const u=class t{constructor(t,e){this.linkedSheets=[],this._texture=t instanceof a.g?t:null,this.textureSource=t.source,this.textures={},this.animations={},this.data=e;const i=parseFloat(e.meta.scale);i?(this.resolution=i,t.source.resolution=this.resolution):this.resolution=t.source._resolution,this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=t.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let i=e;const r=t.BATCH_SIZE;for(;i-e<r&&i<this._frameKeys.length;){const t=this._frameKeys[i],e=this._frames[t],r=e.frame;if(r){let i=null,n=null;const s=!1!==e.trimmed&&e.sourceSize?e.sourceSize:e.frame,o=new l.M(0,0,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution);i=e.rotated?new l.M(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.h)/this.resolution,Math.floor(r.w)/this.resolution):new l.M(Math.floor(r.x)/this.resolution,Math.floor(r.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution),!1!==e.trimmed&&e.spriteSourceSize&&(n=new l.M(Math.floor(e.spriteSourceSize.x)/this.resolution,Math.floor(e.spriteSourceSize.y)/this.resolution,Math.floor(r.w)/this.resolution,Math.floor(r.h)/this.resolution)),this.textures[t]=new a.g({source:this.textureSource,frame:i,orig:o,trim:n,rotate:e.rotated?2:0,defaultAnchor:e.anchor,defaultBorders:e.borders,label:t.toString()})}i++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let i=0;i<t[e].length;i++){const r=t[e][i];this.animations[e].push(this.textures[r])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*t.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*t.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){for(const t in this.textures)this.textures[t].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&(this._texture?.destroy(),this.textureSource.destroy()),this._texture=null,this.textureSource=null,this.linkedSheets=[]}};u.BATCH_SIZE=1e3;let c=u;const d=["jpg","png","jpeg","avif","webp","basis","etc2","bc7","bc6h","bc5","bc4","bc3","bc2","bc1","eac","astc"];function f(t,e,i){const r={};if(t.forEach(t=>{r[t]=e}),Object.keys(e.textures).forEach(t=>{r[t]=e.textures[t]}),!i){const i=h.A.dirname(t[0]);e.linkedSheets.forEach((t,n)=>{const s=f([`${i}/${e.data.meta.related_multi_packs[n]}`],t,!0);Object.assign(r,s)})}return r}const p={extension:r.Ag.Asset,cache:{test:t=>t instanceof c,getCacheableAssets:(t,e)=>f(t,e,!1)},resolver:{extension:{type:r.Ag.ResolveParser,name:"resolveSpritesheet"},test:t=>{const e=t.split("?")[0].split("."),i=e.pop(),r=e.pop();return"json"===i&&d.includes(r)},parse:t=>{const e=t.split(".");return{resolution:parseFloat(s.x.RETINA_PREFIX.exec(t)?.[1]??"1"),format:e[e.length-2],src:t}}},loader:{name:"spritesheetLoader",extension:{type:r.Ag.LoadParser,priority:n.T.Normal,name:"spritesheetLoader"},testParse:async(t,e)=>".json"===h.A.extname(e.src).toLowerCase()&&!!t.frames,async parse(t,e,i){const{texture:r,imageFilename:n,textureOptions:s}=e?.data??{};let l,u=h.A.dirname(e.src);if(u&&u.lastIndexOf("/")!==u.length-1&&(u+="/"),r instanceof a.g)l=r;else{const r=(0,o.Y)(u+(n??t.meta.image),e.src);l=(await i.load([{src:r,data:s}]))[r]}const d=new c(l.source,t);await d.parse();const f=t?.meta?.related_multi_packs;if(Array.isArray(f)){const t=[];for(const r of f){if("string"!=typeof r)continue;let n=u+r;e.data?.ignoreMultiPack||(n=(0,o.Y)(n,e.src),t.push(i.load({src:n,data:{ignoreMultiPack:!0}})))}const r=await Promise.all(t);d.linkedSheets=r,r.forEach(t=>{t.linkedSheets=[d].concat(d.linkedSheets.filter(e=>e!==t))})}return d},async unload(t,e,i){await i.unload(t.textureSource._sourceOrigin),t.destroy(!1)}}};r.XO.add(p)},9032:(t,e,i)=>{"use strict";var r=i(7244),n=i(8184),s=i(5767),o=i(5680);function a(t){return t.call.bind(t)}var h="undefined"!=typeof BigInt,l="undefined"!=typeof Symbol,u=a(Object.prototype.toString),c=a(Number.prototype.valueOf),d=a(String.prototype.valueOf),f=a(Boolean.prototype.valueOf);if(h)var p=a(BigInt.prototype.valueOf);if(l)var m=a(Symbol.prototype.valueOf);function g(t,e){if("object"!=typeof t)return!1;try{return e(t),!0}catch(t){return!1}}function v(t){return"[object Map]"===u(t)}function y(t){return"[object Set]"===u(t)}function b(t){return"[object WeakMap]"===u(t)}function _(t){return"[object WeakSet]"===u(t)}function x(t){return"[object ArrayBuffer]"===u(t)}function w(t){return"undefined"!=typeof ArrayBuffer&&(x.working?x(t):t instanceof ArrayBuffer)}function M(t){return"[object DataView]"===u(t)}function S(t){return"undefined"!=typeof DataView&&(M.working?M(t):t instanceof DataView)}e.isArgumentsObject=r,e.isGeneratorFunction=n,e.isTypedArray=o,e.isPromise=function(t){return"undefined"!=typeof Promise&&t instanceof Promise||null!==t&&"object"==typeof t&&"function"==typeof t.then&&"function"==typeof t.catch},e.isArrayBufferView=function(t){return"undefined"!=typeof ArrayBuffer&&ArrayBuffer.isView?ArrayBuffer.isView(t):o(t)||S(t)},e.isUint8Array=function(t){return"Uint8Array"===s(t)},e.isUint8ClampedArray=function(t){return"Uint8ClampedArray"===s(t)},e.isUint16Array=function(t){return"Uint16Array"===s(t)},e.isUint32Array=function(t){return"Uint32Array"===s(t)},e.isInt8Array=function(t){return"Int8Array"===s(t)},e.isInt16Array=function(t){return"Int16Array"===s(t)},e.isInt32Array=function(t){return"Int32Array"===s(t)},e.isFloat32Array=function(t){return"Float32Array"===s(t)},e.isFloat64Array=function(t){return"Float64Array"===s(t)},e.isBigInt64Array=function(t){return"BigInt64Array"===s(t)},e.isBigUint64Array=function(t){return"BigUint64Array"===s(t)},v.working="undefined"!=typeof Map&&v(new Map),e.isMap=function(t){return"undefined"!=typeof Map&&(v.working?v(t):t instanceof Map)},y.working="undefined"!=typeof Set&&y(new Set),e.isSet=function(t){return"undefined"!=typeof Set&&(y.working?y(t):t instanceof Set)},b.working="undefined"!=typeof WeakMap&&b(new WeakMap),e.isWeakMap=function(t){return"undefined"!=typeof WeakMap&&(b.working?b(t):t instanceof WeakMap)},_.working="undefined"!=typeof WeakSet&&_(new WeakSet),e.isWeakSet=function(t){return _(t)},x.working="undefined"!=typeof ArrayBuffer&&x(new ArrayBuffer),e.isArrayBuffer=w,M.working="undefined"!=typeof ArrayBuffer&&"undefined"!=typeof DataView&&M(new DataView(new ArrayBuffer(1),0,1)),e.isDataView=S;var A="undefined"!=typeof SharedArrayBuffer?SharedArrayBuffer:void 0;function E(t){return"[object SharedArrayBuffer]"===u(t)}function T(t){return void 0!==A&&(void 0===E.working&&(E.working=E(new A)),E.working?E(t):t instanceof A)}function R(t){return g(t,c)}function P(t){return g(t,d)}function C(t){return g(t,f)}function I(t){return h&&g(t,p)}function k(t){return l&&g(t,m)}e.isSharedArrayBuffer=T,e.isAsyncFunction=function(t){return"[object AsyncFunction]"===u(t)},e.isMapIterator=function(t){return"[object Map Iterator]"===u(t)},e.isSetIterator=function(t){return"[object Set Iterator]"===u(t)},e.isGeneratorObject=function(t){return"[object Generator]"===u(t)},e.isWebAssemblyCompiledModule=function(t){return"[object WebAssembly.Module]"===u(t)},e.isNumberObject=R,e.isStringObject=P,e.isBooleanObject=C,e.isBigIntObject=I,e.isSymbolObject=k,e.isBoxedPrimitive=function(t){return R(t)||P(t)||C(t)||I(t)||k(t)},e.isAnyArrayBuffer=function(t){return"undefined"!=typeof Uint8Array&&(w(t)||T(t))},["isProxy","isExternal","isModuleNamespaceObject"].forEach(function(t){Object.defineProperty(e,t,{enumerable:!1,value:function(){throw new Error(t+" is not supported in userland")}})})},9042:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(3831),n=i(6489),s=i(7422);const o=function(t){return(0,r.A)(t,s.A,n.A)}},9049:(t,e,i)=>{"use strict";i.d(e,{a:()=>r});class r{constructor(){this.pipe="filter",this.priority=1}destroy(){for(let t=0;t<this.filters.length;t++)this.filters[t].destroy();this.filters=null,this.filterArea=null}}},9092:(t,e,i)=>{"use strict";var r=i(1333);t.exports=function(){return r()&&!!Symbol.toStringTag}},9113:(t,e,i)=>{"use strict";i.d(e,{M:()=>d});var r=i(5571),n=i(3804);let s;function o(){if(!s){s="mediump";const t=(0,n.W)();if(t&&t.getShaderPrecisionFormat){const e=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT);s=e.precision?"highp":"mediump"}}return s}const a={},h={},l={stripVersion:function(t,e){return e?t.replace("#version 300 es",""):t},ensurePrecision:function(t,e,i){const r=i?e.maxSupportedFragmentPrecision:e.maxSupportedVertexPrecision;if("precision"!==t.substring(0,9)){let n=i?e.requestedFragmentPrecision:e.requestedVertexPrecision;return"highp"===n&&"highp"!==r&&(n="mediump"),`precision ${n} float;\n${t}`}return"highp"!==r&&"precision highp"===t.substring(0,15)?t.replace("precision highp","precision mediump"):t},addProgramDefines:function(t,e,i){return e?t:i?`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${t=t.replace("out vec4 finalColor;","")}\n        `:`\n        \n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${t}\n        `},setProgramName:function(t,{name:e="pixi-program"},i=!0){e=e.replace(/\s+/g,"-");const r=i?a:h;return r[e+=i?"-fragment":"-vertex"]?(r[e]++,e+=`-${r[e]}`):r[e]=1,-1!==t.indexOf("#define SHADER_NAME")?t:`#define SHADER_NAME ${e}\n${t}`},insertVersion:function(t,e){return e?`#version 300 es\n${t}`:t}},u=Object.create(null),c=class t{constructor(e){const i=-1!==(e={...t.defaultOptions,...e}).fragment.indexOf("#version 300 es"),n={stripVersion:i,ensurePrecision:{requestedFragmentPrecision:e.preferredFragmentPrecision,requestedVertexPrecision:e.preferredVertexPrecision,maxSupportedVertexPrecision:"highp",maxSupportedFragmentPrecision:o()},setProgramName:{name:e.name},addProgramDefines:i,insertVersion:i};let s=e.fragment,a=e.vertex;Object.keys(l).forEach(t=>{const e=n[t];s=l[t](s,e,!0),a=l[t](a,e,!1)}),this.fragment=s,this.vertex=a,this.transformFeedbackVaryings=e.transformFeedbackVaryings,this._key=(0,r.X)(`${this.vertex}:${this.fragment}`,"gl-program")}destroy(){this.fragment=null,this.vertex=null,this._attributeData=null,this._uniformData=null,this._uniformBlockData=null,this.transformFeedbackVaryings=null}static from(e){const i=`${e.vertex}:${e.fragment}`;return u[i]||(u[i]=new t(e)),u[i]}};c.defaultOptions={preferredVertexPrecision:"highp",preferredFragmentPrecision:"mediump"};let d=c},9133:(t,e,i)=>{"use strict";var r=i(8403);t.exports=function(){return Object.assign?function(){if(!Object.assign)return!1;for(var t="abcdefghijklmnopqrst",e=t.split(""),i={},r=0;r<e.length;++r)i[e[r]]=e[r];var n=Object.assign({},i),s="";for(var o in n)s+=o;return t!==s}()||function(){if(!Object.assign||!Object.preventExtensions)return!1;var t=Object.preventExtensions({1:2});try{Object.assign(t,"xy")}catch(e){return"y"===t[1]}return!1}()?r:Object.assign:r}},9188:(t,e,i)=>{"use strict";var r=i(7011),n=i(9404),s=i(6698),o=i(6677),a=r.assert;function h(t){o.call(this,"short",t),this.a=new n(t.a,16).toRed(this.red),this.b=new n(t.b,16).toRed(this.red),this.tinv=this.two.redInvm(),this.zeroA=0===this.a.fromRed().cmpn(0),this.threeA=0===this.a.fromRed().sub(this.p).cmpn(-3),this.endo=this._getEndomorphism(t),this._endoWnafT1=new Array(4),this._endoWnafT2=new Array(4)}function l(t,e,i,r){o.BasePoint.call(this,t,"affine"),null===e&&null===i?(this.x=null,this.y=null,this.inf=!0):(this.x=new n(e,16),this.y=new n(i,16),r&&(this.x.forceRed(this.curve.red),this.y.forceRed(this.curve.red)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.inf=!1)}function u(t,e,i,r){o.BasePoint.call(this,t,"jacobian"),null===e&&null===i&&null===r?(this.x=this.curve.one,this.y=this.curve.one,this.z=new n(0)):(this.x=new n(e,16),this.y=new n(i,16),this.z=new n(r,16)),this.x.red||(this.x=this.x.toRed(this.curve.red)),this.y.red||(this.y=this.y.toRed(this.curve.red)),this.z.red||(this.z=this.z.toRed(this.curve.red)),this.zOne=this.z===this.curve.one}s(h,o),t.exports=h,h.prototype._getEndomorphism=function(t){if(this.zeroA&&this.g&&this.n&&1===this.p.modn(3)){var e,i;if(t.beta)e=new n(t.beta,16).toRed(this.red);else{var r=this._getEndoRoots(this.p);e=(e=r[0].cmp(r[1])<0?r[0]:r[1]).toRed(this.red)}if(t.lambda)i=new n(t.lambda,16);else{var s=this._getEndoRoots(this.n);0===this.g.mul(s[0]).x.cmp(this.g.x.redMul(e))?i=s[0]:(i=s[1],a(0===this.g.mul(i).x.cmp(this.g.x.redMul(e))))}return{beta:e,lambda:i,basis:t.basis?t.basis.map(function(t){return{a:new n(t.a,16),b:new n(t.b,16)}}):this._getEndoBasis(i)}}},h.prototype._getEndoRoots=function(t){var e=t===this.p?this.red:n.mont(t),i=new n(2).toRed(e).redInvm(),r=i.redNeg(),s=new n(3).toRed(e).redNeg().redSqrt().redMul(i);return[r.redAdd(s).fromRed(),r.redSub(s).fromRed()]},h.prototype._getEndoBasis=function(t){for(var e,i,r,s,o,a,h,l,u,c=this.n.ushrn(Math.floor(this.n.bitLength()/2)),d=t,f=this.n.clone(),p=new n(1),m=new n(0),g=new n(0),v=new n(1),y=0;0!==d.cmpn(0);){var b=f.div(d);l=f.sub(b.mul(d)),u=g.sub(b.mul(p));var _=v.sub(b.mul(m));if(!r&&l.cmp(c)<0)e=h.neg(),i=p,r=l.neg(),s=u;else if(r&&2===++y)break;h=l,f=d,d=l,g=p,p=u,v=m,m=_}o=l.neg(),a=u;var x=r.sqr().add(s.sqr());return o.sqr().add(a.sqr()).cmp(x)>=0&&(o=e,a=i),r.negative&&(r=r.neg(),s=s.neg()),o.negative&&(o=o.neg(),a=a.neg()),[{a:r,b:s},{a:o,b:a}]},h.prototype._endoSplit=function(t){var e=this.endo.basis,i=e[0],r=e[1],n=r.b.mul(t).divRound(this.n),s=i.b.neg().mul(t).divRound(this.n),o=n.mul(i.a),a=s.mul(r.a),h=n.mul(i.b),l=s.mul(r.b);return{k1:t.sub(o).sub(a),k2:h.add(l).neg()}},h.prototype.pointFromX=function(t,e){(t=new n(t,16)).red||(t=t.toRed(this.red));var i=t.redSqr().redMul(t).redIAdd(t.redMul(this.a)).redIAdd(this.b),r=i.redSqrt();if(0!==r.redSqr().redSub(i).cmp(this.zero))throw new Error("invalid point");var s=r.fromRed().isOdd();return(e&&!s||!e&&s)&&(r=r.redNeg()),this.point(t,r)},h.prototype.validate=function(t){if(t.inf)return!0;var e=t.x,i=t.y,r=this.a.redMul(e),n=e.redSqr().redMul(e).redIAdd(r).redIAdd(this.b);return 0===i.redSqr().redISub(n).cmpn(0)},h.prototype._endoWnafMulAdd=function(t,e,i){for(var r=this._endoWnafT1,n=this._endoWnafT2,s=0;s<t.length;s++){var o=this._endoSplit(e[s]),a=t[s],h=a._getBeta();o.k1.negative&&(o.k1.ineg(),a=a.neg(!0)),o.k2.negative&&(o.k2.ineg(),h=h.neg(!0)),r[2*s]=a,r[2*s+1]=h,n[2*s]=o.k1,n[2*s+1]=o.k2}for(var l=this._wnafMulAdd(1,r,n,2*s,i),u=0;u<2*s;u++)r[u]=null,n[u]=null;return l},s(l,o.BasePoint),h.prototype.point=function(t,e,i){return new l(this,t,e,i)},h.prototype.pointFromJSON=function(t,e){return l.fromJSON(this,t,e)},l.prototype._getBeta=function(){if(this.curve.endo){var t=this.precomputed;if(t&&t.beta)return t.beta;var e=this.curve.point(this.x.redMul(this.curve.endo.beta),this.y);if(t){var i=this.curve,r=function(t){return i.point(t.x.redMul(i.endo.beta),t.y)};t.beta=e,e.precomputed={beta:null,naf:t.naf&&{wnd:t.naf.wnd,points:t.naf.points.map(r)},doubles:t.doubles&&{step:t.doubles.step,points:t.doubles.points.map(r)}}}return e}},l.prototype.toJSON=function(){return this.precomputed?[this.x,this.y,this.precomputed&&{doubles:this.precomputed.doubles&&{step:this.precomputed.doubles.step,points:this.precomputed.doubles.points.slice(1)},naf:this.precomputed.naf&&{wnd:this.precomputed.naf.wnd,points:this.precomputed.naf.points.slice(1)}}]:[this.x,this.y]},l.fromJSON=function(t,e,i){"string"==typeof e&&(e=JSON.parse(e));var r=t.point(e[0],e[1],i);if(!e[2])return r;function n(e){return t.point(e[0],e[1],i)}var s=e[2];return r.precomputed={beta:null,doubles:s.doubles&&{step:s.doubles.step,points:[r].concat(s.doubles.points.map(n))},naf:s.naf&&{wnd:s.naf.wnd,points:[r].concat(s.naf.points.map(n))}},r},l.prototype.inspect=function(){return this.isInfinity()?"<EC Point Infinity>":"<EC Point x: "+this.x.fromRed().toString(16,2)+" y: "+this.y.fromRed().toString(16,2)+">"},l.prototype.isInfinity=function(){return this.inf},l.prototype.add=function(t){if(this.inf)return t;if(t.inf)return this;if(this.eq(t))return this.dbl();if(this.neg().eq(t))return this.curve.point(null,null);if(0===this.x.cmp(t.x))return this.curve.point(null,null);var e=this.y.redSub(t.y);0!==e.cmpn(0)&&(e=e.redMul(this.x.redSub(t.x).redInvm()));var i=e.redSqr().redISub(this.x).redISub(t.x),r=e.redMul(this.x.redSub(i)).redISub(this.y);return this.curve.point(i,r)},l.prototype.dbl=function(){if(this.inf)return this;var t=this.y.redAdd(this.y);if(0===t.cmpn(0))return this.curve.point(null,null);var e=this.curve.a,i=this.x.redSqr(),r=t.redInvm(),n=i.redAdd(i).redIAdd(i).redIAdd(e).redMul(r),s=n.redSqr().redISub(this.x.redAdd(this.x)),o=n.redMul(this.x.redSub(s)).redISub(this.y);return this.curve.point(s,o)},l.prototype.getX=function(){return this.x.fromRed()},l.prototype.getY=function(){return this.y.fromRed()},l.prototype.mul=function(t){return t=new n(t,16),this.isInfinity()?this:this._hasDoubles(t)?this.curve._fixedNafMul(this,t):this.curve.endo?this.curve._endoWnafMulAdd([this],[t]):this.curve._wnafMul(this,t)},l.prototype.mulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n):this.curve._wnafMulAdd(1,r,n,2)},l.prototype.jmulAdd=function(t,e,i){var r=[this,e],n=[t,i];return this.curve.endo?this.curve._endoWnafMulAdd(r,n,!0):this.curve._wnafMulAdd(1,r,n,2,!0)},l.prototype.eq=function(t){return this===t||this.inf===t.inf&&(this.inf||0===this.x.cmp(t.x)&&0===this.y.cmp(t.y))},l.prototype.neg=function(t){if(this.inf)return this;var e=this.curve.point(this.x,this.y.redNeg());if(t&&this.precomputed){var i=this.precomputed,r=function(t){return t.neg()};e.precomputed={naf:i.naf&&{wnd:i.naf.wnd,points:i.naf.points.map(r)},doubles:i.doubles&&{step:i.doubles.step,points:i.doubles.points.map(r)}}}return e},l.prototype.toJ=function(){return this.inf?this.curve.jpoint(null,null,null):this.curve.jpoint(this.x,this.y,this.curve.one)},s(u,o.BasePoint),h.prototype.jpoint=function(t,e,i){return new u(this,t,e,i)},u.prototype.toP=function(){if(this.isInfinity())return this.curve.point(null,null);var t=this.z.redInvm(),e=t.redSqr(),i=this.x.redMul(e),r=this.y.redMul(e).redMul(t);return this.curve.point(i,r)},u.prototype.neg=function(){return this.curve.jpoint(this.x,this.y.redNeg(),this.z)},u.prototype.add=function(t){if(this.isInfinity())return t;if(t.isInfinity())return this;var e=t.z.redSqr(),i=this.z.redSqr(),r=this.x.redMul(e),n=t.x.redMul(i),s=this.y.redMul(e.redMul(t.z)),o=t.y.redMul(i.redMul(this.z)),a=r.redSub(n),h=s.redSub(o);if(0===a.cmpn(0))return 0!==h.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var l=a.redSqr(),u=l.redMul(a),c=r.redMul(l),d=h.redSqr().redIAdd(u).redISub(c).redISub(c),f=h.redMul(c.redISub(d)).redISub(s.redMul(u)),p=this.z.redMul(t.z).redMul(a);return this.curve.jpoint(d,f,p)},u.prototype.mixedAdd=function(t){if(this.isInfinity())return t.toJ();if(t.isInfinity())return this;var e=this.z.redSqr(),i=this.x,r=t.x.redMul(e),n=this.y,s=t.y.redMul(e).redMul(this.z),o=i.redSub(r),a=n.redSub(s);if(0===o.cmpn(0))return 0!==a.cmpn(0)?this.curve.jpoint(null,null,null):this.dbl();var h=o.redSqr(),l=h.redMul(o),u=i.redMul(h),c=a.redSqr().redIAdd(l).redISub(u).redISub(u),d=a.redMul(u.redISub(c)).redISub(n.redMul(l)),f=this.z.redMul(o);return this.curve.jpoint(c,d,f)},u.prototype.dblp=function(t){if(0===t)return this;if(this.isInfinity())return this;if(!t)return this.dbl();var e;if(this.curve.zeroA||this.curve.threeA){var i=this;for(e=0;e<t;e++)i=i.dbl();return i}var r=this.curve.a,n=this.curve.tinv,s=this.x,o=this.y,a=this.z,h=a.redSqr().redSqr(),l=o.redAdd(o);for(e=0;e<t;e++){var u=s.redSqr(),c=l.redSqr(),d=c.redSqr(),f=u.redAdd(u).redIAdd(u).redIAdd(r.redMul(h)),p=s.redMul(c),m=f.redSqr().redISub(p.redAdd(p)),g=p.redISub(m),v=f.redMul(g);v=v.redIAdd(v).redISub(d);var y=l.redMul(a);e+1<t&&(h=h.redMul(d)),s=m,a=y,l=v}return this.curve.jpoint(s,l.redMul(n),a)},u.prototype.dbl=function(){return this.isInfinity()?this:this.curve.zeroA?this._zeroDbl():this.curve.threeA?this._threeDbl():this._dbl()},u.prototype._zeroDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r),h=a.redSqr().redISub(o).redISub(o),l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),t=h,e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{var u=this.x.redSqr(),c=this.y.redSqr(),d=c.redSqr(),f=this.x.redAdd(c).redSqr().redISub(u).redISub(d);f=f.redIAdd(f);var p=u.redAdd(u).redIAdd(u),m=p.redSqr(),g=d.redIAdd(d);g=(g=g.redIAdd(g)).redIAdd(g),t=m.redISub(f).redISub(f),e=p.redMul(f.redISub(t)).redISub(g),i=(i=this.y.redMul(this.z)).redIAdd(i)}return this.curve.jpoint(t,e,i)},u.prototype._threeDbl=function(){var t,e,i;if(this.zOne){var r=this.x.redSqr(),n=this.y.redSqr(),s=n.redSqr(),o=this.x.redAdd(n).redSqr().redISub(r).redISub(s);o=o.redIAdd(o);var a=r.redAdd(r).redIAdd(r).redIAdd(this.curve.a),h=a.redSqr().redISub(o).redISub(o);t=h;var l=s.redIAdd(s);l=(l=l.redIAdd(l)).redIAdd(l),e=a.redMul(o.redISub(h)).redISub(l),i=this.y.redAdd(this.y)}else{var u=this.z.redSqr(),c=this.y.redSqr(),d=this.x.redMul(c),f=this.x.redSub(u).redMul(this.x.redAdd(u));f=f.redAdd(f).redIAdd(f);var p=d.redIAdd(d),m=(p=p.redIAdd(p)).redAdd(p);t=f.redSqr().redISub(m),i=this.y.redAdd(this.z).redSqr().redISub(c).redISub(u);var g=c.redSqr();g=(g=(g=g.redIAdd(g)).redIAdd(g)).redIAdd(g),e=f.redMul(p.redISub(t)).redISub(g)}return this.curve.jpoint(t,e,i)},u.prototype._dbl=function(){var t=this.curve.a,e=this.x,i=this.y,r=this.z,n=r.redSqr().redSqr(),s=e.redSqr(),o=i.redSqr(),a=s.redAdd(s).redIAdd(s).redIAdd(t.redMul(n)),h=e.redAdd(e),l=(h=h.redIAdd(h)).redMul(o),u=a.redSqr().redISub(l.redAdd(l)),c=l.redISub(u),d=o.redSqr();d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=a.redMul(c).redISub(d),p=i.redAdd(i).redMul(r);return this.curve.jpoint(u,f,p)},u.prototype.trpl=function(){if(!this.curve.zeroA)return this.dbl().add(this);var t=this.x.redSqr(),e=this.y.redSqr(),i=this.z.redSqr(),r=e.redSqr(),n=t.redAdd(t).redIAdd(t),s=n.redSqr(),o=this.x.redAdd(e).redSqr().redISub(t).redISub(r),a=(o=(o=(o=o.redIAdd(o)).redAdd(o).redIAdd(o)).redISub(s)).redSqr(),h=r.redIAdd(r);h=(h=(h=h.redIAdd(h)).redIAdd(h)).redIAdd(h);var l=n.redIAdd(o).redSqr().redISub(s).redISub(a).redISub(h),u=e.redMul(l);u=(u=u.redIAdd(u)).redIAdd(u);var c=this.x.redMul(a).redISub(u);c=(c=c.redIAdd(c)).redIAdd(c);var d=this.y.redMul(l.redMul(h.redISub(l)).redISub(o.redMul(a)));d=(d=(d=d.redIAdd(d)).redIAdd(d)).redIAdd(d);var f=this.z.redAdd(o).redSqr().redISub(i).redISub(a);return this.curve.jpoint(c,d,f)},u.prototype.mul=function(t,e){return t=new n(t,e),this.curve._wnafMul(this,t)},u.prototype.eq=function(t){if("affine"===t.type)return this.eq(t.toJ());if(this===t)return!0;var e=this.z.redSqr(),i=t.z.redSqr();if(0!==this.x.redMul(i).redISub(t.x.redMul(e)).cmpn(0))return!1;var r=e.redMul(this.z),n=i.redMul(t.z);return 0===this.y.redMul(n).redISub(t.y.redMul(r)).cmpn(0)},u.prototype.eqXToP=function(t){var e=this.z.redSqr(),i=t.toRed(this.curve.red).redMul(e);if(0===this.x.cmp(i))return!0;for(var r=t.clone(),n=this.curve.redN.redMul(e);;){if(r.iadd(this.curve.n),r.cmp(this.curve.p)>=0)return!1;if(i.redIAdd(n),0===this.x.cmp(i))return!0}},u.prototype.inspect=function(){return this.isInfinity()?"<EC JPoint Infinity>":"<EC JPoint x: "+this.x.toString(16,2)+" y: "+this.y.toString(16,2)+" z: "+this.z.toString(16,2)+">"},u.prototype.isInfinity=function(){return 0===this.z.cmpn(0)}},9209:(t,e,i)=>{"use strict";var r=i(6578),n="undefined"==typeof globalThis?i.g:globalThis;t.exports=function(){for(var t=[],e=0;e<r.length;e++)"function"==typeof n[r[e]]&&(t[t.length]=r[e]);return t}},9211:t=>{"use strict";var e=function(t){return t!=t};t.exports=function(t,i){return 0===t&&0===i?1/t==1/i:t===i||!(!e(t)||!e(i))}},9220:(t,e,i)=>{var r=i(6698);function n(t){this._reporterState={obj:null,path:[],options:t||{},errors:[]}}function s(t,e){this.path=t,this.rethrow(e)}e.a=n,n.prototype.isError=function(t){return t instanceof s},n.prototype.save=function(){var t=this._reporterState;return{obj:t.obj,pathLen:t.path.length}},n.prototype.restore=function(t){var e=this._reporterState;e.obj=t.obj,e.path=e.path.slice(0,t.pathLen)},n.prototype.enterKey=function(t){return this._reporterState.path.push(t)},n.prototype.exitKey=function(t){var e=this._reporterState;e.path=e.path.slice(0,t-1)},n.prototype.leaveKey=function(t,e,i){var r=this._reporterState;this.exitKey(t),null!==r.obj&&(r.obj[e]=i)},n.prototype.path=function(){return this._reporterState.path.join("/")},n.prototype.enterObject=function(){var t=this._reporterState,e=t.obj;return t.obj={},e},n.prototype.leaveObject=function(t){var e=this._reporterState,i=e.obj;return e.obj=t,i},n.prototype.error=function(t){var e,i=this._reporterState,r=t instanceof s;if(e=r?t:new s(i.path.map(function(t){return"["+JSON.stringify(t)+"]"}).join(""),t.message||t,t.stack),!i.options.partial)throw e;return r||i.errors.push(e),e},n.prototype.wrapResult=function(t){var e=this._reporterState;return e.options.partial?{result:this.isError(t)?null:t,errors:e.errors}:t},r(s,Error),s.prototype.rethrow=function(t){if(this.message=t+" at: "+(this.path||"(shallow)"),Error.captureStackTrace&&Error.captureStackTrace(this,s),!this.stack)try{throw new Error(this.message)}catch(t){this.stack=t.stack}return this}},9247:(t,e,i)=>{var r=i(9404),n=i(2861).Buffer;t.exports=function(t,e){return n.from(t.toRed(r.mont(e.modulus)).redPow(new r(e.publicExponent)).fromRed().toArray())}},9252:(t,e,i)=>{"use strict";i.d(e,{M:()=>s});var r=i(5101);const n=[new r.b,new r.b,new r.b,new r.b];class s{constructor(t=0,e=0,i=0,r=0){this.type="rectangle",this.x=Number(t),this.y=Number(e),this.width=Number(i),this.height=Number(r)}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}isEmpty(){return this.left===this.right||this.top===this.bottom}static get EMPTY(){return new s(0,0,0,0)}clone(){return new s(this.x,this.y,this.width,this.height)}copyFromBounds(t){return this.x=t.minX,this.y=t.minY,this.width=t.maxX-t.minX,this.height=t.maxY-t.minY,this}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.copyFrom(this),t}contains(t,e){return!(this.width<=0||this.height<=0)&&t>=this.x&&t<this.x+this.width&&e>=this.y&&e<this.y+this.height}strokeContains(t,e,i,r=.5){const{width:n,height:s}=this;if(n<=0||s<=0)return!1;const o=this.x,a=this.y,h=i*(1-r),l=i-h;return t>=o-h&&t<=o+n+h&&e>=a-h&&e<=a+s+h&&!(t>o+l&&t<o+n-l&&e>a+l&&e<a+s-l)}intersects(t,e){if(!e){const e=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=e)return!1;const i=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>i}const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=n[0].set(t.left,t.top),h=n[1].set(t.left,t.bottom),l=n[2].set(t.right,t.top),u=n[3].set(t.right,t.bottom);if(l.x<=a.x||h.y<=a.y)return!1;const c=Math.sign(e.a*e.d-e.b*e.c);if(0===c)return!1;if(e.apply(a,a),e.apply(h,h),e.apply(l,l),e.apply(u,u),Math.max(a.x,h.x,l.x,u.x)<=i||Math.min(a.x,h.x,l.x,u.x)>=r||Math.max(a.y,h.y,l.y,u.y)<=s||Math.min(a.y,h.y,l.y,u.y)>=o)return!1;const d=c*(h.y-a.y),f=c*(a.x-h.x),p=d*i+f*s,m=d*r+f*s,g=d*i+f*o,v=d*r+f*o;if(Math.max(p,m,g,v)<=d*a.x+f*a.y||Math.min(p,m,g,v)>=d*u.x+f*u.y)return!1;const y=c*(a.y-l.y),b=c*(l.x-a.x),_=y*i+b*s,x=y*r+b*s,w=y*i+b*o,M=y*r+b*o;return!(Math.max(_,x,w,M)<=y*a.x+b*a.y||Math.min(_,x,w,M)>=y*u.x+b*u.y)}pad(t=0,e=t){return this.x-=t,this.y-=e,this.width+=2*t,this.height+=2*e,this}fit(t){const e=Math.max(this.x,t.x),i=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),n=Math.min(this.y+this.height,t.y+t.height);return this.x=e,this.width=Math.max(i-e,0),this.y=r,this.height=Math.max(n-r,0),this}ceil(t=1,e=.001){const i=Math.ceil((this.x+this.width-e)*t)/t,r=Math.ceil((this.y+this.height-e)*t)/t;return this.x=Math.floor((this.x+e)*t)/t,this.y=Math.floor((this.y+e)*t)/t,this.width=i-this.x,this.height=r-this.y,this}enlarge(t){const e=Math.min(this.x,t.x),i=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),n=Math.max(this.y+this.height,t.y+t.height);return this.x=e,this.width=i-e,this.y=r,this.height=n-r,this}getBounds(t){return t||(t=new s),t.copyFrom(this),t}toString(){return`[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}},9290:t=>{"use strict";t.exports=RangeError},9313:(t,e,i)=>{"use strict";i.d(e,{u:()=>s});var r=i(1652),n=i(5101);class s{constructor(t=1,e=0,i=0,r=1,n=0,s=0){this.array=null,this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,e,i,r,n,s){return this.a=t,this.b=e,this.c=i,this.d=r,this.tx=n,this.ty=s,this}toArray(t,e){this.array||(this.array=new Float32Array(9));const i=e||this.array;return t?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(t,e){e=e||new n.b;const i=t.x,r=t.y;return e.x=this.a*i+this.c*r+this.tx,e.y=this.b*i+this.d*r+this.ty,e}applyInverse(t,e){e=e||new n.b;const i=this.a,r=this.b,s=this.c,o=this.d,a=this.tx,h=this.ty,l=1/(i*o+s*-r),u=t.x,c=t.y;return e.x=o*l*u+-s*l*c+(h*s-a*o)*l,e.y=i*l*c+-r*l*u+(-h*i+a*r)*l,e}translate(t,e){return this.tx+=t,this.ty+=e,this}scale(t,e){return this.a*=t,this.d*=e,this.c*=t,this.b*=e,this.tx*=t,this.ty*=e,this}rotate(t){const e=Math.cos(t),i=Math.sin(t),r=this.a,n=this.c,s=this.tx;return this.a=r*e-this.b*i,this.b=r*i+this.b*e,this.c=n*e-this.d*i,this.d=n*i+this.d*e,this.tx=s*e-this.ty*i,this.ty=s*i+this.ty*e,this}append(t){const e=this.a,i=this.b,r=this.c,n=this.d;return this.a=t.a*e+t.b*r,this.b=t.a*i+t.b*n,this.c=t.c*e+t.d*r,this.d=t.c*i+t.d*n,this.tx=t.tx*e+t.ty*r+this.tx,this.ty=t.tx*i+t.ty*n+this.ty,this}appendFrom(t,e){const i=t.a,r=t.b,n=t.c,s=t.d,o=t.tx,a=t.ty,h=e.a,l=e.b,u=e.c,c=e.d;return this.a=i*h+r*u,this.b=i*l+r*c,this.c=n*h+s*u,this.d=n*l+s*c,this.tx=o*h+a*u+e.tx,this.ty=o*l+a*c+e.ty,this}setTransform(t,e,i,r,n,s,o,a,h){return this.a=Math.cos(o+h)*n,this.b=Math.sin(o+h)*n,this.c=-Math.sin(o-a)*s,this.d=Math.cos(o-a)*s,this.tx=t-(i*this.a+r*this.c),this.ty=e-(i*this.b+r*this.d),this}prepend(t){const e=this.tx;if(1!==t.a||0!==t.b||0!==t.c||1!==t.d){const e=this.a,i=this.c;this.a=e*t.a+this.b*t.c,this.b=e*t.b+this.b*t.d,this.c=i*t.a+this.d*t.c,this.d=i*t.b+this.d*t.d}return this.tx=e*t.a+this.ty*t.c+t.tx,this.ty=e*t.b+this.ty*t.d+t.ty,this}decompose(t){const e=this.a,i=this.b,n=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-n,s),h=Math.atan2(i,e),l=Math.abs(a+h);return l<1e-5||Math.abs(r.TO-l)<1e-5?(t.rotation=h,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=h),t.scale.x=Math.sqrt(e*e+i*i),t.scale.y=Math.sqrt(n*n+s*s),t.position.x=this.tx+(o.x*e+o.y*n),t.position.y=this.ty+(o.x*i+o.y*s),t}invert(){const t=this.a,e=this.b,i=this.c,r=this.d,n=this.tx,s=t*r-e*i;return this.a=r/s,this.b=-e/s,this.c=-i/s,this.d=t/s,this.tx=(i*this.ty-r*n)/s,this.ty=-(t*this.ty-e*n)/s,this}isIdentity(){return 1===this.a&&0===this.b&&0===this.c&&1===this.d&&0===this.tx&&0===this.ty}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new s;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}equals(t){return t.a===this.a&&t.b===this.b&&t.c===this.c&&t.d===this.d&&t.tx===this.tx&&t.ty===this.ty}toString(){return`[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return a.identity()}static get shared(){return o.identity()}}const o=new s,a=new s},9353:t=>{"use strict";var e=Object.prototype.toString,i=Math.max,r=function(t,e){for(var i=[],r=0;r<t.length;r+=1)i[r]=t[r];for(var n=0;n<e.length;n+=1)i[n+t.length]=e[n];return i};t.exports=function(t){var n=this;if("function"!=typeof n||"[object Function]"!==e.apply(n))throw new TypeError("Function.prototype.bind called on incompatible "+n);for(var s,o=function(t){for(var e=[],i=1,r=0;i<t.length;i+=1,r+=1)e[r]=t[i];return e}(arguments),a=i(0,n.length-o.length),h=[],l=0;l<a;l++)h[l]="$"+l;if(s=Function("binder","return function ("+function(t){for(var e="",i=0;i<t.length;i+=1)e+=t[i],i+1<t.length&&(e+=",");return e}(h)+"){ return binder.apply(this,arguments); }")(function(){if(this instanceof s){var e=n.apply(this,r(o,arguments));return Object(e)===e?e:this}return n.apply(t,r(o,arguments))}),n.prototype){var u=function(){};u.prototype=n.prototype,s.prototype=new u,u.prototype=null}return s}},9383:t=>{"use strict";t.exports=Error},9394:(t,e,i)=>{"use strict";var r=i(9211);t.exports=function(){return"function"==typeof Object.is?Object.is:r}},9404:function(t,e,i){!function(t,e){"use strict";function r(t,e){if(!t)throw new Error(e||"Assertion failed")}function n(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}function s(t,e,i){if(s.isBN(t))return t;this.negative=0,this.words=null,this.length=0,this.red=null,null!==t&&("le"!==e&&"be"!==e||(i=e,e=10),this._init(t||0,e||10,i||"be"))}var o;"object"==typeof t?t.exports=s:e.BN=s,s.BN=s,s.wordSize=26;try{o="undefined"!=typeof window&&void 0!==window.Buffer?window.Buffer:i(7790).Buffer}catch(t){}function a(t,e){var i=t.charCodeAt(e);return i>=65&&i<=70?i-55:i>=97&&i<=102?i-87:i-48&15}function h(t,e,i){var r=a(t,i);return i-1>=e&&(r|=a(t,i-1)<<4),r}function l(t,e,i,r){for(var n=0,s=Math.min(t.length,i),o=e;o<s;o++){var a=t.charCodeAt(o)-48;n*=r,n+=a>=49?a-49+10:a>=17?a-17+10:a}return n}s.isBN=function(t){return t instanceof s||null!==t&&"object"==typeof t&&t.constructor.wordSize===s.wordSize&&Array.isArray(t.words)},s.max=function(t,e){return t.cmp(e)>0?t:e},s.min=function(t,e){return t.cmp(e)<0?t:e},s.prototype._init=function(t,e,i){if("number"==typeof t)return this._initNumber(t,e,i);if("object"==typeof t)return this._initArray(t,e,i);"hex"===e&&(e=16),r(e===(0|e)&&e>=2&&e<=36);var n=0;"-"===(t=t.toString().replace(/\s+/g,""))[0]&&(n++,this.negative=1),n<t.length&&(16===e?this._parseHex(t,n,i):(this._parseBase(t,e,n),"le"===i&&this._initArray(this.toArray(),e,i)))},s.prototype._initNumber=function(t,e,i){t<0&&(this.negative=1,t=-t),t<67108864?(this.words=[67108863&t],this.length=1):t<4503599627370496?(this.words=[67108863&t,t/67108864&67108863],this.length=2):(r(t<9007199254740992),this.words=[67108863&t,t/67108864&67108863,1],this.length=3),"le"===i&&this._initArray(this.toArray(),e,i)},s.prototype._initArray=function(t,e,i){if(r("number"==typeof t.length),t.length<=0)return this.words=[0],this.length=1,this;this.length=Math.ceil(t.length/3),this.words=new Array(this.length);for(var n=0;n<this.length;n++)this.words[n]=0;var s,o,a=0;if("be"===i)for(n=t.length-1,s=0;n>=0;n-=3)o=t[n]|t[n-1]<<8|t[n-2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);else if("le"===i)for(n=0,s=0;n<t.length;n+=3)o=t[n]|t[n+1]<<8|t[n+2]<<16,this.words[s]|=o<<a&67108863,this.words[s+1]=o>>>26-a&67108863,(a+=24)>=26&&(a-=26,s++);return this.strip()},s.prototype._parseHex=function(t,e,i){this.length=Math.ceil((t.length-e)/6),this.words=new Array(this.length);for(var r=0;r<this.length;r++)this.words[r]=0;var n,s=0,o=0;if("be"===i)for(r=t.length-1;r>=e;r-=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;else for(r=(t.length-e)%2==0?e+1:e;r<t.length;r+=2)n=h(t,e,r)<<s,this.words[o]|=67108863&n,s>=18?(s-=18,o+=1,this.words[o]|=n>>>26):s+=8;this.strip()},s.prototype._parseBase=function(t,e,i){this.words=[0],this.length=1;for(var r=0,n=1;n<=67108863;n*=e)r++;r--,n=n/e|0;for(var s=t.length-i,o=s%r,a=Math.min(s,s-o)+i,h=0,u=i;u<a;u+=r)h=l(t,u,u+r,e),this.imuln(n),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h);if(0!==o){var c=1;for(h=l(t,u,t.length,e),u=0;u<o;u++)c*=e;this.imuln(c),this.words[0]+h<67108864?this.words[0]+=h:this._iaddn(h)}this.strip()},s.prototype.copy=function(t){t.words=new Array(this.length);for(var e=0;e<this.length;e++)t.words[e]=this.words[e];t.length=this.length,t.negative=this.negative,t.red=this.red},s.prototype.clone=function(){var t=new s(null);return this.copy(t),t},s.prototype._expand=function(t){for(;this.length<t;)this.words[this.length++]=0;return this},s.prototype.strip=function(){for(;this.length>1&&0===this.words[this.length-1];)this.length--;return this._normSign()},s.prototype._normSign=function(){return 1===this.length&&0===this.words[0]&&(this.negative=0),this},s.prototype.inspect=function(){return(this.red?"<BN-R: ":"<BN: ")+this.toString(16)+">"};var u=["","0","00","000","0000","00000","000000","0000000","00000000","000000000","0000000000","00000000000","000000000000","0000000000000","00000000000000","000000000000000","0000000000000000","00000000000000000","000000000000000000","0000000000000000000","00000000000000000000","000000000000000000000","0000000000000000000000","00000000000000000000000","000000000000000000000000","0000000000000000000000000"],c=[0,0,25,16,12,11,10,9,8,8,7,7,7,7,6,6,6,6,6,6,6,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5],d=[0,0,33554432,43046721,16777216,48828125,60466176,40353607,16777216,43046721,1e7,19487171,35831808,62748517,7529536,11390625,16777216,24137569,34012224,47045881,64e6,4084101,5153632,6436343,7962624,9765625,11881376,14348907,17210368,20511149,243e5,28629151,33554432,39135393,45435424,52521875,60466176];function f(t,e,i){i.negative=e.negative^t.negative;var r=t.length+e.length|0;i.length=r,r=r-1|0;var n=0|t.words[0],s=0|e.words[0],o=n*s,a=67108863&o,h=o/67108864|0;i.words[0]=a;for(var l=1;l<r;l++){for(var u=h>>>26,c=67108863&h,d=Math.min(l,e.length-1),f=Math.max(0,l-t.length+1);f<=d;f++){var p=l-f|0;u+=(o=(n=0|t.words[p])*(s=0|e.words[f])+c)/67108864|0,c=67108863&o}i.words[l]=0|c,h=0|u}return 0!==h?i.words[l]=0|h:i.length--,i.strip()}s.prototype.toString=function(t,e){var i;if(e=0|e||1,16===(t=t||10)||"hex"===t){i="";for(var n=0,s=0,o=0;o<this.length;o++){var a=this.words[o],h=(16777215&(a<<n|s)).toString(16);s=a>>>24-n&16777215,(n+=2)>=26&&(n-=26,o--),i=0!==s||o!==this.length-1?u[6-h.length]+h+i:h+i}for(0!==s&&(i=s.toString(16)+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}if(t===(0|t)&&t>=2&&t<=36){var l=c[t],f=d[t];i="";var p=this.clone();for(p.negative=0;!p.isZero();){var m=p.modn(f).toString(t);i=(p=p.idivn(f)).isZero()?m+i:u[l-m.length]+m+i}for(this.isZero()&&(i="0"+i);i.length%e!==0;)i="0"+i;return 0!==this.negative&&(i="-"+i),i}r(!1,"Base should be between 2 and 36")},s.prototype.toNumber=function(){var t=this.words[0];return 2===this.length?t+=67108864*this.words[1]:3===this.length&&1===this.words[2]?t+=4503599627370496+67108864*this.words[1]:this.length>2&&r(!1,"Number can only safely store up to 53 bits"),0!==this.negative?-t:t},s.prototype.toJSON=function(){return this.toString(16)},s.prototype.toBuffer=function(t,e){return r(void 0!==o),this.toArrayLike(o,t,e)},s.prototype.toArray=function(t,e){return this.toArrayLike(Array,t,e)},s.prototype.toArrayLike=function(t,e,i){var n=this.byteLength(),s=i||Math.max(1,n);r(n<=s,"byte array longer than desired length"),r(s>0,"Requested array length <= 0"),this.strip();var o,a,h="le"===e,l=new t(s),u=this.clone();if(h){for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[a]=o;for(;a<s;a++)l[a]=0}else{for(a=0;a<s-n;a++)l[a]=0;for(a=0;!u.isZero();a++)o=u.andln(255),u.iushrn(8),l[s-a-1]=o}return l},Math.clz32?s.prototype._countBits=function(t){return 32-Math.clz32(t)}:s.prototype._countBits=function(t){var e=t,i=0;return e>=4096&&(i+=13,e>>>=13),e>=64&&(i+=7,e>>>=7),e>=8&&(i+=4,e>>>=4),e>=2&&(i+=2,e>>>=2),i+e},s.prototype._zeroBits=function(t){if(0===t)return 26;var e=t,i=0;return 8191&e||(i+=13,e>>>=13),127&e||(i+=7,e>>>=7),15&e||(i+=4,e>>>=4),3&e||(i+=2,e>>>=2),1&e||i++,i},s.prototype.bitLength=function(){var t=this.words[this.length-1],e=this._countBits(t);return 26*(this.length-1)+e},s.prototype.zeroBits=function(){if(this.isZero())return 0;for(var t=0,e=0;e<this.length;e++){var i=this._zeroBits(this.words[e]);if(t+=i,26!==i)break}return t},s.prototype.byteLength=function(){return Math.ceil(this.bitLength()/8)},s.prototype.toTwos=function(t){return 0!==this.negative?this.abs().inotn(t).iaddn(1):this.clone()},s.prototype.fromTwos=function(t){return this.testn(t-1)?this.notn(t).iaddn(1).ineg():this.clone()},s.prototype.isNeg=function(){return 0!==this.negative},s.prototype.neg=function(){return this.clone().ineg()},s.prototype.ineg=function(){return this.isZero()||(this.negative^=1),this},s.prototype.iuor=function(t){for(;this.length<t.length;)this.words[this.length++]=0;for(var e=0;e<t.length;e++)this.words[e]=this.words[e]|t.words[e];return this.strip()},s.prototype.ior=function(t){return r(0===(this.negative|t.negative)),this.iuor(t)},s.prototype.or=function(t){return this.length>t.length?this.clone().ior(t):t.clone().ior(this)},s.prototype.uor=function(t){return this.length>t.length?this.clone().iuor(t):t.clone().iuor(this)},s.prototype.iuand=function(t){var e;e=this.length>t.length?t:this;for(var i=0;i<e.length;i++)this.words[i]=this.words[i]&t.words[i];return this.length=e.length,this.strip()},s.prototype.iand=function(t){return r(0===(this.negative|t.negative)),this.iuand(t)},s.prototype.and=function(t){return this.length>t.length?this.clone().iand(t):t.clone().iand(this)},s.prototype.uand=function(t){return this.length>t.length?this.clone().iuand(t):t.clone().iuand(this)},s.prototype.iuxor=function(t){var e,i;this.length>t.length?(e=this,i=t):(e=t,i=this);for(var r=0;r<i.length;r++)this.words[r]=e.words[r]^i.words[r];if(this!==e)for(;r<e.length;r++)this.words[r]=e.words[r];return this.length=e.length,this.strip()},s.prototype.ixor=function(t){return r(0===(this.negative|t.negative)),this.iuxor(t)},s.prototype.xor=function(t){return this.length>t.length?this.clone().ixor(t):t.clone().ixor(this)},s.prototype.uxor=function(t){return this.length>t.length?this.clone().iuxor(t):t.clone().iuxor(this)},s.prototype.inotn=function(t){r("number"==typeof t&&t>=0);var e=0|Math.ceil(t/26),i=t%26;this._expand(e),i>0&&e--;for(var n=0;n<e;n++)this.words[n]=67108863&~this.words[n];return i>0&&(this.words[n]=~this.words[n]&67108863>>26-i),this.strip()},s.prototype.notn=function(t){return this.clone().inotn(t)},s.prototype.setn=function(t,e){r("number"==typeof t&&t>=0);var i=t/26|0,n=t%26;return this._expand(i+1),this.words[i]=e?this.words[i]|1<<n:this.words[i]&~(1<<n),this.strip()},s.prototype.iadd=function(t){var e,i,r;if(0!==this.negative&&0===t.negative)return this.negative=0,e=this.isub(t),this.negative^=1,this._normSign();if(0===this.negative&&0!==t.negative)return t.negative=0,e=this.isub(t),t.negative=1,e._normSign();this.length>t.length?(i=this,r=t):(i=t,r=this);for(var n=0,s=0;s<r.length;s++)e=(0|i.words[s])+(0|r.words[s])+n,this.words[s]=67108863&e,n=e>>>26;for(;0!==n&&s<i.length;s++)e=(0|i.words[s])+n,this.words[s]=67108863&e,n=e>>>26;if(this.length=i.length,0!==n)this.words[this.length]=n,this.length++;else if(i!==this)for(;s<i.length;s++)this.words[s]=i.words[s];return this},s.prototype.add=function(t){var e;return 0!==t.negative&&0===this.negative?(t.negative=0,e=this.sub(t),t.negative^=1,e):0===t.negative&&0!==this.negative?(this.negative=0,e=t.sub(this),this.negative=1,e):this.length>t.length?this.clone().iadd(t):t.clone().iadd(this)},s.prototype.isub=function(t){if(0!==t.negative){t.negative=0;var e=this.iadd(t);return t.negative=1,e._normSign()}if(0!==this.negative)return this.negative=0,this.iadd(t),this.negative=1,this._normSign();var i,r,n=this.cmp(t);if(0===n)return this.negative=0,this.length=1,this.words[0]=0,this;n>0?(i=this,r=t):(i=t,r=this);for(var s=0,o=0;o<r.length;o++)s=(e=(0|i.words[o])-(0|r.words[o])+s)>>26,this.words[o]=67108863&e;for(;0!==s&&o<i.length;o++)s=(e=(0|i.words[o])+s)>>26,this.words[o]=67108863&e;if(0===s&&o<i.length&&i!==this)for(;o<i.length;o++)this.words[o]=i.words[o];return this.length=Math.max(this.length,o),i!==this&&(this.negative=1),this.strip()},s.prototype.sub=function(t){return this.clone().isub(t)};var p=function(t,e,i){var r,n,s,o=t.words,a=e.words,h=i.words,l=0,u=0|o[0],c=8191&u,d=u>>>13,f=0|o[1],p=8191&f,m=f>>>13,g=0|o[2],v=8191&g,y=g>>>13,b=0|o[3],_=8191&b,x=b>>>13,w=0|o[4],M=8191&w,S=w>>>13,A=0|o[5],E=8191&A,T=A>>>13,R=0|o[6],P=8191&R,C=R>>>13,I=0|o[7],k=8191&I,B=I>>>13,O=0|o[8],L=8191&O,U=O>>>13,D=0|o[9],N=8191&D,F=D>>>13,z=0|a[0],G=8191&z,j=z>>>13,V=0|a[1],H=8191&V,W=V>>>13,X=0|a[2],q=8191&X,Y=X>>>13,Z=0|a[3],K=8191&Z,$=Z>>>13,Q=0|a[4],J=8191&Q,tt=Q>>>13,et=0|a[5],it=8191&et,rt=et>>>13,nt=0|a[6],st=8191&nt,ot=nt>>>13,at=0|a[7],ht=8191&at,lt=at>>>13,ut=0|a[8],ct=8191&ut,dt=ut>>>13,ft=0|a[9],pt=8191&ft,mt=ft>>>13;i.negative=t.negative^e.negative,i.length=19;var gt=(l+(r=Math.imul(c,G))|0)+((8191&(n=(n=Math.imul(c,j))+Math.imul(d,G)|0))<<13)|0;l=((s=Math.imul(d,j))+(n>>>13)|0)+(gt>>>26)|0,gt&=67108863,r=Math.imul(p,G),n=(n=Math.imul(p,j))+Math.imul(m,G)|0,s=Math.imul(m,j);var vt=(l+(r=r+Math.imul(c,H)|0)|0)+((8191&(n=(n=n+Math.imul(c,W)|0)+Math.imul(d,H)|0))<<13)|0;l=((s=s+Math.imul(d,W)|0)+(n>>>13)|0)+(vt>>>26)|0,vt&=67108863,r=Math.imul(v,G),n=(n=Math.imul(v,j))+Math.imul(y,G)|0,s=Math.imul(y,j),r=r+Math.imul(p,H)|0,n=(n=n+Math.imul(p,W)|0)+Math.imul(m,H)|0,s=s+Math.imul(m,W)|0;var yt=(l+(r=r+Math.imul(c,q)|0)|0)+((8191&(n=(n=n+Math.imul(c,Y)|0)+Math.imul(d,q)|0))<<13)|0;l=((s=s+Math.imul(d,Y)|0)+(n>>>13)|0)+(yt>>>26)|0,yt&=67108863,r=Math.imul(_,G),n=(n=Math.imul(_,j))+Math.imul(x,G)|0,s=Math.imul(x,j),r=r+Math.imul(v,H)|0,n=(n=n+Math.imul(v,W)|0)+Math.imul(y,H)|0,s=s+Math.imul(y,W)|0,r=r+Math.imul(p,q)|0,n=(n=n+Math.imul(p,Y)|0)+Math.imul(m,q)|0,s=s+Math.imul(m,Y)|0;var bt=(l+(r=r+Math.imul(c,K)|0)|0)+((8191&(n=(n=n+Math.imul(c,$)|0)+Math.imul(d,K)|0))<<13)|0;l=((s=s+Math.imul(d,$)|0)+(n>>>13)|0)+(bt>>>26)|0,bt&=67108863,r=Math.imul(M,G),n=(n=Math.imul(M,j))+Math.imul(S,G)|0,s=Math.imul(S,j),r=r+Math.imul(_,H)|0,n=(n=n+Math.imul(_,W)|0)+Math.imul(x,H)|0,s=s+Math.imul(x,W)|0,r=r+Math.imul(v,q)|0,n=(n=n+Math.imul(v,Y)|0)+Math.imul(y,q)|0,s=s+Math.imul(y,Y)|0,r=r+Math.imul(p,K)|0,n=(n=n+Math.imul(p,$)|0)+Math.imul(m,K)|0,s=s+Math.imul(m,$)|0;var _t=(l+(r=r+Math.imul(c,J)|0)|0)+((8191&(n=(n=n+Math.imul(c,tt)|0)+Math.imul(d,J)|0))<<13)|0;l=((s=s+Math.imul(d,tt)|0)+(n>>>13)|0)+(_t>>>26)|0,_t&=67108863,r=Math.imul(E,G),n=(n=Math.imul(E,j))+Math.imul(T,G)|0,s=Math.imul(T,j),r=r+Math.imul(M,H)|0,n=(n=n+Math.imul(M,W)|0)+Math.imul(S,H)|0,s=s+Math.imul(S,W)|0,r=r+Math.imul(_,q)|0,n=(n=n+Math.imul(_,Y)|0)+Math.imul(x,q)|0,s=s+Math.imul(x,Y)|0,r=r+Math.imul(v,K)|0,n=(n=n+Math.imul(v,$)|0)+Math.imul(y,K)|0,s=s+Math.imul(y,$)|0,r=r+Math.imul(p,J)|0,n=(n=n+Math.imul(p,tt)|0)+Math.imul(m,J)|0,s=s+Math.imul(m,tt)|0;var xt=(l+(r=r+Math.imul(c,it)|0)|0)+((8191&(n=(n=n+Math.imul(c,rt)|0)+Math.imul(d,it)|0))<<13)|0;l=((s=s+Math.imul(d,rt)|0)+(n>>>13)|0)+(xt>>>26)|0,xt&=67108863,r=Math.imul(P,G),n=(n=Math.imul(P,j))+Math.imul(C,G)|0,s=Math.imul(C,j),r=r+Math.imul(E,H)|0,n=(n=n+Math.imul(E,W)|0)+Math.imul(T,H)|0,s=s+Math.imul(T,W)|0,r=r+Math.imul(M,q)|0,n=(n=n+Math.imul(M,Y)|0)+Math.imul(S,q)|0,s=s+Math.imul(S,Y)|0,r=r+Math.imul(_,K)|0,n=(n=n+Math.imul(_,$)|0)+Math.imul(x,K)|0,s=s+Math.imul(x,$)|0,r=r+Math.imul(v,J)|0,n=(n=n+Math.imul(v,tt)|0)+Math.imul(y,J)|0,s=s+Math.imul(y,tt)|0,r=r+Math.imul(p,it)|0,n=(n=n+Math.imul(p,rt)|0)+Math.imul(m,it)|0,s=s+Math.imul(m,rt)|0;var wt=(l+(r=r+Math.imul(c,st)|0)|0)+((8191&(n=(n=n+Math.imul(c,ot)|0)+Math.imul(d,st)|0))<<13)|0;l=((s=s+Math.imul(d,ot)|0)+(n>>>13)|0)+(wt>>>26)|0,wt&=67108863,r=Math.imul(k,G),n=(n=Math.imul(k,j))+Math.imul(B,G)|0,s=Math.imul(B,j),r=r+Math.imul(P,H)|0,n=(n=n+Math.imul(P,W)|0)+Math.imul(C,H)|0,s=s+Math.imul(C,W)|0,r=r+Math.imul(E,q)|0,n=(n=n+Math.imul(E,Y)|0)+Math.imul(T,q)|0,s=s+Math.imul(T,Y)|0,r=r+Math.imul(M,K)|0,n=(n=n+Math.imul(M,$)|0)+Math.imul(S,K)|0,s=s+Math.imul(S,$)|0,r=r+Math.imul(_,J)|0,n=(n=n+Math.imul(_,tt)|0)+Math.imul(x,J)|0,s=s+Math.imul(x,tt)|0,r=r+Math.imul(v,it)|0,n=(n=n+Math.imul(v,rt)|0)+Math.imul(y,it)|0,s=s+Math.imul(y,rt)|0,r=r+Math.imul(p,st)|0,n=(n=n+Math.imul(p,ot)|0)+Math.imul(m,st)|0,s=s+Math.imul(m,ot)|0;var Mt=(l+(r=r+Math.imul(c,ht)|0)|0)+((8191&(n=(n=n+Math.imul(c,lt)|0)+Math.imul(d,ht)|0))<<13)|0;l=((s=s+Math.imul(d,lt)|0)+(n>>>13)|0)+(Mt>>>26)|0,Mt&=67108863,r=Math.imul(L,G),n=(n=Math.imul(L,j))+Math.imul(U,G)|0,s=Math.imul(U,j),r=r+Math.imul(k,H)|0,n=(n=n+Math.imul(k,W)|0)+Math.imul(B,H)|0,s=s+Math.imul(B,W)|0,r=r+Math.imul(P,q)|0,n=(n=n+Math.imul(P,Y)|0)+Math.imul(C,q)|0,s=s+Math.imul(C,Y)|0,r=r+Math.imul(E,K)|0,n=(n=n+Math.imul(E,$)|0)+Math.imul(T,K)|0,s=s+Math.imul(T,$)|0,r=r+Math.imul(M,J)|0,n=(n=n+Math.imul(M,tt)|0)+Math.imul(S,J)|0,s=s+Math.imul(S,tt)|0,r=r+Math.imul(_,it)|0,n=(n=n+Math.imul(_,rt)|0)+Math.imul(x,it)|0,s=s+Math.imul(x,rt)|0,r=r+Math.imul(v,st)|0,n=(n=n+Math.imul(v,ot)|0)+Math.imul(y,st)|0,s=s+Math.imul(y,ot)|0,r=r+Math.imul(p,ht)|0,n=(n=n+Math.imul(p,lt)|0)+Math.imul(m,ht)|0,s=s+Math.imul(m,lt)|0;var St=(l+(r=r+Math.imul(c,ct)|0)|0)+((8191&(n=(n=n+Math.imul(c,dt)|0)+Math.imul(d,ct)|0))<<13)|0;l=((s=s+Math.imul(d,dt)|0)+(n>>>13)|0)+(St>>>26)|0,St&=67108863,r=Math.imul(N,G),n=(n=Math.imul(N,j))+Math.imul(F,G)|0,s=Math.imul(F,j),r=r+Math.imul(L,H)|0,n=(n=n+Math.imul(L,W)|0)+Math.imul(U,H)|0,s=s+Math.imul(U,W)|0,r=r+Math.imul(k,q)|0,n=(n=n+Math.imul(k,Y)|0)+Math.imul(B,q)|0,s=s+Math.imul(B,Y)|0,r=r+Math.imul(P,K)|0,n=(n=n+Math.imul(P,$)|0)+Math.imul(C,K)|0,s=s+Math.imul(C,$)|0,r=r+Math.imul(E,J)|0,n=(n=n+Math.imul(E,tt)|0)+Math.imul(T,J)|0,s=s+Math.imul(T,tt)|0,r=r+Math.imul(M,it)|0,n=(n=n+Math.imul(M,rt)|0)+Math.imul(S,it)|0,s=s+Math.imul(S,rt)|0,r=r+Math.imul(_,st)|0,n=(n=n+Math.imul(_,ot)|0)+Math.imul(x,st)|0,s=s+Math.imul(x,ot)|0,r=r+Math.imul(v,ht)|0,n=(n=n+Math.imul(v,lt)|0)+Math.imul(y,ht)|0,s=s+Math.imul(y,lt)|0,r=r+Math.imul(p,ct)|0,n=(n=n+Math.imul(p,dt)|0)+Math.imul(m,ct)|0,s=s+Math.imul(m,dt)|0;var At=(l+(r=r+Math.imul(c,pt)|0)|0)+((8191&(n=(n=n+Math.imul(c,mt)|0)+Math.imul(d,pt)|0))<<13)|0;l=((s=s+Math.imul(d,mt)|0)+(n>>>13)|0)+(At>>>26)|0,At&=67108863,r=Math.imul(N,H),n=(n=Math.imul(N,W))+Math.imul(F,H)|0,s=Math.imul(F,W),r=r+Math.imul(L,q)|0,n=(n=n+Math.imul(L,Y)|0)+Math.imul(U,q)|0,s=s+Math.imul(U,Y)|0,r=r+Math.imul(k,K)|0,n=(n=n+Math.imul(k,$)|0)+Math.imul(B,K)|0,s=s+Math.imul(B,$)|0,r=r+Math.imul(P,J)|0,n=(n=n+Math.imul(P,tt)|0)+Math.imul(C,J)|0,s=s+Math.imul(C,tt)|0,r=r+Math.imul(E,it)|0,n=(n=n+Math.imul(E,rt)|0)+Math.imul(T,it)|0,s=s+Math.imul(T,rt)|0,r=r+Math.imul(M,st)|0,n=(n=n+Math.imul(M,ot)|0)+Math.imul(S,st)|0,s=s+Math.imul(S,ot)|0,r=r+Math.imul(_,ht)|0,n=(n=n+Math.imul(_,lt)|0)+Math.imul(x,ht)|0,s=s+Math.imul(x,lt)|0,r=r+Math.imul(v,ct)|0,n=(n=n+Math.imul(v,dt)|0)+Math.imul(y,ct)|0,s=s+Math.imul(y,dt)|0;var Et=(l+(r=r+Math.imul(p,pt)|0)|0)+((8191&(n=(n=n+Math.imul(p,mt)|0)+Math.imul(m,pt)|0))<<13)|0;l=((s=s+Math.imul(m,mt)|0)+(n>>>13)|0)+(Et>>>26)|0,Et&=67108863,r=Math.imul(N,q),n=(n=Math.imul(N,Y))+Math.imul(F,q)|0,s=Math.imul(F,Y),r=r+Math.imul(L,K)|0,n=(n=n+Math.imul(L,$)|0)+Math.imul(U,K)|0,s=s+Math.imul(U,$)|0,r=r+Math.imul(k,J)|0,n=(n=n+Math.imul(k,tt)|0)+Math.imul(B,J)|0,s=s+Math.imul(B,tt)|0,r=r+Math.imul(P,it)|0,n=(n=n+Math.imul(P,rt)|0)+Math.imul(C,it)|0,s=s+Math.imul(C,rt)|0,r=r+Math.imul(E,st)|0,n=(n=n+Math.imul(E,ot)|0)+Math.imul(T,st)|0,s=s+Math.imul(T,ot)|0,r=r+Math.imul(M,ht)|0,n=(n=n+Math.imul(M,lt)|0)+Math.imul(S,ht)|0,s=s+Math.imul(S,lt)|0,r=r+Math.imul(_,ct)|0,n=(n=n+Math.imul(_,dt)|0)+Math.imul(x,ct)|0,s=s+Math.imul(x,dt)|0;var Tt=(l+(r=r+Math.imul(v,pt)|0)|0)+((8191&(n=(n=n+Math.imul(v,mt)|0)+Math.imul(y,pt)|0))<<13)|0;l=((s=s+Math.imul(y,mt)|0)+(n>>>13)|0)+(Tt>>>26)|0,Tt&=67108863,r=Math.imul(N,K),n=(n=Math.imul(N,$))+Math.imul(F,K)|0,s=Math.imul(F,$),r=r+Math.imul(L,J)|0,n=(n=n+Math.imul(L,tt)|0)+Math.imul(U,J)|0,s=s+Math.imul(U,tt)|0,r=r+Math.imul(k,it)|0,n=(n=n+Math.imul(k,rt)|0)+Math.imul(B,it)|0,s=s+Math.imul(B,rt)|0,r=r+Math.imul(P,st)|0,n=(n=n+Math.imul(P,ot)|0)+Math.imul(C,st)|0,s=s+Math.imul(C,ot)|0,r=r+Math.imul(E,ht)|0,n=(n=n+Math.imul(E,lt)|0)+Math.imul(T,ht)|0,s=s+Math.imul(T,lt)|0,r=r+Math.imul(M,ct)|0,n=(n=n+Math.imul(M,dt)|0)+Math.imul(S,ct)|0,s=s+Math.imul(S,dt)|0;var Rt=(l+(r=r+Math.imul(_,pt)|0)|0)+((8191&(n=(n=n+Math.imul(_,mt)|0)+Math.imul(x,pt)|0))<<13)|0;l=((s=s+Math.imul(x,mt)|0)+(n>>>13)|0)+(Rt>>>26)|0,Rt&=67108863,r=Math.imul(N,J),n=(n=Math.imul(N,tt))+Math.imul(F,J)|0,s=Math.imul(F,tt),r=r+Math.imul(L,it)|0,n=(n=n+Math.imul(L,rt)|0)+Math.imul(U,it)|0,s=s+Math.imul(U,rt)|0,r=r+Math.imul(k,st)|0,n=(n=n+Math.imul(k,ot)|0)+Math.imul(B,st)|0,s=s+Math.imul(B,ot)|0,r=r+Math.imul(P,ht)|0,n=(n=n+Math.imul(P,lt)|0)+Math.imul(C,ht)|0,s=s+Math.imul(C,lt)|0,r=r+Math.imul(E,ct)|0,n=(n=n+Math.imul(E,dt)|0)+Math.imul(T,ct)|0,s=s+Math.imul(T,dt)|0;var Pt=(l+(r=r+Math.imul(M,pt)|0)|0)+((8191&(n=(n=n+Math.imul(M,mt)|0)+Math.imul(S,pt)|0))<<13)|0;l=((s=s+Math.imul(S,mt)|0)+(n>>>13)|0)+(Pt>>>26)|0,Pt&=67108863,r=Math.imul(N,it),n=(n=Math.imul(N,rt))+Math.imul(F,it)|0,s=Math.imul(F,rt),r=r+Math.imul(L,st)|0,n=(n=n+Math.imul(L,ot)|0)+Math.imul(U,st)|0,s=s+Math.imul(U,ot)|0,r=r+Math.imul(k,ht)|0,n=(n=n+Math.imul(k,lt)|0)+Math.imul(B,ht)|0,s=s+Math.imul(B,lt)|0,r=r+Math.imul(P,ct)|0,n=(n=n+Math.imul(P,dt)|0)+Math.imul(C,ct)|0,s=s+Math.imul(C,dt)|0;var Ct=(l+(r=r+Math.imul(E,pt)|0)|0)+((8191&(n=(n=n+Math.imul(E,mt)|0)+Math.imul(T,pt)|0))<<13)|0;l=((s=s+Math.imul(T,mt)|0)+(n>>>13)|0)+(Ct>>>26)|0,Ct&=67108863,r=Math.imul(N,st),n=(n=Math.imul(N,ot))+Math.imul(F,st)|0,s=Math.imul(F,ot),r=r+Math.imul(L,ht)|0,n=(n=n+Math.imul(L,lt)|0)+Math.imul(U,ht)|0,s=s+Math.imul(U,lt)|0,r=r+Math.imul(k,ct)|0,n=(n=n+Math.imul(k,dt)|0)+Math.imul(B,ct)|0,s=s+Math.imul(B,dt)|0;var It=(l+(r=r+Math.imul(P,pt)|0)|0)+((8191&(n=(n=n+Math.imul(P,mt)|0)+Math.imul(C,pt)|0))<<13)|0;l=((s=s+Math.imul(C,mt)|0)+(n>>>13)|0)+(It>>>26)|0,It&=67108863,r=Math.imul(N,ht),n=(n=Math.imul(N,lt))+Math.imul(F,ht)|0,s=Math.imul(F,lt),r=r+Math.imul(L,ct)|0,n=(n=n+Math.imul(L,dt)|0)+Math.imul(U,ct)|0,s=s+Math.imul(U,dt)|0;var kt=(l+(r=r+Math.imul(k,pt)|0)|0)+((8191&(n=(n=n+Math.imul(k,mt)|0)+Math.imul(B,pt)|0))<<13)|0;l=((s=s+Math.imul(B,mt)|0)+(n>>>13)|0)+(kt>>>26)|0,kt&=67108863,r=Math.imul(N,ct),n=(n=Math.imul(N,dt))+Math.imul(F,ct)|0,s=Math.imul(F,dt);var Bt=(l+(r=r+Math.imul(L,pt)|0)|0)+((8191&(n=(n=n+Math.imul(L,mt)|0)+Math.imul(U,pt)|0))<<13)|0;l=((s=s+Math.imul(U,mt)|0)+(n>>>13)|0)+(Bt>>>26)|0,Bt&=67108863;var Ot=(l+(r=Math.imul(N,pt))|0)+((8191&(n=(n=Math.imul(N,mt))+Math.imul(F,pt)|0))<<13)|0;return l=((s=Math.imul(F,mt))+(n>>>13)|0)+(Ot>>>26)|0,Ot&=67108863,h[0]=gt,h[1]=vt,h[2]=yt,h[3]=bt,h[4]=_t,h[5]=xt,h[6]=wt,h[7]=Mt,h[8]=St,h[9]=At,h[10]=Et,h[11]=Tt,h[12]=Rt,h[13]=Pt,h[14]=Ct,h[15]=It,h[16]=kt,h[17]=Bt,h[18]=Ot,0!==l&&(h[19]=l,i.length++),i};function m(t,e,i){return(new g).mulp(t,e,i)}function g(t,e){this.x=t,this.y=e}Math.imul||(p=f),s.prototype.mulTo=function(t,e){var i,r=this.length+t.length;return i=10===this.length&&10===t.length?p(this,t,e):r<63?f(this,t,e):r<1024?function(t,e,i){i.negative=e.negative^t.negative,i.length=t.length+e.length;for(var r=0,n=0,s=0;s<i.length-1;s++){var o=n;n=0;for(var a=67108863&r,h=Math.min(s,e.length-1),l=Math.max(0,s-t.length+1);l<=h;l++){var u=s-l,c=(0|t.words[u])*(0|e.words[l]),d=67108863&c;a=67108863&(d=d+a|0),n+=(o=(o=o+(c/67108864|0)|0)+(d>>>26)|0)>>>26,o&=67108863}i.words[s]=a,r=o,o=n}return 0!==r?i.words[s]=r:i.length--,i.strip()}(this,t,e):m(this,t,e),i},g.prototype.makeRBT=function(t){for(var e=new Array(t),i=s.prototype._countBits(t)-1,r=0;r<t;r++)e[r]=this.revBin(r,i,t);return e},g.prototype.revBin=function(t,e,i){if(0===t||t===i-1)return t;for(var r=0,n=0;n<e;n++)r|=(1&t)<<e-n-1,t>>=1;return r},g.prototype.permute=function(t,e,i,r,n,s){for(var o=0;o<s;o++)r[o]=e[t[o]],n[o]=i[t[o]]},g.prototype.transform=function(t,e,i,r,n,s){this.permute(s,t,e,i,r,n);for(var o=1;o<n;o<<=1)for(var a=o<<1,h=Math.cos(2*Math.PI/a),l=Math.sin(2*Math.PI/a),u=0;u<n;u+=a)for(var c=h,d=l,f=0;f<o;f++){var p=i[u+f],m=r[u+f],g=i[u+f+o],v=r[u+f+o],y=c*g-d*v;v=c*v+d*g,g=y,i[u+f]=p+g,r[u+f]=m+v,i[u+f+o]=p-g,r[u+f+o]=m-v,f!==a&&(y=h*c-l*d,d=h*d+l*c,c=y)}},g.prototype.guessLen13b=function(t,e){var i=1|Math.max(e,t),r=1&i,n=0;for(i=i/2|0;i;i>>>=1)n++;return 1<<n+1+r},g.prototype.conjugate=function(t,e,i){if(!(i<=1))for(var r=0;r<i/2;r++){var n=t[r];t[r]=t[i-r-1],t[i-r-1]=n,n=e[r],e[r]=-e[i-r-1],e[i-r-1]=-n}},g.prototype.normalize13b=function(t,e){for(var i=0,r=0;r<e/2;r++){var n=8192*Math.round(t[2*r+1]/e)+Math.round(t[2*r]/e)+i;t[r]=67108863&n,i=n<67108864?0:n/67108864|0}return t},g.prototype.convert13b=function(t,e,i,n){for(var s=0,o=0;o<e;o++)s+=0|t[o],i[2*o]=8191&s,s>>>=13,i[2*o+1]=8191&s,s>>>=13;for(o=2*e;o<n;++o)i[o]=0;r(0===s),r(!(-8192&s))},g.prototype.stub=function(t){for(var e=new Array(t),i=0;i<t;i++)e[i]=0;return e},g.prototype.mulp=function(t,e,i){var r=2*this.guessLen13b(t.length,e.length),n=this.makeRBT(r),s=this.stub(r),o=new Array(r),a=new Array(r),h=new Array(r),l=new Array(r),u=new Array(r),c=new Array(r),d=i.words;d.length=r,this.convert13b(t.words,t.length,o,r),this.convert13b(e.words,e.length,l,r),this.transform(o,s,a,h,r,n),this.transform(l,s,u,c,r,n);for(var f=0;f<r;f++){var p=a[f]*u[f]-h[f]*c[f];h[f]=a[f]*c[f]+h[f]*u[f],a[f]=p}return this.conjugate(a,h,r),this.transform(a,h,d,s,r,n),this.conjugate(d,s,r),this.normalize13b(d,r),i.negative=t.negative^e.negative,i.length=t.length+e.length,i.strip()},s.prototype.mul=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),this.mulTo(t,e)},s.prototype.mulf=function(t){var e=new s(null);return e.words=new Array(this.length+t.length),m(this,t,e)},s.prototype.imul=function(t){return this.clone().mulTo(t,this)},s.prototype.imuln=function(t){r("number"==typeof t),r(t<67108864);for(var e=0,i=0;i<this.length;i++){var n=(0|this.words[i])*t,s=(67108863&n)+(67108863&e);e>>=26,e+=n/67108864|0,e+=s>>>26,this.words[i]=67108863&s}return 0!==e&&(this.words[i]=e,this.length++),this.length=0===t?1:this.length,this},s.prototype.muln=function(t){return this.clone().imuln(t)},s.prototype.sqr=function(){return this.mul(this)},s.prototype.isqr=function(){return this.imul(this.clone())},s.prototype.pow=function(t){var e=function(t){for(var e=new Array(t.bitLength()),i=0;i<e.length;i++){var r=i/26|0,n=i%26;e[i]=(t.words[r]&1<<n)>>>n}return e}(t);if(0===e.length)return new s(1);for(var i=this,r=0;r<e.length&&0===e[r];r++,i=i.sqr());if(++r<e.length)for(var n=i.sqr();r<e.length;r++,n=n.sqr())0!==e[r]&&(i=i.mul(n));return i},s.prototype.iushln=function(t){r("number"==typeof t&&t>=0);var e,i=t%26,n=(t-i)/26,s=67108863>>>26-i<<26-i;if(0!==i){var o=0;for(e=0;e<this.length;e++){var a=this.words[e]&s,h=(0|this.words[e])-a<<i;this.words[e]=h|o,o=a>>>26-i}o&&(this.words[e]=o,this.length++)}if(0!==n){for(e=this.length-1;e>=0;e--)this.words[e+n]=this.words[e];for(e=0;e<n;e++)this.words[e]=0;this.length+=n}return this.strip()},s.prototype.ishln=function(t){return r(0===this.negative),this.iushln(t)},s.prototype.iushrn=function(t,e,i){var n;r("number"==typeof t&&t>=0),n=e?(e-e%26)/26:0;var s=t%26,o=Math.min((t-s)/26,this.length),a=67108863^67108863>>>s<<s,h=i;if(n-=o,n=Math.max(0,n),h){for(var l=0;l<o;l++)h.words[l]=this.words[l];h.length=o}if(0===o);else if(this.length>o)for(this.length-=o,l=0;l<this.length;l++)this.words[l]=this.words[l+o];else this.words[0]=0,this.length=1;var u=0;for(l=this.length-1;l>=0&&(0!==u||l>=n);l--){var c=0|this.words[l];this.words[l]=u<<26-s|c>>>s,u=c&a}return h&&0!==u&&(h.words[h.length++]=u),0===this.length&&(this.words[0]=0,this.length=1),this.strip()},s.prototype.ishrn=function(t,e,i){return r(0===this.negative),this.iushrn(t,e,i)},s.prototype.shln=function(t){return this.clone().ishln(t)},s.prototype.ushln=function(t){return this.clone().iushln(t)},s.prototype.shrn=function(t){return this.clone().ishrn(t)},s.prototype.ushrn=function(t){return this.clone().iushrn(t)},s.prototype.testn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26,n=1<<e;return!(this.length<=i||!(this.words[i]&n))},s.prototype.imaskn=function(t){r("number"==typeof t&&t>=0);var e=t%26,i=(t-e)/26;if(r(0===this.negative,"imaskn works only with positive numbers"),this.length<=i)return this;if(0!==e&&i++,this.length=Math.min(i,this.length),0!==e){var n=67108863^67108863>>>e<<e;this.words[this.length-1]&=n}return this.strip()},s.prototype.maskn=function(t){return this.clone().imaskn(t)},s.prototype.iaddn=function(t){return r("number"==typeof t),r(t<67108864),t<0?this.isubn(-t):0!==this.negative?1===this.length&&(0|this.words[0])<t?(this.words[0]=t-(0|this.words[0]),this.negative=0,this):(this.negative=0,this.isubn(t),this.negative=1,this):this._iaddn(t)},s.prototype._iaddn=function(t){this.words[0]+=t;for(var e=0;e<this.length&&this.words[e]>=67108864;e++)this.words[e]-=67108864,e===this.length-1?this.words[e+1]=1:this.words[e+1]++;return this.length=Math.max(this.length,e+1),this},s.prototype.isubn=function(t){if(r("number"==typeof t),r(t<67108864),t<0)return this.iaddn(-t);if(0!==this.negative)return this.negative=0,this.iaddn(t),this.negative=1,this;if(this.words[0]-=t,1===this.length&&this.words[0]<0)this.words[0]=-this.words[0],this.negative=1;else for(var e=0;e<this.length&&this.words[e]<0;e++)this.words[e]+=67108864,this.words[e+1]-=1;return this.strip()},s.prototype.addn=function(t){return this.clone().iaddn(t)},s.prototype.subn=function(t){return this.clone().isubn(t)},s.prototype.iabs=function(){return this.negative=0,this},s.prototype.abs=function(){return this.clone().iabs()},s.prototype._ishlnsubmul=function(t,e,i){var n,s,o=t.length+i;this._expand(o);var a=0;for(n=0;n<t.length;n++){s=(0|this.words[n+i])+a;var h=(0|t.words[n])*e;a=((s-=67108863&h)>>26)-(h/67108864|0),this.words[n+i]=67108863&s}for(;n<this.length-i;n++)a=(s=(0|this.words[n+i])+a)>>26,this.words[n+i]=67108863&s;if(0===a)return this.strip();for(r(-1===a),a=0,n=0;n<this.length;n++)a=(s=-(0|this.words[n])+a)>>26,this.words[n]=67108863&s;return this.negative=1,this.strip()},s.prototype._wordDiv=function(t,e){var i=(this.length,t.length),r=this.clone(),n=t,o=0|n.words[n.length-1];0!=(i=26-this._countBits(o))&&(n=n.ushln(i),r.iushln(i),o=0|n.words[n.length-1]);var a,h=r.length-n.length;if("mod"!==e){(a=new s(null)).length=h+1,a.words=new Array(a.length);for(var l=0;l<a.length;l++)a.words[l]=0}var u=r.clone()._ishlnsubmul(n,1,h);0===u.negative&&(r=u,a&&(a.words[h]=1));for(var c=h-1;c>=0;c--){var d=67108864*(0|r.words[n.length+c])+(0|r.words[n.length+c-1]);for(d=Math.min(d/o|0,67108863),r._ishlnsubmul(n,d,c);0!==r.negative;)d--,r.negative=0,r._ishlnsubmul(n,1,c),r.isZero()||(r.negative^=1);a&&(a.words[c]=d)}return a&&a.strip(),r.strip(),"div"!==e&&0!==i&&r.iushrn(i),{div:a||null,mod:r}},s.prototype.divmod=function(t,e,i){return r(!t.isZero()),this.isZero()?{div:new s(0),mod:new s(0)}:0!==this.negative&&0===t.negative?(a=this.neg().divmod(t,e),"mod"!==e&&(n=a.div.neg()),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.iadd(t)),{div:n,mod:o}):0===this.negative&&0!==t.negative?(a=this.divmod(t.neg(),e),"mod"!==e&&(n=a.div.neg()),{div:n,mod:a.mod}):0!==(this.negative&t.negative)?(a=this.neg().divmod(t.neg(),e),"div"!==e&&(o=a.mod.neg(),i&&0!==o.negative&&o.isub(t)),{div:a.div,mod:o}):t.length>this.length||this.cmp(t)<0?{div:new s(0),mod:this}:1===t.length?"div"===e?{div:this.divn(t.words[0]),mod:null}:"mod"===e?{div:null,mod:new s(this.modn(t.words[0]))}:{div:this.divn(t.words[0]),mod:new s(this.modn(t.words[0]))}:this._wordDiv(t,e);var n,o,a},s.prototype.div=function(t){return this.divmod(t,"div",!1).div},s.prototype.mod=function(t){return this.divmod(t,"mod",!1).mod},s.prototype.umod=function(t){return this.divmod(t,"mod",!0).mod},s.prototype.divRound=function(t){var e=this.divmod(t);if(e.mod.isZero())return e.div;var i=0!==e.div.negative?e.mod.isub(t):e.mod,r=t.ushrn(1),n=t.andln(1),s=i.cmp(r);return s<0||1===n&&0===s?e.div:0!==e.div.negative?e.div.isubn(1):e.div.iaddn(1)},s.prototype.modn=function(t){r(t<=67108863);for(var e=(1<<26)%t,i=0,n=this.length-1;n>=0;n--)i=(e*i+(0|this.words[n]))%t;return i},s.prototype.idivn=function(t){r(t<=67108863);for(var e=0,i=this.length-1;i>=0;i--){var n=(0|this.words[i])+67108864*e;this.words[i]=n/t|0,e=n%t}return this.strip()},s.prototype.divn=function(t){return this.clone().idivn(t)},s.prototype.egcd=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n=new s(1),o=new s(0),a=new s(0),h=new s(1),l=0;e.isEven()&&i.isEven();)e.iushrn(1),i.iushrn(1),++l;for(var u=i.clone(),c=e.clone();!e.isZero();){for(var d=0,f=1;0===(e.words[0]&f)&&d<26;++d,f<<=1);if(d>0)for(e.iushrn(d);d-- >0;)(n.isOdd()||o.isOdd())&&(n.iadd(u),o.isub(c)),n.iushrn(1),o.iushrn(1);for(var p=0,m=1;0===(i.words[0]&m)&&p<26;++p,m<<=1);if(p>0)for(i.iushrn(p);p-- >0;)(a.isOdd()||h.isOdd())&&(a.iadd(u),h.isub(c)),a.iushrn(1),h.iushrn(1);e.cmp(i)>=0?(e.isub(i),n.isub(a),o.isub(h)):(i.isub(e),a.isub(n),h.isub(o))}return{a,b:h,gcd:i.iushln(l)}},s.prototype._invmp=function(t){r(0===t.negative),r(!t.isZero());var e=this,i=t.clone();e=0!==e.negative?e.umod(t):e.clone();for(var n,o=new s(1),a=new s(0),h=i.clone();e.cmpn(1)>0&&i.cmpn(1)>0;){for(var l=0,u=1;0===(e.words[0]&u)&&l<26;++l,u<<=1);if(l>0)for(e.iushrn(l);l-- >0;)o.isOdd()&&o.iadd(h),o.iushrn(1);for(var c=0,d=1;0===(i.words[0]&d)&&c<26;++c,d<<=1);if(c>0)for(i.iushrn(c);c-- >0;)a.isOdd()&&a.iadd(h),a.iushrn(1);e.cmp(i)>=0?(e.isub(i),o.isub(a)):(i.isub(e),a.isub(o))}return(n=0===e.cmpn(1)?o:a).cmpn(0)<0&&n.iadd(t),n},s.prototype.gcd=function(t){if(this.isZero())return t.abs();if(t.isZero())return this.abs();var e=this.clone(),i=t.clone();e.negative=0,i.negative=0;for(var r=0;e.isEven()&&i.isEven();r++)e.iushrn(1),i.iushrn(1);for(;;){for(;e.isEven();)e.iushrn(1);for(;i.isEven();)i.iushrn(1);var n=e.cmp(i);if(n<0){var s=e;e=i,i=s}else if(0===n||0===i.cmpn(1))break;e.isub(i)}return i.iushln(r)},s.prototype.invm=function(t){return this.egcd(t).a.umod(t)},s.prototype.isEven=function(){return!(1&this.words[0])},s.prototype.isOdd=function(){return!(1&~this.words[0])},s.prototype.andln=function(t){return this.words[0]&t},s.prototype.bincn=function(t){r("number"==typeof t);var e=t%26,i=(t-e)/26,n=1<<e;if(this.length<=i)return this._expand(i+1),this.words[i]|=n,this;for(var s=n,o=i;0!==s&&o<this.length;o++){var a=0|this.words[o];s=(a+=s)>>>26,a&=67108863,this.words[o]=a}return 0!==s&&(this.words[o]=s,this.length++),this},s.prototype.isZero=function(){return 1===this.length&&0===this.words[0]},s.prototype.cmpn=function(t){var e,i=t<0;if(0!==this.negative&&!i)return-1;if(0===this.negative&&i)return 1;if(this.strip(),this.length>1)e=1;else{i&&(t=-t),r(t<=67108863,"Number is too big");var n=0|this.words[0];e=n===t?0:n<t?-1:1}return 0!==this.negative?0|-e:e},s.prototype.cmp=function(t){if(0!==this.negative&&0===t.negative)return-1;if(0===this.negative&&0!==t.negative)return 1;var e=this.ucmp(t);return 0!==this.negative?0|-e:e},s.prototype.ucmp=function(t){if(this.length>t.length)return 1;if(this.length<t.length)return-1;for(var e=0,i=this.length-1;i>=0;i--){var r=0|this.words[i],n=0|t.words[i];if(r!==n){r<n?e=-1:r>n&&(e=1);break}}return e},s.prototype.gtn=function(t){return 1===this.cmpn(t)},s.prototype.gt=function(t){return 1===this.cmp(t)},s.prototype.gten=function(t){return this.cmpn(t)>=0},s.prototype.gte=function(t){return this.cmp(t)>=0},s.prototype.ltn=function(t){return-1===this.cmpn(t)},s.prototype.lt=function(t){return-1===this.cmp(t)},s.prototype.lten=function(t){return this.cmpn(t)<=0},s.prototype.lte=function(t){return this.cmp(t)<=0},s.prototype.eqn=function(t){return 0===this.cmpn(t)},s.prototype.eq=function(t){return 0===this.cmp(t)},s.red=function(t){return new M(t)},s.prototype.toRed=function(t){return r(!this.red,"Already a number in reduction context"),r(0===this.negative,"red works only with positives"),t.convertTo(this)._forceRed(t)},s.prototype.fromRed=function(){return r(this.red,"fromRed works only with numbers in reduction context"),this.red.convertFrom(this)},s.prototype._forceRed=function(t){return this.red=t,this},s.prototype.forceRed=function(t){return r(!this.red,"Already a number in reduction context"),this._forceRed(t)},s.prototype.redAdd=function(t){return r(this.red,"redAdd works only with red numbers"),this.red.add(this,t)},s.prototype.redIAdd=function(t){return r(this.red,"redIAdd works only with red numbers"),this.red.iadd(this,t)},s.prototype.redSub=function(t){return r(this.red,"redSub works only with red numbers"),this.red.sub(this,t)},s.prototype.redISub=function(t){return r(this.red,"redISub works only with red numbers"),this.red.isub(this,t)},s.prototype.redShl=function(t){return r(this.red,"redShl works only with red numbers"),this.red.shl(this,t)},s.prototype.redMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.mul(this,t)},s.prototype.redIMul=function(t){return r(this.red,"redMul works only with red numbers"),this.red._verify2(this,t),this.red.imul(this,t)},s.prototype.redSqr=function(){return r(this.red,"redSqr works only with red numbers"),this.red._verify1(this),this.red.sqr(this)},s.prototype.redISqr=function(){return r(this.red,"redISqr works only with red numbers"),this.red._verify1(this),this.red.isqr(this)},s.prototype.redSqrt=function(){return r(this.red,"redSqrt works only with red numbers"),this.red._verify1(this),this.red.sqrt(this)},s.prototype.redInvm=function(){return r(this.red,"redInvm works only with red numbers"),this.red._verify1(this),this.red.invm(this)},s.prototype.redNeg=function(){return r(this.red,"redNeg works only with red numbers"),this.red._verify1(this),this.red.neg(this)},s.prototype.redPow=function(t){return r(this.red&&!t.red,"redPow(normalNum)"),this.red._verify1(this),this.red.pow(this,t)};var v={k256:null,p224:null,p192:null,p25519:null};function y(t,e){this.name=t,this.p=new s(e,16),this.n=this.p.bitLength(),this.k=new s(1).iushln(this.n).isub(this.p),this.tmp=this._tmp()}function b(){y.call(this,"k256","ffffffff ffffffff ffffffff ffffffff ffffffff ffffffff fffffffe fffffc2f")}function _(){y.call(this,"p224","ffffffff ffffffff ffffffff ffffffff 00000000 00000000 00000001")}function x(){y.call(this,"p192","ffffffff ffffffff ffffffff fffffffe ffffffff ffffffff")}function w(){y.call(this,"25519","7fffffffffffffff ffffffffffffffff ffffffffffffffff ffffffffffffffed")}function M(t){if("string"==typeof t){var e=s._prime(t);this.m=e.p,this.prime=e}else r(t.gtn(1),"modulus must be greater than 1"),this.m=t,this.prime=null}function S(t){M.call(this,t),this.shift=this.m.bitLength(),this.shift%26!=0&&(this.shift+=26-this.shift%26),this.r=new s(1).iushln(this.shift),this.r2=this.imod(this.r.sqr()),this.rinv=this.r._invmp(this.m),this.minv=this.rinv.mul(this.r).isubn(1).div(this.m),this.minv=this.minv.umod(this.r),this.minv=this.r.sub(this.minv)}y.prototype._tmp=function(){var t=new s(null);return t.words=new Array(Math.ceil(this.n/13)),t},y.prototype.ireduce=function(t){var e,i=t;do{this.split(i,this.tmp),e=(i=(i=this.imulK(i)).iadd(this.tmp)).bitLength()}while(e>this.n);var r=e<this.n?-1:i.ucmp(this.p);return 0===r?(i.words[0]=0,i.length=1):r>0?i.isub(this.p):void 0!==i.strip?i.strip():i._strip(),i},y.prototype.split=function(t,e){t.iushrn(this.n,0,e)},y.prototype.imulK=function(t){return t.imul(this.k)},n(b,y),b.prototype.split=function(t,e){for(var i=4194303,r=Math.min(t.length,9),n=0;n<r;n++)e.words[n]=t.words[n];if(e.length=r,t.length<=9)return t.words[0]=0,void(t.length=1);var s=t.words[9];for(e.words[e.length++]=s&i,n=10;n<t.length;n++){var o=0|t.words[n];t.words[n-10]=(o&i)<<4|s>>>22,s=o}s>>>=22,t.words[n-10]=s,0===s&&t.length>10?t.length-=10:t.length-=9},b.prototype.imulK=function(t){t.words[t.length]=0,t.words[t.length+1]=0,t.length+=2;for(var e=0,i=0;i<t.length;i++){var r=0|t.words[i];e+=977*r,t.words[i]=67108863&e,e=64*r+(e/67108864|0)}return 0===t.words[t.length-1]&&(t.length--,0===t.words[t.length-1]&&t.length--),t},n(_,y),n(x,y),n(w,y),w.prototype.imulK=function(t){for(var e=0,i=0;i<t.length;i++){var r=19*(0|t.words[i])+e,n=67108863&r;r>>>=26,t.words[i]=n,e=r}return 0!==e&&(t.words[t.length++]=e),t},s._prime=function(t){if(v[t])return v[t];var e;if("k256"===t)e=new b;else if("p224"===t)e=new _;else if("p192"===t)e=new x;else{if("p25519"!==t)throw new Error("Unknown prime "+t);e=new w}return v[t]=e,e},M.prototype._verify1=function(t){r(0===t.negative,"red works only with positives"),r(t.red,"red works only with red numbers")},M.prototype._verify2=function(t,e){r(0===(t.negative|e.negative),"red works only with positives"),r(t.red&&t.red===e.red,"red works only with red numbers")},M.prototype.imod=function(t){return this.prime?this.prime.ireduce(t)._forceRed(this):t.umod(this.m)._forceRed(this)},M.prototype.neg=function(t){return t.isZero()?t.clone():this.m.sub(t)._forceRed(this)},M.prototype.add=function(t,e){this._verify2(t,e);var i=t.add(e);return i.cmp(this.m)>=0&&i.isub(this.m),i._forceRed(this)},M.prototype.iadd=function(t,e){this._verify2(t,e);var i=t.iadd(e);return i.cmp(this.m)>=0&&i.isub(this.m),i},M.prototype.sub=function(t,e){this._verify2(t,e);var i=t.sub(e);return i.cmpn(0)<0&&i.iadd(this.m),i._forceRed(this)},M.prototype.isub=function(t,e){this._verify2(t,e);var i=t.isub(e);return i.cmpn(0)<0&&i.iadd(this.m),i},M.prototype.shl=function(t,e){return this._verify1(t),this.imod(t.ushln(e))},M.prototype.imul=function(t,e){return this._verify2(t,e),this.imod(t.imul(e))},M.prototype.mul=function(t,e){return this._verify2(t,e),this.imod(t.mul(e))},M.prototype.isqr=function(t){return this.imul(t,t.clone())},M.prototype.sqr=function(t){return this.mul(t,t)},M.prototype.sqrt=function(t){if(t.isZero())return t.clone();var e=this.m.andln(3);if(r(e%2==1),3===e){var i=this.m.add(new s(1)).iushrn(2);return this.pow(t,i)}for(var n=this.m.subn(1),o=0;!n.isZero()&&0===n.andln(1);)o++,n.iushrn(1);r(!n.isZero());var a=new s(1).toRed(this),h=a.redNeg(),l=this.m.subn(1).iushrn(1),u=this.m.bitLength();for(u=new s(2*u*u).toRed(this);0!==this.pow(u,l).cmp(h);)u.redIAdd(h);for(var c=this.pow(u,n),d=this.pow(t,n.addn(1).iushrn(1)),f=this.pow(t,n),p=o;0!==f.cmp(a);){for(var m=f,g=0;0!==m.cmp(a);g++)m=m.redSqr();r(g<p);var v=this.pow(c,new s(1).iushln(p-g-1));d=d.redMul(v),c=v.redSqr(),f=f.redMul(c),p=g}return d},M.prototype.invm=function(t){var e=t._invmp(this.m);return 0!==e.negative?(e.negative=0,this.imod(e).redNeg()):this.imod(e)},M.prototype.pow=function(t,e){if(e.isZero())return new s(1).toRed(this);if(0===e.cmpn(1))return t.clone();var i=new Array(16);i[0]=new s(1).toRed(this),i[1]=t;for(var r=2;r<i.length;r++)i[r]=this.mul(i[r-1],t);var n=i[0],o=0,a=0,h=e.bitLength()%26;for(0===h&&(h=26),r=e.length-1;r>=0;r--){for(var l=e.words[r],u=h-1;u>=0;u--){var c=l>>u&1;n!==i[0]&&(n=this.sqr(n)),0!==c||0!==o?(o<<=1,o|=c,(4===++a||0===r&&0===u)&&(n=this.mul(n,i[o]),a=0,o=0)):a=0}h=26}return n},M.prototype.convertTo=function(t){var e=t.umod(this.m);return e===t?e.clone():e},M.prototype.convertFrom=function(t){var e=t.clone();return e.red=null,e},s.mont=function(t){return new S(t)},n(S,M),S.prototype.convertTo=function(t){return this.imod(t.ushln(this.shift))},S.prototype.convertFrom=function(t){var e=this.imod(t.mul(this.rinv));return e.red=null,e},S.prototype.imul=function(t,e){if(t.isZero()||e.isZero())return t.words[0]=0,t.length=1,t;var i=t.imul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),s=n;return n.cmp(this.m)>=0?s=n.isub(this.m):n.cmpn(0)<0&&(s=n.iadd(this.m)),s._forceRed(this)},S.prototype.mul=function(t,e){if(t.isZero()||e.isZero())return new s(0)._forceRed(this);var i=t.mul(e),r=i.maskn(this.shift).mul(this.minv).imaskn(this.shift).mul(this.m),n=i.isub(r).iushrn(this.shift),o=n;return n.cmp(this.m)>=0?o=n.isub(this.m):n.cmpn(0)<0&&(o=n.iadd(this.m)),o._forceRed(this)},S.prototype.invm=function(t){return this.imod(t._invmp(this.m).mul(this.r2))._forceRed(this)}}(t=i.nmd(t),this)},9437:(t,e,i)=>{"use strict";i.d(e,{JeP:()=>Fe});var r=i(4922),n=i(6763);function s(){let t=null,e=!1,i=null,r=null;function n(e,s){i(e,s),r=t.requestAnimationFrame(n)}return{start:function(){!0!==e&&null!==i&&(r=t.requestAnimationFrame(n),e=!0)},stop:function(){t.cancelAnimationFrame(r),e=!1},setAnimationLoop:function(t){i=t},setContext:function(e){t=e}}}function o(t){const e=new WeakMap;return{get:function(t){return t.isInterleavedBufferAttribute&&(t=t.data),e.get(t)},remove:function(i){i.isInterleavedBufferAttribute&&(i=i.data);const r=e.get(i);r&&(t.deleteBuffer(r.buffer),e.delete(i))},update:function(i,r){if(i.isInterleavedBufferAttribute&&(i=i.data),i.isGLBufferAttribute){const t=e.get(i);return void((!t||t.version<i.version)&&e.set(i,{buffer:i.buffer,type:i.type,bytesPerElement:i.elementSize,version:i.version}))}const n=e.get(i);if(void 0===n)e.set(i,function(e,i){const r=e.array,n=e.usage,s=r.byteLength,o=t.createBuffer();let a;if(t.bindBuffer(i,o),t.bufferData(i,r,n),e.onUploadCallback(),r instanceof Float32Array)a=t.FLOAT;else if(r instanceof Uint16Array)a=e.isFloat16BufferAttribute?t.HALF_FLOAT:t.UNSIGNED_SHORT;else if(r instanceof Int16Array)a=t.SHORT;else if(r instanceof Uint32Array)a=t.UNSIGNED_INT;else if(r instanceof Int32Array)a=t.INT;else if(r instanceof Int8Array)a=t.BYTE;else if(r instanceof Uint8Array)a=t.UNSIGNED_BYTE;else{if(!(r instanceof Uint8ClampedArray))throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+r);a=t.UNSIGNED_BYTE}return{buffer:o,type:a,bytesPerElement:r.BYTES_PER_ELEMENT,version:e.version,size:s}}(i,r));else if(n.version<i.version){if(n.size!==i.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");!function(e,i,r){const n=i.array,s=i.updateRanges;if(t.bindBuffer(r,e),0===s.length)t.bufferSubData(r,0,n);else{s.sort((t,e)=>t.start-e.start);let e=0;for(let t=1;t<s.length;t++){const i=s[e],r=s[t];r.start<=i.start+i.count+1?i.count=Math.max(i.count,r.start+r.count-i.start):(++e,s[e]=r)}s.length=e+1;for(let e=0,i=s.length;e<i;e++){const i=s[e];t.bufferSubData(r,i.start*n.BYTES_PER_ELEMENT,n,i.start,i.count)}i.clearUpdateRanges()}i.onUploadCallback()}(n.buffer,i,r),n.version=i.version}}}}const a={alphahash_fragment:"#ifdef USE_ALPHAHASH\n\tif ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;\n#endif",alphahash_pars_fragment:"#ifdef USE_ALPHAHASH\n\tconst float ALPHA_HASH_SCALE = 0.05;\n\tfloat hash2D( vec2 value ) {\n\t\treturn fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );\n\t}\n\tfloat hash3D( vec3 value ) {\n\t\treturn hash2D( vec2( hash2D( value.xy ), value.z ) );\n\t}\n\tfloat getAlphaHashThreshold( vec3 position ) {\n\t\tfloat maxDeriv = max(\n\t\t\tlength( dFdx( position.xyz ) ),\n\t\t\tlength( dFdy( position.xyz ) )\n\t\t);\n\t\tfloat pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );\n\t\tvec2 pixScales = vec2(\n\t\t\texp2( floor( log2( pixScale ) ) ),\n\t\t\texp2( ceil( log2( pixScale ) ) )\n\t\t);\n\t\tvec2 alpha = vec2(\n\t\t\thash3D( floor( pixScales.x * position.xyz ) ),\n\t\t\thash3D( floor( pixScales.y * position.xyz ) )\n\t\t);\n\t\tfloat lerpFactor = fract( log2( pixScale ) );\n\t\tfloat x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;\n\t\tfloat a = min( lerpFactor, 1.0 - lerpFactor );\n\t\tvec3 cases = vec3(\n\t\t\tx * x / ( 2.0 * a * ( 1.0 - a ) ),\n\t\t\t( x - 0.5 * a ) / ( 1.0 - a ),\n\t\t\t1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )\n\t\t);\n\t\tfloat threshold = ( x < ( 1.0 - a ) )\n\t\t\t? ( ( x < a ) ? cases.x : cases.y )\n\t\t\t: cases.z;\n\t\treturn clamp( threshold , 1.0e-6, 1.0 );\n\t}\n#endif",alphamap_fragment:"#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;\n#endif",alphamap_pars_fragment:"#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",alphatest_fragment:"#ifdef USE_ALPHATEST\n\t#ifdef ALPHA_TO_COVERAGE\n\tdiffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );\n\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\tif ( diffuseColor.a < alphaTest ) discard;\n\t#endif\n#endif",alphatest_pars_fragment:"#ifdef USE_ALPHATEST\n\tuniform float alphaTest;\n#endif",aomap_fragment:"#ifdef USE_AOMAP\n\tfloat ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;\n\treflectedLight.indirectDiffuse *= ambientOcclusion;\n\t#if defined( USE_CLEARCOAT ) \n\t\tclearcoatSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_SHEEN ) \n\t\tsheenSpecularIndirect *= ambientOcclusion;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD )\n\t\tfloat dotNV = saturate( dot( geometryNormal, geometryViewDir ) );\n\t\treflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );\n\t#endif\n#endif",aomap_pars_fragment:"#ifdef USE_AOMAP\n\tuniform sampler2D aoMap;\n\tuniform float aoMapIntensity;\n#endif",batching_pars_vertex:"#ifdef USE_BATCHING\n\t#if ! defined( GL_ANGLE_multi_draw )\n\t#define gl_DrawID _gl_DrawID\n\tuniform int _gl_DrawID;\n\t#endif\n\tuniform highp sampler2D batchingTexture;\n\tuniform highp usampler2D batchingIdTexture;\n\tmat4 getBatchingMatrix( const in float i ) {\n\t\tint size = textureSize( batchingTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n\tfloat getIndirectIndex( const in int i ) {\n\t\tint size = textureSize( batchingIdTexture, 0 ).x;\n\t\tint x = i % size;\n\t\tint y = i / size;\n\t\treturn float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );\n\t}\n#endif\n#ifdef USE_BATCHING_COLOR\n\tuniform sampler2D batchingColorTexture;\n\tvec3 getBatchingColor( const in float i ) {\n\t\tint size = textureSize( batchingColorTexture, 0 ).x;\n\t\tint j = int( i );\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\treturn texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;\n\t}\n#endif",batching_vertex:"#ifdef USE_BATCHING\n\tmat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );\n#endif",begin_vertex:"vec3 transformed = vec3( position );\n#ifdef USE_ALPHAHASH\n\tvPosition = vec3( position );\n#endif",beginnormal_vertex:"vec3 objectNormal = vec3( normal );\n#ifdef USE_TANGENT\n\tvec3 objectTangent = vec3( tangent.xyz );\n#endif",bsdfs:"float G_BlinnPhong_Implicit( ) {\n\treturn 0.25;\n}\nfloat D_BlinnPhong( const in float shininess, const in float dotNH ) {\n\treturn RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );\n}\nvec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( specularColor, 1.0, dotVH );\n\tfloat G = G_BlinnPhong_Implicit( );\n\tfloat D = D_BlinnPhong( shininess, dotNH );\n\treturn F * ( G * D );\n} // validated",iridescence_fragment:"#ifdef USE_IRIDESCENCE\n\tconst mat3 XYZ_TO_REC709 = mat3(\n\t\t 3.2404542, -0.9692660,  0.0556434,\n\t\t-1.5371385,  1.8760108, -0.2040259,\n\t\t-0.4985314,  0.0415560,  1.0572252\n\t);\n\tvec3 Fresnel0ToIor( vec3 fresnel0 ) {\n\t\tvec3 sqrtF0 = sqrt( fresnel0 );\n\t\treturn ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );\n\t}\n\tvec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );\n\t}\n\tfloat IorToFresnel0( float transmittedIor, float incidentIor ) {\n\t\treturn pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));\n\t}\n\tvec3 evalSensitivity( float OPD, vec3 shift ) {\n\t\tfloat phase = 2.0 * PI * OPD * 1.0e-9;\n\t\tvec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );\n\t\tvec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );\n\t\tvec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );\n\t\tvec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );\n\t\txyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );\n\t\txyz /= 1.0685e-7;\n\t\tvec3 rgb = XYZ_TO_REC709 * xyz;\n\t\treturn rgb;\n\t}\n\tvec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {\n\t\tvec3 I;\n\t\tfloat iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );\n\t\tfloat sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );\n\t\tfloat cosTheta2Sq = 1.0 - sinTheta2Sq;\n\t\tif ( cosTheta2Sq < 0.0 ) {\n\t\t\treturn vec3( 1.0 );\n\t\t}\n\t\tfloat cosTheta2 = sqrt( cosTheta2Sq );\n\t\tfloat R0 = IorToFresnel0( iridescenceIOR, outsideIOR );\n\t\tfloat R12 = F_Schlick( R0, 1.0, cosTheta1 );\n\t\tfloat T121 = 1.0 - R12;\n\t\tfloat phi12 = 0.0;\n\t\tif ( iridescenceIOR < outsideIOR ) phi12 = PI;\n\t\tfloat phi21 = PI - phi12;\n\t\tvec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );\t\tvec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );\n\t\tvec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );\n\t\tvec3 phi23 = vec3( 0.0 );\n\t\tif ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;\n\t\tif ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;\n\t\tif ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;\n\t\tfloat OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;\n\t\tvec3 phi = vec3( phi21 ) + phi23;\n\t\tvec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );\n\t\tvec3 r123 = sqrt( R123 );\n\t\tvec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );\n\t\tvec3 C0 = R12 + Rs;\n\t\tI = C0;\n\t\tvec3 Cm = Rs - T121;\n\t\tfor ( int m = 1; m <= 2; ++ m ) {\n\t\t\tCm *= r123;\n\t\t\tvec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );\n\t\t\tI += Cm * Sm;\n\t\t}\n\t\treturn max( I, vec3( 0.0 ) );\n\t}\n#endif",bumpmap_pars_fragment:"#ifdef USE_BUMPMAP\n\tuniform sampler2D bumpMap;\n\tuniform float bumpScale;\n\tvec2 dHdxy_fwd() {\n\t\tvec2 dSTdx = dFdx( vBumpMapUv );\n\t\tvec2 dSTdy = dFdy( vBumpMapUv );\n\t\tfloat Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;\n\t\tfloat dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;\n\t\tfloat dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;\n\t\treturn vec2( dBx, dBy );\n\t}\n\tvec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {\n\t\tvec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );\n\t\tvec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );\n\t\tvec3 vN = surf_norm;\n\t\tvec3 R1 = cross( vSigmaY, vN );\n\t\tvec3 R2 = cross( vN, vSigmaX );\n\t\tfloat fDet = dot( vSigmaX, R1 ) * faceDirection;\n\t\tvec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );\n\t\treturn normalize( abs( fDet ) * surf_norm - vGrad );\n\t}\n#endif",clipping_planes_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvec4 plane;\n\t#ifdef ALPHA_TO_COVERAGE\n\t\tfloat distanceToPlane, distanceGradient;\n\t\tfloat clipOpacity = 1.0;\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\tclipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\tif ( clipOpacity == 0.0 ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tfloat unionClipOpacity = 1.0;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tdistanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;\n\t\t\t\tdistanceGradient = fwidth( distanceToPlane ) / 2.0;\n\t\t\t\tunionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tclipOpacity *= 1.0 - unionClipOpacity;\n\t\t#endif\n\t\tdiffuseColor.a *= clipOpacity;\n\t\tif ( diffuseColor.a == 0.0 ) discard;\n\t#else\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {\n\t\t\tplane = clippingPlanes[ i ];\n\t\t\tif ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t\t#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES\n\t\t\tbool clipped = true;\n\t\t\t#pragma unroll_loop_start\n\t\t\tfor ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {\n\t\t\t\tplane = clippingPlanes[ i ];\n\t\t\t\tclipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;\n\t\t\t}\n\t\t\t#pragma unroll_loop_end\n\t\t\tif ( clipped ) discard;\n\t\t#endif\n\t#endif\n#endif",clipping_planes_pars_fragment:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n\tuniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];\n#endif",clipping_planes_pars_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvarying vec3 vClipPosition;\n#endif",clipping_planes_vertex:"#if NUM_CLIPPING_PLANES > 0\n\tvClipPosition = - mvPosition.xyz;\n#endif",color_fragment:"#if defined( USE_COLOR_ALPHA )\n\tdiffuseColor *= vColor;\n#elif defined( USE_COLOR )\n\tdiffuseColor.rgb *= vColor;\n#endif",color_pars_fragment:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR )\n\tvarying vec3 vColor;\n#endif",color_pars_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvarying vec4 vColor;\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvarying vec3 vColor;\n#endif",color_vertex:"#if defined( USE_COLOR_ALPHA )\n\tvColor = vec4( 1.0 );\n#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )\n\tvColor = vec3( 1.0 );\n#endif\n#ifdef USE_COLOR\n\tvColor *= color;\n#endif\n#ifdef USE_INSTANCING_COLOR\n\tvColor.xyz *= instanceColor.xyz;\n#endif\n#ifdef USE_BATCHING_COLOR\n\tvec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );\n\tvColor.xyz *= batchingColor.xyz;\n#endif",common:"#define PI 3.141592653589793\n#define PI2 6.283185307179586\n#define PI_HALF 1.5707963267948966\n#define RECIPROCAL_PI 0.3183098861837907\n#define RECIPROCAL_PI2 0.15915494309189535\n#define EPSILON 1e-6\n#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\n#define whiteComplement( a ) ( 1.0 - saturate( a ) )\nfloat pow2( const in float x ) { return x*x; }\nvec3 pow2( const in vec3 x ) { return x*x; }\nfloat pow3( const in float x ) { return x*x*x; }\nfloat pow4( const in float x ) { float x2 = x*x; return x2*x2; }\nfloat max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }\nfloat average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }\nhighp float rand( const in vec2 uv ) {\n\tconst highp float a = 12.9898, b = 78.233, c = 43758.5453;\n\thighp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );\n\treturn fract( sin( sn ) * c );\n}\n#ifdef HIGH_PRECISION\n\tfloat precisionSafeLength( vec3 v ) { return length( v ); }\n#else\n\tfloat precisionSafeLength( vec3 v ) {\n\t\tfloat maxComponent = max3( abs( v ) );\n\t\treturn length( v / maxComponent ) * maxComponent;\n\t}\n#endif\nstruct IncidentLight {\n\tvec3 color;\n\tvec3 direction;\n\tbool visible;\n};\nstruct ReflectedLight {\n\tvec3 directDiffuse;\n\tvec3 directSpecular;\n\tvec3 indirectDiffuse;\n\tvec3 indirectSpecular;\n};\n#ifdef USE_ALPHAHASH\n\tvarying vec3 vPosition;\n#endif\nvec3 transformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );\n}\nvec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {\n\treturn normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );\n}\nmat3 transposeMat3( const in mat3 m ) {\n\tmat3 tmp;\n\ttmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );\n\ttmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );\n\ttmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );\n\treturn tmp;\n}\nbool isPerspectiveMatrix( mat4 m ) {\n\treturn m[ 2 ][ 3 ] == - 1.0;\n}\nvec2 equirectUv( in vec3 dir ) {\n\tfloat u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;\n\tfloat v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;\n\treturn vec2( u, v );\n}\nvec3 BRDF_Lambert( const in vec3 diffuseColor ) {\n\treturn RECIPROCAL_PI * diffuseColor;\n}\nvec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n}\nfloat F_Schlick( const in float f0, const in float f90, const in float dotVH ) {\n\tfloat fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );\n\treturn f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );\n} // validated",cube_uv_reflection_fragment:"#ifdef ENVMAP_TYPE_CUBE_UV\n\t#define cubeUV_minMipLevel 4.0\n\t#define cubeUV_minTileSize 16.0\n\tfloat getFace( vec3 direction ) {\n\t\tvec3 absDirection = abs( direction );\n\t\tfloat face = - 1.0;\n\t\tif ( absDirection.x > absDirection.z ) {\n\t\t\tif ( absDirection.x > absDirection.y )\n\t\t\t\tface = direction.x > 0.0 ? 0.0 : 3.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t} else {\n\t\t\tif ( absDirection.z > absDirection.y )\n\t\t\t\tface = direction.z > 0.0 ? 2.0 : 5.0;\n\t\t\telse\n\t\t\t\tface = direction.y > 0.0 ? 1.0 : 4.0;\n\t\t}\n\t\treturn face;\n\t}\n\tvec2 getUV( vec3 direction, float face ) {\n\t\tvec2 uv;\n\t\tif ( face == 0.0 ) {\n\t\t\tuv = vec2( direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 1.0 ) {\n\t\t\tuv = vec2( - direction.x, - direction.z ) / abs( direction.y );\n\t\t} else if ( face == 2.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.y ) / abs( direction.z );\n\t\t} else if ( face == 3.0 ) {\n\t\t\tuv = vec2( - direction.z, direction.y ) / abs( direction.x );\n\t\t} else if ( face == 4.0 ) {\n\t\t\tuv = vec2( - direction.x, direction.z ) / abs( direction.y );\n\t\t} else {\n\t\t\tuv = vec2( direction.x, direction.y ) / abs( direction.z );\n\t\t}\n\t\treturn 0.5 * ( uv + 1.0 );\n\t}\n\tvec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {\n\t\tfloat face = getFace( direction );\n\t\tfloat filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );\n\t\tmipInt = max( mipInt, cubeUV_minMipLevel );\n\t\tfloat faceSize = exp2( mipInt );\n\t\thighp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;\n\t\tif ( face > 2.0 ) {\n\t\t\tuv.y += faceSize;\n\t\t\tface -= 3.0;\n\t\t}\n\t\tuv.x += face * faceSize;\n\t\tuv.x += filterInt * 3.0 * cubeUV_minTileSize;\n\t\tuv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );\n\t\tuv.x *= CUBEUV_TEXEL_WIDTH;\n\t\tuv.y *= CUBEUV_TEXEL_HEIGHT;\n\t\t#ifdef texture2DGradEXT\n\t\t\treturn texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;\n\t\t#else\n\t\t\treturn texture2D( envMap, uv ).rgb;\n\t\t#endif\n\t}\n\t#define cubeUV_r0 1.0\n\t#define cubeUV_m0 - 2.0\n\t#define cubeUV_r1 0.8\n\t#define cubeUV_m1 - 1.0\n\t#define cubeUV_r4 0.4\n\t#define cubeUV_m4 2.0\n\t#define cubeUV_r5 0.305\n\t#define cubeUV_m5 3.0\n\t#define cubeUV_r6 0.21\n\t#define cubeUV_m6 4.0\n\tfloat roughnessToMip( float roughness ) {\n\t\tfloat mip = 0.0;\n\t\tif ( roughness >= cubeUV_r1 ) {\n\t\t\tmip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;\n\t\t} else if ( roughness >= cubeUV_r4 ) {\n\t\t\tmip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;\n\t\t} else if ( roughness >= cubeUV_r5 ) {\n\t\t\tmip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;\n\t\t} else if ( roughness >= cubeUV_r6 ) {\n\t\t\tmip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;\n\t\t} else {\n\t\t\tmip = - 2.0 * log2( 1.16 * roughness );\t\t}\n\t\treturn mip;\n\t}\n\tvec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {\n\t\tfloat mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );\n\t\tfloat mipF = fract( mip );\n\t\tfloat mipInt = floor( mip );\n\t\tvec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );\n\t\tif ( mipF == 0.0 ) {\n\t\t\treturn vec4( color0, 1.0 );\n\t\t} else {\n\t\t\tvec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );\n\t\t\treturn vec4( mix( color0, color1, mipF ), 1.0 );\n\t\t}\n\t}\n#endif",defaultnormal_vertex:"vec3 transformedNormal = objectNormal;\n#ifdef USE_TANGENT\n\tvec3 transformedTangent = objectTangent;\n#endif\n#ifdef USE_BATCHING\n\tmat3 bm = mat3( batchingMatrix );\n\ttransformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );\n\ttransformedNormal = bm * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = bm * transformedTangent;\n\t#endif\n#endif\n#ifdef USE_INSTANCING\n\tmat3 im = mat3( instanceMatrix );\n\ttransformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );\n\ttransformedNormal = im * transformedNormal;\n\t#ifdef USE_TANGENT\n\t\ttransformedTangent = im * transformedTangent;\n\t#endif\n#endif\ntransformedNormal = normalMatrix * transformedNormal;\n#ifdef FLIP_SIDED\n\ttransformedNormal = - transformedNormal;\n#endif\n#ifdef USE_TANGENT\n\ttransformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;\n\t#ifdef FLIP_SIDED\n\t\ttransformedTangent = - transformedTangent;\n\t#endif\n#endif",displacementmap_pars_vertex:"#ifdef USE_DISPLACEMENTMAP\n\tuniform sampler2D displacementMap;\n\tuniform float displacementScale;\n\tuniform float displacementBias;\n#endif",displacementmap_vertex:"#ifdef USE_DISPLACEMENTMAP\n\ttransformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );\n#endif",emissivemap_fragment:"#ifdef USE_EMISSIVEMAP\n\tvec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE\n\t\temissiveColor = sRGBTransferEOTF( emissiveColor );\n\t#endif\n\ttotalEmissiveRadiance *= emissiveColor.rgb;\n#endif",emissivemap_pars_fragment:"#ifdef USE_EMISSIVEMAP\n\tuniform sampler2D emissiveMap;\n#endif",colorspace_fragment:"gl_FragColor = linearToOutputTexel( gl_FragColor );",colorspace_pars_fragment:"vec4 LinearTransferOETF( in vec4 value ) {\n\treturn value;\n}\nvec4 sRGBTransferEOTF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );\n}\nvec4 sRGBTransferOETF( in vec4 value ) {\n\treturn vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );\n}",envmap_fragment:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvec3 cameraToFrag;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToFrag = normalize( vWorldPosition - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvec3 reflectVec = reflect( cameraToFrag, worldNormal );\n\t\t#else\n\t\t\tvec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );\n\t\t#endif\n\t#else\n\t\tvec3 reflectVec = vReflect;\n\t#endif\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );\n\t#else\n\t\tvec4 envColor = vec4( 0.0 );\n\t#endif\n\t#ifdef ENVMAP_BLENDING_MULTIPLY\n\t\toutgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_MIX )\n\t\toutgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );\n\t#elif defined( ENVMAP_BLENDING_ADD )\n\t\toutgoingLight += envColor.xyz * specularStrength * reflectivity;\n\t#endif\n#endif",envmap_common_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float envMapIntensity;\n\tuniform float flipEnvMap;\n\tuniform mat3 envMapRotation;\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tuniform samplerCube envMap;\n\t#else\n\t\tuniform sampler2D envMap;\n\t#endif\n\t\n#endif",envmap_pars_fragment:"#ifdef USE_ENVMAP\n\tuniform float reflectivity;\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\tvarying vec3 vWorldPosition;\n\t\tuniform float refractionRatio;\n\t#else\n\t\tvarying vec3 vReflect;\n\t#endif\n#endif",envmap_pars_vertex:"#ifdef USE_ENVMAP\n\t#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )\n\t\t#define ENV_WORLDPOS\n\t#endif\n\t#ifdef ENV_WORLDPOS\n\t\t\n\t\tvarying vec3 vWorldPosition;\n\t#else\n\t\tvarying vec3 vReflect;\n\t\tuniform float refractionRatio;\n\t#endif\n#endif",envmap_physical_pars_fragment:"#ifdef USE_ENVMAP\n\tvec3 getIBLIrradiance( const in vec3 normal ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );\n\t\t\treturn PI * envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\tvec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {\n\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\tvec3 reflectVec = reflect( - viewDir, normal );\n\t\t\treflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );\n\t\t\treflectVec = inverseTransformDirection( reflectVec, viewMatrix );\n\t\t\tvec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );\n\t\t\treturn envMapColor.rgb * envMapIntensity;\n\t\t#else\n\t\t\treturn vec3( 0.0 );\n\t\t#endif\n\t}\n\t#ifdef USE_ANISOTROPY\n\t\tvec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {\n\t\t\t#ifdef ENVMAP_TYPE_CUBE_UV\n\t\t\t\tvec3 bentNormal = cross( bitangent, viewDir );\n\t\t\t\tbentNormal = normalize( cross( bentNormal, bitangent ) );\n\t\t\t\tbentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );\n\t\t\t\treturn getIBLRadiance( viewDir, bentNormal, roughness );\n\t\t\t#else\n\t\t\t\treturn vec3( 0.0 );\n\t\t\t#endif\n\t\t}\n\t#endif\n#endif",envmap_vertex:"#ifdef USE_ENVMAP\n\t#ifdef ENV_WORLDPOS\n\t\tvWorldPosition = worldPosition.xyz;\n\t#else\n\t\tvec3 cameraToVertex;\n\t\tif ( isOrthographic ) {\n\t\t\tcameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );\n\t\t} else {\n\t\t\tcameraToVertex = normalize( worldPosition.xyz - cameraPosition );\n\t\t}\n\t\tvec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\t\t#ifdef ENVMAP_MODE_REFLECTION\n\t\t\tvReflect = reflect( cameraToVertex, worldNormal );\n\t\t#else\n\t\t\tvReflect = refract( cameraToVertex, worldNormal, refractionRatio );\n\t\t#endif\n\t#endif\n#endif",fog_vertex:"#ifdef USE_FOG\n\tvFogDepth = - mvPosition.z;\n#endif",fog_pars_vertex:"#ifdef USE_FOG\n\tvarying float vFogDepth;\n#endif",fog_fragment:"#ifdef USE_FOG\n\t#ifdef FOG_EXP2\n\t\tfloat fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );\n\t#else\n\t\tfloat fogFactor = smoothstep( fogNear, fogFar, vFogDepth );\n\t#endif\n\tgl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );\n#endif",fog_pars_fragment:"#ifdef USE_FOG\n\tuniform vec3 fogColor;\n\tvarying float vFogDepth;\n\t#ifdef FOG_EXP2\n\t\tuniform float fogDensity;\n\t#else\n\t\tuniform float fogNear;\n\t\tuniform float fogFar;\n\t#endif\n#endif",gradientmap_pars_fragment:"#ifdef USE_GRADIENTMAP\n\tuniform sampler2D gradientMap;\n#endif\nvec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {\n\tfloat dotNL = dot( normal, lightDirection );\n\tvec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );\n\t#ifdef USE_GRADIENTMAP\n\t\treturn vec3( texture2D( gradientMap, coord ).r );\n\t#else\n\t\tvec2 fw = fwidth( coord ) * 0.5;\n\t\treturn mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );\n\t#endif\n}",lightmap_pars_fragment:"#ifdef USE_LIGHTMAP\n\tuniform sampler2D lightMap;\n\tuniform float lightMapIntensity;\n#endif",lights_lambert_fragment:"LambertMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularStrength = specularStrength;",lights_lambert_pars_fragment:"varying vec3 vViewPosition;\nstruct LambertMaterial {\n\tvec3 diffuseColor;\n\tfloat specularStrength;\n};\nvoid RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Lambert\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Lambert",lights_pars_begin:"uniform bool receiveShadow;\nuniform vec3 ambientLightColor;\n#if defined( USE_LIGHT_PROBES )\n\tuniform vec3 lightProbe[ 9 ];\n#endif\nvec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {\n\tfloat x = normal.x, y = normal.y, z = normal.z;\n\tvec3 result = shCoefficients[ 0 ] * 0.886227;\n\tresult += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;\n\tresult += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;\n\tresult += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;\n\tresult += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;\n\tresult += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;\n\tresult += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );\n\tresult += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;\n\tresult += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );\n\treturn result;\n}\nvec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {\n\tvec3 worldNormal = inverseTransformDirection( normal, viewMatrix );\n\tvec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );\n\treturn irradiance;\n}\nvec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {\n\tvec3 irradiance = ambientLightColor;\n\treturn irradiance;\n}\nfloat getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {\n\tfloat distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );\n\tif ( cutoffDistance > 0.0 ) {\n\t\tdistanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );\n\t}\n\treturn distanceFalloff;\n}\nfloat getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {\n\treturn smoothstep( coneCosine, penumbraCosine, angleCosine );\n}\n#if NUM_DIR_LIGHTS > 0\n\tstruct DirectionalLight {\n\t\tvec3 direction;\n\t\tvec3 color;\n\t};\n\tuniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];\n\tvoid getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {\n\t\tlight.color = directionalLight.color;\n\t\tlight.direction = directionalLight.direction;\n\t\tlight.visible = true;\n\t}\n#endif\n#if NUM_POINT_LIGHTS > 0\n\tstruct PointLight {\n\t\tvec3 position;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t};\n\tuniform PointLight pointLights[ NUM_POINT_LIGHTS ];\n\tvoid getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = pointLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat lightDistance = length( lVector );\n\t\tlight.color = pointLight.color;\n\t\tlight.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );\n\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t}\n#endif\n#if NUM_SPOT_LIGHTS > 0\n\tstruct SpotLight {\n\t\tvec3 position;\n\t\tvec3 direction;\n\t\tvec3 color;\n\t\tfloat distance;\n\t\tfloat decay;\n\t\tfloat coneCos;\n\t\tfloat penumbraCos;\n\t};\n\tuniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];\n\tvoid getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {\n\t\tvec3 lVector = spotLight.position - geometryPosition;\n\t\tlight.direction = normalize( lVector );\n\t\tfloat angleCos = dot( light.direction, spotLight.direction );\n\t\tfloat spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );\n\t\tif ( spotAttenuation > 0.0 ) {\n\t\t\tfloat lightDistance = length( lVector );\n\t\t\tlight.color = spotLight.color * spotAttenuation;\n\t\t\tlight.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );\n\t\t\tlight.visible = ( light.color != vec3( 0.0 ) );\n\t\t} else {\n\t\t\tlight.color = vec3( 0.0 );\n\t\t\tlight.visible = false;\n\t\t}\n\t}\n#endif\n#if NUM_RECT_AREA_LIGHTS > 0\n\tstruct RectAreaLight {\n\t\tvec3 color;\n\t\tvec3 position;\n\t\tvec3 halfWidth;\n\t\tvec3 halfHeight;\n\t};\n\tuniform sampler2D ltc_1;\tuniform sampler2D ltc_2;\n\tuniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];\n#endif\n#if NUM_HEMI_LIGHTS > 0\n\tstruct HemisphereLight {\n\t\tvec3 direction;\n\t\tvec3 skyColor;\n\t\tvec3 groundColor;\n\t};\n\tuniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];\n\tvec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {\n\t\tfloat dotNL = dot( normal, hemiLight.direction );\n\t\tfloat hemiDiffuseWeight = 0.5 * dotNL + 0.5;\n\t\tvec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );\n\t\treturn irradiance;\n\t}\n#endif",lights_toon_fragment:"ToonMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;",lights_toon_pars_fragment:"varying vec3 vViewPosition;\nstruct ToonMaterial {\n\tvec3 diffuseColor;\n};\nvoid RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\tvec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_Toon\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Toon",lights_phong_fragment:"BlinnPhongMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb;\nmaterial.specularColor = specular;\nmaterial.specularShininess = shininess;\nmaterial.specularStrength = specularStrength;",lights_phong_pars_fragment:"varying vec3 vViewPosition;\nstruct BlinnPhongMaterial {\n\tvec3 diffuseColor;\n\tvec3 specularColor;\n\tfloat specularShininess;\n\tfloat specularStrength;\n};\nvoid RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n\treflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;\n}\nvoid RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\n#define RE_Direct\t\t\t\tRE_Direct_BlinnPhong\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_BlinnPhong",lights_physical_fragment:"PhysicalMaterial material;\nmaterial.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );\nvec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );\nfloat geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );\nmaterial.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;\nmaterial.roughness = min( material.roughness, 1.0 );\n#ifdef IOR\n\tmaterial.ior = ior;\n\t#ifdef USE_SPECULAR\n\t\tfloat specularIntensityFactor = specularIntensity;\n\t\tvec3 specularColorFactor = specularColor;\n\t\t#ifdef USE_SPECULAR_COLORMAP\n\t\t\tspecularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;\n\t\t#endif\n\t\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\t\tspecularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;\n\t\t#endif\n\t\tmaterial.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );\n\t#else\n\t\tfloat specularIntensityFactor = 1.0;\n\t\tvec3 specularColorFactor = vec3( 1.0 );\n\t\tmaterial.specularF90 = 1.0;\n\t#endif\n\tmaterial.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );\n#else\n\tmaterial.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );\n\tmaterial.specularF90 = 1.0;\n#endif\n#ifdef USE_CLEARCOAT\n\tmaterial.clearcoat = clearcoat;\n\tmaterial.clearcoatRoughness = clearcoatRoughness;\n\tmaterial.clearcoatF0 = vec3( 0.04 );\n\tmaterial.clearcoatF90 = 1.0;\n\t#ifdef USE_CLEARCOATMAP\n\t\tmaterial.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;\n\t#endif\n\t#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\t\tmaterial.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;\n\t#endif\n\tmaterial.clearcoat = saturate( material.clearcoat );\tmaterial.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );\n\tmaterial.clearcoatRoughness += geometryRoughness;\n\tmaterial.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );\n#endif\n#ifdef USE_DISPERSION\n\tmaterial.dispersion = dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tmaterial.iridescence = iridescence;\n\tmaterial.iridescenceIOR = iridescenceIOR;\n\t#ifdef USE_IRIDESCENCEMAP\n\t\tmaterial.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;\n\t#endif\n\t#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\t\tmaterial.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;\n\t#else\n\t\tmaterial.iridescenceThickness = iridescenceThicknessMaximum;\n\t#endif\n#endif\n#ifdef USE_SHEEN\n\tmaterial.sheenColor = sheenColor;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tmaterial.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;\n\t#endif\n\tmaterial.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tmaterial.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\t#ifdef USE_ANISOTROPYMAP\n\t\tmat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );\n\t\tvec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;\n\t\tvec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;\n\t#else\n\t\tvec2 anisotropyV = anisotropyVector;\n\t#endif\n\tmaterial.anisotropy = length( anisotropyV );\n\tif( material.anisotropy == 0.0 ) {\n\t\tanisotropyV = vec2( 1.0, 0.0 );\n\t} else {\n\t\tanisotropyV /= material.anisotropy;\n\t\tmaterial.anisotropy = saturate( material.anisotropy );\n\t}\n\tmaterial.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );\n\tmaterial.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;\n\tmaterial.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;\n#endif",lights_physical_pars_fragment:"struct PhysicalMaterial {\n\tvec3 diffuseColor;\n\tfloat roughness;\n\tvec3 specularColor;\n\tfloat specularF90;\n\tfloat dispersion;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat clearcoat;\n\t\tfloat clearcoatRoughness;\n\t\tvec3 clearcoatF0;\n\t\tfloat clearcoatF90;\n\t#endif\n\t#ifdef USE_IRIDESCENCE\n\t\tfloat iridescence;\n\t\tfloat iridescenceIOR;\n\t\tfloat iridescenceThickness;\n\t\tvec3 iridescenceFresnel;\n\t\tvec3 iridescenceF0;\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tvec3 sheenColor;\n\t\tfloat sheenRoughness;\n\t#endif\n\t#ifdef IOR\n\t\tfloat ior;\n\t#endif\n\t#ifdef USE_TRANSMISSION\n\t\tfloat transmission;\n\t\tfloat transmissionAlpha;\n\t\tfloat thickness;\n\t\tfloat attenuationDistance;\n\t\tvec3 attenuationColor;\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat anisotropy;\n\t\tfloat alphaT;\n\t\tvec3 anisotropyT;\n\t\tvec3 anisotropyB;\n\t#endif\n};\nvec3 clearcoatSpecularDirect = vec3( 0.0 );\nvec3 clearcoatSpecularIndirect = vec3( 0.0 );\nvec3 sheenSpecularDirect = vec3( 0.0 );\nvec3 sheenSpecularIndirect = vec3(0.0 );\nvec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {\n    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );\n    float x2 = x * x;\n    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );\n    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );\n}\nfloat V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {\n\tfloat a2 = pow2( alpha );\n\tfloat gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );\n\tfloat gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );\n\treturn 0.5 / max( gv + gl, EPSILON );\n}\nfloat D_GGX( const in float alpha, const in float dotNH ) {\n\tfloat a2 = pow2( alpha );\n\tfloat denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;\n\treturn RECIPROCAL_PI * a2 / pow2( denom );\n}\n#ifdef USE_ANISOTROPY\n\tfloat V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {\n\t\tfloat gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );\n\t\tfloat gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );\n\t\tfloat v = 0.5 / ( gv + gl );\n\t\treturn saturate(v);\n\t}\n\tfloat D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {\n\t\tfloat a2 = alphaT * alphaB;\n\t\thighp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );\n\t\thighp float v2 = dot( v, v );\n\t\tfloat w2 = a2 / v2;\n\t\treturn RECIPROCAL_PI * a2 * pow2 ( w2 );\n\t}\n#endif\n#ifdef USE_CLEARCOAT\n\tvec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {\n\t\tvec3 f0 = material.clearcoatF0;\n\t\tfloat f90 = material.clearcoatF90;\n\t\tfloat roughness = material.clearcoatRoughness;\n\t\tfloat alpha = pow2( roughness );\n\t\tvec3 halfDir = normalize( lightDir + viewDir );\n\t\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\t\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\t\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\t\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\t\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t\treturn F * ( V * D );\n\t}\n#endif\nvec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {\n\tvec3 f0 = material.specularColor;\n\tfloat f90 = material.specularF90;\n\tfloat roughness = material.roughness;\n\tfloat alpha = pow2( roughness );\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat dotVH = saturate( dot( viewDir, halfDir ) );\n\tvec3 F = F_Schlick( f0, f90, dotVH );\n\t#ifdef USE_IRIDESCENCE\n\t\tF = mix( F, material.iridescenceFresnel, material.iridescence );\n\t#endif\n\t#ifdef USE_ANISOTROPY\n\t\tfloat dotTL = dot( material.anisotropyT, lightDir );\n\t\tfloat dotTV = dot( material.anisotropyT, viewDir );\n\t\tfloat dotTH = dot( material.anisotropyT, halfDir );\n\t\tfloat dotBL = dot( material.anisotropyB, lightDir );\n\t\tfloat dotBV = dot( material.anisotropyB, viewDir );\n\t\tfloat dotBH = dot( material.anisotropyB, halfDir );\n\t\tfloat V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );\n\t\tfloat D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );\n\t#else\n\t\tfloat V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );\n\t\tfloat D = D_GGX( alpha, dotNH );\n\t#endif\n\treturn F * ( V * D );\n}\nvec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {\n\tconst float LUT_SIZE = 64.0;\n\tconst float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;\n\tconst float LUT_BIAS = 0.5 / LUT_SIZE;\n\tfloat dotNV = saturate( dot( N, V ) );\n\tvec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );\n\tuv = uv * LUT_SCALE + LUT_BIAS;\n\treturn uv;\n}\nfloat LTC_ClippedSphereFormFactor( const in vec3 f ) {\n\tfloat l = length( f );\n\treturn max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );\n}\nvec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {\n\tfloat x = dot( v1, v2 );\n\tfloat y = abs( x );\n\tfloat a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;\n\tfloat b = 3.4175940 + ( 4.1616724 + y ) * y;\n\tfloat v = a / b;\n\tfloat theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;\n\treturn cross( v1, v2 ) * theta_sintheta;\n}\nvec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {\n\tvec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];\n\tvec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];\n\tvec3 lightNormal = cross( v1, v2 );\n\tif( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );\n\tvec3 T1, T2;\n\tT1 = normalize( V - N * dot( V, N ) );\n\tT2 = - cross( N, T1 );\n\tmat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );\n\tvec3 coords[ 4 ];\n\tcoords[ 0 ] = mat * ( rectCoords[ 0 ] - P );\n\tcoords[ 1 ] = mat * ( rectCoords[ 1 ] - P );\n\tcoords[ 2 ] = mat * ( rectCoords[ 2 ] - P );\n\tcoords[ 3 ] = mat * ( rectCoords[ 3 ] - P );\n\tcoords[ 0 ] = normalize( coords[ 0 ] );\n\tcoords[ 1 ] = normalize( coords[ 1 ] );\n\tcoords[ 2 ] = normalize( coords[ 2 ] );\n\tcoords[ 3 ] = normalize( coords[ 3 ] );\n\tvec3 vectorFormFactor = vec3( 0.0 );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );\n\tvectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );\n\tfloat result = LTC_ClippedSphereFormFactor( vectorFormFactor );\n\treturn vec3( result );\n}\n#if defined( USE_SHEEN )\nfloat D_Charlie( float roughness, float dotNH ) {\n\tfloat alpha = pow2( roughness );\n\tfloat invAlpha = 1.0 / alpha;\n\tfloat cos2h = dotNH * dotNH;\n\tfloat sin2h = max( 1.0 - cos2h, 0.0078125 );\n\treturn ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );\n}\nfloat V_Neubelt( float dotNV, float dotNL ) {\n\treturn saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );\n}\nvec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {\n\tvec3 halfDir = normalize( lightDir + viewDir );\n\tfloat dotNL = saturate( dot( normal, lightDir ) );\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat dotNH = saturate( dot( normal, halfDir ) );\n\tfloat D = D_Charlie( sheenRoughness, dotNH );\n\tfloat V = V_Neubelt( dotNV, dotNL );\n\treturn sheenColor * ( D * V );\n}\n#endif\nfloat IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tfloat r2 = roughness * roughness;\n\tfloat a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;\n\tfloat b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;\n\tfloat DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );\n\treturn saturate( DG * RECIPROCAL_PI );\n}\nvec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {\n\tfloat dotNV = saturate( dot( normal, viewDir ) );\n\tconst vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );\n\tconst vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );\n\tvec4 r = roughness * c0 + c1;\n\tfloat a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;\n\tvec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;\n\treturn fab;\n}\nvec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\treturn specularColor * fab.x + specularF90 * fab.y;\n}\n#ifdef USE_IRIDESCENCE\nvoid computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#else\nvoid computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {\n#endif\n\tvec2 fab = DFGApprox( normal, viewDir, roughness );\n\t#ifdef USE_IRIDESCENCE\n\t\tvec3 Fr = mix( specularColor, iridescenceF0, iridescence );\n\t#else\n\t\tvec3 Fr = specularColor;\n\t#endif\n\tvec3 FssEss = Fr * fab.x + specularF90 * fab.y;\n\tfloat Ess = fab.x + fab.y;\n\tfloat Ems = 1.0 - Ess;\n\tvec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;\tvec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );\n\tsingleScatter += FssEss;\n\tmultiScatter += Fms * Ems;\n}\n#if NUM_RECT_AREA_LIGHTS > 0\n\tvoid RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\t\tvec3 normal = geometryNormal;\n\t\tvec3 viewDir = geometryViewDir;\n\t\tvec3 position = geometryPosition;\n\t\tvec3 lightPos = rectAreaLight.position;\n\t\tvec3 halfWidth = rectAreaLight.halfWidth;\n\t\tvec3 halfHeight = rectAreaLight.halfHeight;\n\t\tvec3 lightColor = rectAreaLight.color;\n\t\tfloat roughness = material.roughness;\n\t\tvec3 rectCoords[ 4 ];\n\t\trectCoords[ 0 ] = lightPos + halfWidth - halfHeight;\t\trectCoords[ 1 ] = lightPos - halfWidth - halfHeight;\n\t\trectCoords[ 2 ] = lightPos - halfWidth + halfHeight;\n\t\trectCoords[ 3 ] = lightPos + halfWidth + halfHeight;\n\t\tvec2 uv = LTC_Uv( normal, viewDir, roughness );\n\t\tvec4 t1 = texture2D( ltc_1, uv );\n\t\tvec4 t2 = texture2D( ltc_2, uv );\n\t\tmat3 mInv = mat3(\n\t\t\tvec3( t1.x, 0, t1.y ),\n\t\t\tvec3(    0, 1,    0 ),\n\t\t\tvec3( t1.z, 0, t1.w )\n\t\t);\n\t\tvec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );\n\t\treflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );\n\t\treflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );\n\t}\n#endif\nvoid RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\tfloat dotNL = saturate( dot( geometryNormal, directLight.direction ) );\n\tvec3 irradiance = dotNL * directLight.color;\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );\n\t\tvec3 ccIrradiance = dotNLcc * directLight.color;\n\t\tclearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );\n\t#endif\n\treflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );\n\treflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {\n\treflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );\n}\nvoid RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );\n\t#endif\n\t#ifdef USE_SHEEN\n\t\tsheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );\n\t#endif\n\tvec3 singleScattering = vec3( 0.0 );\n\tvec3 multiScattering = vec3( 0.0 );\n\tvec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;\n\t#ifdef USE_IRIDESCENCE\n\t\tcomputeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );\n\t#else\n\t\tcomputeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );\n\t#endif\n\tvec3 totalScattering = singleScattering + multiScattering;\n\tvec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );\n\treflectedLight.indirectSpecular += radiance * singleScattering;\n\treflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;\n\treflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;\n}\n#define RE_Direct\t\t\t\tRE_Direct_Physical\n#define RE_Direct_RectArea\t\tRE_Direct_RectArea_Physical\n#define RE_IndirectDiffuse\t\tRE_IndirectDiffuse_Physical\n#define RE_IndirectSpecular\t\tRE_IndirectSpecular_Physical\nfloat computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {\n\treturn saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );\n}",lights_fragment_begin:"\nvec3 geometryPosition = - vViewPosition;\nvec3 geometryNormal = normal;\nvec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );\nvec3 geometryClearcoatNormal = vec3( 0.0 );\n#ifdef USE_CLEARCOAT\n\tgeometryClearcoatNormal = clearcoatNormal;\n#endif\n#ifdef USE_IRIDESCENCE\n\tfloat dotNVi = saturate( dot( normal, geometryViewDir ) );\n\tif ( material.iridescenceThickness == 0.0 ) {\n\t\tmaterial.iridescence = 0.0;\n\t} else {\n\t\tmaterial.iridescence = saturate( material.iridescence );\n\t}\n\tif ( material.iridescence > 0.0 ) {\n\t\tmaterial.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );\n\t\tmaterial.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );\n\t}\n#endif\nIncidentLight directLight;\n#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )\n\tPointLight pointLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {\n\t\tpointLight = pointLights[ i ];\n\t\tgetPointLightInfo( pointLight, geometryPosition, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )\n\t\tpointLightShadow = pointLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )\n\tSpotLight spotLight;\n\tvec4 spotColor;\n\tvec3 spotLightCoord;\n\tbool inSpotLightMap;\n\t#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {\n\t\tspotLight = spotLights[ i ];\n\t\tgetSpotLightInfo( spotLight, geometryPosition, directLight );\n\t\t#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX\n\t\t#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS\n\t\t#else\n\t\t#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )\n\t\t#endif\n\t\t#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )\n\t\t\tspotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;\n\t\t\tinSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );\n\t\t\tspotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );\n\t\t\tdirectLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;\n\t\t#endif\n\t\t#undef SPOT_LIGHT_MAP_INDEX\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\tspotLightShadow = spotLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )\n\tDirectionalLight directionalLight;\n\t#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLightShadow;\n\t#endif\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {\n\t\tdirectionalLight = directionalLights[ i ];\n\t\tgetDirectionalLightInfo( directionalLight, directLight );\n\t\t#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )\n\t\tdirectionalLightShadow = directionalLightShadows[ i ];\n\t\tdirectLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t\t#endif\n\t\tRE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )\n\tRectAreaLight rectAreaLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {\n\t\trectAreaLight = rectAreaLights[ i ];\n\t\tRE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n\t}\n\t#pragma unroll_loop_end\n#endif\n#if defined( RE_IndirectDiffuse )\n\tvec3 iblIrradiance = vec3( 0.0 );\n\tvec3 irradiance = getAmbientLightIrradiance( ambientLightColor );\n\t#if defined( USE_LIGHT_PROBES )\n\t\tirradiance += getLightProbeIrradiance( lightProbe, geometryNormal );\n\t#endif\n\t#if ( NUM_HEMI_LIGHTS > 0 )\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {\n\t\t\tirradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if defined( RE_IndirectSpecular )\n\tvec3 radiance = vec3( 0.0 );\n\tvec3 clearcoatRadiance = vec3( 0.0 );\n#endif",lights_fragment_maps:"#if defined( RE_IndirectDiffuse )\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\tvec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;\n\t\tirradiance += lightMapIrradiance;\n\t#endif\n\t#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )\n\t\tiblIrradiance += getIBLIrradiance( geometryNormal );\n\t#endif\n#endif\n#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )\n\t#ifdef USE_ANISOTROPY\n\t\tradiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );\n\t#else\n\t\tradiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tclearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );\n\t#endif\n#endif",lights_fragment_end:"#if defined( RE_IndirectDiffuse )\n\tRE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif\n#if defined( RE_IndirectSpecular )\n\tRE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );\n#endif",logdepthbuf_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tgl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;\n#endif",logdepthbuf_pars_fragment:"#if defined( USE_LOGDEPTHBUF )\n\tuniform float logDepthBufFC;\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_pars_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvarying float vFragDepth;\n\tvarying float vIsPerspective;\n#endif",logdepthbuf_vertex:"#ifdef USE_LOGDEPTHBUF\n\tvFragDepth = 1.0 + gl_Position.w;\n\tvIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );\n#endif",map_fragment:"#ifdef USE_MAP\n\tvec4 sampledDiffuseColor = texture2D( map, vMapUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\tsampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );\n\t#endif\n\tdiffuseColor *= sampledDiffuseColor;\n#endif",map_pars_fragment:"#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif",map_particle_fragment:"#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t#if defined( USE_POINTS_UV )\n\t\tvec2 uv = vUv;\n\t#else\n\t\tvec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tdiffuseColor *= texture2D( map, uv );\n#endif\n#ifdef USE_ALPHAMAP\n\tdiffuseColor.a *= texture2D( alphaMap, uv ).g;\n#endif",map_particle_pars_fragment:"#if defined( USE_POINTS_UV )\n\tvarying vec2 vUv;\n#else\n\t#if defined( USE_MAP ) || defined( USE_ALPHAMAP )\n\t\tuniform mat3 uvTransform;\n\t#endif\n#endif\n#ifdef USE_MAP\n\tuniform sampler2D map;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform sampler2D alphaMap;\n#endif",metalnessmap_fragment:"float metalnessFactor = metalness;\n#ifdef USE_METALNESSMAP\n\tvec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );\n\tmetalnessFactor *= texelMetalness.b;\n#endif",metalnessmap_pars_fragment:"#ifdef USE_METALNESSMAP\n\tuniform sampler2D metalnessMap;\n#endif",morphinstance_vertex:"#ifdef USE_INSTANCING_MORPH\n\tfloat morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\tfloat morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tmorphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;\n\t}\n#endif",morphcolor_vertex:"#if defined( USE_MORPHCOLORS )\n\tvColor *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\t#if defined( USE_COLOR_ALPHA )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];\n\t\t#elif defined( USE_COLOR )\n\t\t\tif ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];\n\t\t#endif\n\t}\n#endif",morphnormal_vertex:"#ifdef USE_MORPHNORMALS\n\tobjectNormal *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",morphtarget_pars_vertex:"#ifdef USE_MORPHTARGETS\n\t#ifndef USE_INSTANCING_MORPH\n\t\tuniform float morphTargetBaseInfluence;\n\t\tuniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];\n\t#endif\n\tuniform sampler2DArray morphTargetsTexture;\n\tuniform ivec2 morphTargetsTextureSize;\n\tvec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {\n\t\tint texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;\n\t\tint y = texelIndex / morphTargetsTextureSize.x;\n\t\tint x = texelIndex - y * morphTargetsTextureSize.x;\n\t\tivec3 morphUV = ivec3( x, y, morphTargetIndex );\n\t\treturn texelFetch( morphTargetsTexture, morphUV, 0 );\n\t}\n#endif",morphtarget_vertex:"#ifdef USE_MORPHTARGETS\n\ttransformed *= morphTargetBaseInfluence;\n\tfor ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {\n\t\tif ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];\n\t}\n#endif",normal_fragment_begin:"float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;\n#ifdef FLAT_SHADED\n\tvec3 fdx = dFdx( vViewPosition );\n\tvec3 fdy = dFdy( vViewPosition );\n\tvec3 normal = normalize( cross( fdx, fdy ) );\n#else\n\tvec3 normal = normalize( vNormal );\n\t#ifdef DOUBLE_SIDED\n\t\tnormal *= faceDirection;\n\t#endif\n#endif\n#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn = getTangentFrame( - vViewPosition, normal,\n\t\t#if defined( USE_NORMALMAP )\n\t\t\tvNormalMapUv\n\t\t#elif defined( USE_CLEARCOAT_NORMALMAP )\n\t\t\tvClearcoatNormalMapUv\n\t\t#else\n\t\t\tvUv\n\t\t#endif\n\t\t);\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn[0] *= faceDirection;\n\t\ttbn[1] *= faceDirection;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\t#ifdef USE_TANGENT\n\t\tmat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );\n\t#else\n\t\tmat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );\n\t#endif\n\t#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )\n\t\ttbn2[0] *= faceDirection;\n\t\ttbn2[1] *= faceDirection;\n\t#endif\n#endif\nvec3 nonPerturbedNormal = normal;",normal_fragment_maps:"#ifdef USE_NORMALMAP_OBJECTSPACE\n\tnormal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\t#ifdef FLIP_SIDED\n\t\tnormal = - normal;\n\t#endif\n\t#ifdef DOUBLE_SIDED\n\t\tnormal = normal * faceDirection;\n\t#endif\n\tnormal = normalize( normalMatrix * normal );\n#elif defined( USE_NORMALMAP_TANGENTSPACE )\n\tvec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;\n\tmapN.xy *= normalScale;\n\tnormal = normalize( tbn * mapN );\n#elif defined( USE_BUMPMAP )\n\tnormal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );\n#endif",normal_pars_fragment:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_pars_vertex:"#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n\t#ifdef USE_TANGENT\n\t\tvarying vec3 vTangent;\n\t\tvarying vec3 vBitangent;\n\t#endif\n#endif",normal_vertex:"#ifndef FLAT_SHADED\n\tvNormal = normalize( transformedNormal );\n\t#ifdef USE_TANGENT\n\t\tvTangent = normalize( transformedTangent );\n\t\tvBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );\n\t#endif\n#endif",normalmap_pars_fragment:"#ifdef USE_NORMALMAP\n\tuniform sampler2D normalMap;\n\tuniform vec2 normalScale;\n#endif\n#ifdef USE_NORMALMAP_OBJECTSPACE\n\tuniform mat3 normalMatrix;\n#endif\n#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )\n\tmat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {\n\t\tvec3 q0 = dFdx( eye_pos.xyz );\n\t\tvec3 q1 = dFdy( eye_pos.xyz );\n\t\tvec2 st0 = dFdx( uv.st );\n\t\tvec2 st1 = dFdy( uv.st );\n\t\tvec3 N = surf_norm;\n\t\tvec3 q1perp = cross( q1, N );\n\t\tvec3 q0perp = cross( N, q0 );\n\t\tvec3 T = q1perp * st0.x + q0perp * st1.x;\n\t\tvec3 B = q1perp * st0.y + q0perp * st1.y;\n\t\tfloat det = max( dot( T, T ), dot( B, B ) );\n\t\tfloat scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );\n\t\treturn mat3( T * scale, B * scale, N );\n\t}\n#endif",clearcoat_normal_fragment_begin:"#ifdef USE_CLEARCOAT\n\tvec3 clearcoatNormal = nonPerturbedNormal;\n#endif",clearcoat_normal_fragment_maps:"#ifdef USE_CLEARCOAT_NORMALMAP\n\tvec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;\n\tclearcoatMapN.xy *= clearcoatNormalScale;\n\tclearcoatNormal = normalize( tbn2 * clearcoatMapN );\n#endif",clearcoat_pars_fragment:"#ifdef USE_CLEARCOATMAP\n\tuniform sampler2D clearcoatMap;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform sampler2D clearcoatNormalMap;\n\tuniform vec2 clearcoatNormalScale;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform sampler2D clearcoatRoughnessMap;\n#endif",iridescence_pars_fragment:"#ifdef USE_IRIDESCENCEMAP\n\tuniform sampler2D iridescenceMap;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform sampler2D iridescenceThicknessMap;\n#endif",opaque_fragment:"#ifdef OPAQUE\ndiffuseColor.a = 1.0;\n#endif\n#ifdef USE_TRANSMISSION\ndiffuseColor.a *= material.transmissionAlpha;\n#endif\ngl_FragColor = vec4( outgoingLight, diffuseColor.a );",packing:"vec3 packNormalToRGB( const in vec3 normal ) {\n\treturn normalize( normal ) * 0.5 + 0.5;\n}\nvec3 unpackRGBToNormal( const in vec3 rgb ) {\n\treturn 2.0 * rgb.xyz - 1.0;\n}\nconst float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;\nconst float Inv255 = 1. / 255.;\nconst vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );\nconst vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );\nconst vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );\nconst vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );\nvec4 packDepthToRGBA( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec4( 0., 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec4( 1., 1., 1., 1. );\n\tfloat vuf;\n\tfloat af = modf( v * PackFactors.a, vuf );\n\tfloat bf = modf( vuf * ShiftRight8, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );\n}\nvec3 packDepthToRGB( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec3( 0., 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec3( 1., 1., 1. );\n\tfloat vuf;\n\tfloat bf = modf( v * PackFactors.b, vuf );\n\tfloat gf = modf( vuf * ShiftRight8, vuf );\n\treturn vec3( vuf * Inv255, gf * PackUpscale, bf );\n}\nvec2 packDepthToRG( const in float v ) {\n\tif( v <= 0.0 )\n\t\treturn vec2( 0., 0. );\n\tif( v >= 1.0 )\n\t\treturn vec2( 1., 1. );\n\tfloat vuf;\n\tfloat gf = modf( v * 256., vuf );\n\treturn vec2( vuf * Inv255, gf );\n}\nfloat unpackRGBAToDepth( const in vec4 v ) {\n\treturn dot( v, UnpackFactors4 );\n}\nfloat unpackRGBToDepth( const in vec3 v ) {\n\treturn dot( v, UnpackFactors3 );\n}\nfloat unpackRGToDepth( const in vec2 v ) {\n\treturn v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;\n}\nvec4 pack2HalfToRGBA( const in vec2 v ) {\n\tvec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );\n\treturn vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );\n}\nvec2 unpackRGBATo2Half( const in vec4 v ) {\n\treturn vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );\n}\nfloat viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( viewZ + near ) / ( near - far );\n}\nfloat orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn depth * ( near - far ) - near;\n}\nfloat viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {\n\treturn ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );\n}\nfloat perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {\n\treturn ( near * far ) / ( ( far - near ) * depth - far );\n}",premultiplied_alpha_fragment:"#ifdef PREMULTIPLIED_ALPHA\n\tgl_FragColor.rgb *= gl_FragColor.a;\n#endif",project_vertex:"vec4 mvPosition = vec4( transformed, 1.0 );\n#ifdef USE_BATCHING\n\tmvPosition = batchingMatrix * mvPosition;\n#endif\n#ifdef USE_INSTANCING\n\tmvPosition = instanceMatrix * mvPosition;\n#endif\nmvPosition = modelViewMatrix * mvPosition;\ngl_Position = projectionMatrix * mvPosition;",dithering_fragment:"#ifdef DITHERING\n\tgl_FragColor.rgb = dithering( gl_FragColor.rgb );\n#endif",dithering_pars_fragment:"#ifdef DITHERING\n\tvec3 dithering( vec3 color ) {\n\t\tfloat grid_position = rand( gl_FragCoord.xy );\n\t\tvec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );\n\t\tdither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );\n\t\treturn color + dither_shift_RGB;\n\t}\n#endif",roughnessmap_fragment:"float roughnessFactor = roughness;\n#ifdef USE_ROUGHNESSMAP\n\tvec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );\n\troughnessFactor *= texelRoughness.g;\n#endif",roughnessmap_pars_fragment:"#ifdef USE_ROUGHNESSMAP\n\tuniform sampler2D roughnessMap;\n#endif",shadowmap_pars_fragment:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#if NUM_SPOT_LIGHT_MAPS > 0\n\tuniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n\tfloat texture2DCompare( sampler2D depths, vec2 uv, float compare ) {\n\t\treturn step( compare, unpackRGBAToDepth( texture2D( depths, uv ) ) );\n\t}\n\tvec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {\n\t\treturn unpackRGBATo2Half( texture2D( shadow, uv ) );\n\t}\n\tfloat VSMShadow (sampler2D shadow, vec2 uv, float compare ){\n\t\tfloat occlusion = 1.0;\n\t\tvec2 distribution = texture2DDistribution( shadow, uv );\n\t\tfloat hard_shadow = step( compare , distribution.x );\n\t\tif (hard_shadow != 1.0 ) {\n\t\t\tfloat distance = compare - distribution.x ;\n\t\t\tfloat variance = max( 0.00000, distribution.y * distribution.y );\n\t\t\tfloat softness_probability = variance / (variance + distance * distance );\t\t\tsoftness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );\t\t\tocclusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );\n\t\t}\n\t\treturn occlusion;\n\t}\n\tfloat getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {\n\t\tfloat shadow = 1.0;\n\t\tshadowCoord.xyz /= shadowCoord.w;\n\t\tshadowCoord.z += shadowBias;\n\t\tbool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;\n\t\tbool frustumTest = inFrustum && shadowCoord.z <= 1.0;\n\t\tif ( frustumTest ) {\n\t\t#if defined( SHADOWMAP_TYPE_PCF )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx0 = - texelSize.x * shadowRadius;\n\t\t\tfloat dy0 = - texelSize.y * shadowRadius;\n\t\t\tfloat dx1 = + texelSize.x * shadowRadius;\n\t\t\tfloat dy1 = + texelSize.y * shadowRadius;\n\t\t\tfloat dx2 = dx0 / 2.0;\n\t\t\tfloat dy2 = dy0 / 2.0;\n\t\t\tfloat dx3 = dx1 / 2.0;\n\t\t\tfloat dy3 = dy1 / 2.0;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )\n\t\t\t) * ( 1.0 / 17.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_PCF_SOFT )\n\t\t\tvec2 texelSize = vec2( 1.0 ) / shadowMapSize;\n\t\t\tfloat dx = texelSize.x;\n\t\t\tfloat dy = texelSize.y;\n\t\t\tvec2 uv = shadowCoord.xy;\n\t\t\tvec2 f = fract( uv * shadowMapSize + 0.5 );\n\t\t\tuv -= f * texelSize;\n\t\t\tshadow = (\n\t\t\t\ttexture2DCompare( shadowMap, uv, shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +\n\t\t\t\ttexture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),\n\t\t\t\t\t f.x ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t f.y ) +\n\t\t\t\tmix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),\n\t\t\t\t\t\t  f.x ),\n\t\t\t\t\t f.y )\n\t\t\t) * ( 1.0 / 9.0 );\n\t\t#elif defined( SHADOWMAP_TYPE_VSM )\n\t\t\tshadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#else\n\t\t\tshadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );\n\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n\tvec2 cubeToUV( vec3 v, float texelSizeY ) {\n\t\tvec3 absV = abs( v );\n\t\tfloat scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );\n\t\tabsV *= scaleToCube;\n\t\tv *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );\n\t\tvec2 planar = v.xy;\n\t\tfloat almostATexel = 1.5 * texelSizeY;\n\t\tfloat almostOne = 1.0 - almostATexel;\n\t\tif ( absV.z >= almostOne ) {\n\t\t\tif ( v.z > 0.0 )\n\t\t\t\tplanar.x = 4.0 - v.x;\n\t\t} else if ( absV.x >= almostOne ) {\n\t\t\tfloat signX = sign( v.x );\n\t\t\tplanar.x = v.z * signX + 2.0 * signX;\n\t\t} else if ( absV.y >= almostOne ) {\n\t\t\tfloat signY = sign( v.y );\n\t\t\tplanar.x = v.x + 2.0 * signY + 2.0;\n\t\t\tplanar.y = v.z * signY - 2.0;\n\t\t}\n\t\treturn vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );\n\t}\n\tfloat getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {\n\t\tfloat shadow = 1.0;\n\t\tvec3 lightToPosition = shadowCoord.xyz;\n\t\t\n\t\tfloat lightToPositionLength = length( lightToPosition );\n\t\tif ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {\n\t\t\tfloat dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );\t\t\tdp += shadowBias;\n\t\t\tvec3 bd3D = normalize( lightToPosition );\n\t\t\tvec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );\n\t\t\t#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )\n\t\t\t\tvec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;\n\t\t\t\tshadow = (\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +\n\t\t\t\t\ttexture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )\n\t\t\t\t) * ( 1.0 / 9.0 );\n\t\t\t#else\n\t\t\t\tshadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );\n\t\t\t#endif\n\t\t}\n\t\treturn mix( 1.0, shadow, shadowIntensity );\n\t}\n#endif",shadowmap_pars_vertex:"#if NUM_SPOT_LIGHT_COORDS > 0\n\tuniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];\n\tvarying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];\n#endif\n#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\tuniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tvarying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];\n\t\tstruct DirectionalLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\t\tstruct SpotLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t};\n\t\tuniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\tuniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tvarying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];\n\t\tstruct PointLightShadow {\n\t\t\tfloat shadowIntensity;\n\t\t\tfloat shadowBias;\n\t\t\tfloat shadowNormalBias;\n\t\t\tfloat shadowRadius;\n\t\t\tvec2 shadowMapSize;\n\t\t\tfloat shadowCameraNear;\n\t\t\tfloat shadowCameraFar;\n\t\t};\n\t\tuniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];\n\t#endif\n#endif",shadowmap_vertex:"#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )\n\tvec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );\n\tvec4 shadowWorldPosition;\n#endif\n#if defined( USE_SHADOWMAP )\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\t\t#pragma unroll_loop_start\n\t\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\t\tshadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );\n\t\t\tvPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;\n\t\t}\n\t\t#pragma unroll_loop_end\n\t#endif\n#endif\n#if NUM_SPOT_LIGHT_COORDS > 0\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {\n\t\tshadowWorldPosition = worldPosition;\n\t\t#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )\n\t\t\tshadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;\n\t\t#endif\n\t\tvSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;\n\t}\n\t#pragma unroll_loop_end\n#endif",shadowmask_pars_fragment:"float getShadowMask() {\n\tfloat shadow = 1.0;\n\t#ifdef USE_SHADOWMAP\n\t#if NUM_DIR_LIGHT_SHADOWS > 0\n\tDirectionalLightShadow directionalLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {\n\t\tdirectionalLight = directionalLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_SPOT_LIGHT_SHADOWS > 0\n\tSpotLightShadow spotLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {\n\t\tspotLight = spotLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#if NUM_POINT_LIGHT_SHADOWS > 0\n\tPointLightShadow pointLight;\n\t#pragma unroll_loop_start\n\tfor ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {\n\t\tpointLight = pointLightShadows[ i ];\n\t\tshadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;\n\t}\n\t#pragma unroll_loop_end\n\t#endif\n\t#endif\n\treturn shadow;\n}",skinbase_vertex:"#ifdef USE_SKINNING\n\tmat4 boneMatX = getBoneMatrix( skinIndex.x );\n\tmat4 boneMatY = getBoneMatrix( skinIndex.y );\n\tmat4 boneMatZ = getBoneMatrix( skinIndex.z );\n\tmat4 boneMatW = getBoneMatrix( skinIndex.w );\n#endif",skinning_pars_vertex:"#ifdef USE_SKINNING\n\tuniform mat4 bindMatrix;\n\tuniform mat4 bindMatrixInverse;\n\tuniform highp sampler2D boneTexture;\n\tmat4 getBoneMatrix( const in float i ) {\n\t\tint size = textureSize( boneTexture, 0 ).x;\n\t\tint j = int( i ) * 4;\n\t\tint x = j % size;\n\t\tint y = j / size;\n\t\tvec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );\n\t\tvec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );\n\t\tvec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );\n\t\tvec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );\n\t\treturn mat4( v1, v2, v3, v4 );\n\t}\n#endif",skinning_vertex:"#ifdef USE_SKINNING\n\tvec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );\n\tvec4 skinned = vec4( 0.0 );\n\tskinned += boneMatX * skinVertex * skinWeight.x;\n\tskinned += boneMatY * skinVertex * skinWeight.y;\n\tskinned += boneMatZ * skinVertex * skinWeight.z;\n\tskinned += boneMatW * skinVertex * skinWeight.w;\n\ttransformed = ( bindMatrixInverse * skinned ).xyz;\n#endif",skinnormal_vertex:"#ifdef USE_SKINNING\n\tmat4 skinMatrix = mat4( 0.0 );\n\tskinMatrix += skinWeight.x * boneMatX;\n\tskinMatrix += skinWeight.y * boneMatY;\n\tskinMatrix += skinWeight.z * boneMatZ;\n\tskinMatrix += skinWeight.w * boneMatW;\n\tskinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;\n\tobjectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;\n\t#ifdef USE_TANGENT\n\t\tobjectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;\n\t#endif\n#endif",specularmap_fragment:"float specularStrength;\n#ifdef USE_SPECULARMAP\n\tvec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );\n\tspecularStrength = texelSpecular.r;\n#else\n\tspecularStrength = 1.0;\n#endif",specularmap_pars_fragment:"#ifdef USE_SPECULARMAP\n\tuniform sampler2D specularMap;\n#endif",tonemapping_fragment:"#if defined( TONE_MAPPING )\n\tgl_FragColor.rgb = toneMapping( gl_FragColor.rgb );\n#endif",tonemapping_pars_fragment:"#ifndef saturate\n#define saturate( a ) clamp( a, 0.0, 1.0 )\n#endif\nuniform float toneMappingExposure;\nvec3 LinearToneMapping( vec3 color ) {\n\treturn saturate( toneMappingExposure * color );\n}\nvec3 ReinhardToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\treturn saturate( color / ( vec3( 1.0 ) + color ) );\n}\nvec3 CineonToneMapping( vec3 color ) {\n\tcolor *= toneMappingExposure;\n\tcolor = max( vec3( 0.0 ), color - 0.004 );\n\treturn pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );\n}\nvec3 RRTAndODTFit( vec3 v ) {\n\tvec3 a = v * ( v + 0.0245786 ) - 0.000090537;\n\tvec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;\n\treturn a / b;\n}\nvec3 ACESFilmicToneMapping( vec3 color ) {\n\tconst mat3 ACESInputMat = mat3(\n\t\tvec3( 0.59719, 0.07600, 0.02840 ),\t\tvec3( 0.35458, 0.90834, 0.13383 ),\n\t\tvec3( 0.04823, 0.01566, 0.83777 )\n\t);\n\tconst mat3 ACESOutputMat = mat3(\n\t\tvec3(  1.60475, -0.10208, -0.00327 ),\t\tvec3( -0.53108,  1.10813, -0.07276 ),\n\t\tvec3( -0.07367, -0.00605,  1.07602 )\n\t);\n\tcolor *= toneMappingExposure / 0.6;\n\tcolor = ACESInputMat * color;\n\tcolor = RRTAndODTFit( color );\n\tcolor = ACESOutputMat * color;\n\treturn saturate( color );\n}\nconst mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(\n\tvec3( 1.6605, - 0.1246, - 0.0182 ),\n\tvec3( - 0.5876, 1.1329, - 0.1006 ),\n\tvec3( - 0.0728, - 0.0083, 1.1187 )\n);\nconst mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(\n\tvec3( 0.6274, 0.0691, 0.0164 ),\n\tvec3( 0.3293, 0.9195, 0.0880 ),\n\tvec3( 0.0433, 0.0113, 0.8956 )\n);\nvec3 agxDefaultContrastApprox( vec3 x ) {\n\tvec3 x2 = x * x;\n\tvec3 x4 = x2 * x2;\n\treturn + 15.5 * x4 * x2\n\t\t- 40.14 * x4 * x\n\t\t+ 31.96 * x4\n\t\t- 6.868 * x2 * x\n\t\t+ 0.4298 * x2\n\t\t+ 0.1191 * x\n\t\t- 0.00232;\n}\nvec3 AgXToneMapping( vec3 color ) {\n\tconst mat3 AgXInsetMatrix = mat3(\n\t\tvec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),\n\t\tvec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),\n\t\tvec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )\n\t);\n\tconst mat3 AgXOutsetMatrix = mat3(\n\t\tvec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),\n\t\tvec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),\n\t\tvec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )\n\t);\n\tconst float AgxMinEv = - 12.47393;\tconst float AgxMaxEv = 4.026069;\n\tcolor *= toneMappingExposure;\n\tcolor = LINEAR_SRGB_TO_LINEAR_REC2020 * color;\n\tcolor = AgXInsetMatrix * color;\n\tcolor = max( color, 1e-10 );\tcolor = log2( color );\n\tcolor = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );\n\tcolor = clamp( color, 0.0, 1.0 );\n\tcolor = agxDefaultContrastApprox( color );\n\tcolor = AgXOutsetMatrix * color;\n\tcolor = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );\n\tcolor = LINEAR_REC2020_TO_LINEAR_SRGB * color;\n\tcolor = clamp( color, 0.0, 1.0 );\n\treturn color;\n}\nvec3 NeutralToneMapping( vec3 color ) {\n\tconst float StartCompression = 0.8 - 0.04;\n\tconst float Desaturation = 0.15;\n\tcolor *= toneMappingExposure;\n\tfloat x = min( color.r, min( color.g, color.b ) );\n\tfloat offset = x < 0.08 ? x - 6.25 * x * x : 0.04;\n\tcolor -= offset;\n\tfloat peak = max( color.r, max( color.g, color.b ) );\n\tif ( peak < StartCompression ) return color;\n\tfloat d = 1. - StartCompression;\n\tfloat newPeak = 1. - d * d / ( peak + d - StartCompression );\n\tcolor *= newPeak / peak;\n\tfloat g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );\n\treturn mix( color, vec3( newPeak ), g );\n}\nvec3 CustomToneMapping( vec3 color ) { return color; }",transmission_fragment:"#ifdef USE_TRANSMISSION\n\tmaterial.transmission = transmission;\n\tmaterial.transmissionAlpha = 1.0;\n\tmaterial.thickness = thickness;\n\tmaterial.attenuationDistance = attenuationDistance;\n\tmaterial.attenuationColor = attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tmaterial.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tmaterial.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;\n\t#endif\n\tvec3 pos = vWorldPosition;\n\tvec3 v = normalize( cameraPosition - pos );\n\tvec3 n = inverseTransformDirection( normal, viewMatrix );\n\tvec4 transmitted = getIBLVolumeRefraction(\n\t\tn, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,\n\t\tpos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,\n\t\tmaterial.attenuationColor, material.attenuationDistance );\n\tmaterial.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );\n\ttotalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );\n#endif",transmission_pars_fragment:"#ifdef USE_TRANSMISSION\n\tuniform float transmission;\n\tuniform float thickness;\n\tuniform float attenuationDistance;\n\tuniform vec3 attenuationColor;\n\t#ifdef USE_TRANSMISSIONMAP\n\t\tuniform sampler2D transmissionMap;\n\t#endif\n\t#ifdef USE_THICKNESSMAP\n\t\tuniform sampler2D thicknessMap;\n\t#endif\n\tuniform vec2 transmissionSamplerSize;\n\tuniform sampler2D transmissionSamplerMap;\n\tuniform mat4 modelMatrix;\n\tuniform mat4 projectionMatrix;\n\tvarying vec3 vWorldPosition;\n\tfloat w0( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );\n\t}\n\tfloat w1( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );\n\t}\n\tfloat w2( float a ){\n\t\treturn ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );\n\t}\n\tfloat w3( float a ) {\n\t\treturn ( 1.0 / 6.0 ) * ( a * a * a );\n\t}\n\tfloat g0( float a ) {\n\t\treturn w0( a ) + w1( a );\n\t}\n\tfloat g1( float a ) {\n\t\treturn w2( a ) + w3( a );\n\t}\n\tfloat h0( float a ) {\n\t\treturn - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );\n\t}\n\tfloat h1( float a ) {\n\t\treturn 1.0 + w3( a ) / ( w2( a ) + w3( a ) );\n\t}\n\tvec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {\n\t\tuv = uv * texelSize.zw + 0.5;\n\t\tvec2 iuv = floor( uv );\n\t\tvec2 fuv = fract( uv );\n\t\tfloat g0x = g0( fuv.x );\n\t\tfloat g1x = g1( fuv.x );\n\t\tfloat h0x = h0( fuv.x );\n\t\tfloat h1x = h1( fuv.x );\n\t\tfloat h0y = h0( fuv.y );\n\t\tfloat h1y = h1( fuv.y );\n\t\tvec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\tvec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;\n\t\treturn g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +\n\t\t\tg1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );\n\t}\n\tvec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {\n\t\tvec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );\n\t\tvec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );\n\t\tvec2 fLodSizeInv = 1.0 / fLodSize;\n\t\tvec2 cLodSizeInv = 1.0 / cLodSize;\n\t\tvec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );\n\t\tvec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );\n\t\treturn mix( fSample, cSample, fract( lod ) );\n\t}\n\tvec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {\n\t\tvec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );\n\t\tvec3 modelScale;\n\t\tmodelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );\n\t\tmodelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );\n\t\tmodelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );\n\t\treturn normalize( refractionVector ) * thickness * modelScale;\n\t}\n\tfloat applyIorToRoughness( const in float roughness, const in float ior ) {\n\t\treturn roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );\n\t}\n\tvec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {\n\t\tfloat lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );\n\t\treturn textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );\n\t}\n\tvec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tif ( isinf( attenuationDistance ) ) {\n\t\t\treturn vec3( 1.0 );\n\t\t} else {\n\t\t\tvec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;\n\t\t\tvec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );\t\t\treturn transmittance;\n\t\t}\n\t}\n\tvec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,\n\t\tconst in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,\n\t\tconst in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,\n\t\tconst in vec3 attenuationColor, const in float attenuationDistance ) {\n\t\tvec4 transmittedLight;\n\t\tvec3 transmittance;\n\t\t#ifdef USE_DISPERSION\n\t\t\tfloat halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;\n\t\t\tvec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );\n\t\t\tfor ( int i = 0; i < 3; i ++ ) {\n\t\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );\n\t\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\t\trefractionCoords += 1.0;\n\t\t\t\trefractionCoords /= 2.0;\n\t\t\t\tvec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );\n\t\t\t\ttransmittedLight[ i ] = transmissionSample[ i ];\n\t\t\t\ttransmittedLight.a += transmissionSample.a;\n\t\t\t\ttransmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];\n\t\t\t}\n\t\t\ttransmittedLight.a /= 3.0;\n\t\t#else\n\t\t\tvec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );\n\t\t\tvec3 refractedRayExit = position + transmissionRay;\n\t\t\tvec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );\n\t\t\tvec2 refractionCoords = ndcPos.xy / ndcPos.w;\n\t\t\trefractionCoords += 1.0;\n\t\t\trefractionCoords /= 2.0;\n\t\t\ttransmittedLight = getTransmissionSample( refractionCoords, roughness, ior );\n\t\t\ttransmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );\n\t\t#endif\n\t\tvec3 attenuatedColor = transmittance * transmittedLight.rgb;\n\t\tvec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );\n\t\tfloat transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;\n\t\treturn vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );\n\t}\n#endif",uv_pars_fragment:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_pars_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvarying vec2 vUv;\n#endif\n#ifdef USE_MAP\n\tuniform mat3 mapTransform;\n\tvarying vec2 vMapUv;\n#endif\n#ifdef USE_ALPHAMAP\n\tuniform mat3 alphaMapTransform;\n\tvarying vec2 vAlphaMapUv;\n#endif\n#ifdef USE_LIGHTMAP\n\tuniform mat3 lightMapTransform;\n\tvarying vec2 vLightMapUv;\n#endif\n#ifdef USE_AOMAP\n\tuniform mat3 aoMapTransform;\n\tvarying vec2 vAoMapUv;\n#endif\n#ifdef USE_BUMPMAP\n\tuniform mat3 bumpMapTransform;\n\tvarying vec2 vBumpMapUv;\n#endif\n#ifdef USE_NORMALMAP\n\tuniform mat3 normalMapTransform;\n\tvarying vec2 vNormalMapUv;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tuniform mat3 displacementMapTransform;\n\tvarying vec2 vDisplacementMapUv;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tuniform mat3 emissiveMapTransform;\n\tvarying vec2 vEmissiveMapUv;\n#endif\n#ifdef USE_METALNESSMAP\n\tuniform mat3 metalnessMapTransform;\n\tvarying vec2 vMetalnessMapUv;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tuniform mat3 roughnessMapTransform;\n\tvarying vec2 vRoughnessMapUv;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tuniform mat3 anisotropyMapTransform;\n\tvarying vec2 vAnisotropyMapUv;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tuniform mat3 clearcoatMapTransform;\n\tvarying vec2 vClearcoatMapUv;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tuniform mat3 clearcoatNormalMapTransform;\n\tvarying vec2 vClearcoatNormalMapUv;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tuniform mat3 clearcoatRoughnessMapTransform;\n\tvarying vec2 vClearcoatRoughnessMapUv;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tuniform mat3 sheenColorMapTransform;\n\tvarying vec2 vSheenColorMapUv;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tuniform mat3 sheenRoughnessMapTransform;\n\tvarying vec2 vSheenRoughnessMapUv;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tuniform mat3 iridescenceMapTransform;\n\tvarying vec2 vIridescenceMapUv;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tuniform mat3 iridescenceThicknessMapTransform;\n\tvarying vec2 vIridescenceThicknessMapUv;\n#endif\n#ifdef USE_SPECULARMAP\n\tuniform mat3 specularMapTransform;\n\tvarying vec2 vSpecularMapUv;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tuniform mat3 specularColorMapTransform;\n\tvarying vec2 vSpecularColorMapUv;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tuniform mat3 specularIntensityMapTransform;\n\tvarying vec2 vSpecularIntensityMapUv;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tuniform mat3 transmissionMapTransform;\n\tvarying vec2 vTransmissionMapUv;\n#endif\n#ifdef USE_THICKNESSMAP\n\tuniform mat3 thicknessMapTransform;\n\tvarying vec2 vThicknessMapUv;\n#endif",uv_vertex:"#if defined( USE_UV ) || defined( USE_ANISOTROPY )\n\tvUv = vec3( uv, 1 ).xy;\n#endif\n#ifdef USE_MAP\n\tvMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ALPHAMAP\n\tvAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_LIGHTMAP\n\tvLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_AOMAP\n\tvAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_BUMPMAP\n\tvBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_NORMALMAP\n\tvNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_DISPLACEMENTMAP\n\tvDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_EMISSIVEMAP\n\tvEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_METALNESSMAP\n\tvMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ROUGHNESSMAP\n\tvRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_ANISOTROPYMAP\n\tvAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOATMAP\n\tvClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_NORMALMAP\n\tvClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_CLEARCOAT_ROUGHNESSMAP\n\tvClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCEMAP\n\tvIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_IRIDESCENCE_THICKNESSMAP\n\tvIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_COLORMAP\n\tvSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SHEEN_ROUGHNESSMAP\n\tvSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULARMAP\n\tvSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_COLORMAP\n\tvSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_SPECULAR_INTENSITYMAP\n\tvSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_TRANSMISSIONMAP\n\tvTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;\n#endif\n#ifdef USE_THICKNESSMAP\n\tvThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;\n#endif",worldpos_vertex:"#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0\n\tvec4 worldPosition = vec4( transformed, 1.0 );\n\t#ifdef USE_BATCHING\n\t\tworldPosition = batchingMatrix * worldPosition;\n\t#endif\n\t#ifdef USE_INSTANCING\n\t\tworldPosition = instanceMatrix * worldPosition;\n\t#endif\n\tworldPosition = modelMatrix * worldPosition;\n#endif",background_vert:"varying vec2 vUv;\nuniform mat3 uvTransform;\nvoid main() {\n\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\tgl_Position = vec4( position.xy, 1.0, 1.0 );\n}",background_frag:"uniform sampler2D t2D;\nuniform float backgroundIntensity;\nvarying vec2 vUv;\nvoid main() {\n\tvec4 texColor = texture2D( t2D, vUv );\n\t#ifdef DECODE_VIDEO_TEXTURE\n\t\ttexColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",backgroundCube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",backgroundCube_frag:"#ifdef ENVMAP_TYPE_CUBE\n\tuniform samplerCube envMap;\n#elif defined( ENVMAP_TYPE_CUBE_UV )\n\tuniform sampler2D envMap;\n#endif\nuniform float flipEnvMap;\nuniform float backgroundBlurriness;\nuniform float backgroundIntensity;\nuniform mat3 backgroundRotation;\nvarying vec3 vWorldDirection;\n#include <cube_uv_reflection_fragment>\nvoid main() {\n\t#ifdef ENVMAP_TYPE_CUBE\n\t\tvec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );\n\t#elif defined( ENVMAP_TYPE_CUBE_UV )\n\t\tvec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );\n\t#else\n\t\tvec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t#endif\n\ttexColor.rgb *= backgroundIntensity;\n\tgl_FragColor = texColor;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",cube_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n\tgl_Position.z = gl_Position.w;\n}",cube_frag:"uniform samplerCube tCube;\nuniform float tFlip;\nuniform float opacity;\nvarying vec3 vWorldDirection;\nvoid main() {\n\tvec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );\n\tgl_FragColor = texColor;\n\tgl_FragColor.a *= opacity;\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",depth_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvHighPrecisionZW = gl_Position.zw;\n}",depth_frag:"#if DEPTH_PACKING == 3200\n\tuniform float opacity;\n#endif\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvarying vec2 vHighPrecisionZW;\nvoid main() {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#if DEPTH_PACKING == 3200\n\t\tdiffuseColor.a = opacity;\n\t#endif\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <logdepthbuf_fragment>\n\tfloat fragCoordZ = 0.5 * vHighPrecisionZW[0] / vHighPrecisionZW[1] + 0.5;\n\t#if DEPTH_PACKING == 3200\n\t\tgl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );\n\t#elif DEPTH_PACKING == 3201\n\t\tgl_FragColor = packDepthToRGBA( fragCoordZ );\n\t#elif DEPTH_PACKING == 3202\n\t\tgl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );\n\t#elif DEPTH_PACKING == 3203\n\t\tgl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );\n\t#endif\n}",distanceRGBA_vert:"#define DISTANCE\nvarying vec3 vWorldPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <skinbase_vertex>\n\t#include <morphinstance_vertex>\n\t#ifdef USE_DISPLACEMENTMAP\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <worldpos_vertex>\n\t#include <clipping_planes_vertex>\n\tvWorldPosition = worldPosition.xyz;\n}",distanceRGBA_frag:"#define DISTANCE\nuniform vec3 referencePosition;\nuniform float nearDistance;\nuniform float farDistance;\nvarying vec3 vWorldPosition;\n#include <common>\n#include <packing>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main () {\n\tvec4 diffuseColor = vec4( 1.0 );\n\t#include <clipping_planes_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\tfloat dist = length( vWorldPosition - referencePosition );\n\tdist = ( dist - nearDistance ) / ( farDistance - nearDistance );\n\tdist = saturate( dist );\n\tgl_FragColor = packDepthToRGBA( dist );\n}",equirect_vert:"varying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvWorldDirection = transformDirection( position, modelMatrix );\n\t#include <begin_vertex>\n\t#include <project_vertex>\n}",equirect_frag:"uniform sampler2D tEquirect;\nvarying vec3 vWorldDirection;\n#include <common>\nvoid main() {\n\tvec3 direction = normalize( vWorldDirection );\n\tvec2 sampleUV = equirectUv( direction );\n\tgl_FragColor = texture2D( tEquirect, sampleUV );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n}",linedashed_vert:"uniform float scale;\nattribute float lineDistance;\nvarying float vLineDistance;\n#include <common>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\tvLineDistance = scale * lineDistance;\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",linedashed_frag:"uniform vec3 diffuse;\nuniform float opacity;\nuniform float dashSize;\nuniform float totalSize;\nvarying float vLineDistance;\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tif ( mod( vLineDistance, totalSize ) > dashSize ) {\n\t\tdiscard;\n\t}\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",meshbasic_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )\n\t\t#include <beginnormal_vertex>\n\t\t#include <morphnormal_vertex>\n\t\t#include <skinbase_vertex>\n\t\t#include <skinnormal_vertex>\n\t\t#include <defaultnormal_vertex>\n\t#endif\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <fog_vertex>\n}",meshbasic_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#ifndef FLAT_SHADED\n\tvarying vec3 vNormal;\n#endif\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\t#ifdef USE_LIGHTMAP\n\t\tvec4 lightMapTexel = texture2D( lightMap, vLightMapUv );\n\t\treflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;\n\t#else\n\t\treflectedLight.indirectDiffuse += vec3( 1.0 );\n\t#endif\n\t#include <aomap_fragment>\n\treflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\tvec3 outgoingLight = reflectedLight.indirectDiffuse;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshlambert_vert:"#define LAMBERT\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshlambert_frag:"#define LAMBERT\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_lambert_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_lambert_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshmatcap_vert:"#define MATCAP\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <color_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n\tvViewPosition = - mvPosition.xyz;\n}",meshmatcap_frag:"#define MATCAP\nuniform vec3 diffuse;\nuniform float opacity;\nuniform sampler2D matcap;\nvarying vec3 vViewPosition;\n#include <common>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tvec3 viewDir = normalize( vViewPosition );\n\tvec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );\n\tvec3 y = cross( viewDir, x );\n\tvec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;\n\t#ifdef USE_MATCAP\n\t\tvec4 matcapColor = texture2D( matcap, uv );\n\t#else\n\t\tvec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );\n\t#endif\n\tvec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshnormal_vert:"#define NORMAL\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvViewPosition = - mvPosition.xyz;\n#endif\n}",meshnormal_frag:"#define NORMAL\nuniform float opacity;\n#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )\n\tvarying vec3 vViewPosition;\n#endif\n#include <packing>\n#include <uv_pars_fragment>\n#include <normal_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );\n\t#include <clipping_planes_fragment>\n\t#include <logdepthbuf_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\tgl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );\n\t#ifdef OPAQUE\n\t\tgl_FragColor.a = 1.0;\n\t#endif\n}",meshphong_vert:"#define PHONG\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <envmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <envmap_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshphong_frag:"#define PHONG\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform vec3 specular;\nuniform float shininess;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_phong_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <specularmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <specularmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_phong_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\t#include <envmap_fragment>\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshphysical_vert:"#define STANDARD\nvarying vec3 vViewPosition;\n#ifdef USE_TRANSMISSION\n\tvarying vec3 vWorldPosition;\n#endif\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n#ifdef USE_TRANSMISSION\n\tvWorldPosition = worldPosition.xyz;\n#endif\n}",meshphysical_frag:"#define STANDARD\n#ifdef PHYSICAL\n\t#define IOR\n\t#define USE_SPECULAR\n#endif\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float roughness;\nuniform float metalness;\nuniform float opacity;\n#ifdef IOR\n\tuniform float ior;\n#endif\n#ifdef USE_SPECULAR\n\tuniform float specularIntensity;\n\tuniform vec3 specularColor;\n\t#ifdef USE_SPECULAR_COLORMAP\n\t\tuniform sampler2D specularColorMap;\n\t#endif\n\t#ifdef USE_SPECULAR_INTENSITYMAP\n\t\tuniform sampler2D specularIntensityMap;\n\t#endif\n#endif\n#ifdef USE_CLEARCOAT\n\tuniform float clearcoat;\n\tuniform float clearcoatRoughness;\n#endif\n#ifdef USE_DISPERSION\n\tuniform float dispersion;\n#endif\n#ifdef USE_IRIDESCENCE\n\tuniform float iridescence;\n\tuniform float iridescenceIOR;\n\tuniform float iridescenceThicknessMinimum;\n\tuniform float iridescenceThicknessMaximum;\n#endif\n#ifdef USE_SHEEN\n\tuniform vec3 sheenColor;\n\tuniform float sheenRoughness;\n\t#ifdef USE_SHEEN_COLORMAP\n\t\tuniform sampler2D sheenColorMap;\n\t#endif\n\t#ifdef USE_SHEEN_ROUGHNESSMAP\n\t\tuniform sampler2D sheenRoughnessMap;\n\t#endif\n#endif\n#ifdef USE_ANISOTROPY\n\tuniform vec2 anisotropyVector;\n\t#ifdef USE_ANISOTROPYMAP\n\t\tuniform sampler2D anisotropyMap;\n\t#endif\n#endif\nvarying vec3 vViewPosition;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <iridescence_fragment>\n#include <cube_uv_reflection_fragment>\n#include <envmap_common_pars_fragment>\n#include <envmap_physical_pars_fragment>\n#include <fog_pars_fragment>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_physical_pars_fragment>\n#include <transmission_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <clearcoat_pars_fragment>\n#include <iridescence_pars_fragment>\n#include <roughnessmap_pars_fragment>\n#include <metalnessmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <roughnessmap_fragment>\n\t#include <metalnessmap_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <clearcoat_normal_fragment_begin>\n\t#include <clearcoat_normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_physical_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;\n\tvec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;\n\t#include <transmission_fragment>\n\tvec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;\n\t#ifdef USE_SHEEN\n\t\tfloat sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );\n\t\toutgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;\n\t#endif\n\t#ifdef USE_CLEARCOAT\n\t\tfloat dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );\n\t\tvec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );\n\t\toutgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;\n\t#endif\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",meshtoon_vert:"#define TOON\nvarying vec3 vViewPosition;\n#include <common>\n#include <batching_pars_vertex>\n#include <uv_pars_vertex>\n#include <displacementmap_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <normal_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <shadowmap_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <normal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <displacementmap_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\tvViewPosition = - mvPosition.xyz;\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",meshtoon_frag:"#define TOON\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <dithering_pars_fragment>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <aomap_pars_fragment>\n#include <lightmap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <gradientmap_pars_fragment>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <normal_pars_fragment>\n#include <lights_toon_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <bumpmap_pars_fragment>\n#include <normalmap_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );\n\tvec3 totalEmissiveRadiance = emissive;\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <color_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\t#include <normal_fragment_begin>\n\t#include <normal_fragment_maps>\n\t#include <emissivemap_fragment>\n\t#include <lights_toon_fragment>\n\t#include <lights_fragment_begin>\n\t#include <lights_fragment_maps>\n\t#include <lights_fragment_end>\n\t#include <aomap_fragment>\n\tvec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n\t#include <dithering_fragment>\n}",points_vert:"uniform float size;\nuniform float scale;\n#include <common>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n#ifdef USE_POINTS_UV\n\tvarying vec2 vUv;\n\tuniform mat3 uvTransform;\n#endif\nvoid main() {\n\t#ifdef USE_POINTS_UV\n\t\tvUv = ( uvTransform * vec3( uv, 1 ) ).xy;\n\t#endif\n\t#include <color_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphcolor_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <project_vertex>\n\tgl_PointSize = size;\n\t#ifdef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );\n\t#endif\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <worldpos_vertex>\n\t#include <fog_vertex>\n}",points_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <color_pars_fragment>\n#include <map_particle_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_particle_fragment>\n\t#include <color_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n\t#include <premultiplied_alpha_fragment>\n}",shadow_vert:"#include <common>\n#include <batching_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <shadowmap_pars_vertex>\nvoid main() {\n\t#include <batching_vertex>\n\t#include <beginnormal_vertex>\n\t#include <morphinstance_vertex>\n\t#include <morphnormal_vertex>\n\t#include <skinbase_vertex>\n\t#include <skinnormal_vertex>\n\t#include <defaultnormal_vertex>\n\t#include <begin_vertex>\n\t#include <morphtarget_vertex>\n\t#include <skinning_vertex>\n\t#include <project_vertex>\n\t#include <logdepthbuf_vertex>\n\t#include <worldpos_vertex>\n\t#include <shadowmap_vertex>\n\t#include <fog_vertex>\n}",shadow_frag:"uniform vec3 color;\nuniform float opacity;\n#include <common>\n#include <packing>\n#include <fog_pars_fragment>\n#include <bsdfs>\n#include <lights_pars_begin>\n#include <logdepthbuf_pars_fragment>\n#include <shadowmap_pars_fragment>\n#include <shadowmask_pars_fragment>\nvoid main() {\n\t#include <logdepthbuf_fragment>\n\tgl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}",sprite_vert:"uniform float rotation;\nuniform vec2 center;\n#include <common>\n#include <uv_pars_vertex>\n#include <fog_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\nvoid main() {\n\t#include <uv_vertex>\n\tvec4 mvPosition = modelViewMatrix[ 3 ];\n\tvec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );\n\t#ifndef USE_SIZEATTENUATION\n\t\tbool isPerspective = isPerspectiveMatrix( projectionMatrix );\n\t\tif ( isPerspective ) scale *= - mvPosition.z;\n\t#endif\n\tvec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;\n\tvec2 rotatedPosition;\n\trotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;\n\trotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;\n\tmvPosition.xy += rotatedPosition;\n\tgl_Position = projectionMatrix * mvPosition;\n\t#include <logdepthbuf_vertex>\n\t#include <clipping_planes_vertex>\n\t#include <fog_vertex>\n}",sprite_frag:"uniform vec3 diffuse;\nuniform float opacity;\n#include <common>\n#include <uv_pars_fragment>\n#include <map_pars_fragment>\n#include <alphamap_pars_fragment>\n#include <alphatest_pars_fragment>\n#include <alphahash_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\nvoid main() {\n\tvec4 diffuseColor = vec4( diffuse, opacity );\n\t#include <clipping_planes_fragment>\n\tvec3 outgoingLight = vec3( 0.0 );\n\t#include <logdepthbuf_fragment>\n\t#include <map_fragment>\n\t#include <alphamap_fragment>\n\t#include <alphatest_fragment>\n\t#include <alphahash_fragment>\n\toutgoingLight = diffuseColor.rgb;\n\t#include <opaque_fragment>\n\t#include <tonemapping_fragment>\n\t#include <colorspace_fragment>\n\t#include <fog_fragment>\n}"},h={common:{diffuse:{value:new r.Q1f(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new r.dwI},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new r.dwI}},envmap:{envMap:{value:null},envMapRotation:{value:new r.dwI},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new r.dwI}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new r.dwI}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new r.dwI},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new r.dwI},normalScale:{value:new r.I9Y(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new r.dwI},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new r.dwI}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new r.dwI}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new r.dwI}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new r.Q1f(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new r.Q1f(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0},uvTransform:{value:new r.dwI}},sprite:{diffuse:{value:new r.Q1f(16777215)},opacity:{value:1},center:{value:new r.I9Y(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new r.dwI},alphaMap:{value:null},alphaMapTransform:{value:new r.dwI},alphaTest:{value:0}}},l={basic:{uniforms:(0,r.Iit)([h.common,h.specularmap,h.envmap,h.aomap,h.lightmap,h.fog]),vertexShader:a.meshbasic_vert,fragmentShader:a.meshbasic_frag},lambert:{uniforms:(0,r.Iit)([h.common,h.specularmap,h.envmap,h.aomap,h.lightmap,h.emissivemap,h.bumpmap,h.normalmap,h.displacementmap,h.fog,h.lights,{emissive:{value:new r.Q1f(0)}}]),vertexShader:a.meshlambert_vert,fragmentShader:a.meshlambert_frag},phong:{uniforms:(0,r.Iit)([h.common,h.specularmap,h.envmap,h.aomap,h.lightmap,h.emissivemap,h.bumpmap,h.normalmap,h.displacementmap,h.fog,h.lights,{emissive:{value:new r.Q1f(0)},specular:{value:new r.Q1f(1118481)},shininess:{value:30}}]),vertexShader:a.meshphong_vert,fragmentShader:a.meshphong_frag},standard:{uniforms:(0,r.Iit)([h.common,h.envmap,h.aomap,h.lightmap,h.emissivemap,h.bumpmap,h.normalmap,h.displacementmap,h.roughnessmap,h.metalnessmap,h.fog,h.lights,{emissive:{value:new r.Q1f(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:a.meshphysical_vert,fragmentShader:a.meshphysical_frag},toon:{uniforms:(0,r.Iit)([h.common,h.aomap,h.lightmap,h.emissivemap,h.bumpmap,h.normalmap,h.displacementmap,h.gradientmap,h.fog,h.lights,{emissive:{value:new r.Q1f(0)}}]),vertexShader:a.meshtoon_vert,fragmentShader:a.meshtoon_frag},matcap:{uniforms:(0,r.Iit)([h.common,h.bumpmap,h.normalmap,h.displacementmap,h.fog,{matcap:{value:null}}]),vertexShader:a.meshmatcap_vert,fragmentShader:a.meshmatcap_frag},points:{uniforms:(0,r.Iit)([h.points,h.fog]),vertexShader:a.points_vert,fragmentShader:a.points_frag},dashed:{uniforms:(0,r.Iit)([h.common,h.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:a.linedashed_vert,fragmentShader:a.linedashed_frag},depth:{uniforms:(0,r.Iit)([h.common,h.displacementmap]),vertexShader:a.depth_vert,fragmentShader:a.depth_frag},normal:{uniforms:(0,r.Iit)([h.common,h.bumpmap,h.normalmap,h.displacementmap,{opacity:{value:1}}]),vertexShader:a.meshnormal_vert,fragmentShader:a.meshnormal_frag},sprite:{uniforms:(0,r.Iit)([h.sprite,h.fog]),vertexShader:a.sprite_vert,fragmentShader:a.sprite_frag},background:{uniforms:{uvTransform:{value:new r.dwI},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:a.background_vert,fragmentShader:a.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new r.dwI}},vertexShader:a.backgroundCube_vert,fragmentShader:a.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:a.cube_vert,fragmentShader:a.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:a.equirect_vert,fragmentShader:a.equirect_frag},distanceRGBA:{uniforms:(0,r.Iit)([h.common,h.displacementmap,{referencePosition:{value:new r.Pq0},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:a.distanceRGBA_vert,fragmentShader:a.distanceRGBA_frag},shadow:{uniforms:(0,r.Iit)([h.lights,h.fog,{color:{value:new r.Q1f(0)},opacity:{value:1}}]),vertexShader:a.shadow_vert,fragmentShader:a.shadow_frag}};l.physical={uniforms:(0,r.Iit)([l.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new r.dwI},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new r.dwI},clearcoatNormalScale:{value:new r.I9Y(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new r.dwI},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new r.dwI},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new r.dwI},sheen:{value:0},sheenColor:{value:new r.Q1f(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new r.dwI},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new r.dwI},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new r.dwI},transmissionSamplerSize:{value:new r.I9Y},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new r.dwI},attenuationDistance:{value:0},attenuationColor:{value:new r.Q1f(0)},specularColor:{value:new r.Q1f(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new r.dwI},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new r.dwI},anisotropyVector:{value:new r.I9Y},anisotropyMap:{value:null},anisotropyMapTransform:{value:new r.dwI}}]),vertexShader:a.meshphysical_vert,fragmentShader:a.meshphysical_frag};const u={r:0,b:0,g:0},c=new r.O9p,d=new r.kn4;function f(t,e,i,n,s,o,a){const h=new r.Q1f(0);let f,p,m=!0===o?0:1,g=null,v=0,y=null;function b(t){let r=!0===t.isScene?t.background:null;return r&&r.isTexture&&(r=(t.backgroundBlurriness>0?i:e).get(r)),r}function _(e,i){e.getRGB(u,(0,r._Ut)(t)),n.buffers.color.setClear(u.r,u.g,u.b,i,a)}return{getClearColor:function(){return h},setClearColor:function(t,e=1){h.set(t),m=e,_(h,m)},getClearAlpha:function(){return m},setClearAlpha:function(t){m=t,_(h,m)},render:function(e){let i=!1;const r=b(e);null===r?_(h,m):r&&r.isColor&&(_(r,1),i=!0);const s=t.xr.getEnvironmentBlendMode();"additive"===s?n.buffers.color.setClear(0,0,0,1,a):"alpha-blend"===s&&n.buffers.color.setClear(0,0,0,0,a),(t.autoClear||i)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),t.clear(t.autoClearColor,t.autoClearDepth,t.autoClearStencil))},addToRenderList:function(e,i){const n=b(i);n&&(n.isCubeTexture||n.mapping===r.Om)?(void 0===p&&(p=new r.eaF(new r.iNn(1,1,1),new r.BKk({name:"BackgroundCubeMaterial",uniforms:(0,r.lxW)(l.backgroundCube.uniforms),vertexShader:l.backgroundCube.vertexShader,fragmentShader:l.backgroundCube.fragmentShader,side:r.hsX,depthTest:!1,depthWrite:!1,fog:!1})),p.geometry.deleteAttribute("normal"),p.geometry.deleteAttribute("uv"),p.onBeforeRender=function(t,e,i){this.matrixWorld.copyPosition(i.matrixWorld)},Object.defineProperty(p.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),s.update(p)),c.copy(i.backgroundRotation),c.x*=-1,c.y*=-1,c.z*=-1,n.isCubeTexture&&!1===n.isRenderTargetTexture&&(c.y*=-1,c.z*=-1),p.material.uniforms.envMap.value=n,p.material.uniforms.flipEnvMap.value=n.isCubeTexture&&!1===n.isRenderTargetTexture?-1:1,p.material.uniforms.backgroundBlurriness.value=i.backgroundBlurriness,p.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,p.material.uniforms.backgroundRotation.value.setFromMatrix4(d.makeRotationFromEuler(c)),p.material.toneMapped=r.ppV.getTransfer(n.colorSpace)!==r.KLL,g===n&&v===n.version&&y===t.toneMapping||(p.material.needsUpdate=!0,g=n,v=n.version,y=t.toneMapping),p.layers.enableAll(),e.unshift(p,p.geometry,p.material,0,0,null)):n&&n.isTexture&&(void 0===f&&(f=new r.eaF(new r.bdM(2,2),new r.BKk({name:"BackgroundMaterial",uniforms:(0,r.lxW)(l.background.uniforms),vertexShader:l.background.vertexShader,fragmentShader:l.background.fragmentShader,side:r.hB5,depthTest:!1,depthWrite:!1,fog:!1})),f.geometry.deleteAttribute("normal"),Object.defineProperty(f.material,"map",{get:function(){return this.uniforms.t2D.value}}),s.update(f)),f.material.uniforms.t2D.value=n,f.material.uniforms.backgroundIntensity.value=i.backgroundIntensity,f.material.toneMapped=r.ppV.getTransfer(n.colorSpace)!==r.KLL,!0===n.matrixAutoUpdate&&n.updateMatrix(),f.material.uniforms.uvTransform.value.copy(n.matrix),g===n&&v===n.version&&y===t.toneMapping||(f.material.needsUpdate=!0,g=n,v=n.version,y=t.toneMapping),f.layers.enableAll(),e.unshift(f,f.geometry,f.material,0,0,null))},dispose:function(){void 0!==p&&(p.geometry.dispose(),p.material.dispose()),void 0!==f&&(f.geometry.dispose(),f.material.dispose())}}}function p(t,e){const i=t.getParameter(t.MAX_VERTEX_ATTRIBS),n={},s=u(null);let o=s,a=!1;function h(e){return t.bindVertexArray(e)}function l(e){return t.deleteVertexArray(e)}function u(t){const e=[],r=[],n=[];for(let t=0;t<i;t++)e[t]=0,r[t]=0,n[t]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:e,enabledAttributes:r,attributeDivisors:n,object:t,attributes:{},index:null}}function c(){const t=o.newAttributes;for(let e=0,i=t.length;e<i;e++)t[e]=0}function d(t){f(t,0)}function f(e,i){const r=o.newAttributes,n=o.enabledAttributes,s=o.attributeDivisors;r[e]=1,0===n[e]&&(t.enableVertexAttribArray(e),n[e]=1),s[e]!==i&&(t.vertexAttribDivisor(e,i),s[e]=i)}function p(){const e=o.newAttributes,i=o.enabledAttributes;for(let r=0,n=i.length;r<n;r++)i[r]!==e[r]&&(t.disableVertexAttribArray(r),i[r]=0)}function m(e,i,r,n,s,o,a){!0===a?t.vertexAttribIPointer(e,i,r,s,o):t.vertexAttribPointer(e,i,r,n,s,o)}function g(){v(),a=!0,o!==s&&(o=s,h(o.object))}function v(){s.geometry=null,s.program=null,s.wireframe=!1}return{setup:function(i,s,l,g,v){let y=!1;const b=function(e,i,r){const s=!0===r.wireframe;let o=n[e.id];void 0===o&&(o={},n[e.id]=o);let a=o[i.id];void 0===a&&(a={},o[i.id]=a);let h=a[s];return void 0===h&&(h=u(t.createVertexArray()),a[s]=h),h}(g,l,s);o!==b&&(o=b,h(o.object)),y=function(t,e,i,r){const n=o.attributes,s=e.attributes;let a=0;const h=i.getAttributes();for(const e in h)if(h[e].location>=0){const i=n[e];let r=s[e];if(void 0===r&&("instanceMatrix"===e&&t.instanceMatrix&&(r=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(r=t.instanceColor)),void 0===i)return!0;if(i.attribute!==r)return!0;if(r&&i.data!==r.data)return!0;a++}return o.attributesNum!==a||o.index!==r}(i,g,l,v),y&&function(t,e,i,r){const n={},s=e.attributes;let a=0;const h=i.getAttributes();for(const e in h)if(h[e].location>=0){let i=s[e];void 0===i&&("instanceMatrix"===e&&t.instanceMatrix&&(i=t.instanceMatrix),"instanceColor"===e&&t.instanceColor&&(i=t.instanceColor));const r={};r.attribute=i,i&&i.data&&(r.data=i.data),n[e]=r,a++}o.attributes=n,o.attributesNum=a,o.index=r}(i,g,l,v),null!==v&&e.update(v,t.ELEMENT_ARRAY_BUFFER),(y||a)&&(a=!1,function(i,n,s,o){c();const a=o.attributes,h=s.getAttributes(),l=n.defaultAttributeValues;for(const n in h){const s=h[n];if(s.location>=0){let h=a[n];if(void 0===h&&("instanceMatrix"===n&&i.instanceMatrix&&(h=i.instanceMatrix),"instanceColor"===n&&i.instanceColor&&(h=i.instanceColor)),void 0!==h){const n=h.normalized,a=h.itemSize,l=e.get(h);if(void 0===l)continue;const u=l.buffer,c=l.type,p=l.bytesPerElement,g=c===t.INT||c===t.UNSIGNED_INT||h.gpuType===r.Yuy;if(h.isInterleavedBufferAttribute){const e=h.data,r=e.stride,l=h.offset;if(e.isInstancedInterleavedBuffer){for(let t=0;t<s.locationSize;t++)f(s.location+t,e.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=e.meshPerAttribute*e.count)}else for(let t=0;t<s.locationSize;t++)d(s.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<s.locationSize;t++)m(s.location+t,a/s.locationSize,c,n,r*p,(l+a/s.locationSize*t)*p,g)}else{if(h.isInstancedBufferAttribute){for(let t=0;t<s.locationSize;t++)f(s.location+t,h.meshPerAttribute);!0!==i.isInstancedMesh&&void 0===o._maxInstanceCount&&(o._maxInstanceCount=h.meshPerAttribute*h.count)}else for(let t=0;t<s.locationSize;t++)d(s.location+t);t.bindBuffer(t.ARRAY_BUFFER,u);for(let t=0;t<s.locationSize;t++)m(s.location+t,a/s.locationSize,c,n,a*p,a/s.locationSize*t*p,g)}}else if(void 0!==l){const e=l[n];if(void 0!==e)switch(e.length){case 2:t.vertexAttrib2fv(s.location,e);break;case 3:t.vertexAttrib3fv(s.location,e);break;case 4:t.vertexAttrib4fv(s.location,e);break;default:t.vertexAttrib1fv(s.location,e)}}}}p()}(i,s,l,g),null!==v&&t.bindBuffer(t.ELEMENT_ARRAY_BUFFER,e.get(v).buffer))},reset:g,resetDefaultState:v,dispose:function(){g();for(const t in n){const e=n[t];for(const t in e){const i=e[t];for(const t in i)l(i[t].object),delete i[t];delete e[t]}delete n[t]}},releaseStatesOfGeometry:function(t){if(void 0===n[t.id])return;const e=n[t.id];for(const t in e){const i=e[t];for(const t in i)l(i[t].object),delete i[t];delete e[t]}delete n[t.id]},releaseStatesOfProgram:function(t){for(const e in n){const i=n[e];if(void 0===i[t.id])continue;const r=i[t.id];for(const t in r)l(r[t].object),delete r[t];delete i[t.id]}},initAttributes:c,enableAttribute:d,disableUnusedAttributes:p}}function m(t,e,i){let r;function n(e,n,s){0!==s&&(t.drawArraysInstanced(r,e,n,s),i.update(n,r,s))}this.setMode=function(t){r=t},this.render=function(e,n){t.drawArrays(r,e,n),i.update(n,r,1)},this.renderInstances=n,this.renderMultiDraw=function(t,n,s){if(0===s)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(r,t,0,n,0,s);let o=0;for(let t=0;t<s;t++)o+=n[t];i.update(o,r,1)},this.renderMultiDrawInstances=function(t,s,o,a){if(0===o)return;const h=e.get("WEBGL_multi_draw");if(null===h)for(let e=0;e<t.length;e++)n(t[e],s[e],a[e]);else{h.multiDrawArraysInstancedWEBGL(r,t,0,s,0,a,0,o);let e=0;for(let t=0;t<o;t++)e+=s[t]*a[t];i.update(e,r,1)}}}function g(t,e,i,s){let o;function a(e){if("highp"===e){if(t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.HIGH_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision>0)return"highp";e="mediump"}return"mediump"===e&&t.getShaderPrecisionFormat(t.VERTEX_SHADER,t.MEDIUM_FLOAT).precision>0&&t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let h=void 0!==i.precision?i.precision:"highp";const l=a(h);l!==h&&(n.warn("THREE.WebGLRenderer:",h,"not supported, using",l,"instead."),h=l);const u=!0===i.logarithmicDepthBuffer,c=!0===i.reverseDepthBuffer&&e.has("EXT_clip_control"),d=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),f=t.getParameter(t.MAX_VERTEX_TEXTURE_IMAGE_UNITS);return{isWebGL2:!0,getMaxAnisotropy:function(){if(void 0!==o)return o;if(!0===e.has("EXT_texture_filter_anisotropic")){const i=e.get("EXT_texture_filter_anisotropic");o=t.getParameter(i.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else o=0;return o},getMaxPrecision:a,textureFormatReadable:function(e){return e===r.GWd||s.convert(e)===t.getParameter(t.IMPLEMENTATION_COLOR_READ_FORMAT)},textureTypeReadable:function(i){const n=i===r.ix0&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(i!==r.OUM&&s.convert(i)!==t.getParameter(t.IMPLEMENTATION_COLOR_READ_TYPE)&&i!==r.RQf&&!n)},precision:h,logarithmicDepthBuffer:u,reverseDepthBuffer:c,maxTextures:d,maxVertexTextures:f,maxTextureSize:t.getParameter(t.MAX_TEXTURE_SIZE),maxCubemapSize:t.getParameter(t.MAX_CUBE_MAP_TEXTURE_SIZE),maxAttributes:t.getParameter(t.MAX_VERTEX_ATTRIBS),maxVertexUniforms:t.getParameter(t.MAX_VERTEX_UNIFORM_VECTORS),maxVaryings:t.getParameter(t.MAX_VARYING_VECTORS),maxFragmentUniforms:t.getParameter(t.MAX_FRAGMENT_UNIFORM_VECTORS),vertexTextures:f>0,maxSamples:t.getParameter(t.MAX_SAMPLES)}}function v(t){const e=this;let i=null,n=0,s=!1,o=!1;const a=new r.Zcv,h=new r.dwI,l={value:null,needsUpdate:!1};function u(t,i,r,n){const s=null!==t?t.length:0;let o=null;if(0!==s){if(o=l.value,!0!==n||null===o){const e=r+4*s,n=i.matrixWorldInverse;h.getNormalMatrix(n),(null===o||o.length<e)&&(o=new Float32Array(e));for(let e=0,i=r;e!==s;++e,i+=4)a.copy(t[e]).applyMatrix4(n,h),a.normal.toArray(o,i),o[i+3]=a.constant}l.value=o,l.needsUpdate=!0}return e.numPlanes=s,e.numIntersection=0,o}this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(t,e){const i=0!==t.length||e||0!==n||s;return s=e,n=t.length,i},this.beginShadows=function(){o=!0,u(null)},this.endShadows=function(){o=!1},this.setGlobalState=function(t,e){i=u(t,e,0)},this.setState=function(r,a,h){const c=r.clippingPlanes,d=r.clipIntersection,f=r.clipShadows,p=t.get(r);if(!s||null===c||0===c.length||o&&!f)o?u(null):(l.value!==i&&(l.value=i,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0);else{const t=o?0:n,e=4*t;let r=p.clippingState||null;l.value=r,r=u(c,a,e,h);for(let t=0;t!==e;++t)r[t]=i[t];p.clippingState=r,this.numIntersection=d?this.numPlanes:0,this.numPlanes+=t}}}function y(t){let e=new WeakMap;function i(t,e){return e===r.wfO?t.mapping=r.hy7:e===r.uV5&&(t.mapping=r.xFO),t}function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(s){if(s&&s.isTexture){const o=s.mapping;if(o===r.wfO||o===r.uV5){if(e.has(s))return i(e.get(s).texture,s.mapping);{const o=s.image;if(o&&o.height>0){const a=new r.o6l(o.height);return a.fromEquirectangularTexture(t,s),e.set(s,a),s.addEventListener("dispose",n),i(a.texture,s.mapping)}return null}}}return s},dispose:function(){e=new WeakMap}}}const b=[.125,.215,.35,.446,.526,.582],_=new r.qUd,x=new r.Q1f;let w=null,M=0,S=0,A=!1;const E=(1+Math.sqrt(5))/2,T=1/E,R=[new r.Pq0(-E,T,0),new r.Pq0(E,T,0),new r.Pq0(-T,0,E),new r.Pq0(T,0,E),new r.Pq0(0,E,-T),new r.Pq0(0,E,T),new r.Pq0(-1,1,-1),new r.Pq0(1,1,-1),new r.Pq0(-1,1,1),new r.Pq0(1,1,1)];class P{constructor(t){this._renderer=t,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(t,e=0,i=.1,r=100){w=this._renderer.getRenderTarget(),M=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),A=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(256);const n=this._allocateTargets();return n.depthBuffer=!0,this._sceneToCubeUV(t,i,r,n),e>0&&this._blur(n,0,0,e),this._applyPMREM(n),this._cleanup(n),n}fromEquirectangular(t,e=null){return this._fromTexture(t,e)}fromCubemap(t,e=null){return this._fromTexture(t,e)}compileCubemapShader(){null===this._cubemapMaterial&&(this._cubemapMaterial=B(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){null===this._equirectMaterial&&(this._equirectMaterial=k(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),null!==this._cubemapMaterial&&this._cubemapMaterial.dispose(),null!==this._equirectMaterial&&this._equirectMaterial.dispose()}_setSize(t){this._lodMax=Math.floor(Math.log2(t)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){null!==this._blurMaterial&&this._blurMaterial.dispose(),null!==this._pingPongRenderTarget&&this._pingPongRenderTarget.dispose();for(let t=0;t<this._lodPlanes.length;t++)this._lodPlanes[t].dispose()}_cleanup(t){this._renderer.setRenderTarget(w,M,S),this._renderer.xr.enabled=A,t.scissorTest=!1,I(t,0,0,t.width,t.height)}_fromTexture(t,e){t.mapping===r.hy7||t.mapping===r.xFO?this._setSize(0===t.image.length?16:t.image[0].width||t.image[0].image.width):this._setSize(t.image.width/4),w=this._renderer.getRenderTarget(),M=this._renderer.getActiveCubeFace(),S=this._renderer.getActiveMipmapLevel(),A=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const i=e||this._allocateTargets();return this._textureToCubeUV(t,i),this._applyPMREM(i),this._cleanup(i),i}_allocateTargets(){const t=3*Math.max(this._cubeSize,112),e=4*this._cubeSize,i={magFilter:r.k6q,minFilter:r.k6q,generateMipmaps:!1,type:r.ix0,format:r.GWd,colorSpace:r.Zr2,depthBuffer:!1},n=C(t,e,i);if(null===this._pingPongRenderTarget||this._pingPongRenderTarget.width!==t||this._pingPongRenderTarget.height!==e){null!==this._pingPongRenderTarget&&this._dispose(),this._pingPongRenderTarget=C(t,e,i);const{_lodMax:n}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=function(t){const e=[],i=[],n=[];let s=t;const o=t-4+1+b.length;for(let a=0;a<o;a++){const o=Math.pow(2,s);i.push(o);let h=1/o;a>t-4?h=b[a-t+4-1]:0===a&&(h=0),n.push(h);const l=1/(o-2),u=-l,c=1+l,d=[u,u,c,u,c,c,u,u,c,c,u,c],f=6,p=6,m=3,g=2,v=1,y=new Float32Array(m*p*f),_=new Float32Array(g*p*f),x=new Float32Array(v*p*f);for(let t=0;t<f;t++){const e=t%3*2/3-1,i=t>2?0:-1,r=[e,i,0,e+2/3,i,0,e+2/3,i+1,0,e,i,0,e+2/3,i+1,0,e,i+1,0];y.set(r,m*p*t),_.set(d,g*p*t);const n=[t,t,t,t,t,t];x.set(n,v*p*t)}const w=new r.LoY;w.setAttribute("position",new r.THS(y,m)),w.setAttribute("uv",new r.THS(_,g)),w.setAttribute("faceIndex",new r.THS(x,v)),e.push(w),s>4&&s--}return{lodPlanes:e,sizeLods:i,sigmas:n}}(n)),this._blurMaterial=function(t,e,i){const n=new Float32Array(20),s=new r.Pq0(0,1,0);return new r.BKk({name:"SphericalGaussianBlur",defines:{n:20,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/i,CUBEUV_MAX_MIP:`${t}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:s}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\t\t\tuniform int samples;\n\t\t\tuniform float weights[ n ];\n\t\t\tuniform bool latitudinal;\n\t\t\tuniform float dTheta;\n\t\t\tuniform float mipInt;\n\t\t\tuniform vec3 poleAxis;\n\n\t\t\t#define ENVMAP_TYPE_CUBE_UV\n\t\t\t#include <cube_uv_reflection_fragment>\n\n\t\t\tvec3 getSample( float theta, vec3 axis ) {\n\n\t\t\t\tfloat cosTheta = cos( theta );\n\t\t\t\t// Rodrigues' axis-angle rotation\n\t\t\t\tvec3 sampleDirection = vOutputDirection * cosTheta\n\t\t\t\t\t+ cross( axis, vOutputDirection ) * sin( theta )\n\t\t\t\t\t+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );\n\n\t\t\t\treturn bilinearCubeUV( envMap, sampleDirection, mipInt );\n\n\t\t\t}\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );\n\n\t\t\t\tif ( all( equal( axis, vec3( 0.0 ) ) ) ) {\n\n\t\t\t\t\taxis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );\n\n\t\t\t\t}\n\n\t\t\t\taxis = normalize( axis );\n\n\t\t\t\tgl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );\n\t\t\t\tgl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );\n\n\t\t\t\tfor ( int i = 1; i < n; i++ ) {\n\n\t\t\t\t\tif ( i >= samples ) {\n\n\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tfloat theta = dTheta * float( i );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );\n\t\t\t\t\tgl_FragColor.rgb += weights[ i ] * getSample( theta, axis );\n\n\t\t\t\t}\n\n\t\t\t}\n\t\t",blending:r.XIg,depthTest:!1,depthWrite:!1})}(n,t,e)}return n}_compileMaterial(t){const e=new r.eaF(this._lodPlanes[0],t);this._renderer.compile(e,_)}_sceneToCubeUV(t,e,i,n){const s=new r.ubm(90,1,e,i),o=[1,-1,1,1,1,1],a=[1,1,1,-1,-1,-1],h=this._renderer,l=h.autoClear,u=h.toneMapping;h.getClearColor(x),h.toneMapping=r.y_p,h.autoClear=!1;const c=new r.V9B({name:"PMREM.Background",side:r.hsX,depthWrite:!1,depthTest:!1}),d=new r.eaF(new r.iNn,c);let f=!1;const p=t.background;p?p.isColor&&(c.color.copy(p),t.background=null,f=!0):(c.color.copy(x),f=!0);for(let e=0;e<6;e++){const i=e%3;0===i?(s.up.set(0,o[e],0),s.lookAt(a[e],0,0)):1===i?(s.up.set(0,0,o[e]),s.lookAt(0,a[e],0)):(s.up.set(0,o[e],0),s.lookAt(0,0,a[e]));const r=this._cubeSize;I(n,i*r,e>2?r:0,r,r),h.setRenderTarget(n),f&&h.render(d,s),h.render(t,s)}d.geometry.dispose(),d.material.dispose(),h.toneMapping=u,h.autoClear=l,t.background=p}_textureToCubeUV(t,e){const i=this._renderer,n=t.mapping===r.hy7||t.mapping===r.xFO;n?(null===this._cubemapMaterial&&(this._cubemapMaterial=B()),this._cubemapMaterial.uniforms.flipEnvMap.value=!1===t.isRenderTargetTexture?-1:1):null===this._equirectMaterial&&(this._equirectMaterial=k());const s=n?this._cubemapMaterial:this._equirectMaterial,o=new r.eaF(this._lodPlanes[0],s);s.uniforms.envMap.value=t;const a=this._cubeSize;I(e,0,0,3*a,2*a),i.setRenderTarget(e),i.render(o,_)}_applyPMREM(t){const e=this._renderer,i=e.autoClear;e.autoClear=!1;const r=this._lodPlanes.length;for(let e=1;e<r;e++){const i=Math.sqrt(this._sigmas[e]*this._sigmas[e]-this._sigmas[e-1]*this._sigmas[e-1]),n=R[(r-e-1)%R.length];this._blur(t,e-1,e,i,n)}e.autoClear=i}_blur(t,e,i,r,n){const s=this._pingPongRenderTarget;this._halfBlur(t,s,e,i,r,"latitudinal",n),this._halfBlur(s,t,i,i,r,"longitudinal",n)}_halfBlur(t,e,i,s,o,a,h){const l=this._renderer,u=this._blurMaterial;"latitudinal"!==a&&"longitudinal"!==a&&n.error("blur direction must be either latitudinal or longitudinal!");const c=new r.eaF(this._lodPlanes[s],u),d=u.uniforms,f=this._sizeLods[i]-1,p=isFinite(o)?Math.PI/(2*f):2*Math.PI/39,m=o/p,g=isFinite(o)?1+Math.floor(3*m):20;g>20&&n.warn(`sigmaRadians, ${o}, is too large and will clip, as it requested ${g} samples when the maximum is set to 20`);const v=[];let y=0;for(let t=0;t<20;++t){const e=t/m,i=Math.exp(-e*e/2);v.push(i),0===t?y+=i:t<g&&(y+=2*i)}for(let t=0;t<v.length;t++)v[t]=v[t]/y;d.envMap.value=t.texture,d.samples.value=g,d.weights.value=v,d.latitudinal.value="latitudinal"===a,h&&(d.poleAxis.value=h);const{_lodMax:b}=this;d.dTheta.value=p,d.mipInt.value=b-i;const x=this._sizeLods[s];I(e,3*x*(s>b-4?s-b+4:0),4*(this._cubeSize-x),3*x,2*x),l.setRenderTarget(e),l.render(c,_)}}function C(t,e,i){const n=new r.nWS(t,e,i);return n.texture.mapping=r.Om,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function I(t,e,i,r,n){t.viewport.set(e,i,r,n),t.scissor.set(e,i,r,n)}function k(){return new r.BKk({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform sampler2D envMap;\n\n\t\t\t#include <common>\n\n\t\t\tvoid main() {\n\n\t\t\t\tvec3 outputDirection = normalize( vOutputDirection );\n\t\t\t\tvec2 uv = equirectUv( outputDirection );\n\n\t\t\t\tgl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );\n\n\t\t\t}\n\t\t",blending:r.XIg,depthTest:!1,depthWrite:!1})}function B(){return new r.BKk({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:"\n\n\t\tprecision mediump float;\n\t\tprecision mediump int;\n\n\t\tattribute float faceIndex;\n\n\t\tvarying vec3 vOutputDirection;\n\n\t\t// RH coordinate system; PMREM face-indexing convention\n\t\tvec3 getDirection( vec2 uv, float face ) {\n\n\t\t\tuv = 2.0 * uv - 1.0;\n\n\t\t\tvec3 direction = vec3( uv, 1.0 );\n\n\t\t\tif ( face == 0.0 ) {\n\n\t\t\t\tdirection = direction.zyx; // ( 1, v, u ) pos x\n\n\t\t\t} else if ( face == 1.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xz *= -1.0; // ( -u, 1, -v ) pos y\n\n\t\t\t} else if ( face == 2.0 ) {\n\n\t\t\t\tdirection.x *= -1.0; // ( -u, v, 1 ) pos z\n\n\t\t\t} else if ( face == 3.0 ) {\n\n\t\t\t\tdirection = direction.zyx;\n\t\t\t\tdirection.xz *= -1.0; // ( -1, v, -u ) neg x\n\n\t\t\t} else if ( face == 4.0 ) {\n\n\t\t\t\tdirection = direction.xzy;\n\t\t\t\tdirection.xy *= -1.0; // ( -u, -1, v ) neg y\n\n\t\t\t} else if ( face == 5.0 ) {\n\n\t\t\t\tdirection.z *= -1.0; // ( u, v, -1 ) neg z\n\n\t\t\t}\n\n\t\t\treturn direction;\n\n\t\t}\n\n\t\tvoid main() {\n\n\t\t\tvOutputDirection = getDirection( uv, faceIndex );\n\t\t\tgl_Position = vec4( position, 1.0 );\n\n\t\t}\n\t",fragmentShader:"\n\n\t\t\tprecision mediump float;\n\t\t\tprecision mediump int;\n\n\t\t\tuniform float flipEnvMap;\n\n\t\t\tvarying vec3 vOutputDirection;\n\n\t\t\tuniform samplerCube envMap;\n\n\t\t\tvoid main() {\n\n\t\t\t\tgl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );\n\n\t\t\t}\n\t\t",blending:r.XIg,depthTest:!1,depthWrite:!1})}function O(t){let e=new WeakMap,i=null;function n(t){const i=t.target;i.removeEventListener("dispose",n);const r=e.get(i);void 0!==r&&(e.delete(i),r.dispose())}return{get:function(s){if(s&&s.isTexture){const o=s.mapping,a=o===r.wfO||o===r.uV5,h=o===r.hy7||o===r.xFO;if(a||h){let r=e.get(s);const o=void 0!==r?r.texture.pmremVersion:0;if(s.isRenderTargetTexture&&s.pmremVersion!==o)return null===i&&(i=new P(t)),r=a?i.fromEquirectangular(s,r):i.fromCubemap(s,r),r.texture.pmremVersion=s.pmremVersion,e.set(s,r),r.texture;if(void 0!==r)return r.texture;{const o=s.image;return a&&o&&o.height>0||h&&o&&function(t){let e=0;for(let i=0;i<6;i++)void 0!==t[i]&&e++;return 6===e}(o)?(null===i&&(i=new P(t)),r=a?i.fromEquirectangular(s):i.fromCubemap(s),r.texture.pmremVersion=s.pmremVersion,e.set(s,r),s.addEventListener("dispose",n),r.texture):null}}}return s},dispose:function(){e=new WeakMap,null!==i&&(i.dispose(),i=null)}}}function L(t){const e={};function i(i){if(void 0!==e[i])return e[i];let r;switch(i){case"WEBGL_depth_texture":r=t.getExtension("WEBGL_depth_texture")||t.getExtension("MOZ_WEBGL_depth_texture")||t.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=t.getExtension("EXT_texture_filter_anisotropic")||t.getExtension("MOZ_EXT_texture_filter_anisotropic")||t.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=t.getExtension("WEBGL_compressed_texture_s3tc")||t.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=t.getExtension(i)}return e[i]=r,r}return{has:function(t){return null!==i(t)},init:function(){i("EXT_color_buffer_float"),i("WEBGL_clip_cull_distance"),i("OES_texture_float_linear"),i("EXT_color_buffer_half_float"),i("WEBGL_multisampled_render_to_texture"),i("WEBGL_render_shared_exponent")},get:function(t){const e=i(t);return null===e&&(0,r.mcG)("THREE.WebGLRenderer: "+t+" extension not supported."),e}}}function U(t,e,i,n){const s={},o=new WeakMap;function a(t){const r=t.target;null!==r.index&&e.remove(r.index);for(const t in r.attributes)e.remove(r.attributes[t]);r.removeEventListener("dispose",a),delete s[r.id];const h=o.get(r);h&&(e.remove(h),o.delete(r)),n.releaseStatesOfGeometry(r),!0===r.isInstancedBufferGeometry&&delete r._maxInstanceCount,i.memory.geometries--}function h(t){const i=[],n=t.index,s=t.attributes.position;let a=0;if(null!==n){const t=n.array;a=n.version;for(let e=0,r=t.length;e<r;e+=3){const r=t[e+0],n=t[e+1],s=t[e+2];i.push(r,n,n,s,s,r)}}else{if(void 0===s)return;{const t=s.array;a=s.version;for(let e=0,r=t.length/3-1;e<r;e+=3){const t=e+0,r=e+1,n=e+2;i.push(t,r,r,n,n,t)}}}const h=new((0,r.AQS)(i)?r.MW4:r.A$4)(i,1);h.version=a;const l=o.get(t);l&&e.remove(l),o.set(t,h)}return{get:function(t,e){return!0===s[e.id]||(e.addEventListener("dispose",a),s[e.id]=!0,i.memory.geometries++),e},update:function(i){const r=i.attributes;for(const i in r)e.update(r[i],t.ARRAY_BUFFER)},getWireframeAttribute:function(t){const e=o.get(t);if(e){const i=t.index;null!==i&&e.version<i.version&&h(t)}else h(t);return o.get(t)}}}function D(t,e,i){let r,n,s;function o(e,o,a){0!==a&&(t.drawElementsInstanced(r,o,n,e*s,a),i.update(o,r,a))}this.setMode=function(t){r=t},this.setIndex=function(t){n=t.type,s=t.bytesPerElement},this.render=function(e,o){t.drawElements(r,o,n,e*s),i.update(o,r,1)},this.renderInstances=o,this.renderMultiDraw=function(t,s,o){if(0===o)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(r,s,0,n,t,0,o);let a=0;for(let t=0;t<o;t++)a+=s[t];i.update(a,r,1)},this.renderMultiDrawInstances=function(t,a,h,l){if(0===h)return;const u=e.get("WEBGL_multi_draw");if(null===u)for(let e=0;e<t.length;e++)o(t[e]/s,a[e],l[e]);else{u.multiDrawElementsInstancedWEBGL(r,a,0,n,t,0,l,0,h);let e=0;for(let t=0;t<h;t++)e+=a[t]*l[t];i.update(e,r,1)}}}function N(t){const e={frame:0,calls:0,triangles:0,points:0,lines:0};return{memory:{geometries:0,textures:0},render:e,programs:null,autoReset:!0,reset:function(){e.calls=0,e.triangles=0,e.points=0,e.lines=0},update:function(i,r,s){switch(e.calls++,r){case t.TRIANGLES:e.triangles+=s*(i/3);break;case t.LINES:e.lines+=s*(i/2);break;case t.LINE_STRIP:e.lines+=s*(i-1);break;case t.LINE_LOOP:e.lines+=s*i;break;case t.POINTS:e.points+=s*i;break;default:n.error("THREE.WebGLInfo: Unknown draw mode:",r)}}}}function F(t,e,i){const n=new WeakMap,s=new r.IUQ;return{update:function(o,a,h){const l=o.morphTargetInfluences,u=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,c=void 0!==u?u.length:0;let d=n.get(a);if(void 0===d||d.count!==c){void 0!==d&&d.texture.dispose();const f=void 0!==a.morphAttributes.position,p=void 0!==a.morphAttributes.normal,m=void 0!==a.morphAttributes.color,g=a.morphAttributes.position||[],v=a.morphAttributes.normal||[],y=a.morphAttributes.color||[];let b=0;!0===f&&(b=1),!0===p&&(b=2),!0===m&&(b=3);let _=a.attributes.position.count*b,x=1;_>e.maxTextureSize&&(x=Math.ceil(_/e.maxTextureSize),_=e.maxTextureSize);const w=new Float32Array(_*x*4*c),M=new r.rFo(w,_,x,c);M.type=r.RQf,M.needsUpdate=!0;const S=4*b;for(let E=0;E<c;E++){const T=g[E],R=v[E],P=y[E],C=_*x*4*E;for(let I=0;I<T.count;I++){const k=I*S;!0===f&&(s.fromBufferAttribute(T,I),w[C+k+0]=s.x,w[C+k+1]=s.y,w[C+k+2]=s.z,w[C+k+3]=0),!0===p&&(s.fromBufferAttribute(R,I),w[C+k+4]=s.x,w[C+k+5]=s.y,w[C+k+6]=s.z,w[C+k+7]=0),!0===m&&(s.fromBufferAttribute(P,I),w[C+k+8]=s.x,w[C+k+9]=s.y,w[C+k+10]=s.z,w[C+k+11]=4===P.itemSize?s.w:1)}}function A(){M.dispose(),n.delete(a),a.removeEventListener("dispose",A)}d={count:c,texture:M,size:new r.I9Y(_,x)},n.set(a,d),a.addEventListener("dispose",A)}if(!0===o.isInstancedMesh&&null!==o.morphTexture)h.getUniforms().setValue(t,"morphTexture",o.morphTexture,i);else{let B=0;for(let L=0;L<l.length;L++)B+=l[L];const O=a.morphTargetsRelative?1:1-B;h.getUniforms().setValue(t,"morphTargetBaseInfluence",O),h.getUniforms().setValue(t,"morphTargetInfluences",l)}h.getUniforms().setValue(t,"morphTargetsTexture",d.texture,i),h.getUniforms().setValue(t,"morphTargetsTextureSize",d.size)}}}function z(t,e,i,r){let n=new WeakMap;function s(t){const e=t.target;e.removeEventListener("dispose",s),i.remove(e.instanceMatrix),null!==e.instanceColor&&i.remove(e.instanceColor)}return{update:function(o){const a=r.render.frame,h=o.geometry,l=e.get(o,h);if(n.get(l)!==a&&(e.update(l),n.set(l,a)),o.isInstancedMesh&&(!1===o.hasEventListener("dispose",s)&&o.addEventListener("dispose",s),n.get(o)!==a&&(i.update(o.instanceMatrix,t.ARRAY_BUFFER),null!==o.instanceColor&&i.update(o.instanceColor,t.ARRAY_BUFFER),n.set(o,a))),o.isSkinnedMesh){const t=o.skeleton;n.get(t)!==a&&(t.update(),n.set(t,a))}return l},dispose:function(){n=new WeakMap}}}const G=new r.gPd,j=new r.VCu(1,1),V=new r.rFo,H=new r.dYF,W=new r.b4q,X=[],q=[],Y=new Float32Array(16),Z=new Float32Array(9),K=new Float32Array(4);function $(t,e,i){const r=t[0];if(r<=0||r>0)return t;const n=e*i;let s=X[n];if(void 0===s&&(s=new Float32Array(n),X[n]=s),0!==e){r.toArray(s,0);for(let r=1,n=0;r!==e;++r)n+=i,t[r].toArray(s,n)}return s}function Q(t,e){if(t.length!==e.length)return!1;for(let i=0,r=t.length;i<r;i++)if(t[i]!==e[i])return!1;return!0}function J(t,e){for(let i=0,r=e.length;i<r;i++)t[i]=e[i]}function tt(t,e){let i=q[e];void 0===i&&(i=new Int32Array(e),q[e]=i);for(let r=0;r!==e;++r)i[r]=t.allocateTextureUnit();return i}function et(t,e){const i=this.cache;i[0]!==e&&(t.uniform1f(this.addr,e),i[0]=e)}function it(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2f(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Q(i,e))return;t.uniform2fv(this.addr,e),J(i,e)}}function rt(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3f(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else if(void 0!==e.r)i[0]===e.r&&i[1]===e.g&&i[2]===e.b||(t.uniform3f(this.addr,e.r,e.g,e.b),i[0]=e.r,i[1]=e.g,i[2]=e.b);else{if(Q(i,e))return;t.uniform3fv(this.addr,e),J(i,e)}}function nt(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4f(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Q(i,e))return;t.uniform4fv(this.addr,e),J(i,e)}}function st(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(Q(i,e))return;t.uniformMatrix2fv(this.addr,!1,e),J(i,e)}else{if(Q(i,r))return;K.set(r),t.uniformMatrix2fv(this.addr,!1,K),J(i,r)}}function ot(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(Q(i,e))return;t.uniformMatrix3fv(this.addr,!1,e),J(i,e)}else{if(Q(i,r))return;Z.set(r),t.uniformMatrix3fv(this.addr,!1,Z),J(i,r)}}function at(t,e){const i=this.cache,r=e.elements;if(void 0===r){if(Q(i,e))return;t.uniformMatrix4fv(this.addr,!1,e),J(i,e)}else{if(Q(i,r))return;Y.set(r),t.uniformMatrix4fv(this.addr,!1,Y),J(i,r)}}function ht(t,e){const i=this.cache;i[0]!==e&&(t.uniform1i(this.addr,e),i[0]=e)}function lt(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2i(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Q(i,e))return;t.uniform2iv(this.addr,e),J(i,e)}}function ut(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3i(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Q(i,e))return;t.uniform3iv(this.addr,e),J(i,e)}}function ct(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4i(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Q(i,e))return;t.uniform4iv(this.addr,e),J(i,e)}}function dt(t,e){const i=this.cache;i[0]!==e&&(t.uniform1ui(this.addr,e),i[0]=e)}function ft(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y||(t.uniform2ui(this.addr,e.x,e.y),i[0]=e.x,i[1]=e.y);else{if(Q(i,e))return;t.uniform2uiv(this.addr,e),J(i,e)}}function pt(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z||(t.uniform3ui(this.addr,e.x,e.y,e.z),i[0]=e.x,i[1]=e.y,i[2]=e.z);else{if(Q(i,e))return;t.uniform3uiv(this.addr,e),J(i,e)}}function mt(t,e){const i=this.cache;if(void 0!==e.x)i[0]===e.x&&i[1]===e.y&&i[2]===e.z&&i[3]===e.w||(t.uniform4ui(this.addr,e.x,e.y,e.z,e.w),i[0]=e.x,i[1]=e.y,i[2]=e.z,i[3]=e.w);else{if(Q(i,e))return;t.uniform4uiv(this.addr,e),J(i,e)}}function gt(t,e,i){const n=this.cache,s=i.allocateTextureUnit();let o;n[0]!==s&&(t.uniform1i(this.addr,s),n[0]=s),this.type===t.SAMPLER_2D_SHADOW?(j.compareFunction=r.TiK,o=j):o=G,i.setTexture2D(e||o,s)}function vt(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture3D(e||H,n)}function yt(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTextureCube(e||W,n)}function bt(t,e,i){const r=this.cache,n=i.allocateTextureUnit();r[0]!==n&&(t.uniform1i(this.addr,n),r[0]=n),i.setTexture2DArray(e||V,n)}function _t(t,e){t.uniform1fv(this.addr,e)}function xt(t,e){const i=$(e,this.size,2);t.uniform2fv(this.addr,i)}function wt(t,e){const i=$(e,this.size,3);t.uniform3fv(this.addr,i)}function Mt(t,e){const i=$(e,this.size,4);t.uniform4fv(this.addr,i)}function St(t,e){const i=$(e,this.size,4);t.uniformMatrix2fv(this.addr,!1,i)}function At(t,e){const i=$(e,this.size,9);t.uniformMatrix3fv(this.addr,!1,i)}function Et(t,e){const i=$(e,this.size,16);t.uniformMatrix4fv(this.addr,!1,i)}function Tt(t,e){t.uniform1iv(this.addr,e)}function Rt(t,e){t.uniform2iv(this.addr,e)}function Pt(t,e){t.uniform3iv(this.addr,e)}function Ct(t,e){t.uniform4iv(this.addr,e)}function It(t,e){t.uniform1uiv(this.addr,e)}function kt(t,e){t.uniform2uiv(this.addr,e)}function Bt(t,e){t.uniform3uiv(this.addr,e)}function Ot(t,e){t.uniform4uiv(this.addr,e)}function Lt(t,e,i){const r=this.cache,n=e.length,s=tt(i,n);Q(r,s)||(t.uniform1iv(this.addr,s),J(r,s));for(let t=0;t!==n;++t)i.setTexture2D(e[t]||G,s[t])}function Ut(t,e,i){const r=this.cache,n=e.length,s=tt(i,n);Q(r,s)||(t.uniform1iv(this.addr,s),J(r,s));for(let t=0;t!==n;++t)i.setTexture3D(e[t]||H,s[t])}function Dt(t,e,i){const r=this.cache,n=e.length,s=tt(i,n);Q(r,s)||(t.uniform1iv(this.addr,s),J(r,s));for(let t=0;t!==n;++t)i.setTextureCube(e[t]||W,s[t])}function Nt(t,e,i){const r=this.cache,n=e.length,s=tt(i,n);Q(r,s)||(t.uniform1iv(this.addr,s),J(r,s));for(let t=0;t!==n;++t)i.setTexture2DArray(e[t]||V,s[t])}class Ft{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.setValue=function(t){switch(t){case 5126:return et;case 35664:return it;case 35665:return rt;case 35666:return nt;case 35674:return st;case 35675:return ot;case 35676:return at;case 5124:case 35670:return ht;case 35667:case 35671:return lt;case 35668:case 35672:return ut;case 35669:case 35673:return ct;case 5125:return dt;case 36294:return ft;case 36295:return pt;case 36296:return mt;case 35678:case 36198:case 36298:case 36306:case 35682:return gt;case 35679:case 36299:case 36307:return vt;case 35680:case 36300:case 36308:case 36293:return yt;case 36289:case 36303:case 36311:case 36292:return bt}}(e.type)}}class zt{constructor(t,e,i){this.id=t,this.addr=i,this.cache=[],this.type=e.type,this.size=e.size,this.setValue=function(t){switch(t){case 5126:return _t;case 35664:return xt;case 35665:return wt;case 35666:return Mt;case 35674:return St;case 35675:return At;case 35676:return Et;case 5124:case 35670:return Tt;case 35667:case 35671:return Rt;case 35668:case 35672:return Pt;case 35669:case 35673:return Ct;case 5125:return It;case 36294:return kt;case 36295:return Bt;case 36296:return Ot;case 35678:case 36198:case 36298:case 36306:case 35682:return Lt;case 35679:case 36299:case 36307:return Ut;case 35680:case 36300:case 36308:case 36293:return Dt;case 36289:case 36303:case 36311:case 36292:return Nt}}(e.type)}}class Gt{constructor(t){this.id=t,this.seq=[],this.map={}}setValue(t,e,i){const r=this.seq;for(let n=0,s=r.length;n!==s;++n){const s=r[n];s.setValue(t,e[s.id],i)}}}const jt=/(\w+)(\])?(\[|\.)?/g;function Vt(t,e){t.seq.push(e),t.map[e.id]=e}function Ht(t,e,i){const r=t.name,n=r.length;for(jt.lastIndex=0;;){const s=jt.exec(r),o=jt.lastIndex;let a=s[1];const h="]"===s[2],l=s[3];if(h&&(a|=0),void 0===l||"["===l&&o+2===n){Vt(i,void 0===l?new Ft(a,t,e):new zt(a,t,e));break}{let t=i.map[a];void 0===t&&(t=new Gt(a),Vt(i,t)),i=t}}}class Wt{constructor(t,e){this.seq=[],this.map={};const i=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<i;++r){const i=t.getActiveUniform(e,r);Ht(i,t.getUniformLocation(e,i.name),this)}}setValue(t,e,i,r){const n=this.map[e];void 0!==n&&n.setValue(t,i,r)}setOptional(t,e,i){const r=e[i];void 0!==r&&this.setValue(t,i,r)}static upload(t,e,i,r){for(let n=0,s=e.length;n!==s;++n){const s=e[n],o=i[s.id];!1!==o.needsUpdate&&s.setValue(t,o.value,r)}}static seqWithValue(t,e){const i=[];for(let r=0,n=t.length;r!==n;++r){const n=t[r];n.id in e&&i.push(n)}return i}}function Xt(t,e,i){const r=t.createShader(e);return t.shaderSource(r,i),t.compileShader(r),r}let qt=0;const Yt=new r.dwI;function Zt(t,e,i){const r=t.getShaderParameter(e,t.COMPILE_STATUS),n=t.getShaderInfoLog(e).trim();if(r&&""===n)return"";const s=/ERROR: 0:(\d+)/.exec(n);if(s){const r=parseInt(s[1]);return i.toUpperCase()+"\n\n"+n+"\n\n"+function(t,e){const i=t.split("\n"),r=[],n=Math.max(e-6,0),s=Math.min(e+6,i.length);for(let t=n;t<s;t++){const n=t+1;r.push(`${n===e?">":" "} ${n}: ${i[t]}`)}return r.join("\n")}(t.getShaderSource(e),r)}return n}function Kt(t,e){const i=function(t){r.ppV._getMatrix(Yt,r.ppV.workingColorSpace,t);const e=`mat3( ${Yt.elements.map(t=>t.toFixed(4))} )`;switch(r.ppV.getTransfer(t)){case r.VxR:return[e,"LinearTransferOETF"];case r.KLL:return[e,"sRGBTransferOETF"];default:return n.warn("THREE.WebGLProgram: Unsupported color space: ",t),[e,"LinearTransferOETF"]}}(e);return[`vec4 ${t}( vec4 value ) {`,`\treturn ${i[1]}( vec4( value.rgb * ${i[0]}, value.a ) );`,"}"].join("\n")}function $t(t,e){let i;switch(e){case r.kyO:i="Linear";break;case r.Mjd:i="Reinhard";break;case r.nNL:i="Cineon";break;case r.FV:i="ACESFilmic";break;case r.LAk:i="AgX";break;case r.aJ8:i="Neutral";break;case r.g7M:i="Custom";break;default:n.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),i="Linear"}return"vec3 "+t+"( vec3 color ) { return "+i+"ToneMapping( color ); }"}const Qt=new r.Pq0;function Jt(t){return""!==t}function te(t,e){const i=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return t.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,i).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function ee(t,e){return t.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const ie=/^[ \t]*#include +<([\w\d./]+)>/gm;function re(t){return t.replace(ie,se)}const ne=new Map;function se(t,e){let i=a[e];if(void 0===i){const t=ne.get(e);if(void 0===t)throw new Error("Can not resolve #include <"+e+">");i=a[t],n.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,t)}return re(i)}const oe=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function ae(t){return t.replace(oe,he)}function he(t,e,i,r){let n="";for(let t=parseInt(e);t<parseInt(i);t++)n+=r.replace(/\[\s*i\s*\]/g,"[ "+t+" ]").replace(/UNROLLED_LOOP_INDEX/g,t);return n}function le(t){let e=`precision ${t.precision} float;\n\tprecision ${t.precision} int;\n\tprecision ${t.precision} sampler2D;\n\tprecision ${t.precision} samplerCube;\n\tprecision ${t.precision} sampler3D;\n\tprecision ${t.precision} sampler2DArray;\n\tprecision ${t.precision} sampler2DShadow;\n\tprecision ${t.precision} samplerCubeShadow;\n\tprecision ${t.precision} sampler2DArrayShadow;\n\tprecision ${t.precision} isampler2D;\n\tprecision ${t.precision} isampler3D;\n\tprecision ${t.precision} isamplerCube;\n\tprecision ${t.precision} isampler2DArray;\n\tprecision ${t.precision} usampler2D;\n\tprecision ${t.precision} usampler3D;\n\tprecision ${t.precision} usamplerCube;\n\tprecision ${t.precision} usampler2DArray;\n\t`;return"highp"===t.precision?e+="\n#define HIGH_PRECISION":"mediump"===t.precision?e+="\n#define MEDIUM_PRECISION":"lowp"===t.precision&&(e+="\n#define LOW_PRECISION"),e}function ue(t,e,i,s){const o=t.getContext(),h=i.defines;let l=i.vertexShader,u=i.fragmentShader;const c=function(t){let e="SHADOWMAP_TYPE_BASIC";return t.shadowMapType===r.QP0?e="SHADOWMAP_TYPE_PCF":t.shadowMapType===r.Wk7?e="SHADOWMAP_TYPE_PCF_SOFT":t.shadowMapType===r.RyA&&(e="SHADOWMAP_TYPE_VSM"),e}(i),d=function(t){let e="ENVMAP_TYPE_CUBE";if(t.envMap)switch(t.envMapMode){case r.hy7:case r.xFO:e="ENVMAP_TYPE_CUBE";break;case r.Om:e="ENVMAP_TYPE_CUBE_UV"}return e}(i),f=function(t){let e="ENVMAP_MODE_REFLECTION";return t.envMap&&t.envMapMode===r.xFO&&(e="ENVMAP_MODE_REFRACTION"),e}(i),p=function(t){let e="ENVMAP_BLENDING_NONE";if(t.envMap)switch(t.combine){case r.caT:e="ENVMAP_BLENDING_MULTIPLY";break;case r.KRh:e="ENVMAP_BLENDING_MIX";break;case r.XrR:e="ENVMAP_BLENDING_ADD"}return e}(i),m=function(t){const e=t.envMapCubeUVHeight;if(null===e)return null;const i=Math.log2(e)-2,r=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,i),112)),texelHeight:r,maxMip:i}}(i),g=function(t){return[t.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",t.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Jt).join("\n")}(i),v=function(t){const e=[];for(const i in t){const r=t[i];!1!==r&&e.push("#define "+i+" "+r)}return e.join("\n")}(h),y=o.createProgram();let b,_,x=i.glslVersion?"#version "+i.glslVersion+"\n":"";i.isRawShaderMaterial?(b=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,v].filter(Jt).join("\n"),b.length>0&&(b+="\n"),_=["#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,v].filter(Jt).join("\n"),_.length>0&&(_+="\n")):(b=[le(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,v,i.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",i.batching?"#define USE_BATCHING":"",i.batchingColor?"#define USE_BATCHING_COLOR":"",i.instancing?"#define USE_INSTANCING":"",i.instancingColor?"#define USE_INSTANCING_COLOR":"",i.instancingMorph?"#define USE_INSTANCING_MORPH":"",i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.map?"#define USE_MAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+f:"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.displacementMap?"#define USE_DISPLACEMENTMAP":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.mapUv?"#define MAP_UV "+i.mapUv:"",i.alphaMapUv?"#define ALPHAMAP_UV "+i.alphaMapUv:"",i.lightMapUv?"#define LIGHTMAP_UV "+i.lightMapUv:"",i.aoMapUv?"#define AOMAP_UV "+i.aoMapUv:"",i.emissiveMapUv?"#define EMISSIVEMAP_UV "+i.emissiveMapUv:"",i.bumpMapUv?"#define BUMPMAP_UV "+i.bumpMapUv:"",i.normalMapUv?"#define NORMALMAP_UV "+i.normalMapUv:"",i.displacementMapUv?"#define DISPLACEMENTMAP_UV "+i.displacementMapUv:"",i.metalnessMapUv?"#define METALNESSMAP_UV "+i.metalnessMapUv:"",i.roughnessMapUv?"#define ROUGHNESSMAP_UV "+i.roughnessMapUv:"",i.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+i.anisotropyMapUv:"",i.clearcoatMapUv?"#define CLEARCOATMAP_UV "+i.clearcoatMapUv:"",i.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+i.clearcoatNormalMapUv:"",i.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+i.clearcoatRoughnessMapUv:"",i.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+i.iridescenceMapUv:"",i.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+i.iridescenceThicknessMapUv:"",i.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+i.sheenColorMapUv:"",i.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+i.sheenRoughnessMapUv:"",i.specularMapUv?"#define SPECULARMAP_UV "+i.specularMapUv:"",i.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+i.specularColorMapUv:"",i.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+i.specularIntensityMapUv:"",i.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+i.transmissionMapUv:"",i.thicknessMapUv?"#define THICKNESSMAP_UV "+i.thicknessMapUv:"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.flatShading?"#define FLAT_SHADED":"",i.skinning?"#define USE_SKINNING":"",i.morphTargets?"#define USE_MORPHTARGETS":"",i.morphNormals&&!1===i.flatShading?"#define USE_MORPHNORMALS":"",i.morphColors?"#define USE_MORPHCOLORS":"",i.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+i.morphTextureStride:"",i.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+i.morphTargetsCount:"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.sizeAttenuation?"#define USE_SIZEATTENUATION":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","\tattribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","\tattribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","\tuniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","\tattribute vec2 uv1;","#endif","#ifdef USE_UV2","\tattribute vec2 uv2;","#endif","#ifdef USE_UV3","\tattribute vec2 uv3;","#endif","#ifdef USE_TANGENT","\tattribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","\tattribute vec4 color;","#elif defined( USE_COLOR )","\tattribute vec3 color;","#endif","#ifdef USE_SKINNING","\tattribute vec4 skinIndex;","\tattribute vec4 skinWeight;","#endif","\n"].filter(Jt).join("\n"),_=[le(i),"#define SHADER_TYPE "+i.shaderType,"#define SHADER_NAME "+i.shaderName,v,i.useFog&&i.fog?"#define USE_FOG":"",i.useFog&&i.fogExp2?"#define FOG_EXP2":"",i.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",i.map?"#define USE_MAP":"",i.matcap?"#define USE_MATCAP":"",i.envMap?"#define USE_ENVMAP":"",i.envMap?"#define "+d:"",i.envMap?"#define "+f:"",i.envMap?"#define "+p:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",i.lightMap?"#define USE_LIGHTMAP":"",i.aoMap?"#define USE_AOMAP":"",i.bumpMap?"#define USE_BUMPMAP":"",i.normalMap?"#define USE_NORMALMAP":"",i.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",i.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",i.emissiveMap?"#define USE_EMISSIVEMAP":"",i.anisotropy?"#define USE_ANISOTROPY":"",i.anisotropyMap?"#define USE_ANISOTROPYMAP":"",i.clearcoat?"#define USE_CLEARCOAT":"",i.clearcoatMap?"#define USE_CLEARCOATMAP":"",i.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",i.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",i.dispersion?"#define USE_DISPERSION":"",i.iridescence?"#define USE_IRIDESCENCE":"",i.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",i.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",i.specularMap?"#define USE_SPECULARMAP":"",i.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",i.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",i.roughnessMap?"#define USE_ROUGHNESSMAP":"",i.metalnessMap?"#define USE_METALNESSMAP":"",i.alphaMap?"#define USE_ALPHAMAP":"",i.alphaTest?"#define USE_ALPHATEST":"",i.alphaHash?"#define USE_ALPHAHASH":"",i.sheen?"#define USE_SHEEN":"",i.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",i.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",i.transmission?"#define USE_TRANSMISSION":"",i.transmissionMap?"#define USE_TRANSMISSIONMAP":"",i.thicknessMap?"#define USE_THICKNESSMAP":"",i.vertexTangents&&!1===i.flatShading?"#define USE_TANGENT":"",i.vertexColors||i.instancingColor||i.batchingColor?"#define USE_COLOR":"",i.vertexAlphas?"#define USE_COLOR_ALPHA":"",i.vertexUv1s?"#define USE_UV1":"",i.vertexUv2s?"#define USE_UV2":"",i.vertexUv3s?"#define USE_UV3":"",i.pointsUvs?"#define USE_POINTS_UV":"",i.gradientMap?"#define USE_GRADIENTMAP":"",i.flatShading?"#define FLAT_SHADED":"",i.doubleSided?"#define DOUBLE_SIDED":"",i.flipSided?"#define FLIP_SIDED":"",i.shadowMapEnabled?"#define USE_SHADOWMAP":"",i.shadowMapEnabled?"#define "+c:"",i.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",i.numLightProbes>0?"#define USE_LIGHT_PROBES":"",i.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",i.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",i.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",i.reverseDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",i.toneMapping!==r.y_p?"#define TONE_MAPPING":"",i.toneMapping!==r.y_p?a.tonemapping_pars_fragment:"",i.toneMapping!==r.y_p?$t("toneMapping",i.toneMapping):"",i.dithering?"#define DITHERING":"",i.opaque?"#define OPAQUE":"",a.colorspace_pars_fragment,Kt("linearToOutputTexel",i.outputColorSpace),(r.ppV.getLuminanceCoefficients(Qt),["float luminance( const in vec3 rgb ) {",`\tconst vec3 weights = vec3( ${Qt.x.toFixed(4)}, ${Qt.y.toFixed(4)}, ${Qt.z.toFixed(4)} );`,"\treturn dot( weights, rgb );","}"].join("\n")),i.useDepthPacking?"#define DEPTH_PACKING "+i.depthPacking:"","\n"].filter(Jt).join("\n")),l=re(l),l=te(l,i),l=ee(l,i),u=re(u),u=te(u,i),u=ee(u,i),l=ae(l),u=ae(u),!0!==i.isRawShaderMaterial&&(x="#version 300 es\n",b=[g,"#define attribute in","#define varying out","#define texture2D texture"].join("\n")+"\n"+b,_=["#define varying in",i.glslVersion===r.Wdf?"":"layout(location = 0) out highp vec4 pc_fragColor;",i.glslVersion===r.Wdf?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join("\n")+"\n"+_);const w=x+b+l,M=x+_+u,S=Xt(o,o.VERTEX_SHADER,w),A=Xt(o,o.FRAGMENT_SHADER,M);function E(e){if(t.debug.checkShaderErrors){const i=o.getProgramInfoLog(y).trim(),r=o.getShaderInfoLog(S).trim(),s=o.getShaderInfoLog(A).trim();let a=!0,h=!0;if(!1===o.getProgramParameter(y,o.LINK_STATUS))if(a=!1,"function"==typeof t.debug.onShaderError)t.debug.onShaderError(o,y,S,A);else{const t=Zt(o,S,"vertex"),r=Zt(o,A,"fragment");n.error("THREE.WebGLProgram: Shader Error "+o.getError()+" - VALIDATE_STATUS "+o.getProgramParameter(y,o.VALIDATE_STATUS)+"\n\nMaterial Name: "+e.name+"\nMaterial Type: "+e.type+"\n\nProgram Info Log: "+i+"\n"+t+"\n"+r)}else""!==i?n.warn("THREE.WebGLProgram: Program Info Log:",i):""!==r&&""!==s||(h=!1);h&&(e.diagnostics={runnable:a,programLog:i,vertexShader:{log:r,prefix:b},fragmentShader:{log:s,prefix:_}})}o.deleteShader(S),o.deleteShader(A),T=new Wt(o,y),R=function(t,e){const i={},r=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let n=0;n<r;n++){const r=t.getActiveAttrib(e,n),s=r.name;let o=1;r.type===t.FLOAT_MAT2&&(o=2),r.type===t.FLOAT_MAT3&&(o=3),r.type===t.FLOAT_MAT4&&(o=4),i[s]={type:r.type,location:t.getAttribLocation(e,s),locationSize:o}}return i}(o,y)}let T,R;o.attachShader(y,S),o.attachShader(y,A),void 0!==i.index0AttributeName?o.bindAttribLocation(y,0,i.index0AttributeName):!0===i.morphTargets&&o.bindAttribLocation(y,0,"position"),o.linkProgram(y),this.getUniforms=function(){return void 0===T&&E(this),T},this.getAttributes=function(){return void 0===R&&E(this),R};let P=!1===i.rendererExtensionParallelShaderCompile;return this.isReady=function(){return!1===P&&(P=o.getProgramParameter(y,37297)),P},this.destroy=function(){s.releaseStatesOfProgram(this),o.deleteProgram(y),this.program=void 0},this.type=i.shaderType,this.name=i.shaderName,this.id=qt++,this.cacheKey=e,this.usedTimes=1,this.program=y,this.vertexShader=S,this.fragmentShader=A,this}let ce=0;class de{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(t){const e=t.vertexShader,i=t.fragmentShader,r=this._getShaderStage(e),n=this._getShaderStage(i),s=this._getShaderCacheForMaterial(t);return!1===s.has(r)&&(s.add(r),r.usedTimes++),!1===s.has(n)&&(s.add(n),n.usedTimes++),this}remove(t){const e=this.materialCache.get(t);for(const t of e)t.usedTimes--,0===t.usedTimes&&this.shaderCache.delete(t.code);return this.materialCache.delete(t),this}getVertexShaderID(t){return this._getShaderStage(t.vertexShader).id}getFragmentShaderID(t){return this._getShaderStage(t.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(t){const e=this.materialCache;let i=e.get(t);return void 0===i&&(i=new Set,e.set(t,i)),i}_getShaderStage(t){const e=this.shaderCache;let i=e.get(t);return void 0===i&&(i=new fe(t),e.set(t,i)),i}}class fe{constructor(t){this.id=ce++,this.code=t,this.usedTimes=0}}function pe(t,e,i,s,o,a,h){const u=new r.zgK,c=new de,d=new Set,f=[],p=o.logarithmicDepthBuffer,m=o.vertexTextures;let g=o.precision;const v={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function y(t){return d.add(t),0===t?"uv":`uv${t}`}return{getParameters:function(a,u,f,b,_){const x=b.fog,w=_.geometry,M=a.isMeshStandardMaterial?b.environment:null,S=(a.isMeshStandardMaterial?i:e).get(a.envMap||M),A=S&&S.mapping===r.Om?S.image.height:null,E=v[a.type];null!==a.precision&&(g=o.getMaxPrecision(a.precision),g!==a.precision&&n.warn("THREE.WebGLProgram.getParameters:",a.precision,"not supported, using",g,"instead."));const T=w.morphAttributes.position||w.morphAttributes.normal||w.morphAttributes.color,R=void 0!==T?T.length:0;let P,C,I,k,B=0;if(void 0!==w.morphAttributes.position&&(B=1),void 0!==w.morphAttributes.normal&&(B=2),void 0!==w.morphAttributes.color&&(B=3),E){const t=l[E];P=t.vertexShader,C=t.fragmentShader}else P=a.vertexShader,C=a.fragmentShader,c.update(a),I=c.getVertexShaderID(a),k=c.getFragmentShaderID(a);const O=t.getRenderTarget(),L=t.state.buffers.depth.getReversed(),U=!0===_.isInstancedMesh,D=!0===_.isBatchedMesh,N=!!a.map,F=!!a.matcap,z=!!S,G=!!a.aoMap,j=!!a.lightMap,V=!!a.bumpMap,H=!!a.normalMap,W=!!a.displacementMap,X=!!a.emissiveMap,q=!!a.metalnessMap,Y=!!a.roughnessMap,Z=a.anisotropy>0,K=a.clearcoat>0,$=a.dispersion>0,Q=a.iridescence>0,J=a.sheen>0,tt=a.transmission>0,et=Z&&!!a.anisotropyMap,it=K&&!!a.clearcoatMap,rt=K&&!!a.clearcoatNormalMap,nt=K&&!!a.clearcoatRoughnessMap,st=Q&&!!a.iridescenceMap,ot=Q&&!!a.iridescenceThicknessMap,at=J&&!!a.sheenColorMap,ht=J&&!!a.sheenRoughnessMap,lt=!!a.specularMap,ut=!!a.specularColorMap,ct=!!a.specularIntensityMap,dt=tt&&!!a.transmissionMap,ft=tt&&!!a.thicknessMap,pt=!!a.gradientMap,mt=!!a.alphaMap,gt=a.alphaTest>0,vt=!!a.alphaHash,yt=!!a.extensions;let bt=r.y_p;a.toneMapped&&(null!==O&&!0!==O.isXRRenderTarget||(bt=t.toneMapping));const _t={shaderID:E,shaderType:a.type,shaderName:a.name,vertexShader:P,fragmentShader:C,defines:a.defines,customVertexShaderID:I,customFragmentShaderID:k,isRawShaderMaterial:!0===a.isRawShaderMaterial,glslVersion:a.glslVersion,precision:g,batching:D,batchingColor:D&&null!==_._colorsTexture,instancing:U,instancingColor:U&&null!==_.instanceColor,instancingMorph:U&&null!==_.morphTexture,supportsVertexTextures:m,outputColorSpace:null===O?t.outputColorSpace:!0===O.isXRRenderTarget?O.texture.colorSpace:r.Zr2,alphaToCoverage:!!a.alphaToCoverage,map:N,matcap:F,envMap:z,envMapMode:z&&S.mapping,envMapCubeUVHeight:A,aoMap:G,lightMap:j,bumpMap:V,normalMap:H,displacementMap:m&&W,emissiveMap:X,normalMapObjectSpace:H&&a.normalMapType===r.vyJ,normalMapTangentSpace:H&&a.normalMapType===r.bI3,metalnessMap:q,roughnessMap:Y,anisotropy:Z,anisotropyMap:et,clearcoat:K,clearcoatMap:it,clearcoatNormalMap:rt,clearcoatRoughnessMap:nt,dispersion:$,iridescence:Q,iridescenceMap:st,iridescenceThicknessMap:ot,sheen:J,sheenColorMap:at,sheenRoughnessMap:ht,specularMap:lt,specularColorMap:ut,specularIntensityMap:ct,transmission:tt,transmissionMap:dt,thicknessMap:ft,gradientMap:pt,opaque:!1===a.transparent&&a.blending===r.NTi&&!1===a.alphaToCoverage,alphaMap:mt,alphaTest:gt,alphaHash:vt,combine:a.combine,mapUv:N&&y(a.map.channel),aoMapUv:G&&y(a.aoMap.channel),lightMapUv:j&&y(a.lightMap.channel),bumpMapUv:V&&y(a.bumpMap.channel),normalMapUv:H&&y(a.normalMap.channel),displacementMapUv:W&&y(a.displacementMap.channel),emissiveMapUv:X&&y(a.emissiveMap.channel),metalnessMapUv:q&&y(a.metalnessMap.channel),roughnessMapUv:Y&&y(a.roughnessMap.channel),anisotropyMapUv:et&&y(a.anisotropyMap.channel),clearcoatMapUv:it&&y(a.clearcoatMap.channel),clearcoatNormalMapUv:rt&&y(a.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:nt&&y(a.clearcoatRoughnessMap.channel),iridescenceMapUv:st&&y(a.iridescenceMap.channel),iridescenceThicknessMapUv:ot&&y(a.iridescenceThicknessMap.channel),sheenColorMapUv:at&&y(a.sheenColorMap.channel),sheenRoughnessMapUv:ht&&y(a.sheenRoughnessMap.channel),specularMapUv:lt&&y(a.specularMap.channel),specularColorMapUv:ut&&y(a.specularColorMap.channel),specularIntensityMapUv:ct&&y(a.specularIntensityMap.channel),transmissionMapUv:dt&&y(a.transmissionMap.channel),thicknessMapUv:ft&&y(a.thicknessMap.channel),alphaMapUv:mt&&y(a.alphaMap.channel),vertexTangents:!!w.attributes.tangent&&(H||Z),vertexColors:a.vertexColors,vertexAlphas:!0===a.vertexColors&&!!w.attributes.color&&4===w.attributes.color.itemSize,pointsUvs:!0===_.isPoints&&!!w.attributes.uv&&(N||mt),fog:!!x,useFog:!0===a.fog,fogExp2:!!x&&x.isFogExp2,flatShading:!0===a.flatShading,sizeAttenuation:!0===a.sizeAttenuation,logarithmicDepthBuffer:p,reverseDepthBuffer:L,skinning:!0===_.isSkinnedMesh,morphTargets:void 0!==w.morphAttributes.position,morphNormals:void 0!==w.morphAttributes.normal,morphColors:void 0!==w.morphAttributes.color,morphTargetsCount:R,morphTextureStride:B,numDirLights:u.directional.length,numPointLights:u.point.length,numSpotLights:u.spot.length,numSpotLightMaps:u.spotLightMap.length,numRectAreaLights:u.rectArea.length,numHemiLights:u.hemi.length,numDirLightShadows:u.directionalShadowMap.length,numPointLightShadows:u.pointShadowMap.length,numSpotLightShadows:u.spotShadowMap.length,numSpotLightShadowsWithMaps:u.numSpotLightShadowsWithMaps,numLightProbes:u.numLightProbes,numClippingPlanes:h.numPlanes,numClipIntersection:h.numIntersection,dithering:a.dithering,shadowMapEnabled:t.shadowMap.enabled&&f.length>0,shadowMapType:t.shadowMap.type,toneMapping:bt,decodeVideoTexture:N&&!0===a.map.isVideoTexture&&r.ppV.getTransfer(a.map.colorSpace)===r.KLL,decodeVideoTextureEmissive:X&&!0===a.emissiveMap.isVideoTexture&&r.ppV.getTransfer(a.emissiveMap.colorSpace)===r.KLL,premultipliedAlpha:a.premultipliedAlpha,doubleSided:a.side===r.$EB,flipSided:a.side===r.hsX,useDepthPacking:a.depthPacking>=0,depthPacking:a.depthPacking||0,index0AttributeName:a.index0AttributeName,extensionClipCullDistance:yt&&!0===a.extensions.clipCullDistance&&s.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(yt&&!0===a.extensions.multiDraw||D)&&s.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:s.has("KHR_parallel_shader_compile"),customProgramCacheKey:a.customProgramCacheKey()};return _t.vertexUv1s=d.has(1),_t.vertexUv2s=d.has(2),_t.vertexUv3s=d.has(3),d.clear(),_t},getProgramCacheKey:function(e){const i=[];if(e.shaderID?i.push(e.shaderID):(i.push(e.customVertexShaderID),i.push(e.customFragmentShaderID)),void 0!==e.defines)for(const t in e.defines)i.push(t),i.push(e.defines[t]);return!1===e.isRawShaderMaterial&&(function(t,e){t.push(e.precision),t.push(e.outputColorSpace),t.push(e.envMapMode),t.push(e.envMapCubeUVHeight),t.push(e.mapUv),t.push(e.alphaMapUv),t.push(e.lightMapUv),t.push(e.aoMapUv),t.push(e.bumpMapUv),t.push(e.normalMapUv),t.push(e.displacementMapUv),t.push(e.emissiveMapUv),t.push(e.metalnessMapUv),t.push(e.roughnessMapUv),t.push(e.anisotropyMapUv),t.push(e.clearcoatMapUv),t.push(e.clearcoatNormalMapUv),t.push(e.clearcoatRoughnessMapUv),t.push(e.iridescenceMapUv),t.push(e.iridescenceThicknessMapUv),t.push(e.sheenColorMapUv),t.push(e.sheenRoughnessMapUv),t.push(e.specularMapUv),t.push(e.specularColorMapUv),t.push(e.specularIntensityMapUv),t.push(e.transmissionMapUv),t.push(e.thicknessMapUv),t.push(e.combine),t.push(e.fogExp2),t.push(e.sizeAttenuation),t.push(e.morphTargetsCount),t.push(e.morphAttributeCount),t.push(e.numDirLights),t.push(e.numPointLights),t.push(e.numSpotLights),t.push(e.numSpotLightMaps),t.push(e.numHemiLights),t.push(e.numRectAreaLights),t.push(e.numDirLightShadows),t.push(e.numPointLightShadows),t.push(e.numSpotLightShadows),t.push(e.numSpotLightShadowsWithMaps),t.push(e.numLightProbes),t.push(e.shadowMapType),t.push(e.toneMapping),t.push(e.numClippingPlanes),t.push(e.numClipIntersection),t.push(e.depthPacking)}(i,e),function(t,e){u.disableAll(),e.supportsVertexTextures&&u.enable(0),e.instancing&&u.enable(1),e.instancingColor&&u.enable(2),e.instancingMorph&&u.enable(3),e.matcap&&u.enable(4),e.envMap&&u.enable(5),e.normalMapObjectSpace&&u.enable(6),e.normalMapTangentSpace&&u.enable(7),e.clearcoat&&u.enable(8),e.iridescence&&u.enable(9),e.alphaTest&&u.enable(10),e.vertexColors&&u.enable(11),e.vertexAlphas&&u.enable(12),e.vertexUv1s&&u.enable(13),e.vertexUv2s&&u.enable(14),e.vertexUv3s&&u.enable(15),e.vertexTangents&&u.enable(16),e.anisotropy&&u.enable(17),e.alphaHash&&u.enable(18),e.batching&&u.enable(19),e.dispersion&&u.enable(20),e.batchingColor&&u.enable(21),t.push(u.mask),u.disableAll(),e.fog&&u.enable(0),e.useFog&&u.enable(1),e.flatShading&&u.enable(2),e.logarithmicDepthBuffer&&u.enable(3),e.reverseDepthBuffer&&u.enable(4),e.skinning&&u.enable(5),e.morphTargets&&u.enable(6),e.morphNormals&&u.enable(7),e.morphColors&&u.enable(8),e.premultipliedAlpha&&u.enable(9),e.shadowMapEnabled&&u.enable(10),e.doubleSided&&u.enable(11),e.flipSided&&u.enable(12),e.useDepthPacking&&u.enable(13),e.dithering&&u.enable(14),e.transmission&&u.enable(15),e.sheen&&u.enable(16),e.opaque&&u.enable(17),e.pointsUvs&&u.enable(18),e.decodeVideoTexture&&u.enable(19),e.decodeVideoTextureEmissive&&u.enable(20),e.alphaToCoverage&&u.enable(21),t.push(u.mask)}(i,e),i.push(t.outputColorSpace)),i.push(e.customProgramCacheKey),i.join()},getUniforms:function(t){const e=v[t.type];let i;if(e){const t=l[e];i=r.LlO.clone(t.uniforms)}else i=t.uniforms;return i},acquireProgram:function(e,i){let r;for(let t=0,e=f.length;t<e;t++){const e=f[t];if(e.cacheKey===i){r=e,++r.usedTimes;break}}return void 0===r&&(r=new ue(t,i,e,a),f.push(r)),r},releaseProgram:function(t){if(0===--t.usedTimes){const e=f.indexOf(t);f[e]=f[f.length-1],f.pop(),t.destroy()}},releaseShaderCache:function(t){c.remove(t)},programs:f,dispose:function(){c.dispose()}}}function me(){let t=new WeakMap;return{has:function(e){return t.has(e)},get:function(e){let i=t.get(e);return void 0===i&&(i={},t.set(e,i)),i},remove:function(e){t.delete(e)},update:function(e,i,r){t.get(e)[i]=r},dispose:function(){t=new WeakMap}}}function ge(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.material.id!==e.material.id?t.material.id-e.material.id:t.z!==e.z?t.z-e.z:t.id-e.id}function ve(t,e){return t.groupOrder!==e.groupOrder?t.groupOrder-e.groupOrder:t.renderOrder!==e.renderOrder?t.renderOrder-e.renderOrder:t.z!==e.z?e.z-t.z:t.id-e.id}function ye(){const t=[];let e=0;const i=[],r=[],n=[];function s(i,r,n,s,o,a){let h=t[e];return void 0===h?(h={id:i.id,object:i,geometry:r,material:n,groupOrder:s,renderOrder:i.renderOrder,z:o,group:a},t[e]=h):(h.id=i.id,h.object=i,h.geometry=r,h.material=n,h.groupOrder=s,h.renderOrder=i.renderOrder,h.z=o,h.group=a),e++,h}return{opaque:i,transmissive:r,transparent:n,init:function(){e=0,i.length=0,r.length=0,n.length=0},push:function(t,e,o,a,h,l){const u=s(t,e,o,a,h,l);o.transmission>0?r.push(u):!0===o.transparent?n.push(u):i.push(u)},unshift:function(t,e,o,a,h,l){const u=s(t,e,o,a,h,l);o.transmission>0?r.unshift(u):!0===o.transparent?n.unshift(u):i.unshift(u)},finish:function(){for(let i=e,r=t.length;i<r;i++){const e=t[i];if(null===e.id)break;e.id=null,e.object=null,e.geometry=null,e.material=null,e.group=null}},sort:function(t,e){i.length>1&&i.sort(t||ge),r.length>1&&r.sort(e||ve),n.length>1&&n.sort(e||ve)}}}function be(){let t=new WeakMap;return{get:function(e,i){const r=t.get(e);let n;return void 0===r?(n=new ye,t.set(e,[n])):i>=r.length?(n=new ye,r.push(n)):n=r[i],n},dispose:function(){t=new WeakMap}}}function _e(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":i={direction:new r.Pq0,color:new r.Q1f};break;case"SpotLight":i={position:new r.Pq0,direction:new r.Pq0,color:new r.Q1f,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":i={position:new r.Pq0,color:new r.Q1f,distance:0,decay:0};break;case"HemisphereLight":i={direction:new r.Pq0,skyColor:new r.Q1f,groundColor:new r.Q1f};break;case"RectAreaLight":i={color:new r.Q1f,position:new r.Pq0,halfWidth:new r.Pq0,halfHeight:new r.Pq0}}return t[e.id]=i,i}}}let xe=0;function we(t,e){return(e.castShadow?2:0)-(t.castShadow?2:0)+(e.map?1:0)-(t.map?1:0)}function Me(t){const e=new _e,i=function(){const t={};return{get:function(e){if(void 0!==t[e.id])return t[e.id];let i;switch(e.type){case"DirectionalLight":case"SpotLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.I9Y};break;case"PointLight":i={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new r.I9Y,shadowCameraNear:1,shadowCameraFar:1e3}}return t[e.id]=i,i}}}(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let t=0;t<9;t++)n.probe.push(new r.Pq0);const s=new r.Pq0,o=new r.kn4,a=new r.kn4;return{setup:function(r){let s=0,o=0,a=0;for(let t=0;t<9;t++)n.probe[t].set(0,0,0);let l=0,u=0,c=0,d=0,f=0,p=0,m=0,g=0,v=0,y=0,b=0;r.sort(we);for(let t=0,h=r.length;t<h;t++){const h=r[t],_=h.color,x=h.intensity,w=h.distance,M=h.shadow&&h.shadow.map?h.shadow.map.texture:null;if(h.isAmbientLight)s+=_.r*x,o+=_.g*x,a+=_.b*x;else if(h.isLightProbe){for(let t=0;t<9;t++)n.probe[t].addScaledVector(h.sh.coefficients[t],x);b++}else if(h.isDirectionalLight){const t=e.get(h);if(t.color.copy(h.color).multiplyScalar(h.intensity),h.castShadow){const t=h.shadow,e=i.get(h);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,n.directionalShadow[l]=e,n.directionalShadowMap[l]=M,n.directionalShadowMatrix[l]=h.shadow.matrix,p++}n.directional[l]=t,l++}else if(h.isSpotLight){const t=e.get(h);t.position.setFromMatrixPosition(h.matrixWorld),t.color.copy(_).multiplyScalar(x),t.distance=w,t.coneCos=Math.cos(h.angle),t.penumbraCos=Math.cos(h.angle*(1-h.penumbra)),t.decay=h.decay,n.spot[c]=t;const r=h.shadow;if(h.map&&(n.spotLightMap[v]=h.map,v++,r.updateMatrices(h),h.castShadow&&y++),n.spotLightMatrix[c]=r.matrix,h.castShadow){const t=i.get(h);t.shadowIntensity=r.intensity,t.shadowBias=r.bias,t.shadowNormalBias=r.normalBias,t.shadowRadius=r.radius,t.shadowMapSize=r.mapSize,n.spotShadow[c]=t,n.spotShadowMap[c]=M,g++}c++}else if(h.isRectAreaLight){const t=e.get(h);t.color.copy(_).multiplyScalar(x),t.halfWidth.set(.5*h.width,0,0),t.halfHeight.set(0,.5*h.height,0),n.rectArea[d]=t,d++}else if(h.isPointLight){const t=e.get(h);if(t.color.copy(h.color).multiplyScalar(h.intensity),t.distance=h.distance,t.decay=h.decay,h.castShadow){const t=h.shadow,e=i.get(h);e.shadowIntensity=t.intensity,e.shadowBias=t.bias,e.shadowNormalBias=t.normalBias,e.shadowRadius=t.radius,e.shadowMapSize=t.mapSize,e.shadowCameraNear=t.camera.near,e.shadowCameraFar=t.camera.far,n.pointShadow[u]=e,n.pointShadowMap[u]=M,n.pointShadowMatrix[u]=h.shadow.matrix,m++}n.point[u]=t,u++}else if(h.isHemisphereLight){const t=e.get(h);t.skyColor.copy(h.color).multiplyScalar(x),t.groundColor.copy(h.groundColor).multiplyScalar(x),n.hemi[f]=t,f++}}d>0&&(!0===t.has("OES_texture_float_linear")?(n.rectAreaLTC1=h.LTC_FLOAT_1,n.rectAreaLTC2=h.LTC_FLOAT_2):(n.rectAreaLTC1=h.LTC_HALF_1,n.rectAreaLTC2=h.LTC_HALF_2)),n.ambient[0]=s,n.ambient[1]=o,n.ambient[2]=a;const _=n.hash;_.directionalLength===l&&_.pointLength===u&&_.spotLength===c&&_.rectAreaLength===d&&_.hemiLength===f&&_.numDirectionalShadows===p&&_.numPointShadows===m&&_.numSpotShadows===g&&_.numSpotMaps===v&&_.numLightProbes===b||(n.directional.length=l,n.spot.length=c,n.rectArea.length=d,n.point.length=u,n.hemi.length=f,n.directionalShadow.length=p,n.directionalShadowMap.length=p,n.pointShadow.length=m,n.pointShadowMap.length=m,n.spotShadow.length=g,n.spotShadowMap.length=g,n.directionalShadowMatrix.length=p,n.pointShadowMatrix.length=m,n.spotLightMatrix.length=g+v-y,n.spotLightMap.length=v,n.numSpotLightShadowsWithMaps=y,n.numLightProbes=b,_.directionalLength=l,_.pointLength=u,_.spotLength=c,_.rectAreaLength=d,_.hemiLength=f,_.numDirectionalShadows=p,_.numPointShadows=m,_.numSpotShadows=g,_.numSpotMaps=v,_.numLightProbes=b,n.version=xe++)},setupView:function(t,e){let i=0,r=0,h=0,l=0,u=0;const c=e.matrixWorldInverse;for(let e=0,d=t.length;e<d;e++){const d=t[e];if(d.isDirectionalLight){const t=n.directional[i];t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),i++}else if(d.isSpotLight){const t=n.spot[h];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),t.direction.setFromMatrixPosition(d.matrixWorld),s.setFromMatrixPosition(d.target.matrixWorld),t.direction.sub(s),t.direction.transformDirection(c),h++}else if(d.isRectAreaLight){const t=n.rectArea[l];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),a.identity(),o.copy(d.matrixWorld),o.premultiply(c),a.extractRotation(o),t.halfWidth.set(.5*d.width,0,0),t.halfHeight.set(0,.5*d.height,0),t.halfWidth.applyMatrix4(a),t.halfHeight.applyMatrix4(a),l++}else if(d.isPointLight){const t=n.point[r];t.position.setFromMatrixPosition(d.matrixWorld),t.position.applyMatrix4(c),r++}else if(d.isHemisphereLight){const t=n.hemi[u];t.direction.setFromMatrixPosition(d.matrixWorld),t.direction.transformDirection(c),u++}}},state:n}}function Se(t){const e=new Me(t),i=[],r=[],n={lightsArray:i,shadowsArray:r,camera:null,lights:e,transmissionRenderTarget:{}};return{init:function(t){n.camera=t,i.length=0,r.length=0},state:n,setupLights:function(){e.setup(i)},setupLightsView:function(t){e.setupView(i,t)},pushLight:function(t){i.push(t)},pushShadow:function(t){r.push(t)}}}function Ae(t){let e=new WeakMap;return{get:function(i,r=0){const n=e.get(i);let s;return void 0===n?(s=new Se(t),e.set(i,[s])):r>=n.length?(s=new Se(t),n.push(s)):s=n[r],s},dispose:function(){e=new WeakMap}}}function Ee(t,e,i){let s=new r.PPD;const o=new r.I9Y,a=new r.I9Y,h=new r.IUQ,l=new r.CSG({depthPacking:r.N5j}),u=new r.aVO,c={},d=i.maxTextureSize,f={[r.hB5]:r.hsX,[r.hsX]:r.hB5,[r.$EB]:r.$EB},p=new r.BKk({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new r.I9Y},radius:{value:4}},vertexShader:"void main() {\n\tgl_Position = vec4( position, 1.0 );\n}",fragmentShader:"uniform sampler2D shadow_pass;\nuniform vec2 resolution;\nuniform float radius;\n#include <packing>\nvoid main() {\n\tconst float samples = float( VSM_SAMPLES );\n\tfloat mean = 0.0;\n\tfloat squared_mean = 0.0;\n\tfloat uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );\n\tfloat uvStart = samples <= 1.0 ? 0.0 : - 1.0;\n\tfor ( float i = 0.0; i < samples; i ++ ) {\n\t\tfloat uvOffset = uvStart + i * uvStride;\n\t\t#ifdef HORIZONTAL_PASS\n\t\t\tvec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );\n\t\t\tmean += distribution.x;\n\t\t\tsquared_mean += distribution.y * distribution.y + distribution.x * distribution.x;\n\t\t#else\n\t\t\tfloat depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );\n\t\t\tmean += depth;\n\t\t\tsquared_mean += depth * depth;\n\t\t#endif\n\t}\n\tmean = mean / samples;\n\tsquared_mean = squared_mean / samples;\n\tfloat std_dev = sqrt( squared_mean - mean * mean );\n\tgl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );\n}"}),m=p.clone();m.defines.HORIZONTAL_PASS=1;const g=new r.LoY;g.setAttribute("position",new r.THS(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const v=new r.eaF(g,p),y=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=r.QP0;let b=this.type;function _(i,n){const s=e.update(v);p.defines.VSM_SAMPLES!==i.blurSamples&&(p.defines.VSM_SAMPLES=i.blurSamples,m.defines.VSM_SAMPLES=i.blurSamples,p.needsUpdate=!0,m.needsUpdate=!0),null===i.mapPass&&(i.mapPass=new r.nWS(o.x,o.y)),p.uniforms.shadow_pass.value=i.map.texture,p.uniforms.resolution.value=i.mapSize,p.uniforms.radius.value=i.radius,t.setRenderTarget(i.mapPass),t.clear(),t.renderBufferDirect(n,null,s,p,v,null),m.uniforms.shadow_pass.value=i.mapPass.texture,m.uniforms.resolution.value=i.mapSize,m.uniforms.radius.value=i.radius,t.setRenderTarget(i.map),t.clear(),t.renderBufferDirect(n,null,s,m,v,null)}function x(e,i,n,s){let o=null;const a=!0===n.isPointLight?e.customDistanceMaterial:e.customDepthMaterial;if(void 0!==a)o=a;else if(o=!0===n.isPointLight?u:l,t.localClippingEnabled&&!0===i.clipShadows&&Array.isArray(i.clippingPlanes)&&0!==i.clippingPlanes.length||i.displacementMap&&0!==i.displacementScale||i.alphaMap&&i.alphaTest>0||i.map&&i.alphaTest>0){const t=o.uuid,e=i.uuid;let r=c[t];void 0===r&&(r={},c[t]=r);let n=r[e];void 0===n&&(n=o.clone(),r[e]=n,i.addEventListener("dispose",M)),o=n}return o.visible=i.visible,o.wireframe=i.wireframe,s===r.RyA?o.side=null!==i.shadowSide?i.shadowSide:i.side:o.side=null!==i.shadowSide?i.shadowSide:f[i.side],o.alphaMap=i.alphaMap,o.alphaTest=i.alphaTest,o.map=i.map,o.clipShadows=i.clipShadows,o.clippingPlanes=i.clippingPlanes,o.clipIntersection=i.clipIntersection,o.displacementMap=i.displacementMap,o.displacementScale=i.displacementScale,o.displacementBias=i.displacementBias,o.wireframeLinewidth=i.wireframeLinewidth,o.linewidth=i.linewidth,!0===n.isPointLight&&!0===o.isMeshDistanceMaterial&&(t.properties.get(o).light=n),o}function w(i,n,o,a,h){if(!1===i.visible)return;if(i.layers.test(n.layers)&&(i.isMesh||i.isLine||i.isPoints)&&(i.castShadow||i.receiveShadow&&h===r.RyA)&&(!i.frustumCulled||s.intersectsObject(i))){i.modelViewMatrix.multiplyMatrices(o.matrixWorldInverse,i.matrixWorld);const r=e.update(i),s=i.material;if(Array.isArray(s)){const e=r.groups;for(let l=0,u=e.length;l<u;l++){const u=e[l],c=s[u.materialIndex];if(c&&c.visible){const e=x(i,c,a,h);i.onBeforeShadow(t,i,n,o,r,e,u),t.renderBufferDirect(o,null,r,e,i,u),i.onAfterShadow(t,i,n,o,r,e,u)}}}else if(s.visible){const e=x(i,s,a,h);i.onBeforeShadow(t,i,n,o,r,e,null),t.renderBufferDirect(o,null,r,e,i,null),i.onAfterShadow(t,i,n,o,r,e,null)}}const l=i.children;for(let t=0,e=l.length;t<e;t++)w(l[t],n,o,a,h)}function M(t){t.target.removeEventListener("dispose",M);for(const e in c){const i=c[e],r=t.target.uuid;r in i&&(i[r].dispose(),delete i[r])}}this.render=function(e,i,l){if(!1===y.enabled)return;if(!1===y.autoUpdate&&!1===y.needsUpdate)return;if(0===e.length)return;const u=t.getRenderTarget(),c=t.getActiveCubeFace(),f=t.getActiveMipmapLevel(),p=t.state;p.setBlending(r.XIg),p.buffers.color.setClear(1,1,1,1),p.buffers.depth.setTest(!0),p.setScissorTest(!1);const m=b!==r.RyA&&this.type===r.RyA,g=b===r.RyA&&this.type!==r.RyA;for(let u=0,c=e.length;u<c;u++){const c=e[u],f=c.shadow;if(void 0===f){n.warn("THREE.WebGLShadowMap:",c,"has no shadow.");continue}if(!1===f.autoUpdate&&!1===f.needsUpdate)continue;o.copy(f.mapSize);const v=f.getFrameExtents();if(o.multiply(v),a.copy(f.mapSize),(o.x>d||o.y>d)&&(o.x>d&&(a.x=Math.floor(d/v.x),o.x=a.x*v.x,f.mapSize.x=a.x),o.y>d&&(a.y=Math.floor(d/v.y),o.y=a.y*v.y,f.mapSize.y=a.y)),null===f.map||!0===m||!0===g){const t=this.type!==r.RyA?{minFilter:r.hxR,magFilter:r.hxR}:{};null!==f.map&&f.map.dispose(),f.map=new r.nWS(o.x,o.y,t),f.map.texture.name=c.name+".shadowMap",f.camera.updateProjectionMatrix()}t.setRenderTarget(f.map),t.clear();const y=f.getViewportCount();for(let t=0;t<y;t++){const e=f.getViewport(t);h.set(a.x*e.x,a.y*e.y,a.x*e.z,a.y*e.w),p.viewport(h),f.updateMatrices(c,t),s=f.getFrustum(),w(i,l,f.camera,c,this.type)}!0!==f.isPointLightShadow&&this.type===r.RyA&&_(f,l),f.needsUpdate=!1}b=this.type,y.needsUpdate=!1,t.setRenderTarget(u,c,f)}}const Te={[r.eHc]:r.lGu,[r.brA]:r.K52,[r.U3G]:r.bw0,[r.xSv]:r.Gwm,[r.lGu]:r.eHc,[r.K52]:r.brA,[r.bw0]:r.U3G,[r.Gwm]:r.xSv};function Re(t,e){const i=new function(){let e=!1;const i=new r.IUQ;let n=null;const s=new r.IUQ(0,0,0,0);return{setMask:function(i){n===i||e||(t.colorMask(i,i,i,i),n=i)},setLocked:function(t){e=t},setClear:function(e,r,n,o,a){!0===a&&(e*=o,r*=o,n*=o),i.set(e,r,n,o),!1===s.equals(i)&&(t.clearColor(e,r,n,o),s.copy(i))},reset:function(){e=!1,n=null,s.set(-1,0,0,0)}}},s=new function(){let i=!1,n=!1,s=null,o=null,a=null;return{setReversed:function(t){if(n!==t){const t=e.get("EXT_clip_control");n?t.clipControlEXT(t.LOWER_LEFT_EXT,t.ZERO_TO_ONE_EXT):t.clipControlEXT(t.LOWER_LEFT_EXT,t.NEGATIVE_ONE_TO_ONE_EXT);const i=a;a=null,this.setClear(i)}n=t},getReversed:function(){return n},setTest:function(e){e?j(t.DEPTH_TEST):V(t.DEPTH_TEST)},setMask:function(e){s===e||i||(t.depthMask(e),s=e)},setFunc:function(e){if(n&&(e=Te[e]),o!==e){switch(e){case r.eHc:t.depthFunc(t.NEVER);break;case r.lGu:t.depthFunc(t.ALWAYS);break;case r.brA:t.depthFunc(t.LESS);break;case r.xSv:t.depthFunc(t.LEQUAL);break;case r.U3G:t.depthFunc(t.EQUAL);break;case r.Gwm:t.depthFunc(t.GEQUAL);break;case r.K52:t.depthFunc(t.GREATER);break;case r.bw0:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}o=e}},setLocked:function(t){i=t},setClear:function(e){a!==e&&(n&&(e=1-e),t.clearDepth(e),a=e)},reset:function(){i=!1,s=null,o=null,a=null,n=!1}}},o=new function(){let e=!1,i=null,r=null,n=null,s=null,o=null,a=null,h=null,l=null;return{setTest:function(i){e||(i?j(t.STENCIL_TEST):V(t.STENCIL_TEST))},setMask:function(r){i===r||e||(t.stencilMask(r),i=r)},setFunc:function(e,i,o){r===e&&n===i&&s===o||(t.stencilFunc(e,i,o),r=e,n=i,s=o)},setOp:function(e,i,r){o===e&&a===i&&h===r||(t.stencilOp(e,i,r),o=e,a=i,h=r)},setLocked:function(t){e=t},setClear:function(e){l!==e&&(t.clearStencil(e),l=e)},reset:function(){e=!1,i=null,r=null,n=null,s=null,o=null,a=null,h=null,l=null}}},a=new WeakMap,h=new WeakMap;let l={},u={},c=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,_=null,x=null,w=new r.Q1f(0,0,0),M=0,S=!1,A=null,E=null,T=null,R=null,P=null;const C=t.getParameter(t.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let I=!1,k=0;const B=t.getParameter(t.VERSION);-1!==B.indexOf("WebGL")?(k=parseFloat(/^WebGL (\d)/.exec(B)[1]),I=k>=1):-1!==B.indexOf("OpenGL ES")&&(k=parseFloat(/^OpenGL ES (\d)/.exec(B)[1]),I=k>=2);let O=null,L={};const U=t.getParameter(t.SCISSOR_BOX),D=t.getParameter(t.VIEWPORT),N=(new r.IUQ).fromArray(U),F=(new r.IUQ).fromArray(D);function z(e,i,r,n){const s=new Uint8Array(4),o=t.createTexture();t.bindTexture(e,o),t.texParameteri(e,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(e,t.TEXTURE_MAG_FILTER,t.NEAREST);for(let o=0;o<r;o++)e===t.TEXTURE_3D||e===t.TEXTURE_2D_ARRAY?t.texImage3D(i,0,t.RGBA,1,1,n,0,t.RGBA,t.UNSIGNED_BYTE,s):t.texImage2D(i+o,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,s);return o}const G={};function j(e){!0!==l[e]&&(t.enable(e),l[e]=!0)}function V(e){!1!==l[e]&&(t.disable(e),l[e]=!1)}G[t.TEXTURE_2D]=z(t.TEXTURE_2D,t.TEXTURE_2D,1),G[t.TEXTURE_CUBE_MAP]=z(t.TEXTURE_CUBE_MAP,t.TEXTURE_CUBE_MAP_POSITIVE_X,6),G[t.TEXTURE_2D_ARRAY]=z(t.TEXTURE_2D_ARRAY,t.TEXTURE_2D_ARRAY,1,1),G[t.TEXTURE_3D]=z(t.TEXTURE_3D,t.TEXTURE_3D,1,1),i.setClear(0,0,0,1),s.setClear(1),o.setClear(0),j(t.DEPTH_TEST),s.setFunc(r.xSv),q(!1),Y(r.Vb5),j(t.CULL_FACE),X(r.XIg);const H={[r.gO9]:t.FUNC_ADD,[r.FXf]:t.FUNC_SUBTRACT,[r.nST]:t.FUNC_REVERSE_SUBTRACT};H[r.znC]=t.MIN,H[r.$ei]=t.MAX;const W={[r.ojh]:t.ZERO,[r.qad]:t.ONE,[r.f4X]:t.SRC_COLOR,[r.ie2]:t.SRC_ALPHA,[r.hgQ]:t.SRC_ALPHA_SATURATE,[r.wn6]:t.DST_COLOR,[r.hdd]:t.DST_ALPHA,[r.LiQ]:t.ONE_MINUS_SRC_COLOR,[r.OuU]:t.ONE_MINUS_SRC_ALPHA,[r.aEY]:t.ONE_MINUS_DST_COLOR,[r.Nt7]:t.ONE_MINUS_DST_ALPHA,[r.RrE]:t.CONSTANT_COLOR,[r.$Yl]:t.ONE_MINUS_CONSTANT_COLOR,[r.e0p]:t.CONSTANT_ALPHA,[r.ov9]:t.ONE_MINUS_CONSTANT_ALPHA};function X(e,i,s,o,a,h,l,u,c,d){if(e!==r.XIg){if(!1===p&&(j(t.BLEND),p=!0),e===r.bCz)a=a||i,h=h||s,l=l||o,i===g&&a===b||(t.blendEquationSeparate(H[i],H[a]),g=i,b=a),s===v&&o===y&&h===_&&l===x||(t.blendFuncSeparate(W[s],W[o],W[h],W[l]),v=s,y=o,_=h,x=l),!1!==u.equals(w)&&c===M||(t.blendColor(u.r,u.g,u.b,c),w.copy(u),M=c),m=e,S=!1;else if(e!==m||d!==S){if(g===r.gO9&&b===r.gO9||(t.blendEquation(t.FUNC_ADD),g=r.gO9,b=r.gO9),d)switch(e){case r.NTi:t.blendFuncSeparate(t.ONE,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.EZo:t.blendFunc(t.ONE,t.ONE);break;case r.Kwu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r.EdD:t.blendFuncSeparate(t.ZERO,t.SRC_COLOR,t.ZERO,t.SRC_ALPHA);break;default:n.error("THREE.WebGLState: Invalid blending: ",e)}else switch(e){case r.NTi:t.blendFuncSeparate(t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA);break;case r.EZo:t.blendFunc(t.SRC_ALPHA,t.ONE);break;case r.Kwu:t.blendFuncSeparate(t.ZERO,t.ONE_MINUS_SRC_COLOR,t.ZERO,t.ONE);break;case r.EdD:t.blendFunc(t.ZERO,t.SRC_COLOR);break;default:n.error("THREE.WebGLState: Invalid blending: ",e)}v=null,y=null,_=null,x=null,w.set(0,0,0),M=0,m=e,S=d}}else!0===p&&(V(t.BLEND),p=!1)}function q(e){A!==e&&(e?t.frontFace(t.CW):t.frontFace(t.CCW),A=e)}function Y(e){e!==r.WNZ?(j(t.CULL_FACE),e!==E&&(e===r.Vb5?t.cullFace(t.BACK):e===r.Jnc?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):V(t.CULL_FACE),E=e}function Z(e,i,r){e?(j(t.POLYGON_OFFSET_FILL),R===i&&P===r||(t.polygonOffset(i,r),R=i,P=r)):V(t.POLYGON_OFFSET_FILL)}return{buffers:{color:i,depth:s,stencil:o},enable:j,disable:V,bindFramebuffer:function(e,i){return u[e]!==i&&(t.bindFramebuffer(e,i),u[e]=i,e===t.DRAW_FRAMEBUFFER&&(u[t.FRAMEBUFFER]=i),e===t.FRAMEBUFFER&&(u[t.DRAW_FRAMEBUFFER]=i),!0)},drawBuffers:function(e,i){let r=d,n=!1;if(e){r=c.get(i),void 0===r&&(r=[],c.set(i,r));const s=e.textures;if(r.length!==s.length||r[0]!==t.COLOR_ATTACHMENT0){for(let e=0,i=s.length;e<i;e++)r[e]=t.COLOR_ATTACHMENT0+e;r.length=s.length,n=!0}}else r[0]!==t.BACK&&(r[0]=t.BACK,n=!0);n&&t.drawBuffers(r)},useProgram:function(e){return f!==e&&(t.useProgram(e),f=e,!0)},setBlending:X,setMaterial:function(e,n){e.side===r.$EB?V(t.CULL_FACE):j(t.CULL_FACE);let a=e.side===r.hsX;n&&(a=!a),q(a),e.blending===r.NTi&&!1===e.transparent?X(r.XIg):X(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.blendColor,e.blendAlpha,e.premultipliedAlpha),s.setFunc(e.depthFunc),s.setTest(e.depthTest),s.setMask(e.depthWrite),i.setMask(e.colorWrite);const h=e.stencilWrite;o.setTest(h),h&&(o.setMask(e.stencilWriteMask),o.setFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),o.setOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),Z(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),!0===e.alphaToCoverage?j(t.SAMPLE_ALPHA_TO_COVERAGE):V(t.SAMPLE_ALPHA_TO_COVERAGE)},setFlipSided:q,setCullFace:Y,setLineWidth:function(e){e!==T&&(I&&t.lineWidth(e),T=e)},setPolygonOffset:Z,setScissorTest:function(e){e?j(t.SCISSOR_TEST):V(t.SCISSOR_TEST)},activeTexture:function(e){void 0===e&&(e=t.TEXTURE0+C-1),O!==e&&(t.activeTexture(e),O=e)},bindTexture:function(e,i,r){void 0===r&&(r=null===O?t.TEXTURE0+C-1:O);let n=L[r];void 0===n&&(n={type:void 0,texture:void 0},L[r]=n),n.type===e&&n.texture===i||(O!==r&&(t.activeTexture(r),O=r),t.bindTexture(e,i||G[e]),n.type=e,n.texture=i)},unbindTexture:function(){const e=L[O];void 0!==e&&void 0!==e.type&&(t.bindTexture(e.type,null),e.type=void 0,e.texture=void 0)},compressedTexImage2D:function(){try{t.compressedTexImage2D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},compressedTexImage3D:function(){try{t.compressedTexImage3D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},texImage2D:function(){try{t.texImage2D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},texImage3D:function(){try{t.texImage3D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},updateUBOMapping:function(e,i){let r=h.get(i);void 0===r&&(r=new WeakMap,h.set(i,r));let n=r.get(e);void 0===n&&(n=t.getUniformBlockIndex(i,e.name),r.set(e,n))},uniformBlockBinding:function(e,i){const r=h.get(i).get(e);a.get(i)!==r&&(t.uniformBlockBinding(i,r,e.__bindingPointIndex),a.set(i,r))},texStorage2D:function(){try{t.texStorage2D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},texStorage3D:function(){try{t.texStorage3D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},texSubImage2D:function(){try{t.texSubImage2D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},texSubImage3D:function(){try{t.texSubImage3D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},compressedTexSubImage2D:function(){try{t.compressedTexSubImage2D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},compressedTexSubImage3D:function(){try{t.compressedTexSubImage3D.apply(t,arguments)}catch(t){n.error("THREE.WebGLState:",t)}},scissor:function(e){!1===N.equals(e)&&(t.scissor(e.x,e.y,e.z,e.w),N.copy(e))},viewport:function(e){!1===F.equals(e)&&(t.viewport(e.x,e.y,e.z,e.w),F.copy(e))},reset:function(){t.disable(t.BLEND),t.disable(t.CULL_FACE),t.disable(t.DEPTH_TEST),t.disable(t.POLYGON_OFFSET_FILL),t.disable(t.SCISSOR_TEST),t.disable(t.STENCIL_TEST),t.disable(t.SAMPLE_ALPHA_TO_COVERAGE),t.blendEquation(t.FUNC_ADD),t.blendFunc(t.ONE,t.ZERO),t.blendFuncSeparate(t.ONE,t.ZERO,t.ONE,t.ZERO),t.blendColor(0,0,0,0),t.colorMask(!0,!0,!0,!0),t.clearColor(0,0,0,0),t.depthMask(!0),t.depthFunc(t.LESS),s.setReversed(!1),t.clearDepth(1),t.stencilMask(4294967295),t.stencilFunc(t.ALWAYS,0,4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP),t.clearStencil(0),t.cullFace(t.BACK),t.frontFace(t.CCW),t.polygonOffset(0,0),t.activeTexture(t.TEXTURE0),t.bindFramebuffer(t.FRAMEBUFFER,null),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),t.bindFramebuffer(t.READ_FRAMEBUFFER,null),t.useProgram(null),t.lineWidth(1),t.scissor(0,0,t.canvas.width,t.canvas.height),t.viewport(0,0,t.canvas.width,t.canvas.height),l={},O=null,L={},u={},c=new WeakMap,d=[],f=null,p=!1,m=null,g=null,v=null,y=null,b=null,_=null,x=null,w=new r.Q1f(0,0,0),M=0,S=!1,A=null,E=null,T=null,R=null,P=null,N.set(0,0,t.canvas.width,t.canvas.height),F.set(0,0,t.canvas.width,t.canvas.height),i.reset(),s.reset(),o.reset()}}}function Pe(t,e,i,s,o,a,h){const l=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,u="undefined"!=typeof navigator&&/OculusBrowser/g.test(navigator.userAgent),c=new r.I9Y,d=new WeakMap;let f;const p=new WeakMap;let m=!1;try{m="undefined"!=typeof OffscreenCanvas&&null!==new OffscreenCanvas(1,1).getContext("2d")}catch(t){}function g(t,e){return m?new OffscreenCanvas(t,e):(0,r.qq$)("canvas")}function v(t,e,i){let r=1;const s=V(t);if((s.width>i||s.height>i)&&(r=i/Math.max(s.width,s.height)),r<1){if("undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement||"undefined"!=typeof HTMLCanvasElement&&t instanceof HTMLCanvasElement||"undefined"!=typeof ImageBitmap&&t instanceof ImageBitmap||"undefined"!=typeof VideoFrame&&t instanceof VideoFrame){const i=Math.floor(r*s.width),o=Math.floor(r*s.height);void 0===f&&(f=g(i,o));const a=e?g(i,o):f;return a.width=i,a.height=o,a.getContext("2d").drawImage(t,0,0,i,o),n.warn("THREE.WebGLRenderer: Texture has been resized from ("+s.width+"x"+s.height+") to ("+i+"x"+o+")."),a}return"data"in t&&n.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+s.width+"x"+s.height+")."),t}return t}function y(t){return t.generateMipmaps}function b(e){t.generateMipmap(e)}function _(e){return e.isWebGLCubeRenderTarget?t.TEXTURE_CUBE_MAP:e.isWebGL3DRenderTarget?t.TEXTURE_3D:e.isWebGLArrayRenderTarget||e.isCompressedArrayTexture?t.TEXTURE_2D_ARRAY:t.TEXTURE_2D}function x(i,s,o,a,h=!1){if(null!==i){if(void 0!==t[i])return t[i];n.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+i+"'")}let l=s;if(s===t.RED&&(o===t.FLOAT&&(l=t.R32F),o===t.HALF_FLOAT&&(l=t.R16F),o===t.UNSIGNED_BYTE&&(l=t.R8)),s===t.RED_INTEGER&&(o===t.UNSIGNED_BYTE&&(l=t.R8UI),o===t.UNSIGNED_SHORT&&(l=t.R16UI),o===t.UNSIGNED_INT&&(l=t.R32UI),o===t.BYTE&&(l=t.R8I),o===t.SHORT&&(l=t.R16I),o===t.INT&&(l=t.R32I)),s===t.RG&&(o===t.FLOAT&&(l=t.RG32F),o===t.HALF_FLOAT&&(l=t.RG16F),o===t.UNSIGNED_BYTE&&(l=t.RG8)),s===t.RG_INTEGER&&(o===t.UNSIGNED_BYTE&&(l=t.RG8UI),o===t.UNSIGNED_SHORT&&(l=t.RG16UI),o===t.UNSIGNED_INT&&(l=t.RG32UI),o===t.BYTE&&(l=t.RG8I),o===t.SHORT&&(l=t.RG16I),o===t.INT&&(l=t.RG32I)),s===t.RGB_INTEGER&&(o===t.UNSIGNED_BYTE&&(l=t.RGB8UI),o===t.UNSIGNED_SHORT&&(l=t.RGB16UI),o===t.UNSIGNED_INT&&(l=t.RGB32UI),o===t.BYTE&&(l=t.RGB8I),o===t.SHORT&&(l=t.RGB16I),o===t.INT&&(l=t.RGB32I)),s===t.RGBA_INTEGER&&(o===t.UNSIGNED_BYTE&&(l=t.RGBA8UI),o===t.UNSIGNED_SHORT&&(l=t.RGBA16UI),o===t.UNSIGNED_INT&&(l=t.RGBA32UI),o===t.BYTE&&(l=t.RGBA8I),o===t.SHORT&&(l=t.RGBA16I),o===t.INT&&(l=t.RGBA32I)),s===t.RGB&&o===t.UNSIGNED_INT_5_9_9_9_REV&&(l=t.RGB9_E5),s===t.RGBA){const e=h?r.VxR:r.ppV.getTransfer(a);o===t.FLOAT&&(l=t.RGBA32F),o===t.HALF_FLOAT&&(l=t.RGBA16F),o===t.UNSIGNED_BYTE&&(l=e===r.KLL?t.SRGB8_ALPHA8:t.RGBA8),o===t.UNSIGNED_SHORT_4_4_4_4&&(l=t.RGBA4),o===t.UNSIGNED_SHORT_5_5_5_1&&(l=t.RGB5_A1)}return l!==t.R16F&&l!==t.R32F&&l!==t.RG16F&&l!==t.RG32F&&l!==t.RGBA16F&&l!==t.RGBA32F||e.get("EXT_color_buffer_float"),l}function w(e,i){let s;return e?null===i||i===r.bkx||i===r.V3x?s=t.DEPTH24_STENCIL8:i===r.RQf?s=t.DEPTH32F_STENCIL8:i===r.cHt&&(s=t.DEPTH24_STENCIL8,n.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):null===i||i===r.bkx||i===r.V3x?s=t.DEPTH_COMPONENT24:i===r.RQf?s=t.DEPTH_COMPONENT32F:i===r.cHt&&(s=t.DEPTH_COMPONENT16),s}function M(t,e){return!0===y(t)||t.isFramebufferTexture&&t.minFilter!==r.hxR&&t.minFilter!==r.k6q?Math.log2(Math.max(e.width,e.height))+1:void 0!==t.mipmaps&&t.mipmaps.length>0?t.mipmaps.length:t.isCompressedTexture&&Array.isArray(t.image)?e.mipmaps.length:1}function S(t){const e=t.target;e.removeEventListener("dispose",S),function(t){const e=s.get(t);if(void 0===e.__webglInit)return;const i=t.source,r=p.get(i);if(r){const n=r[e.__cacheKey];n.usedTimes--,0===n.usedTimes&&E(t),0===Object.keys(r).length&&p.delete(i)}s.remove(t)}(e),e.isVideoTexture&&d.delete(e)}function A(e){const i=e.target;i.removeEventListener("dispose",A),function(e){const i=s.get(e);if(e.depthTexture&&(e.depthTexture.dispose(),s.remove(e.depthTexture)),e.isWebGLCubeRenderTarget)for(let e=0;e<6;e++){if(Array.isArray(i.__webglFramebuffer[e]))for(let r=0;r<i.__webglFramebuffer[e].length;r++)t.deleteFramebuffer(i.__webglFramebuffer[e][r]);else t.deleteFramebuffer(i.__webglFramebuffer[e]);i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer[e])}else{if(Array.isArray(i.__webglFramebuffer))for(let e=0;e<i.__webglFramebuffer.length;e++)t.deleteFramebuffer(i.__webglFramebuffer[e]);else t.deleteFramebuffer(i.__webglFramebuffer);if(i.__webglDepthbuffer&&t.deleteRenderbuffer(i.__webglDepthbuffer),i.__webglMultisampledFramebuffer&&t.deleteFramebuffer(i.__webglMultisampledFramebuffer),i.__webglColorRenderbuffer)for(let e=0;e<i.__webglColorRenderbuffer.length;e++)i.__webglColorRenderbuffer[e]&&t.deleteRenderbuffer(i.__webglColorRenderbuffer[e]);i.__webglDepthRenderbuffer&&t.deleteRenderbuffer(i.__webglDepthRenderbuffer)}const r=e.textures;for(let e=0,i=r.length;e<i;e++){const i=s.get(r[e]);i.__webglTexture&&(t.deleteTexture(i.__webglTexture),h.memory.textures--),s.remove(r[e])}s.remove(e)}(i)}function E(e){const i=s.get(e);t.deleteTexture(i.__webglTexture);const r=e.source;delete p.get(r)[i.__cacheKey],h.memory.textures--}let T=0;function R(e,r){const o=s.get(e);if(e.isVideoTexture&&function(t){const e=h.render.frame;d.get(t)!==e&&(d.set(t,e),t.update())}(e),!1===e.isRenderTargetTexture&&e.version>0&&o.__version!==e.version){const t=e.image;if(null===t)n.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else{if(!1!==t.complete)return void O(o,e,r);n.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete")}}i.bindTexture(t.TEXTURE_2D,o.__webglTexture,t.TEXTURE0+r)}const P={[r.GJx]:t.REPEAT,[r.ghU]:t.CLAMP_TO_EDGE,[r.kTW]:t.MIRRORED_REPEAT},C={[r.hxR]:t.NEAREST,[r.pHI]:t.NEAREST_MIPMAP_NEAREST,[r.Cfg]:t.NEAREST_MIPMAP_LINEAR,[r.k6q]:t.LINEAR,[r.kRr]:t.LINEAR_MIPMAP_NEAREST,[r.$_I]:t.LINEAR_MIPMAP_LINEAR},I={[r.amv]:t.NEVER,[r.FFZ]:t.ALWAYS,[r.vim]:t.LESS,[r.TiK]:t.LEQUAL,[r.kO0]:t.EQUAL,[r.gWB]:t.GEQUAL,[r.eoi]:t.GREATER,[r.jzd]:t.NOTEQUAL};function k(i,a){if(a.type!==r.RQf||!1!==e.has("OES_texture_float_linear")||a.magFilter!==r.k6q&&a.magFilter!==r.kRr&&a.magFilter!==r.Cfg&&a.magFilter!==r.$_I&&a.minFilter!==r.k6q&&a.minFilter!==r.kRr&&a.minFilter!==r.Cfg&&a.minFilter!==r.$_I||n.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),t.texParameteri(i,t.TEXTURE_WRAP_S,P[a.wrapS]),t.texParameteri(i,t.TEXTURE_WRAP_T,P[a.wrapT]),i!==t.TEXTURE_3D&&i!==t.TEXTURE_2D_ARRAY||t.texParameteri(i,t.TEXTURE_WRAP_R,P[a.wrapR]),t.texParameteri(i,t.TEXTURE_MAG_FILTER,C[a.magFilter]),t.texParameteri(i,t.TEXTURE_MIN_FILTER,C[a.minFilter]),a.compareFunction&&(t.texParameteri(i,t.TEXTURE_COMPARE_MODE,t.COMPARE_REF_TO_TEXTURE),t.texParameteri(i,t.TEXTURE_COMPARE_FUNC,I[a.compareFunction])),!0===e.has("EXT_texture_filter_anisotropic")){if(a.magFilter===r.hxR)return;if(a.minFilter!==r.Cfg&&a.minFilter!==r.$_I)return;if(a.type===r.RQf&&!1===e.has("OES_texture_float_linear"))return;if(a.anisotropy>1||s.get(a).__currentAnisotropy){const r=e.get("EXT_texture_filter_anisotropic");t.texParameterf(i,r.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(a.anisotropy,o.getMaxAnisotropy())),s.get(a).__currentAnisotropy=a.anisotropy}}}function B(e,i){let r=!1;void 0===e.__webglInit&&(e.__webglInit=!0,i.addEventListener("dispose",S));const n=i.source;let s=p.get(n);void 0===s&&(s={},p.set(n,s));const o=function(t){const e=[];return e.push(t.wrapS),e.push(t.wrapT),e.push(t.wrapR||0),e.push(t.magFilter),e.push(t.minFilter),e.push(t.anisotropy),e.push(t.internalFormat),e.push(t.format),e.push(t.type),e.push(t.generateMipmaps),e.push(t.premultiplyAlpha),e.push(t.flipY),e.push(t.unpackAlignment),e.push(t.colorSpace),e.join()}(i);if(o!==e.__cacheKey){void 0===s[o]&&(s[o]={texture:t.createTexture(),usedTimes:0},h.memory.textures++,r=!0),s[o].usedTimes++;const n=s[e.__cacheKey];void 0!==n&&(s[e.__cacheKey].usedTimes--,0===n.usedTimes&&E(i)),e.__cacheKey=o,e.__webglTexture=s[o].texture}return r}function O(e,h,l){let u=t.TEXTURE_2D;(h.isDataArrayTexture||h.isCompressedArrayTexture)&&(u=t.TEXTURE_2D_ARRAY),h.isData3DTexture&&(u=t.TEXTURE_3D);const c=B(e,h),d=h.source;i.bindTexture(u,e.__webglTexture,t.TEXTURE0+l);const f=s.get(d);if(d.version!==f.__version||!0===c){i.activeTexture(t.TEXTURE0+l);const e=r.ppV.getPrimaries(r.ppV.workingColorSpace),s=h.colorSpace===r.jf0?null:r.ppV.getPrimaries(h.colorSpace),p=h.colorSpace===r.jf0||e===s?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,h.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,h.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,p);let m=v(h.image,!1,o.maxTextureSize);m=j(h,m);const g=a.convert(h.format,h.colorSpace),_=a.convert(h.type);let S,A=x(h.internalFormat,g,_,h.colorSpace,h.isVideoTexture);k(u,h);const E=h.mipmaps,T=!0!==h.isVideoTexture,R=void 0===f.__version||!0===c,P=d.dataReady,C=M(h,m);if(h.isDepthTexture)A=w(h.format===r.dcC,h.type),R&&(T?i.texStorage2D(t.TEXTURE_2D,1,A,m.width,m.height):i.texImage2D(t.TEXTURE_2D,0,A,m.width,m.height,0,g,_,null));else if(h.isDataTexture)if(E.length>0){T&&R&&i.texStorage2D(t.TEXTURE_2D,C,A,E[0].width,E[0].height);for(let e=0,r=E.length;e<r;e++)S=E[e],T?P&&i.texSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,g,_,S.data):i.texImage2D(t.TEXTURE_2D,e,A,S.width,S.height,0,g,_,S.data);h.generateMipmaps=!1}else T?(R&&i.texStorage2D(t.TEXTURE_2D,C,A,m.width,m.height),P&&i.texSubImage2D(t.TEXTURE_2D,0,0,0,m.width,m.height,g,_,m.data)):i.texImage2D(t.TEXTURE_2D,0,A,m.width,m.height,0,g,_,m.data);else if(h.isCompressedTexture)if(h.isCompressedArrayTexture){T&&R&&i.texStorage3D(t.TEXTURE_2D_ARRAY,C,A,E[0].width,E[0].height,m.depth);for(let e=0,s=E.length;e<s;e++)if(S=E[e],h.format!==r.GWd)if(null!==g)if(T){if(P)if(h.layerUpdates.size>0){const n=(0,r.Nex)(S.width,S.height,h.format,h.type);for(const r of h.layerUpdates){const s=S.data.subarray(r*n/S.data.BYTES_PER_ELEMENT,(r+1)*n/S.data.BYTES_PER_ELEMENT);i.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,r,S.width,S.height,1,g,s)}h.clearLayerUpdates()}else i.compressedTexSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,S.width,S.height,m.depth,g,S.data)}else i.compressedTexImage3D(t.TEXTURE_2D_ARRAY,e,A,S.width,S.height,m.depth,0,S.data,0,0);else n.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else T?P&&i.texSubImage3D(t.TEXTURE_2D_ARRAY,e,0,0,0,S.width,S.height,m.depth,g,_,S.data):i.texImage3D(t.TEXTURE_2D_ARRAY,e,A,S.width,S.height,m.depth,0,g,_,S.data)}else{T&&R&&i.texStorage2D(t.TEXTURE_2D,C,A,E[0].width,E[0].height);for(let e=0,s=E.length;e<s;e++)S=E[e],h.format!==r.GWd?null!==g?T?P&&i.compressedTexSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,g,S.data):i.compressedTexImage2D(t.TEXTURE_2D,e,A,S.width,S.height,0,S.data):n.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):T?P&&i.texSubImage2D(t.TEXTURE_2D,e,0,0,S.width,S.height,g,_,S.data):i.texImage2D(t.TEXTURE_2D,e,A,S.width,S.height,0,g,_,S.data)}else if(h.isDataArrayTexture)if(T){if(R&&i.texStorage3D(t.TEXTURE_2D_ARRAY,C,A,m.width,m.height,m.depth),P)if(h.layerUpdates.size>0){const e=(0,r.Nex)(m.width,m.height,h.format,h.type);for(const r of h.layerUpdates){const n=m.data.subarray(r*e/m.data.BYTES_PER_ELEMENT,(r+1)*e/m.data.BYTES_PER_ELEMENT);i.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,r,m.width,m.height,1,g,_,n)}h.clearLayerUpdates()}else i.texSubImage3D(t.TEXTURE_2D_ARRAY,0,0,0,0,m.width,m.height,m.depth,g,_,m.data)}else i.texImage3D(t.TEXTURE_2D_ARRAY,0,A,m.width,m.height,m.depth,0,g,_,m.data);else if(h.isData3DTexture)T?(R&&i.texStorage3D(t.TEXTURE_3D,C,A,m.width,m.height,m.depth),P&&i.texSubImage3D(t.TEXTURE_3D,0,0,0,0,m.width,m.height,m.depth,g,_,m.data)):i.texImage3D(t.TEXTURE_3D,0,A,m.width,m.height,m.depth,0,g,_,m.data);else if(h.isFramebufferTexture){if(R)if(T)i.texStorage2D(t.TEXTURE_2D,C,A,m.width,m.height);else{let e=m.width,r=m.height;for(let n=0;n<C;n++)i.texImage2D(t.TEXTURE_2D,n,A,e,r,0,g,_,null),e>>=1,r>>=1}}else if(E.length>0){if(T&&R){const e=V(E[0]);i.texStorage2D(t.TEXTURE_2D,C,A,e.width,e.height)}for(let e=0,r=E.length;e<r;e++)S=E[e],T?P&&i.texSubImage2D(t.TEXTURE_2D,e,0,0,g,_,S):i.texImage2D(t.TEXTURE_2D,e,A,g,_,S);h.generateMipmaps=!1}else if(T){if(R){const e=V(m);i.texStorage2D(t.TEXTURE_2D,C,A,e.width,e.height)}P&&i.texSubImage2D(t.TEXTURE_2D,0,0,0,g,_,m)}else i.texImage2D(t.TEXTURE_2D,0,A,g,_,m);y(h)&&b(u),f.__version=d.version,h.onUpdate&&h.onUpdate(h)}e.__version=h.version}function L(e,r,n,o,h,u){const c=a.convert(n.format,n.colorSpace),d=a.convert(n.type),f=x(n.internalFormat,c,d,n.colorSpace),p=s.get(r),m=s.get(n);if(m.__renderTarget=r,!p.__hasExternalTextures){const e=Math.max(1,r.width>>u),n=Math.max(1,r.height>>u);h===t.TEXTURE_3D||h===t.TEXTURE_2D_ARRAY?i.texImage3D(h,u,f,e,n,r.depth,0,c,d,null):i.texImage2D(h,u,f,e,n,0,c,d,null)}i.bindFramebuffer(t.FRAMEBUFFER,e),G(r)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,o,h,m.__webglTexture,0,z(r)):(h===t.TEXTURE_2D||h>=t.TEXTURE_CUBE_MAP_POSITIVE_X&&h<=t.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&t.framebufferTexture2D(t.FRAMEBUFFER,o,h,m.__webglTexture,u),i.bindFramebuffer(t.FRAMEBUFFER,null)}function U(e,i,r){if(t.bindRenderbuffer(t.RENDERBUFFER,e),i.depthBuffer){const n=i.depthTexture,s=n&&n.isDepthTexture?n.type:null,o=w(i.stencilBuffer,s),a=i.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,h=z(i);G(i)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,h,o,i.width,i.height):r?t.renderbufferStorageMultisample(t.RENDERBUFFER,h,o,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,o,i.width,i.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,a,t.RENDERBUFFER,e)}else{const e=i.textures;for(let n=0;n<e.length;n++){const s=e[n],o=a.convert(s.format,s.colorSpace),h=a.convert(s.type),u=x(s.internalFormat,o,h,s.colorSpace),c=z(i);r&&!1===G(i)?t.renderbufferStorageMultisample(t.RENDERBUFFER,c,u,i.width,i.height):G(i)?l.renderbufferStorageMultisampleEXT(t.RENDERBUFFER,c,u,i.width,i.height):t.renderbufferStorage(t.RENDERBUFFER,u,i.width,i.height)}}t.bindRenderbuffer(t.RENDERBUFFER,null)}function D(e){const n=s.get(e),o=!0===e.isWebGLCubeRenderTarget;if(n.__boundDepthTexture!==e.depthTexture){const t=e.depthTexture;if(n.__depthDisposeCallback&&n.__depthDisposeCallback(),t){const e=()=>{delete n.__boundDepthTexture,delete n.__depthDisposeCallback,t.removeEventListener("dispose",e)};t.addEventListener("dispose",e),n.__depthDisposeCallback=e}n.__boundDepthTexture=t}if(e.depthTexture&&!n.__autoAllocateDepthBuffer){if(o)throw new Error("target.depthTexture not supported in Cube render targets");!function(e,n){if(n&&n.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(i.bindFramebuffer(t.FRAMEBUFFER,e),!n.depthTexture||!n.depthTexture.isDepthTexture)throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const o=s.get(n.depthTexture);o.__renderTarget=n,o.__webglTexture&&n.depthTexture.image.width===n.width&&n.depthTexture.image.height===n.height||(n.depthTexture.image.width=n.width,n.depthTexture.image.height=n.height,n.depthTexture.needsUpdate=!0),R(n.depthTexture,0);const a=o.__webglTexture,h=z(n);if(n.depthTexture.format===r.zdS)G(n)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0,h):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_ATTACHMENT,t.TEXTURE_2D,a,0);else{if(n.depthTexture.format!==r.dcC)throw new Error("Unknown depthTexture format");G(n)?l.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0,h):t.framebufferTexture2D(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.TEXTURE_2D,a,0)}}(n.__webglFramebuffer,e)}else if(o){n.__webglDepthbuffer=[];for(let r=0;r<6;r++)if(i.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer[r]),void 0===n.__webglDepthbuffer[r])n.__webglDepthbuffer[r]=t.createRenderbuffer(),U(n.__webglDepthbuffer[r],e,!1);else{const i=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,s=n.__webglDepthbuffer[r];t.bindRenderbuffer(t.RENDERBUFFER,s),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,s)}}else if(i.bindFramebuffer(t.FRAMEBUFFER,n.__webglFramebuffer),void 0===n.__webglDepthbuffer)n.__webglDepthbuffer=t.createRenderbuffer(),U(n.__webglDepthbuffer,e,!1);else{const i=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,r=n.__webglDepthbuffer;t.bindRenderbuffer(t.RENDERBUFFER,r),t.framebufferRenderbuffer(t.FRAMEBUFFER,i,t.RENDERBUFFER,r)}i.bindFramebuffer(t.FRAMEBUFFER,null)}const N=[],F=[];function z(t){return Math.min(o.maxSamples,t.samples)}function G(t){const i=s.get(t);return t.samples>0&&!0===e.has("WEBGL_multisampled_render_to_texture")&&!1!==i.__useRenderToTexture}function j(t,e){const i=t.colorSpace,s=t.format,o=t.type;return!0===t.isCompressedTexture||!0===t.isVideoTexture||i!==r.Zr2&&i!==r.jf0&&(r.ppV.getTransfer(i)===r.KLL?s===r.GWd&&o===r.OUM||n.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):n.error("THREE.WebGLTextures: Unsupported texture color space:",i)),e}function V(t){return"undefined"!=typeof HTMLImageElement&&t instanceof HTMLImageElement?(c.width=t.naturalWidth||t.width,c.height=t.naturalHeight||t.height):"undefined"!=typeof VideoFrame&&t instanceof VideoFrame?(c.width=t.displayWidth,c.height=t.displayHeight):(c.width=t.width,c.height=t.height),c}this.allocateTextureUnit=function(){const t=T;return t>=o.maxTextures&&n.warn("THREE.WebGLTextures: Trying to use "+t+" texture units while this GPU supports only "+o.maxTextures),T+=1,t},this.resetTextureUnits=function(){T=0},this.setTexture2D=R,this.setTexture2DArray=function(e,r){const n=s.get(e);e.version>0&&n.__version!==e.version?O(n,e,r):i.bindTexture(t.TEXTURE_2D_ARRAY,n.__webglTexture,t.TEXTURE0+r)},this.setTexture3D=function(e,r){const n=s.get(e);e.version>0&&n.__version!==e.version?O(n,e,r):i.bindTexture(t.TEXTURE_3D,n.__webglTexture,t.TEXTURE0+r)},this.setTextureCube=function(e,h){const l=s.get(e);e.version>0&&l.__version!==e.version?function(e,h,l){if(6!==h.image.length)return;const u=B(e,h),c=h.source;i.bindTexture(t.TEXTURE_CUBE_MAP,e.__webglTexture,t.TEXTURE0+l);const d=s.get(c);if(c.version!==d.__version||!0===u){i.activeTexture(t.TEXTURE0+l);const e=r.ppV.getPrimaries(r.ppV.workingColorSpace),s=h.colorSpace===r.jf0?null:r.ppV.getPrimaries(h.colorSpace),f=h.colorSpace===r.jf0||e===s?t.NONE:t.BROWSER_DEFAULT_WEBGL;t.pixelStorei(t.UNPACK_FLIP_Y_WEBGL,h.flipY),t.pixelStorei(t.UNPACK_PREMULTIPLY_ALPHA_WEBGL,h.premultiplyAlpha),t.pixelStorei(t.UNPACK_ALIGNMENT,h.unpackAlignment),t.pixelStorei(t.UNPACK_COLORSPACE_CONVERSION_WEBGL,f);const p=h.isCompressedTexture||h.image[0].isCompressedTexture,m=h.image[0]&&h.image[0].isDataTexture,g=[];for(let t=0;t<6;t++)g[t]=p||m?m?h.image[t].image:h.image[t]:v(h.image[t],!0,o.maxCubemapSize),g[t]=j(h,g[t]);const _=g[0],w=a.convert(h.format,h.colorSpace),S=a.convert(h.type),A=x(h.internalFormat,w,S,h.colorSpace),E=!0!==h.isVideoTexture,T=void 0===d.__version||!0===u,R=c.dataReady;let P,C=M(h,_);if(k(t.TEXTURE_CUBE_MAP,h),p){E&&T&&i.texStorage2D(t.TEXTURE_CUBE_MAP,C,A,_.width,_.height);for(let e=0;e<6;e++){P=g[e].mipmaps;for(let s=0;s<P.length;s++){const o=P[s];h.format!==r.GWd?null!==w?E?R&&i.compressedTexSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,0,0,o.width,o.height,w,o.data):i.compressedTexImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,A,o.width,o.height,0,o.data):n.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):E?R&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,0,0,o.width,o.height,w,S,o.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,s,A,o.width,o.height,0,w,S,o.data)}}}else{if(P=h.mipmaps,E&&T){P.length>0&&C++;const e=V(g[0]);i.texStorage2D(t.TEXTURE_CUBE_MAP,C,A,e.width,e.height)}for(let e=0;e<6;e++)if(m){E?R&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,g[e].width,g[e].height,w,S,g[e].data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,A,g[e].width,g[e].height,0,w,S,g[e].data);for(let r=0;r<P.length;r++){const n=P[r].image[e].image;E?R&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,n.width,n.height,w,S,n.data):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,A,n.width,n.height,0,w,S,n.data)}}else{E?R&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,0,0,w,S,g[e]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,0,A,w,S,g[e]);for(let r=0;r<P.length;r++){const n=P[r];E?R&&i.texSubImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,0,0,w,S,n.image[e]):i.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+e,r+1,A,w,S,n.image[e])}}}y(h)&&b(t.TEXTURE_CUBE_MAP),d.__version=c.version,h.onUpdate&&h.onUpdate(h)}e.__version=h.version}(l,e,h):i.bindTexture(t.TEXTURE_CUBE_MAP,l.__webglTexture,t.TEXTURE0+h)},this.rebindTextures=function(e,i,r){const n=s.get(e);void 0!==i&&L(n.__webglFramebuffer,e,e.texture,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,0),void 0!==r&&D(e)},this.setupRenderTarget=function(e){const r=e.texture,n=s.get(e),o=s.get(r);e.addEventListener("dispose",A);const l=e.textures,u=!0===e.isWebGLCubeRenderTarget,c=l.length>1;if(c||(void 0===o.__webglTexture&&(o.__webglTexture=t.createTexture()),o.__version=r.version,h.memory.textures++),u){n.__webglFramebuffer=[];for(let e=0;e<6;e++)if(r.mipmaps&&r.mipmaps.length>0){n.__webglFramebuffer[e]=[];for(let i=0;i<r.mipmaps.length;i++)n.__webglFramebuffer[e][i]=t.createFramebuffer()}else n.__webglFramebuffer[e]=t.createFramebuffer()}else{if(r.mipmaps&&r.mipmaps.length>0){n.__webglFramebuffer=[];for(let e=0;e<r.mipmaps.length;e++)n.__webglFramebuffer[e]=t.createFramebuffer()}else n.__webglFramebuffer=t.createFramebuffer();if(c)for(let e=0,i=l.length;e<i;e++){const i=s.get(l[e]);void 0===i.__webglTexture&&(i.__webglTexture=t.createTexture(),h.memory.textures++)}if(e.samples>0&&!1===G(e)){n.__webglMultisampledFramebuffer=t.createFramebuffer(),n.__webglColorRenderbuffer=[],i.bindFramebuffer(t.FRAMEBUFFER,n.__webglMultisampledFramebuffer);for(let i=0;i<l.length;i++){const r=l[i];n.__webglColorRenderbuffer[i]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,n.__webglColorRenderbuffer[i]);const s=a.convert(r.format,r.colorSpace),o=a.convert(r.type),h=x(r.internalFormat,s,o,r.colorSpace,!0===e.isXRRenderTarget),u=z(e);t.renderbufferStorageMultisample(t.RENDERBUFFER,u,h,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+i,t.RENDERBUFFER,n.__webglColorRenderbuffer[i])}t.bindRenderbuffer(t.RENDERBUFFER,null),e.depthBuffer&&(n.__webglDepthRenderbuffer=t.createRenderbuffer(),U(n.__webglDepthRenderbuffer,e,!0)),i.bindFramebuffer(t.FRAMEBUFFER,null)}}if(u){i.bindTexture(t.TEXTURE_CUBE_MAP,o.__webglTexture),k(t.TEXTURE_CUBE_MAP,r);for(let i=0;i<6;i++)if(r.mipmaps&&r.mipmaps.length>0)for(let s=0;s<r.mipmaps.length;s++)L(n.__webglFramebuffer[i][s],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,s);else L(n.__webglFramebuffer[i],e,r,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+i,0);y(r)&&b(t.TEXTURE_CUBE_MAP),i.unbindTexture()}else if(c){for(let r=0,o=l.length;r<o;r++){const o=l[r],a=s.get(o);i.bindTexture(t.TEXTURE_2D,a.__webglTexture),k(t.TEXTURE_2D,o),L(n.__webglFramebuffer,e,o,t.COLOR_ATTACHMENT0+r,t.TEXTURE_2D,0),y(o)&&b(t.TEXTURE_2D)}i.unbindTexture()}else{let s=t.TEXTURE_2D;if((e.isWebGL3DRenderTarget||e.isWebGLArrayRenderTarget)&&(s=e.isWebGL3DRenderTarget?t.TEXTURE_3D:t.TEXTURE_2D_ARRAY),i.bindTexture(s,o.__webglTexture),k(s,r),r.mipmaps&&r.mipmaps.length>0)for(let i=0;i<r.mipmaps.length;i++)L(n.__webglFramebuffer[i],e,r,t.COLOR_ATTACHMENT0,s,i);else L(n.__webglFramebuffer,e,r,t.COLOR_ATTACHMENT0,s,0);y(r)&&b(s),i.unbindTexture()}e.depthBuffer&&D(e)},this.updateRenderTargetMipmap=function(t){const e=t.textures;for(let r=0,n=e.length;r<n;r++){const n=e[r];if(y(n)){const e=_(t),r=s.get(n).__webglTexture;i.bindTexture(e,r),b(e),i.unbindTexture()}}},this.updateMultisampleRenderTarget=function(e){if(e.samples>0)if(!1===G(e)){const r=e.textures,n=e.width,o=e.height;let a=t.COLOR_BUFFER_BIT;const h=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT,l=s.get(e),c=r.length>1;if(c)for(let e=0;e<r.length;e++)i.bindFramebuffer(t.FRAMEBUFFER,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,null),i.bindFramebuffer(t.FRAMEBUFFER,l.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,null,0);i.bindFramebuffer(t.READ_FRAMEBUFFER,l.__webglMultisampledFramebuffer),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,l.__webglFramebuffer);for(let i=0;i<r.length;i++){if(e.resolveDepthBuffer&&(e.depthBuffer&&(a|=t.DEPTH_BUFFER_BIT),e.stencilBuffer&&e.resolveStencilBuffer&&(a|=t.STENCIL_BUFFER_BIT)),c){t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,l.__webglColorRenderbuffer[i]);const e=s.get(r[i]).__webglTexture;t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,e,0)}t.blitFramebuffer(0,0,n,o,0,0,n,o,a,t.NEAREST),!0===u&&(N.length=0,F.length=0,N.push(t.COLOR_ATTACHMENT0+i),e.depthBuffer&&!1===e.resolveDepthBuffer&&(N.push(h),F.push(h),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,F)),t.invalidateFramebuffer(t.READ_FRAMEBUFFER,N))}if(i.bindFramebuffer(t.READ_FRAMEBUFFER,null),i.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),c)for(let e=0;e<r.length;e++){i.bindFramebuffer(t.FRAMEBUFFER,l.__webglMultisampledFramebuffer),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.RENDERBUFFER,l.__webglColorRenderbuffer[e]);const n=s.get(r[e]).__webglTexture;i.bindFramebuffer(t.FRAMEBUFFER,l.__webglFramebuffer),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+e,t.TEXTURE_2D,n,0)}i.bindFramebuffer(t.DRAW_FRAMEBUFFER,l.__webglMultisampledFramebuffer)}else if(e.depthBuffer&&!1===e.resolveDepthBuffer&&u){const i=e.stencilBuffer?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,[i])}},this.setupDepthRenderbuffer=D,this.setupFrameBufferTexture=L,this.useMultisampledRTT=G}function Ce(t,e){return{convert:function(i,n=r.jf0){let s;const o=r.ppV.getTransfer(n);if(i===r.OUM)return t.UNSIGNED_BYTE;if(i===r.Wew)return t.UNSIGNED_SHORT_4_4_4_4;if(i===r.gJ2)return t.UNSIGNED_SHORT_5_5_5_1;if(i===r.Dmk)return t.UNSIGNED_INT_5_9_9_9_REV;if(i===r.tJf)return t.BYTE;if(i===r.fBL)return t.SHORT;if(i===r.cHt)return t.UNSIGNED_SHORT;if(i===r.Yuy)return t.INT;if(i===r.bkx)return t.UNSIGNED_INT;if(i===r.RQf)return t.FLOAT;if(i===r.ix0)return t.HALF_FLOAT;if(i===r.wrO)return t.ALPHA;if(i===r.HIg)return t.RGB;if(i===r.GWd)return t.RGBA;if(i===r.Kzv)return t.LUMINANCE;if(i===r.CMB)return t.LUMINANCE_ALPHA;if(i===r.zdS)return t.DEPTH_COMPONENT;if(i===r.dcC)return t.DEPTH_STENCIL;if(i===r.VT0)return t.RED;if(i===r.ZQM)return t.RED_INTEGER;if(i===r.paN)return t.RG;if(i===r.TkQ)return t.RG_INTEGER;if(i===r.c90)return t.RGBA_INTEGER;if(i===r.IE4||i===r.Nz6||i===r.jR7||i===r.BXX)if(o===r.KLL){if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),null===s)return null;if(i===r.IE4)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(i===r.Nz6)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(i===r.jR7)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(i===r.BXX)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else{if(s=e.get("WEBGL_compressed_texture_s3tc"),null===s)return null;if(i===r.IE4)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(i===r.Nz6)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(i===r.jR7)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(i===r.BXX)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}if(i===r.k6Q||i===r.kTp||i===r.HXV||i===r.pBf){if(s=e.get("WEBGL_compressed_texture_pvrtc"),null===s)return null;if(i===r.k6Q)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(i===r.kTp)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(i===r.HXV)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(i===r.pBf)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}if(i===r.CVz||i===r.Riy||i===r.KDk){if(s=e.get("WEBGL_compressed_texture_etc"),null===s)return null;if(i===r.CVz||i===r.Riy)return o===r.KLL?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(i===r.KDk)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}if(i===r.qa3||i===r.B_h||i===r.czI||i===r.rSH||i===r.Qrf||i===r.psI||i===r.a5J||i===r._QJ||i===r.uB5||i===r.lyL||i===r.bC7||i===r.y3Z||i===r.ojs||i===r.S$4){if(s=e.get("WEBGL_compressed_texture_astc"),null===s)return null;if(i===r.qa3)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(i===r.B_h)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(i===r.czI)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(i===r.rSH)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(i===r.Qrf)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(i===r.psI)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(i===r.a5J)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(i===r._QJ)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(i===r.uB5)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(i===r.lyL)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(i===r.bC7)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(i===r.y3Z)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(i===r.ojs)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(i===r.S$4)return o===r.KLL?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}if(i===r.Fn||i===r.H23||i===r.W9U){if(s=e.get("EXT_texture_compression_bptc"),null===s)return null;if(i===r.Fn)return o===r.KLL?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(i===r.H23)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(i===r.W9U)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}if(i===r.Kef||i===r.XG_||i===r.HO_||i===r.CWW){if(s=e.get("EXT_texture_compression_rgtc"),null===s)return null;if(i===r.Fn)return s.COMPRESSED_RED_RGTC1_EXT;if(i===r.XG_)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(i===r.HO_)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(i===r.CWW)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}return i===r.V3x?t.UNSIGNED_INT_24_8:void 0!==t[i]?t[i]:null}}}const Ie={type:"move"};class ke{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return null===this._hand&&(this._hand=new r.YJl,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return null===this._targetRay&&(this._targetRay=new r.YJl,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new r.Pq0,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new r.Pq0),this._targetRay}getGripSpace(){return null===this._grip&&(this._grip=new r.YJl,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new r.Pq0,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new r.Pq0),this._grip}dispatchEvent(t){return null!==this._targetRay&&this._targetRay.dispatchEvent(t),null!==this._grip&&this._grip.dispatchEvent(t),null!==this._hand&&this._hand.dispatchEvent(t),this}connect(t){if(t&&t.hand){const e=this._hand;if(e)for(const i of t.hand.values())this._getHandJoint(e,i)}return this.dispatchEvent({type:"connected",data:t}),this}disconnect(t){return this.dispatchEvent({type:"disconnected",data:t}),null!==this._targetRay&&(this._targetRay.visible=!1),null!==this._grip&&(this._grip.visible=!1),null!==this._hand&&(this._hand.visible=!1),this}update(t,e,i){let r=null,n=null,s=null;const o=this._targetRay,a=this._grip,h=this._hand;if(t&&"visible-blurred"!==e.session.visibilityState){if(h&&t.hand){s=!0;for(const r of t.hand.values()){const t=e.getJointPose(r,i),n=this._getHandJoint(h,r);null!==t&&(n.matrix.fromArray(t.transform.matrix),n.matrix.decompose(n.position,n.rotation,n.scale),n.matrixWorldNeedsUpdate=!0,n.jointRadius=t.radius),n.visible=null!==t}const r=h.joints["index-finger-tip"],n=h.joints["thumb-tip"],o=r.position.distanceTo(n.position),a=.02,l=.005;h.inputState.pinching&&o>a+l?(h.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:t.handedness,target:this})):!h.inputState.pinching&&o<=a-l&&(h.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:t.handedness,target:this}))}else null!==a&&t.gripSpace&&(n=e.getPose(t.gripSpace,i),null!==n&&(a.matrix.fromArray(n.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,n.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(n.linearVelocity)):a.hasLinearVelocity=!1,n.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(n.angularVelocity)):a.hasAngularVelocity=!1));null!==o&&(r=e.getPose(t.targetRaySpace,i),null===r&&null!==n&&(r=n),null!==r&&(o.matrix.fromArray(r.transform.matrix),o.matrix.decompose(o.position,o.rotation,o.scale),o.matrixWorldNeedsUpdate=!0,r.linearVelocity?(o.hasLinearVelocity=!0,o.linearVelocity.copy(r.linearVelocity)):o.hasLinearVelocity=!1,r.angularVelocity?(o.hasAngularVelocity=!0,o.angularVelocity.copy(r.angularVelocity)):o.hasAngularVelocity=!1,this.dispatchEvent(Ie)))}return null!==o&&(o.visible=null!==r),null!==a&&(a.visible=null!==n),null!==h&&(h.visible=null!==s),this}_getHandJoint(t,e){if(void 0===t.joints[e.jointName]){const i=new r.YJl;i.matrixAutoUpdate=!1,i.visible=!1,t.joints[e.jointName]=i,t.add(i)}return t.joints[e.jointName]}}class Be{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(t,e,i){if(null===this.texture){const n=new r.gPd;t.properties.get(n).__webglTexture=e.texture,e.depthNear===i.depthNear&&e.depthFar===i.depthFar||(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(t){if(null!==this.texture&&null===this.mesh){const e=t.cameras[0].viewport,i=new r.BKk({vertexShader:"\nvoid main() {\n\n\tgl_Position = vec4( position, 1.0 );\n\n}",fragmentShader:"\nuniform sampler2DArray depthColor;\nuniform float depthWidth;\nuniform float depthHeight;\n\nvoid main() {\n\n\tvec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );\n\n\tif ( coord.x >= 1.0 ) {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;\n\n\t} else {\n\n\t\tgl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;\n\n\t}\n\n}",uniforms:{depthColor:{value:this.texture},depthWidth:{value:e.z},depthHeight:{value:e.w}}});this.mesh=new r.eaF(new r.bdM(20,20),i)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Oe extends r.Qev{constructor(t,e){super();const i=this;let o=null,a=1,h=null,l="local-floor",u=1,c=null,d=null,f=null,p=null,m=null,g=null;const v=new Be,y=e.getContextAttributes();let b=null,_=null;const x=[],w=[],M=new r.I9Y;let S=null;const A=new r.ubm;A.viewport=new r.IUQ;const E=new r.ubm;E.viewport=new r.IUQ;const T=[A,E],R=new r.nZQ;let P=null,C=null;function I(t){const e=w.indexOf(t.inputSource);if(-1===e)return;const i=x[e];void 0!==i&&(i.update(t.inputSource,t.frame,c||h),i.dispatchEvent({type:t.type,data:t.inputSource}))}function k(){o.removeEventListener("select",I),o.removeEventListener("selectstart",I),o.removeEventListener("selectend",I),o.removeEventListener("squeeze",I),o.removeEventListener("squeezestart",I),o.removeEventListener("squeezeend",I),o.removeEventListener("end",k),o.removeEventListener("inputsourceschange",B);for(let t=0;t<x.length;t++){const e=w[t];null!==e&&(w[t]=null,x[t].disconnect(e))}P=null,C=null,v.reset(),t.setRenderTarget(b),m=null,p=null,f=null,o=null,_=null,N.stop(),i.isPresenting=!1,t.setPixelRatio(S),t.setSize(M.width,M.height,!1),i.dispatchEvent({type:"sessionend"})}function B(t){for(let e=0;e<t.removed.length;e++){const i=t.removed[e],r=w.indexOf(i);r>=0&&(w[r]=null,x[r].disconnect(i))}for(let e=0;e<t.added.length;e++){const i=t.added[e];let r=w.indexOf(i);if(-1===r){for(let t=0;t<x.length;t++){if(t>=w.length){w.push(i),r=t;break}if(null===w[t]){w[t]=i,r=t;break}}if(-1===r)break}const n=x[r];n&&n.connect(i)}}this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(t){let e=x[t];return void 0===e&&(e=new ke,x[t]=e),e.getTargetRaySpace()},this.getControllerGrip=function(t){let e=x[t];return void 0===e&&(e=new ke,x[t]=e),e.getGripSpace()},this.getHand=function(t){let e=x[t];return void 0===e&&(e=new ke,x[t]=e),e.getHandSpace()},this.setFramebufferScaleFactor=function(t){a=t,!0===i.isPresenting&&n.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(t){l=t,!0===i.isPresenting&&n.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return c||h},this.setReferenceSpace=function(t){c=t},this.getBaseLayer=function(){return null!==p?p:m},this.getBinding=function(){return f},this.getFrame=function(){return g},this.getSession=function(){return o},this.setSession=async function(n){if(o=n,null!==o){if(b=t.getRenderTarget(),o.addEventListener("select",I),o.addEventListener("selectstart",I),o.addEventListener("selectend",I),o.addEventListener("squeeze",I),o.addEventListener("squeezestart",I),o.addEventListener("squeezeend",I),o.addEventListener("end",k),o.addEventListener("inputsourceschange",B),!0!==y.xrCompatible&&await e.makeXRCompatible(),S=t.getPixelRatio(),t.getSize(M),void 0!==o.enabledFeatures&&o.enabledFeatures.includes("layers")){let i=null,n=null,s=null;y.depth&&(s=y.stencil?e.DEPTH24_STENCIL8:e.DEPTH_COMPONENT24,i=y.stencil?r.dcC:r.zdS,n=y.stencil?r.V3x:r.bkx);const h={colorFormat:e.RGBA8,depthFormat:s,scaleFactor:a};f=new XRWebGLBinding(o,e),p=f.createProjectionLayer(h),o.updateRenderState({layers:[p]}),t.setPixelRatio(1),t.setSize(p.textureWidth,p.textureHeight,!1),_=new r.nWS(p.textureWidth,p.textureHeight,{format:r.GWd,type:r.OUM,depthTexture:new r.VCu(p.textureWidth,p.textureHeight,n,void 0,void 0,void 0,void 0,void 0,void 0,i),stencilBuffer:y.stencil,colorSpace:t.outputColorSpace,samples:y.antialias?4:0,resolveDepthBuffer:!1===p.ignoreDepthValues})}else{const i={antialias:y.antialias,alpha:!0,depth:y.depth,stencil:y.stencil,framebufferScaleFactor:a};m=new XRWebGLLayer(o,e,i),o.updateRenderState({baseLayer:m}),t.setPixelRatio(1),t.setSize(m.framebufferWidth,m.framebufferHeight,!1),_=new r.nWS(m.framebufferWidth,m.framebufferHeight,{format:r.GWd,type:r.OUM,colorSpace:t.outputColorSpace,stencilBuffer:y.stencil})}_.isXRRenderTarget=!0,this.setFoveation(u),c=null,h=await o.requestReferenceSpace(l),N.setContext(o),N.start(),i.isPresenting=!0,i.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(null!==o)return o.environmentBlendMode},this.getDepthTexture=function(){return v.getDepthTexture()};const O=new r.Pq0,L=new r.Pq0;function U(t,e){null===e?t.matrixWorld.copy(t.matrix):t.matrixWorld.multiplyMatrices(e.matrixWorld,t.matrix),t.matrixWorldInverse.copy(t.matrixWorld).invert()}this.updateCamera=function(t){if(null===o)return;let e=t.near,i=t.far;null!==v.texture&&(v.depthNear>0&&(e=v.depthNear),v.depthFar>0&&(i=v.depthFar)),R.near=E.near=A.near=e,R.far=E.far=A.far=i,P===R.near&&C===R.far||(o.updateRenderState({depthNear:R.near,depthFar:R.far}),P=R.near,C=R.far),A.layers.mask=2|t.layers.mask,E.layers.mask=4|t.layers.mask,R.layers.mask=A.layers.mask|E.layers.mask;const n=t.parent,s=R.cameras;U(R,n);for(let t=0;t<s.length;t++)U(s[t],n);2===s.length?function(t,e,i){O.setFromMatrixPosition(e.matrixWorld),L.setFromMatrixPosition(i.matrixWorld);const r=O.distanceTo(L),n=e.projectionMatrix.elements,s=i.projectionMatrix.elements,o=n[14]/(n[10]-1),a=n[14]/(n[10]+1),h=(n[9]+1)/n[5],l=(n[9]-1)/n[5],u=(n[8]-1)/n[0],c=(s[8]+1)/s[0],d=o*u,f=o*c,p=r/(-u+c),m=p*-u;if(e.matrixWorld.decompose(t.position,t.quaternion,t.scale),t.translateX(m),t.translateZ(p),t.matrixWorld.compose(t.position,t.quaternion,t.scale),t.matrixWorldInverse.copy(t.matrixWorld).invert(),-1===n[10])t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const e=o+p,i=a+p,n=d-m,s=f+(r-m),u=h*a/i*e,c=l*a/i*e;t.projectionMatrix.makePerspective(n,s,u,c,e,i),t.projectionMatrixInverse.copy(t.projectionMatrix).invert()}}(R,A,E):R.projectionMatrix.copy(A.projectionMatrix),function(t,e,i){null===i?t.matrix.copy(e.matrixWorld):(t.matrix.copy(i.matrixWorld),t.matrix.invert(),t.matrix.multiply(e.matrixWorld)),t.matrix.decompose(t.position,t.quaternion,t.scale),t.updateMatrixWorld(!0),t.projectionMatrix.copy(e.projectionMatrix),t.projectionMatrixInverse.copy(e.projectionMatrixInverse),t.isPerspectiveCamera&&(t.fov=2*r.a55*Math.atan(1/t.projectionMatrix.elements[5]),t.zoom=1)}(t,R,n)},this.getCamera=function(){return R},this.getFoveation=function(){if(null!==p||null!==m)return u},this.setFoveation=function(t){u=t,null!==p&&(p.fixedFoveation=t),null!==m&&void 0!==m.fixedFoveation&&(m.fixedFoveation=t)},this.hasDepthSensing=function(){return null!==v.texture},this.getDepthSensingMesh=function(){return v.getMesh(R)};let D=null;const N=new s;N.setAnimationLoop(function(e,n){if(d=n.getViewerPose(c||h),g=n,null!==d){const e=d.views;null!==m&&(t.setRenderTargetFramebuffer(_,m.framebuffer),t.setRenderTarget(_));let i=!1;e.length!==R.cameras.length&&(R.cameras.length=0,i=!0);for(let n=0;n<e.length;n++){const s=e[n];let o=null;if(null!==m)o=m.getViewport(s);else{const e=f.getViewSubImage(p,s);o=e.viewport,0===n&&(t.setRenderTargetTextures(_,e.colorTexture,p.ignoreDepthValues?void 0:e.depthStencilTexture),t.setRenderTarget(_))}let a=T[n];void 0===a&&(a=new r.ubm,a.layers.enable(n),a.viewport=new r.IUQ,T[n]=a),a.matrix.fromArray(s.transform.matrix),a.matrix.decompose(a.position,a.quaternion,a.scale),a.projectionMatrix.fromArray(s.projectionMatrix),a.projectionMatrixInverse.copy(a.projectionMatrix).invert(),a.viewport.set(o.x,o.y,o.width,o.height),0===n&&(R.matrix.copy(a.matrix),R.matrix.decompose(R.position,R.quaternion,R.scale)),!0===i&&R.cameras.push(a)}const n=o.enabledFeatures;if(n&&n.includes("depth-sensing")){const i=f.getDepthInformation(e[0]);i&&i.isValid&&i.texture&&v.init(t,i,o.renderState)}}for(let t=0;t<x.length;t++){const e=w[t],i=x[t];null!==e&&void 0!==i&&i.update(e,n,c||h)}D&&D(e,n),n.detectedPlanes&&i.dispatchEvent({type:"planesdetected",data:n}),g=null}),this.setAnimationLoop=function(t){D=t},this.dispose=function(){}}}const Le=new r.O9p,Ue=new r.kn4;function De(t,e){function i(t,e){!0===t.matrixAutoUpdate&&t.updateMatrix(),e.value.copy(t.matrix)}function n(t,n){t.opacity.value=n.opacity,n.color&&t.diffuse.value.copy(n.color),n.emissive&&t.emissive.value.copy(n.emissive).multiplyScalar(n.emissiveIntensity),n.map&&(t.map.value=n.map,i(n.map,t.mapTransform)),n.alphaMap&&(t.alphaMap.value=n.alphaMap,i(n.alphaMap,t.alphaMapTransform)),n.bumpMap&&(t.bumpMap.value=n.bumpMap,i(n.bumpMap,t.bumpMapTransform),t.bumpScale.value=n.bumpScale,n.side===r.hsX&&(t.bumpScale.value*=-1)),n.normalMap&&(t.normalMap.value=n.normalMap,i(n.normalMap,t.normalMapTransform),t.normalScale.value.copy(n.normalScale),n.side===r.hsX&&t.normalScale.value.negate()),n.displacementMap&&(t.displacementMap.value=n.displacementMap,i(n.displacementMap,t.displacementMapTransform),t.displacementScale.value=n.displacementScale,t.displacementBias.value=n.displacementBias),n.emissiveMap&&(t.emissiveMap.value=n.emissiveMap,i(n.emissiveMap,t.emissiveMapTransform)),n.specularMap&&(t.specularMap.value=n.specularMap,i(n.specularMap,t.specularMapTransform)),n.alphaTest>0&&(t.alphaTest.value=n.alphaTest);const s=e.get(n),o=s.envMap,a=s.envMapRotation;o&&(t.envMap.value=o,Le.copy(a),Le.x*=-1,Le.y*=-1,Le.z*=-1,o.isCubeTexture&&!1===o.isRenderTargetTexture&&(Le.y*=-1,Le.z*=-1),t.envMapRotation.value.setFromMatrix4(Ue.makeRotationFromEuler(Le)),t.flipEnvMap.value=o.isCubeTexture&&!1===o.isRenderTargetTexture?-1:1,t.reflectivity.value=n.reflectivity,t.ior.value=n.ior,t.refractionRatio.value=n.refractionRatio),n.lightMap&&(t.lightMap.value=n.lightMap,t.lightMapIntensity.value=n.lightMapIntensity,i(n.lightMap,t.lightMapTransform)),n.aoMap&&(t.aoMap.value=n.aoMap,t.aoMapIntensity.value=n.aoMapIntensity,i(n.aoMap,t.aoMapTransform))}return{refreshFogUniforms:function(e,i){i.color.getRGB(e.fogColor.value,(0,r._Ut)(t)),i.isFog?(e.fogNear.value=i.near,e.fogFar.value=i.far):i.isFogExp2&&(e.fogDensity.value=i.density)},refreshMaterialUniforms:function(t,s,o,a,h){s.isMeshBasicMaterial||s.isMeshLambertMaterial?n(t,s):s.isMeshToonMaterial?(n(t,s),function(t,e){e.gradientMap&&(t.gradientMap.value=e.gradientMap)}(t,s)):s.isMeshPhongMaterial?(n(t,s),function(t,e){t.specular.value.copy(e.specular),t.shininess.value=Math.max(e.shininess,1e-4)}(t,s)):s.isMeshStandardMaterial?(n(t,s),function(t,e){t.metalness.value=e.metalness,e.metalnessMap&&(t.metalnessMap.value=e.metalnessMap,i(e.metalnessMap,t.metalnessMapTransform)),t.roughness.value=e.roughness,e.roughnessMap&&(t.roughnessMap.value=e.roughnessMap,i(e.roughnessMap,t.roughnessMapTransform)),e.envMap&&(t.envMapIntensity.value=e.envMapIntensity)}(t,s),s.isMeshPhysicalMaterial&&function(t,e,n){t.ior.value=e.ior,e.sheen>0&&(t.sheenColor.value.copy(e.sheenColor).multiplyScalar(e.sheen),t.sheenRoughness.value=e.sheenRoughness,e.sheenColorMap&&(t.sheenColorMap.value=e.sheenColorMap,i(e.sheenColorMap,t.sheenColorMapTransform)),e.sheenRoughnessMap&&(t.sheenRoughnessMap.value=e.sheenRoughnessMap,i(e.sheenRoughnessMap,t.sheenRoughnessMapTransform))),e.clearcoat>0&&(t.clearcoat.value=e.clearcoat,t.clearcoatRoughness.value=e.clearcoatRoughness,e.clearcoatMap&&(t.clearcoatMap.value=e.clearcoatMap,i(e.clearcoatMap,t.clearcoatMapTransform)),e.clearcoatRoughnessMap&&(t.clearcoatRoughnessMap.value=e.clearcoatRoughnessMap,i(e.clearcoatRoughnessMap,t.clearcoatRoughnessMapTransform)),e.clearcoatNormalMap&&(t.clearcoatNormalMap.value=e.clearcoatNormalMap,i(e.clearcoatNormalMap,t.clearcoatNormalMapTransform),t.clearcoatNormalScale.value.copy(e.clearcoatNormalScale),e.side===r.hsX&&t.clearcoatNormalScale.value.negate())),e.dispersion>0&&(t.dispersion.value=e.dispersion),e.iridescence>0&&(t.iridescence.value=e.iridescence,t.iridescenceIOR.value=e.iridescenceIOR,t.iridescenceThicknessMinimum.value=e.iridescenceThicknessRange[0],t.iridescenceThicknessMaximum.value=e.iridescenceThicknessRange[1],e.iridescenceMap&&(t.iridescenceMap.value=e.iridescenceMap,i(e.iridescenceMap,t.iridescenceMapTransform)),e.iridescenceThicknessMap&&(t.iridescenceThicknessMap.value=e.iridescenceThicknessMap,i(e.iridescenceThicknessMap,t.iridescenceThicknessMapTransform))),e.transmission>0&&(t.transmission.value=e.transmission,t.transmissionSamplerMap.value=n.texture,t.transmissionSamplerSize.value.set(n.width,n.height),e.transmissionMap&&(t.transmissionMap.value=e.transmissionMap,i(e.transmissionMap,t.transmissionMapTransform)),t.thickness.value=e.thickness,e.thicknessMap&&(t.thicknessMap.value=e.thicknessMap,i(e.thicknessMap,t.thicknessMapTransform)),t.attenuationDistance.value=e.attenuationDistance,t.attenuationColor.value.copy(e.attenuationColor)),e.anisotropy>0&&(t.anisotropyVector.value.set(e.anisotropy*Math.cos(e.anisotropyRotation),e.anisotropy*Math.sin(e.anisotropyRotation)),e.anisotropyMap&&(t.anisotropyMap.value=e.anisotropyMap,i(e.anisotropyMap,t.anisotropyMapTransform))),t.specularIntensity.value=e.specularIntensity,t.specularColor.value.copy(e.specularColor),e.specularColorMap&&(t.specularColorMap.value=e.specularColorMap,i(e.specularColorMap,t.specularColorMapTransform)),e.specularIntensityMap&&(t.specularIntensityMap.value=e.specularIntensityMap,i(e.specularIntensityMap,t.specularIntensityMapTransform))}(t,s,h)):s.isMeshMatcapMaterial?(n(t,s),function(t,e){e.matcap&&(t.matcap.value=e.matcap)}(t,s)):s.isMeshDepthMaterial?n(t,s):s.isMeshDistanceMaterial?(n(t,s),function(t,i){const r=e.get(i).light;t.referencePosition.value.setFromMatrixPosition(r.matrixWorld),t.nearDistance.value=r.shadow.camera.near,t.farDistance.value=r.shadow.camera.far}(t,s)):s.isMeshNormalMaterial?n(t,s):s.isLineBasicMaterial?(function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform))}(t,s),s.isLineDashedMaterial&&function(t,e){t.dashSize.value=e.dashSize,t.totalSize.value=e.dashSize+e.gapSize,t.scale.value=e.scale}(t,s)):s.isPointsMaterial?function(t,e,r,n){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.size.value=e.size*r,t.scale.value=.5*n,e.map&&(t.map.value=e.map,i(e.map,t.uvTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,i(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,s,o,a):s.isSpriteMaterial?function(t,e){t.diffuse.value.copy(e.color),t.opacity.value=e.opacity,t.rotation.value=e.rotation,e.map&&(t.map.value=e.map,i(e.map,t.mapTransform)),e.alphaMap&&(t.alphaMap.value=e.alphaMap,i(e.alphaMap,t.alphaMapTransform)),e.alphaTest>0&&(t.alphaTest.value=e.alphaTest)}(t,s):s.isShadowMaterial?(t.color.value.copy(s.color),t.opacity.value=s.opacity):s.isShaderMaterial&&(s.uniformsNeedUpdate=!1)}}}function Ne(t,e,i,r){let s={},o={},a=[];const h=t.getParameter(t.MAX_UNIFORM_BUFFER_BINDINGS);function l(t,e,i,r){const n=t.value,s=e+"_"+i;if(void 0===r[s])return r[s]="number"==typeof n||"boolean"==typeof n?n:n.clone(),!0;{const t=r[s];if("number"==typeof n||"boolean"==typeof n){if(t!==n)return r[s]=n,!0}else if(!1===t.equals(n))return t.copy(n),!0}return!1}function u(t){const e={boundary:0,storage:0};return"number"==typeof t||"boolean"==typeof t?(e.boundary=4,e.storage=4):t.isVector2?(e.boundary=8,e.storage=8):t.isVector3||t.isColor?(e.boundary=16,e.storage=12):t.isVector4?(e.boundary=16,e.storage=16):t.isMatrix3?(e.boundary=48,e.storage=48):t.isMatrix4?(e.boundary=64,e.storage=64):t.isTexture?n.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):n.warn("THREE.WebGLRenderer: Unsupported uniform value type.",t),e}function c(e){const i=e.target;i.removeEventListener("dispose",c);const r=a.indexOf(i.__bindingPointIndex);a.splice(r,1),t.deleteBuffer(s[i.id]),delete s[i.id],delete o[i.id]}return{bind:function(t,e){const i=e.program;r.uniformBlockBinding(t,i)},update:function(i,d){let f=s[i.id];void 0===f&&(function(t){const e=t.uniforms;let i=0;for(let t=0,r=e.length;t<r;t++){const r=Array.isArray(e[t])?e[t]:[e[t]];for(let t=0,e=r.length;t<e;t++){const e=r[t],n=Array.isArray(e.value)?e.value:[e.value];for(let t=0,r=n.length;t<r;t++){const r=u(n[t]),s=i%16,o=s%r.boundary,a=s+o;i+=o,0!==a&&16-a<r.storage&&(i+=16-a),e.__data=new Float32Array(r.storage/Float32Array.BYTES_PER_ELEMENT),e.__offset=i,i+=r.storage}}}const r=i%16;r>0&&(i+=16-r),t.__size=i,t.__cache={}}(i),f=function(e){const i=function(){for(let t=0;t<h;t++)if(-1===a.indexOf(t))return a.push(t),t;return n.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}();e.__bindingPointIndex=i;const r=t.createBuffer(),s=e.__size,o=e.usage;return t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,o),t.bindBuffer(t.UNIFORM_BUFFER,null),t.bindBufferBase(t.UNIFORM_BUFFER,i,r),r}(i),s[i.id]=f,i.addEventListener("dispose",c));const p=d.program;r.updateUBOMapping(i,p);const m=e.render.frame;o[i.id]!==m&&(function(e){const i=s[e.id],r=e.uniforms,n=e.__cache;t.bindBuffer(t.UNIFORM_BUFFER,i);for(let e=0,i=r.length;e<i;e++){const i=Array.isArray(r[e])?r[e]:[r[e]];for(let r=0,s=i.length;r<s;r++){const s=i[r];if(!0===l(s,e,r,n)){const e=s.__offset,i=Array.isArray(s.value)?s.value:[s.value];let r=0;for(let n=0;n<i.length;n++){const o=i[n],a=u(o);"number"==typeof o||"boolean"==typeof o?(s.__data[0]=o,t.bufferSubData(t.UNIFORM_BUFFER,e+r,s.__data)):o.isMatrix3?(s.__data[0]=o.elements[0],s.__data[1]=o.elements[1],s.__data[2]=o.elements[2],s.__data[3]=0,s.__data[4]=o.elements[3],s.__data[5]=o.elements[4],s.__data[6]=o.elements[5],s.__data[7]=0,s.__data[8]=o.elements[6],s.__data[9]=o.elements[7],s.__data[10]=o.elements[8],s.__data[11]=0):(o.toArray(s.__data,r),r+=a.storage/Float32Array.BYTES_PER_ELEMENT)}t.bufferSubData(t.UNIFORM_BUFFER,e,s.__data)}}}t.bindBuffer(t.UNIFORM_BUFFER,null)}(i),o[i.id]=m)},dispose:function(){for(const e in s)t.deleteBuffer(s[e]);a=[],s={},o={}}}}class Fe{constructor(t={}){const{canvas:e=(0,r.lPF)(),context:i=null,depth:a=!0,stencil:h=!1,alpha:l=!1,antialias:u=!1,premultipliedAlpha:c=!0,preserveDrawingBuffer:d=!1,powerPreference:b="default",failIfMajorPerformanceCaveat:_=!1,reverseDepthBuffer:x=!1}=t;let w;if(this.isWebGLRenderer=!0,null!==i){if("undefined"!=typeof WebGLRenderingContext&&i instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");w=i.getContextAttributes().alpha}else w=l;const M=new Uint32Array(4),S=new Int32Array(4);let A=null,E=null;const T=[],R=[];this.domElement=e,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this._outputColorSpace=r.er$,this.toneMapping=r.y_p,this.toneMappingExposure=1;const P=this;let C=!1,I=0,k=0,B=null,G=-1,j=null;const V=new r.IUQ,H=new r.IUQ;let W=null;const X=new r.Q1f(0);let q=0,Y=e.width,Z=e.height,K=1,$=null,Q=null;const J=new r.IUQ(0,0,Y,Z),tt=new r.IUQ(0,0,Y,Z);let et=!1;const it=new r.PPD;let rt=!1,nt=!1;this.transmissionResolutionScale=1;const st=new r.kn4,ot=new r.kn4,at=new r.Pq0,ht=new r.IUQ,lt={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let ut=!1;function ct(){return null===B?K:1}let dt,ft,pt,mt,gt,vt,yt,bt,_t,xt,wt,Mt,St,At,Et,Tt,Rt,Pt,Ct,It,kt,Bt,Ot,Lt,Ut=i;function Dt(t,i){return e.getContext(t,i)}try{const t={alpha:!0,depth:a,stencil:h,antialias:u,premultipliedAlpha:c,preserveDrawingBuffer:d,powerPreference:b,failIfMajorPerformanceCaveat:_};if("setAttribute"in e&&e.setAttribute("data-engine",`three.js r${r.sPf}`),e.addEventListener("webglcontextlost",zt,!1),e.addEventListener("webglcontextrestored",Gt,!1),e.addEventListener("webglcontextcreationerror",jt,!1),null===Ut){const e="webgl2";if(Ut=Dt(e,t),null===Ut)throw Dt(e)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(t){throw n.error("THREE.WebGLRenderer: "+t.message),t}function Nt(){dt=new L(Ut),dt.init(),Bt=new Ce(Ut,dt),ft=new g(Ut,dt,t,Bt),pt=new Re(Ut,dt),ft.reverseDepthBuffer&&x&&pt.buffers.depth.setReversed(!0),mt=new N(Ut),gt=new me,vt=new Pe(Ut,dt,pt,gt,ft,Bt,mt),yt=new y(P),bt=new O(P),_t=new o(Ut),Ot=new p(Ut,_t),xt=new U(Ut,_t,mt,Ot),wt=new z(Ut,xt,_t,mt),Ct=new F(Ut,ft,vt),Tt=new v(gt),Mt=new pe(P,yt,bt,dt,ft,Ot,Tt),St=new De(P,gt),At=new be,Et=new Ae(dt),Pt=new f(P,yt,bt,pt,wt,w,c),Rt=new Ee(P,wt,ft),Lt=new Ne(Ut,mt,ft,pt),It=new m(Ut,dt,mt),kt=new D(Ut,dt,mt),mt.programs=Mt.programs,P.capabilities=ft,P.extensions=dt,P.properties=gt,P.renderLists=At,P.shadowMap=Rt,P.state=pt,P.info=mt}Nt();const Ft=new Oe(P,Ut);function zt(t){t.preventDefault(),n.log("THREE.WebGLRenderer: Context Lost."),C=!0}function Gt(){n.log("THREE.WebGLRenderer: Context Restored."),C=!1;const t=mt.autoReset,e=Rt.enabled,i=Rt.autoUpdate,r=Rt.needsUpdate,s=Rt.type;Nt(),mt.autoReset=t,Rt.enabled=e,Rt.autoUpdate=i,Rt.needsUpdate=r,Rt.type=s}function jt(t){n.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",t.statusMessage)}function Vt(t){const e=t.target;e.removeEventListener("dispose",Vt),function(t){(function(t){const e=gt.get(t).programs;void 0!==e&&(e.forEach(function(t){Mt.releaseProgram(t)}),t.isShaderMaterial&&Mt.releaseShaderCache(t))})(t),gt.remove(t)}(e)}function Ht(t,e,i){!0===t.transparent&&t.side===r.$EB&&!1===t.forceSinglePass?(t.side=r.hsX,t.needsUpdate=!0,ee(t,e,i),t.side=r.hB5,t.needsUpdate=!0,ee(t,e,i),t.side=r.$EB):ee(t,e,i)}this.xr=Ft,this.getContext=function(){return Ut},this.getContextAttributes=function(){return Ut.getContextAttributes()},this.forceContextLoss=function(){const t=dt.get("WEBGL_lose_context");t&&t.loseContext()},this.forceContextRestore=function(){const t=dt.get("WEBGL_lose_context");t&&t.restoreContext()},this.getPixelRatio=function(){return K},this.setPixelRatio=function(t){void 0!==t&&(K=t,this.setSize(Y,Z,!1))},this.getSize=function(t){return t.set(Y,Z)},this.setSize=function(t,i,r=!0){Ft.isPresenting?n.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting."):(Y=t,Z=i,e.width=Math.floor(t*K),e.height=Math.floor(i*K),!0===r&&(e.style.width=t+"px",e.style.height=i+"px"),this.setViewport(0,0,t,i))},this.getDrawingBufferSize=function(t){return t.set(Y*K,Z*K).floor()},this.setDrawingBufferSize=function(t,i,r){Y=t,Z=i,K=r,e.width=Math.floor(t*r),e.height=Math.floor(i*r),this.setViewport(0,0,t,i)},this.getCurrentViewport=function(t){return t.copy(V)},this.getViewport=function(t){return t.copy(J)},this.setViewport=function(t,e,i,r){t.isVector4?J.set(t.x,t.y,t.z,t.w):J.set(t,e,i,r),pt.viewport(V.copy(J).multiplyScalar(K).round())},this.getScissor=function(t){return t.copy(tt)},this.setScissor=function(t,e,i,r){t.isVector4?tt.set(t.x,t.y,t.z,t.w):tt.set(t,e,i,r),pt.scissor(H.copy(tt).multiplyScalar(K).round())},this.getScissorTest=function(){return et},this.setScissorTest=function(t){pt.setScissorTest(et=t)},this.setOpaqueSort=function(t){$=t},this.setTransparentSort=function(t){Q=t},this.getClearColor=function(t){return t.copy(Pt.getClearColor())},this.setClearColor=function(){Pt.setClearColor.apply(Pt,arguments)},this.getClearAlpha=function(){return Pt.getClearAlpha()},this.setClearAlpha=function(){Pt.setClearAlpha.apply(Pt,arguments)},this.clear=function(t=!0,e=!0,i=!0){let n=0;if(t){let t=!1;if(null!==B){const e=B.texture.format;t=e===r.c90||e===r.TkQ||e===r.ZQM}if(t){const t=B.texture.type,e=t===r.OUM||t===r.bkx||t===r.cHt||t===r.V3x||t===r.Wew||t===r.gJ2,i=Pt.getClearColor(),n=Pt.getClearAlpha(),s=i.r,o=i.g,a=i.b;e?(M[0]=s,M[1]=o,M[2]=a,M[3]=n,Ut.clearBufferuiv(Ut.COLOR,0,M)):(S[0]=s,S[1]=o,S[2]=a,S[3]=n,Ut.clearBufferiv(Ut.COLOR,0,S))}else n|=Ut.COLOR_BUFFER_BIT}e&&(n|=Ut.DEPTH_BUFFER_BIT),i&&(n|=Ut.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ut.clear(n)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){e.removeEventListener("webglcontextlost",zt,!1),e.removeEventListener("webglcontextrestored",Gt,!1),e.removeEventListener("webglcontextcreationerror",jt,!1),Pt.dispose(),At.dispose(),Et.dispose(),gt.dispose(),yt.dispose(),bt.dispose(),wt.dispose(),Ot.dispose(),Lt.dispose(),Mt.dispose(),Ft.dispose(),Ft.removeEventListener("sessionstart",qt),Ft.removeEventListener("sessionend",Yt),Zt.stop()},this.renderBufferDirect=function(t,e,i,n,s,o){null===e&&(e=lt);const a=s.isMesh&&s.matrixWorld.determinant()<0,h=function(t,e,i,n,s){!0!==e.isScene&&(e=lt),vt.resetTextureUnits();const o=e.fog,a=n.isMeshStandardMaterial?e.environment:null,h=null===B?P.outputColorSpace:!0===B.isXRRenderTarget?B.texture.colorSpace:r.Zr2,l=(n.isMeshStandardMaterial?bt:yt).get(n.envMap||a),u=!0===n.vertexColors&&!!i.attributes.color&&4===i.attributes.color.itemSize,c=!!i.attributes.tangent&&(!!n.normalMap||n.anisotropy>0),d=!!i.morphAttributes.position,f=!!i.morphAttributes.normal,p=!!i.morphAttributes.color;let m=r.y_p;n.toneMapped&&(null!==B&&!0!==B.isXRRenderTarget||(m=P.toneMapping));const g=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,v=void 0!==g?g.length:0,y=gt.get(n),b=E.state.lights;if(!0===rt&&(!0===nt||t!==j)){const e=t===j&&n.id===G;Tt.setState(n,t,e)}let _=!1;n.version===y.__version?y.needsLights&&y.lightsStateVersion!==b.state.version||y.outputColorSpace!==h||s.isBatchedMesh&&!1===y.batching?_=!0:s.isBatchedMesh||!0!==y.batching?s.isBatchedMesh&&!0===y.batchingColor&&null===s.colorTexture||s.isBatchedMesh&&!1===y.batchingColor&&null!==s.colorTexture||s.isInstancedMesh&&!1===y.instancing?_=!0:s.isInstancedMesh||!0!==y.instancing?s.isSkinnedMesh&&!1===y.skinning?_=!0:s.isSkinnedMesh||!0!==y.skinning?s.isInstancedMesh&&!0===y.instancingColor&&null===s.instanceColor||s.isInstancedMesh&&!1===y.instancingColor&&null!==s.instanceColor||s.isInstancedMesh&&!0===y.instancingMorph&&null===s.morphTexture||s.isInstancedMesh&&!1===y.instancingMorph&&null!==s.morphTexture||y.envMap!==l||!0===n.fog&&y.fog!==o?_=!0:void 0===y.numClippingPlanes||y.numClippingPlanes===Tt.numPlanes&&y.numIntersection===Tt.numIntersection?(y.vertexAlphas!==u||y.vertexTangents!==c||y.morphTargets!==d||y.morphNormals!==f||y.morphColors!==p||y.toneMapping!==m||y.morphTargetsCount!==v)&&(_=!0):_=!0:_=!0:_=!0:_=!0:(_=!0,y.__version=n.version);let x=y.currentProgram;!0===_&&(x=ee(n,e,s));let w=!1,M=!1,S=!1;const A=x.getUniforms(),T=y.uniforms;if(pt.useProgram(x.program)&&(w=!0,M=!0,S=!0),n.id!==G&&(G=n.id,M=!0),w||j!==t){pt.buffers.depth.getReversed()?(st.copy(t.projectionMatrix),(0,r.xiE)(st),(0,r.Mmk)(st),A.setValue(Ut,"projectionMatrix",st)):A.setValue(Ut,"projectionMatrix",t.projectionMatrix),A.setValue(Ut,"viewMatrix",t.matrixWorldInverse);const e=A.map.cameraPosition;void 0!==e&&e.setValue(Ut,at.setFromMatrixPosition(t.matrixWorld)),ft.logarithmicDepthBuffer&&A.setValue(Ut,"logDepthBufFC",2/(Math.log(t.far+1)/Math.LN2)),(n.isMeshPhongMaterial||n.isMeshToonMaterial||n.isMeshLambertMaterial||n.isMeshBasicMaterial||n.isMeshStandardMaterial||n.isShaderMaterial)&&A.setValue(Ut,"isOrthographic",!0===t.isOrthographicCamera),j!==t&&(j=t,M=!0,S=!0)}if(s.isSkinnedMesh){A.setOptional(Ut,s,"bindMatrix"),A.setOptional(Ut,s,"bindMatrixInverse");const t=s.skeleton;t&&(null===t.boneTexture&&t.computeBoneTexture(),A.setValue(Ut,"boneTexture",t.boneTexture,vt))}s.isBatchedMesh&&(A.setOptional(Ut,s,"batchingTexture"),A.setValue(Ut,"batchingTexture",s._matricesTexture,vt),A.setOptional(Ut,s,"batchingIdTexture"),A.setValue(Ut,"batchingIdTexture",s._indirectTexture,vt),A.setOptional(Ut,s,"batchingColorTexture"),null!==s._colorsTexture&&A.setValue(Ut,"batchingColorTexture",s._colorsTexture,vt));const R=i.morphAttributes;var C,I;if(void 0===R.position&&void 0===R.normal&&void 0===R.color||Ct.update(s,i,x),(M||y.receiveShadow!==s.receiveShadow)&&(y.receiveShadow=s.receiveShadow,A.setValue(Ut,"receiveShadow",s.receiveShadow)),n.isMeshGouraudMaterial&&null!==n.envMap&&(T.envMap.value=l,T.flipEnvMap.value=l.isCubeTexture&&!1===l.isRenderTargetTexture?-1:1),n.isMeshStandardMaterial&&null===n.envMap&&null!==e.environment&&(T.envMapIntensity.value=e.environmentIntensity),M&&(A.setValue(Ut,"toneMappingExposure",P.toneMappingExposure),y.needsLights&&(I=S,(C=T).ambientLightColor.needsUpdate=I,C.lightProbe.needsUpdate=I,C.directionalLights.needsUpdate=I,C.directionalLightShadows.needsUpdate=I,C.pointLights.needsUpdate=I,C.pointLightShadows.needsUpdate=I,C.spotLights.needsUpdate=I,C.spotLightShadows.needsUpdate=I,C.rectAreaLights.needsUpdate=I,C.hemisphereLights.needsUpdate=I),o&&!0===n.fog&&St.refreshFogUniforms(T,o),St.refreshMaterialUniforms(T,n,K,Z,E.state.transmissionRenderTarget[t.id]),Wt.upload(Ut,ie(y),T,vt)),n.isShaderMaterial&&!0===n.uniformsNeedUpdate&&(Wt.upload(Ut,ie(y),T,vt),n.uniformsNeedUpdate=!1),n.isSpriteMaterial&&A.setValue(Ut,"center",s.center),A.setValue(Ut,"modelViewMatrix",s.modelViewMatrix),A.setValue(Ut,"normalMatrix",s.normalMatrix),A.setValue(Ut,"modelMatrix",s.matrixWorld),n.isShaderMaterial||n.isRawShaderMaterial){const t=n.uniformsGroups;for(let e=0,i=t.length;e<i;e++){const i=t[e];Lt.update(i,x),Lt.bind(i,x)}}return x}(t,e,i,n,s);pt.setMaterial(n,a);let l=i.index,u=1;if(!0===n.wireframe){if(l=xt.getWireframeAttribute(i),void 0===l)return;u=2}const c=i.drawRange,d=i.attributes.position;let f=c.start*u,p=(c.start+c.count)*u;null!==o&&(f=Math.max(f,o.start*u),p=Math.min(p,(o.start+o.count)*u)),null!==l?(f=Math.max(f,0),p=Math.min(p,l.count)):null!=d&&(f=Math.max(f,0),p=Math.min(p,d.count));const m=p-f;if(m<0||m===1/0)return;let g;Ot.setup(s,n,h,i,l);let v=It;if(null!==l&&(g=_t.get(l),v=kt,v.setIndex(g)),s.isMesh)!0===n.wireframe?(pt.setLineWidth(n.wireframeLinewidth*ct()),v.setMode(Ut.LINES)):v.setMode(Ut.TRIANGLES);else if(s.isLine){let t=n.linewidth;void 0===t&&(t=1),pt.setLineWidth(t*ct()),s.isLineSegments?v.setMode(Ut.LINES):s.isLineLoop?v.setMode(Ut.LINE_LOOP):v.setMode(Ut.LINE_STRIP)}else s.isPoints?v.setMode(Ut.POINTS):s.isSprite&&v.setMode(Ut.TRIANGLES);if(s.isBatchedMesh)if(null!==s._multiDrawInstances)v.renderMultiDrawInstances(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount,s._multiDrawInstances);else if(dt.get("WEBGL_multi_draw"))v.renderMultiDraw(s._multiDrawStarts,s._multiDrawCounts,s._multiDrawCount);else{const t=s._multiDrawStarts,e=s._multiDrawCounts,i=s._multiDrawCount,r=l?_t.get(l).bytesPerElement:1,o=gt.get(n).currentProgram.getUniforms();for(let n=0;n<i;n++)o.setValue(Ut,"_gl_DrawID",n),v.render(t[n]/r,e[n])}else if(s.isInstancedMesh)v.renderInstances(f,m,s.count);else if(i.isInstancedBufferGeometry){const t=void 0!==i._maxInstanceCount?i._maxInstanceCount:1/0,e=Math.min(i.instanceCount,t);v.renderInstances(f,m,e)}else v.render(f,m)},this.compile=function(t,e,i=null){null===i&&(i=t),E=Et.get(i),E.init(e),R.push(E),i.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(E.pushLight(t),t.castShadow&&E.pushShadow(t))}),t!==i&&t.traverseVisible(function(t){t.isLight&&t.layers.test(e.layers)&&(E.pushLight(t),t.castShadow&&E.pushShadow(t))}),E.setupLights();const r=new Set;return t.traverse(function(t){if(!(t.isMesh||t.isPoints||t.isLine||t.isSprite))return;const e=t.material;if(e)if(Array.isArray(e))for(let n=0;n<e.length;n++){const s=e[n];Ht(s,i,t),r.add(s)}else Ht(e,i,t),r.add(e)}),R.pop(),E=null,r},this.compileAsync=function(t,e,i=null){const r=this.compile(t,e,i);return new Promise(e=>{function i(){r.forEach(function(t){gt.get(t).currentProgram.isReady()&&r.delete(t)}),0!==r.size?setTimeout(i,10):e(t)}null!==dt.get("KHR_parallel_shader_compile")?i():setTimeout(i,10)})};let Xt=null;function qt(){Zt.stop()}function Yt(){Zt.start()}const Zt=new s;function Kt(t,e,i,r){if(!1===t.visible)return;if(t.layers.test(e.layers))if(t.isGroup)i=t.renderOrder;else if(t.isLOD)!0===t.autoUpdate&&t.update(e);else if(t.isLight)E.pushLight(t),t.castShadow&&E.pushShadow(t);else if(t.isSprite){if(!t.frustumCulled||it.intersectsSprite(t)){r&&ht.setFromMatrixPosition(t.matrixWorld).applyMatrix4(ot);const e=wt.update(t),n=t.material;n.visible&&A.push(t,e,n,i,ht.z,null)}}else if((t.isMesh||t.isLine||t.isPoints)&&(!t.frustumCulled||it.intersectsObject(t))){const e=wt.update(t),n=t.material;if(r&&(void 0!==t.boundingSphere?(null===t.boundingSphere&&t.computeBoundingSphere(),ht.copy(t.boundingSphere.center)):(null===e.boundingSphere&&e.computeBoundingSphere(),ht.copy(e.boundingSphere.center)),ht.applyMatrix4(t.matrixWorld).applyMatrix4(ot)),Array.isArray(n)){const r=e.groups;for(let s=0,o=r.length;s<o;s++){const o=r[s],a=n[o.materialIndex];a&&a.visible&&A.push(t,e,a,i,ht.z,o)}}else n.visible&&A.push(t,e,n,i,ht.z,null)}const n=t.children;for(let t=0,s=n.length;t<s;t++)Kt(n[t],e,i,r)}function $t(t,e,i,r){const n=t.opaque,s=t.transmissive,o=t.transparent;E.setupLightsView(i),!0===rt&&Tt.setGlobalState(P.clippingPlanes,i),r&&pt.viewport(V.copy(r)),n.length>0&&Jt(n,e,i),s.length>0&&Jt(s,e,i),o.length>0&&Jt(o,e,i),pt.buffers.depth.setTest(!0),pt.buffers.depth.setMask(!0),pt.buffers.color.setMask(!0),pt.setPolygonOffset(!1)}function Qt(t,e,i,n){if(null!==(!0===i.isScene?i.overrideMaterial:null))return;void 0===E.state.transmissionRenderTarget[n.id]&&(E.state.transmissionRenderTarget[n.id]=new r.nWS(1,1,{generateMipmaps:!0,type:dt.has("EXT_color_buffer_half_float")||dt.has("EXT_color_buffer_float")?r.ix0:r.OUM,minFilter:r.$_I,samples:4,stencilBuffer:h,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:r.ppV.workingColorSpace}));const s=E.state.transmissionRenderTarget[n.id],o=n.viewport||V;s.setSize(o.z*P.transmissionResolutionScale,o.w*P.transmissionResolutionScale);const a=P.getRenderTarget();P.setRenderTarget(s),P.getClearColor(X),q=P.getClearAlpha(),q<1&&P.setClearColor(16777215,.5),P.clear(),ut&&Pt.render(i);const l=P.toneMapping;P.toneMapping=r.y_p;const u=n.viewport;if(void 0!==n.viewport&&(n.viewport=void 0),E.setupLightsView(n),!0===rt&&Tt.setGlobalState(P.clippingPlanes,n),Jt(t,i,n),vt.updateMultisampleRenderTarget(s),vt.updateRenderTargetMipmap(s),!1===dt.has("WEBGL_multisampled_render_to_texture")){let t=!1;for(let s=0,o=e.length;s<o;s++){const o=e[s],a=o.object,h=o.geometry,l=o.material,u=o.group;if(l.side===r.$EB&&a.layers.test(n.layers)){const e=l.side;l.side=r.hsX,l.needsUpdate=!0,te(a,i,n,h,l,u),l.side=e,l.needsUpdate=!0,t=!0}}!0===t&&(vt.updateMultisampleRenderTarget(s),vt.updateRenderTargetMipmap(s))}P.setRenderTarget(a),P.setClearColor(X,q),void 0!==u&&(n.viewport=u),P.toneMapping=l}function Jt(t,e,i){const r=!0===e.isScene?e.overrideMaterial:null;for(let n=0,s=t.length;n<s;n++){const s=t[n],o=s.object,a=s.geometry,h=null===r?s.material:r,l=s.group;o.layers.test(i.layers)&&te(o,e,i,a,h,l)}}function te(t,e,i,n,s,o){t.onBeforeRender(P,e,i,n,s,o),t.modelViewMatrix.multiplyMatrices(i.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix),s.onBeforeRender(P,e,i,n,t,o),!0===s.transparent&&s.side===r.$EB&&!1===s.forceSinglePass?(s.side=r.hsX,s.needsUpdate=!0,P.renderBufferDirect(i,e,n,s,t,o),s.side=r.hB5,s.needsUpdate=!0,P.renderBufferDirect(i,e,n,s,t,o),s.side=r.$EB):P.renderBufferDirect(i,e,n,s,t,o),t.onAfterRender(P,e,i,n,s,o)}function ee(t,e,i){!0!==e.isScene&&(e=lt);const r=gt.get(t),n=E.state.lights,s=E.state.shadowsArray,o=n.state.version,a=Mt.getParameters(t,n.state,s,e,i),h=Mt.getProgramCacheKey(a);let l=r.programs;r.environment=t.isMeshStandardMaterial?e.environment:null,r.fog=e.fog,r.envMap=(t.isMeshStandardMaterial?bt:yt).get(t.envMap||r.environment),r.envMapRotation=null!==r.environment&&null===t.envMap?e.environmentRotation:t.envMapRotation,void 0===l&&(t.addEventListener("dispose",Vt),l=new Map,r.programs=l);let u=l.get(h);if(void 0!==u){if(r.currentProgram===u&&r.lightsStateVersion===o)return re(t,a),u}else a.uniforms=Mt.getUniforms(t),t.onBeforeCompile(a,P),u=Mt.acquireProgram(a,h),l.set(h,u),r.uniforms=a.uniforms;const c=r.uniforms;return(t.isShaderMaterial||t.isRawShaderMaterial)&&!0!==t.clipping||(c.clippingPlanes=Tt.uniform),re(t,a),r.needsLights=function(t){return t.isMeshLambertMaterial||t.isMeshToonMaterial||t.isMeshPhongMaterial||t.isMeshStandardMaterial||t.isShadowMaterial||t.isShaderMaterial&&!0===t.lights}(t),r.lightsStateVersion=o,r.needsLights&&(c.ambientLightColor.value=n.state.ambient,c.lightProbe.value=n.state.probe,c.directionalLights.value=n.state.directional,c.directionalLightShadows.value=n.state.directionalShadow,c.spotLights.value=n.state.spot,c.spotLightShadows.value=n.state.spotShadow,c.rectAreaLights.value=n.state.rectArea,c.ltc_1.value=n.state.rectAreaLTC1,c.ltc_2.value=n.state.rectAreaLTC2,c.pointLights.value=n.state.point,c.pointLightShadows.value=n.state.pointShadow,c.hemisphereLights.value=n.state.hemi,c.directionalShadowMap.value=n.state.directionalShadowMap,c.directionalShadowMatrix.value=n.state.directionalShadowMatrix,c.spotShadowMap.value=n.state.spotShadowMap,c.spotLightMatrix.value=n.state.spotLightMatrix,c.spotLightMap.value=n.state.spotLightMap,c.pointShadowMap.value=n.state.pointShadowMap,c.pointShadowMatrix.value=n.state.pointShadowMatrix),r.currentProgram=u,r.uniformsList=null,u}function ie(t){if(null===t.uniformsList){const e=t.currentProgram.getUniforms();t.uniformsList=Wt.seqWithValue(e.seq,t.uniforms)}return t.uniformsList}function re(t,e){const i=gt.get(t);i.outputColorSpace=e.outputColorSpace,i.batching=e.batching,i.batchingColor=e.batchingColor,i.instancing=e.instancing,i.instancingColor=e.instancingColor,i.instancingMorph=e.instancingMorph,i.skinning=e.skinning,i.morphTargets=e.morphTargets,i.morphNormals=e.morphNormals,i.morphColors=e.morphColors,i.morphTargetsCount=e.morphTargetsCount,i.numClippingPlanes=e.numClippingPlanes,i.numIntersection=e.numClipIntersection,i.vertexAlphas=e.vertexAlphas,i.vertexTangents=e.vertexTangents,i.toneMapping=e.toneMapping}Zt.setAnimationLoop(function(t){Xt&&Xt(t)}),"undefined"!=typeof self&&Zt.setContext(self),this.setAnimationLoop=function(t){Xt=t,Ft.setAnimationLoop(t),null===t?Zt.stop():Zt.start()},Ft.addEventListener("sessionstart",qt),Ft.addEventListener("sessionend",Yt),this.render=function(t,e){if(void 0!==e&&!0!==e.isCamera)return void n.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");if(!0===C)return;if(!0===t.matrixWorldAutoUpdate&&t.updateMatrixWorld(),null===e.parent&&!0===e.matrixWorldAutoUpdate&&e.updateMatrixWorld(),!0===Ft.enabled&&!0===Ft.isPresenting&&(!0===Ft.cameraAutoUpdate&&Ft.updateCamera(e),e=Ft.getCamera()),!0===t.isScene&&t.onBeforeRender(P,t,e,B),E=Et.get(t,R.length),E.init(e),R.push(E),ot.multiplyMatrices(e.projectionMatrix,e.matrixWorldInverse),it.setFromProjectionMatrix(ot),nt=this.localClippingEnabled,rt=Tt.init(this.clippingPlanes,nt),A=At.get(t,T.length),A.init(),T.push(A),!0===Ft.enabled&&!0===Ft.isPresenting){const t=P.xr.getDepthSensingMesh();null!==t&&Kt(t,e,-1/0,P.sortObjects)}Kt(t,e,0,P.sortObjects),A.finish(),!0===P.sortObjects&&A.sort($,Q),ut=!1===Ft.enabled||!1===Ft.isPresenting||!1===Ft.hasDepthSensing(),ut&&Pt.addToRenderList(A,t),this.info.render.frame++,!0===rt&&Tt.beginShadows();const i=E.state.shadowsArray;Rt.render(i,t,e),!0===rt&&Tt.endShadows(),!0===this.info.autoReset&&this.info.reset();const r=A.opaque,s=A.transmissive;if(E.setupLights(),e.isArrayCamera){const i=e.cameras;if(s.length>0)for(let e=0,n=i.length;e<n;e++)Qt(r,s,t,i[e]);ut&&Pt.render(t);for(let e=0,r=i.length;e<r;e++){const r=i[e];$t(A,t,r,r.viewport)}}else s.length>0&&Qt(r,s,t,e),ut&&Pt.render(t),$t(A,t,e);null!==B&&0===k&&(vt.updateMultisampleRenderTarget(B),vt.updateRenderTargetMipmap(B)),!0===t.isScene&&t.onAfterRender(P,t,e),Ot.resetDefaultState(),G=-1,j=null,R.pop(),R.length>0?(E=R[R.length-1],!0===rt&&Tt.setGlobalState(P.clippingPlanes,E.state.camera)):E=null,T.pop(),A=T.length>0?T[T.length-1]:null},this.getActiveCubeFace=function(){return I},this.getActiveMipmapLevel=function(){return k},this.getRenderTarget=function(){return B},this.setRenderTargetTextures=function(t,e,i){gt.get(t.texture).__webglTexture=e,gt.get(t.depthTexture).__webglTexture=i;const r=gt.get(t);r.__hasExternalTextures=!0,r.__autoAllocateDepthBuffer=void 0===i,r.__autoAllocateDepthBuffer||!0===dt.has("WEBGL_multisampled_render_to_texture")&&(n.warn("THREE.WebGLRenderer: Render-to-texture extension was disabled because an external texture was provided"),r.__useRenderToTexture=!1)},this.setRenderTargetFramebuffer=function(t,e){const i=gt.get(t);i.__webglFramebuffer=e,i.__useDefaultFramebuffer=void 0===e};const ne=Ut.createFramebuffer();this.setRenderTarget=function(t,e=0,i=0){B=t,I=e,k=i;let r=!0,n=null,s=!1,o=!1;if(t){const a=gt.get(t);if(void 0!==a.__useDefaultFramebuffer)pt.bindFramebuffer(Ut.FRAMEBUFFER,null),r=!1;else if(void 0===a.__webglFramebuffer)vt.setupRenderTarget(t);else if(a.__hasExternalTextures)vt.rebindTextures(t,gt.get(t.texture).__webglTexture,gt.get(t.depthTexture).__webglTexture);else if(t.depthBuffer){const e=t.depthTexture;if(a.__boundDepthTexture!==e){if(null!==e&&gt.has(e)&&(t.width!==e.image.width||t.height!==e.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");vt.setupDepthRenderbuffer(t)}}const h=t.texture;(h.isData3DTexture||h.isDataArrayTexture||h.isCompressedArrayTexture)&&(o=!0);const l=gt.get(t).__webglFramebuffer;t.isWebGLCubeRenderTarget?(n=Array.isArray(l[e])?l[e][i]:l[e],s=!0):n=t.samples>0&&!1===vt.useMultisampledRTT(t)?gt.get(t).__webglMultisampledFramebuffer:Array.isArray(l)?l[i]:l,V.copy(t.viewport),H.copy(t.scissor),W=t.scissorTest}else V.copy(J).multiplyScalar(K).floor(),H.copy(tt).multiplyScalar(K).floor(),W=et;if(0!==i&&(n=ne),pt.bindFramebuffer(Ut.FRAMEBUFFER,n)&&r&&pt.drawBuffers(t,n),pt.viewport(V),pt.scissor(H),pt.setScissorTest(W),s){const r=gt.get(t.texture);Ut.framebufferTexture2D(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_CUBE_MAP_POSITIVE_X+e,r.__webglTexture,i)}else if(o){const r=gt.get(t.texture),n=e;Ut.framebufferTextureLayer(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,r.__webglTexture,i,n)}else if(null!==t&&0!==i){const e=gt.get(t.texture);Ut.framebufferTexture2D(Ut.FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,e.__webglTexture,i)}G=-1},this.readRenderTargetPixels=function(t,e,i,r,s,o,a){if(!t||!t.isWebGLRenderTarget)return void n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=gt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(h=h[a]),h){pt.bindFramebuffer(Ut.FRAMEBUFFER,h);try{const a=t.texture,h=a.format,l=a.type;if(!ft.textureFormatReadable(h))return void n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");if(!ft.textureTypeReadable(l))return void n.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");e>=0&&e<=t.width-r&&i>=0&&i<=t.height-s&&Ut.readPixels(e,i,r,s,Bt.convert(h),Bt.convert(l),o)}finally{const t=null!==B?gt.get(B).__webglFramebuffer:null;pt.bindFramebuffer(Ut.FRAMEBUFFER,t)}}},this.readRenderTargetPixelsAsync=async function(t,e,i,n,s,o,a){if(!t||!t.isWebGLRenderTarget)throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let h=gt.get(t).__webglFramebuffer;if(t.isWebGLCubeRenderTarget&&void 0!==a&&(h=h[a]),h){const a=t.texture,l=a.format,u=a.type;if(!ft.textureFormatReadable(l))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ft.textureTypeReadable(u))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");if(e>=0&&e<=t.width-n&&i>=0&&i<=t.height-s){pt.bindFramebuffer(Ut.FRAMEBUFFER,h);const t=Ut.createBuffer();Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,t),Ut.bufferData(Ut.PIXEL_PACK_BUFFER,o.byteLength,Ut.STREAM_READ),Ut.readPixels(e,i,n,s,Bt.convert(l),Bt.convert(u),0);const a=null!==B?gt.get(B).__webglFramebuffer:null;pt.bindFramebuffer(Ut.FRAMEBUFFER,a);const c=Ut.fenceSync(Ut.SYNC_GPU_COMMANDS_COMPLETE,0);return Ut.flush(),await(0,r.jej)(Ut,c,4),Ut.bindBuffer(Ut.PIXEL_PACK_BUFFER,t),Ut.getBufferSubData(Ut.PIXEL_PACK_BUFFER,0,o),Ut.deleteBuffer(t),Ut.deleteSync(c),o}throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")}},this.copyFramebufferToTexture=function(t,e=null,i=0){!0!==t.isTexture&&((0,r.mcG)("WebGLRenderer: copyFramebufferToTexture function signature has changed."),e=arguments[0]||null,t=arguments[1]);const n=Math.pow(2,-i),s=Math.floor(t.image.width*n),o=Math.floor(t.image.height*n),a=null!==e?e.x:0,h=null!==e?e.y:0;vt.setTexture2D(t,0),Ut.copyTexSubImage2D(Ut.TEXTURE_2D,i,0,0,a,h,s,o),pt.unbindTexture()};const se=Ut.createFramebuffer(),oe=Ut.createFramebuffer();this.copyTextureToTexture=function(t,e,i=null,n=null,s=0,o=null){let a,h,l,u,c,d,f,p,m;!0!==t.isTexture&&((0,r.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed."),n=arguments[0]||null,t=arguments[1],e=arguments[2],o=arguments[3]||0,i=null),null===o&&(0!==s?((0,r.mcG)("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),o=s,s=0):o=0);const g=t.isCompressedTexture?t.mipmaps[o]:t.image;if(null!==i)a=i.max.x-i.min.x,h=i.max.y-i.min.y,l=i.isBox3?i.max.z-i.min.z:1,u=i.min.x,c=i.min.y,d=i.isBox3?i.min.z:0;else{const e=Math.pow(2,-s);a=Math.floor(g.width*e),h=Math.floor(g.height*e),l=t.isDataArrayTexture?g.depth:t.isData3DTexture?Math.floor(g.depth*e):1,u=0,c=0,d=0}null!==n?(f=n.x,p=n.y,m=n.z):(f=0,p=0,m=0);const v=Bt.convert(e.format),y=Bt.convert(e.type);let b;e.isData3DTexture?(vt.setTexture3D(e,0),b=Ut.TEXTURE_3D):e.isDataArrayTexture||e.isCompressedArrayTexture?(vt.setTexture2DArray(e,0),b=Ut.TEXTURE_2D_ARRAY):(vt.setTexture2D(e,0),b=Ut.TEXTURE_2D),Ut.pixelStorei(Ut.UNPACK_FLIP_Y_WEBGL,e.flipY),Ut.pixelStorei(Ut.UNPACK_PREMULTIPLY_ALPHA_WEBGL,e.premultiplyAlpha),Ut.pixelStorei(Ut.UNPACK_ALIGNMENT,e.unpackAlignment);const _=Ut.getParameter(Ut.UNPACK_ROW_LENGTH),x=Ut.getParameter(Ut.UNPACK_IMAGE_HEIGHT),w=Ut.getParameter(Ut.UNPACK_SKIP_PIXELS),M=Ut.getParameter(Ut.UNPACK_SKIP_ROWS),S=Ut.getParameter(Ut.UNPACK_SKIP_IMAGES);Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,g.width),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,g.height),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,u),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,c),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,d);const A=t.isDataArrayTexture||t.isData3DTexture,E=e.isDataArrayTexture||e.isData3DTexture;if(t.isDepthTexture){const i=gt.get(t),r=gt.get(e),n=gt.get(i.__renderTarget),g=gt.get(r.__renderTarget);pt.bindFramebuffer(Ut.READ_FRAMEBUFFER,n.__webglFramebuffer),pt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,g.__webglFramebuffer);for(let i=0;i<l;i++)A&&(Ut.framebufferTextureLayer(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,gt.get(t).__webglTexture,s,d+i),Ut.framebufferTextureLayer(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,gt.get(e).__webglTexture,o,m+i)),Ut.blitFramebuffer(u,c,a,h,f,p,a,h,Ut.DEPTH_BUFFER_BIT,Ut.NEAREST);pt.bindFramebuffer(Ut.READ_FRAMEBUFFER,null),pt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,null)}else if(0!==s||t.isRenderTargetTexture||gt.has(t)){const i=gt.get(t),r=gt.get(e);pt.bindFramebuffer(Ut.READ_FRAMEBUFFER,se),pt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,oe);for(let t=0;t<l;t++)A?Ut.framebufferTextureLayer(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,i.__webglTexture,s,d+t):Ut.framebufferTexture2D(Ut.READ_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,i.__webglTexture,s),E?Ut.framebufferTextureLayer(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,r.__webglTexture,o,m+t):Ut.framebufferTexture2D(Ut.DRAW_FRAMEBUFFER,Ut.COLOR_ATTACHMENT0,Ut.TEXTURE_2D,r.__webglTexture,o),0!==s?Ut.blitFramebuffer(u,c,a,h,f,p,a,h,Ut.COLOR_BUFFER_BIT,Ut.NEAREST):E?Ut.copyTexSubImage3D(b,o,f,p,m+t,u,c,a,h):Ut.copyTexSubImage2D(b,o,f,p,u,c,a,h);pt.bindFramebuffer(Ut.READ_FRAMEBUFFER,null),pt.bindFramebuffer(Ut.DRAW_FRAMEBUFFER,null)}else E?t.isDataTexture||t.isData3DTexture?Ut.texSubImage3D(b,o,f,p,m,a,h,l,v,y,g.data):e.isCompressedArrayTexture?Ut.compressedTexSubImage3D(b,o,f,p,m,a,h,l,v,g.data):Ut.texSubImage3D(b,o,f,p,m,a,h,l,v,y,g):t.isDataTexture?Ut.texSubImage2D(Ut.TEXTURE_2D,o,f,p,a,h,v,y,g.data):t.isCompressedTexture?Ut.compressedTexSubImage2D(Ut.TEXTURE_2D,o,f,p,g.width,g.height,v,g.data):Ut.texSubImage2D(Ut.TEXTURE_2D,o,f,p,a,h,v,y,g);Ut.pixelStorei(Ut.UNPACK_ROW_LENGTH,_),Ut.pixelStorei(Ut.UNPACK_IMAGE_HEIGHT,x),Ut.pixelStorei(Ut.UNPACK_SKIP_PIXELS,w),Ut.pixelStorei(Ut.UNPACK_SKIP_ROWS,M),Ut.pixelStorei(Ut.UNPACK_SKIP_IMAGES,S),0===o&&e.generateMipmaps&&Ut.generateMipmap(b),pt.unbindTexture()},this.copyTextureToTexture3D=function(t,e,i=null,n=null,s=0){return!0!==t.isTexture&&((0,r.mcG)("WebGLRenderer: copyTextureToTexture3D function signature has changed."),i=arguments[0]||null,n=arguments[1]||null,t=arguments[2],e=arguments[3],s=arguments[4]||0),(0,r.mcG)('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(t,e,i,n,s)},this.initRenderTarget=function(t){void 0===gt.get(t).__webglFramebuffer&&vt.setupRenderTarget(t)},this.initTexture=function(t){t.isCubeTexture?vt.setTextureCube(t,0):t.isData3DTexture?vt.setTexture3D(t,0):t.isDataArrayTexture||t.isCompressedArrayTexture?vt.setTexture2DArray(t,0):vt.setTexture2D(t,0),pt.unbindTexture()},this.resetState=function(){I=0,k=0,B=null,pt.reset(),Ot.reset()},"undefined"!=typeof __THREE_DEVTOOLS__&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return r.TdN}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(t){this._outputColorSpace=t;const e=this.getContext();e.drawingBufferColorspace=r.ppV._getDrawingBufferColorSpace(t),e.unpackColorSpace=r.ppV._getUnpackColorSpace()}}},9443:(t,e,i)=>{"use strict";i.d(e,{Ek:()=>a,fB:()=>s});var r=i(9313),n=i(2208);function s(t,e,i){let s,h;return i.clear(),t.parent?e?s=t.parent.worldTransform:(h=n.u.get().identity(),s=a(t,h)):s=r.u.IDENTITY,o(t,i,s,e),h&&n.u.return(h),i.isValid||i.set(0,0,0,0),i}function o(t,e,i,s){if(!t.visible||!t.measurable)return;let a;s?a=t.worldTransform:(t.updateLocalTransform(),a=n.u.get(),a.appendFrom(t.localTransform,i));const h=e,l=!!t.effects.length;if(l&&(e=n.o.get().clear()),t.boundsArea)e.addRect(t.boundsArea,a);else{t.bounds&&(e.matrix=a,e.addBounds(t.bounds));for(let i=0;i<t.children.length;i++)o(t.children[i],e,a,s)}if(l){for(let i=0;i<t.effects.length;i++)t.effects[i].addBounds?.(e);h.addBounds(e,r.u.IDENTITY),n.o.return(e)}s||n.u.return(a)}function a(t,e){const i=t.parent;return i&&(a(i,e),i.updateLocalTransform(),e.append(i.localTransform)),e}},9452:(t,e,i)=>{"use strict";i.d(e,{L:()=>a});var r=i(4922),n=i(8278),s=i(9703),o=i(7122);const a=new class{loader=new r.Tap;loadAsync(t){return new Promise((e,i)=>{this.loader.load(t,this.getOnCompleteHandler(e).bind(this),void 0,this.getOnErrorHandler(t,i).bind(this))})}getOnCompleteHandler(t){return e=>{t(e)}}getOnErrorHandler(t,e){return i=>{const r=i instanceof Error?i.message:(0,s.A)(i)?i:void 0;n.Nt.errorReject(e,o.M,`LoaderThree > error loading TextureThree: ${t} ${r?`, error: ${r}`:""}`,i)}}}},9469:(t,e,i)=>{"use strict";i.d(e,{A:()=>a});var r=i(6984);const n=function(t,e){for(var i=t.length;i--;)if((0,r.A)(t[i][0],e))return i;return-1};var s=Array.prototype.splice;function o(t){var e=-1,i=null==t?0:t.length;for(this.clear();++e<i;){var r=t[e];this.set(r[0],r[1])}}o.prototype.clear=function(){this.__data__=[],this.size=0},o.prototype.delete=function(t){var e=this.__data__,i=n(e,t);return!(i<0||(i==e.length-1?e.pop():s.call(e,i,1),--this.size,0))},o.prototype.get=function(t){var e=this.__data__,i=n(e,t);return i<0?void 0:e[i][1]},o.prototype.has=function(t){return n(this.__data__,t)>-1},o.prototype.set=function(t,e){var i=this.__data__,r=n(i,t);return r<0?(++this.size,i.push([t,e])):i[r][1]=e,this};const a=o},9520:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t,e){for(var i=-1,r=Array(t);++i<t;)r[i]=e(i);return r}},9538:t=>{"use strict";t.exports=ReferenceError},9560:(t,e,i)=>{"use strict";e.utils=i(7626),e.Cipher=i(2808),e.DES=i(2211),e.CBC=i(3389),e.EDE=i(5279)},9572:(t,e,i)=>{"use strict";i.d(e,{j:()=>a});var r=i(8278),n=i(9703),s=i(4897),o=i(7122);const a=new class{async loadAsync(t){const e=new r.bn;return this.loadSource(t).then(i=>{const r=new s.bEs({resource:i,alphaMode:"no-premultiply-alpha",resolution:(0,s.v5d)(t)});r.label=t,r._sourceOrigin=t;const n=new s.gPd({source:r,label:t});e.resolve(n)}).catch(i=>this.onErrorHandler(t,e.reject,i)),e.promise}loadSource(t){const e=new r.bn;if(createImageBitmap){const i=this.dataURItoBlob(t);createImageBitmap(i).then(t=>e.resolve(t)).catch(t=>e.reject(t))}else{const i=new Image;i.src=t,i.complete?e.resolve(i):(i.onload=()=>e.resolve(i),i.onerror=t=>e.reject(t))}return e.promise}dataURItoBlob(t){const e=atob(t.split(",")[1]),i=t.split(",")[0].split(":")[1].split(";")[0],r=new ArrayBuffer(e.length),n=new Uint8Array(r);for(let t=0;t<e.length;t++)n[t]=e.charCodeAt(t);return new Blob([r],{type:i})}onErrorHandler(t,e,i){const s=i instanceof Error?i.message:(0,n.A)(i)?i:void 0;r.Nt.errorReject(e,o.M,`LoaderTexturePixi > error loading TexturePixi: ${t} ${s?`, error: ${s}`:""}`,i)}}},9597:(t,e,i)=>{"use strict";function r(t){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},r(t)}function n(t,e){return n=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},n(t,e)}function s(t){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},s(t)}var o,a,h={};function l(t,e,i){i||(i=Error);var o=function(i){!function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&n(t,e)}(u,i);var o,a,h,l=(a=u,h=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch(t){return!1}}(),function(){var t,e=s(a);if(h){var i=s(this).constructor;t=Reflect.construct(e,arguments,i)}else t=e.apply(this,arguments);return function(t,e){if(e&&("object"===r(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}(this,t)});function u(i,r,n){var s;return function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,u),s=l.call(this,function(t,i,r){return"string"==typeof e?e:e(t,i,r)}(i,r,n)),s.code=t,s}return o=u,Object.defineProperty(o,"prototype",{writable:!1}),o}(i);h[t]=o}function u(t,e){if(Array.isArray(t)){var i=t.length;return t=t.map(function(t){return String(t)}),i>2?"one of ".concat(e," ").concat(t.slice(0,i-1).join(", "),", or ")+t[i-1]:2===i?"one of ".concat(e," ").concat(t[0]," or ").concat(t[1]):"of ".concat(e," ").concat(t[0])}return"of ".concat(e," ").concat(String(t))}l("ERR_AMBIGUOUS_ARGUMENT",'The "%s" argument is ambiguous. %s',TypeError),l("ERR_INVALID_ARG_TYPE",function(t,e,n){var s,a,h,l,c;if(void 0===o&&(o=i(4148)),o("string"==typeof t,"'name' must be a string"),"string"==typeof e&&(a="not ",e.substr(0,4)===a)?(s="must not be",e=e.replace(/^not /,"")):s="must be",function(t,e,i){return(void 0===i||i>t.length)&&(i=t.length),t.substring(i-9,i)===e}(t," argument"))h="The ".concat(t," ").concat(s," ").concat(u(e,"type"));else{var d=("number"!=typeof c&&(c=0),c+1>(l=t).length||-1===l.indexOf(".",c)?"argument":"property");h='The "'.concat(t,'" ').concat(d," ").concat(s," ").concat(u(e,"type"))}return h+". Received type ".concat(r(n))},TypeError),l("ERR_INVALID_ARG_VALUE",function(t,e){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"is invalid";void 0===a&&(a=i(537));var n=a.inspect(e);return n.length>128&&(n="".concat(n.slice(0,128),"...")),"The argument '".concat(t,"' ").concat(r,". Received ").concat(n)},TypeError,RangeError),l("ERR_INVALID_RETURN_VALUE",function(t,e,i){var n;return n=i&&i.constructor&&i.constructor.name?"instance of ".concat(i.constructor.name):"type ".concat(r(i)),"Expected ".concat(t,' to be returned from the "').concat(e,'"')+" function but got ".concat(n,".")},TypeError),l("ERR_MISSING_ARGS",function(){for(var t=arguments.length,e=new Array(t),r=0;r<t;r++)e[r]=arguments[r];void 0===o&&(o=i(4148)),o(e.length>0,"At least one arg needs to be specified");var n="The ",s=e.length;switch(e=e.map(function(t){return'"'.concat(t,'"')}),s){case 1:n+="".concat(e[0]," argument");break;case 2:n+="".concat(e[0]," and ").concat(e[1]," arguments");break;default:n+=e.slice(0,s-1).join(", "),n+=", and ".concat(e[s-1]," arguments")}return"".concat(n," must be specified")},TypeError),t.exports.codes=h},9600:t=>{"use strict";var e,i,r=Function.prototype.toString,n="object"==typeof Reflect&&null!==Reflect&&Reflect.apply;if("function"==typeof n&&"function"==typeof Object.defineProperty)try{e=Object.defineProperty({},"length",{get:function(){throw i}}),i={},n(function(){throw 42},null,e)}catch(t){t!==i&&(n=null)}else n=null;var s=/^\s*class\b/,o=function(t){try{var e=r.call(t);return s.test(e)}catch(t){return!1}},a=function(t){try{return!o(t)&&(r.call(t),!0)}catch(t){return!1}},h=Object.prototype.toString,l="function"==typeof Symbol&&!!Symbol.toStringTag,u=!(0 in[,]),c=function(){return!1};if("object"==typeof document){var d=document.all;h.call(d)===h.call(document.all)&&(c=function(t){if((u||!t)&&(void 0===t||"object"==typeof t))try{var e=h.call(t);return("[object HTMLAllCollection]"===e||"[object HTML document.all class]"===e||"[object HTMLCollection]"===e||"[object Object]"===e)&&null==t("")}catch(t){}return!1})}t.exports=n?function(t){if(c(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;try{n(t,null,e)}catch(t){if(t!==i)return!1}return!o(t)&&a(t)}:function(t){if(c(t))return!0;if(!t)return!1;if("function"!=typeof t&&"object"!=typeof t)return!1;if(l)return a(t);if(o(t))return!1;var e=h.call(t);return!("[object Function]"!==e&&"[object GeneratorFunction]"!==e&&!/^\[object HTML/.test(e))&&a(t)}},9610:(t,e,i)=>{"use strict";i.d(e,{A:()=>s});var r=i(2383),n=i(3149);const s=function(t){if(!(0,n.A)(t))return!1;var e=(0,r.A)(t);return"[object Function]"==e||"[object GeneratorFunction]"==e||"[object AsyncFunction]"==e||"[object Proxy]"==e}},9612:t=>{"use strict";t.exports=Object},9629:(t,e,i)=>{"use strict";var r=i(2861).Buffer,n=i(3527);function s(t){if(r.isBuffer(t))return t;if("string"==typeof t)return r.from(t,"base64");throw new TypeError("ECDSA signature must be a Base64 string or a Buffer")}function o(t,e,i){for(var r=0;e+r<i&&0===t[e+r];)++r;return t[e+r]>=128&&--r,r}t.exports={derToJose:function(t,e){t=s(t);var i=n(e),o=i+1,a=t.length,h=0;if(48!==t[h++])throw new Error('Could not find expected "seq"');var l=t[h++];if(129===l&&(l=t[h++]),a-h<l)throw new Error('"seq" specified length of "'+l+'", only "'+(a-h)+'" remaining');if(2!==t[h++])throw new Error('Could not find expected "int" for "r"');var u=t[h++];if(a-h-2<u)throw new Error('"r" specified length of "'+u+'", only "'+(a-h-2)+'" available');if(o<u)throw new Error('"r" specified length of "'+u+'", max of "'+o+'" is acceptable');var c=h;if(h+=u,2!==t[h++])throw new Error('Could not find expected "int" for "s"');var d=t[h++];if(a-h!==d)throw new Error('"s" specified length of "'+d+'", expected "'+(a-h)+'"');if(o<d)throw new Error('"s" specified length of "'+d+'", max of "'+o+'" is acceptable');var f=h;if((h+=d)!==a)throw new Error('Expected to consume entire buffer, but "'+(a-h)+'" bytes remain');var p=i-u,m=i-d,g=r.allocUnsafe(p+u+m+d);for(h=0;h<p;++h)g[h]=0;t.copy(g,h,c+Math.max(-p,0),c+u);for(var v=h=i;h<v+m;++h)g[h]=0;return t.copy(g,h,f+Math.max(-m,0),f+d),(g=g.toString("base64")).replace(/=/g,"").replace(/\+/g,"-").replace(/\//g,"_")},joseToDer:function(t,e){t=s(t);var i=n(e),a=t.length;if(a!==2*i)throw new TypeError('"'+e+'" signatures must be "'+2*i+'" bytes, saw "'+a+'"');var h=o(t,0,i),l=o(t,i,t.length),u=i-h,c=i-l,d=2+u+1+1+c,f=d<128,p=r.allocUnsafe((f?2:3)+d),m=0;return p[m++]=48,f?p[m++]=d:(p[m++]=129,p[m++]=255&d),p[m++]=2,p[m++]=u,h<0?(p[m++]=0,m+=t.copy(p,m,0,i)):m+=t.copy(p,m,h,i),p[m++]=2,p[m++]=c,l<0?(p[m++]=0,t.copy(p,m,i)):t.copy(p,m,i+l),p}}},9636:(t,e,i)=>{"use strict";i.d(e,{c:()=>o});var r=i(9313),n=i(9252);const s=new r.u;class o{constructor(t=1/0,e=1/0,i=-1/0,r=-1/0){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=s,this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}get rectangle(){this._rectangle||(this._rectangle=new n.M);const t=this._rectangle;return this.minX>this.maxX||this.minY>this.maxY?(t.x=0,t.y=0,t.width=0,t.height=0):t.copyFromBounds(this),t}clear(){return this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.matrix=s,this}set(t,e,i,r){this.minX=t,this.minY=e,this.maxX=i,this.maxY=r}addFrame(t,e,i,r,n){n||(n=this.matrix);const s=n.a,o=n.b,a=n.c,h=n.d,l=n.tx,u=n.ty;let c=this.minX,d=this.minY,f=this.maxX,p=this.maxY,m=s*t+a*e+l,g=o*t+h*e+u;m<c&&(c=m),g<d&&(d=g),m>f&&(f=m),g>p&&(p=g),m=s*i+a*e+l,g=o*i+h*e+u,m<c&&(c=m),g<d&&(d=g),m>f&&(f=m),g>p&&(p=g),m=s*t+a*r+l,g=o*t+h*r+u,m<c&&(c=m),g<d&&(d=g),m>f&&(f=m),g>p&&(p=g),m=s*i+a*r+l,g=o*i+h*r+u,m<c&&(c=m),g<d&&(d=g),m>f&&(f=m),g>p&&(p=g),this.minX=c,this.minY=d,this.maxX=f,this.maxY=p}addRect(t,e){this.addFrame(t.x,t.y,t.x+t.width,t.y+t.height,e)}addBounds(t,e){this.addFrame(t.minX,t.minY,t.maxX,t.maxY,e)}addBoundsMask(t){this.minX=this.minX>t.minX?this.minX:t.minX,this.minY=this.minY>t.minY?this.minY:t.minY,this.maxX=this.maxX<t.maxX?this.maxX:t.maxX,this.maxY=this.maxY<t.maxY?this.maxY:t.maxY}applyMatrix(t){const e=this.minX,i=this.minY,r=this.maxX,n=this.maxY,{a:s,b:o,c:a,d:h,tx:l,ty:u}=t;let c=s*e+a*i+l,d=o*e+h*i+u;this.minX=c,this.minY=d,this.maxX=c,this.maxY=d,c=s*r+a*i+l,d=o*r+h*i+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=s*e+a*n+l,d=o*e+h*n+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY,c=s*r+a*n+l,d=o*r+h*n+u,this.minX=c<this.minX?c:this.minX,this.minY=d<this.minY?d:this.minY,this.maxX=c>this.maxX?c:this.maxX,this.maxY=d>this.maxY?d:this.maxY}fit(t){return this.minX<t.left&&(this.minX=t.left),this.maxX>t.right&&(this.maxX=t.right),this.minY<t.top&&(this.minY=t.top),this.maxY>t.bottom&&(this.maxY=t.bottom),this}fitBounds(t,e,i,r){return this.minX<t&&(this.minX=t),this.maxX>e&&(this.maxX=e),this.minY<i&&(this.minY=i),this.maxY>r&&(this.maxY=r),this}pad(t,e=t){return this.minX-=t,this.maxX+=t,this.minY-=e,this.maxY+=e,this}ceil(){return this.minX=Math.floor(this.minX),this.minY=Math.floor(this.minY),this.maxX=Math.ceil(this.maxX),this.maxY=Math.ceil(this.maxY),this}clone(){return new o(this.minX,this.minY,this.maxX,this.maxY)}scale(t,e=t){return this.minX*=t,this.minY*=e,this.maxX*=t,this.maxY*=e,this}get x(){return this.minX}set x(t){const e=this.maxX-this.minX;this.minX=t,this.maxX=t+e}get y(){return this.minY}set y(t){const e=this.maxY-this.minY;this.minY=t,this.maxY=t+e}get width(){return this.maxX-this.minX}set width(t){this.maxX=this.minX+t}get height(){return this.maxY-this.minY}set height(t){this.maxY=this.minY+t}get left(){return this.minX}get right(){return this.maxX}get top(){return this.minY}get bottom(){return this.maxY}get isPositive(){return this.maxX-this.minX>0&&this.maxY-this.minY>0}get isValid(){return this.minX+this.minY!==1/0}addVertexData(t,e,i,r){let n=this.minX,s=this.minY,o=this.maxX,a=this.maxY;r||(r=this.matrix);const h=r.a,l=r.b,u=r.c,c=r.d,d=r.tx,f=r.ty;for(let r=e;r<i;r+=2){const e=t[r],i=t[r+1],p=h*e+u*i+d,m=l*e+c*i+f;n=p<n?p:n,s=m<s?m:s,o=p>o?p:o,a=m>a?m:a}this.minX=n,this.minY=s,this.maxX=o,this.maxY=a}containsPoint(t,e){return this.minX<=t&&this.minY<=e&&this.maxX>=t&&this.maxY>=e}toString(){return`[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`}copyFrom(t){return this.minX=t.minX,this.minY=t.minY,this.maxX=t.maxX,this.maxY=t.maxY,this}}},9673:(t,e,i)=>{var r=e;r.Reporter=i(9220).a,r.DecoderBuffer=i(7227).t,r.EncoderBuffer=i(7227).d,r.Node=i(993)},9675:t=>{"use strict";t.exports=TypeError},9703:(t,e,i)=>{"use strict";i.d(e,{A:()=>o});var r=i(2383),n=i(2049),s=i(3098);const o=function(t){return"string"==typeof t||!(0,n.A)(t)&&(0,s.A)(t)&&"[object String]"==(0,r.A)(t)}},9721:(t,e,i)=>{"use strict";var r=i(6556),n=i(4035),s=r("RegExp.prototype.exec"),o=i(9675);t.exports=function(t){if(!n(t))throw new o("`regex` must be a RegExp");return function(e){return null!==s(t,e)}}},9759:(t,e,i)=>{"use strict";i.d(e,{A:()=>r});const r=function(t,e){var i=-1,r=t.length;for(e||(e=Array(r));++i<r;)e[i]=t[i];return e}},9838:()=>{},9903:(t,e,i)=>{"use strict";function r(t,e,i){const r=t.length;let n;if(e>=r||0===i)return;const s=r-(i=e+i>r?r-e:i);for(n=e;n<s;++n)t[n]=t[n+i];t.length=s}i.d(e,{d:()=>r})},9939:(t,e,i)=>{"use strict";function r(t){return t+=0===t?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,1+(t|=t>>>16)}function n(t){return!(t&t-1||!t)}i.d(e,{U5:()=>r,f3:()=>n})},9957:(t,e,i)=>{"use strict";var r=Function.prototype.call,n=Object.prototype.hasOwnProperty,s=i(6743);t.exports=s.call(r,n)},9999:(t,e,i)=>{"use strict";i.d(e,{A:()=>l});var r=i(423),n=i(3149),s=i(7271);var o=Object.prototype.hasOwnProperty;const a=function(t){if(!(0,n.A)(t))return function(t){var e=[];if(null!=t)for(var i in Object(t))e.push(i);return e}(t);var e=(0,s.A)(t),i=[];for(var r in t)("constructor"!=r||!e&&o.call(t,r))&&i.push(r);return i};var h=i(8446);const l=function(t){return(0,h.A)(t)?(0,r.A)(t,!0):a(t)}}},__webpack_module_cache__={},webpackQueues,webpackExports,webpackError,resolveQueue,inProgress,dataWebpackPrefix;function __webpack_require__(t){var e=__webpack_module_cache__[t];if(void 0!==e)return e.exports;var i=__webpack_module_cache__[t]={id:t,loaded:!1,exports:{}};return __webpack_modules__[t].call(i.exports,i,i.exports,__webpack_require__),i.loaded=!0,i.exports}__webpack_require__.m=__webpack_modules__,webpackQueues="function"==typeof Symbol?Symbol("webpack queues"):"__webpack_queues__",webpackExports="function"==typeof Symbol?Symbol("webpack exports"):"__webpack_exports__",webpackError="function"==typeof Symbol?Symbol("webpack error"):"__webpack_error__",resolveQueue=t=>{t&&t.d<1&&(t.d=1,t.forEach(t=>t.r--),t.forEach(t=>t.r--?t.r++:t()))},__webpack_require__.a=(t,e,i)=>{var r;i&&((r=[]).d=-1);var n,s,o,a=new Set,h=t.exports,l=new Promise((t,e)=>{o=e,s=t});l[webpackExports]=h,l[webpackQueues]=t=>(r&&t(r),a.forEach(t),l.catch(t=>{})),t.exports=l,e(t=>{var e;n=(t=>t.map(t=>{if(null!==t&&"object"==typeof t){if(t[webpackQueues])return t;if(t.then){var e=[];e.d=0,t.then(t=>{i[webpackExports]=t,resolveQueue(e)},t=>{i[webpackError]=t,resolveQueue(e)});var i={};return i[webpackQueues]=t=>t(e),i}}var r={};return r[webpackQueues]=t=>{},r[webpackExports]=t,r}))(t);var i=()=>n.map(t=>{if(t[webpackError])throw t[webpackError];return t[webpackExports]}),s=new Promise(t=>{(e=()=>t(i)).r=0;var s=t=>t!==r&&!a.has(t)&&(a.add(t),t&&!t.d&&(e.r++,t.push(e)));n.map(t=>t[webpackQueues](s))});return e.r?s:i()},t=>(t?o(l[webpackError]=t):s(h),resolveQueue(r))),r&&r.d<0&&(r.d=0)},__webpack_require__.n=t=>{var e=t&&t.__esModule?()=>t.default:()=>t;return __webpack_require__.d(e,{a:e}),e},__webpack_require__.d=(t,e)=>{for(var i in e)__webpack_require__.o(e,i)&&!__webpack_require__.o(t,i)&&Object.defineProperty(t,i,{enumerable:!0,get:e[i]})},__webpack_require__.f={},__webpack_require__.e=t=>Promise.all(Object.keys(__webpack_require__.f).reduce((e,i)=>(__webpack_require__.f[i](t,e),e),[])),__webpack_require__.u=t=>"ide-"+t+"-"+{162:"9e6251d0",647:"ea9c8020",852:"ff3e0385"}[t]+".js",__webpack_require__.miniCssF=t=>{},__webpack_require__.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(t){if("object"==typeof window)return window}}(),__webpack_require__.o=(t,e)=>Object.prototype.hasOwnProperty.call(t,e),inProgress={},dataWebpackPrefix="@gp/particlesystem:",__webpack_require__.l=(t,e,i,r)=>{if(inProgress[t])inProgress[t].push(e);else{var n,s;if(void 0!==i)for(var o=document.getElementsByTagName("script"),a=0;a<o.length;a++){var h=o[a];if(h.getAttribute("src")==t||h.getAttribute("data-webpack")==dataWebpackPrefix+i){n=h;break}}n||(s=!0,(n=document.createElement("script")).charset="utf-8",n.timeout=120,__webpack_require__.nc&&n.setAttribute("nonce",__webpack_require__.nc),n.setAttribute("data-webpack",dataWebpackPrefix+i),n.src=t),inProgress[t]=[e];var l=(e,i)=>{n.onerror=n.onload=null,clearTimeout(u);var r=inProgress[t];if(delete inProgress[t],n.parentNode&&n.parentNode.removeChild(n),r&&r.forEach(t=>t(i)),e)return e(i)},u=setTimeout(l.bind(null,void 0,{type:"timeout",target:n}),12e4);n.onerror=l.bind(null,n.onerror),n.onload=l.bind(null,n.onload),s&&document.head.appendChild(n)}},__webpack_require__.r=t=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},__webpack_require__.nmd=t=>(t.paths=[],t.children||(t.children=[]),t),(()=>{var t;__webpack_require__.g.importScripts&&(t=__webpack_require__.g.location+"");var e=__webpack_require__.g.document;if(!t&&e&&(e.currentScript&&"SCRIPT"===e.currentScript.tagName.toUpperCase()&&(t=e.currentScript.src),!t)){var i=e.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!t||!/^http(s?):/.test(t));)t=i[r--].src}if(!t)throw new Error("Automatic publicPath is not supported in this browser");t=t.replace(/^blob:/,"").replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),__webpack_require__.p=t})(),(()=>{var t={792:0};__webpack_require__.f.j=(e,i)=>{var r=__webpack_require__.o(t,e)?t[e]:void 0;if(0!==r)if(r)i.push(r[2]);else{var n=new Promise((i,n)=>r=t[e]=[i,n]);i.push(r[2]=n);var s=__webpack_require__.p+__webpack_require__.u(e),o=new Error;__webpack_require__.l(s,i=>{if(__webpack_require__.o(t,e)&&(0!==(r=t[e])&&(t[e]=void 0),r)){var n=i&&("load"===i.type?"missing":i.type),s=i&&i.target&&i.target.src;o.message="Loading chunk "+e+" failed.\n("+n+": "+s+")",o.name="ChunkLoadError",o.type=n,o.request=s,r[1](o)}},"chunk-"+e,e)}};var e=(e,i)=>{var r,n,[s,o,a]=i,h=0;if(s.some(e=>0!==t[e])){for(r in o)__webpack_require__.o(o,r)&&(__webpack_require__.m[r]=o[r]);a&&a(__webpack_require__)}for(e&&e(i);h<s.length;h++)n=s[h],__webpack_require__.o(t,n)&&t[n]&&t[n][0](),t[n]=0},i=self.webpackChunk_gp_particlesystem=self.webpackChunk_gp_particlesystem||[];i.forEach(e.bind(null,0)),i.push=e.bind(null,i.push.bind(i))})();var __webpack_exports__=__webpack_require__(3870)})();